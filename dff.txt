diff --git a/jakarta-jmeter/.cvsignore b/jakarta-jmeter/.cvsignore
new file mode 100644
index 0000000..5ef2a1e
--- /dev/null
+++ b/jakarta-jmeter/.cvsignore
@@ -0,0 +1,2 @@
+velocity.log
+bin/classes
diff --git a/jakarta-jmeter/CVS/Entries b/jakarta-jmeter/CVS/Entries
new file mode 100644
index 0000000..92816ae
--- /dev/null
+++ b/jakarta-jmeter/CVS/Entries
@@ -0,0 +1,11 @@
+/.cvsignore/1.2/Fri Aug 17 21:21:36 2001//Tv1_7_3
+/LICENSE/1.3/Thu Mar 29 03:01:48 2001//Tv1_7_3
+/README/1.7/Sat May  4 01:02:01 2002//Tv1_7_3
+/build.bat/1.7/Tue May 28 17:30:18 2002//Tv1_7_3
+/build.sh/1.2/Mon Sep 24 13:16:59 2001//Tv1_7_3
+/build.xml/1.70/Wed Aug 14 18:33:15 2002//Tv1_7_3
+/lcp.bat/1.2/Mon Sep 24 12:02:27 2001//Tv1_7_3
+D/bin////
+D/lib////
+D/src////
+D/xdocs////
diff --git a/jakarta-jmeter/CVS/Repository b/jakarta-jmeter/CVS/Repository
new file mode 100644
index 0000000..6678df4
--- /dev/null
+++ b/jakarta-jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter
diff --git a/jakarta-jmeter/CVS/Root b/jakarta-jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/CVS/Tag b/jakarta-jmeter/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/CVS/Template b/jakarta-jmeter/CVS/Template
new file mode 100644
index 0000000..d897e54
--- /dev/null
+++ b/jakarta-jmeter/CVS/Template
@@ -0,0 +1,19 @@
+PR:
+Obtained from:
+Submitted by:	
+Reviewed by:	
+CVS: ----------------------------------------------------------------------
+CVS: PR:
+CVS:   If this change addresses a PR in the problem report tracking
+CVS:   database, then enter the PR number(s) here.
+CVS: Obtained from:
+CVS:   If this change has been taken from another system, such as NCSA,
+CVS:   then name the system in this line, otherwise delete it.
+CVS: Submitted by:
+CVS:   If this code has been contributed to Apache by someone else; i.e.,
+CVS:   they sent us a patch or a new module, then include their name/email
+CVS:   address here. If this is your work then delete this line.
+CVS: Reviewed by:
+CVS:   If we are doing pre-commit code reviews and someone else has
+CVS:   reviewed your changes, include their name(s) here.
+CVS:   If you have not had it reviewed then delete this line.
diff --git a/jakarta-jmeter/LICENSE b/jakarta-jmeter/LICENSE
new file mode 100644
index 0000000..637cdd8
--- /dev/null
+++ b/jakarta-jmeter/LICENSE
@@ -0,0 +1,51 @@
+The Apache Software License, Version 1.1
+
+Copyright (c) 2001 The Apache Software Foundation.  All rights
+reserved.
+
+Redistribution and use in source and binary forms, with or without
+modification, are permitted provided that the following conditions
+are met:
+
+1. Redistributions of source code must retain the above copyright
+notice, this list of conditions and the following disclaimer.
+
+2. Redistributions in binary form must reproduce the above copyright
+notice, this list of conditions and the following disclaimer in
+the documentation and/or other materials provided with the
+distribution.
+
+3. The end-user documentation included with the redistribution,
+if any, must include the following acknowledgment:
+"This product includes software developed by the
+Apache Software Foundation (http://www.apache.org/)."
+Alternately, this acknowledgment may appear in the software itself,
+if and wherever such third-party acknowledgments normally appear.
+
+4. The names "Apache" and "Apache Software Foundation" and
+"Apache JMeter" must not be used to endorse or promote products
+derived from this software without prior written permission. For
+written permission, please contact apache@apache.org.
+
+5. Products derived from this software may not be called "Apache",
+"Apache JMeter", nor may "Apache" appear in their name, without
+prior written permission of the Apache Software Foundation.
+
+THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+SUCH DAMAGE.
+====================================================================
+
+This software consists of voluntary contributions made by many
+individuals on behalf of the Apache Software Foundation.  For more
+information on the Apache Software Foundation, please see
+<http://www.apache.org/>.
\ No newline at end of file
diff --git a/jakarta-jmeter/README b/jakarta-jmeter/README
new file mode 100644
index 0000000..754d4c6
--- /dev/null
+++ b/jakarta-jmeter/README
@@ -0,0 +1,84 @@
+
+                         A P A C H E   J M E T E R
+
+
+  What is it?
+  -----------
+
+  Apache JMeter is a 100% pure Java application designed to test
+  and measure performance.  It may be used
+  as a highly portable server benchmark as well as multiclient
+  load generator.
+
+  The Latest Version
+  ------------------
+
+  Details of the latest version can be found on the Java Apache 
+  Project web site (http://jakarta.apache.org).
+
+  Requirements
+  ------------
+
+  The following requirements exist for installing Apache JMeter:
+
+   o  Java Interpreter:
+   ***Currently in this Beta release a 1.2 runtime is required,
+
+      A fully compliant Java 1.1 Runtime Environment is required for 
+      Apache JMeter to execute. Since Apache JMeter uses _only_ standard
+      Java APIs (java.*), please, do not file in a bug report if your 
+      JRE fails to execute Apache JMeter because a class implementation
+      is missing, or not fully compliant.
+
+   o  Java JFC (Swing components):
+
+      These GUI extentions are required for proper functioning. 
+      
+      Due to incompatibility in the package names, the precompiled version 
+      works only with Swing placed under the packages "javax.swing.*" while
+      other placing are not supported because considered non-standard.
+      
+   o  SAX 1.0 Compliant Parser [OPTIONAL]:
+      
+      A Java SAX 1.0 Parser is required to restore HTTPSamples  You can save 
+      samples without the parser but you will not be able to restore them.  
+      you can specify the parser class in the xml.parser property in 
+      jmeter.properties
+
+   o  Java Compiler [OPTIONAL]:
+
+      A Java compiler is not needed since the distribution includes a 
+      precompiled java binary archive. Note that a compiler is required
+      if you plan to build plugin classes for Apache JMeter.
+
+  Installation Instructions and Documentation
+  -------------------------------------------
+
+  The documentation available as of the date of this release is
+  also included, in HTML format, in the docs/ directory, and it may
+  be browsed starting from the file called index.html.
+
+  If you have downloaded a nightly build, please cd to the jakarta-jmeter
+  directory and type "./build.sh" (Unix/Linux) or "build" (Windows). This
+  should compile the application and enable you to run jmeter from the /bin
+  directory.
+
+  NOTES for 1.7.1
+  ---------------
+
+  JDBC testing is working correctly in this version.
+
+  Recording HTTP sampes via the proxy server has been improved.  It is more robust.
+  The HTML Link Parser has been improved to be more forgiving.
+
+
+
+  Licensing and legal issues
+  --------------------------
+
+  For legal and licensing issues, please look in the legal section of
+  the documentation.
+
+
+  Thanks for using Apache JMeter.
+
diff --git a/jakarta-jmeter/bin/CVS/Entries b/jakarta-jmeter/bin/CVS/Entries
new file mode 100644
index 0000000..0c789da
--- /dev/null
+++ b/jakarta-jmeter/bin/CVS/Entries
@@ -0,0 +1,9 @@
+/jmeter/1.20/Wed Jun  5 03:29:06 2002//Tv1_7_3
+/jmeter-server/1.5/Sat Jun 29 00:36:59 2002//Tv1_7_3
+/jmeter-server.bat/1.5/Wed Jun  5 03:29:06 2002//Tv1_7_3
+/jmeter.bat/1.21/Wed Jun  5 03:29:06 2002//Tv1_7_3
+/jmeter.properties/1.42/Thu Aug  8 16:23:40 2002//Tv1_7_3
+/log4j.conf/1.4/Thu May 23 15:47:03 2002//Tv1_7_3
+/users.dtd/1.1/Wed May  1 02:02:19 2002//Tv1_7_3
+/users.xml/1.1/Wed May  1 02:02:19 2002//Tv1_7_3
+D/testfiles////
diff --git a/jakarta-jmeter/bin/CVS/Repository b/jakarta-jmeter/bin/CVS/Repository
new file mode 100644
index 0000000..5b086c2
--- /dev/null
+++ b/jakarta-jmeter/bin/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/bin
diff --git a/jakarta-jmeter/bin/CVS/Root b/jakarta-jmeter/bin/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/bin/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/bin/CVS/Tag b/jakarta-jmeter/bin/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/bin/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/bin/jmeter b/jakarta-jmeter/bin/jmeter
new file mode 100644
index 0000000..f5e4986
--- /dev/null
+++ b/jakarta-jmeter/bin/jmeter
@@ -0,0 +1,3 @@
+#! /bin/sh
+
+java -Xincgc -jar `dirname $0`/ApacheJMeter.jar "$@"
diff --git a/jakarta-jmeter/bin/jmeter-server b/jakarta-jmeter/bin/jmeter-server
new file mode 100644
index 0000000..f4dc220
--- /dev/null
+++ b/jakarta-jmeter/bin/jmeter-server
@@ -0,0 +1,3 @@
+#!/bin/sh
+
+`dirname $0`/jmeter -s
diff --git a/jakarta-jmeter/bin/jmeter-server.bat b/jakarta-jmeter/bin/jmeter-server.bat
new file mode 100644
index 0000000..2e12ad8
--- /dev/null
+++ b/jakarta-jmeter/bin/jmeter-server.bat
@@ -0,0 +1,2 @@
+@echo off
+jmeter -s
diff --git a/jakarta-jmeter/bin/jmeter.bat b/jakarta-jmeter/bin/jmeter.bat
new file mode 100644
index 0000000..815c6d0
--- /dev/null
+++ b/jakarta-jmeter/bin/jmeter.bat
@@ -0,0 +1,33 @@
+@echo off
+if not "%OS%"=="Windows_NT" goto win9xStart
+:winNTStart
+@setlocal
+
+rem Need to check if we are using the 4NT shell...
+if "%eval[2+2]" == "4" goto setup4NT
+
+rem On NT/2K grab all arguments at once
+set JMETER_CMD_LINE_ARGS=%*
+goto doneStart
+
+:setup4NT
+set JMETER_CMD_LINE_ARGS=%$
+goto doneStart
+
+:win9xStart
+rem Slurp the command line arguments.  This loop allows for an unlimited number of 
+rem agruments (up to the command line limit, anyway).
+
+set JMETER_CMD_LINE_ARGS=
+
+:setupArgs
+if %1a==a goto doneStart
+set JMETER_CMD_LINE_ARGS=%JMETER_CMD_LINE_ARGS% %1
+shift
+goto setupArgs
+
+:doneStart
+rem This label provides a place for the argument list loop to break out 
+rem and for NT handling to skip to.
+
+java -Xincgc -jar ApacheJMeter.jar %JMETER_CMD_LINE_ARGS%
diff --git a/jakarta-jmeter/bin/jmeter.properties b/jakarta-jmeter/bin/jmeter.properties
new file mode 100644
index 0000000..39e6d92
--- /dev/null
+++ b/jakarta-jmeter/bin/jmeter.properties
@@ -0,0 +1,64 @@
+################################################################################
+# Apache JMeter Property file
+################################################################################
+#Paths to search for classes (";" must be the separator)
+search_paths=lib/ext
+
+# Netscape HTTP Cookie file
+cookies=cookies
+
+# Authorization
+authorization=authorization
+
+#Working directory
+user.dir=.
+
+# XML Reader(Parser) - Must implement SAX 2 specs
+xml.parser=org.apache.xerces.parsers.SAXParser
+
+#Classname of the ssl provider to be used (to enable testing of https urls)
+#And the package name where Stream Handlers can be found
+#These provided defaults can be uncommented, and they will work if you are using
+#Sun's JSSE implementation.
+
+#ssl.provider=com.sun.net.ssl.internal.ssl.Provider
+#ssl.provider=iaik.security.jsse.provider.IAIKJSSEProvider
+#ssl.pkgs=com.sun.net.ssl.internal.www.protocol
+
+#The location of the truststore (trusted certificates) if other than the default.
+#you can uncomment this and change the path to the correct location.
+#javax.net.ssl.trustStore=/path/to/cacerts
+
+#Alternative protocol of the ssl provider for IAIK JCE + iSaSiLk
+#You can also override IAIK specific Providers as well.
+
+#ssl.pkgs=iaik.protocol
+#ssl.provider=com.mycompany.security.provider.SmartProvider
+#iaik.provider=com.mycompany.security.provider.SmartSSLProvider
+
+#Flag for whether to output debug messages to System.err
+#To enable it, set the value to "all"  Note, for it to work with
+#JSSE, it needs to be done from the Java command (i.e. -Djavax.net.debug=all)
+javax.net.debug=all
+
+#Classname of the Swing default UI
+#Installed Look and Feel classes on Windows are:
+#  Metal   = javax.swing.plaf.metal.MetalLookAndFeel
+#  Motif   = com.sun.java.swing.plaf.motif.MotifLookAndFeel
+#  Windows = com.sun.java.swing.plaf.windows.WindowsLookAndFeel
+jmeter.laf=javax.swing.plaf.metal.MetalLookAndFeel
+
+#icons
+timer.tree.icon=timer.gif
+listener.tree.icon=ear.gif
+bench.tree.icon=clipboard.gif
+thread.tree.icon=thread.gif
+control.tree.icon=knob.gif
+plan.tree.icon=beaker.gif
+config.tree.icon=leafnode.gif
+
+# Remote Hosts - comma delimited
+#remote_hosts=127.0.0.1
+
+#Components to not display in JMeter GUI
+not_in_menu=Remote Method Configuration,JNDI Configuration,JNDI Lookup Configuration,JNDI Request,Default Controller,org.apache.jmeter.control.DynamicController, org.apache.jmeter.protocol.http.control.Cookie,org.apache.jmeter.protocol.http.control.Authorization,org.apache.jmeter.config.LoginConfig,Header,org.apache.jmeter.protocol.http.config.UrlConfigFull,org.apache.jmeter.protocol.http.config.MultipartUrlConfig
diff --git a/jakarta-jmeter/bin/log4j.conf b/jakarta-jmeter/bin/log4j.conf
new file mode 100644
index 0000000..2c96cf6
--- /dev/null
+++ b/jakarta-jmeter/bin/log4j.conf
@@ -0,0 +1,21 @@
+# Set appender specific options
+log4j.appender.Root_Appender=org.apache.log4j.RollingFileAppender
+log4j.appender.Root_Appender.File=root.log
+log4j.appender.Root_Appender.Append=true
+log4j.appender.Root_Appender.MaxBackupIndex=0
+log4j.appender.Root_Appender.layout=org.apache.log4j.PatternLayout
+log4j.appender.Root_Appender.layout.ConversionPattern=%-5p %d{MM/dd, hh:mm:ss} %-20.30c %m%n
+
+log4j.appender.File_Appender=org.apache.log4j.RollingFileAppender
+log4j.appender.File_Appender.File=extra.log
+log4j.appender.File_Appender.Append=false
+log4j.appender.File_Appender.layout=org.apache.log4j.PatternLayout
+log4j.appender.File_Appender.layout.ConversionPattern=%r %d{MM/dd, hh:mm:ss} %-5p %-50.50c %m%n
+
+log4j.appender.SystemOut_Appender=org.apache.log4j.ConsoleAppender
+log4j.appender.SystemOut_Appender.layout=org.apache.log4j.SimpleLayout
+
+
+# Set the appenders for the categories
+log4j.rootCategory=INFO,Root_Appender
+#log4j.configDebug
\ No newline at end of file
diff --git a/jakarta-jmeter/bin/testfiles/AssertionTestPlan.jmx b/jakarta-jmeter/bin/testfiles/AssertionTestPlan.jmx
new file mode 100644
index 0000000..4ee191f
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/AssertionTestPlan.jmx
@@ -0,0 +1,45 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Thread Group" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="HTTP Request" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+<assertion name="Assertion" class="org.apache.jmeter.assertions.Assertion" testType="2" testField="sampler.RESPONSE">
+<testString>&lt;/html&gt;</testString>
+</assertion>
+</HttpTestSample>
+
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="assertion.dat"/>
+<JMeterComponent type="org.apache.jmeter.reporters.AssertionReporter" name="Assertion Results"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/AuthManagerTestPlan.jmx b/jakarta-jmeter/bin/testfiles/AuthManagerTestPlan.jmx
new file mode 100644
index 0000000..212449d
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/AuthManagerTestPlan.jmx
@@ -0,0 +1,90 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Thread Group" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+<AuthManager name="HTTP Authorization Manager">
+<ConfigElement type="org.apache.jmeter.protocol.http.control.Authorization">
+<property name="password">spot</property>
+<property name="url">http://localhost/secret</property>
+<property name="username">kevin</property>
+</ConfigElement>
+</AuthManager>
+
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">HTTP Request Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="domain">localhost</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="SecretPage1" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/secret/index.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="SecretPage2" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/secret/index2.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="NoSecretPage" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/index.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="auth-manager.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/CVS/Entries b/jakarta-jmeter/bin/testfiles/CVS/Entries
new file mode 100644
index 0000000..99a2da3
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/CVS/Entries
@@ -0,0 +1,15 @@
+/AssertionTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/AuthManagerTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/HeaderManagerTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/InterleaveTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/InterleaveTestPlan2.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/LoopTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/Modification Manager.jmx/1.1/Fri Aug 17 21:21:36 2001//Tv1_7_3
+/OnceOnlyTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/ProxyServerTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/SimpleTestPlan.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/Test Plan.jmx/1.1/Fri Aug 17 21:21:36 2001//Tv1_7_3
+/URLRewritingExample.jmx/1.1/Wed Aug  7 18:49:37 2002//Tv1_7_3
+/assertion.jmx/1.1/Thu Jun 13 00:45:14 2002//Tv1_7_3
+/proxy.jmx/1.1/Wed Mar  6 03:52:27 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/bin/testfiles/CVS/Repository b/jakarta-jmeter/bin/testfiles/CVS/Repository
new file mode 100644
index 0000000..87ecad1
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/bin/testfiles
diff --git a/jakarta-jmeter/bin/testfiles/CVS/Root b/jakarta-jmeter/bin/testfiles/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/bin/testfiles/CVS/Tag b/jakarta-jmeter/bin/testfiles/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/bin/testfiles/HeaderManagerTestPlan.jmx b/jakarta-jmeter/bin/testfiles/HeaderManagerTestPlan.jmx
new file mode 100644
index 0000000..6869b23
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/HeaderManagerTestPlan.jmx
@@ -0,0 +1,48 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Thread Group" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+<HeaderManager name="HTTP Header Manager">
+<ConfigElement type="org.apache.jmeter.protocol.http.control.Header">
+<property name="name">User-Agent</property>
+<property name="value">Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)</property>
+</ConfigElement>
+</HeaderManager>
+
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="HTTP Request" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="header-manager.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/InterleaveTestPlan.jmx b/jakarta-jmeter/bin/testfiles/InterleaveTestPlan.jmx
new file mode 100644
index 0000000..d5bf681
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/InterleaveTestPlan.jmx
@@ -0,0 +1,87 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Jakarta Users" numThreads="2" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="5">
+<configElements>
+</configElements>
+<controllers>
+<Controller type="org.apache.jmeter.control.InterleaveControl" name="Interleave Controller">
+<configElements>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="News Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="domain"></property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/news.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="FAQ Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/faqs.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Gump Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/gump</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="interleave-test.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/InterleaveTestPlan2.jmx b/jakarta-jmeter/bin/testfiles/InterleaveTestPlan2.jmx
new file mode 100644
index 0000000..69af227
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/InterleaveTestPlan2.jmx
@@ -0,0 +1,116 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Jakarta Users" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="8">
+<configElements>
+</configElements>
+<controllers>
+<Controller type="org.apache.jmeter.control.InterleaveControl" name="Interleave Controller">
+<configElements>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+<Controller type="org.apache.jmeter.control.InterleaveControl" name="Interleave Controller">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Home Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="CVS Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/cvsindex.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+<Controller type="org.apache.jmeter.control.InterleaveControl" name="Interleave Controller">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Bug Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/bugs.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="FAQ Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/faqs.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+</controllers>
+</Controller>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="interleave-test2.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/LoopTestPlan.jmx b/jakarta-jmeter/bin/testfiles/LoopTestPlan.jmx
new file mode 100644
index 0000000..c866e08
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/LoopTestPlan.jmx
@@ -0,0 +1,72 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Jakarta Users" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Home Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="5">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="News Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/news.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</LoopController>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="loop-test.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/Modification Manager.jmx b/jakarta-jmeter/bin/testfiles/Modification Manager.jmx
new file mode 100644
index 0000000..1c4ef83
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/Modification Manager.jmx	
@@ -0,0 +1,41 @@
+<?xml version="1.0"?>
+
+<Controller type="org.apache.jmeter.control.ModifyController" name="Modification Manager">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Web Testing">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="port">80</property>
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="domain">13.231.197.158</property>
+<property name="path"></property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<urlList>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="port">80</property>
+<property name="name">/xdx/admin/inspect_job.jsp</property>
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+<argument name="request.job_id">.*</argument>
+<argument name="request.action1">opjobadmin.action.inspect</argument>
+</Arguments>
+</property>
+<property name="domain"></property>
+<property name="path">/xdx/admin/inspect_job.jsp</property>
+<property name="method">GET</property>
+</ConfigElement>
+</urlList>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
\ No newline at end of file
diff --git a/jakarta-jmeter/bin/testfiles/OnceOnlyTestPlan.jmx b/jakarta-jmeter/bin/testfiles/OnceOnlyTestPlan.jmx
new file mode 100644
index 0000000..a26ab79
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/OnceOnlyTestPlan.jmx
@@ -0,0 +1,72 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Jakarta Users" numThreads="2" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="3">
+<configElements>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+<Controller type="org.apache.jmeter.control.OnceOnlyController" name="Once Only Controller">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Home Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Bug Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/site/bugs.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="once-only-test.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/ProxyServerTestPlan.jmx b/jakarta-jmeter/bin/testfiles/ProxyServerTestPlan.jmx
new file mode 100644
index 0000000..bb68bbe
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/ProxyServerTestPlan.jmx
@@ -0,0 +1,33 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Thread Group" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+<ProxyControl type="org.apache.jmeter.protocol.http.proxy.ProxyControl">
+<property name="port">8080</property>
+<property name="name">HTTP Proxy Server</property>
+<property name="includes"><Arguments>
+</Arguments>
+</property>
+<property name="excludes"><Arguments>
+</Arguments>
+</property>
+</ProxyControl>
+</configElements>
+<controllers>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/SimpleTestPlan.jmx b/jakarta-jmeter/bin/testfiles/SimpleTestPlan.jmx
new file mode 100644
index 0000000..03af422
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/SimpleTestPlan.jmx
@@ -0,0 +1,110 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Jakarta Users" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+<Controller type="org.apache.jmeter.control.LogicController" name="Ant Pages">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Home Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/ant/index.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="News Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/ant/antnews.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+<Controller type="org.apache.jmeter.control.LogicController" name="Log4J Pages">
+<configElements>
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Home Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/log4j/index.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="History Page" getImages="false">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.MultipartUrlConfig">
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="path">/log4j/docs/history.html</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<configElements>
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+<Filer type="org.apache.jmeter.reporters.Filer" name="File Reporter" verbose="true" append="false" autoFlush="false" viewSubmitData="true" file="simple-test.dat"/>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/Test Plan.jmx b/jakarta-jmeter/bin/testfiles/Test Plan.jmx
new file mode 100644
index 0000000..68d5ba9
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/Test Plan.jmx	
@@ -0,0 +1,69 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="ThreadGroup" numThreads="1">
+<controllers>
+<Controller type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="2">
+<configElements>
+<CookieManager name="Cookie Manager">
+</CookieManager>
+
+</configElements>
+<controllers>
+<HttpTestSample type="org.apache.jmeter.protocol.http.control.HttpTestSample" name="Web Testing">
+<defaultUrl>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="port">80</property>
+<property name="PROTOCOL">http</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="domain">13.231.197.158</property>
+<property name="path">xdx</property>
+<property name="method">GET</property>
+</ConfigElement></defaultUrl>
+<urlList>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Url Sample</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="domain"></property>
+<property name="path">nowway</property>
+</ConfigElement>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">Url Sample</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="domain"></property>
+<property name="path">xdx/login.html</property>
+</ConfigElement>
+</urlList>
+<configElements>
+<HeaderManager name="Header Manager">
+<ConfigElement type="org.apache.jmeter.protocol.http.control.Header">
+<property name="name">user-agent</property>
+<property name="value">jmeter</property>
+</ConfigElement>
+</HeaderManager>
+
+</configElements>
+<controllers>
+</controllers>
+</HttpTestSample>
+
+</controllers>
+</Controller>
+</controllers>
+<timers>
+</timers>
+<listeners>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/bin/testfiles/URLRewritingExample.jmx b/jakarta-jmeter/bin/testfiles/URLRewritingExample.jmx
new file mode 100644
index 0000000..c7db276
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/URLRewritingExample.jmx
@@ -0,0 +1,112 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">URL Re-writing Example</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">-1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.control.GenericController">
+<property name="TestElement.test_class">org.apache.jmeter.control.GenericController</property>
+<property name="TestElement.name">Simple Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LogicControllerGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="TestElement.name">Login</property>
+<property name="HTTPSampler.method">POST</property>
+<property name="HTTPSampler.port">80</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList">
+<testelement class="org.apache.jmeter.config.Argument">
+<property name="Argument.name">username</property>
+<property name="Argument.value">user</property>
+</testelement>
+<testelement class="org.apache.jmeter.config.Argument">
+<property name="Argument.name">password</property>
+<property name="Argument.value">password</property>
+</testelement>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/main.jsp</property>
+<property name="HTTPSampler.use_keepalive">true</property>
+<property name="HTTPSampler.domain">my.server.com</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="TestElement.name">Do Something interesting</property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/something_interesting.jsp</property>
+<property name="HTTPSampler.use_keepalive">true</property>
+<property name="HTTPSampler.domain">my.server.com</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="TestElement.name">Another Interesting Request</property>
+<property name="HTTPSampler.method">POST</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/another.jsp</property>
+<property name="HTTPSampler.use_keepalive">true</property>
+<property name="HTTPSampler.domain">my.server.com</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.modifier.URLRewritingModifier">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.modifier.URLRewritingModifier</property>
+<property name="TestElement.name">HTTP URL-Rewriting Modifier</property>
+<property name="argument_name">SESSION_ID</property>
+<property name="path_extension">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.modifier.gui.URLRewritingModifierGui</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/bin/testfiles/assertion.jmx b/jakarta-jmeter/bin/testfiles/assertion.jmx
new file mode 100644
index 0000000..1da8d52
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/assertion.jmx
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.assertions.Assertion">
+<property name="TestElement.test_class">org.apache.jmeter.assertions.Assertion</property>
+<property name="TestElement.name">Assertion</property>
+<property name="Assertion.test_type">2</property>
+<property name="Assertion.test_field">Assertion.response_data</property>
+<collection name="Asserion.test_strings" class="java.util.ArrayList">
+<string>save this string \d+</string>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.assertions.gui.AssertionGui</property>
+</testelement>
+</node>
diff --git a/jakarta-jmeter/bin/testfiles/proxy.jmx b/jakarta-jmeter/bin/testfiles/proxy.jmx
new file mode 100644
index 0000000..c6a20d1
--- /dev/null
+++ b/jakarta-jmeter/bin/testfiles/proxy.jmx
@@ -0,0 +1,31 @@
+<?xml version="1.0"?>
+
+<ThreadGroup name="Thread Group" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="-1">
+<configElements>
+</configElements>
+<controllers>
+<Controller type="org.apache.jmeter.control.LogicController" name="Simple Controller">
+<configElements>
+<ConfigElement type="org.apache.jmeter.protocol.http.config.UrlConfig">
+<property name="name">HTTP Request Defaults</property>
+<property name="PROTOCOL">http</property>
+<property name="domain">jakarta.apache.org</property>
+<property name="arguments"><Arguments>
+</Arguments>
+</property>
+<property name="method">GET</property>
+</ConfigElement>
+</configElements>
+<controllers>
+</controllers>
+</Controller>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+</listeners>
+</ThreadGroup>
diff --git a/jakarta-jmeter/bin/users.dtd b/jakarta-jmeter/bin/users.dtd
new file mode 100644
index 0000000..f244904
--- /dev/null
+++ b/jakarta-jmeter/bin/users.dtd
@@ -0,0 +1,11 @@
+<!ELEMENT allthreads (thread+)>
+<!ATTLIST thread
+>
+<!ELEMENT thread (parameter+)>
+<!ATTLIST parameter
+>
+<!ELEMENT parameter (paramname,paramvalue) >
+<!ELEMENT paramname   (#PCDATA)   >
+<!ELEMENT paramvalue  (#PCDATA)  >
+
+
diff --git a/jakarta-jmeter/bin/users.xml b/jakarta-jmeter/bin/users.xml
new file mode 100644
index 0000000..76cf9a1
--- /dev/null
+++ b/jakarta-jmeter/bin/users.xml
@@ -0,0 +1,45 @@
+<?xml version="1.0"?>
+<!DOCTYPE allthreads SYSTEM "users.dtd">
+
+	<!-- all users, uses round robin selection -->
+	<allthreads>
+	        <!-- unique parameters for each individual thread (ie user) -->
+
+		<thread>
+			<parameter>
+                             <paramname>user_id</paramname>
+                             <paramvalue>dduck</paramvalue>
+                        </parameter>
+			<parameter>
+                             <paramname>password</paramname>
+                             <paramvalue>quack</paramvalue>
+                        </parameter>
+		</thread>
+		<thread>
+			<parameter>
+                             <paramname>user_id</paramname>
+                             <paramvalue>mmouse</paramvalue>
+                        </parameter>
+			<parameter>
+                             <paramname>password</paramname>
+                             <paramvalue>squeak</paramvalue>
+                        </parameter>
+		</thread>
+		<thread>
+			<parameter>
+                             <paramname>user_id</paramname>
+                             <paramvalue>bbunney</paramvalue>
+                        </parameter>
+			<parameter>
+                             <paramname>password</paramname>
+                             <paramvalue>carrot</paramvalue>
+                        </parameter>
+			<parameter>
+                             <paramname>manager</paramname>
+                             <paramvalue>yes</paramvalue>
+                        </parameter>
+		</thread>
+	</allthreads>
+
+
+
diff --git a/jakarta-jmeter/build.bat b/jakarta-jmeter/build.bat
new file mode 100644
index 0000000..dec0408
--- /dev/null
+++ b/jakarta-jmeter/build.bat
@@ -0,0 +1,22 @@
+@echo off
+
+if not "%JAVA_HOME%" == "" goto start:
+echo JAVA_HOME not set, please set
+goto eof:
+
+:start
+set LOCALCLASSPATH=%JAVA_HOME%\lib\tools.jar
+set OLDPATH=%PATH%
+set PATH=%JAVA_HOME%\bin;%PATH%
+
+for %%i in (".\lib\*.jar") do CALL lcp %%i
+for %%i in (".\ext\*.jar") do CALL lcp %%i
+
+for %%i in (..\jakarta-site2\lib\*.jar) do CALL lcp %%i
+
+SET BUILDFILE=build.xml
+echo %LOCALCLASSPATH%
+java -classpath %LOCALCLASSPATH% org.apache.tools.ant.Main -buildfile %BUILDFILE% %1 %2 %3 %4 %5 %6
+set PATH=%OLDPATH%
+
+:eof
diff --git a/jakarta-jmeter/build.sh b/jakarta-jmeter/build.sh
new file mode 100644
index 0000000..6ab1aed
--- /dev/null
+++ b/jakarta-jmeter/build.sh
@@ -0,0 +1,41 @@
+#!/bin/sh
+
+#--------------------------------------------
+# No need to edit anything past here
+#--------------------------------------------
+if test -z "$JAVA_HOME" ; then
+    echo "ERROR: JAVA_HOME not found in your environment."
+    echo "Please, set the JAVA_HOME variable in your environment to match the"
+    echo "location of the Java Virtual Machine you want to use."
+    exit
+fi
+
+if test -f $JAVA_HOME/lib/tools.jar ; then
+    CLASSPATH=$CLASSPATH:${JAVA_HOME}/lib/tools.jar
+fi
+
+# convert the existing path to unix
+if [ "$OSTYPE" = "cygwin32" ] || [ "$OSTYPE" = "cygwin" ] ; then
+   CLASSPATH=`cygpath --path --unix "$CLASSPATH"`
+fi
+
+for i in ./lib/*.jar
+do
+    CLASSPATH=$CLASSPATH:$i
+done
+
+for i in ../jakarta-site2/lib/*.jar
+do
+    CLASSPATH=$CLASSPATH:$i
+done
+
+# convert the unix path to windows
+if [ "$OSTYPE" = "cygwin32" ] || [ "$OSTYPE" = "cygwin" ] ; then
+   CLASSPATH=`cygpath --path --windows "$CLASSPATH"`
+fi
+
+BUILDFILE=build.xml
+echo $JAVA_HOME/bin/java -classpath $CLASSPATH org.apache.tools.ant.Main -buildfile $BUILDFILE "$@"
+
+$JAVA_HOME/bin/java -classpath $CLASSPATH org.apache.tools.ant.Main \
+                      -buildfile $BUILDFILE "$@"
diff --git a/jakarta-jmeter/build.xml b/jakarta-jmeter/build.xml
new file mode 100644
index 0000000..0969ebd
--- /dev/null
+++ b/jakarta-jmeter/build.xml
@@ -0,0 +1,426 @@
+<project name="JMeter" default="all" basedir=".">
+
+  <!-- Where the class files should live -->
+  <property name="build.dir" value="build"/>
+  <property name="build.core" value="build/core"/>
+  <property name="build.http" value="build/protocol/http"/>
+  <property name="build.ftp" value="build/protocol/ftp"/>
+  <property name="build.jdbc" value="build/protocol/jdbc"/>
+  <property name="build.java" value="build/protocol/java"/>
+  <property name="build.components" value="build/components"/>
+  <property name="build.functions" value="build/functions"/>
+  
+  <!-- Where the Sources live -->
+  <property name="src.dir" value="src"/>
+  <property name="src.core" value="src/core"/>
+  <property name="src.http" value="src/protocol/http"/>
+  <property name="src.ftp" value="src/protocol/ftp"/>
+  <property name="src.jdbc" value="src/protocol/jdbc"/>
+  <property name="src.java" value="src/protocol/java"/>
+  <property name="src.components" value="src/components"/>
+  <property name="src.functions" value="src/functions"/>
+  
+  <!-- Where the API documentation lives -->
+  <property name="docs.api.dest.dir" value="docs/api"/>
+  <property name="version" value="1.7.3"/>
+  <property name="docs.src" value="./xdocs"/>
+  <property name="docs.dest" value="./docs"/>
+  <property name="printable_docs.dest" value="./printable_docs"/>
+  <property name="optimize" value="on"/>
+  <property name="tools.jar" value="${java.home}/lib/tools.jar"/>
+
+  <!-- Build classpath -->
+  <path id="classpath">
+	<fileset dir=".">
+	 <include name="**/lib/*.jar"/>
+	<include name="**/ext/*.jar"/>
+	</fileset>
+	  <pathelement location="${tools.jar}"/>
+  </path>
+
+  <path id="testClasspath">
+		<path refid="classpath"/>
+		<fileset dir="./lib/ext">
+	 		<include name="*.jar"/>
+			<include name="*.jar"/>
+		</fileset>
+  </path>
+  
+  <path id="srcpaths">
+  	<pathelement location="${src.core}"/>
+  		<pathelement location="${src.core}"/>
+  		<pathelement location="${src.components}"/>
+  		<pathelement location="${src.functions}"/>
+  		<pathelement location="${src.http}"/>
+  		<pathelement location="${src.ftp}"/>
+  		<pathelement location="${src.jdbc}"/>
+  		<pathelement location="${src.java}"/>
+  </path>
+  
+  <target name="init">
+  	<mkdir dir="${build.dir}"/>
+  	<mkdir dir="${build.core}"/>
+  	<mkdir dir="${build.http}"/>
+  	<mkdir dir="${build.jdbc}"/>
+  	<mkdir dir="${build.ftp}"/>
+  	<mkdir dir="${build.java}"/>
+  	<mkdir dir="${build.components}"/>
+  	<mkdir dir="${build.functions}"/>
+  </target>
+
+
+	<!--
+	- Check for optional JSSE libs.
+	-->
+	<target name="check.jsse.libs">
+	  <available classname="com.sun.net.ssl.internal.ssl.Provider"
+					 property="jsse.present">
+		 <classpath refid="classpath"/>
+	  </available>
+	</target>
+
+	<!--
+	- Check for optional JavaMail libs.
+	-->
+	<target name="check.mail.libs">
+		<available classname="javax.mail.Transport"
+					 property="javamail.present">
+		 <classpath refid="classpath"/>
+	  </available>
+	  <available classname="javax.activation.DataHandler"
+					 property="javamail.complete"/>
+	</target>
+	
+	<!--
+	- Check for optional IAIK libs (related to SSL)
+	-->
+	<target name="check.iaik.libs">
+		<available classname="iaik.protocol.https.Handler"
+					 property="isasilk.present">
+		 <classpath refid="classpath"/>
+	  </available>
+	</target>
+
+	<!--
+	- Check for anakia task
+	-->
+	<target name="check.anakia">
+	  <available classname="org.apache.velocity.anakia.AnakiaTask"
+					 property="AnakiaTask.present"/>
+	</target>
+
+	<target name="no.anakia" depends="check.anakia" unless="AnakiaTask.present">
+	  <echo>
+		 AnakiaTask is not present, documentation will not be generated.
+	  </echo>
+	</target>
+
+	<target name="ssl.message" depends="check.jsse.libs,iaik.message" unless="jsse.present">
+	  <echo message="Classes for SSL not found in classpath"/>
+	</target>
+
+	<target name="iaik.message" depends="check.iaik.libs" unless="isasilk.present">
+	  <echo message="Classes for IAIK iSaSiLk not found in classpath"/>
+	</target>
+
+	<target name="mail.message" depends="check.mail.libs" unless="javamail.complete">
+	  <echo message="Classes for Mail support not found in classpath"/>
+	</target>
+
+	<!--
+	- Compiles the source into class files - dumping results into the
+	- bin/clases directory
+	-->
+	<target name="compile_all" depends="init,ssl.message,iaik.message,mail.message">		
+		<javac
+				 destdir="${build.dir}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+			<src>			
+				<path refid="srcpaths"/>
+			</src>
+		  <include name="**/*.java"/>
+		  <exclude name="org/apache/jmeter/util/JsseSSLManager.java"
+					  unless="jsse.present"/>
+		  <exclude name="org/apache/jmeter/util/IaikSSLManager.java"
+					  unless="isasilk.present"/>
+		  <exclude name="org/apache/jmeter/util/keystore/PKCS12KeyStore.java"
+					  unless="isasilk.present"/>
+		  <exclude name="org/apache/jmeter/util/keystore/DefaultKeyStore.java"
+					  unless="jsse.present"/>
+		  <exclude name="org/apache/jmeter/visualizers/MailerVisualizer.java"
+					  unless="javamail.complete"/>
+		  <exclude name="org/apache/jmeter/reporters/MailerResultCollector.java"
+					  unless="javamail.complete"/>
+		  <classpath refid="classpath"/>
+		</javac>
+	</target>
+	
+	<target name="compile_core" depends="init,compile_all">		
+		<copy tofile="${src.core}/org/apache/jmeter/util/JMeterUtils.java_temp"
+				file="${src.core}/org/apache/jmeter/util/JMeterUtils.java"
+				overwrite="yes"/>
+		<replace file="${src.core}/org/apache/jmeter/util/JMeterUtils.java"
+					token="@VERSION@"
+					value="${version}"/>
+		<javac   srcdir="${src.core}"
+				 destdir="${build.core}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <exclude name="org/apache/jmeter/util/JsseSSLManager.java"
+					  unless="jsse.present"/>
+		  <exclude name="org/apache/jmeter/util/IaikSSLManager.java"
+					  unless="isasilk.present"/>
+		  <exclude name="org/apache/jmeter/util/keystore/PKCS12KeyStore.java"
+					  unless="isasilk.present"/>
+		  <exclude name="org/apache/jmeter/util/keystore/DefaultKeyStore.java"
+					  unless="jsse.present"/>
+		  <exclude name="org/apache/jmeter/visualizers/MailerVisualizer.java"
+					  unless="javamail.complete"/>
+		  <exclude name="org/apache/jmeter/reporters/MailerResultCollector.java"
+					  unless="javamail.complete"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+		<copy tofile="${src.core}/org/apache/jmeter/util/JMeterUtils.java"
+				file="${src.core}/org/apache/jmeter/util/JMeterUtils.java_temp"
+				overwrite="yes"/>
+		<delete file="${src.core}/org/apache/jmeter/util/JMeterUtils.java_temp"/>
+	</target>
+	
+	<target name="compile_components" depends="init,compile_all">
+		<javac srcdir="${src.components}"
+				 destdir="${build.components}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <exclude name="org/apache/jmeter/visualizers/MailerVisualizer.java"
+					  unless="javamail.complete"/>
+		  <exclude name="org/apache/jmeter/reporters/MailerResultCollector.java"
+					  unless="javamail.complete"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+	</target>
+	
+	<target name="compile_functions" depends="init,compile_all">
+		<javac srcdir="${src.functions}"
+				 destdir="${build.functions}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+	</target>
+	
+	<target name="compile_http" depends="init,compile_all">
+		<javac srcdir="${src.http}"
+				 destdir="${build.http}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+	</target>
+	
+	<target name="compile_ftp" depends="init,compile_all">
+		<javac srcdir="${src.ftp}"
+				 destdir="${build.ftp}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+	</target>
+	
+	<target name="compile_jdbc" depends="init,compile_all">
+		<javac srcdir="${src.jdbc}"
+				 destdir="${build.jdbc}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+	</target>
+	
+	<target name="compile_java" depends="init,compile_all">
+		<javac srcdir="${src.java}"
+				 destdir="${build.java}"
+				 optimize="${optimize}"
+				 debug="on"
+				 target="1.3">
+		  <include name="**/*.java"/>
+		  <classpath>
+		  	<path refid="classpath"/>
+		  	<pathelement location="${build.dir}"/>
+		  </classpath>
+		</javac>
+	</target>
+	
+	<target name="compile_protocols" depends="clean,compile_http,compile_ftp,compile_jdbc,compile_java"/>
+	
+	<target name="compile" depends="clean,compile_core,compile_components,compile_functions,compile_protocols"/>
+
+	<target name="rmi" depends="compile">
+	  <rmic base="${build.core}" classname="org.apache.jmeter.engine.RemoteJMeterEngineImpl">
+	  	<classpath>
+	  		<path refid="classpath"/>      
+	  		<pathelement path="${build.core}"/>
+	  	</classpath>
+	  </rmic>
+	  	
+	  <rmic classpath="${build.core}" base="${build.core}" classname="org.apache.jmeter.samplers.RemoteSampleListenerImpl"/>
+	</target>
+
+	<!--
+	- Generates java-docs
+	-->
+	<target name="api-docs">
+	  <mkdir dir="${docs.api.dest.dir}"/>
+	  <javadoc sourcepathref="srcpaths"
+				  destdir="${docs.api.dest.dir}"
+				  Protected="yes" author="yes" version="yes"
+				  doctitle="Apache JMeter APIs Specification"
+				  windowtitle="Apache JMeter API Specification"
+				  header="&lt;b&gt;Apache JMeter&lt;/b&gt;&lt;br&gt;&lt;font size='-1'&gt;1.7&lt;/font&gt;"
+				  bottom="Copyright &#169; 1998-2002 Apache Software Foundation. All Rights Reserved."
+				  packagenames="org.apache.jmeter.*">
+		 <classpath refid="classpath"/>
+	  </javadoc>
+	</target>
+
+	<!--
+	- Creates the ApacheJMeter.jar file.
+	-->
+	<target name="package" depends="compile,rmi">
+	  <copy toDir="${build.core}/org/apache/jmeter/images">
+		 <fileset dir="${src.core}/org/apache/jmeter/images"/>
+	  </copy>
+	  <copy toDir="${build.core}/org/apache/jmeter/resources">
+		 <fileset dir="${src.core}/org/apache/jmeter/resources">
+			<exclude name="*eucJP*"/>
+		</fileset>
+	  </copy>
+	  <copy toFile="${build.core}/org/apache/jmeter/help.txt" 
+	  		file="${src.core}/org/apache/jmeter/help.txt"/>	
+	  <mkdir dir="./lib/ext/"/> 
+
+	  <jar jarfile="./lib/ext/ApacheJMeter_core.jar" excludes="**/NewDriver*" manifest="${src.core}/MANIFEST" basedir="${build.core}"/>
+	  <jar jarfile="bin/ApacheJMeter.jar" includes="**/NewDriver*" manifest="${src.core}/MANIFEST" basedir="${build.core}"/>
+	  <jar jarfile="./lib/ext/ApacheJMeter_components.jar" basedir="${build.components}"/>
+	  <jar jarfile="./lib/ext/ApacheJMeter_functions.jar" basedir="${build.functions}"/>
+	  <jar jarfile="./lib/ext/ApacheJMeter_http.jar" basedir="${build.http}"/>
+	  <jar jarfile="./lib/ext/ApacheJMeter_ftp.jar" basedir="${build.ftp}"/>
+	  <jar jarfile="./lib/ext/ApacheJMeter_jdbc.jar" basedir="${build.jdbc}"/>
+	  <jar jarfile="./lib/ext/ApacheJMeter_java.jar" basedir="${build.java}"/>
+	</target>
+
+	<!--
+	- Copies the jar file to bin/ and everything else needed to run JMeter
+	- from bin/.
+	-->
+	<target name="install" depends="package">
+	  <fixcrlf srcdir="." eol="lf" includes="**/jmeter,**/jmeter-server" />
+	</target>
+
+	<!--
+	- Another name for install(?)
+	-->
+	<target name="all" depends="install"/>
+
+	<target name="assume_packages_present">
+		<property name="jsse.present" value="assume"/>
+		<property name="javamail.present" value="assume"/>
+		<property name="javamail.complete" value="assume"/>
+	</target>
+
+	<!--
+	- Creates the distribution packages
+	-->
+	<target name="dist" depends="assume_packages_present,clean,install">
+		<zip zipfile="../ApacheJMeter_${version}.zip">
+			<fileset dir="../">
+				<include name="jakarta-jmeter/**"/>
+				<exclude name="**/build/**"/>
+				<exclude name="**/classes*/**"/>
+				<exclude name="**/xdocs/**"/>
+				<exclude name="jakarta-jmeter/ext/**"/>
+			</fileset>
+		</zip>
+		<tar tarfile="../ApacheJMeter_${version}.tar" basedir=".." includes="jakarta-jmeter/**"
+				excludes="**/classes*/**,**/xdocs/**,jakarta-jmeter/ext/**,**/build/**"/>
+		<gzip zipfile="../ApacheJMeter_${version}.tar.gz" src="../ApacheJMeter_${version}.tar" />
+	</target>
+
+	<!--
+	- Deletes old build files.
+	-->
+	<target name="clean">
+	  <delete file="bin/ApacheJMeter.jar"/>
+	  <delete dir="lib/ext"/>
+	  <delete dir="${build.dir}"/>
+	  <delete dir="${docs.api.dest.dir}"/>
+	</target>
+
+
+	<target name="docs" depends="no.anakia" if="AnakiaTask.present">
+	  <taskdef name="anakia" classname="org.apache.velocity.anakia.AnakiaTask"/>
+	  <anakia basedir="${docs.src}" destdir="${docs.dest}/"
+				 extension=".html" style="./xdocs/stylesheets/site.vsl"
+				 projectFile="./stylesheets/project.xml"
+				 excludes="**/stylesheets/**"
+				 includes="**/*.xml"
+				 lastModifiedCheck="true"
+				 velocityPropertiesFile="${docs.src}/velocity.properties"/>
+		<copy todir="${docs.dest}">
+			<fileset dir="${docs.src}">
+				<include name="images/**"/>
+				<include name="demos/**"/>
+			</fileset>
+		</copy>
+	</target>
+
+	<target name="printable_docs" depends="no.anakia" if="AnakiaTask.present">
+	  <taskdef name="anakia" classname="org.apache.velocity.anakia.AnakiaTask"/>
+	  <anakia basedir="${docs.src}" destdir="${docs.dest}/"
+				 extension=".html" style="./xdocs/stylesheets/site_printable.vsl"
+				 projectFile="./stylesheets/project.xml"
+				 excludes="**/stylesheets/**"
+				 includes="**/*.xml"
+				 lastModifiedCheck="true"
+				 velocityPropertiesFile="${docs.src}/velocity.properties"/>
+
+	</target>
+
+	<target name="test" depends="install">
+	  <java classname="org.apache.jmeter.junit.AllTests" fork="yes" dir="${basedir}/bin">
+		 <classpath refid="testClasspath"/>
+		 <arg value="./jmeter.properties"/>
+	  </java>
+  </target>
+
+</project>
diff --git a/jakarta-jmeter/lcp.bat b/jakarta-jmeter/lcp.bat
new file mode 100644
index 0000000..8e21a49
--- /dev/null
+++ b/jakarta-jmeter/lcp.bat
@@ -0,0 +1,3 @@
+@echo off
+set LOCALCLASSPATH=%LOCALCLASSPATH%;%1
+
diff --git a/jakarta-jmeter/src/CVS/Entries b/jakarta-jmeter/src/CVS/Entries
new file mode 100644
index 0000000..2957935
--- /dev/null
+++ b/jakarta-jmeter/src/CVS/Entries
@@ -0,0 +1,5 @@
+/MANIFEST/1.3/Fri Jun 29 01:37:38 2001//Tv1_7_3
+D/components////
+D/core////
+D/functions////
+D/protocol////
diff --git a/jakarta-jmeter/src/CVS/Repository b/jakarta-jmeter/src/CVS/Repository
new file mode 100644
index 0000000..8be4f7e
--- /dev/null
+++ b/jakarta-jmeter/src/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src
diff --git a/jakarta-jmeter/src/CVS/Root b/jakarta-jmeter/src/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/CVS/Tag b/jakarta-jmeter/src/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/CVS/Entries b/jakarta-jmeter/src/components/CVS/Entries
new file mode 100644
index 0000000..381094d
--- /dev/null
+++ b/jakarta-jmeter/src/components/CVS/Entries
@@ -0,0 +1 @@
+D/org////
diff --git a/jakarta-jmeter/src/components/CVS/Repository b/jakarta-jmeter/src/components/CVS/Repository
new file mode 100644
index 0000000..80d247d
--- /dev/null
+++ b/jakarta-jmeter/src/components/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components
diff --git a/jakarta-jmeter/src/components/CVS/Root b/jakarta-jmeter/src/components/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/CVS/Tag b/jakarta-jmeter/src/components/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/components/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/components/org/CVS/Entries b/jakarta-jmeter/src/components/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/components/org/CVS/Repository b/jakarta-jmeter/src/components/org/CVS/Repository
new file mode 100644
index 0000000..1f82737
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org
diff --git a/jakarta-jmeter/src/components/org/CVS/Root b/jakarta-jmeter/src/components/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/CVS/Tag b/jakarta-jmeter/src/components/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/CVS/Entries b/jakarta-jmeter/src/components/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/components/org/apache/CVS/Repository b/jakarta-jmeter/src/components/org/apache/CVS/Repository
new file mode 100644
index 0000000..a0c0d75
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache
diff --git a/jakarta-jmeter/src/components/org/apache/CVS/Root b/jakarta-jmeter/src/components/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/CVS/Tag b/jakarta-jmeter/src/components/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..023703c
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Entries
@@ -0,0 +1,6 @@
+D/assertions////
+D/config////
+D/control////
+D/reporters////
+D/timers////
+D/visualizers////
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..819a519
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Entries
new file mode 100644
index 0000000..5d0d6aa
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Entries
@@ -0,0 +1,3 @@
+/DurationAssertion.java/1.1/Sun Aug 11 19:24:39 2002//Tv1_7_3
+/ResponseAssertion.java/1.1/Sun Aug 11 19:24:39 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Repository
new file mode 100644
index 0000000..5625e3c
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/assertions
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/DurationAssertion.java b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/DurationAssertion.java
new file mode 100644
index 0000000..a84f99a
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/DurationAssertion.java
@@ -0,0 +1,129 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.assertions;
+
+import java.io.Serializable;
+import java.text.MessageFormat;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.samplers.SampleResult;
+
+/**
+ * Checks if an Sample is sampled within a specified time-frame. If the
+ * duration is larger than the timeframe the Assertion is considered
+ * a failure.
+ *
+ Copyright: Copyright (c) 2001
+ * Company: Apache
+ *
+ * @author <a href="mailto:wolfram.rittmeyer@web.de">Wolfram Rittmeyer</a>
+ *
+ * @version $Revision: 1.1 $, $Date: 2002/08/11 19:24:39 $
+ */
+public class DurationAssertion extends AbstractTestElement implements Serializable, Assertion {
+
+	/** Key for storing assertion-informations in the jmx-file. */
+	private static final String DURATION_KEY = "DurationAssertion.duration";
+
+	/**
+	 * Returns the result of the Assertion. Here it checks wether the
+	 * Sample took to long to be considered successful. If so an AssertionResult
+	 * containing a FailureMessage will be returned. Otherwise the returned
+	 * AssertionResult will reflect the success of the Sample.
+	 */
+	public AssertionResult getResult(SampleResult response) {
+		AssertionResult result = new AssertionResult();
+		result.setFailure(false);
+
+		// has the Sample lasted to long?
+		if (((response.getTime() > getAllowedDuration()) && (getAllowedDuration() > 0))) {
+			result.setFailure(true);
+			Object[] arguments = { new Long(response.getTime()), new Long(getAllowedDuration())};
+			String message = MessageFormat.format(JMeterUtils.getResString("duration_assertion_failure"), arguments);
+			result.setFailureMessage(message);
+		}
+		return result;
+	}
+
+	/**
+	 * Returns the duration to be asserted. A duration of 0 indicates this assertion is to 
+	 * be ignored.
+	 */
+	public long getAllowedDuration() {
+		return getPropertyAsLong(DURATION_KEY);
+	}
+
+	/**
+	 * Set the duration that shall be asserted.
+	 *
+	 * @param duration A period of time in milliseconds. Is not allowed to be negative. Use Double.MAX_VALUE to indicate illegal or empty inputs. This will result to not checking the assertion.
+	 *
+	 * @throws IllegalArgumentException If <code>duration</code> is negative.
+	 */
+	public void setAllowedDuration(long duration) throws IllegalArgumentException {
+		if (duration < 0L) {
+			throw new IllegalArgumentException(JMeterUtils.getResString("argument_must_not_be_negative"));
+		}
+		if (duration == Long.MAX_VALUE) {
+			setProperty(DURATION_KEY, new Long(0));
+		}
+		else {
+			setProperty(DURATION_KEY, new Long(duration));
+		}
+	}
+
+
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/ResponseAssertion.java b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/ResponseAssertion.java
new file mode 100644
index 0000000..0e29969
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/ResponseAssertion.java
@@ -0,0 +1,327 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.assertions;
+
+import java.util.*;
+import java.io.Serializable;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+import org.apache.oro.text.regex.*;
+
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:39 $
+ *@version    1.0
+ ***********************************************************/
+
+public class ResponseAssertion extends AbstractTestElement implements Serializable, Assertion
+{
+
+	public final static String TEST_FIELD = "Assertion.test_field";
+	public final static String TEST_TYPE = "Assertion.test_type";
+	public final static String TEST_STRINGS = "Asserion.test_strings";
+	public final static String SAMPLE_LABEL = "Assertion.sample_label";
+	public final static String RESPONSE_DATA = "Assertion.response_data";
+
+
+	private String notMessage = "";
+	private String failMessage = "to contain: ";
+	public final static int MATCH = 1 << 0;
+	public final static int CONTAINS = 1 << 1;
+	public final static int NOT = 1 << 2;
+	private transient static Perl5Compiler compiler = new Perl5Compiler();
+	private transient static Perl5Matcher matcher = new Perl5Matcher();
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public ResponseAssertion()
+	{
+		setProperty(TEST_STRINGS,new ArrayList());
+	}
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  field   !ToDo (Parameter description)
+	 *@param  type    !ToDo (Parameter description)
+	 *@param  string  !ToDo (Parameter description)
+	 ***********************************************************/
+	public ResponseAssertion(String field, int type, String string)
+	{
+		this();
+		setTestField(field);
+		setTestType(type);
+		getTestStrings().add(string);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  testField  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setTestField(String testField)
+	{
+		setProperty(TEST_FIELD,testField);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  testType  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setTestType(int testType)
+	{
+		setProperty(TEST_TYPE,new Integer(testType));
+		if ((testType & NOT) > 0)
+		{
+			notMessage = "not ";
+		}
+		else
+		{
+			notMessage = "";
+		}
+		if ((testType & CONTAINS) > 0)
+		{
+			failMessage = "to contain: ";
+		}
+		else
+		{
+			failMessage = "to match: ";
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  testString  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void addTestString(String testString)
+	{
+		getTestStrings().add(testString);
+	}
+
+	public void setTestString(String testString,int index)
+	{
+		getTestStrings().set(index,testString);
+	}
+
+	public void removeTestString(String testString)
+	{
+		getTestStrings().remove(testString);
+	}
+
+	public void removeTestString(int index)
+	{
+		getTestStrings().remove(index);
+	}
+
+	public void clearTestStrings()
+	{
+		getTestStrings().clear();
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@param  response  !ToDo (Parameter description)
+	 *@return           !ToDo (Return description)
+	 ***********************************************************/
+	public AssertionResult getResult(SampleResult response)
+	{
+		AssertionResult result;
+		if (!response.isSuccessful())
+		{
+			result = new AssertionResult();
+			result.setError(true);
+			result.setFailureMessage(new String((byte[])response.getResponseData()));
+			return result;
+		}
+		result = evaluateResponse(response);
+		return result;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getTestField()
+	{
+		return (String)getProperty(TEST_FIELD);
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public int getTestType()
+	{
+		Object type = getProperty(TEST_TYPE);
+		if(type == null)
+		{
+			return CONTAINS;
+		}
+		else if(type instanceof Integer)
+		{
+			return ((Integer)type).intValue();
+		}
+		else
+		{
+			return Integer.parseInt((String)type);
+		}
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public List getTestStrings()
+	{
+		return (List)getProperty(TEST_STRINGS);
+	}
+
+	public boolean isContainsType()
+	{
+		return (getTestType() & CONTAINS) > 0;
+	}
+
+	public boolean isMatchType()
+	{
+		return (getTestType() & MATCH) > 0;
+	}
+
+	public boolean isNotType()
+	{
+		return (getTestType() & NOT) > 0;
+	}
+
+	public void setToContainsType()
+	{
+		setTestType((getTestType() | CONTAINS) & (MATCH ^ (CONTAINS | MATCH | NOT)));
+		failMessage = "to contain: ";
+	}
+
+	public void setToMatchType()
+	{
+		setTestType((getTestType() | MATCH) & (CONTAINS ^ (CONTAINS | MATCH | NOT)));
+		failMessage = "to match: ";
+	}
+
+	public void setToNotType()
+	{
+		setTestType((getTestType() | NOT));
+	}
+
+	public void unsetNotType()
+	{
+		setTestType(getTestType() & (NOT ^ (CONTAINS | MATCH | NOT)));
+	}
+
+	private AssertionResult evaluateResponse(SampleResult response)
+	{
+		boolean pass = true;
+		boolean not = (NOT & getTestType()) > 0;
+		AssertionResult result = new AssertionResult();
+		try
+		{
+			Iterator iter = getTestStrings().iterator();
+			while (iter.hasNext())
+			{
+				String pattern = (String)iter.next();
+				if ((CONTAINS & getTestType()) > 0)
+				{
+					pass = pass && (not ? !matcher.contains(new String(response.getResponseData()),
+							compiler.compile(pattern)) :
+							matcher.contains(new String(response.getResponseData()),
+							compiler.compile(pattern)));
+				}
+				else
+				{
+					pass = pass && (not ? !matcher.matches(new String(response.getResponseData()),
+							compiler.compile(pattern)) :
+							matcher.matches(new String(response.getResponseData()),
+							compiler.compile(pattern)));
+				}
+				if (!pass)
+				{
+					result.setFailure(true);
+					result.setFailureMessage("Test Failed, expected " + notMessage + failMessage + pattern);
+					break;
+				}
+			}
+			if(pass)
+			{
+				result.setFailure(false);
+			}
+			result.setError(false);
+		}
+		catch(MalformedPatternException e)
+		{
+			result.setError(true);
+			result.setFailure(false);
+			result.setFailureMessage("Bad test configuration"+e);
+		}
+		return result;
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/AssertionGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/AssertionGui.java
new file mode 100644
index 0000000..bd624a9
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/AssertionGui.java
@@ -0,0 +1,449 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.assertions.gui;
+import java.awt.BorderLayout;
+import java.awt.Color;
+import java.awt.Component;
+import java.awt.Font;
+import java.awt.GridBagConstraints;
+import java.awt.GridBagLayout;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.util.Iterator;
+
+import javax.swing.BorderFactory;
+import javax.swing.Box;
+import javax.swing.ButtonGroup;
+import javax.swing.DefaultListCellRenderer;
+import javax.swing.JButton;
+import javax.swing.JCheckBox;
+import javax.swing.JLabel;
+import javax.swing.JList;
+import javax.swing.JPanel;
+import javax.swing.JRadioButton;
+import javax.swing.JScrollPane;
+import javax.swing.JTable;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import javax.swing.table.TableCellRenderer;
+import org.apache.jmeter.assertions.Assertion;
+import org.apache.jmeter.assertions.ResponseAssertion;
+import org.apache.jmeter.gui.util.PowerTableModel;
+import org.apache.jmeter.gui.util.TextAreaCellRenderer;
+import org.apache.jmeter.gui.util.TextAreaTableCellEditor;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+
+/****************************************
+ * Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ * Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class AssertionGui extends AbstractAssertionGui implements FocusListener
+{
+	static final String COL_NAME = JMeterUtils.getResString("assertion_patterns_to_test");
+	
+	private JRadioButton responseStringButton, labelButton, containsBox, matchesBox;
+	private JCheckBox notBox;
+	private JTable stringTable;
+	private JButton addPattern,deletePattern;
+	PowerTableModel tableModel;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public AssertionGui()
+	{
+		init();
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("assertion_title");
+	}
+
+	public TestElement createTestElement()
+	{
+		ResponseAssertion el = new ResponseAssertion();
+		String[] testStrings = tableModel.getData().getColumn(COL_NAME);
+		for(int i = 0;i < testStrings.length;i++)
+		{
+			el.addTestString(testStrings[i]);
+		}
+		configureTestElement(el);
+		if(labelButton.isSelected())
+		{
+			el.setTestField(ResponseAssertion.SAMPLE_LABEL);
+		}
+		else
+		{
+			el.setTestField(ResponseAssertion.RESPONSE_DATA);
+		}
+		if(containsBox.isSelected())
+		{
+			el.setToContainsType();
+		}
+		else
+		{
+			el.setToMatchType();
+		}
+		if(notBox.isSelected())
+		{
+			el.setToNotType();
+		}
+		else
+		{
+			el.unsetNotType();
+		}
+		return el;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		ResponseAssertion model = (ResponseAssertion)el;
+		if(model.isContainsType())
+		{
+			containsBox.setSelected(true);
+			matchesBox.setSelected(false);
+		}
+
+		else
+		{
+			containsBox.setSelected(false);
+			matchesBox.setSelected(true);
+		}
+
+		if(model.isNotType())
+		{
+			notBox.setSelected(true);
+		}
+		else
+		{
+			notBox.setSelected(false);
+		}
+
+		if(ResponseAssertion.RESPONSE_DATA.equals(model.getTestField()))
+		{
+			responseStringButton.setSelected(true);
+			labelButton.setSelected(false);
+		}
+		else
+		{
+			responseStringButton.setSelected(false);
+			labelButton.setSelected(true);
+		}
+		Iterator tests = model.getTestStrings().iterator();
+		while(tests.hasNext())
+		{
+			tableModel.addRow(new Object[]{tests.next()});
+		}
+		tableModel.fireTableDataChanged();
+	}
+
+	private void init()
+	{
+		this.setLayout(new GridBagLayout());
+		GridBagConstraints gbc = new GridBagConstraints();
+		gbc.anchor = gbc.WEST;
+		gbc.fill = gbc.BOTH;
+		gbc.gridheight = 1;
+		gbc.gridwidth = 1;
+		gbc.gridx = 0;
+		gbc.gridy = 0;
+		gbc.weightx = 1;
+		gbc.weighty = 1;
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		add(mainPanel,gbc.clone());
+		//gbc.fill = gbc.NONE;
+		gbc.weighty = 0;
+		mainPanel.setLayout(new GridBagLayout());
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("assertion_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel,gbc.clone());
+		gbc.gridy++;
+
+		// NAME
+		mainPanel.add(getNamePanel(),gbc.clone());
+		gbc.gridx++;
+		//gbc.fill = gbc.HORIZONTAL;
+		mainPanel.add(Box.createHorizontalGlue(),gbc.clone());
+		gbc.gridx--;
+		//gbc.fill = gbc.NONE;
+		gbc.gridy++;
+		mainPanel.add(createFieldPanel(),gbc.clone());
+		gbc.gridy++;
+		mainPanel.add(createTypePanel(),gbc.clone());
+		gbc.gridy++;
+		//gbc.fill = gbc.BOTH;
+		gbc.weighty = 1;
+		gbc.gridwidth = 2;
+		mainPanel.add(createStringPanel(),gbc.clone());
+	}
+
+	private JPanel createFieldPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),
+				JMeterUtils.getResString("assertion_resp_field")));
+		responseStringButton = new JRadioButton(JMeterUtils.getResString("assertion_text_resp"));
+		labelButton = new JRadioButton(JMeterUtils.getResString("assertion_url_samp"));
+		ButtonGroup group = new ButtonGroup();
+		group.add(responseStringButton);
+		group.add(labelButton);
+		panel.add(responseStringButton);
+		panel.add(labelButton);
+		responseStringButton.setSelected(true);
+		return panel;
+	}
+
+	private JPanel createTypePanel()
+	{
+		JPanel panel = new JPanel();
+		panel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),
+				JMeterUtils.getResString("assertion_pattern_match_rules")));
+		containsBox = new JRadioButton(JMeterUtils.getResString("assertion_contains"));
+		matchesBox = new JRadioButton(JMeterUtils.getResString("assertion_matches"));
+		notBox = new JCheckBox(JMeterUtils.getResString("assertion_not"));
+		ButtonGroup group = new ButtonGroup();
+		group.add(matchesBox);
+		group.add(containsBox);
+		panel.add(containsBox);
+		panel.add(matchesBox);
+		panel.add(notBox);
+		containsBox.setSelected(true);
+		return panel;
+	}
+	
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void focusLost(FocusEvent e)
+	{
+		try
+		{
+			stringTable.getCellEditor().stopCellEditing();
+		}
+		catch(NullPointerException err){}
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void focusGained(FocusEvent e) { }
+
+	private JPanel createStringPanel()
+	{
+		JPanel panel = new JPanel();
+		stringTable = new JTable(0,1);
+		stringTable.addFocusListener(this);
+		tableModel = new PowerTableModel(new String[]{COL_NAME},new Class[]{String.class});
+		stringTable.setModel(tableModel);
+		TextAreaCellRenderer renderer = new TextAreaCellRenderer();
+		stringTable.setDefaultEditor(String.class,new TextAreaTableCellEditor());
+		stringTable.setRowHeight(renderer.getPreferredHeight());
+		stringTable.setDefaultRenderer(String.class,renderer);
+		panel.setLayout(new BorderLayout());
+		panel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),
+				JMeterUtils.getResString("assertion_patterns_to_test")));
+		panel.add(new JScrollPane(stringTable),BorderLayout.CENTER);
+		addPattern = new JButton(JMeterUtils.getResString("add"));
+		deletePattern = new JButton(JMeterUtils.getResString("delete"));
+		addPattern.addActionListener(new AddPatternListener());
+		deletePattern.addActionListener(new ClearPatternsListener());
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.add(addPattern);
+		buttonPanel.add(deletePattern);
+		panel.add(buttonPanel,BorderLayout.SOUTH);
+		deletePattern.setEnabled(false);
+		
+		return panel;
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:40 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class ClearPatternsListener implements ActionListener
+	{
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param e  !ToDo (Parameter description)
+		 ***************************************/
+		public void actionPerformed(ActionEvent e)
+		{
+			int index = stringTable.getSelectedRow();
+			stringTable.getCellEditor(index,stringTable.getSelectedColumn()).cancelCellEditing();
+			if(index > -1)
+			{
+				tableModel.removeRow(index);
+				tableModel.fireTableDataChanged();
+			}
+			if(stringTable.getModel().getRowCount() == 0)
+			{
+				deletePattern.setEnabled(false);
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:40 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class AddPatternListener implements ActionListener
+	{
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param e  !ToDo (Parameter description)
+		 ***************************************/
+		public void actionPerformed(ActionEvent e)
+		{
+			tableModel.addNewRow();
+			deletePattern.setEnabled(true);
+			tableModel.fireTableDataChanged();
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:40 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class PatternRenderer extends DefaultListCellRenderer
+	{
+		/****************************************
+		 * !ToDoo (Method description)
+		 *
+		 *@param list          !ToDo (Parameter description)
+		 *@param value         !ToDo (Parameter description)
+		 *@param index         !ToDo (Parameter description)
+		 *@param isSelected    !ToDo (Parameter description)
+		 *@param cellHasFocus  !ToDo (Parameter description)
+		 *@return              !ToDo (Return description)
+		 ***************************************/
+		public Component getListCellRendererComponent(JList list,
+				Object value,
+				int index,
+				boolean isSelected,
+				boolean cellHasFocus)
+		{
+			String displayText = value.toString();
+			if(displayText.length() > 10)
+			{
+				displayText = displayText.substring(0, 10);
+			}
+
+			JLabel label = new JLabel(displayText);
+
+			if(isSelected)
+			{
+				label.setBackground(Color.blue);
+				label.setForeground(Color.white);
+				label.setOpaque(true);
+			}
+			else
+			{
+				label.setForeground(Color.black);
+				label.setBackground(Color.white);
+			}
+
+			if(cellHasFocus)
+			{
+				label.setBorder(BorderFactory.createEtchedBorder());
+			}
+
+			label.setText(displayText);
+
+			return label;
+		}
+	}
+
+	
+	
+	
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Entries
new file mode 100644
index 0000000..0a7fcf9
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Entries
@@ -0,0 +1,3 @@
+/AssertionGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/DurationAssertionGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Repository
new file mode 100644
index 0000000..15f48a5
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/DurationAssertionGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/DurationAssertionGui.java
new file mode 100644
index 0000000..197cec6
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/assertions/gui/DurationAssertionGui.java
@@ -0,0 +1,212 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.assertions.gui;
+
+import java.awt.FlowLayout;
+import java.awt.BorderLayout;
+import java.awt.Color;
+import java.awt.Component;
+import java.awt.Font;
+import java.awt.GridBagConstraints;
+import java.awt.GridBagLayout;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.util.Iterator;
+
+import javax.swing.BorderFactory;
+import javax.swing.Box;
+import javax.swing.ButtonGroup;
+import javax.swing.DefaultListCellRenderer;
+import javax.swing.JButton;
+import javax.swing.JCheckBox;
+import javax.swing.JLabel;
+import javax.swing.JList;
+import javax.swing.JPanel;
+import javax.swing.JRadioButton;
+import javax.swing.JScrollPane;
+import javax.swing.JTextField;
+import javax.swing.JTable;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import javax.swing.table.TableCellRenderer;
+import org.apache.jmeter.assertions.DurationAssertion;
+import org.apache.jmeter.assertions.ResponseAssertion;
+import org.apache.jmeter.gui.util.PowerTableModel;
+import org.apache.jmeter.gui.util.TextAreaCellRenderer;
+import org.apache.jmeter.gui.util.TextAreaTableCellEditor;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+
+/****************************************
+ * Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ * Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class DurationAssertionGui extends AbstractAssertionGui implements FocusListener
+{
+
+	private JTextField duration;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public DurationAssertionGui()
+	{
+		init();
+	}
+
+	/**
+	 * Returns the label to be shown within the JTree-Component.
+	 */
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("duration_assertion_title");
+	}
+
+	public String getDurationAttributesTitle()
+	{
+		return JMeterUtils.getResString("duration_assertion_duration_test");
+	}
+
+	public TestElement createTestElement()
+	{
+		//ResponseAssertion el = new ResponseAssertion();
+		DurationAssertion el = new DurationAssertion();
+		configureTestElement(el);
+		String durationString = duration.getText();
+		long assertionDuration = 0;
+		try {
+			assertionDuration = Long.parseLong(durationString);
+		}
+		catch (NumberFormatException e) {
+			System.out.println("exception");
+			assertionDuration = Long.MAX_VALUE;
+		}
+		el.setAllowedDuration(assertionDuration);
+		return el;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		DurationAssertion assertion = (DurationAssertion)el;
+		duration.setText(String.valueOf(assertion.getAllowedDuration()));
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(getStaticLabel());
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// USER_INPUT
+		JPanel durationPanel = new JPanel();
+		durationPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), getDurationAttributesTitle()));
+		FlowLayout layout = new FlowLayout();
+		durationPanel.setLayout(layout);
+
+		durationPanel.add(new JLabel(JMeterUtils.getResString("duration_assertion_label")));
+		duration = new JTextField(5);
+		durationPanel.add(duration);
+
+		mainPanel.add(durationPanel);
+		this.add(mainPanel);
+
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void focusLost(FocusEvent e)
+	{
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void focusGained(FocusEvent e) {
+	}
+
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/Argument.java b/jakarta-jmeter/src/components/org/apache/jmeter/config/Argument.java
new file mode 100644
index 0000000..c5958a7
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/Argument.java
@@ -0,0 +1,180 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config;
+import java.io.*;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.TestElement;
+
+//Mark Walsh, 2002-08-03, add metadata attribute
+// add constructor Argument(String name, Object value, Object metadata)
+// add MetaData get and set methods
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   March 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class Argument extends AbstractTestElement implements Serializable
+{
+	protected final static String NAME = "Argument.name";
+	protected final static String VALUE = "Argument.value";
+        private final static String METADATA = "Argument.metadata";
+    
+	/****************************************
+	 * Constructor for the Argument object
+	 *
+	 *@param name   Description of Parameter
+	 *@param value  Description of Parameter
+	 *@param metadata Description of Parameter
+	 ***************************************/
+	public Argument(String name, Object value, Object metadata)
+	{
+		setProperty(NAME, name);
+		setProperty(VALUE, value);
+		setProperty(METADATA, metadata);
+	}
+
+	/****************************************
+	 * Constructor for the Argument object
+	 *
+	 *@param name   Description of Parameter
+	 *@param value  Description of Parameter
+	 ***************************************/
+	public Argument(String name, Object value)
+	{
+		setProperty(NAME, name);
+		setProperty(VALUE, value);
+	}
+
+	/****************************************
+	 * Constructor for the Argument object
+	 ***************************************/
+	public Argument() { }
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param el  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement el) { }
+
+	/****************************************
+	 * Sets the Name attribute of the Argument object
+	 *
+	 *@param newName  The new Name value
+	 ***************************************/
+	public void setName(String newName)
+	{
+		setProperty(NAME, newName);
+	}
+
+	/****************************************
+	 * Sets the Value attribute of the Argument object
+	 *
+	 *@param newValue  The new Value value
+	 ***************************************/
+	public void setValue(Object newValue)
+	{
+		setProperty(VALUE, newValue);
+	}
+
+	/****************************************
+	 * Sets the Meta Data attribute of the Argument object
+	 *
+	 *@param newMetaData  The new Metadata value
+	 ***************************************/
+	public void setMetaData(Object newMetaData)
+	{
+		setProperty(METADATA, newMetaData);
+	}
+
+	/****************************************
+	 * Gets the Name attribute of the Argument object
+	 *
+	 *@return   The Name value
+	 ***************************************/
+	public String getName()
+	{
+		return (String)getProperty(NAME);
+	}
+
+	/****************************************
+	 * Gets the Value attribute of the Argument object
+	 *
+	 *@return   The Value value
+	 ***************************************/
+	public Object getValue()
+	{
+		return (String)getProperty(VALUE);
+	}
+
+	/****************************************
+	 * Gets the Meta Data attribute of the Argument object
+	 *
+	 *@return   The MetaData value
+	 ***************************************/
+	public Object getMetaData()
+	{
+		String meta = (String)getProperty(METADATA);
+		if(meta == null)
+		{
+			meta = "=";
+		}
+	    return meta;
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/Arguments.java b/jakarta-jmeter/src/components/org/apache/jmeter/config/Arguments.java
new file mode 100644
index 0000000..bd5a7e1
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/Arguments.java
@@ -0,0 +1,266 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config;
+import java.io.Serializable;
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Map;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+// Mark Walsh, 2002-08-03 add method addArgument(String name, Object value, Object metadata)
+// modify methods toString(), addEmptyArgument(), addArgument(String name, Object value)
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class Arguments extends AbstractTestElement implements Serializable
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public static String[] COLUMN_NAMES = {
+			JMeterUtils.getResString("name"),
+			JMeterUtils.getResString("value"),
+                        JMeterUtils.getResString("metadata")
+			};
+
+	private final static String ARGUMENTS = "Arguments.arguments";
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public Arguments()
+	{
+		setProperty(ARGUMENTS,new ArrayList());
+	}
+
+	public List getArguments()
+	{
+		return (List)getProperty(ARGUMENTS);
+	}
+	
+	public void setArguments(List arguments)
+	{
+		setProperty(ARGUMENTS,arguments);
+	}
+	
+	public Map getArgumentsAsMap()
+	{
+		Iterator iter = getArguments().iterator();
+		Map argMap = new HashMap();
+		while(iter.hasNext())
+		{
+			Argument arg = (Argument)iter.next();
+			argMap.put(arg.getName(),arg.getValue());
+		}
+		return argMap;
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param name   !ToDo
+	 *@param value  !ToDo
+	 ***************************************/
+	public void addArgument(String name, Object value)
+	{
+		getArguments().add(new Argument(name, value, null));
+	}
+	
+	public void addArgument(Argument arg)
+	{
+		getArguments().add(arg);
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param name   !ToDo
+	 *@param value  !ToDo
+	 *@param metadata  Hold addition information
+	 ***************************************/
+	public void addArgument(String name, Object value, Object metadata)
+	{
+		getArguments().add(new Argument(name, value, metadata));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Iterator iterator()
+	{
+		return getArguments().iterator();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String toString()
+	{
+		StringBuffer str = new StringBuffer();
+		Iterator iter = getArguments().iterator();
+		while(iter.hasNext())
+		{
+			Argument arg = (Argument)iter.next();
+			if (arg.getMetaData() == null) {
+			    str.append(arg.getName() + "=" + arg.getValue());
+			} else {
+			    str.append(arg.getName() + arg.getMetaData() + arg.getValue());
+			}
+			if(iter.hasNext())
+			{
+				str.append("&");
+			}
+		}
+		return str.toString();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param row  !ToDo (Parameter description)
+	 ***************************************/
+	public void removeArgument(int row)
+	{
+		if(row < getArguments().size())
+		{
+			getArguments().remove(row);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param arg  !ToDo (Parameter description)
+	 ***************************************/
+	public void removeArgument(Argument arg)
+	{
+		getArguments().remove(arg);
+	}
+	
+	public void removeArgument(String argName)
+	{
+		Iterator iter = getArguments().iterator();
+		while(iter.hasNext())
+		{
+			Argument arg = (Argument)iter.next();
+			if(arg.getName().equals(argName))
+			{
+				iter.remove();
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void removeAllArguments()
+	{
+		if(getArguments().size() > 0)
+		{
+			getArguments().clear();
+		}
+	}
+
+	/****************************************
+	 * !ToDo
+	 ***************************************/
+	public void addEmptyArgument()
+	{
+		getArguments().add(new Argument("", "",null));
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getArgumentCount()
+	{
+		return getArguments().size();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param row  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public Argument getArgument(int row)
+	{
+		Argument argument = null;
+
+		if(row < getArguments().size())
+		{
+			argument = (Argument)getArguments().get(row);
+		}
+
+		return argument;
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Entries
new file mode 100644
index 0000000..4060522
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Entries
@@ -0,0 +1,4 @@
+/Argument.java/1.3/Wed Aug 14 19:13:05 2002//Tv1_7_3
+/Arguments.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/LoginConfig.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Repository
new file mode 100644
index 0000000..9fa0ab5
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/config
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/LoginConfig.java b/jakarta-jmeter/src/components/org/apache/jmeter/config/LoginConfig.java
new file mode 100644
index 0000000..f1f3145
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/LoginConfig.java
@@ -0,0 +1,120 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config;
+
+import java.util.*;
+import java.io.*;
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    March 13, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public class LoginConfig extends AbstractTestElement implements Serializable
+{
+
+	/************************************************************
+	 *  Constructor for the LoginConfig object
+	 ***********************************************************/
+	public LoginConfig()
+	{
+	}
+
+	/************************************************************
+	 *  Sets the Username attribute of the LoginConfig object
+	 *
+	 *@param  username  The new Username value
+	 ***********************************************************/
+	public void setUsername(String username)
+	{
+		setProperty(ConfigTestElement.USERNAME, username);
+	}
+
+	/************************************************************
+	 *  Sets the Password attribute of the LoginConfig object
+	 *
+	 *@param  password  The new Password value
+	 ***********************************************************/
+	public void setPassword(String password)
+	{
+		setProperty(ConfigTestElement.PASSWORD, password);
+	}
+
+
+	/************************************************************
+	 *  Gets the Username attribute of the LoginConfig object
+	 *
+	 *@return    The Username value
+	 ***********************************************************/
+	public String getUsername()
+	{
+		return (String)this.getProperty(ConfigTestElement.USERNAME);
+	}
+
+	/************************************************************
+	 *  Gets the Password attribute of the LoginConfig object
+	 *
+	 *@return    The Password value
+	 ***********************************************************/
+	public String getPassword()
+	{
+		return (String)this.getProperty(ConfigTestElement.PASSWORD);
+	}
+
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/ArgumentsPanel.java b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/ArgumentsPanel.java
new file mode 100644
index 0000000..14ca469
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/ArgumentsPanel.java
@@ -0,0 +1,403 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config.gui;
+import java.awt.BorderLayout;
+import java.awt.Dimension;
+import java.awt.FlowLayout;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.util.Collection;
+import java.util.Iterator;
+
+import javax.swing.BorderFactory;
+import javax.swing.JButton;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JScrollPane;
+import javax.swing.JTable;
+import javax.swing.ListSelectionModel;
+import javax.swing.event.CellEditorListener;
+import javax.swing.event.ChangeEvent;
+import javax.swing.table.TableCellEditor;
+import junit.framework.TestCase;
+
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.gui.util.PowerTableModel;
+import org.apache.jmeter.gui.util.TextAreaCellRenderer;
+import org.apache.jmeter.gui.util.TextAreaTableCellEditor;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.Data;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   March 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class ArgumentsPanel extends AbstractConfigGui implements FocusListener,
+		ActionListener,CellEditorListener
+{
+	JTable table;
+	JButton add;
+	JButton delete;
+	protected PowerTableModel tableModel;
+	String name;
+	JLabel tableLabel;
+
+	private static String ADD = "add";
+	private static String DELETE = "delete";
+
+	/****************************************
+	 * Constructor for the ArgumentsPanel object
+	 ***************************************/
+	public ArgumentsPanel()
+	{
+		this(JMeterUtils.getResString("paramtable"));
+	}
+	
+	public void editingCanceled(ChangeEvent e)
+	{
+	}
+	
+	public void editingStopped(ChangeEvent e)
+	{
+	}
+	
+	public ArgumentsPanel(String label)
+	{
+		tableLabel = new JLabel(label);
+		init();
+	}
+	
+	protected JTable getTable()
+	{
+		return table;
+	}
+	
+	protected JButton getDeleteButton()
+	{
+		return delete;
+	}
+	
+	protected JButton getAddButton()
+	{
+		return add;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return "Argument List";
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		Data model = tableModel.getData();
+		Arguments args = new Arguments();
+		model.reset();
+		while(model.next())
+		{
+			args.addArgument((String)model.getColumnValue(Arguments.COLUMN_NAMES[0]),
+					model.getColumnValue(Arguments.COLUMN_NAMES[1]));
+		}
+		this.configureTestElement(args);
+		return (TestElement)args.clone();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		if(el instanceof Arguments)
+		{
+			tableModel.clearData();
+			Iterator iter = ((Arguments)el).getArguments().iterator();
+			while(iter.hasNext())
+			{
+				Argument arg = (Argument)iter.next();
+				tableModel.addRow(new Object[]{arg.getName(),arg.getValue()});
+			}
+		}
+		checkDeleteStatus();
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void focusLost(FocusEvent e)
+	{
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void focusGained(FocusEvent e) { }
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void actionPerformed(ActionEvent e)
+	{
+		String action = e.getActionCommand();
+		if(action.equals(DELETE))
+		{
+			deleteArgument();
+		}
+		else if(action.equals(ADD))
+		{
+			addArgument();
+		}
+	}
+
+	protected void deleteArgument() {
+		// If a table cell is being edited, we must cancel the editing before
+		// deleting the row
+		if(table.isEditing())
+		{
+			TableCellEditor cellEditor = table.getCellEditor(table.getEditingRow(), table.getEditingColumn());
+			cellEditor.cancelCellEditing();
+		}
+		
+		int rowSelected = table.getSelectedRow();
+		if(rowSelected >= 0)
+		{
+			tableModel.removeRow(rowSelected);
+			tableModel.fireTableDataChanged();
+		
+			// Disable DELETE if there are no rows in the table to delete.
+			if(tableModel.getRowCount() == 0)
+			{
+				delete.setEnabled(false);
+			}
+		
+			// Table still contains one or more rows, so highlight (select)
+			// the appropriate one.
+			else
+			{
+				int rowToSelect = rowSelected;
+		
+				if(rowSelected >= tableModel.getRowCount())
+				{
+					rowToSelect = rowSelected - 1;
+				}
+		
+				table.setRowSelectionInterval(rowToSelect, rowToSelect);
+			}
+		}
+	}
+
+	protected void addArgument() {
+		// If a table cell is being edited, we should accept the current value
+		// and stop the editing before adding a new row.
+		if(table.isEditing())
+		{
+			TableCellEditor cellEditor = table.getCellEditor(table.getEditingRow(), table.getEditingColumn());
+			cellEditor.stopCellEditing();
+		}
+		
+		tableModel.addNewRow();
+		tableModel.fireTableDataChanged();
+		
+		// Enable DELETE (which may already be enabled, but it won't hurt)
+		delete.setEnabled(true);
+		
+		// Highlight (select) the appropriate row.
+		int rowToSelect = tableModel.getRowCount() - 1;
+		table.setRowSelectionInterval(rowToSelect, rowToSelect);
+	}
+
+	/****************************************
+	 * !ToDo
+	 ***************************************/
+	public void addInnerPanel()
+	{
+		initializeTableModel();
+		table = new JTable(tableModel);
+		table.setEnabled(true);
+		table.addFocusListener(this);
+		TextAreaTableCellEditor editor = new TextAreaTableCellEditor();
+		table.setDefaultEditor(String.class,
+				editor);
+		editor.addCellEditorListener(this);
+		TextAreaCellRenderer renderer = new TextAreaCellRenderer();
+		table.setRowHeight(renderer.getPreferredHeight());
+		table.setDefaultRenderer(String.class,renderer);
+		table.setCellSelectionEnabled(true);
+		table.setRowSelectionAllowed(true);
+		table.setColumnSelectionAllowed(false);
+		table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+
+		JScrollPane scroller = new JScrollPane(table);
+		Dimension tableDim = scroller.getPreferredSize();
+		tableDim.height = 70;
+		scroller.setPreferredSize(tableDim);
+		scroller.setColumnHeaderView(table.getTableHeader());
+
+		add = new JButton(JMeterUtils.getResString("add"));
+		add.setActionCommand(ADD);
+		add.setEnabled(true);
+
+		delete = new JButton(JMeterUtils.getResString("delete"));
+		delete.setActionCommand(DELETE);
+
+		checkDeleteStatus();
+
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
+		add.addActionListener(this);
+		delete.addActionListener(this);
+		buttonPanel.add(add);
+		buttonPanel.add(delete);
+
+		this.add(scroller,BorderLayout.CENTER);
+		this.add(buttonPanel,BorderLayout.SOUTH);
+	}
+
+	protected void initializeTableModel() {
+		tableModel = new PowerTableModel(new String[]{Arguments.COLUMN_NAMES[0],Arguments.COLUMN_NAMES[1]},
+				new Class[]{String.class,String.class});
+	}
+
+	protected void checkDeleteStatus() {
+		// Disable DELETE if there are no rows in the table to delete.
+		if(tableModel.getRowCount() == 0)
+		{
+			delete.setEnabled(false);
+		}
+		else
+		{
+			delete.setEnabled(true);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 **************************************
+	public void removeInnerPanel()
+	{
+		table.setEnabled(false);
+		add.setEnabled(false);
+		delete.setEnabled(false);
+		tableModel.removeAllRows();
+		tableModel.fireTableDataChanged();
+
+		this.remove(innerPanel);
+		innerPanel = null;
+	}*/
+
+	private void init()
+	{
+		this.setLayout(new BorderLayout(0,0));
+		this.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
+		JPanel labelPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
+		labelPanel.add(tableLabel);
+		this.add(labelPanel,BorderLayout.NORTH);
+		this.addInnerPanel();
+	}
+
+	
+	
+	public static class Test extends TestCase {
+		
+		public Test(String name)
+		{
+			super(name);
+		}
+		
+		public void testArgumentCreation() throws Exception
+		{
+			ArgumentsPanel gui = new ArgumentsPanel();
+			gui.tableModel.addNewRow();
+			gui.tableModel.setValueAt("howdy",0,0);
+			gui.tableModel.setValueAt("doody",0,1);
+			assertEquals("=",((Argument)((Arguments)gui.createTestElement()).getArguments().get(0)).getMetaData());
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Entries
new file mode 100644
index 0000000..678e52f
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Entries
@@ -0,0 +1,3 @@
+/ArgumentsPanel.java/1.5/Fri Aug 16 13:05:35 2002//Tv1_7_3
+/LoginConfigGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Repository
new file mode 100644
index 0000000..8ff274b
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/config/gui
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/LoginConfigGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/LoginConfigGui.java
new file mode 100644
index 0000000..fd7f4ae
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/config/gui/LoginConfigGui.java
@@ -0,0 +1,148 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config.gui;
+import java.awt.event.*;
+import javax.swing.*;
+import org.apache.jmeter.config.LoginConfig;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.config.ConfigTestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   March 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class LoginConfigGui extends AbstractConfigGui
+{
+	JTextField username = new JTextField(15);
+	JTextField password = new JPasswordField(15);
+	private boolean displayName = true;
+
+	/****************************************
+	 * Constructor for the LoginConfigGui object
+	 ***************************************/
+	public LoginConfigGui()
+	{
+		this(true);
+	}
+
+	/****************************************
+	 * Constructor for the LoginConfigGui object
+	 *
+	 *@param displayName  Description of Parameter
+	 ***************************************/
+	public LoginConfigGui(boolean displayName)
+	{
+		this.displayName = displayName;
+		init();
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("Login Config Element");
+	}
+
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		username.setText((String)element.getProperty(ConfigTestElement.USERNAME));
+		password.setText((String)element.getProperty(ConfigTestElement.PASSWORD));
+	}
+
+	public TestElement createTestElement()
+	{
+		ConfigTestElement element = new ConfigTestElement();
+		configureTestElement(element);
+		element.setProperty(ConfigTestElement.USERNAME,username.getText());
+		element.setProperty(ConfigTestElement.PASSWORD,password.getText());
+		return element;
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(1, VerticalLayout.LEFT));
+
+		if(displayName)
+		{
+			this.add(getNamePanel());
+		}
+
+		this.add(createUsernamePanel());
+		this.add(createPasswordPanel());
+	}
+
+	private JPanel createUsernamePanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("username")));
+		panel.add(username);
+		return panel;
+	}
+
+	private JPanel createPasswordPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("password")));
+		panel.add(password);
+		return panel;
+	}
+
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Entries
new file mode 100644
index 0000000..21dfa46
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Entries
@@ -0,0 +1,7 @@
+/GenericController.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/InterleaveControl.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/LoopController.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/ModifyController.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/OnceOnlyController.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/RandomController.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Repository
new file mode 100644
index 0000000..114640c
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/control
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/GenericController.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/GenericController.java
new file mode 100644
index 0000000..83c945e
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/GenericController.java
@@ -0,0 +1,359 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.assertions.Assertion;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.testelement.PerThreadClonable;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class GenericController extends AbstractTestElement implements Controller,
+		Serializable,PerThreadClonable
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected List subControllersAndSamplers = new ArrayList();
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected int current;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected Iterator controlIt;
+	private List configs = new LinkedList();
+	private boolean returnedNull = false;
+	private boolean done = false, timeForNext = false;
+	private List assertions = new LinkedList();
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public GenericController()
+	{
+	}
+
+	/****************************************
+	 * Gets the ConfigElements attribute of the GenericController object
+	 *
+	 *@return   The ConfigElements value
+	 ***************************************/
+	protected List getConfigElements()
+	{
+		return configs;
+	}
+
+	private void addConfigElement(TestElement el)
+	{
+		configs.add(el);
+	}
+
+	public void initialize()
+	{
+		resetCurrent();
+	}
+
+	public void reInitialize()
+	{
+		resetCurrent();
+	}
+
+	protected void removeCurrentController()
+	{
+		subControllersAndSamplers.remove(current);
+	}
+
+	protected void resetCurrent()
+	{
+		current = 0;
+	}
+
+	protected void incrementCurrent()
+	{
+		current++;
+	}
+
+	/**
+	 * Answers the question: when the end of subcontrollers and samplers is reached,
+	 * how does this Controller answert the question: hasNext()?  For most controllers,
+	 * the answer is to return false.  For some, it depends.  The LoopController, for
+	 * instance will repeat the list of subcontrollers a given number of times
+	 * before signalling false to 'hasNext()'.
+	 */
+	protected boolean hasNextAtEnd()
+	{
+		return false;
+	}
+
+	protected void nextAtEnd()
+	{
+		resetCurrent();
+	}
+
+	public boolean hasNext()
+	{
+		boolean retVal;
+		Object controller = getCurrentController();
+		if(controller == null)
+		{
+			retVal = hasNextAtEnd();
+		}
+		else if(controller instanceof Controller)
+		{
+			if(((Controller)controller).hasNext())
+			{
+				retVal = true;
+			}
+			else
+			{
+				currentHasNextIsFalse();
+				retVal = hasNext();
+			}
+		}
+		else
+		{
+			retVal = true;
+		}
+		if(!retVal)
+		{
+			reInitialize();
+		}
+		return retVal;
+	}
+
+	protected void currentHasNextIsFalse()
+	{
+		if(((Controller)getCurrentController()).isDone())
+		{
+			removeCurrentController();
+		}
+		else
+		{
+			incrementCurrent();
+		}
+	}
+
+	protected boolean shortCircuitIsDone()
+	{
+		return done;
+	}
+
+	protected void setShortCircuit(boolean done)
+	{
+		this.done = done;
+	}
+
+	public boolean isDone()
+	{
+		if(shortCircuitIsDone())
+		{
+			return true;
+		}
+		boolean isdone = true;
+		Iterator iter = subControllersAndSamplers.iterator();
+		while (iter.hasNext())
+		{
+			Object item = iter.next();
+			if(item instanceof Sampler)
+			{
+				return false;
+			}
+			else
+			{
+				isdone = isdone && ((Controller)item).isDone();
+			}
+		}
+		setShortCircuit(isdone);
+		return isdone;
+	}
+
+	protected TestElement getCurrentController()
+	{
+		if(current < subControllersAndSamplers.size())
+		{
+			return (TestElement)subControllersAndSamplers.get(current);
+		}
+		else return null;
+	}
+
+	/****************************************
+	 * Gets the SubControllers attribute of the GenericController object
+	 *
+	 *@return   The SubControllers value
+	 ***************************************/
+	protected List getSubControllers()
+	{
+		return subControllersAndSamplers;
+	}
+
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param child  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement child)
+	{
+		if(child instanceof Controller || child instanceof Sampler)
+		{
+			addController(child);
+		}
+	}
+
+	private void addController(TestElement child)
+	{
+		subControllersAndSamplers.add(child);
+	}
+
+	/****************************************
+	 * Retrieves the next Entry to be sampled.
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Sampler next()
+	{
+		TestElement controller = getCurrentController();
+		if(controller == null)
+		{
+			nextAtEnd();
+			return next();
+		}
+		if(controller instanceof Sampler)
+		{
+			incrementCurrent();
+			return (Sampler)controller;
+		}
+		else
+		{
+			Controller c = (Controller)controller;
+			if(c.hasNext())
+			{
+				Sampler s = c.next();
+				return s;
+			}
+			else if(c.isDone())
+			{
+				removeCurrentController();
+				return next();
+			}
+			else
+			{
+				incrementCurrent();
+				return next();
+			}
+		}
+	}
+
+	public static class Test extends junit.framework.TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testProcessing() throws Exception
+		{
+			GenericController controller = new GenericController();
+			GenericController sub_1 = new GenericController();
+			sub_1.addTestElement(makeSampler("one"));
+			sub_1.addTestElement(makeSampler("two"));
+			controller.addTestElement(sub_1);
+			controller.addTestElement(makeSampler("three"));
+			GenericController sub_2 = new GenericController();
+			GenericController sub_3 = new GenericController();
+			sub_2.addTestElement(makeSampler("four"));
+			sub_3.addTestElement(makeSampler("five"));
+			sub_3.addTestElement(makeSampler("six"));
+			sub_2.addTestElement(sub_3);
+			sub_2.addTestElement(makeSampler("seven"));
+			controller.addTestElement(sub_2);
+			String[] order = new String[]{"one","two","three","four","five","six","seven"};
+			int counter = 7;
+			for (int i = 0; i < 2; i++)
+			{
+				assertEquals(7,counter);
+				counter = 0;
+				while(controller.hasNext())
+				{
+					TestElement sampler = controller.next();
+					assertEquals(order[counter++],sampler.getProperty(TestElement.NAME));
+				}
+			}
+		}
+
+		private TestElement makeSampler(String name)
+		{
+			org.apache.jmeter.protocol.http.sampler.HTTPSampler s = new
+					org.apache.jmeter.protocol.http.sampler.HTTPSampler();
+			s.setName(name);
+			return s;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/InterleaveControl.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/InterleaveControl.java
new file mode 100644
index 0000000..45afc53
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/InterleaveControl.java
@@ -0,0 +1,170 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author    Michael Stover
+ *@created   March 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class InterleaveControl extends GenericController implements Serializable
+{
+
+	private boolean interleave;
+
+	/****************************************
+	 * Constructor for the InterleaveControl object
+	 ***************************************/
+	public InterleaveControl()
+	{
+	}
+
+	public void initialize()
+	{
+		super.initialize();
+		interleave = false;
+	}
+
+	public void reInitialize()
+	{
+		super.initialize();
+		interleave = false;
+	}
+
+	public boolean hasNext()
+	{
+		if(!interleave)
+		{
+			return super.hasNext();
+		}
+		else
+		{
+			interleave = false;
+			super.hasNext();
+			return false;
+		}
+	}
+
+	public Sampler next()
+	{
+		interleave = true;
+		return super.next();
+	}
+
+	public static class Test extends junit.framework.TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testProcessing() throws Exception
+		{
+			GenericController controller = new GenericController();
+			GenericController sub_1 = new InterleaveControl();
+			sub_1.addTestElement(makeSampler("one"));
+			sub_1.addTestElement(makeSampler("two"));
+			controller.addTestElement(sub_1);
+			controller.addTestElement(makeSampler("three"));
+			LoopController sub_2 = new LoopController();
+			sub_2.setLoops(3);
+			GenericController sub_3 = new GenericController();
+			sub_2.addTestElement(makeSampler("four"));
+			sub_3.addTestElement(makeSampler("five"));
+			sub_3.addTestElement(makeSampler("six"));
+			sub_2.addTestElement(sub_3);
+			sub_2.addTestElement(makeSampler("seven"));
+			controller.addTestElement(sub_2);
+			String[] interleaveOrder = new String[]{"one","two"};
+			String[] order = new String[]{"dummy","three","four","five","six","seven",
+						"four","five","six","seven","four","five","six","seven"};
+			int counter = 14;
+			for (int i = 0; i < 4; i++)
+			{
+				assertEquals(14,counter);
+				counter = 0;
+				while(controller.hasNext())
+				{
+					TestElement sampler = controller.next();
+					if(counter == 0)
+					{
+						assertEquals(interleaveOrder[i%2],sampler.getProperty(TestElement.NAME));
+					}
+					else
+					{
+						assertEquals(order[counter],sampler.getProperty(TestElement.NAME));
+					}
+					counter++;
+				}
+			}
+		}
+
+		private TestElement makeSampler(String name)
+		{
+			org.apache.jmeter.protocol.http.sampler.HTTPSampler s = new
+					org.apache.jmeter.protocol.http.sampler.HTTPSampler();
+			s.setName(name);
+			return s;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/LoopController.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/LoopController.java
new file mode 100644
index 0000000..9867698
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/LoopController.java
@@ -0,0 +1,223 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control;
+import java.io.Serializable;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.TestElement;
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class LoopController extends GenericController implements Serializable
+{
+	private final static String LOOPS = "LoopController.loops";
+	private final static String CONTINUE_FOREVER = "LoopController.continue_forever";
+	private int loopCount = 0;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public LoopController()
+	{
+		setContinueForever(true);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param loops  !ToDo (Parameter description)
+	 ***************************************/
+	public void setLoops(int loops)
+	{
+		setProperty(LOOPS,new Integer(loops));
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getLoops()
+	{
+		return getPropertyAsInt(LOOPS);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param forever  !ToDo (Parameter description)
+	 ***************************************/
+	public void setContinueForever(boolean forever)
+	{
+		setProperty(CONTINUE_FOREVER,new Boolean(forever));
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public boolean getContinueForever()
+	{
+		return getPropertyAsBoolean(CONTINUE_FOREVER);
+	}
+
+	public void initialize()
+	{
+		super.initialize();
+		resetLoopCount();
+	}
+
+	public void reInitialize()
+	{
+		super.reInitialize();
+		resetLoopCount();
+	}
+
+	protected void incrementLoopCount()
+	{
+		loopCount++;
+	}
+
+	protected void resetLoopCount()
+	{
+		if(!getContinueForever() && getLoops() > -1)
+		{
+			this.setShortCircuit(true);
+		}
+		else
+		{
+			loopCount = 0;
+		}
+	}
+
+	protected boolean hasNextAtEnd()
+	{
+		resetCurrent();
+		incrementLoopCount();
+		if(endOfLoop())
+		{
+			return false;
+		}
+		else
+		{
+			return hasNext();
+		}
+	}
+
+	protected void nextAtEnd()
+	{
+		resetCurrent();
+		incrementLoopCount();
+	}
+
+	private boolean endOfLoop()
+	{
+		return (!getContinueForever() || getLoops() > -1) && loopCount >= getLoops();
+	}
+
+	public static class Test extends junit.framework.TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testProcessing() throws Exception
+		{
+			GenericController controller = new GenericController();
+			GenericController sub_1 = new GenericController();
+			sub_1.addTestElement(makeSampler("one"));
+			sub_1.addTestElement(makeSampler("two"));
+			controller.addTestElement(sub_1);
+			controller.addTestElement(makeSampler("three"));
+			LoopController sub_2 = new LoopController();
+			sub_2.setLoops(3);
+			GenericController sub_3 = new GenericController();
+			sub_2.addTestElement(makeSampler("four"));
+			sub_3.addTestElement(makeSampler("five"));
+			sub_3.addTestElement(makeSampler("six"));
+			sub_2.addTestElement(sub_3);
+			sub_2.addTestElement(makeSampler("seven"));
+			controller.addTestElement(sub_2);
+			String[] order = new String[]{"one","two","three","four","five","six","seven",
+						"four","five","six","seven","four","five","six","seven"};
+			int counter = 15;
+			for (int i = 0; i < 2; i++)
+			{
+				assertEquals(15,counter);
+				counter = 0;
+				while(controller.hasNext())
+				{
+					TestElement sampler = controller.next();
+					assertEquals(order[counter++],sampler.getProperty(TestElement.NAME));
+				}
+			}
+		}
+
+		private TestElement makeSampler(String name)
+		{
+			org.apache.jmeter.protocol.http.sampler.HTTPSampler s = new
+					org.apache.jmeter.protocol.http.sampler.HTTPSampler();
+			s.setName(name);
+			return s;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/ModifyController.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/ModifyController.java
new file mode 100644
index 0000000..8adf8a6
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/ModifyController.java
@@ -0,0 +1,142 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.config.Modifier;
+import org.apache.jmeter.config.ResponseBasedModifier;
+import org.apache.jmeter.gui.JMeterComponentModel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * !ToDo (Class description)
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+
+public class ModifyController extends GenericController implements SampleListener,
+		Serializable
+{
+	SampleResult currentResult;
+	private String currentResponse;
+
+	/****************************************
+	 * Constructor for the GeneratorManager object
+	 ***************************************/
+	public ModifyController()
+	{
+	}
+
+	/****************************************
+	 * Methods to satisfy SampleListener interface.
+	 *
+	 *@param event  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleStarted(SampleEvent event) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param event  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleStopped(SampleEvent event) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param event  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleOccurred(SampleEvent event)
+	{
+		this.currentResult = event.getResult();
+	}
+
+	/****************************************
+	 * Adds a feature to the ConfigElements attribute of the GenericController
+	 * object
+	 *
+	 *@param entry  The feature to be added to the ConfigElements attribute
+	 ***************************************/
+	protected void addConfigElements(Sampler entry)
+	{
+		if(entry != null)
+		{
+			Iterator iter = this.getConfigElements().iterator();
+			while(iter.hasNext())
+			{
+				Object item = iter.next();
+				if(item instanceof Modifier)
+				{
+					((Modifier)item).modifyEntry(entry);
+				}
+				else if(item instanceof ResponseBasedModifier)
+				{
+					((ResponseBasedModifier)item).modifyEntry(entry, currentResult);
+				}
+				else
+				{
+					entry.addTestElement((TestElement)item);
+				}
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/OnceOnlyController.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/OnceOnlyController.java
new file mode 100644
index 0000000..5c3937a
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/OnceOnlyController.java
@@ -0,0 +1,155 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control;
+
+import java.util.*;
+import java.io.*;
+
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.TestElement;
+
+/************************************************************
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    March 13, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public class OnceOnlyController extends GenericController implements Serializable
+{
+
+	/************************************************************
+	 *  Constructor for the OnceOnlyController object
+	 ***********************************************************/
+	public OnceOnlyController()
+	{
+	}
+
+	public void reInitialize()
+	{
+		//don't do anything
+	}
+
+	protected boolean hasNextAtEnd()
+	{
+		this.setShortCircuit(true);
+		return false;
+	}
+
+	public static class Test extends junit.framework.TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testProcessing() throws Exception
+		{
+			GenericController controller = new GenericController();
+			GenericController sub_1 = new OnceOnlyController();
+			sub_1.addTestElement(makeSampler("one"));
+			sub_1.addTestElement(makeSampler("two"));
+			controller.addTestElement(sub_1);
+			controller.addTestElement(makeSampler("three"));
+			LoopController sub_2 = new LoopController();
+			sub_2.setLoops(3);
+			GenericController sub_3 = new GenericController();
+			sub_2.addTestElement(makeSampler("four"));
+			sub_3.addTestElement(makeSampler("five"));
+			sub_3.addTestElement(makeSampler("six"));
+			sub_2.addTestElement(sub_3);
+			sub_2.addTestElement(makeSampler("seven"));
+			controller.addTestElement(sub_2);
+			String[] interleaveOrder = new String[]{"one","two"};
+			String[] order = new String[]{"","","three","four","five","six","seven",
+						"four","five","six","seven","four","five","six","seven"};
+			int counter = 15;
+			for (int i = 0; i < 4; i++)
+			{
+				assertEquals(15,counter);
+				counter = 0;
+				if(i > 0)
+				{
+					counter = 2;
+				}
+				while(controller.hasNext())
+				{
+					TestElement sampler = controller.next();
+					if(i == 0 && counter < 2)
+					{
+						assertEquals(interleaveOrder[counter],sampler.getProperty(TestElement.NAME));
+					}
+					else
+					{
+						assertEquals(order[counter],sampler.getProperty(TestElement.NAME));
+					}
+					counter++;
+				}
+			}
+		}
+
+		private TestElement makeSampler(String name)
+		{
+			org.apache.jmeter.protocol.http.sampler.HTTPSampler s = new
+					org.apache.jmeter.protocol.http.sampler.HTTPSampler();
+			s.setName(name);
+			return s;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/RandomController.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/RandomController.java
new file mode 100644
index 0000000..e7c8732
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/RandomController.java
@@ -0,0 +1,87 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ 
+ package org.apache.jmeter.control;
+
+import java.io.Serializable;
+import java.util.Random;
+
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class RandomController
+	extends InterleaveControl
+	implements Serializable 
+{
+	Random rand;
+	
+	public RandomController()
+	{
+		rand = new Random();
+	}
+	
+	protected void resetCurrent()
+	{
+		current = rand.nextInt(this.getSubControllers().size());
+	}
+	
+	protected void incrementCurrent()
+	{
+		current = rand.nextInt(this.getSubControllers().size());
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Entries
new file mode 100644
index 0000000..04deae8
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Entries
@@ -0,0 +1,7 @@
+/InterleaveControlGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/LogicControllerGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/LoopControlPanel.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/ModifyControllerGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/OnceOnlyControllerGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+/RandomControlGui.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Repository
new file mode 100644
index 0000000..df45f83
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/control/gui
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/InterleaveControlGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/InterleaveControlGui.java
new file mode 100644
index 0000000..299c3c5
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/InterleaveControlGui.java
@@ -0,0 +1,155 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import javax.swing.text.*;
+import org.apache.jmeter.control.InterleaveControl;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class InterleaveControlGui extends AbstractControllerGui
+{
+	InterleaveControl model;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public InterleaveControlGui()
+	{
+		init();
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		namePanel.setName(name);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		InterleaveControl ic = new InterleaveControl();
+		configureTestElement(ic);
+		return ic;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("interleave_control_title");
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("interleave_control_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		namePanel = new NamePanel();
+		mainPanel.add(namePanel);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/LogicControllerGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/LogicControllerGui.java
new file mode 100644
index 0000000..778ec5a
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/LogicControllerGui.java
@@ -0,0 +1,159 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import javax.swing.text.*;
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class LogicControllerGui extends AbstractControllerGui
+{
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public LogicControllerGui()
+	{
+		init();
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		namePanel.setName(name);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		GenericController lc = new GenericController();
+		configureTestElement(lc);
+		return lc;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("logic_controller_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void updateGui() { }
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("logic_controller_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		namePanel = new NamePanel();
+		mainPanel.add(namePanel);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/LoopControlPanel.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/LoopControlPanel.java
new file mode 100644
index 0000000..1c050d4
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/LoopControlPanel.java
@@ -0,0 +1,246 @@
+package org.apache.jmeter.control.gui;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.control.LoopController;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.FocusRequester;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class LoopControlPanel extends AbstractControllerGui implements KeyListener, ActionListener
+{
+
+
+	JCheckBox infinite;
+	JTextField loops;
+
+	private boolean displayName = true;
+	private static String INFINITE = "Infinite Field";
+	private static String LOOPS = "Loops Field";
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public LoopControlPanel()
+	{
+		this(true);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param displayName  !ToDo (Parameter description)
+	 ***************************************/
+	public LoopControlPanel(boolean displayName)
+	{
+		this.displayName = displayName;
+		init();
+		setState(1);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param element  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement element)
+	{
+		setName((String)element.getProperty(TestElement.NAME));
+		if(element instanceof LoopController)
+		{
+			setState(((LoopController)element).getLoops());
+		}
+		else
+		{
+			setState(1);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		LoopController lc = new LoopController();
+		configureTestElement(lc);
+		if(loops.getText().length() > 0)
+		{
+			lc.setLoops(Integer.parseInt(loops.getText()));
+		}
+		else
+		{
+			lc.setLoops(-1);
+		}
+		return lc;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param event  !ToDo (Parameter description)
+	 ***************************************/
+	public void actionPerformed(ActionEvent event)
+	{
+		if(infinite.isSelected())
+		{
+			loops.setText("");
+			loops.setEnabled(false);
+		}
+		else
+		{
+			loops.setEnabled(true);
+			new FocusRequester(loops);
+		}
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void keyPressed(KeyEvent e) { }
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void keyTyped(KeyEvent e) { }
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void keyReleased(KeyEvent e)
+	{
+		String temp = e.getComponent().getName();
+		if(temp.equals(LOOPS))
+		{
+			try
+			{
+				Integer.parseInt(loops.getText());
+			}
+			catch(NumberFormatException ex)
+			{
+				if(loops.getText().length() > 0)
+				{
+					// We need a standard warning/error dialog. The problem with
+					// having it here is that the dialog is centered over this
+					// LoopControlPanel instead of begin centered in the entire
+					// JMeter GUI window.
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+					loops.setText("");
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("loop_controller_title");
+	}
+
+	private void init()
+	{
+		// The Loop Controller panel can be displayed standalone or inside another panel.
+		// For standalone, we want to display the TITLE, NAME, etc. (everything). However,
+		// if we want to display it within another panel, we just display the Loop Count
+		// fields (not the TITLE and NAME).
+
+		// Standalone
+		if(displayName)
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("loop_controller_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+
+			// LOOP
+			mainPanel.add(createLoopCountPanel());
+
+			this.add(mainPanel);
+		}
+
+		// Embedded
+		else
+		{
+			this.add(createLoopCountPanel());
+		}
+	}
+
+
+	private JPanel createLoopCountPanel()
+	{
+		JPanel loopPanel = new JPanel();
+
+		// LOOP LABEL
+		JLabel loopsLabel = new JLabel(JMeterUtils.getResString("iterator_num"));
+		loopPanel.add(loopsLabel);
+
+		// TEXT FIELD
+		loops = new JTextField(5);
+		loopPanel.add(loops);
+		loops.setName(LOOPS);
+		loops.addKeyListener(this);
+		loops.setText("1");
+
+		// FOREVER CHECKBOX
+		infinite = new JCheckBox(JMeterUtils.getResString("infinite"));
+		infinite.setActionCommand(INFINITE);
+		infinite.addActionListener(this);
+		loopPanel.add(infinite);
+
+		return loopPanel;
+	}
+
+	private void setState(int loopCount)
+	{
+		if(loopCount <= -1)
+		{
+			infinite.setSelected(true);
+			loops.setEnabled(false);
+			loops.setText("");
+		}
+		else
+		{
+			infinite.setSelected(false);
+			loops.setEnabled(true);
+			loops.setText("" + loopCount);
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/ModifyControllerGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/ModifyControllerGui.java
new file mode 100644
index 0000000..e3c1cfe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/ModifyControllerGui.java
@@ -0,0 +1,188 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control.gui;
+import java.awt.Font;
+import java.util.Collection;
+import java.util.LinkedList;
+
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JPopupMenu;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.control.ModifyController;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class ModifyControllerGui extends AbstractControllerGui
+{
+	ModifyController model;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ModifyControllerGui()
+	{
+		init();
+		setName(getStaticLabel());
+	}
+	
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return new LinkedList();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		pop.add(MenuFactory.makeMenus(new String[]{MenuFactory.CONTROLLERS,
+				MenuFactory.SAMPLERS, MenuFactory.CONFIG_ELEMENTS,
+				MenuFactory.MODIFIERS, MenuFactory.RESPONSE_BASED_MODIFIERS},
+				JMeterUtils.getResString("Add"),
+				"Add"));
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("modification_controller_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		super.setName(name);
+		namePanel.setName(name);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		ModifyController mc = new ModifyController();
+		configureTestElement(mc);
+		return mc;
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("modification_manager_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		namePanel = new NamePanel();
+		mainPanel.add(namePanel);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/OnceOnlyControllerGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/OnceOnlyControllerGui.java
new file mode 100644
index 0000000..a67b774
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/OnceOnlyControllerGui.java
@@ -0,0 +1,156 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import javax.swing.text.*;
+import org.apache.jmeter.control.OnceOnlyController;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class OnceOnlyControllerGui extends AbstractControllerGui
+{
+	OnceOnlyController model;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public OnceOnlyControllerGui()
+	{
+		init();
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		super.setName(name);
+		namePanel.setName(name);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		OnceOnlyController oc = new OnceOnlyController();
+		configureTestElement(oc);
+		return oc;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("once_only_controller_title");
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("once_only_controller_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		namePanel = new NamePanel();
+		mainPanel.add(namePanel);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/RandomControlGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/RandomControlGui.java
new file mode 100644
index 0000000..62cff7e
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/control/gui/RandomControlGui.java
@@ -0,0 +1,132 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control.gui;
+import java.awt.Font;
+
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.control.RandomController;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:40 $
+ *@version   1.0
+ ***************************************/
+
+public class RandomControlGui extends AbstractControllerGui
+{
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public RandomControlGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		RandomController ic = new RandomController();
+		configureTestElement(ic);
+		return ic;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("random_control_title");
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("random_control_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Entries
new file mode 100644
index 0000000..1936884
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Entries
@@ -0,0 +1,2 @@
+/MailerResultCollector.java/1.1/Sun Aug 11 19:24:40 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Repository
new file mode 100644
index 0000000..1cdfb3f
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/reporters
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/reporters/MailerResultCollector.java b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/MailerResultCollector.java
new file mode 100644
index 0000000..7db50f3
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/reporters/MailerResultCollector.java
@@ -0,0 +1,308 @@
+package org.apache.jmeter.reporters;
+
+import java.util.*;
+import java.io.*;
+import java.net.*;
+import javax.mail.*;
+import javax.mail.internet.*;
+
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.samplers.*;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class MailerResultCollector extends ResultCollector implements Serializable
+{
+
+	String address;
+	String from;
+	String smtpHost;
+	String failSubject;
+	String successSubject;
+	long failureCount = 0;
+	long successCount = 0;
+	long failureLimit = 2;
+	long successLimit = 2;
+	boolean failureMsgSent = false;
+	boolean siteDown = false;
+	boolean successMsgSent = false;
+
+	public MailerResultCollector()
+	{
+		super();
+		from = JMeterUtils.getPropDefault("mailer.from","");
+		address = JMeterUtils.getPropDefault("mailer.addressies","");
+		smtpHost = JMeterUtils.getPropDefault("mailer.smtphost","");
+		failSubject = JMeterUtils.getPropDefault("mailer.failsubject","");
+		successSubject = JMeterUtils.getPropDefault("mailer.successsubject","");
+		try
+		{
+			failureLimit =
+					Long.parseLong(JMeterUtils.getPropDefault("mailer.failurelimit","2"));
+		}catch (NumberFormatException ex){}
+		try
+		{
+			successLimit =
+					Long.parseLong(JMeterUtils.getPropDefault("mailer.successlimit","2"));
+		}catch (NumberFormatException ex){}
+	}
+
+		/**
+	 *  Gets the GuiClass attribute of the ResultCollector object
+	 *
+	 *@return    The GuiClass value
+	 */
+	public Class getGuiClass()
+	{
+		return org.apache.jmeter.visualizers.MailerVisualizer.class;
+	}
+
+		/**
+	 *  Gets the ClassLabel attribute of the ResultCollector object
+	 *
+	 *@return    The ClassLabel value
+	 */
+	public String getClassLabel()
+	{
+                return JMeterUtils.getResString("email_results_title");
+	}
+
+	public long getFailureLimit()
+	{
+		return failureLimit;
+	}
+
+	public long getFailureCount()
+	{
+		return failureCount;
+	}
+
+	public long getSuccessLimit()
+	{
+		return successLimit;
+	}
+
+	public void setFailureLimit(long limit)
+	{
+		failureLimit = limit;
+	}
+
+	public void setSuccessLimit(long limit)
+	{
+		successLimit = limit;
+	}
+
+	public void setAddress(String address)
+	{
+		this.address = address;
+	}
+
+	public String getAddress()
+	{
+		return address;
+	}
+
+	public void setFrom(String from)
+	{
+		this.from = from;
+	}
+
+	public String getFrom()
+	{
+		return from;
+	}
+
+	public void setSmtpHost(String host)
+	{
+		smtpHost = host;
+	}
+
+	public String getSmtpHost()
+	{
+		return smtpHost;
+	}
+
+	public void setFailSubject(String subject)
+	{
+		failSubject = subject;
+	}
+
+	public String getFailSubject()
+	{
+		return failSubject;
+	}
+
+	public void setSuccessSubject(String subject)
+	{
+		successSubject = subject;
+	}
+
+	public String getSuccessSubject()
+	{
+		return successSubject;
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public synchronized boolean isFailing()
+	{
+		return (failureCount > failureLimit);
+	}
+
+	public void sendTestMessage()
+	{
+		System.out.println("### Test To:  " + this.address + ", " +
+						"Via:  " + this.smtpHost + ", " +
+						"Fail Subject:  " + this.failSubject + ", " +
+						"Success Subject:  " + this.successSubject);
+				String testMessage = ("### Test To:  " + this.address + ", " +
+						"Via:  " + this.smtpHost + ", " +
+						"Fail Subject:  " + this.failSubject + ", " +
+						"Success Subject:  " + this.successSubject);
+
+				Vector addressVector = newAddressVector(address);
+				sendMail(from, addressVector, "Testing addressies", testMessage, smtpHost);
+	}
+
+		/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  sample  !ToDo (Parameter description)
+	 ***********************************************************/
+	public synchronized void sampleOccurred(SampleEvent event)
+	{
+		super.sampleOccurred(event);
+		SampleResult sample = event.getResult();
+
+		// -1 is the code for a failed sample.
+		//
+		if (!sample.isSuccessful())
+		{
+			failureCount++;
+		}
+		else
+		{
+			successCount++;
+		}
+
+		if (this.isFailing() && !siteDown && !failureMsgSent)
+		{
+
+			// Send the mail ...
+			Vector addressVector = newAddressVector(address);
+			sendMail(from, addressVector, failSubject, "URL Failed: " +
+					sample.getSampleLabel(), smtpHost);
+			siteDown = true;
+			failureMsgSent = true;
+			successCount = 0;
+		}
+
+		if (siteDown && (sample.getTime() != -1) & !successMsgSent)
+		{
+			// Send the mail ...
+			if (successCount > successLimit)
+			{
+				Vector addressVector = newAddressVector(address);
+				sendMail(from, addressVector, successSubject, "URL Restarted: " +
+						sample.getSampleLabel(), smtpHost);
+				siteDown = false;
+				successMsgSent = true;
+			}
+		}
+
+		if (successMsgSent && failureMsgSent)
+		{
+			clear();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  from      !ToDo (Parameter description)
+	 *@param  vEmails   !ToDo (Parameter description)
+	 *@param  subject   !ToDo (Parameter description)
+	 *@param  attText   !ToDo (Parameter description)
+	 *@param  SMTPHost  !ToDo (Parameter description)
+	 ***********************************************************/
+	public static synchronized void sendMail(String from,
+			Vector vEmails,
+			String subject,
+			String attText,
+			String SMTPHost)
+	{
+		try
+		{
+			String host = SMTPHost;
+			boolean debug = Boolean.valueOf(host).booleanValue();
+			InetAddress remote = InetAddress.getByName(host);
+
+			InternetAddress[] address = new InternetAddress[vEmails.size()];
+			for (int k = 0; k < vEmails.size(); k++)
+			{
+				address[k] = new InternetAddress(vEmails.elementAt(k).toString());
+			}
+
+			// create some properties and get the default Session
+			Properties props = new Properties();
+			props.put("mail.smtp.host", host);
+			Session session = Session.getDefaultInstance(props, null);
+			session.setDebug(debug);
+
+			// create a message
+			Message msg = new MimeMessage(session);
+			msg.setFrom(new InternetAddress(from));
+			msg.setRecipients(Message.RecipientType.TO, address);
+			msg.setSubject(subject);
+			msg.setText(attText);
+			Transport.send(msg);
+			System.out.println("Mail sent successfully!!");
+		}
+		catch (UnknownHostException e1)
+		{
+			System.out.println("NxError:Invalid Mail Server " + e1);
+			System.exit(1);
+		}
+		catch (Exception e)
+		{
+			e.printStackTrace();
+			System.exit(1);
+		}
+	}
+
+		/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  theAddressie  !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 ***********************************************************/
+	public synchronized Vector newAddressVector(String theAddressie)
+	{
+		Vector addressVector = new Vector();
+		String addressSep = ", ";
+
+		StringTokenizer next = new StringTokenizer(theAddressie, addressSep);
+
+		while (next.hasMoreTokens())
+		{
+			String theToken = next.nextToken();
+
+			if (theToken.indexOf("@") > 0)
+			{
+				addressVector.addElement(theToken);
+			}
+		}
+
+		return addressVector;
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Entries
new file mode 100644
index 0000000..2a37260
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Entries
@@ -0,0 +1,5 @@
+/ConstantTimer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GaussianRandomTimer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/RandomTimer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/UniformRandomTimer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Repository
new file mode 100644
index 0000000..cff398d
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/timers
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/ConstantTimer.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/ConstantTimer.java
new file mode 100644
index 0000000..8c24ace
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/ConstantTimer.java
@@ -0,0 +1,151 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.timers;
+
+import java.util.*;
+import java.io.*;
+
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/************************************************************
+ *  This class implements a constant timer with its own panel and fields for
+ *  value update and user interaction.
+ *
+ *@author     <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ *@created    $Date: 2002/08/11 19:24:41 $
+ *@version    $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ ***********************************************************/
+
+public class ConstantTimer extends AbstractTestElement implements Timer, Serializable
+{
+	public final static String DELAY = "ConstantTimer.delay";
+	private static List addableList = new LinkedList();
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public ConstantTimer()
+	{
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  delay  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setDelay(long delay)
+	{
+		setProperty(DELAY,new Long(delay));
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  range  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setRange(double range)
+	{
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long getDelay()
+	{
+		Object delay = getProperty(DELAY);
+		if(delay instanceof Long)
+		{
+			return ((Long)delay).longValue();
+		}
+		else
+		{
+			return Long.parseLong((String)delay);
+		}
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public double getRange()
+	{
+		return (double)0;
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long delay()
+	{
+		return getDelay();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String toString()
+	{
+		return JMeterUtils.getResString("constant_timer_memo");
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/GaussianRandomTimer.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/GaussianRandomTimer.java
new file mode 100644
index 0000000..c312d80
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/GaussianRandomTimer.java
@@ -0,0 +1,81 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.timers;
+
+import java.util.*;
+import java.io.*;
+
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * This class implements those methods needed by RandomTimer
+ * to be instantiable and implements a random delay with
+ * an average value and a gaussian distributed variation.
+ *
+ * @author  <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ */
+public class GaussianRandomTimer extends RandomTimer implements Serializable
+{
+
+	 public long delay() {
+		  return (long) Math.abs((this.random.nextGaussian() * getRange()) + getDelay());
+	 }
+
+	 public String toString() {
+		  return JMeterUtils.getResString("gaussian_timer_memo");
+	 }
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/RandomTimer.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/RandomTimer.java
new file mode 100644
index 0000000..84bf906
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/RandomTimer.java
@@ -0,0 +1,106 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.timers;
+
+import java.util.*;
+import java.io.*;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/************************************************************
+ *  This class implements a random timer with its own panel and fields for value
+ *  update and user interaction. Since this class does not define the delay()
+ *  method, is abstract and must be extended to provide full functionality.
+ *
+ *@author     <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ *@created    $Date: 2002/08/11 19:24:41 $
+ *@version    $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ ***********************************************************/
+
+public abstract class RandomTimer extends ConstantTimer implements Timer,Serializable
+{
+	public final static String RANGE = "RandomTimer.range";
+
+	protected Random random;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public RandomTimer()
+	{
+		this.random = new Random();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  range  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setRange(double range)
+	{
+		setProperty(RANGE,new Double(range));
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public double getRange()
+	{
+		return this.getPropertyAsDouble(RANGE);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/UniformRandomTimer.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/UniformRandomTimer.java
new file mode 100644
index 0000000..8157293
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/UniformRandomTimer.java
@@ -0,0 +1,82 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.timers;
+
+import java.util.*;
+import java.io.*;
+
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * This class implements those methods needed by RandomTimer
+ * to be instantiable and implements a random delay with
+ * an average value and a uniformly distributed variation.
+ *
+ * @author  <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ */
+public class UniformRandomTimer extends RandomTimer implements Serializable
+{
+	public long delay()
+	{
+		return (long) Math.abs((this.random.nextDouble() * getRange()) + getDelay());
+	}
+
+	public String toString()
+	{
+		return JMeterUtils.getResString("uniform_timer_memo");
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Entries
new file mode 100644
index 0000000..8dd9353
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Entries
@@ -0,0 +1,4 @@
+/ConstantTimerGui.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GaussianRandomTimerGui.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/UniformRandomTimerGui.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Repository
new file mode 100644
index 0000000..552725a
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/timers/gui
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/ConstantTimerGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/ConstantTimerGui.java
new file mode 100644
index 0000000..db56164
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/ConstantTimerGui.java
@@ -0,0 +1,198 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.timers.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.timers.*;
+import org.apache.jmeter.util.*;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   1.0
+ ***************************************/
+
+public class ConstantTimerGui extends AbstractTimerGui implements KeyListener
+{
+	private final String DEFAULT_DELAY = "300";
+
+	private final String DELAY_FIELD = "Delay Field";
+	private JTextField delayField;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ConstantTimerGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e        !ToDo (Parameter description)
+	 *@param thrower  !ToDo (Parameter description)
+	 ***************************************/
+	public static void error(Exception e, JComponent thrower)
+	{
+		JOptionPane.showMessageDialog(thrower, e, "Error", JOptionPane.ERROR_MESSAGE);
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("constant_timer_title");
+	}
+
+	public TestElement createTestElement()
+	{
+		ConstantTimer timer = new ConstantTimer();
+		this.configureTestElement(timer);
+		timer.setDelay(Long.parseLong(delayField.getText()));
+		return timer;
+	}
+
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		delayField.setText(((ConstantTimer)el).getDelay()+"");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyReleased(KeyEvent e)
+	{
+		String n = e.getComponent().getName();
+		if(n.equals(DELAY_FIELD))
+		{
+			try
+			{
+				Long.parseLong(delayField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(delayField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+					// We reset the text to be an empty string instead
+					// of the default value. If we reset it to the
+					// default value, then the user has to delete
+					// that value and reenter his/her own. That's
+					// too much trouble for the user.
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyPressed(KeyEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyTyped(KeyEvent e) { }
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("constant_timer_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// DELAY
+		JPanel delayPanel = new JPanel();
+		JLabel delayLabel = new JLabel(JMeterUtils.getResString("constant_timer_delay"));
+		delayPanel.add(delayLabel);
+		delayField = new JTextField(6);
+		delayField.setText(DEFAULT_DELAY);
+		delayPanel.add(delayField);
+		mainPanel.add(delayPanel);
+
+		delayField.addKeyListener(this);
+		delayField.setName(DELAY_FIELD);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/GaussianRandomTimerGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/GaussianRandomTimerGui.java
new file mode 100644
index 0000000..44a98c4
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/GaussianRandomTimerGui.java
@@ -0,0 +1,237 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.timers.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.FocusRequester;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.timers.*;
+import org.apache.jmeter.util.*;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   1.0
+ ***************************************/
+
+public class GaussianRandomTimerGui extends AbstractTimerGui implements KeyListener
+{
+
+	private final String DELAY_FIELD = "Delay Field";
+	private final String RANGE_FIELD = "Range Field";
+
+	public final String DEFAULT_DELAY = "300";
+	public final String DEFAULT_RANGE = "100.0";
+
+	private JTextField delayField;
+	private JTextField rangeField;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public GaussianRandomTimerGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e        !ToDo (Parameter description)
+	 *@param thrower  !ToDo (Parameter description)
+	 ***************************************/
+	public static void error(Exception e, JComponent thrower)
+	{
+		JOptionPane.showMessageDialog(thrower, e, "Error", JOptionPane.ERROR_MESSAGE);
+	}
+
+	public TestElement createTestElement()
+	{
+		RandomTimer timer = new GaussianRandomTimer();
+		this.configureTestElement(timer);
+		timer.setDelay(Long.parseLong(delayField.getText()));
+		timer.setRange(Double.parseDouble(rangeField.getText()));
+		return timer;
+	}
+
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		delayField.setText(el.getProperty(RandomTimer.DELAY).toString());
+		rangeField.setText(el.getProperty(RandomTimer.RANGE).toString());
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("gaussian_timer_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyReleased(KeyEvent e)
+	{
+		String temp = e.getComponent().getName();
+
+		if(temp.equals(DELAY_FIELD))
+		{
+			try
+			{
+				Long.parseLong(delayField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(delayField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+				}
+			}
+		}
+		else if(temp.equals(RANGE_FIELD))
+		{
+			try
+			{
+				Double.parseDouble(rangeField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(rangeField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyPressed(KeyEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyTyped(KeyEvent e) { }
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("gaussian_timer_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// THREAD DELAY PROPERTIES
+		JPanel threadDelayPropsPanel = new JPanel();
+		margin = new EmptyBorder(5, 10, 10, 10);
+		threadDelayPropsPanel.setLayout(new VerticalLayout(0, VerticalLayout.LEFT));
+		threadDelayPropsPanel.setBorder(new CompoundBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("thread_delay_properties")), margin));
+
+		// DELAY DEVIATION
+		JPanel delayDevPanel = new JPanel();
+		JLabel rangeLabel = new JLabel(JMeterUtils.getResString("gaussian_timer_range"));
+		delayDevPanel.add(rangeLabel);
+		rangeField = new JTextField(6);
+		rangeField.setText(DEFAULT_RANGE);
+		rangeField.setName(RANGE_FIELD);
+		rangeField.addKeyListener(this);
+		delayDevPanel.add(rangeField);
+		threadDelayPropsPanel.add(delayDevPanel);
+		mainPanel.add(threadDelayPropsPanel);
+
+		// AVG DELAY
+		JPanel avgDelayPanel = new JPanel();
+		JLabel delayLabel = new JLabel(JMeterUtils.getResString("gaussian_timer_delay"));
+		avgDelayPanel.add(delayLabel);
+		delayField = new JTextField(6);
+		delayField.setText(DEFAULT_DELAY);
+		delayField.setName(DELAY_FIELD);
+		delayField.addKeyListener(this);
+		avgDelayPanel.add(delayField);
+		threadDelayPropsPanel.add(avgDelayPanel);
+
+		this.add(mainPanel);
+
+		// Set the initial focus to the delay field
+		new FocusRequester(rangeField);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/UniformRandomTimerGui.java b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/UniformRandomTimerGui.java
new file mode 100644
index 0000000..3c3bdfb
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/timers/gui/UniformRandomTimerGui.java
@@ -0,0 +1,238 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.timers.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.FocusRequester;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.timers.*;
+import org.apache.jmeter.util.*;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   1.0
+ ***************************************/
+
+public class UniformRandomTimerGui extends AbstractTimerGui implements KeyListener
+{
+
+	private final String DELAY_FIELD = "Delay Field";
+	private final String RANGE_FIELD = "Range Field";
+
+	public final String DEFAULT_DELAY = "300";
+	public final String DEFAULT_RANGE = "100.0";
+
+	private JTextField delayField;
+	private JTextField rangeField;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public UniformRandomTimerGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e        !ToDo (Parameter description)
+	 *@param thrower  !ToDo (Parameter description)
+	 ***************************************/
+	public static void error(Exception e, JComponent thrower)
+	{
+		JOptionPane.showMessageDialog(thrower, e, "Error", JOptionPane.ERROR_MESSAGE);
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("uniform_timer_title");
+	}
+
+	public TestElement createTestElement()
+	{
+		RandomTimer timer = new UniformRandomTimer();
+		this.configureTestElement(timer);
+		timer.setDelay(Long.parseLong(delayField.getText()));
+		timer.setRange(Double.parseDouble(rangeField.getText()));
+		return timer;
+	}
+
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		delayField.setText(el.getProperty(RandomTimer.DELAY).toString());
+		rangeField.setText(el.getProperty(RandomTimer.RANGE).toString());
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyReleased(KeyEvent e)
+	{
+		String temp = e.getComponent().getName();
+
+		if(temp.equals(DELAY_FIELD))
+		{
+			try
+			{
+				Long.parseLong(delayField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(delayField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+				}
+			}
+		}
+		else if(temp.equals(RANGE_FIELD))
+		{
+			try
+			{
+				Double.parseDouble(rangeField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(rangeField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyPressed(KeyEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyTyped(KeyEvent e) { }
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("uniform_timer_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// THREAD DELAY PROPERTIES
+		JPanel threadDelayPropsPanel = new JPanel();
+		margin = new EmptyBorder(5, 10, 10, 10);
+		threadDelayPropsPanel.setLayout(new VerticalLayout(0, VerticalLayout.LEFT));
+		threadDelayPropsPanel.setBorder(new CompoundBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("thread_delay_properties")), margin));
+
+		// DELAY DEVIATION
+		JPanel delayDevPanel = new JPanel();
+		JLabel rangeLabel = new JLabel(JMeterUtils.getResString("uniform_timer_range"));
+		delayDevPanel.add(rangeLabel);
+		rangeField = new JTextField(6);
+		rangeField.setText(DEFAULT_RANGE);
+		rangeField.setName(RANGE_FIELD);
+		rangeField.addKeyListener(this);
+		delayDevPanel.add(rangeField);
+		threadDelayPropsPanel.add(delayDevPanel);
+		mainPanel.add(threadDelayPropsPanel);
+
+		// AVG DELAY
+		JPanel avgDelayPanel = new JPanel();
+		JLabel delayLabel = new JLabel(JMeterUtils.getResString("uniform_timer_delay"));
+		avgDelayPanel.add(delayLabel);
+		delayField = new JTextField(6);
+		delayField.setText(DEFAULT_DELAY);
+		delayField.setName(DELAY_FIELD);
+		delayField.addKeyListener(this);
+		avgDelayPanel.add(delayField);
+		threadDelayPropsPanel.add(avgDelayPanel);
+
+		this.add(mainPanel);
+
+		// Set the initial focus to the range field
+		new FocusRequester(rangeField);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/AssertionVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/AssertionVisualizer.java
new file mode 100644
index 0000000..94c9269
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/AssertionVisualizer.java
@@ -0,0 +1,186 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.Font;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.assertions.AssertionResult;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.reporters.ResultCollector;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+
+/****************************************
+ * Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ * Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/12 13:18:10 $
+ *@version   1.0
+ ***************************************/
+
+public class AssertionVisualizer extends AbstractVisualizer implements Clearable
+{
+
+	private JTextArea textArea;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public AssertionVisualizer()
+	{
+		init();
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("assertion_visualizer_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param sample  !ToDo (Parameter description)
+	 ***************************************/
+	public void add(SampleResult sample)
+	{
+		textArea.append(sample.getSamplerData().toString());
+		textArea.append(getAssertionResult(sample));
+		textArea.append("\n");
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void clear()
+	{
+		textArea.setText("");
+	}
+
+	private String getAssertionResult(SampleResult res)
+	{
+		if(res != null)
+		{
+			StringBuffer display = new StringBuffer();
+			List assertionResults = Arrays.asList(res.getAssertionResults());
+			if(assertionResults != null)
+			{
+				Iterator iter = assertionResults.iterator();
+				while(iter.hasNext())
+				{
+					AssertionResult item = (AssertionResult)iter.next();
+					if(item.isFailure() || item.isError())
+					{
+						display.append("\n\t\t");
+						display.append(item.getFailureMessage());
+					}
+				}
+			}
+			return display.toString();
+		}
+		return "";
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("assertion_visualizer_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+		mainPanel.add(getFilePanel());
+
+		// TEXTAREA LABEL
+		JLabel textAreaLabel = new JLabel(JMeterUtils.getResString("assertion_textarea_label"));
+		mainPanel.add(textAreaLabel);
+
+		// TEXTAREA
+		textArea = new JTextArea(10, 40);
+		textArea.setEditable(false);
+		textArea.setLineWrap(false);
+		JScrollPane areaScrollPane = new JScrollPane(textArea);
+		areaScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
+		areaScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
+		//areaScrollPane.setPreferredSize(new Dimension(250, 250));
+		mainPanel.add(areaScrollPane);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/BarVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/BarVisualizer.java
new file mode 100644
index 0000000..2faf206
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/BarVisualizer.java
@@ -0,0 +1,193 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.visualizers;
+
+import java.awt.*;
+import java.util.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.event.*;
+
+import org.apache.jmeter.samplers.SampleResult;
+
+/**
+ * This class implements a scrolling bar visualizer with
+ * user selectable scale.
+ *
+ * This visualizer emulates LiveSoftware ServletKiller.
+ *
+ * @author  <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ */
+public class BarVisualizer extends JPanel
+	 implements ImageVisualizer, ChangeListener
+{
+
+	 private static final int MAX_SCALE = 2000;
+
+	 private Graph graph;
+	 private JSlider slider;
+
+	 class Graph extends JComponent {
+
+		  private final int GRIDS = 10;
+
+		  private int limit;
+		  private int scale;
+		  private int counter;
+		  private Vector samples;
+		  private Color barColor;
+
+		  public Graph() {
+				super();
+
+				this.samples = new Vector();
+				this.barColor = Color.lightGray;
+				this.counter = 0;
+				this.limit = 1000;
+				this.scale = limit / GRIDS;
+		  }
+
+		  public synchronized void setLimit(int limit) {
+				this.limit = limit;
+				this.scale = limit / GRIDS;
+		  }
+
+		  public void add(int sample) {
+				this.samples.addElement(new Integer(sample));
+				this.counter++;
+		  }
+
+		  public void clear() {
+				this.samples.removeAllElements();
+				this.counter = 0;
+		  }
+
+		  public void paintComponent(Graphics g) {
+				super.paintComponent(g);
+
+				Dimension d = this.getSize();
+
+				for (int i = 1, y; i < GRIDS; i++) {
+					 y = d.height - (i * d.height / GRIDS);
+					 g.setColor(Color.black);
+					 g.drawLine(5, y, d.width - 35, y);
+					 g.setColor(Color.blue);
+					 g.drawString(Integer.toString(i * scale), d.width - 30, y + this.getFont().getSize() / 2);
+				}
+
+				int bars = (d.width - 40) / 8;
+				if (counter < bars) bars = counter;
+
+				if (this.limit == 0) {
+					 this.limit = 1;
+				}
+
+				for (int i = bars; i > 0; i--) {
+					 int sample = ((Integer) this.samples.elementAt(this.counter - i)).intValue() * d.height / this.limit;
+					 g.setColor(this.barColor);
+					 g.fill3DRect(d.width - 36 - 8 * i, d.height - sample, 5, sample, true);
+				}
+		  }
+	 }
+
+	 public BarVisualizer() {
+		  super();
+
+		  this.graph = new Graph();
+		  this.slider = new JSlider(JSlider.VERTICAL, 0, MAX_SCALE, 1000);
+		  this.slider.addChangeListener(this);
+		  this.slider.setPaintLabels(false);
+		  this.slider.setPaintTicks(false);
+
+		  this.setLayout(new BorderLayout());
+		  this.add(slider, BorderLayout.WEST);
+		  this.add(graph, BorderLayout.CENTER);
+		  this.setPreferredSize(new Dimension(500, 100));
+	 }
+
+	 public void stateChanged(ChangeEvent e) {
+		  int limit = this.slider.getValue();
+		  this.graph.setLimit(limit);
+		  repaint();
+	 }
+
+	 public synchronized void add(SampleResult sampleResult) {
+		long s = sampleResult.getTime();
+		  this.graph.add((int) s);
+		  repaint();
+	 }
+
+	 public synchronized void clear() {
+		  this.graph.clear();
+		  repaint();
+	 }
+
+	 public String toString() {
+		  return "Show the samples as scrolling bars";
+	 }
+
+	 public JPanel getControlPanel() {
+	return this;
+	 }
+
+	 public Image getImage() {
+	Image result = graph.createImage(graph.getWidth(), graph.getHeight());
+	graph.paintComponent(result.getGraphics());
+
+	return result;
+	 }
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Entries b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Entries
new file mode 100644
index 0000000..2d9e13f
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Entries
@@ -0,0 +1,22 @@
+/AssertionVisualizer.java/1.2/Mon Aug 12 13:18:10 2002//Tv1_7_3
+/BarVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/Graph.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GraphAccum.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GraphAccumModel.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GraphAccumVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GraphModel.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/GraphVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/MailerVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/RunningSample.java/1.2/Wed Aug 14 16:38:44 2002//Tv1_7_3
+/Sample.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/Spline3.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/SplineModel.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/SplineVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/StatVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/StatVisualizerModel.java/1.2/Wed Aug 14 16:38:44 2002//Tv1_7_3
+/TableDataModel.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/TableVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/TreeVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/ViewResultsFullVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+/WindowedVisualizer.java/1.1/Sun Aug 11 19:24:41 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Repository b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Repository
new file mode 100644
index 0000000..897b1b2
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/components/org/apache/jmeter/visualizers
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Root b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Tag b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Graph.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Graph.java
new file mode 100644
index 0000000..0f72eea
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Graph.java
@@ -0,0 +1,331 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+import java.awt.Color;
+import java.awt.Dimension;
+import java.awt.Graphics;
+import java.awt.Rectangle;
+import java.util.Iterator;
+
+import javax.swing.JComponent;
+import javax.swing.Scrollable;
+import javax.swing.SwingUtilities;
+import org.apache.jmeter.gui.util.JMeterColor;
+import org.apache.jmeter.samplers.Clearable;
+
+
+/**
+ *  Title: Apache JMeter Description: Implements a simple graph for displaying
+ *  performance results Copyright: Copyright (c) 2000 Company: Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    March 21, 2002
+ *@version    1.0
+ */
+
+public class Graph extends JComponent implements Scrollable,GraphListener,Clearable
+{
+
+	private boolean data = true;
+	private boolean average = true;
+	private boolean deviation = true;
+	private boolean throughput = true;
+
+	private GraphModel model;
+	private static int width = 2000;
+
+
+	/**
+	 *  Constructor for the Graph object
+	 */
+	public Graph()
+	{
+		this.setPreferredSize(new Dimension(width, 800));
+	}
+
+
+	/**
+	 *  Constructor for the Graph object
+	 *
+	 *@param  model  Description of Parameter
+	 */
+	public Graph(GraphModel model)
+	{
+		this();
+		setModel(model);
+	}
+
+
+	/**
+	 *  Sets the Model attribute of the Graph object
+	 *
+	 *@param  model  The new Model value
+	 */
+	private void setModel(Object model)
+	{
+		this.model = (GraphModel) model;
+		this.model.addGraphListener(this);
+		repaint();
+	}
+
+
+	/**
+	 *  Gets the PreferredScrollableViewportSize attribute of the Graph object
+	 *
+	 *@return    The PreferredScrollableViewportSize value
+	 */
+	public Dimension getPreferredScrollableViewportSize()
+	{
+		return this.getPreferredSize();
+		//return new Dimension(width, 400);
+	}
+
+
+	/**
+	 *  Gets the ScrollableUnitIncrement attribute of the Graph object
+	 *
+	 *@param  visibleRect  Description of Parameter
+	 *@param  orientation  Description of Parameter
+	 *@param  direction    Description of Parameter
+	 *@return              The ScrollableUnitIncrement value
+	 */
+	public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction)
+	{
+		return 5;
+	}
+
+
+	/**
+	 *  Gets the ScrollableBlockIncrement attribute of the Graph object
+	 *
+	 *@param  visibleRect  Description of Parameter
+	 *@param  orientation  Description of Parameter
+	 *@param  direction    Description of Parameter
+	 *@return              The ScrollableBlockIncrement value
+	 */
+	public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction)
+	{
+		return (int) (visibleRect.width * .9);
+	}
+
+
+	/**
+	 *  Gets the ScrollableTracksViewportWidth attribute of the Graph object
+	 *
+	 *@return    The ScrollableTracksViewportWidth value
+	 */
+	public boolean getScrollableTracksViewportWidth()
+	{
+		return false;
+	}
+
+
+	/**
+	 *  Gets the ScrollableTracksViewportHeight attribute of the Graph object
+	 *
+	 *@return    The ScrollableTracksViewportHeight value
+	 */
+	public boolean getScrollableTracksViewportHeight()
+	{
+		return true;
+	}
+
+
+	/**
+	 *  Clears this graph
+	 */
+	public void clear() { }
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  value  Description of Parameter
+	 */
+	public void enableData(boolean value)
+	{
+		this.data = value;
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  value  Description of Parameter
+	 */
+	public void enableAverage(boolean value)
+	{
+		this.average = value;
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  value  Description of Parameter
+	 */
+	public void enableDeviation(boolean value)
+	{
+		this.deviation = value;
+	}
+	
+	public void enableThroughput(boolean value)
+	{
+		throughput = value;
+	}
+
+
+	/**
+	 *  Description of the Method
+	 */
+	public void updateGui()
+	{
+		repaint();
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  oneSample  Description of Parameter
+	 */
+	public void updateGui(final Sample oneSample)
+	{
+		final int xPos = model.getSampleCount();
+		SwingUtilities.invokeLater(
+			new Runnable()
+			{
+				public void run()
+				{
+					Graphics g = getGraphics();
+					if (g != null)
+					{
+						drawSample(xPos, oneSample, g);
+					}
+				}
+			}
+				);
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  g  Description of Parameter
+	 */
+	public void paintComponent(Graphics g)
+	{
+		super.paintComponent(g);
+
+		Dimension d = this.getSize();
+
+		synchronized (model.getSamples())
+		{
+			Iterator e = model.getSamples().iterator();
+			for (int i = 0; e.hasNext(); i++)
+			{
+				Sample s = (Sample) e.next();
+				drawSample(i, s, g);
+			}
+		}
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  x          Description of Parameter
+	 *@param  oneSample  Description of Parameter
+	 *@param  g          Description of Parameter
+	 */
+	private void drawSample(int x, Sample oneSample, Graphics g)
+	{
+		Dimension d = this.getSize();
+		if (data)
+		{
+			int data = (int) (oneSample.data * d.height / model.getGraphMax());
+			if(!oneSample.error)
+			{
+				g.setColor(Color.black);
+			}
+			else
+			{
+				g.setColor(JMeterColor.YELLOW);
+			}
+			g.drawLine(x % width, d.height - data, x % width, d.height - data - 1);
+		}
+
+		if (average)
+		{
+			int average = (int) (oneSample.average * d.height / model.getGraphMax());
+			g.setColor(Color.blue);
+			g.drawLine(x % width, d.height - average, x % width, (d.height - average - 1));
+		}
+
+		if (deviation)
+		{
+			int deviation = (int) (oneSample.deviation * d.height / model.getGraphMax());
+			g.setColor(Color.red);
+			g.drawLine(x % width, d.height - deviation, x % width, (d.height - deviation - 1));
+		}
+		if(throughput)
+		{
+			int throughput = (int) (oneSample.throughput * d.height / model.getThroughputMax());
+			g.setColor(JMeterColor.dark_green);
+			g.drawLine(x % width, d.height - throughput, x % width, (d.height - throughput - 1));
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccum.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccum.java
new file mode 100644
index 0000000..80cf2f6
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccum.java
@@ -0,0 +1,507 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+import javax.swing.*;
+import java.awt.*;
+import java.util.*;
+
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.*;
+
+import org.apache.jmeter.protocol.http.sampler.HTTPSamplerFull;
+
+import org.apache.log4j.*;
+/**
+ *  Draws the graph
+ *
+ *@author     Khor Soon Hin
+ *@created    2001/08/11
+ *@version    1.0
+ */
+
+public class GraphAccum extends JComponent implements Scrollable,
+		GraphAccumListener
+{
+	/**
+	 *  Description of the Field
+	 */
+	protected GraphAccumModel model;
+	/**
+	 *  Description of the Field
+	 */
+	protected GraphAccumVisualizer visualizer;
+	// how far from each other to plot
+	// the points
+	/**
+	 *  Description of the Field
+	 */
+	protected boolean noLegendYet = true;
+	// ensure that the legends are only
+	// drawn once
+	/**
+	 *  Description of the Field
+	 */
+	protected Point[] previousPts;
+	// keep track of previous point
+	// needed to draw a line joining
+	// the previous point with the current
+	// one
+	/**
+	 *  Description of the Field
+	 */
+	protected boolean previousPtsAlloc = false;
+	/**
+	 *  Description of the Field
+	 */
+	protected static int width = 2000;
+	/**
+	 *  Description of the Field
+	 */
+	protected final static int PLOT_X_WIDTH = 10;
+	private static Category catClass =
+			Category.getInstance(GraphAccum.class.getName());
+
+	// Ensure that previousPts is allocated
+
+	// once only.  It'll be reused at each
+	// drawSample.  It can't be allocated
+	// outside drawSample 'cos the sample
+	// is only passed in here.
+
+	/**
+	 *  Constructor
+	 */
+	public GraphAccum()
+	{
+		catClass.debug("Start : GraphAnnum1");
+		this.setPreferredSize(new Dimension(width, 800));
+		catClass.debug("End : GraphAnnum1");
+	}
+
+
+	/**
+	 *  Constructor with model set
+	 *
+	 *@param  model  Description of Parameter
+	 */
+	public GraphAccum(GraphAccumModel model)
+	{
+		this();
+		catClass.debug("Start : GraphAnnum2");
+		setModel(model);
+		catClass.debug("End : GraphAnnum2");
+	}
+
+
+	/**
+	 *  Set model which this object represents
+	 *
+	 *@param  model  model which this object represents
+	 */
+	private void setModel(Object model)
+	{
+		catClass.debug("Start : setModel1");
+		this.model = (GraphAccumModel) model;
+		this.model.addGraphAccumListener(this);
+		repaint();
+		catClass.debug("End : setModel1");
+	}
+
+
+	/**
+	 *  Set the visualizer
+	 *
+	 *@param  visualizer  visualizer of this object
+	 */
+	public void setVisualizer(Object visualizer)
+	{
+		if (catClass.isDebugEnabled())
+		{
+			catClass.debug("setVisualizer1 : Setting visualizer - " + visualizer);
+		}
+		this.visualizer = (GraphAccumVisualizer) visualizer;
+	}
+
+
+	/**
+	 *  The legend is only printed once during sampling. This sets the variable
+	 *  that indicates whether the legend has been printed yet or not.
+	 *
+	 *@param  value  variable that indicates whether the legend has been printed
+	 *      yet
+	 */
+	public void setNoLegendYet(boolean value)
+	{
+		noLegendYet = value;
+	}
+
+
+	/**
+	 *  Gets the PreferredScrollableViewportSize attribute of the Graph object
+	 *
+	 *@return    The PreferredScrollableViewportSize value
+	 */
+	public Dimension getPreferredScrollableViewportSize()
+	{
+		return this.getPreferredSize();
+	}
+
+
+	/**
+	 *  Gets the ScrollableUnitIncrement attribute of the Graph object
+	 *
+	 *@param  visibleRect  Description of Parameter
+	 *@param  orientation  Description of Parameter
+	 *@param  direction    Description of Parameter
+	 *@return              The ScrollableUnitIncrement value
+	 */
+	public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction)
+	{
+		return 5;
+	}
+
+
+	/**
+	 *  Gets the ScrollableBlockIncrement attribute of the Graph object
+	 *
+	 *@param  visibleRect  Description of Parameter
+	 *@param  orientation  Description of Parameter
+	 *@param  direction    Description of Parameter
+	 *@return              The ScrollableBlockIncrement value
+	 */
+	public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction)
+	{
+		return (int) (visibleRect.width * .9);
+	}
+
+
+	/**
+	 *  Gets the ScrollableTracksViewportWidth attribute of the Graph object
+	 *
+	 *@return    The ScrollableTracksViewportWidth value
+	 */
+	public boolean getScrollableTracksViewportWidth()
+	{
+		return false;
+	}
+
+
+	/**
+	 *  Gets the ScrollableTracksViewportHeight attribute of the Graph object
+	 *
+	 *@return    The ScrollableTracksViewportHeight value
+	 */
+	public boolean getScrollableTracksViewportHeight()
+	{
+		return true;
+	}
+
+
+	/**
+	 *  The legend is only printed once during sampling. This returns the variable
+	 *  that indicates whether the legend has been printed yet or not.
+	 *
+	 *@return    value variable that indicates whether the legend has been printed
+	 *      yet
+	 */
+	public boolean getNoLegendYet()
+	{
+		return noLegendYet;
+	}
+
+
+	/**
+	 *  Redraws the gui
+	 */
+	public void updateGui()
+	{
+		catClass.debug("Start : updateGui1");
+		repaint();
+		catClass.debug("End : updateGui1");
+	}
+
+
+	/**
+	 *  Redraws the gui if no rescaling of the graph is needed
+	 *
+	 *@param  oneSample  sample to be added
+	 */
+	public void updateGui(final SampleResult oneSample)
+	{
+		catClass.debug("Start : updateGui2");
+		final int xPos = model.getSampleCount();
+		SwingUtilities.invokeLater(
+			new Runnable()
+			{
+				public void run()
+				{
+					Graphics g = getGraphics();
+					if (g != null)
+					{
+						drawSample(xPos * PLOT_X_WIDTH, oneSample, g);
+					}
+				}
+			}
+				);
+		catClass.debug("End : updateGui2");
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  g  Description of Parameter
+	 */
+	public void paintComponent(Graphics g)
+	{
+		super.paintComponent(g);
+		catClass.debug("Start : paintComponent1");
+		Dimension d = this.getSize();
+		synchronized (model.getList())
+		{
+			// for repainting set this to false because all the points needs to be redrawn
+			// so no need(shouldn't) use the previousPts
+			previousPtsAlloc = false;
+			Iterator e = model.getList().iterator();
+			for (int i = 0; e.hasNext(); i++)
+			{
+				SampleResult s = (SampleResult) e.next();
+				drawSample(i * PLOT_X_WIDTH, s, g);
+			}
+		}
+		catClass.debug("End : paintComponent1");
+	}
+
+
+	/**
+	 *  Clears this graph
+	 */
+	public void clear()
+	{
+		setNoLegendYet(true);
+		((JPanel) visualizer.getWhiteCanvas()).removeAll();
+		previousPts = null;
+	}
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  x          Description of Parameter
+	 *@param  oneSample  Description of Parameter
+	 *@param  g          Description of Parameter
+	 */
+	private void drawSample(int x, SampleResult oneSample, Graphics g)
+	{
+		catClass.debug("Start : drawSample1");
+		int lastLevel = 0;
+		// used to keep track of accumulated load times of
+		// components
+		int compCount = 0;
+		// number of components
+
+		SampleResult[] resultList = oneSample.getSubResults();
+		// allocate previousPts only the first time
+		int resultListCount = 0;
+		if (!previousPtsAlloc)
+		{
+			if (resultList != null)
+			{
+				resultListCount += resultList.length;
+			}
+			previousPts = new Point[resultListCount + 2];
+		}
+
+		Color currColor = Color.black;
+		JPanel lPanel = (JPanel) visualizer.getWhiteCanvas();
+		JPanel legendPanel = new JPanel();
+		GridBagLayout gridBag = new GridBagLayout();
+		GridBagConstraints gbc = new GridBagConstraints();
+		legendPanel.setLayout(gridBag);
+		lPanel.add(legendPanel);
+		Dimension d = this.getSize();
+		// set the total time to load the sample
+		long totalTime = oneSample.getTime();
+		// if the page has other components then set the total time to be that including
+		// all its components' load time
+		if (catClass.isDebugEnabled())
+		{
+			catClass.debug("drawSample1 : total time - " + totalTime);
+		}
+		int data = (int) (totalTime * d.height / model.getMax());
+		g.setColor(currColor);
+		if (!previousPtsAlloc)
+		{
+			// if first dot, just draw the point
+			g.drawLine(x % width, d.height - data, x % width, d.height - data - 1);
+		} else
+		{
+			// otherwise, draw from previous point
+			g.drawLine((previousPts[0].x) % width, previousPts[0].y, x % width,
+					d.height - data);
+		}
+		// store current total time point
+		previousPts[0] = new Point(x % width, d.height - data);
+		if (legendPanel != null && noLegendYet)
+		{
+			gbc.gridx = 0;
+			gbc.gridy = compCount++;
+			gbc.anchor = GridBagConstraints.WEST;
+			gbc.weightx = 1.0;
+			gbc.insets = new Insets(0, 10, 0, 0);
+			JLabel totalTimeLabel = new JLabel("Total time - " + oneSample.toString());
+			totalTimeLabel.setForeground(currColor);
+			gridBag.setConstraints(totalTimeLabel, gbc);
+			legendPanel.add(totalTimeLabel);
+		}
+		// plot the time of the page itself without all its components
+		if (catClass.isDebugEnabled())
+		{
+			catClass.debug("drawSample1 : main page load time - "
+					 + oneSample.getTime());
+		}
+		data = (int) (oneSample.getTime()
+				 * d.height / model.getMax());
+		currColor = ColorHelper.changeColorCyclicIncrement(currColor, 40);
+		g.setColor(currColor);
+		if (!previousPtsAlloc)
+		{
+			// if first dot, just draw the point
+			g.drawLine(x % width, d.height - data, x % width, d.height - data - 1);
+		} else
+		{
+			// otherwise, draw from previous point
+			g.drawLine((previousPts[1].x) % width, previousPts[1].y, x % width,
+					d.height - data);
+		}
+		// store load time without components
+		previousPts[1] = new Point(x % width, d.height - data);
+		if (legendPanel != null && noLegendYet)
+		{
+			gbc.gridx = 0;
+			gbc.gridy = compCount++;
+			gbc.anchor = GridBagConstraints.WEST;
+			gbc.weightx = 1.0;
+			gbc.insets = new Insets(0, 10, 0, 0);
+			JLabel mainTimeLabel = new JLabel(oneSample.toString());
+			mainTimeLabel.setForeground(currColor);
+			gridBag.setConstraints(mainTimeLabel, gbc);
+			legendPanel.add(mainTimeLabel);
+		}
+		lastLevel += data;
+		// plot the times of the total times components
+		int currPreviousPts = 2;
+		if (resultList != null)
+		{
+			for(int i = 0;i < resultList.length;i++)
+			{
+				SampleResult componentRes = (SampleResult) resultList[i];
+				if (catClass.isDebugEnabled())
+				{
+					catClass.debug("drawSample1 : componentRes - " +
+							componentRes.getSampleLabel() + " loading time - " +
+							componentRes.getTime());
+				}
+				data = (int) (componentRes.getTime()
+						 * d.height / model.getMax());
+				data += lastLevel;
+				currColor = ColorHelper.changeColorCyclicIncrement(currColor, 100);
+				g.setColor(currColor);
+				if (!previousPtsAlloc)
+				{
+					// if first dot, just draw the point
+					g.drawLine(x % width, d.height - data, x % width, d.height - data - 1);
+				} else
+				{
+					// otherwise, draw from previous point
+					g.drawLine((previousPts[currPreviousPts].x) % width,
+							previousPts[currPreviousPts].y, x % width, d.height - data);
+				}
+				// store the current plot
+				previousPts[currPreviousPts++] = new Point(x % width, d.height - data);
+				if (legendPanel != null && noLegendYet)
+				{
+					gbc.gridx = 0;
+					gbc.gridy = compCount++;
+					gbc.anchor = GridBagConstraints.WEST;
+					gbc.weightx = 1.0;
+					gbc.insets = new Insets(0, 10, 0, 0);
+					JLabel compTimeLabel = new JLabel(componentRes.getSampleLabel());
+					compTimeLabel.setForeground(currColor);
+					gridBag.setConstraints(compTimeLabel, gbc);
+					legendPanel.add(compTimeLabel);
+				}
+				lastLevel = data;
+			}
+		}
+		if (noLegendYet)
+		{
+			noLegendYet = false;
+			lPanel.repaint();
+			lPanel.revalidate();
+		}
+		// set the previousPtsAlloc to true here and not after
+		// allocation because the rest of the codes also depend
+		// on previousPtsAlloc to be false if first time plotting
+		// the graph i.e. there are no previous points
+		if (!previousPtsAlloc)
+		{
+			previousPtsAlloc = true;
+		}
+		catClass.debug("End : drawSample1");
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccumModel.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccumModel.java
new file mode 100644
index 0000000..50b223c
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccumModel.java
@@ -0,0 +1,279 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+import org.apache.jmeter.gui.*;
+import java.util.*;
+
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.protocol.http.sampler.HTTPSamplerFull;
+
+import org.apache.log4j.*;
+/**
+ *  The model that collects the average of the set of pages to be sampled
+ *
+ *@author     Khor Soon Hin
+ *@created    2001/08/11
+ *@version    1.0
+ */
+
+public class GraphAccumModel implements Clearable
+{
+	/**
+	 *  Description of the Field
+	 */
+	protected String name;
+	/**
+	 *  Description of the Field
+	 */
+	protected List samples;
+	/**
+	 *  Description of the Field
+	 */
+	protected List listeners;
+	/**
+	 *  Description of the Field
+	 */
+	protected long averageSum = 0;
+	/**
+	 *  Description of the Field
+	 */
+	protected long variationSum = 0;
+	/**
+	 *  Description of the Field
+	 */
+	protected long counter = 0;
+	/**
+	 *  Description of the Field
+	 */
+	protected long previous = 0;
+	/**
+	 *  Description of the Field
+	 */
+	protected long max = 1;
+	/**
+	 *  Description of the Field
+	 */
+	protected boolean bigChange = false;
+	/**
+	 *  Description of the Field
+	 */
+	protected SampleResult current;
+	private Category catClass =
+			Category.getInstance(GraphAccumModel.class.getName());
+
+
+	/**
+	 *  Constructor
+	 */
+	public GraphAccumModel()
+	{
+		catClass.debug("Start : GraphAccumModel1");
+		listeners = new LinkedList();
+		samples = Collections.synchronizedList(new LinkedList());
+		catClass.debug("End : GraphAccumModel1");
+	}
+
+
+	/**
+	 *  Sets the Name attribute of the GraphModel object
+	 *
+	 *@param  name  The new Name value
+	 */
+	public void setName(String name)
+	{
+		this.name = name;
+	}
+
+
+	/**
+	 *  Gets the SampleCount attribute of the GraphAccumModel object
+	 *
+	 *@return    The SampleCount value
+	 */
+	public int getSampleCount()
+	{
+		return samples.size();
+	}
+
+
+	/**
+	 *  Gets the List attribute of the GraphAccumModel object
+	 *
+	 *@return    The List value
+	 */
+	public List getList()
+	{
+		return samples;
+	}
+
+
+	/**
+	 *  Gets the Name attribute of the GraphModel object
+	 *
+	 *@return    The Name value
+	 */
+	public String getName()
+	{
+		return name;
+	}
+
+
+	/**
+	 *  Gets the Max attribute of the GraphAccumModel object
+	 *
+	 *@return    The Max value
+	 */
+	public long getMax()
+	{
+		catClass.debug("getMax1 : Returning - " + max);
+		return max;
+	}
+
+
+	/**
+	 *  Adds a feature to the ModelListener attribute of the GraphAccumModel object
+	 *
+	 *@param  listener       The feature to be added to the GraphAccumListener
+	 *      attribute
+	 */
+	public void addGraphAccumListener(GraphAccumListener listener)
+	{
+		listeners.add(listener);
+	}
+
+
+	/**
+	 *  Clear the results
+	 */
+	public void clear()
+	{
+		catClass.debug("Start : clear1");
+		samples.clear();
+		max = 1;
+		bigChange = true;
+		this.fireDataChanged();
+		catClass.debug("End : clear1");
+	}
+
+	/**
+	 *  Add the new sample to the results
+	 *
+	 *@param  res  sample containing the results
+	 */
+	public void addNewSample(SampleResult res)
+	{
+		catClass.debug("Start : addNewSample1");
+		// set time to time taken to load this url without components (e.g. images etc)
+		long totalTime = res.getTime();
+	
+		if (catClass.isDebugEnabled())
+		{
+			catClass.debug("addNewSample1 : time - " + totalTime);
+			catClass.debug("addNewSample1 : max - " + max);
+		}
+		if (totalTime > max)
+		{
+			bigChange = true;
+			max = totalTime;
+		}
+		current = res;
+		samples.add(res);
+		catClass.debug("End : addNewSample1");
+		fireDataChanged();
+	}
+
+
+	/**
+	 *  Depending on whether the graph needs to be rescale call the appropriate
+	 *  methods
+	 */
+	protected void fireDataChanged()
+	{
+		catClass.debug("Start : fireDataChanged1");
+		Iterator iter = listeners.iterator();
+		if (bigChange)
+		{
+			while (iter.hasNext())
+			{
+				((GraphAccumListener) iter.next()).updateGui();
+			}
+			bigChange = false;
+		} else
+		{
+			quickUpdate(current);
+		}
+		catClass.debug("End : fireDataChanged1");
+	}
+
+
+	/**
+	 *  The sample to be added did not exceed the current set of samples so do not
+	 *  need to rescale graph
+	 *
+	 *@param  s  Description of Parameter
+	 */
+	protected void quickUpdate(SampleResult s)
+	{
+		Iterator iter = listeners.iterator();
+		{
+			while (iter.hasNext())
+			{
+				((GraphAccumListener) iter.next()).updateGui(s);
+			}
+		}
+	}
+}
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccumVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccumVisualizer.java
new file mode 100644
index 0000000..638581e
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphAccumVisualizer.java
@@ -0,0 +1,250 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+import org.apache.log4j.*;
+/****************************************
+ * This class implements a statistical analyser that plots the accumulated time
+ * taken to load each set of pages. The number of plots is equivalent to the
+ * number of times the set of pages is configured to load.
+ *
+ *@author    Khor Soon Hin
+ *@created   2001/08/11
+ *@version   $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ ***************************************/
+public class GraphAccumVisualizer extends AbstractVisualizer
+		 implements ImageVisualizer, GraphAccumListener,Clearable
+{
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected GraphAccumModel model;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected GraphAccum graph;
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JPanel legendPanel;
+	private static Category catClass =
+			Category.getInstance(GraphAccumVisualizer.class.getName());
+
+
+	/****************************************
+	 * Constructor
+	 ***************************************/
+	public GraphAccumVisualizer()
+	{
+		super();
+		model = new GraphAccumModel();
+		model.addGraphAccumListener(this);
+		init();
+		catClass.debug("Start : GraphAccumVisualizer1");
+		catClass.debug("End : GraphAccumVisualizer1");
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("graph_full_results_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param res  !ToDo (Parameter description)
+	 ***************************************/
+	public void add(SampleResult res)
+	{
+		model.addNewSample(res);
+	}
+
+	/****************************************
+	 * Returns the panel where labels can be added
+	 *
+	 *@return    !ToDo (Return description)
+	 *@returns   a panel where labels can be added
+	 ***************************************/
+	public Object getWhiteCanvas()
+	{
+		return legendPanel;
+	}
+
+
+	/****************************************
+	 * Gets the Image attribute of the GraphVisualizer object
+	 *
+	 *@return   The Image value
+	 ***************************************/
+	public Image getImage()
+	{
+		catClass.debug("Start : getImage1");
+		Image result = graph.createImage(graph.getWidth(), graph.getHeight());
+		graph.paintComponent(result.getGraphics());
+		catClass.debug("End : getImage1");
+		return result;
+	}
+
+
+	/****************************************
+	 * Updates the gui to reflect changes
+	 ***************************************/
+	public void updateGui()
+	{
+		catClass.debug("Start : updateGui1");
+		graph.updateGui();
+		catClass.debug("End : updateGui1");
+	}
+
+
+	/****************************************
+	 * Updates gui to reflect small changes
+	 *
+	 *@param s  sample to be added to plot
+	 ***************************************/
+	public void updateGui(SampleResult s)
+	{
+		catClass.debug("Start : updateGui2");
+		catClass.debug("End : updateGui2");
+	}
+
+
+	/****************************************
+	 * Clear this visualizer data
+	 ***************************************/
+	public synchronized void clear()
+	{
+		model.clear();
+		graph.clear();
+		catClass.debug("Start : clear1");
+		repaint();
+		catClass.debug("End : clear1");
+	}
+
+
+	/****************************************
+	 * Returns a description of this instance
+	 *
+	 *@return   description of this instance
+	 ***************************************/
+	public String toString()
+	{
+		String toString = "Show the samples analysys as dot plots";
+		catClass.debug("toString1 : Returning - " + toString);
+		return toString;
+	}
+
+
+	/****************************************
+	 * Setup all the swing components
+	 ***************************************/
+	private void init()
+	{
+		catClass.debug("Start : init1");
+		graph = new GraphAccum(model);
+		graph.setVisualizer(this);
+
+		this.setLayout(new BorderLayout());
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("graph_full_results_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		mainPanel.add(this.getNamePanel());
+		mainPanel.add(getFilePanel());
+
+		JScrollPane graphScrollPanel = new
+				JScrollPane(graph, JScrollPane.VERTICAL_SCROLLBAR_NEVER,
+				JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
+		graphScrollPanel.setViewportBorder(
+				BorderFactory.createEmptyBorder(2, 2, 2, 2));
+		legendPanel = new JPanel();
+
+		JScrollPane legendScrollPanel = new JScrollPane(legendPanel);
+		JSplitPane graphSplitPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
+				graphScrollPanel, legendScrollPanel);
+
+		this.add(mainPanel, BorderLayout.NORTH);
+		this.add(graphSplitPane, BorderLayout.CENTER);
+		catClass.debug("End : init1");
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphModel.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphModel.java
new file mode 100644
index 0000000..4afec67
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphModel.java
@@ -0,0 +1,364 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+
+import org.apache.jmeter.gui.*;
+
+import java.util.*;
+
+
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    February 8, 2001
+ *@version    1.0
+ */
+
+
+public class GraphModel implements Clearable
+{
+
+	private String name;
+	private List samples;
+	private List listeners;
+	private long averageSum = 0;
+	private long variationSum = 0;
+	private long counter = 0;
+	private long previous = 0;
+	private long max = 1;
+	private boolean bigChange = false;
+	private Sample current = new Sample(0, 0, 0,0,false);
+	private long startTime = 0;
+	private int throughputMax = 20;
+	private long graphMax = 20;
+
+	/**
+	 *  Constructor for the GraphModel object
+	 */
+
+	public GraphModel()
+	{
+		listeners = new LinkedList();
+		samples = Collections.synchronizedList(new LinkedList());
+	}
+
+
+
+	/**
+	 *  Sets the Name attribute of the GraphModel object
+	 *
+	 *@param  name  The new Name value
+	 */
+
+	public void setName(String name)
+	{
+		this.name = name;
+	}
+
+	/**
+	 *  Gets the CurrentData attribute of the GraphModel object
+	 *
+	 *@return    The CurrentData value
+	 */
+	public long getCurrentData()
+	{
+
+		return current.data;
+	}
+
+
+
+	/**
+	 *  Gets the CurrentAverage attribute of the GraphModel object
+	 *
+	 *@return    The CurrentAverage value
+	 */
+	public long getCurrentAverage()
+	{
+
+		return current.average;
+	}
+
+
+
+	/**
+	 *  Gets the CurrentDeviation attribute of the GraphModel object
+	 *
+	 *@return    The CurrentDeviation value
+	 */
+	public long getCurrentDeviation()
+	{
+
+		return current.deviation;
+	}
+	
+	public float getCurrentThroughput()
+	{
+		return current.throughput;
+	}
+
+
+
+	/**
+	 *  Gets the SampleCount attribute of the GraphModel object
+	 *
+	 *@return    The SampleCount value
+	 */
+	public int getSampleCount()
+	{
+
+		return samples.size();
+	}
+
+
+
+	/**
+	 *  Gets the Samples attribute of the GraphModel object
+	 *
+	 *@return    The Samples value
+	 */
+	public List getSamples()
+	{
+
+		return samples;
+	}
+
+
+
+	/**
+	 *  Gets the GuiClass attribute of the GraphModel object
+	 *
+	 *@return    The GuiClass value
+	 */
+
+	public Class getGuiClass()
+	{
+
+		return GraphVisualizer.class;
+	}
+
+
+
+	/**
+	 *  Gets the Name attribute of the GraphModel object
+	 *
+	 *@return    The Name value
+	 */
+
+	public String getName()
+	{
+
+		return name;
+	}
+
+
+
+	/**
+	 *  Gets the Max attribute of the GraphModel object
+	 *
+	 *@return    The Max value
+	 */
+	public long getMaxSample()
+	{
+		return max;
+	}
+	
+	public long getGraphMax()
+	{
+		return graphMax;
+	}
+	
+	
+	public int getThroughputMax()
+	{
+		return throughputMax;
+	}
+
+
+
+	/**
+	 *  Adds a feature to the ModelListener attribute of the GraphModel object
+	 *
+	 *@param  modelListener  The feature to be added to the ModelListener attribute
+	 */
+	public void addGraphListener(GraphListener listener)
+	{
+		listeners.add(listener);
+	}
+
+
+	/**
+	 *  Adds a feature to the Sample attribute of the GraphModel object
+	 *
+	 *@param  e  The feature to be added to the Sample attribute
+	 *@return    Description of the Returned Value
+	 */
+	public Sample addSample(SampleResult e)
+	{
+		Sample s = addNewSample(e.getTime(),e.getTimeStamp(),e.isSuccessful());
+		fireDataChanged();
+		return s;
+	}
+
+
+	/**
+	 *  Description of the Method
+	 */
+	public void clear()
+	{
+		samples.clear();
+		averageSum = 0;
+		variationSum = 0;
+		counter = 0;
+		previous = 0;
+		max = 1;
+		graphMax = 1;
+		bigChange = true;
+		current = new Sample(0, 0,0,0,false);
+		this.fireDataChanged();
+	}
+
+
+
+	/**
+	 *  Description of the Method
+	 */
+	protected void fireDataChanged()
+	{
+		Iterator iter = listeners.iterator();
+		if (bigChange)
+		{
+			while (iter.hasNext())
+			{
+				((GraphListener) iter.next()).updateGui();
+			}
+			bigChange = false;
+		} else
+		{
+			quickUpdate(current);
+		}
+	}
+
+
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  s  Description of Parameter
+	 */
+	protected void quickUpdate(Sample s)
+	{
+		Iterator iter = listeners.iterator();
+		{
+			while (iter.hasNext())
+			{
+				((GraphListener) iter.next()).updateGui(s);
+			}
+		}
+	}
+
+	/**
+	 *  Adds a feature to the NewSample attribute of the GraphModel object
+	 *
+	 *@param  sample  The feature to be added to the NewSample attribute
+	 */
+	protected Sample addNewSample(long sample,long timeStamp,boolean success)
+	{
+		if(samples.size() == 0)
+		{
+			startTime = timeStamp;
+		}
+		if (sample > max)
+		{
+			max = sample;
+		}
+		averageSum += sample;
+		long average = averageSum / ++counter;
+		variationSum += Math.pow(sample - average, 2);
+		long deviation = (long) Math.pow(variationSum / counter, 0.5);
+		float throughput = 0;
+		if(timeStamp-startTime > 0)
+		{
+			throughput = (float)(((float)(samples.size()+1))/((float)(timeStamp-startTime)) * 60000);
+		}
+		if(throughput > throughputMax)
+		{
+			bigChange = true;
+			throughputMax = (int)(throughput * 1.5F);
+		}
+		if(average > graphMax)
+		{
+			bigChange = true;
+			graphMax = average * 3;
+		}
+		if(deviation > graphMax)
+		{
+			bigChange = true;
+			graphMax = deviation * 3;
+		}
+		Sample s = new Sample(sample, average, deviation,throughput,!success);
+		previous = sample;
+		current = s;
+		samples.add(s);
+		return s;
+	}
+}
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphVisualizer.java
new file mode 100644
index 0000000..29f38fd
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/GraphVisualizer.java
@@ -0,0 +1,411 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.BorderLayout;
+import java.awt.Color;
+import java.awt.FlowLayout;
+import java.awt.Font;
+import java.awt.GridLayout;
+import java.awt.Image;
+import java.awt.event.ItemEvent;
+import java.awt.event.ItemListener;
+
+import javax.swing.BorderFactory;
+import javax.swing.JCheckBox;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JScrollPane;
+import javax.swing.JTextField;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+
+import org.apache.jmeter.gui.util.JMeterColor;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+
+/****************************************
+ * This class implements a statistical analyser that calculates both the average
+ * and the standard deviation of the sampling process and outputs them as
+ * autoscaling plots.
+ *
+ *@author    <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ *@created   February 8, 2001
+ *@version   $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ ***************************************/
+public class GraphVisualizer extends AbstractVisualizer
+		 implements ImageVisualizer, ItemListener, GraphListener,Clearable
+{
+	GraphModel model;
+	private JTextField maxYField = null;
+	private JTextField minYField = null;
+	private JTextField noSamplesField = null;
+	String minute = JMeterUtils.getResString("minute");
+
+	private Graph graph;
+	private JCheckBox data;
+	private JCheckBox average;
+	private JCheckBox deviation;
+	private JCheckBox throughput;
+	private JTextField dataField;
+	private JTextField averageField;
+	private JTextField deviationField;
+	private JTextField throughputField;
+	private boolean perSecond = false;
+
+
+	/****************************************
+	 * Constructor for the GraphVisualizer object
+	 ***************************************/
+	public GraphVisualizer()
+	{
+		model = new GraphModel();
+		model.addGraphListener(this);
+		graph = new Graph(model);
+		init();
+	}
+
+
+	/****************************************
+	 * Gets the Image attribute of the GraphVisualizer object
+	 *
+	 *@return   The Image value
+	 ***************************************/
+	public Image getImage()
+	{
+		Image result = graph.createImage(graph.getWidth(), graph.getHeight());
+		graph.paintComponent(result.getGraphics());
+
+		return result;
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void updateGui()
+	{
+		graph.updateGui();
+		noSamplesField.setText(Long.toString(model.getSampleCount()));
+		dataField.setText(Long.toString(model.getCurrentData()));
+		averageField.setText(Long.toString(model.getCurrentAverage()));
+		deviationField.setText(Long.toString(model.getCurrentDeviation()));
+		throughputField.setText(Float.toString(model.getCurrentThroughput())+"/"+minute);
+		updateYAxis();
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param s  !ToDo (Parameter description)
+	 ***************************************/
+	public void updateGui(Sample s)
+	{
+		// We have received one more sample
+		noSamplesField.setText(Long.toString(model.getSampleCount()));
+		dataField.setText(Long.toString(s.data));
+		averageField.setText(Long.toString(s.average));
+		deviationField.setText(Long.toString(s.deviation));
+		throughputField.setText(Float.toString(s.throughput)+"/"+minute);
+		updateYAxis();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param res  !ToDo (Parameter description)
+	 ***************************************/
+	public void add(SampleResult res)
+	{
+		model.addSample(res);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("graph_results_title");
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void itemStateChanged(ItemEvent e)
+	{
+		if(e.getItem() == data)
+		{
+			this.graph.enableData(e.getStateChange() == ItemEvent.SELECTED);
+		}
+		else if(e.getItem() == average)
+		{
+			this.graph.enableAverage(e.getStateChange() == ItemEvent.SELECTED);
+		}
+		else if(e.getItem() == deviation)
+		{
+			this.graph.enableDeviation(e.getStateChange() == ItemEvent.SELECTED);
+		}
+		else if(e.getItem() == throughput)
+		{
+			this.graph.enableThroughput(e.getStateChange() == ItemEvent.SELECTED);
+		}
+		this.graph.repaint();
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 ***************************************/
+	public synchronized void clear()
+	{
+		//this.graph.clear();
+		model.clear();
+		dataField.setText("0000");
+		averageField.setText("0000");
+		deviationField.setText("0000");
+		throughputField.setText("0/"+minute);
+		updateYAxis();
+		repaint();
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@return   Description of the Returned Value
+	 ***************************************/
+	public String toString()
+	{
+		return "Show the samples analysis as dot plots";
+	}
+
+
+	/****************************************
+	 * Update the max and min value of the Y axis
+	 ***************************************/
+	private void updateYAxis()
+	{
+		maxYField.setText(Long.toString(model.getGraphMax()));
+		minYField.setText("0");
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 ***************************************/
+	private void init()
+	{
+		this.setLayout(new BorderLayout());
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("graph_results_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+		mainPanel.add(this.getFilePanel());
+
+		// Set up panel where user can choose which graphs to display
+		JPanel chooseGraphsPanel = new JPanel();
+		chooseGraphsPanel.setLayout(new FlowLayout());
+		JLabel selectGraphsLabel = new JLabel(JMeterUtils.getResString("graph_choose_graphs"));
+		data = new JCheckBox(JMeterUtils.getResString("graph_results_data"));
+		data.setSelected(true);
+		data.addItemListener(this);
+		data.setForeground(Color.black);
+		average = new JCheckBox(JMeterUtils.getResString("graph_results_average"));
+		average.setSelected(true);
+		average.addItemListener(this);
+		average.setForeground(Color.blue);
+		deviation = new JCheckBox(JMeterUtils.getResString("graph_results_deviation"));
+		deviation.setSelected(true);
+		deviation.addItemListener(this);
+		deviation.setForeground(Color.red);
+		throughput = new JCheckBox(JMeterUtils.getResString("graph_results_throughput"));
+		throughput.setSelected(true);
+		throughput.addItemListener(this);
+		throughput.setForeground(JMeterColor.dark_green);
+
+		chooseGraphsPanel.add(selectGraphsLabel);
+		chooseGraphsPanel.add(data);
+		chooseGraphsPanel.add(average);
+		chooseGraphsPanel.add(deviation);
+		chooseGraphsPanel.add(throughput);
+
+		// Set up the graph itself
+		JScrollPane graphScrollPanel = new JScrollPane(graph, JScrollPane.VERTICAL_SCROLLBAR_NEVER,
+				JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
+		graphScrollPanel.setViewportBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
+		//graphScrollPanel.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
+		//graphScrollPanel.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);
+
+
+		// Set up Y axis panel
+		JPanel graphYAxisPanel = new JPanel();
+		graphYAxisPanel.setLayout(new BorderLayout());
+		JPanel maxYPanel = new JPanel(new FlowLayout());
+		JLabel maxYLabel = new JLabel(JMeterUtils.getResString("graph_results_ms"));
+		maxYField = new JTextField(5);
+		maxYField.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 0));
+		maxYField.setEditable(false);
+		maxYField.setForeground(Color.black);
+		maxYField.setBackground(getBackground());
+		maxYField.setHorizontalAlignment(JTextField.RIGHT);
+		maxYPanel.add(maxYField);
+		maxYPanel.add(maxYLabel);
+		JPanel minYPanel = new JPanel(new FlowLayout());
+		JLabel minYLabel = new JLabel(JMeterUtils.getResString("graph_results_ms"));
+		minYField = new JTextField(3);
+		minYField.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 0));
+		minYField.setEditable(false);
+		minYField.setForeground(Color.black);
+		minYField.setBackground(getBackground());
+		minYField.setHorizontalAlignment(JTextField.RIGHT);
+		minYPanel.add(minYField);
+		minYPanel.add(minYLabel);
+		graphYAxisPanel.add(maxYPanel, BorderLayout.NORTH);
+		graphYAxisPanel.add(minYPanel, BorderLayout.SOUTH);
+
+		// Set up footer of graph which displays numerics of the graphs
+		JPanel dataPanel = new JPanel();
+		JLabel dataLabel = new JLabel(JMeterUtils.getResString("graph_results_latest_sample"));
+		dataLabel.setForeground(Color.black);
+		dataField = new JTextField(5);
+		dataField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		dataField.setEditable(false);
+		dataField.setForeground(Color.black);
+		dataField.setBackground(getBackground());
+		dataPanel.add(dataLabel);
+		dataPanel.add(dataField);
+		JPanel averagePanel = new JPanel();
+		JLabel averageLabel = new JLabel(JMeterUtils.getResString("graph_results_average"));
+		averageLabel.setForeground(Color.blue);
+		averageField = new JTextField(5);
+		averageField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		averageField.setEditable(false);
+		averageField.setForeground(Color.blue);
+		averageField.setBackground(getBackground());
+		averagePanel.add(averageLabel);
+		averagePanel.add(averageField);
+		JPanel deviationPanel = new JPanel();
+		JLabel deviationLabel = new JLabel(JMeterUtils.getResString("graph_results_deviation"));
+		deviationLabel.setForeground(Color.red);
+		deviationField = new JTextField(5);
+		deviationField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		deviationField.setEditable(false);
+		deviationField.setForeground(Color.red);
+		deviationField.setBackground(getBackground());
+		deviationPanel.add(deviationLabel);
+		deviationPanel.add(deviationField);
+		JPanel throughputPanel = new JPanel();
+		JLabel throughputLabel = new JLabel(JMeterUtils.getResString("graph_results_throughput"));
+		throughputLabel.setForeground(JMeterColor.dark_green);
+		throughputField = new JTextField(15);
+		throughputField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		throughputField.setEditable(false);
+		throughputField.setForeground(JMeterColor.dark_green);
+		throughputField.setBackground(getBackground());
+		throughputPanel.add(throughputLabel);
+		throughputPanel.add(throughputField);
+		JPanel noSamplesPanel = new JPanel();
+		JLabel noSamplesLabel = new JLabel(JMeterUtils.getResString("graph_results_no_samples"));
+		noSamplesField = new JTextField(6);
+		noSamplesField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		noSamplesField.setEditable(false);
+		noSamplesField.setForeground(Color.black);
+		noSamplesField.setBackground(getBackground());
+		noSamplesPanel.add(noSamplesLabel);
+		noSamplesPanel.add(noSamplesField);
+
+		JPanel graphInfoPanel = new JPanel();
+		graphInfoPanel.setLayout(new GridLayout(2,3));
+		graphInfoPanel.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+
+		graphInfoPanel.add(noSamplesPanel);
+		graphInfoPanel.add(dataPanel);
+		graphInfoPanel.add(averagePanel);
+		graphInfoPanel.add(deviationPanel);
+		graphInfoPanel.add(throughputPanel);
+
+		// Set up the graph with header, footer, Y axis and graph display
+		JPanel graphPanel = new JPanel();
+		graphPanel.setLayout(new BorderLayout());
+		graphPanel.add(graphYAxisPanel, BorderLayout.WEST);
+		graphPanel.add(chooseGraphsPanel, BorderLayout.NORTH);
+		graphPanel.add(graphScrollPanel, BorderLayout.CENTER);
+		graphPanel.add(graphInfoPanel, BorderLayout.SOUTH);
+
+		// Add the main panel and the graph
+		this.add(mainPanel, BorderLayout.NORTH);
+		this.add(graphPanel, BorderLayout.CENTER);
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/MailerVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/MailerVisualizer.java
new file mode 100644
index 0000000..d0e87ac
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/MailerVisualizer.java
@@ -0,0 +1,633 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.visualizers;
+
+import java.io.*;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.event.*;
+import java.util.*;
+import java.net.*;
+import javax.mail.*;
+import javax.mail.internet.*;
+//import javax.activation.* ;
+import java.util.Properties;
+import org.apache.jmeter.util.*;
+import org.apache.jmeter.gui.util.*;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+
+/*
+ * TODO :
+ * - Create a subpanel for other visualizers
+ * - connect to the properties.
+ * - Get the specific URL that is failing.
+ * - add a seperate interface to collect the thrown failure messages.
+ * -
+ * - suggestions ;-)
+ */
+
+/************************************************************
+ *  This class implements a visualizer that mails a message when an error
+ *  occurs.
+ *
+ *@author     <a href="mailto:stuart@personalmd.com">Stuart Schmukler</a> and <a href="mailto:wolfram.rittmeyer@web.de">Wolfram Rittmeyer</a>
+ *@created    $Date: 2002/08/11 19:24:41 $
+ *@version    $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ ***********************************************************/
+//public class MailerVisualizer extends JPanel implements Visualizer, ActionListener
+public class MailerVisualizer extends AbstractVisualizer 
+		implements ActionListener, FocusListener, Clearable {
+
+	private String addressie;
+	private String from;
+	private String smtpHost;
+	private String failsubject;
+	private String successsubject;
+	private long failureCount = 0;
+	private long successCount = 0;
+	private long failureLimit = 2;
+	private long successLimit = 2;
+	private boolean failureMsgSent = false;
+	private boolean siteDown = false;
+	private boolean successMsgSent = false;
+
+	private Properties appProperties;
+
+	private JButton testerButton;
+	private JTextField addressField;
+	private JTextField fromField;
+	private JTextField smtpHostField;
+	private JTextField failsubjectField;
+	private JTextField successsubjectField;
+	private JTextField failureField;
+	private JTextField failureLimitField;
+	private JTextField successLimitField;
+
+	private JPanel mainPanel;
+	private JLabel panelTitleLabel;
+
+
+	//-----------
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public MailerVisualizer() {
+		super();
+
+		// Properties connection.
+		this.appProperties = JMeterUtils.getJMeterProperties();
+
+		// retrieve successLimit from properties
+		try {
+			successLimit =	Long.parseLong(appProperties.getProperty("mailer.successlimit"));
+		}
+		catch (Exception ex) {
+			// Ignore any garbage
+		}
+
+		// retrieve failureLimit from properties
+		try {
+			failureLimit =	Long.parseLong(appProperties.getProperty("mailer.failurelimit"));
+		}
+		catch (Exception ex) {
+			// Ignore any garbage
+		}
+
+		// initialize GUI.
+		initGui();
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public synchronized boolean isFailing()
+	{
+		return (failureCount > failureLimit);
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public JPanel getControlPanel()
+	{
+		return this;
+	}
+
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  theAddressie  !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 ***********************************************************/
+	public synchronized Vector newAddressVector(String theAddressie)
+	{
+		Vector addressVector = new Vector();
+		if (theAddressie != null) {
+			String addressSep = ", ";
+	
+			StringTokenizer next = new StringTokenizer(theAddressie, addressSep);
+	
+			while (next.hasMoreTokens())
+			{
+				String theToken = next.nextToken();
+	
+				if (theToken.indexOf("@") > 0)
+				{
+					addressVector.addElement(theToken);
+				}
+			}
+		}
+		else {
+			return new Vector(0);
+		}
+
+		return addressVector;
+	}
+
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  sample  !ToDo (Parameter description)
+	 ***********************************************************/
+	public synchronized void add(SampleResult sample)
+	{
+
+		// -1 is the code for a failed sample.
+		//
+		if (!sample.isSuccessful())
+		{
+			failureCount++;
+		}
+		else
+		{
+			successCount++;
+		}
+
+		if (this.isFailing() && !siteDown && !failureMsgSent)
+		{
+			// Display ...
+			failureField.setText(Long.toString(failureCount));
+			repaint();
+
+			// Send the mail ...
+			Vector addressVector = newAddressVector(addressie);
+			if (addressVector.size() != 0) {
+				sendMail(from, addressVector, failsubject, "URL Failed: " +
+						sample.getSampleLabel(), smtpHost);
+				siteDown = true;
+				failureMsgSent = true;
+				successCount = 0;
+			}
+		}
+
+		if (siteDown && (sample.getTime() != -1) & !successMsgSent)
+		{
+			// Display ...
+			failureField.setText(Long.toString(failureCount));
+			repaint();
+
+			// Send the mail ...
+			if (successCount > successLimit)
+			{
+				Vector addressVector = newAddressVector(addressie);
+				sendMail(from, addressVector, successsubject, "URL Restarted: " +
+						sample.getSampleLabel(), smtpHost);
+				siteDown = false;
+				successMsgSent = true;
+			}
+		}
+
+		if (successMsgSent && failureMsgSent)
+		{
+			clear();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public synchronized void clear()
+	{
+		failureCount = 0;
+		successCount = 0;
+		siteDown = false;
+		successMsgSent = false;
+		failureMsgSent = false;
+
+		failureField.setText(Long.toString(failureCount));
+		repaint();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String toString()
+	{
+		return "E-Mail Notification";
+	}
+
+	//-----------
+	//function to send a mail to list mailaddresses
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  from      !ToDo (Parameter description)
+	 *@param  vEmails   !ToDo (Parameter description)
+	 *@param  subject   !ToDo (Parameter description)
+	 *@param  attText   !ToDo (Parameter description)
+	 *@param  SMTPHost  !ToDo (Parameter description)
+	 ***********************************************************/
+	public static synchronized void sendMail(String from,
+			Vector vEmails,
+			String subject,
+			String attText,
+			String SMTPHost)
+	{
+		try
+		{
+			String host = SMTPHost;
+			boolean debug = Boolean.valueOf(host).booleanValue();
+			InetAddress remote = InetAddress.getByName(host);
+
+			InternetAddress[] address = new InternetAddress[vEmails.size()];
+			for (int k = 0; k < vEmails.size(); k++)
+			{
+				address[k] = new InternetAddress(vEmails.elementAt(k).toString());
+			}
+
+			// create some properties and get the default Session
+			Properties props = new Properties();
+			props.put("mail.smtp.host", host);
+			Session session = Session.getDefaultInstance(props, null);
+			session.setDebug(debug);
+
+			// create a message
+			Message msg = new MimeMessage(session);
+			msg.setFrom(new InternetAddress(from));
+			msg.setRecipients(Message.RecipientType.TO, address);
+			msg.setSubject(subject);
+			msg.setText(attText);
+			Transport.send(msg);
+			System.out.println("Mail sent successfully!!");
+		}
+		catch (UnknownHostException e1)
+		{
+			System.out.println("NxError:Invalid Mail Server " + e1);
+			System.exit(1);
+		}
+		catch (Exception e)
+		{
+			e.printStackTrace();
+			System.exit(1);
+		}
+	}
+
+	/**
+	 * Initializes the GUI. Lays out components and adds them to the
+	 * container.
+	 */
+	private void initGui() {
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(getStaticLabel());
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// mailer panel
+		JPanel mailerPanel = new JPanel();
+		mailerPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), getAttributesTitle()));
+		GridBagLayout g = new GridBagLayout();
+		mailerPanel.setLayout(g);
+		GridBagConstraints c = new GridBagConstraints();
+
+		c.anchor = GridBagConstraints.NORTHWEST;
+		c.insets = new Insets(0, 0, 0, 0);
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("From:"));
+
+		from = appProperties.getProperty("mailer.from");
+		fromField = new JTextField(from, 25);
+		fromField.setEditable(true);
+		fromField.addActionListener(this);
+		fromField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(fromField, c);
+		mailerPanel.add(fromField);
+
+		c.anchor = GridBagConstraints.NORTHWEST;
+		c.insets = new Insets(0, 0, 0, 0);
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("Addressie(s):"));
+
+		addressie = appProperties.getProperty("mailer.addressies");
+		addressField = new JTextField(addressie, 25);
+		addressField.setEditable(true);
+		addressField.addActionListener(this);
+		addressField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(addressField, c);
+		mailerPanel.add(addressField);
+
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("SMTP Host:"));
+
+		smtpHost = appProperties.getProperty("mailer.smtphost");
+		smtpHostField = new JTextField(smtpHost, 25);
+		smtpHostField.setEditable(true);
+		smtpHostField.addActionListener(this);
+		smtpHostField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(smtpHostField, c);
+		mailerPanel.add(smtpHostField);
+
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("Failure Subject:"));
+
+		failsubject = appProperties.getProperty("mailer.failsubject");
+		failsubjectField = new JTextField(failsubject, 25);
+		failsubjectField.setEditable(true);
+		failsubjectField.addActionListener(this);
+		failsubjectField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(failsubjectField, c);
+		mailerPanel.add(failsubjectField);
+
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("Success Subject:"));
+
+		successsubject = appProperties.getProperty("mailer.successsubject");
+		successsubjectField = new JTextField(successsubject, 25);
+		successsubjectField.setEditable(true);
+		successsubjectField.addActionListener(this);
+		successsubjectField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(successsubjectField, c);
+		mailerPanel.add(successsubjectField);
+
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("Failure Limit:"));
+
+		failureLimitField = new JTextField(Long.toString(failureLimit), 6);
+		failureLimitField.setEditable(true);
+		failureLimitField.addActionListener(this);
+		failureLimitField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(failureLimitField, c);
+		mailerPanel.add(failureLimitField);
+
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("Success Limit:"));
+
+		successLimitField = new JTextField(Long.toString(successLimit), 6);
+		successLimitField.setEditable(true);
+		successLimitField.addActionListener(this);
+		successLimitField.addFocusListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(successLimitField, c);
+		mailerPanel.add(successLimitField);
+
+		testerButton = new JButton("Test Mail");
+		testerButton.addActionListener(this);
+		testerButton.setEnabled(true);
+		c.gridwidth = 1;
+		g.setConstraints(testerButton, c);
+		mailerPanel.add(testerButton);
+
+		c.gridwidth = 1;
+		mailerPanel.add(new JLabel("Failures:"));
+		failureField = new JTextField(6);
+		failureField.setEditable(false);
+		failureField.addActionListener(this);
+		c.gridwidth = GridBagConstraints.REMAINDER;
+		g.setConstraints(failureField, c);
+		mailerPanel.add(failureField);
+
+		mainPanel.add(mailerPanel, BorderLayout.CENTER);
+
+		this.add(mainPanel);
+	}
+
+	/**
+	 * Returns a String for the title of the component
+	 * as set up in the properties-file using the lookup-constant
+	 * "mailer_visualizer_title".
+	 *
+	 *@return  The title of the component.
+	 */
+	public String getStaticLabel()
+	{
+		// should be something like this:
+		//	return JMeterUtils.getResString("mailer_visualizer_title");
+		return "Mailer Visualizer";
+	}
+
+	/**
+	 * Returns a String for the title of the attributes-panel
+	 * as set up in the properties-file using the lookup-constant
+	 * "mailer_attributes_panel".
+	 *
+	 *@return  The title of the component.
+	 */
+	public String getAttributesTitle()
+	{
+		// should be something like this:
+		//	return JMeterUtils.getResString("mailer_attributes_panel")
+		return "Mailing attributes";
+	}
+	/**
+	* Method used to log a String.
+	*
+	* @param str String to be logged.
+	*/
+	private static void log(String str) {
+		// this is just a tewmporary solution
+		// will be replaced by a call to the logging-API
+		// of the commons-project.
+		System.out.println("MailerVisualizer - " + str);
+	}
+
+
+	/**
+	 * Does the actual EventHandling. Gets called by EventHandlers
+	 * for either ActionEvents or FocusEvents.
+	 *
+	 * @param source The object that caused the event.
+	 */
+	private void doEventHandling(Object source) {
+		if (source == addressField) {
+			this.addressie = this.addressField.getText();
+			log("AddressField=" + addressField.getText());
+		}
+		else if (source == fromField) {
+			this.from = this.fromField.getText();
+			log("FromField=" + fromField.getText());
+		}
+		else if (source == smtpHostField) {
+			this.smtpHost = this.smtpHostField.getText();
+			log("smtpHostField=" + smtpHostField.getText());
+		}
+		else if (source == failsubjectField) {
+			this.failsubject = this.failsubjectField.getText();
+			log("failsubjectField=" + failsubjectField.getText());
+		}
+		else if (source == successsubjectField) {
+			this.successsubject = this.successsubjectField.getText();
+			log("successsubjectField=" + successsubjectField.getText());
+		}
+		else if (source == failureLimitField) {
+			this.failureLimit = Long.parseLong(this.failureLimitField.getText());
+			log("failureLimitField=" + failureLimitField.getText());
+		}
+		else if (source == successLimitField) {
+			this.successLimit = Long.parseLong(this.successLimitField.getText());
+			log("successLimitField=" + successLimitField.getText());
+		}
+	}
+
+
+	//////////////////////////////////////////////////////////////
+	//
+	// Implementation of the ActionListener-Interface.
+	//
+	//////////////////////////////////////////////////////////////
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void actionPerformed(ActionEvent e) {
+		try {
+			JComponent c = (JComponent)e.getSource();
+			if (c == testerButton) {
+				log("### Test To:  " + this.addressie + ", " +
+						"Via:  " + this.smtpHost + ", " +
+						"Fail Subject:  " + this.failsubject + ", " +
+						"Success Subject:  " + this.successsubject);
+
+				String testMessage = ("### Test To:  " + this.addressie + ", " +
+						"Via:  " + this.smtpHost + ", " +
+						"Fail Subject:  " + this.failsubject + ", " +
+						"Success Subject:  " + this.successsubject);
+
+				Vector addressVector = newAddressVector(addressie);
+				sendMail(from, addressVector, "Testing addressies", testMessage, smtpHost);
+			}
+			else {
+				doEventHandling(c);
+			}
+		}
+		catch (Exception ex)	{
+			JOptionPane.showMessageDialog(this, ex, "Error", JOptionPane.ERROR_MESSAGE);
+		}
+	}
+
+	//////////////////////////////////////////////////////////////
+	//
+	// Implementation of the FocusListener-Interface.
+	//
+	//////////////////////////////////////////////////////////////
+
+	/**
+	 * Empty implementation of the FocusListener-method.
+	 */
+	public void focusGained(FocusEvent e) {
+	}
+
+	/**
+	 * Called every time a element looses its focus. Here used to determine
+	 * wether the text inside a JTextField has changed and wether
+	 * the field has changed.
+	 *
+	 * @param e The FocusEvent-object encapsulating all relevant informations
+	 * about the FocusEvent.
+	 */
+	public void focusLost(FocusEvent e) {
+		Object source = e.getSource();
+		doEventHandling(source);
+	}
+
+}
+
+// new ressource_strings:
+// mailer_visualizer_title - used as the title of this Visualizer
+// mailer_attributes_panel - used as the title of the JPanel (EtchedBorder - title) where the attributes are entered
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/RunningSample.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/RunningSample.java
new file mode 100644
index 0000000..a38cb98
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/RunningSample.java
@@ -0,0 +1,242 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+// java
+import java.text.DecimalFormat;
+import java.util.HashSet;
+import java.util.Set;
+
+import org.apache.jmeter.samplers.SampleResult;
+
+
+/**
+ * Title:        RunningSample.java
+ * Description:  Aggegate sample data container
+ *
+ * Class which is used to store aggregate sample data.
+ * Just instantiate a new instance of this class, and then call addSample() a few times,
+ * and pull the stats out with whatever methods you prefer.
+ *
+ * Copyright:    Copyright (c) 2001
+ * Company:      Apache Foundation
+ * @author James Boutcher
+ * @version 1.0
+ */
+public class RunningSample {
+	
+	private static DecimalFormat rateFormatter = new DecimalFormat("#.0");	
+   private static DecimalFormat errorFormatter = new DecimalFormat("#0.00%");
+
+    private long counter;
+    private long runningSum;
+    private long max, min;
+    private long errorCount;
+    private long firstTime;
+    private long lastTime;
+    private Set threadNames;
+
+    /**
+     * use this constructor.
+     */
+    public RunningSample() {
+        counter = 0L;
+        runningSum = 0L;
+        max = Long.MIN_VALUE;
+        min = Long.MAX_VALUE;
+        errorCount = 0L;
+        firstTime = 0L;
+        lastTime = 0L;
+        threadNames = new HashSet();
+    }
+
+    /**
+     * Returns a String that represents the idealized throughput for that
+     * sample.  Uses the following equation:<p>
+     * Rn = (TotalTime * NumberOfThreads) / averageTime
+     * <p>
+     * Where Rn = # requests per TotalTime period.
+     * <p>
+     * This number is then represented in requests/second or requests/minute or requests/hour.
+     * <p>
+     * Examples:
+     *      "34.2/sec"
+     *      "0.1/sec"
+     *      "43.0/hour"
+     *      "15.9/min"
+     * @return a String representation of the rate the samples are being taken at.
+     */
+    public String getRateString() {
+        long howLongRunning = lastTime - firstTime;
+
+        if (howLongRunning == 0) return ("N/A");
+        double samplesPerSecond = (double)((double)howLongRunning * threadNames.size()) / (double)getAverage();
+        double factor = (double)((double)1000 / (double)howLongRunning);
+        samplesPerSecond = samplesPerSecond * factor;
+//        System.out.println("Running for " + howLongRunning + " seconds - " + samplesPerSecond + " samples per second.");
+        String perString = "/sec";
+        if (samplesPerSecond < 1.0) {
+            samplesPerSecond *= 60;
+            perString = "/min";
+        }
+        if (samplesPerSecond < 1.0) {
+            samplesPerSecond *= 60;
+            perString = "/hour";
+        }
+        
+        String rval = rateFormatter.format(samplesPerSecond) + perString;
+        return (rval);
+    }
+
+
+    /**
+     * Records a sample.
+     * @arg aTimeInMillis Time in milliseconds that this sample took to process
+     * @arg aSuccessFlag Flag for if this sample was successful or not
+     */
+    public synchronized void addSample(SampleResult res) {
+    	threadNames.add(res.getThreadName());
+		long aTimeInMillis = res.getTime();
+		boolean aSuccessFlag = res.isSuccessful();
+		lastTime = res.getTimeStamp();
+
+        counter++;
+        if (firstTime == 0L) {
+            // this is our first sample, set the start time to current timestamp
+            firstTime = lastTime;
+        }
+        runningSum += aTimeInMillis;
+        if (aTimeInMillis > max) max = aTimeInMillis;
+        if (aTimeInMillis < min) min = aTimeInMillis;
+        if (!aSuccessFlag) errorCount++;
+    }
+
+    /**
+     * Returns the time in milliseconds of the quickest sample.
+     * @return the time in milliseconds of the quickest sample.
+     */
+    public long getMin() {
+        long rval = 0;
+        if (min != Long.MIN_VALUE) rval = min;
+        return (rval);
+    }
+
+    /**
+     * Returns the time in milliseconds of the slowest sample.
+     * @return the time in milliseconds of the slowest sample.
+     */
+    public long getMax() {
+        long rval = 0;
+        if (max != Long.MAX_VALUE) rval = max;
+        return (rval);
+    }
+
+    /**
+     * Returns the average time in milliseconds that samples ran in.
+     * @return the average time in milliseconds that samples ran in.
+     */
+    public long getAverage() {
+        if (counter == 0) return (0);
+        return (runningSum / counter);
+    }
+
+    /**
+     * Returns the number of samples that have been recorded by this instance of the RunningSample class.
+     * @return the number of samples that have been recorded by this instance of the RunningSample class.
+     */
+    public long getNumSamples() {
+        return (counter);
+    }
+
+    /**
+     * Returns the raw double value of the percentage of samples with errors that were recorded.
+     * (Between 0.0 and 1.0)
+     * If you want a nicer return format, see getErrorPercentageString()
+     *
+     * @return the raw double value of the percentage of samples with errors that were recorded.
+     */
+    public double getErrorPercentage() {
+        double rval = 0.0;
+        if (counter == 0) return (rval);
+        rval = (double) errorCount / (double) counter;
+        return (rval);
+    }
+
+
+    /**
+     * Returns a String which represents the percentage of sample errors that have occurred.
+     * "0.00%" through "100.00%"
+     * @return a String which represents the percentage of sample errors that have occurred.
+     */
+    public String getErrorPercentageString() {
+        double myErrorPercentage = this.getErrorPercentage();
+        return (errorFormatter.format(myErrorPercentage));
+    }
+
+    /**
+     * For debugging purposes, mainly.
+     */
+    public String toString() {
+        StringBuffer mySB = new StringBuffer();
+        mySB.append("Samples: " + this.getNumSamples() + "  ");
+        mySB.append("Avg: " + this.getAverage() + "  ");
+        mySB.append("Min: " + this.getMin() + "  ");
+        mySB.append("Max: " + this.getMax() + "  ");
+        mySB.append("Error Rate: " + this.getErrorPercentageString() + "  ");
+        mySB.append("Sample Rate: " + this.getRateString());
+        return (mySB.toString());
+    }
+
+} // class RunningSample
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Sample.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Sample.java
new file mode 100644
index 0000000..e1d3df5
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Sample.java
@@ -0,0 +1,101 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.visualizers;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+	public class Sample
+	{
+
+		/**
+		 *  Description of the Field
+		 */
+		public long data;
+		/**
+		 *  Description of the Field
+		 */
+		public long average;
+		/**
+		 *  Description of the Field
+		 */
+		public long deviation;
+		
+		public float throughput;
+		
+		public boolean error = false;
+
+		/**
+		 *  Constructor for the Sample object
+		 *
+		 *@param  data       Description of Parameter
+		 *@param  average    Description of Parameter
+		 *@param  deviation  Description of Parameter
+		 */
+		public Sample(long data, long average, long deviation,float throughput,boolean error)
+		{
+			this.data = data;
+			this.average = average;
+			this.deviation = deviation;
+			this.throughput = throughput;
+			this.error = error;
+		}
+	}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Spline3.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Spline3.java
new file mode 100644
index 0000000..4f07eeb
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/Spline3.java
@@ -0,0 +1,496 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.visualizers;
+
+import java.awt.*;
+import java.io.*;
+import java.lang.*;
+import javax.swing.*;
+//import Acme.JPM.Encoders.*;
+
+/*
+ * TODO :
+ *  - implement ImageProducer interface
+ *  - suggestions ;-)
+ */
+
+/**
+ *  This class implements the representation of an interpolated Spline curve.
+ *  <P>
+ *  The curve described by such an object interpolates an arbitrary number
+ *  of fixed points called <I>nodes</I>. The distance between two nodes
+ *  should currently be constant. This is about to change in a later version
+ *  but it can last a while as it's not really needed.
+ *  Nevertheless, if you need the feature, just
+ *  <a href="mailto:norguet@bigfoot.com?subject=Spline3eq">write me a note</a>
+ *  and I'll write it asap.
+ *  <P>
+ *  The interpolated Spline curve can't be described by an polynomial analytic
+ *  equation, the degree of which would be as high as the number of nodes,
+ *  which would cause extreme oscillations of the curve on the edges.
+ *  <P>
+ *  The solution is to split the curve accross a lot of little
+ *  <I>intervals</I> : an interval starts at one node
+ *  and ends at the next one. Then, the interpolation is done on each
+ *  interval, according to the following conditions :
+ *  <OL>
+ *   <LI>the interpolated curve is degree 3 : it's a cubic curve ;
+ *   <LI>the interpolated curve contains the two points delimiting
+ *    the interval. This condition obviously implies the curve is continuous ;
+ *   <LI>the interpolated curve has a smooth slope : the curvature has
+ *    to be the same on the left and the right sides of each node ;
+ *   <LI>the curvature of the global curve is 0 at both edges.
+ *  </OL>
+ *  Every part of the global curve is represented by a cubic (degree-3)
+ *  polynomial, the coefficients of which have to be computed in order
+ *  to meet the above conditions.
+ *  <P>
+ *  This leads to a n-unknow n-equation system to resolve.
+ *  One can resolve an equation system by several manners ;
+ *  this class uses the Jacobi iterative method, particularly well
+ *  adapted to this situation, as the diagonal of the system matrix
+ *  is strong compared to the other elements. This implies the algorithm
+ *  always converges ! This is not the case of the Gauss-Seidel algorithm,
+ *  which is quite faster (it uses intermediate results of each iteration
+ *  to speed up the convergence) but it doesn't converge in all the cases
+ *  or it converges to a wrong value. This is not acceptable and
+ *  that's why the Jacobi method is safer. Anyway, the gain of speed
+ *  is about a factor of 3 but, for a 100x100 system, it means 10 ms
+ *  instead of 30 ms, which is a pretty good reason not to explore the question
+ *  any further :)
+ *  <P>
+ *  Here is a little piece of code showing how to use this class :
+ *  <PRE>
+ *  // ...
+ *  float[] nodes = {3F, 2F, 4F, 1F, 2.5F, 5F, 3F};
+ *  Spline3 curve = new Spline3(nodes);
+ *  // ...
+ *  public void paint(Graphics g) {
+ *      int[] plot = curve.getPlots();
+ *      for (int i = 1; i < n; i++) {
+ *          g.drawLine(i - 1, plot[i - 1], i, plot[i]);
+ *      }
+ *  }
+ *  // ...
+ *  </PRE>
+ *  Have fun with it !<BR>
+ *  Any comments, feedback, bug reports or suggestions will be
+ *  <a href="mailto:norguet@bigfoot.com?subject=Spline3">appreciated</a>.
+ *
+ *  @author <a href="norguet@bigfoot.com">Jean-Pierre Norguet</a>
+ *  @version 1.0 - 199903202000
+ */
+public class Spline3 {
+
+	 private final boolean DEBUG = false;
+	 protected float[][] _coefficients;
+	 protected float[][] _A;
+	 protected float[] _B;
+	 protected float[] _r;
+	 protected float[] _rS;
+	 protected int _m;  // number of nodes
+	 protected int _n;  // number of non extreme nodes (_m-2)
+	 final static protected float DEFAULT_PRECISION = (float)1E-1;
+	 final static protected int DEFAULT_MAX_ITERATIONS = 100;
+	 protected float _minPrecision = DEFAULT_PRECISION;
+	 protected int _maxIterations = DEFAULT_MAX_ITERATIONS;
+
+	 /**
+	  *  Creates a new Spline curve by calculating the coefficients of
+	  *  each part of the curve, i.e. by resolving the equation system
+	  *  implied by the interpolation condition on every interval.
+	  *  @param r an array of float containing the vertical coordinates
+	  *   of the nodes to interpolate ; the vertical coordinates start at 0
+	  *   and are equidistant with a step of 1.
+	  */
+	 public Spline3(float[] r) {
+		  int n = r.length;
+		  // the number of nodes is defined by the length of r
+		  this._m = n;
+		  // grab the nodes
+		  this._r = new float[n];
+		  for (int i = 0; i < n; i++) {
+				_r[i] = r[i];
+		  }
+		  // the number of non extreme nodes is the number of intervals
+		  // minus 1, i.e. the length of r minus 2
+		  this._n = n - 2;
+		  // computes interpolation coefficients
+		  try {
+				long startTime = System.currentTimeMillis();
+				this.interpolation();
+				if (DEBUG) {
+					 long endTime = System.currentTimeMillis();
+					 long elapsedTime = endTime - startTime;
+					 System.out.print("New Spline curve interpolated in ");
+					 System.out.println(elapsedTime + " ms");
+				}
+		  }
+		  catch (Exception e) {
+				System.err.print("Error when interpolating : ");
+				System.err.println(e);
+				e.printStackTrace();
+		  }
+
+	 }
+
+	 /**
+	  *  Computes the coefficients of the Spline interpolated curve,
+	  *  on each interval. The matrix system to resolve is <CODE>AX=B</CODE>
+	  */
+	 protected void interpolation() {
+		  // creation of the interpolation structure
+		  _rS = new float[_m];
+		  _B = new float[_n];
+		  _A = new float[_n][_n];
+		  _coefficients = new float [_n+1][4];
+		  // local variables
+		  int i = 0, j = 0;
+		  // initialize system structures (just to be safe)
+		  for (i = 0; i < _n; i++) {
+				_B[i] = 0;
+				for (j = 0; j < _n; j++) {
+					 _A[i][j] = 0;
+				}
+				for (j = 0; j < 4; j++) _coefficients[i][j] = 0;
+		  }
+		  for (i = 0; i < _n; i++) {
+				_rS[i] = 0;
+		  }
+		  // initialize the diagonal of the system matrix (A) to 4
+		  for (i = 0; i < _n; i++) {
+				_A[i][i] = 4;
+		  }
+		  // initialize the two minor diagonals of A to 1
+		  for (i = 1; i < _n; i++) {
+				_A[i][i-1] = 1;
+				_A[i-1][i] = 1;
+		  }
+		  // initialize B
+		  for (i = 0; i < _n; i++) {
+				_B[i] = 6 * (_r[i+2] - 2*_r[i+1] + _r[i]);
+		  }
+		  // Jacobi system resolving
+		  this.jacobi();  // results are stored in _rS
+		  // computes the coefficients (di, ci, bi, ai) from the results
+		  for (i = 0; i < _n+1; i++) {
+				// di (degree 0)
+				_coefficients[i][0] = _r[i];
+				// ci (degree 1)
+				_coefficients[i][1] = _r[i+1] - _r[i] - (_rS[i+1] + 2*_rS[i]) / 6;
+				// bi (degree 2)
+				_coefficients[i][2] = _rS[i] / 2;
+				// ai (degree 3)
+				_coefficients[i][3] = (_rS[i+1] - _rS[i]) / 6;
+		  }
+	 }
+
+	 /**
+	  *  Resolves the equation system by a Jacobi algorithm.
+	  *  The use of the slower Jacobi algorithm instead of Gauss-Seidel is
+	  *  choosen here because Jacobi is assured of to be convergent
+	  *  for this particular equation system, as the system matrix
+	  *  has a strong diagonal.
+	  */
+	 protected void jacobi() {
+		  // local variables
+		  int i = 0, j = 0, iterations = 0;
+		  // intermediate arrays
+		  float[] newX = new float[_n];
+		  float[] oldX = new float[_n];
+		  // Jacobi convergence test
+		  if (!converge()) {
+				if (DEBUG) {
+					 System.err.println("Warning : "
+											  + "equation system resolving is unstable");
+				}
+		  }
+		  // init newX and oldX arrays to 0
+		  for (i = 0; i < _n; i++) {
+				newX[i] = 0;
+				oldX[i] = 0;
+		  }
+		  // main iteration
+		  while ((this.precision(oldX, newX) > this._minPrecision)
+					&& (iterations < this._maxIterations)) {
+				for (i = 0; i<_n; i++) {
+					 oldX[i] = newX[i];
+				}
+				for (i = 0; i<_n; i++) {
+					 newX[i] = _B[i];
+					 for (j = 0; j < i; j++) {
+						  newX[i] = newX[i] - (_A[i][j] * oldX[j]);
+					 }
+					 for (j = i+1; j < _n; j++) {
+						  newX[i] = newX[i] - (_A[i][j] * oldX[j]);
+					 }
+					 newX[i] = newX[i] / _A[i][i];
+				}
+				iterations++;
+		  }
+		  if (this.precision(oldX, newX) < this._minPrecision) {
+				if (DEBUG) {
+					 System.out.print("Minimal precision (");
+					 System.out.print(this._minPrecision + ") reached after ");
+					 System.out.println(iterations + " iterations");
+				}
+		  }
+		  else if (iterations > this._maxIterations) {
+				if (DEBUG) {
+					 System.out.print("Maximal number of iterations (");
+					 System.out.println(this._maxIterations + ") reached");
+					 System.out.print("Warning : precision is only ");
+					 System.out.print(this.precision(oldX, newX));
+					 System.out.println(", divergence is possible");
+				}
+		  }
+		  for (i = 0; i < _n; i++) {
+				_rS[i+1] = newX[i];
+		  }
+	 }
+
+	 /**
+	  *  Test if the Jacobi resolution of the equation system converges.
+	  *  It's OK if A has a strong diagonal.
+	  */
+	 protected boolean converge() {
+		  boolean converge = true;
+		  int i = 0, j = 0;
+		  float lineSum = 0F;
+		  for (i = 0; i < _n; i++) {
+				if (converge == true) {
+					 lineSum = 0;
+					 for (j = 0; j < _n; j++) {
+						  lineSum = lineSum + Math.abs(_A[i][j]);
+					 }
+					 lineSum = lineSum - Math.abs(_A[i][i]);
+					 if (lineSum > Math.abs(_A[i][i])) {
+						  converge = false;
+					 }
+				}
+		  }
+		  return converge;
+	 }
+
+	 /**
+	  *  Computes the current precision reached.
+	  */
+	 protected float precision(float[] oldX, float[] newX) {
+		  float N = 0F, D = 0F, erreur = 0F;
+		  int i = 0;
+		  for (i = 0; i < _n; i++) {
+				N = N + Math.abs(newX[i] - oldX[i]);
+				D = D + Math.abs(newX[i]);
+		  }
+		  if (D != 0F) {
+				erreur = N / D;
+		  }
+		  else {
+				erreur = Float.MAX_VALUE;
+		  }
+		  return erreur;
+	 }
+
+	 /**
+	  *  Computes a (vertical) Y-axis value of the global curve.
+	  *  @param t abscissa
+	  *  @return computed ordinate
+	  */
+	 public float value(float t) {
+		  int i = 0, splineNumber = 0;
+		  float abscissa = 0F, result = 0F;
+		  // verify t belongs to the curve (range [0, _m-1])
+		  if ((t < 0) || (t > (_m - 1))) {
+				if (DEBUG) {
+					 System.err.println("Warning : abscissa " + t
+											  + " out of bounds [0, " + (_m - 1) + "]");
+				}
+				// silent error, consider the curve is constant outside its range
+				if (t < 0) {
+					 t = 0;
+				}
+				else {
+					 t = _m - 1;
+				}
+		  }
+		  // seek the good interval for t and get the piece of curve on it
+		  splineNumber = (int)Math.floor(t);
+		  if (t == (_m - 1)) {
+				// the upper limit of the curve range belongs by definition
+				// to the last interval
+				splineNumber--;
+		  }
+		  // computes the value of the curve at the pecified abscissa
+		  // and relative to the beginning of the right piece of Spline curve
+		  abscissa = t - splineNumber;
+		  // the polynomial calculation is done by the (fast) Euler method
+		  for (i = 0; i < 4; i++) {
+				result = result * abscissa;
+				result = result + _coefficients[splineNumber][3-i];
+		  }
+		  return result;
+	 }
+
+	 /**
+	  *  Manual check of the curve at the interpolated points.
+	  */
+	 public void debugCheck() {
+		  int i = 0;
+		  for (i = 0; i < _m; i++) {
+				System.out.print("Point " + i + " : ");
+				System.out.println(_r[i] + " =? " + value(i));
+		  }
+	 }
+
+	 /**
+	  *  Computes drawable plots from the curve for a given draw space.
+	  *  The values returned are drawable vertically and from the
+	  *  <B>bottom</B> of a Panel.
+	  *  @param width width within the plots have to be computed
+	  *  @param height height within the plots are expected to be drawed
+	  *  @return drawable plots within the limits defined, in an array of
+	  *   int (as many int as the value of the <CODE>width</CODE> parameter)
+	  */
+	 public int[] getPlots(int width, int height) {
+		  int[] plot = new int[width];
+		  // computes auto-scaling and absolute plots
+		  float[] y = new float[width];
+		  float max = java.lang.Integer.MIN_VALUE;
+		  float min = java.lang.Integer.MAX_VALUE;
+		  for (int i = 0; i < width; i++) {
+				y[i] = value(((float)i) * (_m-1) / width);
+				if (y[i] < min) min = y[i];
+				if (y[i] > max) max = y[i];
+		  }
+		  if (min < 0) {
+				min = 0; // shouldn't draw negative values
+		  }
+		  // computes relative auto-scaled plots to fit in the specified area
+		  for (int i = 0; i < width; i++) {
+				plot[i] = (int)Math.round(((y[i] - min) * (height - 1)) / (max - min));
+		  }
+		  return plot;
+	 }
+
+	 public void setPrecision(float precision) {
+		  this._minPrecision = precision;
+	 }
+
+	 public float getPrecision() {
+		  return this._minPrecision;
+	 }
+
+	 public void setToDefaultPrecision() {
+		  this._minPrecision = DEFAULT_PRECISION;
+	 }
+
+	 public float getDefaultPrecision() {
+		  return DEFAULT_PRECISION;
+	 }
+
+	 public void setMaxIterations(int iterations) {
+		  this._maxIterations = iterations;
+	 }
+
+	 public int getMaxIterations() {
+		  return this._maxIterations;
+	 }
+
+	 public void setToDefaultMaxIterations() {
+		  this._maxIterations = DEFAULT_MAX_ITERATIONS;
+	 }
+
+	 public int getDefaultMaxIterations() {
+		  return DEFAULT_MAX_ITERATIONS;
+	 }
+
+	 public static void main(String[] args) {
+		  /* test
+			  OutputStream output = null;
+			  float[] echantillons = {1, 3, 4, 0, 2};
+			  Spline3 essai = new Spline3 (echantillons);
+			  essai.check();
+
+			  try {
+			  output = new FileOutputStream("/tmp/essai.gif");
+			  ImageEncoder encoder = new GifEncoder(essai.draw(300, 200), output);
+			  encoder.encode();
+			  output.close();
+			  }
+			  catch (IOException e) {
+			  System.err.println(e);
+			  e.printStackTrace();
+			  }
+			  //System.exit(0);
+		  */
+	 }
+
+}
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/SplineModel.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/SplineModel.java
new file mode 100644
index 0000000..a33d115
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/SplineModel.java
@@ -0,0 +1,396 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+
+import java.util.*;
+
+
+import org.apache.jmeter.samplers.*;
+
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:41 $
+ *@version    1.0
+ ***********************************************************/
+
+
+public class SplineModel implements Clearable
+{
+
+	public final int DEFAULT_NUMBER_OF_NODES = 10;
+
+	public final int DEFAULT_REFRESH_PERIOD = 1;
+
+	protected final boolean SHOW_INCOMING_SAMPLES = true;
+
+	protected int numberOfNodes = DEFAULT_NUMBER_OF_NODES;
+
+	protected int refreshPeriod = DEFAULT_REFRESH_PERIOD;
+
+
+	protected Spline3 dataCurve = null;
+	// current Spline curve
+
+
+	protected long sum = 0;
+	// sum of the samples
+
+
+	protected long average = 0;
+	// average of the samples
+
+
+	protected long n = 0;
+
+	ArrayList samples;
+	// number of collected samples
+
+
+	private GraphListener listener;
+
+
+	private long minimum = Integer.MAX_VALUE, maximum = Integer.MIN_VALUE, incoming;
+
+	private String name;
+
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public SplineModel()
+	{
+
+		samples = new ArrayList();
+
+	}
+
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  vis  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setListener(GraphListener vis)
+	{
+
+		listener = vis;
+
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  newName  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setName(String newName)
+	{
+		name = newName;
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public boolean isEditable()
+	{
+
+		return true;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Spline3 getDataCurve()
+	{
+
+		return dataCurve;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Class getGuiClass()
+	{
+
+		return org.apache.jmeter.visualizers.SplineVisualizer.class;
+	}
+
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Collection getAddList()
+	{
+
+		return null;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getClassLabel()
+	{
+
+		return JMeterUtils.getResString("spline_visualizer_title");
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long getMinimum()
+	{
+
+		return minimum;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long getMaximum()
+	{
+
+		return maximum;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long getAverage()
+	{
+
+		return average;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long getCurrent()
+	{
+
+		return incoming;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long[] getSamples()
+	{
+		int n = samples.size();
+		long[] longSample = new long[n];
+		for (int i = 0; i < n; i++)
+		{
+			longSample[i] = ((Long)samples.get(i)).longValue();
+		}
+		return longSample;
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@param  i  !ToDo (Parameter description)
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public long getSample(int i)
+	{
+		Long sample = (Long)this.samples.get(i);
+		return sample.longValue();
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public int getNumberOfCollectedSamples()
+	{
+		return this.samples.size();
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getName()
+	{
+		return name;
+	}
+
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void uncompile()
+	{
+		clear();
+	}
+
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public synchronized void clear()
+	{
+
+		//this.graph.clear();
+
+		samples.clear();
+
+		this.n = 0;
+
+		this.sum = 0;
+
+		this.average = 0;
+
+		minimum = Integer.MAX_VALUE;
+
+		maximum = Integer.MIN_VALUE;
+
+		this.dataCurve = null;
+
+		if(listener != null)
+		{
+			listener.updateGui();
+		}
+
+	}
+
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  sampleResult  !ToDo (Parameter description)
+	 ***********************************************************/
+	public synchronized void add(SampleResult sampleResult)
+	{
+		long sample = sampleResult.getTime();
+		this.n++;
+		this.sum += sample;
+		this.average = this.sum / this.n;
+		if (SHOW_INCOMING_SAMPLES)
+		{
+			incoming = sample;
+		}
+		if (sample > maximum)
+		{
+			maximum = sample;
+		}
+		if (sample < minimum)
+		{
+			minimum = sample;
+		}
+		samples.add(new Long(sample));
+		int n = getNumberOfCollectedSamples();
+		if ((n % (numberOfNodes * refreshPeriod)) == 0)
+		{
+			float[] floatNode = new float[numberOfNodes];
+			long[] longSample = getSamples();
+			// load each node
+			int loadFactor = n / numberOfNodes;
+			for (int i = 0; i < numberOfNodes; i++)
+			{
+				for (int j = 0; j < loadFactor; j++)
+				{
+					floatNode[i] += getSample((i * loadFactor) + j);
+				}
+				floatNode[i] = floatNode[i] / loadFactor;
+			}
+			// compute the new Spline curve
+			dataCurve = new Spline3(floatNode);
+			if (listener != null)
+			{
+				listener.updateGui();
+			}
+		}
+		else
+		{
+			// do nothing, wait for the next pile to complete
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/SplineVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/SplineVisualizer.java
new file mode 100644
index 0000000..e7b6a2e
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/SplineVisualizer.java
@@ -0,0 +1,456 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.*;
+import java.util.Vector;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+import org.apache.jmeter.samplers.Clearable;
+
+/****************************************
+ * This class implements a statistical analyser that takes samples to process a
+ * Spline interpolated curve. Currently, it tries to look mostly like the
+ * GraphVisualizer.
+ *
+ *@author    <a href="mailto:norguet@bigfoot.com">Jean-Pierre Norguet</a>
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   0.9.1
+ ***************************************/
+public class SplineVisualizer extends AbstractVisualizer implements ImageVisualizer,
+		GraphListener,Clearable
+{
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final Color BACKGROUND_COLOR = getBackground();
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final Color MINIMUM_COLOR = new Color(0F, 0.5F, 0F);
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final Color MAXIMUM_COLOR = new Color(0.9F, 0F, 0F);
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final Color AVERAGE_COLOR = new Color(0F, 0F, 0.75F);
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final Color INCOMING_COLOR = Color.black;
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final int NUMBERS_TO_DISPLAY = 4;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final boolean FILL_UP_WITH_ZEROS = false;
+
+	private SplineGraph graph = null;
+
+	private JLabel minimumLabel = null;
+	private JLabel maximumLabel = null;
+	private JLabel averageLabel = null;
+	private JLabel incomingLabel = null;
+
+	private JLabel minimumNumberLabel = null;
+	private JLabel maximumNumberLabel = null;
+	private JLabel averageNumberLabel = null;
+	private JLabel incomingNumberLabel = null;
+	private SplineModel model;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public SplineVisualizer()
+	{
+		super();
+		model = new SplineModel();
+		graph = new SplineGraph();
+		this.model.setListener(this);
+		setGUI();
+	}
+
+	public void add(SampleResult res)
+	{
+		model.add(res);
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("spline_visualizer_title");
+	}
+
+	public void updateGui(Sample s)
+	{
+		updateGui();
+	}
+	
+	public void clear()
+	{
+		model.clear();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void setGUI()
+	{
+		Color backColor = BACKGROUND_COLOR;
+		this.setBackground(backColor);
+
+		this.setLayout(new BorderLayout());
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("spline_visualizer_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+		mainPanel.add(getFilePanel());
+		maximumLabel = new JLabel(JMeterUtils.getResString("spline_visualizer_maximum"));
+		maximumLabel.setForeground(MAXIMUM_COLOR);
+		maximumLabel.setBackground(backColor);
+		averageLabel = new JLabel(JMeterUtils.getResString("spline_visualizer_average"));
+		averageLabel.setForeground(AVERAGE_COLOR);
+		averageLabel.setBackground(backColor);
+		incomingLabel = new JLabel(JMeterUtils.getResString("spline_visualizer_incoming"));
+		incomingLabel.setForeground(INCOMING_COLOR);
+		incomingLabel.setBackground(backColor);
+		minimumLabel = new JLabel(JMeterUtils.getResString("spline_visualizer_minimum"));
+		minimumLabel.setForeground(MINIMUM_COLOR);
+		minimumLabel.setBackground(backColor);
+
+		maximumNumberLabel = new JLabel("0 ms");
+		maximumNumberLabel.setHorizontalAlignment(JLabel.RIGHT);
+		maximumNumberLabel.setForeground(MAXIMUM_COLOR);
+		maximumNumberLabel.setBackground(backColor);
+		averageNumberLabel = new JLabel("0 ms");
+		averageNumberLabel.setHorizontalAlignment(JLabel.RIGHT);
+		averageNumberLabel.setForeground(AVERAGE_COLOR);
+		averageNumberLabel.setBackground(backColor);
+		incomingNumberLabel = new JLabel("0 ms");
+		incomingNumberLabel.setHorizontalAlignment(JLabel.RIGHT);
+		incomingNumberLabel.setForeground(INCOMING_COLOR);
+		incomingNumberLabel.setBackground(backColor);
+		minimumNumberLabel = new JLabel("0 ms");
+		minimumNumberLabel.setHorizontalAlignment(JLabel.RIGHT);
+		minimumNumberLabel.setForeground(MINIMUM_COLOR);
+		minimumNumberLabel.setBackground(backColor);
+
+		// description Panel
+		JPanel labelPanel = new JPanel();
+		labelPanel.setLayout(new GridLayout(0, 1));
+		labelPanel.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 20));
+		labelPanel.setBackground(backColor);
+		labelPanel.add(maximumLabel);
+		labelPanel.add(averageLabel);
+		if(model.SHOW_INCOMING_SAMPLES)
+		{
+			labelPanel.add(incomingLabel);
+		}
+		labelPanel.add(minimumLabel);
+		// number Panel
+		JPanel numberPanel = new JPanel();
+		numberPanel.setLayout(new GridLayout(0, 1));
+		numberPanel.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 20));
+		numberPanel.setBackground(backColor);
+		numberPanel.add(maximumNumberLabel);
+		numberPanel.add(averageNumberLabel);
+		if(model.SHOW_INCOMING_SAMPLES)
+		{
+			numberPanel.add(incomingNumberLabel);
+		}
+		numberPanel.add(minimumNumberLabel);
+		// information display Panel
+		JPanel infoPanel = new JPanel();
+		infoPanel.setLayout(new BorderLayout());
+		infoPanel.add(labelPanel, BorderLayout.CENTER);
+		infoPanel.add(numberPanel, BorderLayout.EAST);
+
+		this.add(mainPanel, BorderLayout.NORTH);
+		this.add(infoPanel, BorderLayout.WEST);
+		this.add(graph, BorderLayout.CENTER);
+		// everyone is free to swing on its side :)
+		//add(infoPanel, BorderLayout.EAST);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void updateGui()
+	{
+		repaint();
+		setMinimum(model.getMinimum());
+		setMaximum(model.getMaximum());
+		setAverage(model.getAverage());
+		setIncoming(model.getCurrent());
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String toString()
+	{
+		return "Show the samples analysis as a Spline curve";
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param measure  !ToDo (Parameter description)
+	 *@return         !ToDo (Return description)
+	 ***************************************/
+	public String formatMeasureToDisplay(long measure)
+	{
+		String numberString = String.valueOf(measure);
+		if(FILL_UP_WITH_ZEROS)
+		{
+			for(int i = numberString.length(); i < NUMBERS_TO_DISPLAY; i++)
+			{
+				numberString = "0" + numberString;
+			}
+		}
+		return numberString;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param n  !ToDo (Parameter description)
+	 ***************************************/
+	public void setMinimum(long n)
+	{
+		String text = this.formatMeasureToDisplay(n) + " ms";
+		this.minimumNumberLabel.setText(text);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param n  !ToDo (Parameter description)
+	 ***************************************/
+	public void setMaximum(long n)
+	{
+		String text = this.formatMeasureToDisplay(n) + " ms";
+		this.maximumNumberLabel.setText(text);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param n  !ToDo (Parameter description)
+	 ***************************************/
+	public void setAverage(long n)
+	{
+		String text = this.formatMeasureToDisplay(n) + " ms";
+		this.averageNumberLabel.setText(text);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param n  !ToDo (Parameter description)
+	 ***************************************/
+	public void setIncoming(long n)
+	{
+		String text = this.formatMeasureToDisplay(n) + " ms";
+		this.incomingNumberLabel.setText(text);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPanel getControlPanel()
+	{
+		return this;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Image getImage()
+	{
+		Image result = graph.createImage(graph.getWidth(), graph.getHeight());
+		graph.paintComponent(result.getGraphics());
+
+		return result;
+	}
+
+
+	/****************************************
+	 * Component showing a Spline curve.
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:41 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	public class SplineGraph extends JComponent
+	{
+		/****************************************
+		 * !ToDo (Field description)
+		 ***************************************/
+		public boolean reinterpolated = false;
+
+		/****************************************
+		 * !ToDo (Field description)
+		 ***************************************/
+		protected final Color WAITING_COLOR = Color.darkGray;
+
+		/****************************************
+		 * !ToDo (Field description)
+		 ***************************************/
+		protected int lastWidth = -1;
+		/****************************************
+		 * !ToDo (Field description)
+		 ***************************************/
+		protected int lastHeight = -1;
+		/****************************************
+		 * !ToDo (Field description)
+		 ***************************************/
+		protected int[] plot = null;
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 ***************************************/
+		public SplineGraph() { }
+
+		/****************************************
+		 * Clear the Spline graph and get ready for the next wave.
+		 ***************************************/
+		public void clear()
+		{
+			lastWidth = -1;
+			lastHeight = -1;
+			plot = null;
+			this.repaint();
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param g  !ToDo (Parameter description)
+		 ***************************************/
+		public void paintComponent(Graphics g)
+		{
+			super.paintComponent(g);
+
+			Dimension dimension = this.getSize();
+			int width = dimension.width;
+			int height = dimension.height;
+
+			if(model.getDataCurve() == null)
+			{
+				g.setColor(this.getBackground());
+				g.fillRect(0, 0, width, height);
+				g.setColor(WAITING_COLOR);
+				g.drawString(JMeterUtils.getResString("spline_visualizer_waitingmessage"),
+						(width - 120) / 2, height - (height - 12) / 2);
+				return;
+			}
+
+			boolean resized = true;
+			if(width == lastWidth && height == lastHeight)
+			{
+				// dimension of the SplineGraph is the same
+				resized = false;
+			}
+			else
+			{
+				// dimension changed
+				resized = true;
+				lastWidth = width;
+				lastHeight = height;
+			}
+
+			this.plot = model.getDataCurve().getPlots(width, height);// rounds!
+
+			int n = plot.length;
+			int curY = plot[0];
+			for(int i = 1; i < n; i++)
+			{
+				g.setColor(Color.black);
+				g.drawLine(i - 1, height - curY - 1, i, height - plot[i] - 1);
+				curY = plot[i];
+			}
+		}
+	}
+}
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/StatVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/StatVisualizer.java
new file mode 100644
index 0000000..0d6ddd6
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/StatVisualizer.java
@@ -0,0 +1,822 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.*;
+import java.awt.event.MouseAdapter;
+import java.awt.event.MouseEvent;
+import java.util.Arrays;
+import java.util.Iterator;
+import java.util.Map;
+import java.util.Vector;// java
+import javax.swing.*;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import javax.swing.event.TableModelEvent;
+import javax.swing.table.AbstractTableModel;
+import javax.swing.table.TableModel;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.testelement.TestElement;
+
+
+/****************************************
+ * Title: StatVisualizer.java Description: Aggregrate Table-Based Reporting
+ * Visualizer for JMeter Props to the people who've done the other visualizers
+ * ahead of me (Stefano Mazzocchi), who I borrowed code from to start me off
+ * (and much code may still exist).. Thank you! Copyright: Copyright (c) 2001
+ * Company: Apache Foundation
+ *
+ *@author    James Boutcher
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   1.0
+ ***************************************/
+
+public class StatVisualizer extends AbstractVisualizer implements Scrollable, GraphListener,Clearable
+{
+//    protected NamePanel namePanel;
+
+//    protected GraphAccum graph;
+
+//    protected JPanel legendPanel;
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JTable myJTable;
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JScrollPane myScrollPane;
+
+	private final static String VISUALIZER_NAME = JMeterUtils.getResString("Aggregate Report");
+
+	private long sleepTill = 0;
+
+	private static int width = 2000;
+
+//    private boolean data = true;
+
+//    private boolean average = true;
+
+//    private boolean deviation = true;
+
+	private StatVisualizerModel model;
+
+	private StatTableModel myStatTableModel;
+
+
+	/****************************************
+	 * Constructor for the Graph object
+	 ***************************************/
+
+	public StatVisualizer()
+	{
+
+		super();
+		model = new StatVisualizerModel();
+		model.addGraphListener(this);
+		this.setPreferredSize(new Dimension(width, 800));
+		init();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return VISUALIZER_NAME;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param res  !ToDo (Parameter description)
+	 ***************************************/
+	public void add(SampleResult res)
+	{
+		model.addNewSample(res);
+	}
+
+
+	/****************************************
+	 * Gets the PreferredScrollableViewportSize attribute of this Visualizer
+	 *
+	 *@return   The PreferredScrollableViewportSize value
+	 ***************************************/
+
+	public Dimension getPreferredScrollableViewportSize()
+	{
+
+		return this.getPreferredSize();
+	}
+
+
+	/****************************************
+	 * Gets the ScrollableUnitIncrement attribute of the Visualizer
+	 *
+	 *@param visibleRect  Description of Parameter
+	 *@param orientation  Description of Parameter
+	 *@param direction    Description of Parameter
+	 *@return             The ScrollableUnitIncrement value
+	 ***************************************/
+
+	public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction)
+	{
+
+		// yanked this from some other visualizer - along with most of the core GUI stuff. not my bag.
+
+		return 5;
+	}
+
+
+	/****************************************
+	 * Gets the ScrollableBlockIncrement attribute of the Visualizer
+	 *
+	 *@param visibleRect  Description of Parameter
+	 *@param orientation  Description of Parameter
+	 *@param direction    Description of Parameter
+	 *@return             The ScrollableBlockIncrement value
+	 ***************************************/
+
+	public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction)
+	{
+
+		return (int)(visibleRect.width * .9);
+	}
+
+
+	/****************************************
+	 * Gets the ScrollableTracksViewportWidth attribute of the Visualizer
+	 *
+	 *@return   The ScrollableTracksViewportWidth value
+	 ***************************************/
+
+	public boolean getScrollableTracksViewportWidth()
+	{
+		return false;
+	}
+
+	/****************************************
+	 * Gets the ScrollableTracksViewportHeight attribute of the Visualizer
+	 *
+	 *@return   The ScrollableTracksViewportHeight value
+	 ***************************************/
+	public boolean getScrollableTracksViewportHeight()
+	{
+		return true;
+	}
+
+	/****************************************
+	 * Clears this visualizer, it model, and forces a repaint of the table
+	 ***************************************/
+	public void clear()
+	{
+		myStatTableModel.clear();
+		myJTable.tableChanged(new TableModelEvent(myStatTableModel));
+		model.clear();
+	}
+
+	/****************************************
+	 * Called by the model when the model has changed, and probably called by the
+	 * GUI when componets are resized, I'm guessing.
+	 ***************************************/
+	public void updateGui()
+	{
+		if(updateChart(myJTable, model.getURLStats()))
+		{
+			myJTable.tableChanged(new TableModelEvent(myStatTableModel));
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param s  !ToDo (Parameter description)
+	 ***************************************/
+	public void updateGui(Sample s)
+	{
+		updateGui();
+	}
+
+	// overrides AbstractVisualizer
+	// forces GUI update after sample file has been read
+	public TestElement createTestElement()
+	{
+		TestElement t = super.createTestElement();
+		sleepTill = 0;
+		updateGui();
+		return t;
+	}
+
+	/****************************************
+	 * Main method to update the chart with data contained in the passed-in-map. No
+	 * matter how quickly you repeatedly call this method, the table will only be
+	 * updated at most once per second.
+	 *
+	 *@param aTable   !ToDo (Parameter description)
+	 *@param dataset  !ToDo (Parameter description)
+	 *@return         A flag whether or not the graph was updated at all
+	 ***************************************/
+	public boolean updateChart(JTable aTable, Map dataset)
+	{
+		// some logic here so that if we're getting calls to update the chart 5000x/sec, we only do it once a second.
+
+		// it's too busy otherwise.
+
+		if(System.currentTimeMillis() < sleepTill)
+		{
+
+			// Sleeping.. won't update yet
+
+			return false;
+		}
+		else
+		{
+
+			sleepTill = System.currentTimeMillis() + 1000L;
+
+		}
+
+		// go through the dataset and plop values in the table
+
+		Iterator e = dataset.keySet().iterator();
+
+		int ridx = -1;
+
+		while(e.hasNext())
+		{
+
+			ridx++;
+
+			String thisKey = (String)e.next();
+
+			RunningSample rs = (RunningSample)dataset.get(thisKey);
+
+			aTable.setValueAt((String)thisKey, ridx, 0);
+
+			aTable.setValueAt(new Long(rs.getNumSamples()), ridx, 1);
+
+			aTable.setValueAt(new Long(rs.getAverage()), ridx, 2);
+
+			aTable.setValueAt(new Long(rs.getMin()), ridx, 3);
+
+			aTable.setValueAt(new Long(rs.getMax()), ridx, 4);
+
+			aTable.setValueAt(rs.getErrorPercentageString(), ridx, 5);
+
+			aTable.setValueAt(rs.getRateString(), ridx, 6);
+
+			if(rs.getErrorPercentage() > .5)
+			{
+
+				// have some fun with cell renderers later, change this text to red or something.
+
+				// here is where the logic would be.
+
+			}
+
+		}
+		// while
+
+		// we ended up updating the data in the table, so we'll return true so our caller can force a repaint
+
+		// of components
+
+		return (true);
+	}
+
+
+	/****************************************
+	 * Main visualizer setup..
+	 ***************************************/
+
+	private void init()
+	{
+
+		this.setLayout(new BorderLayout());
+
+		// MAIN PANEL
+
+		JPanel mainPanel = new JPanel();
+
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+
+		mainPanel.setBorder(margin);
+
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+
+		JLabel panelTitleLabel = new JLabel("Aggregate Report");
+
+		Font curFont = panelTitleLabel.getFont();
+
+		int curFontSize = curFont.getSize();
+
+		curFontSize += 4;
+
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+
+		mainPanel.add(panelTitleLabel);
+		mainPanel.add(getFilePanel());
+
+		myStatTableModel = new StatTableModel();
+
+//        SortFilterModel mySortedModel = new SortFilterModel(myStatTableModel);
+
+		myJTable = new JTable(myStatTableModel);
+
+		myJTable.setPreferredScrollableViewportSize(
+				new Dimension(500, 70));
+
+		myScrollPane = new JScrollPane(myJTable);
+
+		this.add(mainPanel, BorderLayout.NORTH);
+
+		this.add(myScrollPane, BorderLayout.CENTER);
+
+	}
+
+}
+// class StatVisualizer
+
+
+/****************************************
+ * Pulled this mainly out of a Core Java book to implement a sorted table -
+ * haven't implemented this yet, it needs some non-trivial work done to it to
+ * support our dynamically-sizing TableModel for this visualizer.
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+
+class SortFilterModel extends AbstractTableModel
+{
+
+
+	private TableModel model;
+
+	private int sortColumn;
+
+	private Row[] rows;
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param m  !ToDo (Parameter description)
+	 ***************************************/
+	public SortFilterModel(TableModel m)
+	{
+
+		model = m;
+
+		rows = new Row[model.getRowCount()];
+
+		for(int i = 0; i < rows.length; i++)
+		{
+
+			rows[i] = new Row();
+
+			rows[i].index = i;
+
+		}
+
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param aValue  !ToDo (Parameter description)
+	 *@param r       !ToDo (Parameter description)
+	 *@param c       !ToDo (Parameter description)
+	 ***************************************/
+	public void setValueAt(Object aValue, int r, int c)
+	{
+
+		model.setValueAt(aValue, rows[r].index, c);
+
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param r  !ToDo (Parameter description)
+	 *@param c  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Object getValueAt(int r, int c)
+	{
+
+		return model.getValueAt(rows[r].index, c);
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param r  !ToDo (Parameter description)
+	 *@param c  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public boolean isCellEditable(int r, int c)
+	{
+
+		return model.isCellEditable(rows[r].index, c);
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getRowCount()
+	{
+
+		return model.getRowCount();
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getColumnCount()
+	{
+
+		return model.getColumnCount();
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param c  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getColumnName(int c)
+	{
+
+		return model.getColumnName(c);
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param c  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Class getColumnClass(int c)
+	{
+
+		return model.getColumnClass(c);
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param c  !ToDo (Parameter description)
+	 ***************************************/
+	public void sort(int c)
+	{
+
+		sortColumn = c;
+
+		Arrays.sort(rows);
+
+		fireTableDataChanged();
+
+	}
+
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param table  !ToDo
+	 ***************************************/
+	public void addMouseListener(final JTable table)
+	{
+
+		table.getTableHeader().addMouseListener(
+			new MouseAdapter()
+			{
+
+				public void mouseClicked(MouseEvent event)
+				{
+
+					if(event.getClickCount() < 2)
+					{
+						return;
+					}
+
+					int tableColumn = table.columnAtPoint(event.getPoint());
+
+					int modelColumn = table.convertColumnIndexToModel(tableColumn);
+
+					sort(modelColumn);
+
+				}
+
+			});
+
+	}
+
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:41 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class Row implements Comparable
+	{
+
+		/****************************************
+		 * !ToDo (Field description)
+		 ***************************************/
+		public int index;
+
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param other  !ToDo (Parameter description)
+		 *@return       !ToDo (Return description)
+		 ***************************************/
+		public int compareTo(Object other)
+		{
+
+			Row otherRow = (Row)other;
+
+			Object a = model.getValueAt(index, sortColumn);
+
+			Object b = model.getValueAt(otherRow.index, sortColumn);
+
+			if(a instanceof Comparable)
+			{
+
+				return ((Comparable)a).compareTo(b);
+			}
+			else
+			{
+
+				return index - otherRow.index;
+			}
+
+		}
+
+	}
+
+}
+// class SortFilterModel
+
+
+/****************************************
+ * Class which implements the model for our main table in this visualizer.
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:41 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+
+class StatTableModel extends AbstractTableModel
+{
+
+
+	final String[] columnNames = {"URL",
+			"Count",
+			"Average",
+			"Min",
+			"Max",
+			"Error%",
+			"Rate"};
+
+	Vector data;
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public StatTableModel()
+	{
+
+		super();
+
+		data = new Vector();
+
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param value  !ToDo (Parameter description)
+	 *@param row    !ToDo (Parameter description)
+	 *@param col    !ToDo (Parameter description)
+	 ***************************************/
+	public void setValueAt(Object value, int row, int col)
+	{
+
+		Object[] temp;
+
+		//Extends the size of the vector as needed (can be used for append)
+
+		if(row >= data.size())
+		{
+
+			data.setSize(row + 1);
+
+		}
+
+		//Check if the line is not empty
+
+		if((Object[])(data.get(row)) == null)
+		{
+
+			temp = new Object[this.getColumnCount()];
+
+		}
+		else
+		{
+
+			temp = (Object[])(data.get(row));
+
+		}
+
+		temp[col] = value;
+
+		//Columns are stored as an array
+
+		data.set(row, temp);
+
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getColumnCount()
+	{
+
+		return columnNames.length;
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getRowCount()
+	{
+
+		return data.size();
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param col  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public String getColumnName(int col)
+	{
+
+		return columnNames[col];
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param row  !ToDo (Parameter description)
+	 *@param col  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public Object getValueAt(int row, int col)
+	{
+
+		//When created, rows are null, need to check that
+
+		if((((Object[])data.get(row))[col]) != null)
+		{
+
+			return (((Object[])(data.get(row)))[col]);
+		}
+		else
+		{
+
+			return (" ");
+		}
+
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param c  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Class getColumnClass(int c)
+	{
+
+		return getValueAt(0, c).getClass();
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void clear()
+	{
+
+		data.clear();
+
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param row  !ToDo (Parameter description)
+	 ***************************************/
+	public void insertRowAt(int row)
+	{
+
+		data.insertElementAt(new Object[this.getColumnCount()], row);
+
+	}
+
+}
+// class StatTableModel
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/StatVisualizerModel.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/StatVisualizerModel.java
new file mode 100644
index 0000000..274596a
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/StatVisualizerModel.java
@@ -0,0 +1,213 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;// java
+import java.util.*;// apache
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.util.JMeterUtils;
+
+
+/****************************************
+ * Title: StatVisualizerModel.java Description: Aggregrate Table-Based Reporting
+ * Model for JMeter Props to the people who've done the other visualizers ahead
+ * of me (Stefano Mazzocchi), who I borrowed code from to start me off (and much
+ * code may still exist).. Thank you! Copyright: Copyright (c) 2001 Company:
+ * Apache Foundation
+ *
+ *@author    James Boutcher
+ *@created   March 21, 2002
+ *@version   1.0
+ ***************************************/
+
+public class StatVisualizerModel implements Clearable
+{
+
+	private String name;
+
+	private List listeners;
+	private Map labelMap;
+
+	/****************************************
+	 * Default Constuctor
+	 ***************************************/
+
+	public StatVisualizerModel()
+	{
+		listeners = new LinkedList();
+		labelMap = Collections.synchronizedMap(new HashMap(10));
+	}
+
+	/****************************************
+	 * Sets the Name attribute of the StatVisualizerModel object
+	 *
+	 *@param name  The new Name value
+	 ***************************************/
+
+	public void setName(String name)
+	{
+
+		this.name = name;
+
+	}
+
+	/****************************************
+	 * Returns the Map containing the Samples we've collected and their
+	 * corresponding RunningSample instance.
+	 *
+	 *@return   The URLStats value
+	 ***************************************/
+
+	public Map getURLStats()
+	{
+
+		return (labelMap);
+	}
+
+	/****************************************
+	 * Gets the GuiClass attribute of the StatVisualizerModel object
+	 *
+	 *@return   The GuiClass value
+	 ***************************************/
+
+	public Class getGuiClass()
+	{
+
+		return StatVisualizer.class;
+	}
+
+
+
+	/****************************************
+	 * Gets the Name attribute of the StatVisualizerModel object
+	 *
+	 *@return   The Name value
+	 ***************************************/
+
+	public String getName()
+	{
+		return name;
+	}
+
+	/****************************************
+	 * Registers a listener (a visualizer, graph, etc) to this model. This will
+	 * allow the model to fire GUI updates to anyone when data changes, etc.
+	 *
+	 *@param listener       !ToDo
+	 ***************************************/
+
+	public void addGraphListener(GraphListener listener)
+	{
+		listeners.add(listener);
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param res  !ToDo
+	 ***************************************/
+	public void addNewSample(SampleResult res)
+	{
+		String aLabel = res.getSampleLabel();
+		String responseCode = res.getResponseCode();
+		RunningSample myRS;
+
+		if (labelMap.containsKey(aLabel))
+		{
+			myRS = (RunningSample)labelMap.get(aLabel);
+		}
+		else
+		{
+			// put a new one there..
+			myRS = new RunningSample();
+			labelMap.put(aLabel, myRS);
+		}
+
+		myRS.addSample(res);
+		this.fireDataChanged();
+	}
+
+	/****************************************
+	 * Reset everything we can in the model.
+	 ***************************************/
+
+	public void clear()
+	{
+//        System.out.println("StatVisualizerModel.clear() called");
+		// clear the data structures
+		labelMap.clear();
+		this.fireDataChanged();
+	}
+
+	/****************************************
+	 * Called when the model changes - then we call out to all registered listeners
+	 * and tell them to update themselves.
+	 ***************************************/
+	protected void fireDataChanged()
+	{
+		Iterator iter = listeners.iterator();
+		while(iter.hasNext())
+		{
+			Object myObj = iter.next();
+			if(!(myObj instanceof GraphListener))
+			{
+				continue;
+			}
+			((GraphListener)myObj).updateGui();
+		}
+	}
+
+}
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TableDataModel.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TableDataModel.java
new file mode 100644
index 0000000..66247d9
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TableDataModel.java
@@ -0,0 +1,236 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.visualizers;
+
+import org.apache.jmeter.gui.*;
+import java.util.*;
+import javax.swing.table.TableModel;
+import javax.swing.event.TableModelListener;
+
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ *  This class implements the TableModel for the information kept
+ *  by the GraphModel.
+ *
+ *@author     <a href="mailto:alf@i100.no">Alf Hogemark</a>Hogemark
+ *@created    March 10, 2002
+ *@version    1.0
+ */
+public class TableDataModel extends GraphModel implements TableModel
+{
+	List urlList = new ArrayList();
+
+	/**
+	 *  Constructor for the TableDataModel object
+	 */
+	public TableDataModel()
+	{
+		super();
+	}
+
+	/**
+	 * Gets the GuiClass attribute of the TableModel object
+	 *
+	 * @return    The GuiClass value
+	 */
+	public Class getGuiClass()
+	{
+		return TableVisualizer.class;
+	}
+
+	/**
+	 * Gets the ClassLabel attribute of the GraphModel object
+	 *
+	 * @return    The ClassLabel value
+	 */
+	public String getClassLabel()
+	{
+		return "View Results in Table";
+	}
+
+	public Sample addNewSample(long time,long timeStamp,boolean success,String url)
+	{
+		Sample s = super.addNewSample(time,timeStamp,success);
+		urlList.add(url);
+		return s;
+	}
+
+	public Sample addSample(SampleResult e)
+	{
+		Sample s = addNewSample(e.getTime(),e.getTimeStamp(),e.isSuccessful(),
+				(String)e.getSampleLabel());
+		fireDataChanged();
+		return s;
+	}
+
+		  // Implmentation of the TableModel interface
+	public int getRowCount()
+	{
+		return getSampleCount();
+	}
+
+	public int getColumnCount()
+	{
+		// We have two columns : sampleNo and sampleValue
+		return 4;
+	}
+
+	public String getColumnName(int columnIndex)
+	{
+		switch(columnIndex)
+		{
+			case 0:
+				return "SampleNo";
+			case 1:
+				return JMeterUtils.getResString("url");
+			case 2:
+				return "Sample - ms";
+			case 3:
+				return JMeterUtils.getResString("Success?");
+			default:
+				return null;
+		}
+	}
+
+	public Class getColumnClass(int columnIndex)
+	{
+		if(columnIndex == 0)
+		{
+			return Integer.class;
+		}
+		else if(columnIndex == 1)
+		{
+			return String.class;
+		}
+		else if(columnIndex == 2)
+		{
+			return Long.class;
+		}
+		else if(columnIndex == 3)
+		{
+			return Boolean.class;
+		}
+		else
+		{
+			return null;
+		}
+	}
+
+	public boolean isCellEditable(int rowIndex, int columnIndex)
+	{
+		return false;
+	}
+
+	public Object getValueAt(int rowIndex, int columnIndex)
+	{
+		if(columnIndex == 0)
+		{
+			if((rowIndex >= 0) && (rowIndex < getSampleCount()))
+			{
+				return new Integer(rowIndex);
+			}
+		}
+		else if(columnIndex == 1)
+		{
+			System.out.print("rowIndex = "+rowIndex);
+			if((rowIndex >= 0) && (rowIndex < urlList.size()))
+			{
+				System.out.println(" url = "+urlList.get(rowIndex));
+				return urlList.get(rowIndex);
+			}
+		}
+		else if(columnIndex == 2)
+		{
+			if((rowIndex >= 0) && (rowIndex < getSampleCount()))
+			{
+				return new Long(((Sample)getSamples().get(rowIndex)).data);
+			}
+		}
+		else if(columnIndex == 3)
+		{
+			if((rowIndex >= 0) && (rowIndex < urlList.size()))
+			{
+				return new Boolean(!((Sample)getSamples().get(rowIndex)).error);
+			}
+		}
+		return null;
+	}
+
+	/**
+	 * Dummy implementation
+	 */
+	public void setValueAt(Object aValue, int rowIndex, int columnIndex)
+	{
+	}
+
+	/**
+	 * Dummy implementation
+	 */
+	public void addTableModelListener(TableModelListener l)
+	{
+	}
+
+	/**
+	 * Dummy implementation
+	 */
+	public void removeTableModelListener(TableModelListener l)
+	{
+	}
+}
+
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TableVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TableVisualizer.java
new file mode 100644
index 0000000..b11dd12
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TableVisualizer.java
@@ -0,0 +1,266 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+
+/****************************************
+ * This class implements a statistical analyser that calculates both the average
+ * and the standard deviation of the sampling process. The samples are displayed
+ * in a JTable, and the statistics are displayed at the bottom of the table.
+ *
+ *@author    <a href="mailto:alf@i100.no">Alf Hogemark</a>
+ *@created   March 10, 2002
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class TableVisualizer extends AbstractVisualizer
+		 implements GraphListener, Clearable
+{
+	private TableDataModel model = null;
+	private JTable table = null;
+	private JTextField dataField = null;
+	private JTextField averageField = null;
+	private JTextField deviationField = null;
+	private JTextField noSamplesField = null;
+	private JScrollPane tableScrollPanel = null;
+
+
+	/****************************************
+	 * Constructor for the TableVisualizer object
+	 ***************************************/
+	public TableVisualizer()
+	{
+		super();
+		model = new TableDataModel();
+		model.addGraphListener(this);
+		init();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("View Results in Table");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void updateGui()
+	{
+		// Not completely sure if this is the correct way of updating the table
+		tableScrollPanel.revalidate();
+		tableScrollPanel.repaint();
+		noSamplesField.setText(Long.toString(model.getSampleCount()));
+		dataField.setText(Long.toString(model.getCurrentData()));
+		averageField.setText(Long.toString(model.getCurrentAverage()));
+		deviationField.setText(Long.toString(model.getCurrentDeviation()));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param res  !ToDo (Parameter description)
+	 ***************************************/
+	public void add(SampleResult res)
+	{
+		model.addSample(res);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param s  !ToDo (Parameter description)
+	 ***************************************/
+	public void updateGui(Sample s)
+	{
+		// We have received one more sample
+		// Not completely sure if this is the correct way of updating the table
+		tableScrollPanel.revalidate();
+		tableScrollPanel.repaint();
+		noSamplesField.setText(Long.toString(model.getSampleCount()));
+		dataField.setText(Long.toString(model.getCurrentData()));
+		averageField.setText(Long.toString(model.getCurrentAverage()));
+		deviationField.setText(Long.toString(model.getCurrentDeviation()));
+	}
+
+	/****************************************
+	 * Description of the Method
+	 ***************************************/
+	public synchronized void clear()
+	{
+		//this.graph.clear();
+		model.clear();
+		dataField.setText("0000");
+		averageField.setText("0000");
+		deviationField.setText("0000");
+		repaint();
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@return   Description of the Returned Value
+	 ***************************************/
+	public String toString()
+	{
+		return "Show the samples in a table";
+	}
+
+	/****************************************
+	 * Description of the Method
+	 ***************************************/
+	private void init()
+	{
+		this.setLayout(new BorderLayout());
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("View Results in Table"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+		mainPanel.add(getFilePanel());
+
+		// Set up the table itself
+		table = new JTable(model);
+		//table.getTableHeader().setReorderingAllowed(false);
+		tableScrollPanel = new JScrollPane(table);
+		tableScrollPanel.setViewportBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
+
+		// Set up footer of table which displays numerics of the graphs
+		JPanel dataPanel = new JPanel();
+		JLabel dataLabel = new JLabel(JMeterUtils.getResString("graph_results_latest_sample"));
+		dataLabel.setForeground(Color.black);
+		dataField = new JTextField(5);
+		dataField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		dataField.setEditable(false);
+		dataField.setForeground(Color.black);
+		dataField.setBackground(getBackground());
+		dataPanel.add(dataLabel);
+		dataPanel.add(dataField);
+		JPanel averagePanel = new JPanel();
+		JLabel averageLabel = new JLabel(JMeterUtils.getResString("graph_results_average"));
+		averageLabel.setForeground(Color.blue);
+		averageField = new JTextField(5);
+		averageField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		averageField.setEditable(false);
+		averageField.setForeground(Color.blue);
+		averageField.setBackground(getBackground());
+		averagePanel.add(averageLabel);
+		averagePanel.add(averageField);
+		JPanel deviationPanel = new JPanel();
+		JLabel deviationLabel = new JLabel(JMeterUtils.getResString("graph_results_deviation"));
+		deviationLabel.setForeground(Color.red);
+		deviationField = new JTextField(5);
+		deviationField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		deviationField.setEditable(false);
+		deviationField.setForeground(Color.red);
+		deviationField.setBackground(getBackground());
+		deviationPanel.add(deviationLabel);
+		deviationPanel.add(deviationField);
+		JPanel noSamplesPanel = new JPanel();
+		JLabel noSamplesLabel = new JLabel(JMeterUtils.getResString("graph_results_no_samples"));
+		noSamplesField = new JTextField(10);
+		noSamplesField.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+		noSamplesField.setEditable(false);
+		noSamplesField.setForeground(Color.black);
+		noSamplesField.setBackground(getBackground());
+		noSamplesPanel.add(noSamplesLabel);
+		noSamplesPanel.add(noSamplesField);
+
+		JPanel tableInfoPanel = new JPanel();
+		tableInfoPanel.setLayout(new FlowLayout());
+		tableInfoPanel.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
+
+		tableInfoPanel.add(noSamplesPanel);
+		tableInfoPanel.add(dataPanel);
+		tableInfoPanel.add(averagePanel);
+		tableInfoPanel.add(deviationPanel);
+
+		// Set up the table with footer
+		JPanel tablePanel = new JPanel();
+		tablePanel.setLayout(new BorderLayout());
+		tablePanel.add(tableScrollPanel, BorderLayout.CENTER);
+		tablePanel.add(tableInfoPanel, BorderLayout.SOUTH);
+
+		// Add the main panel and the graph
+		this.add(mainPanel, BorderLayout.NORTH);
+		this.add(tablePanel, BorderLayout.CENTER);
+	}
+
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TreeVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TreeVisualizer.java
new file mode 100644
index 0000000..53fe256
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/TreeVisualizer.java
@@ -0,0 +1,231 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.event.*;
+import javax.swing.tree.*;
+import junit.framework.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.protocol.http.sampler.HTTPSamplerFull;
+import org.apache.jmeter.reporters.ResultCollector;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.log4j.*;
+/****************************************
+ * Allows the tester to view the textual response from sampling an Entry. This
+ * also allows to "single step through" the sampling process via a nice
+ * "Continue" button.
+ *
+ *@author    Khor Soon Hin
+ *@created   2001/08/30
+ *@version   1.0
+ ***************************************/
+public abstract class TreeVisualizer extends JPanel
+		 implements TreeSelectionListener, Clearable
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected DefaultMutableTreeNode root;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected DefaultTreeModel treeModel;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected GridBagLayout gridBag;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected GridBagConstraints gbc;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JPanel resultPanel;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JScrollPane treePane;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JScrollPane resultPane;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JSplitPane treeSplitPane;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected JTree jTree;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected int childIndex;
+
+	ResultCollector model;
+
+	private static Category catClass =
+			Category.getInstance(TreeVisualizer.class.getName());
+
+	//----- TreeSelectionListener interface : end -----
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public TreeVisualizer()
+	{
+		super();
+		this.setLayout(new GridLayout(1, 1));
+		catClass.debug("Start : TreeVisualizer1");
+		catClass.debug("End : TreeVisualizer1");
+	}
+
+	//----- ModelSupported interface : start -----
+
+	/****************************************
+	 * Set the reporter type this visualizer will work with
+	 *
+	 *@param model  reporter instance
+	 ***************************************/
+	public void setModel(Object model)
+	{
+		catClass.debug("Start : setModel1");
+		this.model = (ResultCollector)model;
+		this.model.setListener(this);
+		init();
+		catClass.debug("End : setModel1");
+	}
+
+	/****************************************
+	 * Update the visualizer with new data
+	 ***************************************/
+	public abstract void updateGui();
+
+	//----- ModelSupported interface : end -----
+
+	//----- TreeSelectionListener interface : start -----
+
+	/****************************************
+	 * Sets the bottom pane to correspond to the selected node of the top tree
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public abstract void valueChanged(TreeSelectionEvent e);
+
+	/****************************************
+	 * Clears the visualizer
+	 ***************************************/
+	public void clear()
+	{
+		catClass.debug("Start : clear1");
+		int totalChild = root.getChildCount();
+		if(catClass.isDebugEnabled())
+		{
+			catClass.debug("clear1 : total child - " + totalChild);
+		}
+		for(int i = 0; i < totalChild; i++)
+		{
+			// the child to be removed will always be 0 'cos as the nodes are removed
+			// the nth node will become (n-1)th
+			treeModel.removeNodeFromParent(
+					(DefaultMutableTreeNode)root.getChildAt(0));
+		}
+		resultPanel.removeAll();
+		resultPanel.repaint();
+		// reset the child index
+		childIndex = 0;
+		catClass.debug("End : clear1");
+	}
+
+	/****************************************
+	 * Returns the description of this visualizer
+	 *
+	 *@return   description of this visualizer
+	 ***************************************/
+	public abstract String toString();
+
+	/****************************************
+	 * Initialize this visualizer
+	 ***************************************/
+	protected void init()
+	{
+		catClass.debug("Start : init1");
+		SampleResult rootSampleResult = new SampleResult();
+		rootSampleResult.setSampleLabel("Root");
+		root = new DefaultMutableTreeNode(rootSampleResult);
+		treeModel = new DefaultTreeModel(root);
+		jTree = new JTree(treeModel);
+		jTree.getSelectionModel().setSelectionMode(
+				TreeSelectionModel.SINGLE_TREE_SELECTION);
+		jTree.addTreeSelectionListener(this);
+		treePane = new JScrollPane(jTree);
+		gridBag = new GridBagLayout();
+		gbc = new GridBagConstraints();
+		resultPanel = new JPanel(gridBag);
+		resultPanel.setPreferredSize(new Dimension(2000, 800));
+		resultPane = new JScrollPane(resultPanel);
+		treeSplitPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
+				treePane, resultPane);
+		add(treeSplitPane);
+		catClass.debug("End : init1");
+	}
+}
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/ViewResultsFullVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/ViewResultsFullVisualizer.java
new file mode 100644
index 0000000..a5aeadb
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/ViewResultsFullVisualizer.java
@@ -0,0 +1,351 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+import java.awt.BorderLayout;
+import java.awt.Color;
+import java.awt.GridBagConstraints;
+import java.awt.GridBagLayout;
+import java.awt.Insets;
+import java.io.UnsupportedEncodingException;
+
+import javax.swing.ImageIcon;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JScrollPane;
+import javax.swing.JSplitPane;
+import javax.swing.JTextArea;
+import javax.swing.JTree;
+import javax.swing.event.TreeSelectionEvent;
+import javax.swing.event.TreeSelectionListener;
+import javax.swing.tree.DefaultMutableTreeNode;
+import javax.swing.tree.DefaultTreeModel;
+import javax.swing.tree.TreeSelectionModel;
+
+import org.apache.jmeter.gui.util.JLabeledTextArea;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.gui.AbstractVisualizer;
+import org.apache.log4j.Category;
+
+/****************************************
+ * Allows the tester to view the textual response from sampling an Entry. This
+ * also allows to "single step through" the sampling process via a nice
+ * "Continue" button.
+ *
+ *@author    Khor Soon Hin
+ *@created   2001/07/25
+ *@version   $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ ***************************************/
+public class ViewResultsFullVisualizer extends AbstractVisualizer implements
+		TreeSelectionListener,Clearable
+{
+
+	public final static Color SERVER_ERROR_COLOR = Color.red;
+	public final static Color CLIENT_ERROR_COLOR = Color.blue;
+	public final static Color REDIRECT_COLOR = Color.green;
+	protected DefaultMutableTreeNode root;
+	protected DefaultTreeModel treeModel;
+	protected GridBagLayout gridBag;
+	protected GridBagConstraints gbc;
+	protected JPanel resultPanel;
+	protected JScrollPane treePane;
+	protected JScrollPane resultPane;
+	protected JSplitPane treeSplitPane;
+	protected JTree jTree;
+	protected int childIndex;
+
+	private static Category catClass =
+			Category.getInstance(ViewResultsFullVisualizer.class.getName());
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ViewResultsFullVisualizer()
+	{
+		super();
+		init();
+		catClass.debug("Start : ViewResultsFullVisualizer1");
+		catClass.debug("End : ViewResultsFullVisualizer1");
+	}
+
+	public void add(SampleResult res)
+	{
+		updateGui(res);
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("view_results_tree_title");
+	}
+
+	/****************************************
+	 * Update the visualizer with new data
+	 ***************************************/
+	public void updateGui(SampleResult res)
+	{
+		catClass.debug("Start : updateGui1");
+
+		if(catClass.isDebugEnabled())
+			catClass.debug("updateGui1 : sample result - " + res);
+
+		DefaultMutableTreeNode currNode = new DefaultMutableTreeNode(res);
+		treeModel.insertNodeInto(currNode, root, root.getChildCount());
+		SampleResult[] subResults= res.getSubResults();
+		if(subResults != null)
+		{
+			int leafIndex = 0;
+			for(int i = 0;i < subResults.length;i++)
+			{
+				SampleResult child = subResults[i];
+				if(catClass.isDebugEnabled())
+					catClass.debug("updateGui1 : child sample result - " + child);
+
+				DefaultMutableTreeNode leafNode =
+						new DefaultMutableTreeNode(child);
+				treeModel.insertNodeInto(leafNode, currNode, leafIndex++);
+			}
+		}
+		catClass.debug("End : updateGui1");
+	}
+
+	/****************************************
+	 * Clears the visualizer
+	 ***************************************/
+	public void clear()
+	{
+		catClass.debug("Start : clear1");
+		int totalChild = root.getChildCount();
+		if(catClass.isDebugEnabled())
+			catClass.debug("clear1 : total child - " + totalChild);
+
+		for(int i = 0; i < totalChild; i++)
+			// the child to be removed will always be 0 'cos as the nodes are removed
+			// the nth node will become (n-1)th
+			treeModel.removeNodeFromParent(
+					(DefaultMutableTreeNode)root.getChildAt(0));
+
+		resultPanel.removeAll();
+		resultPanel.revalidate();
+		// reset the child index
+		childIndex = 0;
+		catClass.debug("End : clear1");
+	}
+
+	/****************************************
+	 * Returns the description of this visualizer
+	 *
+	 *@return   description of this visualizer
+	 ***************************************/
+	public String toString()
+	{
+		String desc = "Shows the text results of sampling in tree form";
+		if(catClass.isDebugEnabled())
+			catClass.debug("toString1 : Returning description - " + desc);
+
+		return desc;
+	}
+
+	/****************************************
+	 * Sets the bottom pane to correspond to the selected node of the top tree
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void valueChanged(TreeSelectionEvent e)
+	{
+		catClass.debug("Start : valueChanged1");
+		DefaultMutableTreeNode node = (DefaultMutableTreeNode)jTree.getLastSelectedPathComponent();
+		if(catClass.isDebugEnabled())
+			catClass.debug("valueChanged : selected node - " + node);
+
+		if(node != null)
+		{
+			SampleResult res = (SampleResult)node.getUserObject();
+			if(catClass.isDebugEnabled())
+				catClass.debug("valueChanged1 : sample result - " + res);
+
+			if(res != null)
+			{
+				resultPanel.removeAll();
+				// load time label
+				JLabel loadTime = new JLabel();
+				catClass.debug("valueChanged1 : load time - " + res.getTime());
+				loadTime.setText("Load time : " + res.getTime());
+				gbc.gridx = 0;
+				gbc.gridy = 0;
+				// keep all of the labels to the left
+				gbc.anchor = GridBagConstraints.WEST;
+				// with weightx != 0.0, components won't clump in the center
+				gbc.weightx = 1.0;
+				// pad a bit from the display area
+				gbc.insets = new Insets(0, 10, 0, 0);
+				if(res != null && res.getSamplerData() != null)
+				{
+					JLabeledTextArea postData = new JLabeledTextArea(JMeterUtils.getResString("request_data"),null);
+					postData.setText(res.getSamplerData().toString());
+					resultPanel.add(postData,gbc.clone());
+					gbc.gridy++;
+				}
+				resultPanel.add(loadTime,gbc.clone());
+				// response code label
+				JLabel httpResponseCode = new JLabel();
+				String responseCode = res.getResponseCode();
+				catClass.debug("valueChanged1 : response code - " + responseCode);
+				int responseLevel = 0;
+				if(responseCode != null)
+					try
+					{
+						responseLevel = Integer.parseInt(responseCode) / 100;
+					}
+					catch(NumberFormatException numberFormatException)
+					{
+						// no need to change the foreground color
+					}
+
+				switch (responseLevel)
+				{
+					case 3:
+						httpResponseCode.setForeground(REDIRECT_COLOR);
+					case 4:
+						httpResponseCode.setForeground(CLIENT_ERROR_COLOR);
+					case 5:
+						httpResponseCode.setForeground(SERVER_ERROR_COLOR);
+				}
+				httpResponseCode.setText(JMeterUtils.getResString("HTTP response code")+" : " +
+						responseCode);
+				gbc.gridx = 0;
+				gbc.gridy++;
+				gridBag.setConstraints(httpResponseCode, gbc);
+				resultPanel.add(httpResponseCode);
+				// response message label
+				JLabel httpResponseMsg = new JLabel();
+										  String responseMsgStr = res.getResponseMessage();
+										  catClass.debug("valueChanged1 : response message - " + responseMsgStr);
+				httpResponseMsg.setText("HTTP response message : " +
+						responseMsgStr);
+				gbc.gridx = 0;
+				gbc.gridy++;
+				gridBag.setConstraints(httpResponseMsg, gbc);
+				resultPanel.add(httpResponseMsg);
+				gbc.gridy++;
+
+				// get the text response and image icon
+				// to determine which is NOT null
+										  byte[] responseBytes = (byte[])res.getResponseData();
+				String response = null;
+				ImageIcon icon = null;
+										  if(res.getDataType() != null && res.getDataType().equals(SampleResult.TEXT))
+										  {
+											 try {
+												response = new String(responseBytes,"utf-8");
+											} catch(UnsupportedEncodingException err) {
+												response = new String(responseBytes);
+											}
+										  }
+										  else if(responseBytes != null)
+										  {
+											icon = new ImageIcon(responseBytes);
+										  }
+				if(response != null)
+				{
+					JTextArea textArea = new JTextArea();
+					textArea.setText(response);
+					gbc.gridx = 0;
+					gridBag.setConstraints(textArea, gbc);
+					resultPanel.add(textArea);
+				}
+				else if(icon != null)
+				{
+					JLabel image = new JLabel();
+					image.setIcon(icon);
+					gbc.gridx = 0;
+					gridBag.setConstraints(image, gbc);
+					resultPanel.add(image);
+				}
+				resultPanel.repaint();
+				resultPanel.revalidate();
+			}
+		}
+		catClass.debug("End : valueChanged1");
+	}
+
+	/****************************************
+	 * Initialize this visualizer
+	 ***************************************/
+	protected void init()
+	{
+		this.setLayout(new BorderLayout());
+		catClass.debug("Start : init1");
+		SampleResult rootSampleResult = new SampleResult();
+		rootSampleResult.setSampleLabel("Root");
+		root = new DefaultMutableTreeNode(rootSampleResult);
+		treeModel = new DefaultTreeModel(root);
+		jTree = new JTree(treeModel);
+		jTree.getSelectionModel().setSelectionMode(
+				TreeSelectionModel.SINGLE_TREE_SELECTION);
+		jTree.addTreeSelectionListener(this);
+		treePane = new JScrollPane(jTree);
+		gridBag = new GridBagLayout();
+		gbc = new GridBagConstraints();
+		resultPanel = new JPanel(gridBag);
+		resultPane = new JScrollPane(resultPanel);
+		treeSplitPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
+				treePane, resultPane);
+		add(getFilePanel(),BorderLayout.NORTH);
+		add(treeSplitPane,BorderLayout.CENTER);
+		catClass.debug("End : init1");
+	}
+}
+
diff --git a/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/WindowedVisualizer.java b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/WindowedVisualizer.java
new file mode 100644
index 0000000..05fb8af
--- /dev/null
+++ b/jakarta-jmeter/src/components/org/apache/jmeter/visualizers/WindowedVisualizer.java
@@ -0,0 +1,282 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.visualizers;
+
+import java.awt.*;
+import java.util.*;
+import java.awt.event.*;
+import javax.swing.*;
+
+import org.apache.jmeter.samplers.SampleResult;
+
+/**
+ * This class implements a statistical analyser that
+ * calculates both the average and the standard deviation
+ * of the sampling process and outputs them as autoscaling
+ * plots. Instead of performing a complete analysis, the values
+ * are windowed to keep the analisys overhead to a minimum and to
+ * remove sampling noise from the initial values.
+ *
+ * @author  <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:41 $
+ */
+public class WindowedVisualizer extends JPanel implements ImageVisualizer {
+
+	 public class Graph extends JComponent implements Scrollable {
+
+		  private int counter = 0;
+		  private int cursor = 0;
+		  private int sum = 0;
+		  private int window = 100;
+		  private int samples = 2000;
+		  private int max = 1;
+		  private boolean active = true;
+		  private int[] sample;
+		  private int[] average;
+
+		  public Graph() {
+				this.sample = new int[window];
+				this.average = new int[window];
+				this.setPreferredSize(getPreferredScrollableViewportSize());
+		  }
+
+		  public int getWindowSize() {
+				return window;
+		  }
+
+		  public int setWindowSize(int window) {
+				if (window > 0) this.window = window;
+				return this.window;
+		  }
+
+		  public int getSamples() {
+				return samples;
+		  }
+
+		  public int setSamples(int samples) {
+				if (samples > 0) this.samples = samples;
+			return this.samples;
+		  }
+
+		  public int add(long sam) {
+				if (++counter < samples) {
+					 int s = (int) sam;
+
+					if (cursor < window - 1) {
+						cursor++;
+					} else {
+						cursor = 0;
+					}
+
+					 sum -= sample[cursor];
+					 sample[cursor] = s;
+					 sum += s;
+
+					 if (s > max) max = s;
+
+					 average[cursor] = sum / window;
+				} else {
+					 active = false;
+				}
+
+			return average[cursor];
+		  }
+
+		  public void clear() {
+				sample = new int[window];
+				average = new int[window];
+				sum = 0;
+				cursor = 0;
+				counter = 0;
+				max = 1;
+				active = true;
+		  }
+
+		  public void paintComponent(Graphics g) {
+				super.paintComponent(g);
+
+				Dimension d = this.getSize();
+
+				for (int i = 0, x = 0; i < window; i++, x++) {
+					 int s = (int) (sample[i] * d.height / max);
+					 g.setColor(Color.black);
+					 g.fillRect(x, d.height - s - 1, 1, 2);
+					 int a = (int) (average[i] * d.height / max);
+					 g.setColor(Color.blue);
+					 g.fillRect(x, d.height - a - 1, 1, 2);
+				}
+		  }
+
+		  public Dimension getPreferredScrollableViewportSize() {
+				return new Dimension(400, 200);
+		  }
+
+		  public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
+				return 1;
+		  }
+
+		  public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
+				return 50;
+		  }
+
+		  public boolean getScrollableTracksViewportWidth() {
+				return false;
+		  }
+
+		  public boolean getScrollableTracksViewportHeight() {
+				return true;
+		  }
+	 }
+
+	 private Graph graph;
+	 private JTextField windowField;
+	 private JTextField samplesField;
+	 private JTextField dataField;
+	 private JTextField averageField;
+	 private JTextField deviationField;
+
+	 public WindowedVisualizer() {
+		  super();
+
+		  graph = new Graph();
+		  JScrollPane graphScrollPanel = new JScrollPane(graph);
+		  graphScrollPanel.setViewportBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
+		  //graphScrollPanel.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
+		  //graphScrollPanel.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);
+
+		  JLabel windowLabel = new JLabel("Window");
+		  windowField = new JTextField();
+		  windowField.setEditable(true);
+		windowField.setColumns(5);
+		windowField.setText(Integer.toString(this.graph.getWindowSize()));
+		  JLabel samplesLabel = new JLabel("Samples");
+		  samplesField = new JTextField();
+		  samplesField.setEditable(true);
+		  samplesField.setColumns(5);
+		samplesField.setText(Integer.toString(this.graph.getSamples()));
+
+		  JPanel sidePanel = new JPanel();
+		  sidePanel.setLayout(new GridLayout(0, 1));
+		  sidePanel.add(windowLabel);
+		  sidePanel.add(windowField);
+		  sidePanel.add(samplesLabel);
+		  sidePanel.add(samplesField);
+
+		  dataField = new JTextField("0000ms");
+		  dataField.setEditable(false);
+		  dataField.setForeground(Color.black);
+		  dataField.setBackground(getBackground());
+		  averageField = new JTextField("0000ms");
+		  averageField.setEditable(false);
+		  averageField.setForeground(Color.blue);
+		  averageField.setBackground(getBackground());
+
+		  JPanel showPanel = new JPanel();
+		  showPanel.setLayout(new GridLayout(0, 1));
+		  showPanel.setBorder(BorderFactory.createEmptyBorder(0, 5, 0, 0));
+		  showPanel.add(dataField);
+		  showPanel.add(averageField);
+
+		  setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
+		  setLayout(new BorderLayout());
+		  add(sidePanel, BorderLayout.WEST);
+		  add(graphScrollPanel, BorderLayout.CENTER);
+		  add(showPanel, BorderLayout.EAST);
+	 }
+
+	 public synchronized void add(SampleResult sampleResult) {
+		long sample = sampleResult.getTime();
+		  int average = this.graph.add(sample);
+
+		  dataField.setText(sample + "ms");
+		  averageField.setText(average + "ms");
+
+		  repaint();
+	 }
+
+	 public synchronized void clear() {
+
+		try {
+				windowField.setText(Integer.toString(this.graph.setWindowSize(Integer.parseInt(windowField.getText()))));
+		  } catch (Exception ignored) {};
+
+		  try {
+				samplesField.setText(Integer.toString(this.graph.setSamples(Integer.parseInt(samplesField.getText()))));
+		  } catch (Exception ignored) {};
+
+		  this.graph.clear();
+
+		  dataField.setText("0000ms");
+		  averageField.setText("0000ms");
+
+		  repaint();
+	 }
+
+	 public String toString() {
+		  return "Show the samples analysys as windowed dot plots";
+	 }
+
+	 public JPanel getControlPanel() {
+	return this;
+	 }
+
+	 public Image getImage() {
+	Image result = graph.createImage(graph.getWidth(), graph.getHeight());
+	graph.paintComponent(result.getGraphics());
+
+	return result;
+	 }
+}
diff --git a/jakarta-jmeter/src/core/CVS/Entries b/jakarta-jmeter/src/core/CVS/Entries
new file mode 100644
index 0000000..7509378
--- /dev/null
+++ b/jakarta-jmeter/src/core/CVS/Entries
@@ -0,0 +1,2 @@
+/MANIFEST/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D/org////
diff --git a/jakarta-jmeter/src/core/CVS/Repository b/jakarta-jmeter/src/core/CVS/Repository
new file mode 100644
index 0000000..9850075
--- /dev/null
+++ b/jakarta-jmeter/src/core/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core
diff --git a/jakarta-jmeter/src/core/CVS/Root b/jakarta-jmeter/src/core/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/CVS/Tag b/jakarta-jmeter/src/core/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/CVS/Entries b/jakarta-jmeter/src/core/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/core/org/CVS/Repository b/jakarta-jmeter/src/core/org/CVS/Repository
new file mode 100644
index 0000000..4220d07
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org
diff --git a/jakarta-jmeter/src/core/org/CVS/Root b/jakarta-jmeter/src/core/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/CVS/Tag b/jakarta-jmeter/src/core/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/CVS/Entries b/jakarta-jmeter/src/core/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/core/org/apache/CVS/Repository b/jakarta-jmeter/src/core/org/apache/CVS/Repository
new file mode 100644
index 0000000..3d98991
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache
diff --git a/jakarta-jmeter/src/core/org/apache/CVS/Root b/jakarta-jmeter/src/core/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/CVS/Tag b/jakarta-jmeter/src/core/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..bba5b7d
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Entries
@@ -0,0 +1,22 @@
+/JMeter.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/NewDriver.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/ProxyAuthenticator.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/help.txt/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D/assertions////
+D/config////
+D/control////
+D/engine////
+D/exceptions////
+D/functions////
+D/gui////
+D/images////
+D/junit////
+D/reporters////
+D/resources////
+D/samplers////
+D/save////
+D/testelement////
+D/threads////
+D/timers////
+D/util////
+D/visualizers////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..534d357
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/JMeter.java b/jakarta-jmeter/src/core/org/apache/jmeter/JMeter.java
new file mode 100644
index 0000000..6f4922a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/JMeter.java
@@ -0,0 +1,381 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter;
+
+import java.awt.event.ActionEvent;
+import java.io.File;
+import java.io.FileInputStream;
+import java.net.Authenticator;
+
+import org.apache.avalon.excalibur.cli.CLArgsParser;
+import org.apache.avalon.excalibur.cli.CLOption;
+import org.apache.avalon.excalibur.cli.CLOptionDescriptor;
+import org.apache.avalon.excalibur.cli.CLUtil;
+import org.apache.jmeter.engine.RemoteJMeterEngine;
+import org.apache.jmeter.engine.RemoteJMeterEngineImpl;
+import org.apache.jmeter.engine.StandardJMeterEngine;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.action.ActionRouter;
+import org.apache.jmeter.gui.action.CheckDirty;
+import org.apache.jmeter.gui.tree.JMeterTreeListener;
+import org.apache.jmeter.gui.tree.JMeterTreeModel;
+import org.apache.jmeter.gui.util.ComponentUtil;
+import org.apache.jmeter.reporters.ResultCollector;
+import org.apache.jmeter.save.SaveService;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.ListedHashTree;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class JMeter {
+
+	private final static int PROPFILE_OPT = 'p';
+	private final static int TESTFILE_OPT = 't';
+	private final static int LOGFILE_OPT = 'l';
+	private final static int NONGUI_OPT = 'n';
+	protected static final int HELP_OPT = 'h';
+	protected static final int VERSION_OPT = 'v';
+	protected static final int SERVER_OPT = 's';
+	protected static final int PROXY_HOST = 'H';
+	protected static final int PROXY_PORT = 'P';
+	protected static final int PROXY_USERNAME = 'u';
+	protected static final int PROXY_PASSWORD = 'a';
+
+	/**
+	 *  Define the understood options. Each CLOptionDescriptor contains:
+	 * - The "long" version of the option. Eg, "help" means that "--help" will
+	 * be recognised. 
+	 * - The option flags, governing the option's argument(s).
+	 * - The "short" version of the option. Eg, 'h' means that "-h" will be
+	 * recognised.
+	 * - A description of the option.
+	 */
+	protected static final CLOptionDescriptor[] options =
+		new CLOptionDescriptor[] {
+			new CLOptionDescriptor(
+				"help",
+				CLOptionDescriptor.ARGUMENT_DISALLOWED,
+				HELP_OPT,
+				"print this message and exit"),
+			new CLOptionDescriptor(
+				"version",
+				CLOptionDescriptor.ARGUMENT_DISALLOWED,
+				VERSION_OPT,
+				"print the version information and exit"),
+			new CLOptionDescriptor(
+				"propfile",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				PROPFILE_OPT,
+				"the jmeter property file to use"),
+			new CLOptionDescriptor(
+				"testfile",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				TESTFILE_OPT,
+				"the jmeter test(.jmx) file to run"),
+			new CLOptionDescriptor(
+				"logfile",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				LOGFILE_OPT,
+				"the file to log samples to"),
+			new CLOptionDescriptor(
+				"logfile",
+				CLOptionDescriptor.ARGUMENT_DISALLOWED,
+				NONGUI_OPT,
+				"run JMeter in nongui mode"),
+			new CLOptionDescriptor(
+				"server",
+				CLOptionDescriptor.ARGUMENT_DISALLOWED,
+				SERVER_OPT,
+				"run the JMeter server"),
+			new CLOptionDescriptor(
+				"proxyHost",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				PROXY_HOST,
+				"Set a proxy server for JMeter to use"),
+			new CLOptionDescriptor(
+				"proxyPort",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				PROXY_PORT,
+				"Set proxy server port for JMeter to use"),
+			new CLOptionDescriptor(
+				"username",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				PROXY_USERNAME,
+				"Set username for proxy server that JMeter is to use"),
+			new CLOptionDescriptor(
+				"password",
+				CLOptionDescriptor.ARGUMENT_REQUIRED,
+				PROXY_PASSWORD,
+				"Set password for proxy server that JMeter is to use"),
+			};
+
+	public JMeter() {
+	}
+
+	/**
+	 * Starts up JMeter in GUI mode
+	 */
+	public void startGui() throws IllegalUserActionException {
+
+		JMeterTreeModel treeModel = new JMeterTreeModel();
+		JMeterTreeListener treeLis = new JMeterTreeListener(treeModel);
+		treeLis.setActionHandler(ActionRouter.getInstance());
+		GuiPackage guiPack = GuiPackage.getInstance(treeLis, treeModel);
+		org.apache.jmeter.gui.MainFrame main =
+			new org.apache.jmeter.gui.MainFrame(
+				ActionRouter.getInstance(),
+				treeModel,
+				treeLis);
+		main.setTitle("Apache JMeter");
+		main.setIconImage(JMeterUtils.getImage("jmeter.jpg").getImage());
+		ComponentUtil.centerComponentInWindow(main, 80);
+		main.show();
+		ActionRouter.getInstance().actionPerformed(
+			new ActionEvent(main, 1, CheckDirty.ADD_ALL));
+	}
+
+	/**
+	 * Takes the command line arguments and uses them to determine how to startup JMeter.
+	 */
+	public void start(String[] args) {
+		
+		CLArgsParser parser = new CLArgsParser(args, options);
+		if (null != parser.getErrorString()) {
+			System.err.println("Error: " + parser.getErrorString());
+			return;
+		}
+		try {
+			initializeProperties(parser);
+			setProxy(parser);
+			if (parser.getArgumentById(VERSION_OPT) != null) {
+				System.out.println(
+					"Apache JMeter, Copyright (c) 2002 The Apache Software Foundation");
+				System.out.println("Version " + JMeterUtils.getJMeterVersion());
+			} else if (parser.getArgumentById(HELP_OPT) != null) {
+				System.out.println(
+					JMeterUtils.getResourceFileAsText("org/apache/jmeter/help.txt"));
+			} else if (parser.getArgumentById(SERVER_OPT) != null) {
+				startServer();
+			} else if (parser.getArgumentById(NONGUI_OPT) == null) {
+				startGui();
+			} else {
+				startNonGui(
+					parser.getArgumentById(TESTFILE_OPT),
+					parser.getArgumentById(LOGFILE_OPT));
+			}
+		} catch (IllegalUserActionException e) {
+			System.out.println(e.getMessage());
+			System.out.println("Incorrect Usage");
+			System.out.println(CLUtil.describeOptions(options).toString());
+		}
+	}
+
+	/**
+	 * Sets a proxy server for the JVM if the command line arguments are specified.
+	 */
+	private void setProxy(CLArgsParser parser) throws IllegalUserActionException {
+		if(parser.getArgumentById(PROXY_USERNAME) != null)
+		{
+			if(parser.getArgumentById(PROXY_PASSWORD) != null)
+			{
+				Authenticator.setDefault(new ProxyAuthenticator(
+						parser.getArgumentById(PROXY_USERNAME).getArgument(),
+						parser.getArgumentById(PROXY_PASSWORD).getArgument()));
+			}
+			else
+			{
+				Authenticator.setDefault(new ProxyAuthenticator(
+						parser.getArgumentById(PROXY_USERNAME).getArgument(),
+						""));
+			}
+		}
+		if (parser.getArgumentById(PROXY_HOST) != null
+			&& parser.getArgumentById(PROXY_PORT) != null) {
+			System.setProperty(
+				"http.proxyHost",
+				parser.getArgumentById(PROXY_HOST).getArgument());
+			System.setProperty(
+				"https.proxyHost",
+				parser.getArgumentById(PROXY_HOST).getArgument());
+			System.setProperty(
+				"http.proxyPort",
+				parser.getArgumentById(PROXY_PORT).getArgument());
+			System.setProperty(
+				"https.proxyPort",
+				parser.getArgumentById(PROXY_PORT).getArgument());
+		} else if (
+			parser.getArgumentById(PROXY_HOST) != null
+				|| parser.getArgumentById(PROXY_PORT) != null) {
+			throw new IllegalUserActionException(
+				JMeterUtils.getResString("proxy_cl_error"));
+		}
+	}
+
+	private void initializeProperties(CLArgsParser parser) {
+		if (parser.getArgumentById(PROPFILE_OPT) != null) {
+			JMeterUtils.getProperties(parser.getArgumentById(PROPFILE_OPT).getArgument());
+		} else {
+			JMeterUtils.getProperties(NewDriver.getJMeterDir() +
+				File.separator + "bin" + File.separator + "jmeter.properties");
+		}
+		JMeterUtils.setJMeterHome(NewDriver.getJMeterDir());
+	}
+
+	public void startServer() {
+		try {
+			RemoteJMeterEngine engine = new RemoteJMeterEngineImpl();
+			while (true) {
+				Thread.sleep(Long.MAX_VALUE);
+			}
+		} catch (Exception ex) {
+			ex.printStackTrace();
+		}
+	}
+
+	public void startNonGui(CLOption testFile, CLOption logFile)
+		throws IllegalUserActionException {
+		JMeter driver = new JMeter();
+		if (testFile == null) {
+			throw new IllegalUserActionException();
+		}
+		if (logFile == null) {
+			driver.run(testFile.getArgument(), null);
+		} else {
+			driver.run(testFile.getArgument(), logFile.getArgument());
+		}
+	}
+
+	private void run(String testFile, String logFile) {
+		FileInputStream reader = null;
+		try {
+			File f = new File(testFile);
+			if (!f.exists() || !f.isFile()) {
+				println("Could not open " + testFile);
+				return;
+			}
+
+			reader = new FileInputStream(f);
+
+			ListedHashTree tree = SaveService.loadSubTree(reader);
+			if(logFile != null)
+			{
+				ResultCollector logger = new ResultCollector();
+				logger.setFilename(logFile);
+				tree.add(tree.getArray()[0],logger);
+			}
+			tree.add(tree.getArray()[0],new ListenToTest());			
+			println("Created the tree successfully");
+			StandardJMeterEngine engine = new StandardJMeterEngine();
+			engine.configure(tree);
+			println("Starting the test");
+			engine.runTest();
+
+		} catch (Exception e) {
+			System.out.println("Error in NonGUIDriver" + e.getMessage());
+			e.printStackTrace();
+		}
+	}
+	
+	/**
+	 * Listen to test and exit program after test completes, after a 5 second delay to give listeners
+	 * a chance to close out their files.
+	 */
+	private class ListenToTest implements TestListener,Runnable
+	{
+		public void testEnded(String host)
+		{
+		}
+		
+		public void testEnded()
+		{
+			Thread stopSoon = new Thread(this);
+			stopSoon.start();			
+		}
+		
+		public void testStarted(String host)
+		{
+		}
+		
+		public void testStarted()
+		{
+			System.out.println(JMeterUtils.getResString("running_test"));
+		}
+		
+		/**
+		 * This is a hack to allow listeners a chance to close their files.  Must implement 
+		 * a queue for sample responses tied to the engine, and the engine won't deliver testEnded
+		 * signal till all sample responses have been delivered.  Should also improve performance of
+		 * remote JMeter testing.
+		 */
+		public void run()
+		{
+			try {
+				Thread.sleep(5000);
+			} catch(InterruptedException e) {
+			}
+			System.exit(0);
+		}
+	}
+
+	private static void println(String str) {
+		System.out.println(str);
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/NewDriver.java b/jakarta-jmeter/src/core/org/apache/jmeter/NewDriver.java
new file mode 100644
index 0000000..8d4b7af
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/NewDriver.java
@@ -0,0 +1,186 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter;
+
+import java.io.File;
+import java.io.FilenameFilter;
+import java.io.IOException;
+import java.lang.reflect.Method;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.net.URLClassLoader;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.StringTokenizer;
+
+
+
+
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    March 13, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public class NewDriver
+{
+	private static URLClassLoader loader;	
+	private static String jmDir;
+	
+
+	
+	static {
+		List jars = new LinkedList();
+		String cp = System.getProperty("java.class.path");
+		
+		//Find JMeter home dir
+		StringTokenizer tok = new StringTokenizer(cp, File.pathSeparator);
+		if (tok.countTokens() == 1) {
+			File jar = new File(tok.nextToken());
+			try {
+				jmDir = jar.getCanonicalFile().getParentFile().getParent();
+			} catch (IOException e) {
+ 			}
+ 		}
+ 		else
+ 		{
+ 			File userDir = new File(System.getProperty("user.dir"));
+			jmDir = userDir.getAbsoluteFile().getParent();
+ 		}
+ 		
+		StringBuffer classpath = new StringBuffer();
+		File[] libDirs = new File[]{new File(jmDir+File.separator+"lib"),
+				new File(jmDir+File.separator+"lib"+File.separator+"ext")};
+		for(int a = 0;a < libDirs.length;a++)
+		{
+			File[] libJars = libDirs[a].listFiles(new FilenameFilter() {
+			public boolean accept(File dir,String name) {
+				if(name.endsWith(".jar"))
+					return true;
+				return false;
+			}});
+			for(int i = 0;i < libJars.length;i++)
+			{
+				try
+				{
+					jars.add(new URL("file","",libJars[i].getPath()));
+					classpath.append(System.getProperty("path.separator"));
+					classpath.append(libJars[i].getPath());
+				}
+				catch(MalformedURLException e)
+				{
+					e.printStackTrace();
+				}
+			}
+		}
+		
+		System.setProperty("java.class.path",System.getProperty("java.class.path")+classpath.toString());
+		loader = new URLClassLoader((URL[])jars.toArray(new URL[0]));
+		try {
+			loader.loadClass("org.apache.jmeter.gui.GuiPackage");
+			loader.loadClass("org.apache.jmeter.gui.JMeterFileFilter");
+			loader.loadClass("org.apache.jmeter.gui.MainFrame");
+			loader.loadClass("org.apache.jmeter.gui.action.ActionRouter");
+			loader.loadClass("org.apache.jmeter.gui.action.CheckDirty");
+			loader.loadClass("org.apache.jmeter.gui.tree.JMeterTreeListener");
+			loader.loadClass("org.apache.jmeter.gui.tree.JMeterTreeModel");
+			loader.loadClass("org.apache.jmeter.gui.util.ComponentUtil");
+			loader.loadClass("org.apache.jmeter.util.JMeterUtils");
+			loader.loadClass("javax.xml.parsers.SAXParserFactory");
+			loader.loadClass("org.apache.xerces.jaxp.SAXParserFactoryImpl");
+		
+		} catch(ClassNotFoundException e) {
+			e.printStackTrace();
+		}
+	}
+	
+	public static String getJMeterDir()
+	{
+		return jmDir;
+	}
+	
+	private NewDriver(String[] args)
+	{
+		
+	}
+
+	/************************************************************
+	 *  The main program for the NewDriver class
+	 *
+	 *@param  args  The command line arguments
+	 ***********************************************************/
+	public static void main(String[] args)
+	{	
+		Thread.currentThread().setContextClassLoader(loader);
+		if (System.getProperty("log4j.configuration") == null)
+		{
+			File conf = new File(jmDir, "bin" + File.separator + "log4j.conf");
+			System.setProperty("log4j.configuration", "file:" + conf);
+		}
+		
+			try {
+				Class JMeter = loader.loadClass("org.apache.jmeter.JMeter");
+				Object instance = JMeter.newInstance();
+				Method startup = JMeter.getMethod("start",new Class[]{(new String[0]).getClass()});
+				startup.invoke(instance,new Object[]{args});
+				
+			} catch(Exception e) {
+				e.printStackTrace();
+			} 		
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/ProxyAuthenticator.java b/jakarta-jmeter/src/core/org/apache/jmeter/ProxyAuthenticator.java
new file mode 100644
index 0000000..e1692c3
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/ProxyAuthenticator.java
@@ -0,0 +1,77 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter;
+
+import java.net.Authenticator;
+import java.net.PasswordAuthentication;
+
+/**
+ * @author Dion MCMURTRIE
+ *
+ * Provides JMeter the ability to use proxy servers that require username and password
+ */
+public class ProxyAuthenticator extends Authenticator {
+
+    private String userName, password;
+
+    protected PasswordAuthentication getPasswordAuthentication() {
+        return new PasswordAuthentication(userName, password.toCharArray());
+    }
+
+    public ProxyAuthenticator(String userName, String password) {
+        this.userName = userName;
+        this.password = password;
+    }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/Assertion.java b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/Assertion.java
new file mode 100644
index 0000000..4458e35
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/Assertion.java
@@ -0,0 +1,83 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.assertions;
+
+import org.apache.jmeter.samplers.SampleResult;
+
+
+/**
+ * <p>An Assertion checks a SampleResult wether it fulfills the necessary
+ * conditions to be called a successful Sample. The resulting
+ * success-status can be obtained from a corresponding AssertionResult.</p>
+	 *
+ * <p>E.g.: If A web-response doesn't contain a needed expression it would be
+ * considered a failure.</p>
+	 *
+ * @version $Revision: 1.1 $, $Date: 2002/08/11 19:24:42 $
+ */
+public interface Assertion
+	{
+
+	/************************************************************
+	 *  Returns the AssertionResult-object encapsulating information
+	 *  about the success or failure of the assertion.
+	 *
+	 *@param  response The SampleResult containing informations about the Sample (duration, success...).
+	 *
+	 *@return The AssertionResult containing the information about success or failure.
+	 ***********************************************************/
+	public AssertionResult getResult(SampleResult response);
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/AssertionResult.java b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/AssertionResult.java
new file mode 100644
index 0000000..9584f17
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/AssertionResult.java
@@ -0,0 +1,110 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.assertions;
+
+import java.io.*;
+
+import org.apache.avalon.framework.configuration.*;
+
+/**
+ * Title:        Jakarta-JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class AssertionResult implements Serializable {
+
+	private boolean failure;
+	private boolean error;
+	private String failureMessage;
+
+	public AssertionResult()
+	{
+	}
+
+	public boolean isFailure()
+	{
+		return failure;
+	}
+
+	public boolean isError()
+	{
+		return error;
+	}
+
+	public String getFailureMessage()
+	{
+		return failureMessage;
+	}
+
+	public void setError(boolean e)
+	{
+		error = e;
+	}
+
+	public void setFailure(boolean f)
+	{
+		failure = f;
+	}
+
+	public void setFailureMessage(String message)
+	{
+		failureMessage = message;
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Entries
new file mode 100644
index 0000000..ed12904
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Entries
@@ -0,0 +1,3 @@
+/Assertion.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/AssertionResult.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Repository
new file mode 100644
index 0000000..6dec8e7
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/assertions
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/AbstractAssertionGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/AbstractAssertionGui.java
new file mode 100644
index 0000000..e4c6f45
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/AbstractAssertionGui.java
@@ -0,0 +1,33 @@
+package org.apache.jmeter.assertions.gui;
+
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.TestElement;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public abstract class AbstractAssertionGui extends AbstractJMeterGuiComponent
+{
+
+  public JPopupMenu createPopupMenu()
+  {
+	 return MenuFactory.getDefaultAssertionMenu();
+  }
+
+  public Collection getMenuCategories()
+  {
+	 return Arrays.asList(new String[]{MenuFactory.ASSERTIONS});
+  }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Entries
new file mode 100644
index 0000000..7b2076f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/AbstractAssertionGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Repository
new file mode 100644
index 0000000..4c0b06c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/assertions/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Entries
new file mode 100644
index 0000000..f0fc18c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Entries
@@ -0,0 +1,6 @@
+/ConfigElement.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/ConfigTestElement.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/ExtensionsFileFilter.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/Modifier.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/ResponseBasedModifier.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Repository
new file mode 100644
index 0000000..7f4a3b2
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/config
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/ConfigElement.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/ConfigElement.java
new file mode 100644
index 0000000..0dcc379
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/ConfigElement.java
@@ -0,0 +1,102 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config;
+
+import java.util.*;
+
+/************************************************************
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    March 13, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public interface ConfigElement extends Cloneable
+{
+
+	/************************************************************
+	 *  Gets a property of the config element. Object getProperty(String key); Sets
+	 *  a property of the config element. void putProperty(String key,Object
+	 *  value); Get the names of all valid properties for this config element.
+	 *  Collection getPropertyNames();
+	 *
+	 *  This allows config elements to combine and give a "layered" effect. for
+	 *  example, say there are two HTTPConfigElements, which have properties for
+	 *  domain, path, method, and parameters. If element A has everything filled
+	 *  in, but null for domain, and element B is added, which has only domain
+	 *  filled in, then after adding B to A, A will have the domain from B. If A
+	 *  already had a domain, then the correct behavior is for A to ignore the
+	 *  addition of element B.
+	 *
+	 *@param  config  The feature to be added to the ConfigElement attribute
+	 ***********************************************************/
+	void addConfigElement(ConfigElement config);
+
+	/************************************************************
+	 *  If your config element expects to be modified in the process of a test run,
+	 *  and you want those modifications to carry over from sample to sample (as in
+	 *  a cookie manager - you want to save all cookies that gets set throughout
+	 *  the test), then return true for this method. You config element will not be
+	 *  cloned for each sample. If your config elements are more static in nature,
+	 *  return false. If in doubt, return false;
+	 *
+	 *@return    Description of the Returned Value
+	 ***********************************************************/
+	public boolean expectsModification();
+
+	Object clone();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/ConfigTestElement.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/ConfigTestElement.java
new file mode 100644
index 0000000..3580e3a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/ConfigTestElement.java
@@ -0,0 +1,37 @@
+package org.apache.jmeter.config;
+import org.apache.jmeter.testelement.*;
+import org.apache.jmeter.testelement.TestElement;
+import java.io.Serializable;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:42 $
+ *@version   1.0
+ ***************************************/
+
+public class ConfigTestElement extends AbstractTestElement implements Serializable
+{
+
+	public final static String USERNAME = "ConfigTestElement.username";
+	public final static String PASSWORD = "ConfigTestElement.password";
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ConfigTestElement() { }
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param parm1  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement parm1)
+	{
+		if(parm1 instanceof ConfigTestElement)
+		{
+			mergeIn(parm1);
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/ExtensionsFileFilter.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/ExtensionsFileFilter.java
new file mode 100644
index 0000000..4bece1e
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/ExtensionsFileFilter.java
@@ -0,0 +1,133 @@
+/*
+ * Copyright(c) 2000 Soltima, Inc.
+ * Soltima Wireless Publishing Platform (WPP)
+ *
+ * @author S.Coleman
+ */
+package org.apache.jmeter.config;
+
+import javax.swing.filechooser.FileFilter;
+import java.util.ArrayList;
+import java.io.File;
+
+/**
+ * This FileFilter allows for a list of file extensions
+ * to be set that it will filter on. This design was taken
+ * from the ExampleFileFilter used in
+ * <a
+ href="http://java.sun.com/docs/books/tutorial/uiswing/components/filechooser.html">How to Use File Choosers</a>,
+ * a section in <em>The Java Tutorial</em>.
+ *
+ * Here is an example of how to use the file filter for JMX files,
+ * that have the .jmx extension.
+ * <pre>
+ *      ExtensionsFileFilter filter = new ExtensionsFileFilter();
+ *      filter.addExtension("jmx");
+ *      filter.setDescription("JMeter (*.jmx)");
+ *      FileChooser fileChooser = new FileChooser();
+ *      fileChooser.setFileFilter(fileFilter);
+ * </pre>
+ */
+public class ExtensionsFileFilter extends FileFilter
+{
+    /**
+     * A description of the extensions being filtered on.
+     */
+    private String mDescription = "";
+
+    /**
+     * The list of extensions being filtered on.
+     */
+    private ArrayList acceptableExtensions = new ArrayList(3);
+
+    /**
+     * Default Constructor.
+     */
+    public ExtensionsFileFilter()
+    {
+    }
+
+    /**
+     * Add an extension to the list of extensions to filter on.
+     *
+     * @param pExtension The extension to add.
+     */
+    public void addExtension(String pExtension)
+    {
+        acceptableExtensions.add(pExtension);
+    }
+
+    /**
+     * Removes an extension from the list of extensions to filter on.
+     *
+     * @param pExtension The extension to remove.
+     */
+    public void removeExtension(String pExtension)
+    {
+        acceptableExtensions.remove(pExtension);
+    }
+
+    /**
+     * Set the description of the extensions being filtered on.
+     *
+     * @param pDescription The detailed description of the extensions being filtered on.
+     */
+    public void setDescription(String pDescription)
+    {
+        mDescription = pDescription;
+    }
+
+    /**
+     * Returns a descriptive string detailing the file extensions being filtered.
+     *
+     * @return The description of the extensions being filtered.
+     * @see javax.swing.filechooser.FileFilter#getDescription()
+     */
+    public String getDescription()
+    {
+        return mDescription;
+    }
+
+    /**
+     * Determines whether to accept the passed File or not.
+     *
+     * @param pFile The file to check whether we should accept or not.
+     * @return true if the file is accepted, false if not.
+     */
+    public boolean accept(File pFile)
+    {
+        // Always accept directories or the user will not be able to navigate
+        // around the file system.
+        if (pFile.isDirectory())
+        {
+            return true;
+        }
+        if (acceptableExtensions.contains(getExtension(pFile)) == true)
+        {
+            return true;
+        }
+
+        return false;
+    }
+
+    /**
+     * Finds the file extension for the passed File. If there
+     * is no extension then an empty string is returned.
+     *
+     * @param pFile The file to find the extension of.
+     */
+    private String getExtension(File pFile)
+    {
+        String name = pFile.getName();
+        int index = name.lastIndexOf('.');
+        if (index == -1 || index == name.length())
+        {
+            return "";
+        }
+        else
+        {
+            return name.substring(index + 1);
+        }
+    }
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/Modifier.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/Modifier.java
new file mode 100644
index 0000000..29d98ba
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/Modifier.java
@@ -0,0 +1,18 @@
+package org.apache.jmeter.config;
+
+/**
+ * Title:        Jakarta-JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+import org.apache.jmeter.samplers.Sampler;
+
+public interface Modifier
+{
+
+	public boolean modifyEntry(Sampler Sampler);
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/ResponseBasedModifier.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/ResponseBasedModifier.java
new file mode 100644
index 0000000..2066623
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/ResponseBasedModifier.java
@@ -0,0 +1,17 @@
+package org.apache.jmeter.config;
+
+/**
+ * Title:        Jakarta-JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+import org.apache.jmeter.samplers.*;
+
+public interface ResponseBasedModifier
+{
+	public boolean modifyEntry(Sampler sampler,SampleResult responseText);
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractConfigGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractConfigGui.java
new file mode 100644
index 0000000..8a53b3b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractConfigGui.java
@@ -0,0 +1,100 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.config.gui;
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:42 $
+ *@version   1.0
+ ***************************************/
+
+public abstract class AbstractConfigGui extends AbstractJMeterGuiComponent
+{
+
+  
+    
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		return MenuFactory.getDefaultConfigElementMenu();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return Arrays.asList(new String[]{MenuFactory.CONFIG_ELEMENTS});
+	}
+
+	
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractModifierGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractModifierGui.java
new file mode 100644
index 0000000..12b976a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractModifierGui.java
@@ -0,0 +1,34 @@
+package org.apache.jmeter.config.gui;
+
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.TestElement;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public abstract class AbstractModifierGui extends AbstractJMeterGuiComponent
+{
+
+
+  public JPopupMenu createPopupMenu()
+  {
+	 return MenuFactory.getDefaultModifierMenu();
+  }
+
+  public Collection getMenuCategories()
+  {
+	 return Arrays.asList(new String[]{MenuFactory.MODIFIERS});
+  }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractResponseBasedModifierGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractResponseBasedModifierGui.java
new file mode 100644
index 0000000..d9c97b5
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/AbstractResponseBasedModifierGui.java
@@ -0,0 +1,31 @@
+package org.apache.jmeter.config.gui;
+
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.util.MenuFactory;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public abstract class AbstractResponseBasedModifierGui extends AbstractJMeterGuiComponent
+{
+
+  public JPopupMenu createPopupMenu()
+  {
+	 return MenuFactory.getDefaultResponseBasedModifierMenu();
+  }
+
+  public Collection getMenuCategories()
+  {
+	 return Arrays.asList(new String[]{MenuFactory.RESPONSE_BASED_MODIFIERS});
+  }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Entries
new file mode 100644
index 0000000..7bbded6
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Entries
@@ -0,0 +1,4 @@
+/AbstractConfigGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/AbstractModifierGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/AbstractResponseBasedModifierGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Repository
new file mode 100644
index 0000000..6478e2a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/config/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Entries
new file mode 100644
index 0000000..00986eb
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Entries
@@ -0,0 +1,3 @@
+/Controller.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/NoEntryException.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Repository
new file mode 100644
index 0000000..a0bedca
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/control
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/Controller.java b/jakarta-jmeter/src/core/org/apache/jmeter/control/Controller.java
new file mode 100644
index 0000000..e92d187
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/Controller.java
@@ -0,0 +1,95 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control;
+import java.util.*;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.samplers.Sampler;
+
+/****************************************
+ * This interface will typically be used in the following manner:
+ *
+ * Controller controller;  //gets initialized
+ * while(!controller.isDone() && controller.hasNext())
+ * {
+ *    Sampler sampler = controller.next();
+ *    return sampler;
+ * }
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:42 $
+ *@version   1.0
+ ***************************************/
+public interface Controller extends TestElement
+{
+	/**
+	 * Delivers the next Sampler.
+	 */
+	public Sampler next();
+
+	/**
+	 * Indicates whether the Controller has another Sampler to deliver during the
+	 * current test iteration.
+	 */
+	public boolean hasNext();
+
+	/**
+	 * Indicates whether the Controller is done delivering Samplers for the rest
+	 * of the test.
+	 */
+	public boolean isDone();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/NoEntryException.java b/jakarta-jmeter/src/core/org/apache/jmeter/control/NoEntryException.java
new file mode 100644
index 0000000..07a3861
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/NoEntryException.java
@@ -0,0 +1,72 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.control;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class NoEntryException extends Exception
+{
+
+	public NoEntryException()
+	{
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/AbstractControllerGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/AbstractControllerGui.java
new file mode 100644
index 0000000..289b2af
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/AbstractControllerGui.java
@@ -0,0 +1,41 @@
+package org.apache.jmeter.control.gui;
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:42 $
+ *@version   1.0
+ ***************************************/
+
+public abstract class AbstractControllerGui extends AbstractJMeterGuiComponent
+{
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return Arrays.asList(new String[]{MenuFactory.CONTROLLERS});
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		return MenuFactory.getDefaultControllerMenu();
+	}
+
+	}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Entries
new file mode 100644
index 0000000..07854b8
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Entries
@@ -0,0 +1,4 @@
+/AbstractControllerGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/TestPlanGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+/WorkBenchGui.java/1.1/Sun Aug 11 19:24:42 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Repository
new file mode 100644
index 0000000..00123c4
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/control/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/TestPlanGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/TestPlanGui.java
new file mode 100644
index 0000000..5dfc846
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/TestPlanGui.java
@@ -0,0 +1,143 @@
+package org.apache.jmeter.control.gui;
+import java.awt.BorderLayout;
+import java.util.Collection;
+
+import javax.swing.BorderFactory;
+import javax.swing.JCheckBox;
+import javax.swing.JMenu;
+import javax.swing.JPanel;
+import javax.swing.JPopupMenu;
+import javax.swing.JTextArea;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.threads.gui.ThreadGroupGui;
+import org.apache.jmeter.util.JMeterUtils;
+
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:42 $
+ *@version   1.0
+ ***************************************/
+
+public class TestPlanGui extends AbstractJMeterGuiComponent
+{
+	JCheckBox functionalMode;
+	ArgumentsPanel argsPanel;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public TestPlanGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		JMenu addMenu = new JMenu(JMeterUtils.getResString("Add"));
+		addMenu.add(MenuFactory.makeMenuItem(new ThreadGroupGui().getStaticLabel(),
+				ThreadGroupGui.class.getName(), "Add"));
+		addMenu.add(MenuFactory.makeMenu(MenuFactory.LISTENERS,"Add"));
+		addMenu.add(MenuFactory.makeMenu(MenuFactory.CONFIG_ELEMENTS,"Add"));
+		addMenu.add(MenuFactory.makeMenu(MenuFactory.ASSERTIONS,"Add"));
+		addMenu.add(MenuFactory.makeMenu(MenuFactory.MODIFIERS,"Add"));
+		addMenu.add(MenuFactory.makeMenu(MenuFactory.RESPONSE_BASED_MODIFIERS,"Add"));
+		addMenu.add(MenuFactory.makeMenu(MenuFactory.TIMERS,"Add"));
+		pop.add(addMenu);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		TestPlan tp = new TestPlan();
+		tp.setProperty(TestElement.GUI_CLASS, this.getClass().getName());
+		tp.setProperty(TestElement.TEST_CLASS, TestPlan.class.getName());
+		tp.setName(getName());
+		tp.setFunctionalMode(functionalMode.isSelected());
+		tp.setUserDefinedVariables((Arguments)argsPanel.createTestElement());
+		return tp;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("Test Plan");
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		functionalMode.setSelected(((AbstractTestElement)el).getPropertyAsBoolean(TestPlan.FUNCTIONAL_MODE));
+		if(el.getProperty(TestPlan.USER_DEFINED_VARIABLES) != null)
+		{
+			argsPanel.configure((Arguments)el.getProperty(TestPlan.USER_DEFINED_VARIABLES));
+		}
+	}
+	
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	protected JPanel getVariablePanel()
+	{
+		argsPanel = new ArgumentsPanel(JMeterUtils.getResString("user_defined_variables"));
+
+		return argsPanel;
+	}
+
+	private void init() {
+		this.setLayout(new BorderLayout(10,10));
+		this.setBorder(BorderFactory.createEmptyBorder(5,10,5,5));
+		this.add(getNamePanel(),BorderLayout.NORTH);
+		JPanel southPanel = new JPanel(new BorderLayout());
+		functionalMode = new JCheckBox(JMeterUtils.getResString("functional_mode"));
+		southPanel.add(functionalMode,BorderLayout.NORTH);
+		JTextArea explain = new JTextArea(JMeterUtils.getResString("functional_mode_explanation"));
+		explain.setColumns(30);
+		explain.setRows(10);
+		explain.setBackground(this.getBackground());
+		southPanel.add(explain,BorderLayout.CENTER);
+		add(getVariablePanel(),BorderLayout.CENTER);
+		add(southPanel,BorderLayout.SOUTH);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/WorkBenchGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/WorkBenchGui.java
new file mode 100644
index 0000000..abfdcf8
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/control/gui/WorkBenchGui.java
@@ -0,0 +1,198 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.control.gui;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import javax.swing.text.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.testelement.WorkBench;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:42 $
+ *@version   1.0
+ ***************************************/
+
+public class WorkBenchGui extends JPanel implements JMeterGUIComponent
+{
+	NamePanel namePanel;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public WorkBenchGui()
+	{
+		namePanel = new NamePanel();
+		setName(getStaticLabel());
+		init();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		namePanel.setName(name);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		WorkBench wb = new WorkBench();
+		wb.setProperty(TestElement.NAME, namePanel.getName());
+		wb.setProperty(TestElement.GUI_CLASS, this.getClass().getName());
+		wb.setProperty(TestElement.TEST_CLASS, wb.getClass().getName());
+		return wb;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param element  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement element)
+	{
+		namePanel.configure(element);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		JPopupMenu menu = new JPopupMenu();
+		JMenu addMenu = MenuFactory.makeMenus(new String[]{MenuFactory.CONTROLLERS,
+				MenuFactory.SAMPLERS, MenuFactory.CONFIG_ELEMENTS,
+				MenuFactory.NON_TEST_ELEMENTS}, JMeterUtils.getResString("Add"),
+				"Add");
+		menu.add(addMenu);
+		MenuFactory.addEditMenu(menu, false);
+		MenuFactory.addFileMenu(menu);
+		return menu;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("workbench");
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("workbench_title"));
+
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(namePanel);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Entries
new file mode 100644
index 0000000..b5b29c0
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Entries
@@ -0,0 +1,11 @@
+/ClientJMeterEngine.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/ConvertListeners.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/JMeterEngine.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/JMeterEngineException.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/LagDetector.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/PreCompiler.java/1.2/Tue Aug 13 18:17:50 2002//Tv1_7_3
+/RemoteJMeterEngine.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/RemoteJMeterEngineImpl.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/StandardJMeterEngine.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/TreeCloner.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Repository
new file mode 100644
index 0000000..80c5e18
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/engine
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/ClientJMeterEngine.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/ClientJMeterEngine.java
new file mode 100644
index 0000000..78c4e6b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/ClientJMeterEngine.java
@@ -0,0 +1,173 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.engine;
+import java.net.MalformedURLException;
+import java.rmi.Naming;
+import java.rmi.NotBoundException;
+import java.rmi.RemoteException;
+
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.SearchByClass;
+
+
+/************************************************************
+ *  !ToDo (Class description)
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:43 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+public class ClientJMeterEngine implements JMeterEngine
+{
+	RemoteJMeterEngine remote;
+	ListedHashTree test;
+	SearchByClass testListeners;
+	ConvertListeners sampleListeners;
+	private String host;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  host                       !ToDo (Parameter description)
+	 *@exception  MalformedURLException  !ToDo (Exception description)
+	 *@exception  NotBoundException      !ToDo (Exception description)
+	 *@exception  RemoteException        !ToDo (Exception description)
+	 ***********************************************************/
+	public ClientJMeterEngine(String host)
+			 throws MalformedURLException, NotBoundException, RemoteException
+	{
+		this((RemoteJMeterEngine)Naming.lookup("//" + host + "/JMeterEngine"));
+		this.host = host;
+	}
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  remote  !ToDo (Parameter description)
+	 ***********************************************************/
+	public ClientJMeterEngine(RemoteJMeterEngine remote)
+	{
+		this.remote = remote;
+	}
+	
+	protected ListedHashTree getTestTree()
+	{
+		return test;
+	}
+
+	public void configure(ListedHashTree testTree)
+	{
+		test = testTree;
+	}
+	
+	public void setHost(String host)
+	{
+		this.host = host;
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void runTest()
+	{
+		testListeners = new SearchByClass(TestListener.class);
+		getTestTree().traverse(testListeners);
+		sampleListeners = new ConvertListeners();
+		getTestTree().traverse(sampleListeners);
+		try
+		{
+			remote.setHost(host);
+			remote.configure(test);
+			remote.runTest();
+		}
+		catch(Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void stopTest()
+	{
+		try
+		{
+			remote.stopTest();
+		}
+		catch(Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void reset()
+	{
+		try
+		{
+			remote.reset();
+		}
+		catch(Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/ConvertListeners.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/ConvertListeners.java
new file mode 100644
index 0000000..e2b2340
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/ConvertListeners.java
@@ -0,0 +1,80 @@
+package org.apache.jmeter.engine;
+
+import java.rmi.RemoteException;
+import java.util.Iterator;
+
+import org.apache.jmeter.samplers.RemoteSampleListener;
+import org.apache.jmeter.samplers.RemoteSampleListenerImpl;
+import org.apache.jmeter.samplers.Remoteable;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.RemoteListenerWrapper;
+import org.apache.jmeter.samplers.RemoteSampleListenerWrapper;
+import org.apache.jmeter.samplers.RemoteTestListenerWrapper;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.ListedHashTreeVisitor;
+import org.apache.jmeter.threads.ThreadGroup;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class ConvertListeners implements ListedHashTreeVisitor {
+
+	/**
+	 * @see ListedHashTreeVisitor#addNode(Object, ListedHashTree)
+	 */
+	public void addNode(Object node, ListedHashTree subTree) {
+		if(node instanceof ThreadGroup)
+			{
+				System.out.println("num threads = "+((ThreadGroup)node).getNumThreads());
+			}
+		Iterator iter = subTree.list().iterator();
+		while(iter.hasNext())
+		{
+			Object item = iter.next();
+			if(item instanceof ThreadGroup)
+			{
+				System.out.println("num threads = "+((ThreadGroup)item).getNumThreads());
+			}
+			if(item instanceof Remoteable && (item instanceof TestListener || item instanceof SampleListener))
+			{
+				try {
+					RemoteSampleListener rtl = new RemoteSampleListenerImpl(item);
+					if(item instanceof TestListener && item instanceof SampleListener)
+					{
+						RemoteListenerWrapper wrap = new RemoteListenerWrapper(rtl);
+						subTree.replace(item,wrap);
+					}
+					else if(item instanceof TestListener)
+					{
+						RemoteTestListenerWrapper wrap = new RemoteTestListenerWrapper(rtl);
+						subTree.replace(item,wrap);
+					}
+					else
+					{
+						RemoteSampleListenerWrapper wrap = new RemoteSampleListenerWrapper(rtl);
+						subTree.replace(item,wrap);
+					}
+				} catch(RemoteException e) {
+					e.printStackTrace();
+				}
+			}
+		}
+	}
+
+	/**
+	 * @see ListedHashTreeVisitor#subtractNode()
+	 */
+	public void subtractNode() {
+	}
+
+	/**
+	 * @see ListedHashTreeVisitor#processPath()
+	 */
+	public void processPath() {
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/JMeterEngine.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/JMeterEngine.java
new file mode 100644
index 0000000..b81659c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/JMeterEngine.java
@@ -0,0 +1,80 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.engine;
+
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.util.ListedHashTree;
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:43 $
+ *@version    1.0
+ ***********************************************************/
+
+public interface JMeterEngine
+{
+
+	void configure(ListedHashTree testPlan);
+
+	void runTest() throws JMeterEngineException;
+
+	void stopTest();
+
+	void reset();
+	
+	void setHost(String host);
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/JMeterEngineException.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/JMeterEngineException.java
new file mode 100644
index 0000000..d59e89c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/JMeterEngineException.java
@@ -0,0 +1,23 @@
+package org.apache.jmeter.engine;
+
+import java.io.Serializable;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class JMeterEngineException extends Exception implements Serializable {
+	
+	public JMeterEngineException()
+	{
+		super();
+	}
+	
+	public JMeterEngineException(String msg)
+	{
+		super(msg);
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/LagDetector.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/LagDetector.java
new file mode 100644
index 0000000..c276c29
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/LagDetector.java
@@ -0,0 +1,136 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.engine;
+
+/************************************************************
+ *  Description of the Class
+ *
+ *@author     default
+ *@created    March 13, 2001
+ ***********************************************************/
+public class LagDetector extends Thread
+{
+
+	private long incr = MAX_SLEEP / DIV;
+	private long totalLag;
+	private int count;
+	private boolean running;
+	public final static long MAX_SLEEP = 500;
+
+	private final static long DIV = 3;
+
+	/************************************************************
+	 *  Constructor for the LagDetector object
+	 ***********************************************************/
+	public LagDetector()
+	{
+	}
+
+	/************************************************************
+	 *  Gets the AveLag attribute of the LagDetector object
+	 *
+	 *@return    The AveLag value
+	 ***********************************************************/
+	public float getAveLag()
+	{
+		return (float)((float)totalLag / (float)count);
+	}
+
+	/************************************************************
+	 *  Gets the LagRatio attribute of the LagDetector object
+	 *
+	 *@return    The LagRatio value
+	 ***********************************************************/
+	public float getLagRatio()
+	{
+		return ((float)totalLag / (float)count) / incr;
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public void stopRunning()
+	{
+		running = false;
+	}
+
+	/************************************************************
+	 *  Main processing method for the LagDetector object
+	 ***********************************************************/
+	public void run()
+	{
+		running = true;
+		long totalTime = 0;
+		long time;
+		totalLag = 0;
+		count = 0;
+		while(running)
+		{
+			time = System.currentTimeMillis();
+			try
+			{
+				currentThread().sleep(incr);
+			}
+			catch(Exception e)
+			{
+			}
+			time = System.currentTimeMillis() - time;
+			totalLag += time - incr;
+			count++;
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/PreCompiler.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/PreCompiler.java
new file mode 100644
index 0000000..27e44bc
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/PreCompiler.java
@@ -0,0 +1,131 @@
+package org.apache.jmeter.engine;
+
+import java.util.Collection;
+import java.util.Iterator;
+import java.util.Map;
+
+import org.apache.jmeter.functions.CompoundFunction;
+import org.apache.jmeter.functions.InvalidVariableException;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.ListedHashTreeVisitor;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class PreCompiler implements ListedHashTreeVisitor {
+	
+	private Map userDefinedVariables;
+	private CompoundFunction masterFunction = new CompoundFunction();
+	private boolean testValid = true;
+	
+	public PreCompiler()
+	{
+	}
+
+	/**
+	 * @see ListedHashTreeVisitor#addNode(Object, ListedHashTree)
+	 */
+	public void addNode(Object node, ListedHashTree subTree) {
+		if(node instanceof TestPlan)
+		{
+			masterFunction.setUserDefinedVariables(((TestPlan)node).getUserDefinedVariables());
+		}
+		if(node instanceof TestElement)
+		{
+			replaceValues((TestElement)node);
+		}
+	}
+
+	/**
+	 * @see ListedHashTreeVisitor#subtractNode()
+	 */
+	public void subtractNode() {
+	}
+
+	/**
+	 * @see ListedHashTreeVisitor#processPath()
+	 */
+	public void processPath() {
+	}
+	
+	private void replaceValues(TestElement el)
+	{
+		Iterator iter = el.getPropertyNames().iterator();
+		while(iter.hasNext())
+		{
+			String propName = (String)iter.next();
+			Object propValue = el.getProperty(propName);
+			if(propValue instanceof String)
+			{
+				Object newValue = getNewValue((String)propValue);
+				el.setProperty(propName,newValue);
+			}
+			else if(propValue instanceof TestElement)
+			{
+				replaceValues((TestElement)propValue);
+			}
+			else if(propValue instanceof Collection)
+			{
+				el.setProperty(propName,replaceValues((Collection)propValue));
+			}
+		}
+	}
+	
+	private Object getNewValue(String propValue)
+	{
+		Object newValue = propValue;
+				masterFunction.clear();
+				try {
+					masterFunction.setParameters((String)propValue);
+				} catch(InvalidVariableException e) {
+					testValid = false;
+				}
+				if(masterFunction.hasFunction())
+				{
+					newValue = masterFunction.getFunction();
+				}
+				else if(masterFunction.hasStatics())
+				{
+					newValue = masterFunction.getStaticSubstitution();
+				}
+				return newValue;
+	}
+	
+	private Collection replaceValues(Collection values)
+	{
+		Collection newColl = null;
+		try {
+			newColl = (Collection)values.getClass().newInstance();
+		} catch(Exception e) {
+			e.printStackTrace();
+			return values;
+		} 
+		Iterator iter = values.iterator();
+		while(iter.hasNext())
+		{
+			Object val = iter.next();
+			if(val instanceof TestElement)
+			{
+				replaceValues((TestElement)val);
+			}
+			else if(val instanceof String)
+			{
+				val = getNewValue((String)val);
+			}
+			else if(val instanceof Collection)
+			{
+				val = replaceValues((Collection)val);
+			}
+			newColl.add(val);
+		}
+		return newColl;
+	}
+	
+	
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/RemoteJMeterEngine.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/RemoteJMeterEngine.java
new file mode 100644
index 0000000..e808ec8
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/RemoteJMeterEngine.java
@@ -0,0 +1,79 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.engine;
+
+import java.rmi.Remote;
+import java.rmi.RemoteException;
+
+import org.apache.jmeter.util.ListedHashTree;
+
+/************************************************************
+ *  Description of the Interface
+ *
+ *@author     default
+ *@created    March 13, 2001
+ ***********************************************************/
+public interface RemoteJMeterEngine extends Remote
+{
+	void configure(ListedHashTree testTree) throws RemoteException;
+
+	void runTest() throws RemoteException,JMeterEngineException;
+
+	void stopTest() throws RemoteException;
+
+	void reset() throws RemoteException;
+	
+	void setHost(String host) throws RemoteException;
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/RemoteJMeterEngineImpl.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/RemoteJMeterEngineImpl.java
new file mode 100644
index 0000000..6a36f66
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/RemoteJMeterEngineImpl.java
@@ -0,0 +1,162 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.engine;
+import java.net.InetAddress;
+import java.rmi.Naming;
+import java.rmi.RemoteException;
+
+import org.apache.jmeter.util.ListedHashTree;
+
+
+/************************************************************
+ *  Description of the Class
+ *
+ *@author     default
+ *@created    March 13, 2001
+ ***********************************************************/
+public class RemoteJMeterEngineImpl
+		 extends java.rmi.server.UnicastRemoteObject
+		 implements RemoteJMeterEngine
+{
+	JMeterEngine backingEngine;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@exception  RemoteException  Description of Exception
+	 ***********************************************************/
+	public RemoteJMeterEngineImpl() throws RemoteException
+	{
+		try
+		{
+			backingEngine = new StandardJMeterEngine(InetAddress.getLocalHost().getHostName());
+			Naming.rebind("JMeterEngine", this);
+		}
+		catch(Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+	
+	public void setHost(String host)
+	{
+		backingEngine.setHost(host);
+	}
+
+	/************************************************************
+	 *  Adds a feature to the ThreadGroup attribute of the RemoteJMeterEngineImpl
+	 *  object
+	 *
+	 *@param  tGroup               The feature to be added to the ThreadGroup
+	 *      attribute
+	 *@exception  RemoteException  Description of Exception
+	 ***********************************************************/
+	public void configure(ListedHashTree testTree) throws RemoteException
+	{
+		backingEngine.configure(testTree);
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@exception  RemoteException  Description of Exception
+	 ***********************************************************/
+	public void runTest() throws RemoteException,JMeterEngineException
+	{
+		backingEngine.runTest();
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@exception  RemoteException  Description of Exception
+	 ***********************************************************/
+	public void reset() throws RemoteException
+	{
+		backingEngine.reset();
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@exception  RemoteException  Description of Exception
+	 ***********************************************************/
+	public void stopTest() throws RemoteException
+	{
+		backingEngine.stopTest();
+	}
+
+	/************************************************************
+	 *  The main program for the RemoteJMeterEngineImpl class
+	 *
+	 *@param  args  The command line arguments
+	 ***********************************************************/
+	public static void main(String[] args)
+	{
+		try
+		{
+			RemoteJMeterEngine engine = new RemoteJMeterEngineImpl();
+			while(true)
+			{
+				Thread.sleep(Long.MAX_VALUE);
+			}
+		}
+		catch(Exception ex)
+		{
+			ex.printStackTrace();
+		}
+
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/StandardJMeterEngine.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/StandardJMeterEngine.java
new file mode 100644
index 0000000..453b20c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/StandardJMeterEngine.java
@@ -0,0 +1,260 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.engine;
+
+import java.io.PrintWriter;
+import java.io.StringWriter;
+import java.util.HashSet;
+import java.util.Iterator;
+import java.util.Set;
+
+import org.apache.jmeter.reporters.ResultCollector;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.threads.JMeterThread;
+import org.apache.jmeter.threads.JMeterThreadMonitor;
+import org.apache.jmeter.threads.JMeterVariables;
+import org.apache.jmeter.threads.TestCompiler;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.SearchByClass;
+
+/************************************************************
+ *  !ToDo (Class description)
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:43 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+public class StandardJMeterEngine implements JMeterEngine,JMeterThreadMonitor
+{
+	Set allThreads;
+	boolean running = false;
+	ListedHashTree test;
+	SearchByClass testListeners;
+	String host = null;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public StandardJMeterEngine()
+	{
+		allThreads = new HashSet();
+	}
+
+	public StandardJMeterEngine(String host)
+	{
+		this();
+		this.host = host;
+	}
+
+	public void configure(ListedHashTree testTree)
+	{
+		test = testTree;
+	}
+	
+	public void setHost(String host)
+	{
+		this.host = host;
+	}
+
+	protected ListedHashTree getTestTree()
+	{
+		return test;
+	}
+	
+	protected void compileTree()
+	{
+		PreCompiler compiler = new PreCompiler();
+		getTestTree().traverse(compiler);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void runTest() throws JMeterEngineException
+	{
+		try
+		{
+			System.out.println("Running the test!");
+			running = true;
+			compileTree();
+			SearchByClass searcher = new SearchByClass(ThreadGroup.class);
+			testListeners = new SearchByClass(TestListener.class);
+			setMode();
+			getTestTree().traverse(testListeners);
+			getTestTree().traverse(searcher);
+			TestCompiler.initialize();
+			//for each thread group, generate threads
+			// hand each thread the sampler controller
+			// and the listeners, and the timer
+			JMeterThread[] threads;
+			Iterator iter = searcher.getSearchResults().iterator();
+			if(iter.hasNext())
+			{
+				notifyTestListenersOfStart();
+			}
+			JMeterVariables.initialize();
+			while(iter.hasNext())
+			{
+				ThreadGroup group = (ThreadGroup)iter.next();
+				threads = new JMeterThread[group.getNumThreads()];
+				for(int i = 0;running && i < threads.length; i++)
+				{
+					threads[i] = new JMeterThread(cloneTree(searcher.getSubTree(group)),this);
+					threads[i].setInitialDelay((int)(((float)(group.getRampUp() * 1000) /
+							(float)group.getNumThreads()) * (float)i));
+					threads[i].setThreadName(group.getName()+"-"+(i+1));
+					Thread newThread = new Thread(threads[i]);
+					newThread.setName(group.getName()+"-"+(i+1));
+					allThreads.add(threads[i]);
+					newThread.start();
+				}
+			}
+		}
+		catch(Exception err)
+		{
+			stopTest();
+			StringWriter string = new StringWriter();
+			PrintWriter writer = new PrintWriter(string);
+			err.printStackTrace(writer);
+			throw new JMeterEngineException(string.toString());
+		}
+	}
+	
+	protected void setMode()
+	{
+		SearchByClass testPlan = new SearchByClass(TestPlan.class);
+		getTestTree().traverse(testPlan);
+		Object[] plan = testPlan.getSearchResults().toArray();
+		ResultCollector.enableFunctionalMode(((TestPlan)plan[0]).isFunctionalMode());
+	}
+
+	protected void notifyTestListenersOfStart()
+	{
+		Iterator iter = testListeners.getSearchResults().iterator();
+		while(iter.hasNext())
+		{
+			if(host == null)
+			{
+				((TestListener)iter.next()).testStarted();
+			}
+			else
+			{
+				((TestListener)iter.next()).testStarted(host);
+			}
+		}
+	}
+
+
+	protected void notifyTestListenersOfEnd()
+	{
+		Iterator iter = testListeners.getSearchResults().iterator();
+		while(iter.hasNext())
+		{
+			if(host == null)
+			{
+				((TestListener)iter.next()).testEnded();
+			}
+			else
+			{
+				((TestListener)iter.next()).testEnded(host);
+			}
+		}
+	}
+
+	private ListedHashTree cloneTree(ListedHashTree tree)
+	{
+		TreeCloner cloner = new TreeCloner();
+		tree.traverse(cloner);
+		return cloner.getClonedTree();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void reset()
+	{
+		if(running)
+		{
+			stopTest();
+			running = false;
+		}
+	}
+
+	public void threadFinished(JMeterThread thread)
+	{
+		allThreads.remove(thread);
+		if(allThreads.size() == 0)
+		{
+			notifyTestListenersOfEnd();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void stopTest()
+	{
+		running = false;
+		Iterator iter = new HashSet(allThreads).iterator();
+		while(iter.hasNext())
+		{
+			JMeterThread item = (JMeterThread)iter.next();
+			item.stop();
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/engine/TreeCloner.java b/jakarta-jmeter/src/core/org/apache/jmeter/engine/TreeCloner.java
new file mode 100644
index 0000000..5f6053d
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/engine/TreeCloner.java
@@ -0,0 +1,86 @@
+package org.apache.jmeter.engine;
+
+import java.util.LinkedList;
+
+import org.apache.jmeter.testelement.PerThreadClonable;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.ListedHashTreeVisitor;
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.config.Arguments;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public class TreeCloner implements ListedHashTreeVisitor
+{
+	ListedHashTree newTree;
+	LinkedList objects = new LinkedList();
+
+	public TreeCloner()
+	{
+		newTree = new ListedHashTree();
+	}
+	public void addNode(Object node,ListedHashTree subTree)
+	{
+		if(node instanceof PerThreadClonable)
+		{
+			node = ((PerThreadClonable)node).clone();
+			newTree.add(objects,node);
+		}
+		else
+		{
+			newTree.add(objects,node);
+		}
+		objects.addLast(node);
+	}
+	public void subtractNode()
+	{
+		objects.removeLast();
+	}
+
+	public ListedHashTree getClonedTree()
+	{
+		return newTree;
+	}
+
+	public void processPath()
+	{
+	}
+
+	public static class Test extends junit.framework.TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testCloning() throws Exception
+		{
+			ListedHashTree original = new ListedHashTree();
+			GenericController controller = new GenericController();
+			controller.setName("controller");
+			Arguments args = new Arguments();
+			args.setName("args");
+			original.add(controller,args);
+			TreeCloner cloner = new TreeCloner();
+			original.traverse(cloner);
+			ListedHashTree newTree = cloner.getClonedTree();
+			this.assertTrue(original != newTree);
+			assertEquals(original.size(),newTree.size());
+			assertEquals(original.get(original.getArray()[0]).size(),
+					newTree.get(newTree.getArray()[0]).size());
+			assertTrue(original.getArray()[0] != newTree.getArray()[0]);
+			assertEquals(((GenericController)original.getArray()[0]).getName(),
+					((GenericController)newTree.getArray()[0]).getName());
+			assertSame(original.get(original.getArray()[0]).getArray()[0],
+							newTree.get(newTree.getArray()[0]).getArray()[0]);
+		}
+
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Entries
new file mode 100644
index 0000000..24f32a0
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Entries
@@ -0,0 +1,2 @@
+/IllegalUserActionException.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Repository
new file mode 100644
index 0000000..a9c68fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/exceptions
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/IllegalUserActionException.java b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/IllegalUserActionException.java
new file mode 100644
index 0000000..67fcb98
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/exceptions/IllegalUserActionException.java
@@ -0,0 +1,23 @@
+package org.apache.jmeter.exceptions;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class IllegalUserActionException extends Exception
+{
+
+	public IllegalUserActionException()
+	{
+	}
+
+	public IllegalUserActionException(String name)
+	{
+		super(name);
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/AbstractFunction.java b/jakarta-jmeter/src/core/org/apache/jmeter/functions/AbstractFunction.java
new file mode 100644
index 0000000..7c7e22f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/AbstractFunction.java
@@ -0,0 +1,63 @@
+package org.apache.jmeter.functions;
+
+import java.net.URLDecoder;
+import java.util.Collection;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.StringTokenizer;
+
+import org.apache.jmeter.functions.*;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public abstract class AbstractFunction implements Function {
+
+	/**
+	 * @see Function#execute(SampleResult, Sampler)
+	 */
+	abstract public String execute(SampleResult previousResult, Sampler currentSampler) 
+			throws InvalidVariableException;
+
+	/**
+	 * @see Function#setParameters(String)
+	 */
+	abstract public void setParameters(String parameters) throws InvalidVariableException;
+
+	/**
+	 * @see Function#getReferenceKey()
+	 */
+	abstract public String getReferenceKey();	
+	
+	/**
+	 * Provides a convenient way to parse the given argument string into a collection of
+	 * individual arguments.  Takes care of splitting the string based on commas, generates
+	 * blank strings for values between adjacent commas, and decodes the string using URLDecoder.
+	 */
+	protected Collection parseArguments(String params)
+	{
+		StringTokenizer tk = new StringTokenizer(params,",",true);
+		List arguments = new LinkedList();
+		String previous = "";
+		while(tk.hasMoreTokens())
+		{
+			String arg = tk.nextToken();
+			if(arg.equals(",") && previous.equals(","))
+			{
+				arguments.add("");
+			}
+			else if(!arg.equals(","))
+			{
+				arguments.add(URLDecoder.decode(arg));
+			}
+			previous = arg;
+		}
+		return arguments;
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Entries
new file mode 100644
index 0000000..c925cee
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Entries
@@ -0,0 +1,5 @@
+/AbstractFunction.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/CompoundFunction.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/Function.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/InvalidVariableException.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Repository
new file mode 100644
index 0000000..5e4035a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/functions
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/CompoundFunction.java b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CompoundFunction.java
new file mode 100644
index 0000000..0ce1d67
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/CompoundFunction.java
@@ -0,0 +1,416 @@
+package org.apache.jmeter.functions;
+
+import java.net.URLEncoder;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Map;
+
+import junit.framework.TestCase;
+
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.testelement.PerThreadClonable;
+import org.apache.jmeter.threads.JMeterVariables;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.oro.text.perl.Perl5Util;
+import org.apache.oro.text.regex.PatternCompiler;
+import org.apache.oro.text.regex.Perl5Compiler;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class CompoundFunction implements Function
+{
+	
+	private JMeterVariables threadVars;
+	
+	static Map functions = new HashMap();
+	private Map definedValues;
+	private boolean hasFunction,hasStatics;
+	private String staticSubstitution;
+	private static Perl5Util util = new Perl5Util();
+	
+	static private PatternCompiler compiler = new Perl5Compiler();
+	static private String variableSplitter = "/(\\${)/"; 
+	
+	LinkedList compiledComponents = new LinkedList();
+	
+	static
+	{
+		try
+		{
+			List classes = ClassFinder.findClassesThatExtend(new Class[]{Function.class},true);
+			Iterator iter = classes.iterator();
+			while(iter.hasNext())
+			{
+					Function tempFunc = (Function)Class.forName((String)iter.next()).newInstance();
+					functions.put(tempFunc.getReferenceKey(),tempFunc.getClass());
+			}
+		}
+		catch(Exception err)
+		{
+			err.printStackTrace();
+		}
+	}
+	
+	public CompoundFunction()
+	{
+		hasFunction = false;
+		hasStatics = false;
+		definedValues = new HashMap();
+		staticSubstitution = "";
+	}
+
+	/**
+	 * @see Function#execute(SampleResult)
+	 */
+	public String execute(SampleResult previousResult,Sampler currentSampler) {
+		if(compiledComponents == null || compiledComponents.size() == 0)
+		{
+			return "";
+		}
+		StringBuffer results = new StringBuffer();
+		Iterator iter = compiledComponents.iterator();
+		while(iter.hasNext())
+		{
+			Object item = iter.next();
+			if(item instanceof Function)
+			{
+				try {
+					results.append(((Function)item).execute(previousResult,currentSampler));
+				} catch(InvalidVariableException e) {
+				}
+			}
+			else
+			{
+				results.append(item);
+			}
+		}
+		return results.toString();
+	}
+	
+	public CompoundFunction getFunction()
+	{
+		CompoundFunction func = new CompoundFunction();
+		func.compiledComponents = (LinkedList)compiledComponents.clone();
+		return func;
+	}
+	
+	public List getArgumentDesc()
+	{
+		return new LinkedList();
+	}
+	
+	public void clear()
+	{
+		hasFunction = false;
+		hasStatics = false;
+		compiledComponents.clear();
+		staticSubstitution = "";
+	}
+	
+	public void setJMeterVariables(JMeterVariables threadVars)
+	{
+		Iterator iter = compiledComponents.iterator();
+		while(iter.hasNext())
+		{
+			Object item = iter.next();
+			if(item instanceof Function)
+			{
+				((Function)item).setJMeterVariables(threadVars);
+			}
+		}
+		this.threadVars = threadVars;
+	}
+
+	/**
+	 * @see Function#setParameters(String)
+	 */
+	public void setParameters(String parameters) throws InvalidVariableException 
+	{
+		if(parameters == null || parameters.length() == 0)
+		{
+			return;
+		}
+		List components = new LinkedList();
+		util.split(components,variableSplitter,parameters);
+		Iterator iter = components.iterator();
+		String previous = "";
+		while(iter.hasNext())
+		{
+			String part = (String)iter.next();
+			int index = getFunctionEndIndex(part);
+			if(index > -1 && previous.equals("${"))
+			{
+				String function = part.substring(0,index);
+				String functionName = parseFunctionName(function);
+				if(definedValues.containsKey(functionName))
+				{
+					Object replacement = definedValues.get(functionName);
+					if(replacement instanceof Class)
+					{
+						try {
+							hasFunction = true;
+							Function func = (Function)((Class)replacement).newInstance();
+							func.setParameters(extractParams(function));
+							compiledComponents.addLast(func);
+						} catch(Exception e) {
+							e.printStackTrace();
+							throw new InvalidVariableException();
+						} 
+					}
+					else
+					{
+						hasStatics = true;
+						addStringToComponents(compiledComponents,(String)replacement);
+					}
+				}
+				else
+				{
+					addStringToComponents(compiledComponents,"${"+function+"}");
+				}
+				if((index+1) < part.length())
+				{
+					addStringToComponents(compiledComponents,part.substring(index+1));
+				}
+			}
+			else if(previous.equals("${"))
+			{
+				addStringToComponents(compiledComponents,"${");
+				addStringToComponents(compiledComponents,part);
+			}
+			else if(!part.equals("${"))
+			{
+				addStringToComponents(compiledComponents, part);
+			}
+			previous = part;
+		}
+		if(!hasFunction)
+		{
+			staticSubstitution = compiledComponents.getLast().toString();
+			if(hasStatics())
+			{
+				compiledComponents.clear();
+				hasStatics = false;
+				setParameters(staticSubstitution);
+				hasStatics = true;
+			}
+		}
+		else if(hasStatics())
+		{
+			iter = new LinkedList(compiledComponents).iterator();
+			while(iter.hasNext())
+			{
+				Object item = iter.next();
+				if(item instanceof StringBuffer)
+				{
+					CompoundFunction nestedFunc = new CompoundFunction();
+					nestedFunc.setUserDefinedVariables(new HashMap());
+					nestedFunc.setParameters(item.toString());
+					if(nestedFunc.hasFunction())
+					{
+						int index = compiledComponents.indexOf(item);
+						compiledComponents.remove(index);
+						compiledComponents.add(index,nestedFunc);
+					}
+				}
+			} 
+		}
+	}
+
+	private void addStringToComponents(LinkedList refinedComponents, String part) {
+		if(part == null || part.length() == 0)
+		{
+			return;
+		}
+		if(refinedComponents.size() == 0)
+		{
+			refinedComponents.addLast(new StringBuffer(part));
+		}
+		else
+		{
+			if(refinedComponents.getLast() instanceof StringBuffer)
+			{
+				((StringBuffer)refinedComponents.getLast()).append(part);
+			}
+			else
+			{
+				refinedComponents.addLast(new StringBuffer(part));
+			}
+		}
+	}
+	
+	private String extractParams(String function)
+	{
+		if(function.indexOf("(") > -1)
+		{
+			return function.substring(function.indexOf("(")+1,function.lastIndexOf(")"));
+		}
+		else
+		{
+			return "";
+		}
+	}
+
+	private int getFunctionEndIndex(String part) {
+		int index = part.indexOf("}");
+		return index;
+	}
+
+	private String parseFunctionName(String function) {
+		String functionName = function;
+		int parenIndex = -1;
+		if((parenIndex = function.indexOf("(")) > -1)
+		{
+			functionName = function.substring(0,parenIndex);
+		}
+		return functionName;
+	}
+	
+	public boolean hasFunction()
+	{
+		return hasFunction;
+	}
+	
+	public boolean hasStatics()
+	{
+		return hasStatics;
+	}
+	
+	public String getStaticSubstitution()
+	{
+		return staticSubstitution;
+	}
+	
+	public void setUserDefinedVariables(Map userVariables)
+	{
+		definedValues.clear();
+		definedValues.putAll(functions);
+		definedValues.putAll(userVariables);
+	}
+
+	/**
+	 * @see Function#getReferenceKey()
+	 */
+	public String getReferenceKey() {
+		return "";
+	}
+	
+	public static class Test extends TestCase
+	{
+		CompoundFunction function;
+		SampleResult result;
+		
+		public Test(String name)
+		{
+			super(name);
+		}
+		
+		public void setUp()
+		{
+			Map userDefinedVariables = new HashMap();
+			userDefinedVariables.put("my_regex",".*");
+			userDefinedVariables.put("server","jakarta.apache.org");
+			function = new CompoundFunction();
+			function.setUserDefinedVariables(userDefinedVariables);
+			result = new SampleResult();
+			result.setResponseData("<html>hello world</html>".getBytes());
+		}
+		
+		public void testParseExample1() throws Exception
+		{
+			function.setParameters("${__regexFunction(<html>(.*)</html>,$1$)}");
+			assertEquals(1,function.compiledComponents.size());
+			assertTrue(function.compiledComponents.getFirst() instanceof RegexFunction);
+			assertTrue(function.hasFunction());
+			assertTrue(!function.hasStatics());
+			assertEquals("hello world",((Function)function.compiledComponents.getFirst()).execute(result,null));
+			assertEquals("hello world",function.execute(result,null));
+		}
+		
+		public void testParseExample2() throws Exception
+		{
+			function.setParameters("It should say:${${__regexFunction("+URLEncoder.encode("<html>(.*)</html>")+",$1$)}}");
+			assertEquals(3,function.compiledComponents.size());
+			assertEquals("It should say:${",function.compiledComponents.getFirst().toString());
+			assertTrue(function.hasFunction());
+			assertTrue(!function.hasStatics());
+			assertEquals("hello world",((Function)function.compiledComponents.get(1)).execute(result,null));
+			assertEquals("}",function.compiledComponents.get(2).toString());
+			assertEquals("It should say:${hello world}",function.execute(result,null));
+			assertEquals("It should say:${<html>(.*)</html>,$1$}",function.execute(null,null));
+		}
+		
+		public void testParseExample3() throws Exception
+		{
+			function.setParameters("${__regexFunction(<html>(.*)</html>,$1$)}${__regexFunction(<html>(.*o)(.*o)(.*)</html>,$1$$3$)}");
+			assertEquals(2,function.compiledComponents.size());
+			assertTrue(function.hasFunction());
+			assertTrue(!function.hasStatics());
+			assertEquals("hello world",((Function)function.compiledComponents.get(0)).execute(result,null));
+			assertEquals("hellorld",((Function)function.compiledComponents.get(1)).execute(result,null));
+			assertEquals("hello worldhellorld",function.execute(result,null));
+			assertEquals("<html>(.*)</html>,$1$<html>(.*o)(.*o)(.*)</html>,$1$$3$",
+					function.execute(null,null));
+		}
+		
+		public void testParseExample4() throws Exception
+		{
+			function.setParameters("${non-existing function}");
+			assertEquals(1,function.compiledComponents.size());
+			assertTrue(!function.hasFunction());
+			assertTrue(!function.hasStatics());
+			assertEquals("${non-existing function}",
+					function.compiledComponents.getFirst().toString());
+			assertEquals("${non-existing function}",function.execute(result,null));
+			assertEquals("${non-existing function}",function.execute(null,null));
+		}
+		
+		public void testParseExample6() throws Exception
+		{
+			function.setParameters("${server}");
+			assertEquals(1,function.compiledComponents.size());
+			assertTrue(!function.hasFunction());
+			assertTrue(function.hasStatics());
+			assertEquals("jakarta.apache.org",function.execute(null,null));
+		}
+		
+		public void testParseExample5() throws Exception
+		{
+			function.setParameters("");
+			assertEquals(0,function.compiledComponents.size());
+			assertTrue(!function.hasFunction());
+			assertTrue(!function.hasStatics());
+		}
+		
+		public void testNestedExample1() throws Exception
+		{
+			function.setParameters("${__regexFunction(<html>(${my_regex})</html>,$1$)}${__regexFunction(<html>(.*o)(.*o)(.*)</html>,$1$$3$)}");
+			assertEquals(2,function.compiledComponents.size());
+			assertTrue(function.hasFunction());
+			assertTrue(function.hasStatics());
+			assertEquals("hello world",((Function)function.compiledComponents.get(0)).execute(result,null));
+			assertEquals("hellorld",((Function)function.compiledComponents.get(1)).execute(result,null));
+			assertEquals("hello worldhellorld",function.execute(result,null));
+			assertEquals("<html>(.*)</html>,$1$<html>(.*o)(.*o)(.*)</html>,$1$$3$",
+					function.execute(null,null));
+		}
+		
+		public void testNestedExample2() throws Exception
+		{
+			function.setParameters("${__regexFunction(<html>(${my_regex})</html>,$1$)}");
+			assertEquals(1,function.compiledComponents.size());
+			assertTrue(function.compiledComponents.getFirst() instanceof RegexFunction);
+			assertTrue(function.hasFunction());
+			assertTrue(function.hasStatics());
+			assertEquals("hello world",((Function)function.compiledComponents.getFirst()).execute(result,null));
+			assertEquals("hello world",function.execute(result,null));
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/Function.java b/jakarta-jmeter/src/core/org/apache/jmeter/functions/Function.java
new file mode 100644
index 0000000..ff2d293
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/Function.java
@@ -0,0 +1,62 @@
+package org.apache.jmeter.functions;
+
+import java.util.List;
+
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.threads.JMeterVariables;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public interface Function {
+	
+	/**
+	 * Given the previous SampleResult and the current Sampler, return
+	 * a string to use as a replacement value for the function call.
+	 * Assume "setParameter" was previously called.
+	 * 
+	 * This method must be threadsafe - multiple threads will be using
+	 * the same object.
+	 */
+	public String execute(SampleResult previousResult,Sampler currentSampler)
+			throws InvalidVariableException;
+	
+	/**
+	 * A string representing a comma-delimited list of URLEncoded arguments.
+	 * You will have to split on the comma, and decode each argument.
+	 * Extend AbstractFunction to gain access to a convenience method
+	 * that does that for you.  These parameters are used to "configure"
+	 * your function.
+	 */
+	public void setParameters(String parameters) throws InvalidVariableException;
+	
+	/**
+	 * Return the name of your function.  Convention is to prepend "__"
+	 * to the name (ie "__regexFunction")
+	 */
+	public String getReferenceKey();
+	
+	/**
+	 * Return a list of strings briefly describing each parameter
+	 * your function takes.  Please use JMeterUtils.getResString(resource_name)
+	 * to grab a resource string.  Otherwise, your help text will be
+	 * difficult to internationalize.  Add your strings to all
+	 * org.apache.jmeter.resources.*.properties files.  Do not worry
+	 * about translating - that's someone else's responsibility.
+	 * 
+	 * This list is not optional.  If you don't wish to write help, you
+	 * must at least return a List containing the correct number of
+	 * blank strings, one for each argument.
+	 */
+	public List getArgumentDesc();
+	
+	/**
+	 * A means of giving the function access to built-in JMeter data
+	 * such as iteration number, current thread name, etc
+	 */
+	public void setJMeterVariables(JMeterVariables jmv);
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/InvalidVariableException.java b/jakarta-jmeter/src/core/org/apache/jmeter/functions/InvalidVariableException.java
new file mode 100644
index 0000000..85e64c8
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/InvalidVariableException.java
@@ -0,0 +1,20 @@
+package org.apache.jmeter.functions;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class InvalidVariableException extends Exception {
+	
+	public InvalidVariableException()
+	{
+	}
+	
+	public InvalidVariableException(String msg)
+	{
+		super(msg);
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Entries
new file mode 100644
index 0000000..dae6570
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/FunctionHelper.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Repository
new file mode 100644
index 0000000..ed22e67
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/functions/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/FunctionHelper.java b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/FunctionHelper.java
new file mode 100644
index 0000000..8565797
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/functions/gui/FunctionHelper.java
@@ -0,0 +1,152 @@
+package org.apache.jmeter.functions.gui;
+
+import java.awt.BorderLayout;
+import java.awt.FlowLayout;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.io.IOException;
+import java.net.URLEncoder;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Map;
+
+import javax.swing.JButton;
+import javax.swing.JDialog;
+import javax.swing.JFrame;
+import javax.swing.JPanel;
+import javax.swing.event.ChangeEvent;
+import javax.swing.event.ChangeListener;
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.functions.Function;
+import org.apache.jmeter.gui.util.ComponentUtil;
+import org.apache.jmeter.gui.util.JLabeledChoice;
+import org.apache.jmeter.gui.util.JLabeledTextField;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class FunctionHelper extends JDialog implements 
+		ActionListener,ChangeListener
+{
+	JLabeledChoice functionList;
+	ArgumentsPanel parameterPanel;
+	JLabeledTextField cutPasteFunction;	
+	private Map functionMap = new HashMap();
+	JButton generateButton;
+	
+	public FunctionHelper()
+	{
+		super((JFrame)null,JMeterUtils.getResString("function_helper_title"),
+				false);
+		init();
+	}
+	
+	private void init()
+	{
+		parameterPanel = new ArgumentsPanel(JMeterUtils.getResString("function_params"));
+		initializeFunctionList();
+		this.getContentPane().setLayout(new BorderLayout(10,10));
+		JPanel comboPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
+		comboPanel.add(functionList);
+		this.getContentPane().add(comboPanel,BorderLayout.NORTH);
+		this.getContentPane().add(parameterPanel,BorderLayout.CENTER);
+		JPanel resultsPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
+		cutPasteFunction = new JLabeledTextField(
+				JMeterUtils.getResString("cut_paste_function"),35);
+		resultsPanel.add(cutPasteFunction);
+		generateButton = new JButton(JMeterUtils.getResString("generate"));
+		generateButton.addActionListener(this);
+		resultsPanel.add(generateButton);
+		this.getContentPane().add(resultsPanel,BorderLayout.SOUTH);
+		this.pack();
+		ComponentUtil.centerComponentInWindow(this);
+	}
+	
+	private void initializeFunctionList()
+	{
+		try {
+			List functionClasses = ClassFinder.findClassesThatExtend(
+					new Class[]{Function.class},true);
+			Iterator iter = functionClasses.iterator();
+			String[] functionNames = new String[functionClasses.size()];
+			int count = 0;
+			while(iter.hasNext())
+			{
+				Class cl = Class.forName((String)iter.next());
+				functionNames[count] = ((Function)cl.newInstance()).getReferenceKey();
+				functionMap.put(functionNames[count],cl);
+				count++;
+			}
+			functionList = new JLabeledChoice(
+					JMeterUtils.getResString("choose_function"),
+					functionNames);
+			functionList.addChangeListener(this);
+		} catch(IOException e) {
+		} catch(ClassNotFoundException e) {
+		} catch(InstantiationException e) {
+		} catch(IllegalAccessException e) {
+		}	
+	}
+	
+	public void stateChanged(ChangeEvent event)
+	{
+		try {
+			Arguments args = new Arguments();
+			Function function = (Function)((Class)functionMap.get(
+					functionList.getText())).newInstance();
+			List argumentDesc = function.getArgumentDesc();
+			Iterator iter = argumentDesc.iterator();
+			while(iter.hasNext())
+			{
+				String help = (String)iter.next();
+				args.addArgument(help,"");
+			}
+			parameterPanel.configure(args);
+			parameterPanel.revalidate();
+			getContentPane().remove(parameterPanel);
+			this.pack();
+			getContentPane().add(parameterPanel,BorderLayout.CENTER);
+			this.pack();
+			this.validate();
+			this.repaint();
+		} catch(InstantiationException e) {
+		} catch(IllegalAccessException e) {
+		}
+	}
+	
+	public void actionPerformed(ActionEvent e)
+	{
+		StringBuffer functionCall = new StringBuffer("${");
+		functionCall.append(functionList.getText());
+		Arguments args = (Arguments)parameterPanel.createTestElement();
+		if(args.getArguments().size() > 0)
+		{
+			functionCall.append("(");
+			Iterator iter = args.getArguments().iterator();
+			boolean first = true;
+			while(iter.hasNext())
+			{
+				Argument arg = (Argument)iter.next();
+				if(!first)
+				{
+					functionCall.append(",");
+				}
+				functionCall.append(URLEncoder.encode((String)arg.getValue()));
+				first = false;
+			}
+			functionCall.append(")");
+		}
+		functionCall.append("}");
+		cutPasteFunction.setText(functionCall.toString());
+	}
+	
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/AbstractJMeterGuiComponent.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/AbstractJMeterGuiComponent.java
new file mode 100644
index 0000000..2f18691
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/AbstractJMeterGuiComponent.java
@@ -0,0 +1,62 @@
+package org.apache.jmeter.gui;
+
+import java.util.Collection;
+
+import javax.swing.JPanel;
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.testelement.TestElement;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public abstract class AbstractJMeterGuiComponent
+	extends JPanel
+	implements JMeterGUIComponent {
+
+	public AbstractJMeterGuiComponent() {
+		namePanel = new NamePanel();
+		setName(getStaticLabel());
+	}
+
+	/**
+	 * @see JMeterGUIComponent#setName(String)
+	 */
+	public void setName(String name) {
+		namePanel.setName(name);
+	}
+
+	/**
+	 * @see JMeterGUIComponent#getName()
+	 */
+	public String getName() {
+		return getNamePanel().getName();
+	}
+
+	protected NamePanel getNamePanel() {
+		return namePanel;
+	}
+
+	protected NamePanel namePanel;
+	
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param element  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement element)
+	{
+		setName((String)element.getProperty(TestElement.NAME));
+	}
+
+	  protected void configureTestElement(TestElement mc)
+	{
+		mc.setProperty(TestElement.NAME, getName());
+		mc.setProperty(TestElement.GUI_CLASS, this.getClass().getName());
+		mc.setProperty(TestElement.TEST_CLASS, mc.getClass().getName());
+	}
+
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Entries
new file mode 100644
index 0000000..922aff3
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Entries
@@ -0,0 +1,14 @@
+/AbstractJMeterGuiComponent.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/GuiFactory.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/GuiPackage.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/GuiReady.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/JMeterComponentModel.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/JMeterFileFilter.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/JMeterGUIComponent.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/JMeterJListModel.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/ListDialog.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/MainFrame.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/NamePanel.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+D/action////
+D/tree////
+D/util////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Repository
new file mode 100644
index 0000000..badec9d
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiFactory.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiFactory.java
new file mode 100644
index 0000000..4abc378
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiFactory.java
@@ -0,0 +1,80 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui;
+import java.util.*;
+import javax.swing.ImageIcon;
+import javax.swing.JComponent;
+import org.apache.jmeter.control.Controller;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.testelement.WorkBench;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:43 $
+ *@version   1.0
+ ***************************************/
+
+public class GuiFactory
+{
+
+	private static Map guiComponents = new HashMap();
+	private static Map icons = new HashMap();
+
+	private GuiFactory() { }
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiPackage.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiPackage.java
new file mode 100644
index 0000000..4170c88
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiPackage.java
@@ -0,0 +1,154 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui;
+
+import java.util.HashSet;
+import java.util.Set;
+
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.gui.tree.JMeterTreeListener;
+import org.apache.jmeter.gui.tree.JMeterTreeModel;
+import org.apache.jmeter.samplers.Remoteable;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.util.ListedHashTree;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class GuiPackage
+{
+
+	private static GuiPackage guiPack;
+	private boolean dirty = false;
+
+	private GuiPackage()
+	{
+	}
+
+	private JMeterTreeModel treeModel;
+	private org.apache.jmeter.gui.MainFrame mainFrame;
+	private org.apache.jmeter.gui.tree.JMeterTreeListener treeListener;
+
+	public static GuiPackage getInstance(JMeterTreeListener listener,
+							JMeterTreeModel treeModel)
+	{
+		if(guiPack == null)
+		{
+			guiPack = new GuiPackage();
+			guiPack.setTreeListener(listener);
+			guiPack.setTreeModel(treeModel);
+		}
+		return guiPack;
+	}
+
+	public void setDirty(boolean d)
+	{
+		dirty = d;
+	}
+
+	public boolean isDirty()
+	{
+		return dirty;
+	}
+
+	public void addSubTree(ListedHashTree subTree) throws IllegalUserActionException
+	{
+		treeModel.addSubTree(subTree,treeListener.getCurrentNode());
+	}
+
+	public ListedHashTree getCurrentSubTree()
+	{
+		return treeModel.getCurrentSubTree(treeListener.getCurrentNode());
+	}
+
+	public static GuiPackage getInstance()
+	{
+		return guiPack;
+	}
+
+	public JMeterTreeModel getTreeModel()
+	{
+		return treeModel;
+	}
+
+	public void setTreeModel(JMeterTreeModel newTreeModel)
+	{
+		treeModel = newTreeModel;
+	}
+
+	public void setMainFrame(org.apache.jmeter.gui.MainFrame newMainFrame)
+	{
+		mainFrame = newMainFrame;
+	}
+
+	public org.apache.jmeter.gui.MainFrame getMainFrame()
+	{
+		return mainFrame;
+	}
+	public void setTreeListener(org.apache.jmeter.gui.tree.JMeterTreeListener newTreeListener)
+	{
+		treeListener = newTreeListener;
+	}
+	public org.apache.jmeter.gui.tree.JMeterTreeListener getTreeListener()
+	{
+		return treeListener;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiReady.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiReady.java
new file mode 100644
index 0000000..2dde0a1
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/GuiReady.java
@@ -0,0 +1,69 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface GuiReady
+{
+	Class getGuiClass();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterComponentModel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterComponentModel.java
new file mode 100644
index 0000000..30a6514
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterComponentModel.java
@@ -0,0 +1,85 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui;
+
+import java.util.*;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface JMeterComponentModel
+{
+	Class getGuiClass();
+
+	public String getName();
+
+	public void setName(String name);
+
+	//public boolean isEditable();
+
+	public Collection getAddList();
+
+	public String getClassLabel();
+
+	public void uncompile();
+
+	public void addJMeterComponent(JMeterComponentModel child);
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterFileFilter.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterFileFilter.java
new file mode 100644
index 0000000..a41c428
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterFileFilter.java
@@ -0,0 +1,107 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.gui;
+
+import java.io.*;
+import javax.swing.*;
+import javax.swing.filechooser.*;
+import java.util.Arrays;
+
+public class JMeterFileFilter extends javax.swing.filechooser.FileFilter 
+		implements java.io.FileFilter {
+	String[] exts;
+	
+	public JMeterFileFilter(String[] extensions)
+	{
+		exts = extensions;
+	}
+
+	public boolean accept(File f) {
+		boolean isAccepted = false;
+
+		if (f.isDirectory()) {
+			isAccepted = true;
+		} else {
+			if (accept(f.getName().toLowerCase())) {
+				isAccepted = true;
+			} else {
+				isAccepted = false;
+			}
+		}
+
+		return isAccepted;
+	}
+	
+	public boolean accept(String filename)
+	{
+		for(int i = 0;i < exts.length;i++)
+		{
+			if(filename.endsWith(exts[i]))
+			{
+				return true;
+			}
+		}
+		if(exts.length == 0)
+		{
+			return true;
+		}
+		return false;
+	}
+
+	public String getDescription() {
+		return "JMeter "+Arrays.asList(exts).toString();
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterGUIComponent.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterGUIComponent.java
new file mode 100644
index 0000000..c4f5206
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterGUIComponent.java
@@ -0,0 +1,74 @@
+package org.apache.jmeter.gui;
+import java.util.Collection;
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.testelement.TestElement;
+/****************************************
+ * <p>
+ *
+ * Title: Jakarta JMeter</p> <p>
+ *
+ * Description: Load testing software</p> <p>
+ *
+ * Copyright: Copyright (c) 2002</p> <p>
+ *
+ * Company: Apache Foundation</p>
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:43 $
+ *@version   1.0
+ ***************************************/
+
+public interface JMeterGUIComponent
+{
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name);
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName();
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel();
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement();
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu();
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param element  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement element);
+
+	/****************************************
+	 * This is the list of menu categories this gui component will be available
+	 * under. For instance, if this represents a Controller, then the
+	 * MenuFactory.CONTROLLERS category should be in the returned collection.
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterJListModel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterJListModel.java
new file mode 100644
index 0000000..265d3cd
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/JMeterJListModel.java
@@ -0,0 +1,69 @@
+package org.apache.jmeter.gui;
+
+import java.util.*;
+import javax.swing.*;
+
+
+/**
+ * Title:        Jakarta-JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class JMeterJListModel extends AbstractListModel
+{
+	List data;
+
+	public JMeterJListModel()
+	{
+		data = new ArrayList();
+	}
+
+	public JMeterJListModel(List data)
+	{
+		this.data = new ArrayList(data);
+	}
+
+	public void setData(List data)
+	{
+		this.data.clear();
+		this.data.addAll(data);
+		this.fireContentsChanged(this,0,data.size()-1);
+	}
+
+	public List getData()
+	{
+		return data;
+	}
+
+
+	public int getSize() {
+		if(data.size() == 0)
+		{
+			return 1;
+		}
+		return data.size();
+	}
+	public Object getElementAt(int parm1) {
+		if(parm1 == 0 && data.size() == 0)
+		{
+			return "     ";
+		}
+		return data.get(parm1);
+	}
+
+	public void addItem(Object item)
+	{
+		data.add(item);
+		this.fireContentsChanged(this,data.size()-1,data.size()-1);
+	}
+
+	public void clear()
+	{
+		data.clear();
+		this.fireContentsChanged(this,0,0);
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/ListDialog.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/ListDialog.java
new file mode 100644
index 0000000..4ac3412
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/ListDialog.java
@@ -0,0 +1,281 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.gui;
+
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import java.util.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/*************************
+ *  This class allows the user to input argument value pairs. In addition, the
+ *  value may be a list of values.
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:43 $
+ *@version    $Version: 1.0 10/14/1998$
+ ************************/
+
+public class ListDialog extends JPanel implements ActionListener, KeyListener
+{
+
+	JList input;
+
+	JLabel value;
+	JLabel name;
+	JTextField nameField;
+
+	JTextField valueField;
+
+	JButton ok, cancel;
+
+	Vector listData;
+
+
+	/*************************
+	 *  Constructor takes a label for instructions to the user, and a list of items
+	 *  to add to selectable list.
+	 *
+	 *@param  listener  ActionListener for this dialog object.
+	 ************************/
+	public ListDialog(ActionListener listener)
+	{
+		listData = new Vector();
+		name = new JLabel(JMeterUtils.getResString("name"));
+		value = new JLabel(JMeterUtils.getResString("add_value"));
+		nameField = new JTextField(10);
+		valueField = new JTextField(10);
+		valueField.addKeyListener(this);
+		GridBagLayout gridBag = new GridBagLayout();
+		GridBagConstraints c = new GridBagConstraints();
+		setLayout(gridBag);
+		c.gridx = 0;
+		c.gridy = 0;
+		c.anchor = c.EAST;
+		c.weightx = 0;
+		add(name, c.clone());
+		c.weightx = 1;
+		c.fill = c.HORIZONTAL;
+		c.gridx++;
+		c.anchor = c.WEST;
+		add(nameField, c.clone());
+		c.weightx = 0;
+		c.fill = c.NONE;
+		c.gridy++;
+		c.gridx--;
+		c.anchor = c.EAST;
+		add(value, c.clone());
+		c.weightx = 1;
+		c.fill = c.HORIZONTAL;
+		c.gridx++;
+		c.anchor = c.WEST;
+		add(valueField, c.clone());
+		input = new JList();
+		int x = 0;
+		c.fill = c.BOTH;
+		c.weightx = c.weighty = 1;
+		c.gridy++;
+		c.gridx--;
+		c.gridwidth = 2;
+		add(new JScrollPane(input), c.clone());
+		c.gridwidth = 1;
+		c.weightx = .5;
+		c.gridy++;
+		c.weighty = 0;
+		c.fill = c.NONE;
+		c.anchor = c.EAST;
+		ok = new JButton("OK");
+		cancel = new JButton("Cancel");
+		ok.setPreferredSize(cancel.getPreferredSize());
+		ok.addActionListener(listener);
+		ok.addActionListener(this);
+		cancel.addActionListener(listener);
+		add(ok, c.clone());
+		c.gridx = 1;
+		c.anchor = c.WEST;
+		add(cancel, c);
+	}
+	//end of Method
+
+
+	/*************************
+	 *  Set the items to select.
+	 *
+	 *@param  items  The new Items value
+	 ************************/
+	public void setItems(String[] items)
+	{
+
+		input.removeAll();
+
+		listData = new Vector(items.length);
+
+		for (int x = 0; x < items.length; listData.add(items[x++]))
+		{
+			;
+		}
+
+		input.setListData(listData);
+
+	}
+
+	/*************************
+	 *  Sets the Visible attribute of the ListDialog object
+	 *
+	 *@param  set  The new Visible value
+	 ************************/
+	public void setVisible(boolean set)
+	{
+		super.setVisible(set);
+		nameField.requestFocus();
+	}
+
+	/*************************
+	 *  Sets the Name attribute of the ListDialog object
+	 *
+	 *@param  label  The new Name value
+	 ************************/
+	public void setName(String label)
+	{
+		nameField.setText(label);
+	}
+
+	/*************************
+	 *  Gets the Name attribute of the ListDialog object
+	 *
+	 *@return    The Name value
+	 ************************/
+	public String getName()
+	{
+		return nameField.getText();
+	}
+
+
+	/*************************
+	 *  This method returns the item selected by the user.
+	 *
+	 *@return    List item selected by the user.
+	 ************************/
+	public String[] getItems()
+	{
+		return (String[]) listData.toArray(new String[0]);
+	}
+	//end of Method
+
+
+	/*************************
+	 *  Satisfies the ActionListener interface requirements. Catches the event
+	 *  generated when the user makes a choice and makes the window invisible and
+	 *  returns control to the parent frame.
+	 *
+	 *@param  e  ItemEvent object.
+	 ************************/
+	public void actionPerformed(ActionEvent e)
+	{
+		if (valueFieldFull())
+		{
+			addValueTextToList();
+		}
+	}
+	//end of Method
+
+	/*************************
+	 *  Description of the Method
+	 *
+	 *@param  event  Description of Parameter
+	 ************************/
+	public void keyPressed(KeyEvent event)
+	{
+	}
+
+	/*************************
+	 *  Description of the Method
+	 *
+	 *@param  event  Description of Parameter
+	 ************************/
+	public void keyReleased(KeyEvent event)
+	{
+	}
+
+	/*************************
+	 *  Description of the Method
+	 *
+	 *@param  event  Description of Parameter
+	 ************************/
+	public void keyTyped(KeyEvent event)
+	{
+		if (event.getKeyChar() == '\n' && valueFieldFull())
+		{
+			addValueTextToList();
+		}
+	}
+
+	private boolean valueFieldFull()
+	{
+		String text = valueField.getText();
+		return text != null && !text.equals("");
+	}
+
+	private void addValueTextToList()
+	{
+		listData.add(valueField.getText());
+		input.setListData(listData);
+		valueField.setText("");
+	}
+}
+//end of Method
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/MainFrame.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/MainFrame.java
new file mode 100644
index 0000000..e897946
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/MainFrame.java
@@ -0,0 +1,404 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.tree.*;
+import org.apache.jmeter.gui.action.ActionRouter;
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.gui.util.JMeterMenuBar;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.gui.action.Start;
+import org.apache.jmeter.gui.action.CheckDirty;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.samplers.Remoteable;
+import org.apache.jmeter.gui.util.ComponentUtil;
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:43 $
+ *@version   1.0
+ ***************************************/
+
+public class MainFrame extends JFrame implements TestListener,Remoteable
+{
+	JPanel all, mainPanel;
+	Box toolPanel;
+	JScrollPane treePanel;
+	JMeterMenuBar menuBar;
+	JTree tree;
+	TreeModel treeModel;
+	ActionListener actionHandler;
+	JMeterTreeListener treeListener;
+	ImageIcon runningIcon = JMeterUtils.getImage("thread.enabled.gif");
+	ImageIcon stoppedIcon = JMeterUtils.getImage("thread.disabled.gif");
+	JButton runningIndicator;
+	private boolean running;
+	int previousDragXLocation = 0;
+	int previousDragYLocation = 0;
+	private Set hosts = new HashSet();
+	JDialog stoppingMessage;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param actionHandler  !ToDo (Parameter description)
+	 *@param treeModel      !ToDo (Parameter description)
+	 *@param treeListener   !ToDo (Parameter description)
+	 ***************************************/
+	public MainFrame(ActionListener actionHandler, TreeModel treeModel, JMeterTreeListener
+			treeListener)
+	{
+		runningIndicator = new JButton(stoppedIcon);
+		runningIndicator.setMargin(new Insets(0,0,0,0));
+		runningIndicator.setBorder(BorderFactory.createEmptyBorder());
+		this.treeListener = treeListener;
+		this.actionHandler = actionHandler;
+		this.treeModel = treeModel;
+		GuiPackage.getInstance().setMainFrame(this);
+		init();
+		this.setDefaultCloseOperation(this.DO_NOTHING_ON_CLOSE);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setFileSaveEnabled(boolean enabled)
+	{
+		menuBar.setFileSaveEnabled(enabled);
+	}
+	
+	public void showStoppingMessage()
+	{
+		stoppingMessage = new JDialog(this,
+				JMeterUtils.getResString("stopping_test_title"),true);
+		JLabel stopLabel = new JLabel(JMeterUtils.getResString("stopping_test"));
+		stopLabel.setBorder(BorderFactory.createEmptyBorder(20,20,20,20));
+		stoppingMessage.getContentPane().add(stopLabel);
+		stoppingMessage.pack();
+		ComponentUtil.centerComponentInComponent(this,stoppingMessage);
+		stoppingMessage.show();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setFileLoadEnabled(boolean enabled)
+	{
+		menuBar.setFileLoadEnabled(enabled);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param menu  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditAddMenu(JMenu menu)
+	{
+		menuBar.setEditAddMenu(menu);
+	}
+
+	public void setEditMenu(JPopupMenu menu)
+	{
+		menuBar.setEditMenu(menu);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditAddEnabled(boolean enabled)
+	{
+		menuBar.setEditAddEnabled(enabled);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditRemoveEnabled(boolean enabled)
+	{
+		menuBar.setEditRemoveEnabled(enabled);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditEnabled(boolean enabled)
+	{
+		menuBar.setEditEnabled(enabled);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void closeMenu()
+	{
+		if(menuBar.isSelected())
+		{
+			MenuElement[] menuElement = menuBar.getSubElements();
+			if(menuElement != null)
+			{
+				for(int i = 0; i < menuElement.length; i++)
+				{
+					JMenu menu = (JMenu)menuElement[i];
+					if(menu.isSelected())
+					{
+						menu.setPopupMenuVisible(false);
+						menu.setSelected(false);
+						break;
+					}
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param comp  !ToDo (Parameter description)
+	 ***************************************/
+	public void setMainPanel(JComponent comp)
+	{
+		mainPanel.removeAll();
+		Rectangle rect = mainPanel.getVisibleRect();
+		Insets in = mainPanel.getInsets();
+		Dimension dim = new Dimension(((int)rect.getWidth()) - (in.right + in.left) * 2,
+				((int)rect.getHeight()) - (in.top + in.bottom) * 2);
+		Dimension min = comp.getMinimumSize();
+		if(dim.width < min.width)
+		{
+			dim.width = min.width;
+		}
+		if(dim.height < min.height)
+		{
+			dim.height = min.height;
+		}
+		comp.setPreferredSize(dim);
+		comp.validate();
+		mainPanel.add(comp);
+		mainPanel.validate();
+		mainPanel.repaint();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JTree getTree()
+	{
+		return tree;
+	}
+
+	public void testStarted(String host)
+	{
+		runningIndicator.setIcon(runningIcon);
+		menuBar.setRunning(true,host);
+	}
+
+	public void testStarted()
+	{
+		testStarted("local");
+		menuBar.setEnabled(true);
+	}
+
+	public void testEnded()
+	{
+		if(stoppingMessage != null)
+		{
+			stoppingMessage.dispose();
+			stoppingMessage = null;
+		}
+		testEnded("local");
+		menuBar.setEnabled(false);
+	}
+
+	public void testEnded(String host)
+	{
+		hosts.remove(host);
+		if(hosts.size() == 0)
+		{
+			runningIndicator.setIcon(stoppedIcon);
+		}
+		menuBar.setRunning(false,host);
+	}
+
+	private void init()
+	{
+		menuBar = new JMeterMenuBar();
+		createToolBar();
+		createMainPanel();
+		createTreePanel();
+		addThemAll();
+		addWindowListener(new WindowHappenings());
+		tree.setSelectionRow(1);
+	}
+
+	private TreeCellRenderer getCellRenderer()
+	{
+		DefaultTreeCellRenderer rend = new JMeterCellRenderer();
+		rend.setFont(new Font("Dialog", Font.PLAIN, 11));
+		return rend;
+	}
+
+	private void addThemAll()
+	{
+		this.setJMenuBar(menuBar);
+		all = new JPanel(new GridBagLayout());
+		GridBagConstraints gbc = new GridBagConstraints();
+		{
+			gbc.gridx = 0;
+			gbc.gridy = 0;
+			gbc.gridheight = 1;
+			gbc.gridwidth = 1;
+			gbc.fill = gbc.BOTH;
+			gbc.weightx = 1;
+			gbc.weighty = 0;
+			all.add(toolPanel, gbc.clone());
+		}
+		JSplitPane treeAndMain = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
+		treeAndMain.setLeftComponent(treePanel);
+		treeAndMain.setRightComponent(new JScrollPane(mainPanel));
+
+		// The setResizeWeight() method was added to JDK1.3. For now, JMeter should
+		// remain compatible with JDK1.2.
+		//treeAndMain.setResizeWeight(.2);
+
+		treeAndMain.setContinuousLayout(true);
+		{
+			gbc.gridy++;
+			gbc.weighty = 1;
+			all.add(treeAndMain, gbc.clone());
+		}
+		this.getContentPane().add(all);
+	}
+
+	private void createToolBar()
+	{
+		toolPanel = new Box(BoxLayout.X_AXIS);
+		toolPanel.add(Box.createRigidArea(new Dimension(10,15)));
+		toolPanel.add(Box.createGlue());
+		toolPanel.add(runningIndicator);
+	}
+
+	private void createTreePanel()
+	{
+		treePanel = new JScrollPane(makeTree());
+		treePanel.setMinimumSize(new Dimension(100,0));
+	}
+
+	public void drawDraggedComponent(Component dragIcon,int x,int y)
+	{
+		Dimension size = dragIcon.getPreferredSize();
+		treePanel.paintImmediately(previousDragXLocation,previousDragYLocation,size.width,size.height);
+		this.getLayeredPane().setLayer(dragIcon,400);
+		SwingUtilities.paintComponent(treePanel.getGraphics(),
+				dragIcon,treePanel,x,y,size.width,size.height);
+		previousDragXLocation = x;
+		previousDragYLocation = y;
+	}
+
+	private void createMainPanel()
+	{
+		mainPanel = new JPanel();
+		mainPanel.setLayout(new GridLayout(1, 1));
+		mainPanel.add(Box.createGlue());
+	}
+
+	private JTree makeTree()
+	{
+		tree = new JTree(this.treeModel);
+		tree.setCellRenderer(getCellRenderer());
+		treeListener.setJTree(tree);
+		tree.addTreeSelectionListener(treeListener);
+		tree.addMouseListener(treeListener);
+		tree.addMouseMotionListener(treeListener);
+		tree.addKeyListener(treeListener);
+		return tree;
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:43 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class WindowHappenings extends WindowAdapter
+	{
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param event  !ToDo (Parameter description)
+		 ***************************************/
+		public void windowClosing(WindowEvent event)
+		{
+			ActionRouter.getInstance().actionPerformed(new ActionEvent(
+					this, event.getID(), "exit"));
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/NamePanel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/NamePanel.java
new file mode 100644
index 0000000..036e826
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/NamePanel.java
@@ -0,0 +1,171 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui;
+import java.awt.FlowLayout;
+import java.util.Collection;
+
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JPopupMenu;
+import javax.swing.JTextField;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.testelement.WorkBench;
+import org.apache.jmeter.util.JMeterUtils;
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:43 $
+ *@version   1.0
+ ***************************************/
+
+public class NamePanel extends JPanel implements JMeterGUIComponent
+{
+	private JTextField nameField = new JTextField(30);
+
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public NamePanel()
+	{
+		setName(getStaticLabel());
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		super.setName(name);
+		nameField.setText(name);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param testElement  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement testElement)
+	{
+		setName((String)testElement.getProperty(TestElement.NAME));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("root");
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		WorkBench wb = new WorkBench();
+		wb.setProperty(TestElement.NAME, getName());
+		wb.setProperty(TestElement.GUI_CLASS, this.getClass().getName());
+		wb.setProperty(TestElement.TEST_CLASS, WorkBench.class.getName());
+		return wb;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return nameField.getText();
+	}
+
+	private void init()
+	{
+		this.setLayout(new FlowLayout(FlowLayout.LEFT));
+		this.add(new JLabel(JMeterUtils.getResString("name")));
+		this.add(nameField);
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AboutCommand.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AboutCommand.java
new file mode 100644
index 0000000..db11180
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AboutCommand.java
@@ -0,0 +1,149 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.Set;
+import java.util.HashSet;
+import java.util.Collections;
+import javax.swing.*;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * About Command.  It may be extended in the future to add a list of
+ * installed protocols, config options, etc.
+ *
+ * @author <a href="bloritsch@apache.org">Berin Loritsch</a>
+ * @version CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:43 $
+ */
+
+public class AboutCommand implements Command {
+    private static Set commandSet;
+    private static JDialog about;
+
+    static {
+        HashSet commands = new HashSet();
+        commands.add("about");
+        AboutCommand.commandSet = Collections.unmodifiableSet(commands);
+    }
+
+    /**
+     * Handle the "about" action by displaying the "About Apache JMeter..."
+     * dialog box.  The Dialog Box is NOT modal, because those should be avoided
+     * if at all possible.
+     */
+    public void doAction(ActionEvent e) {
+        if (e.getActionCommand().equals("about")) {
+            this.about();
+        }
+    }
+
+    /**
+     * Provide the list of Action names that are available in this command.
+     */
+    public Set getActionNames() {
+        return AboutCommand.commandSet;
+    }
+
+    /**
+     * Called by about button. Raises about dialog.  Currently the about box has
+     * the product image and the copyright notice.  The dialog box is centered
+     * over the MainFrame.
+     */
+    void about() {
+        JFrame mainFrame = GuiPackage.getInstance().getMainFrame();
+        if (about == null) {
+            about = new JDialog(mainFrame, "About Apache JMeter...", false);
+            about.addMouseListener(new MouseAdapter() {
+                public void mouseClicked(MouseEvent e) {
+                    about.setVisible(false);
+                }
+            });
+
+            JLabel jmeter = new JLabel(JMeterUtils.getImage("jmeter.jpg"));
+            JLabel copyright = new JLabel("Copyright (c) 1998-2002 The Apache Software Foundation", JLabel.CENTER);
+            JLabel rights = new JLabel("All Rights Reserved.", JLabel.CENTER);
+            JLabel version = new JLabel("Apache JMeter Version " + JMeterUtils.getJMeterVersion(), JLabel.CENTER);
+            JPanel infos = new JPanel();
+            infos.setOpaque(false);
+            infos.setLayout(new GridLayout(0, 1));
+            infos.setBorder(new EmptyBorder(5, 5, 5, 5));
+            infos.add(copyright);
+            infos.add(rights);
+            infos.add(version);
+            Container panel = about.getContentPane();
+            panel.setLayout(new BorderLayout());
+            panel.setBackground(Color.white);
+            panel.add(jmeter, BorderLayout.NORTH);
+            panel.add(infos, BorderLayout.SOUTH);
+        }
+
+        // NOTE: these lines center the about dialog in the
+        // current window. Some older Swing versions have
+        // a bug in getLocationOnScreen() and they may not
+        // make this behave properly.
+        Point p = mainFrame.getLocationOnScreen();
+        Dimension d1 = mainFrame.getSize();
+        Dimension d2 = about.getSize();
+        about.setLocation(p.x + (d1.width - d2.width) / 2, p.y + (d1.height - d2.height) / 2);
+        about.pack();
+        about.setVisible(true);
+    }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AbstractAction.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AbstractAction.java
new file mode 100644
index 0000000..ae57faf
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AbstractAction.java
@@ -0,0 +1,50 @@
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.Set;
+
+import org.apache.jmeter.engine.StandardJMeterEngine;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.ListedHashTree;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public abstract class AbstractAction implements Command {
+
+	/**
+	 * @see Command#doAction(ActionEvent)
+	 */
+	public void doAction(ActionEvent e) {
+	}
+
+	/**
+	 * @see Command#getActionNames()
+	 */
+	abstract public Set getActionNames();
+
+	protected void convertSubTree(ListedHashTree tree)
+	{
+		Iterator iter = new LinkedList(tree.list()).iterator();
+		while (iter.hasNext())
+		{
+			JMeterGUIComponent item = (JMeterGUIComponent)iter.next();
+			convertSubTree(tree.get(item));
+			TestElement testElement = item.createTestElement();
+			tree.replace(item,testElement);
+			
+		}
+	}
+
+	
+
+
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/ActionRouter.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/ActionRouter.java
new file mode 100644
index 0000000..4759361
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/ActionRouter.java
@@ -0,0 +1,175 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionListener;
+import java.awt.event.ActionEvent;
+import java.util.*;
+import java.lang.reflect.Modifier;
+
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    February 10, 2001
+ *@version    1.0
+ */
+
+public class ActionRouter implements ActionListener
+{
+	private Map commands = new HashMap();
+	private static ActionRouter router;
+	private static AddToTree add = new AddToTree();
+
+
+	private ActionRouter()
+	{
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  e  Description of Parameter
+	 */
+	public void actionPerformed(ActionEvent e)
+	{
+		try
+		{
+			Set commandObjects = (Set)commands.get(e.getActionCommand());
+			Iterator iter = commandObjects.iterator();
+			while(iter.hasNext())
+			{
+				try
+				{
+					((Command)iter.next()).doAction(e);
+				}
+				catch(Exception err)
+				{
+					err.printStackTrace();
+				}
+			}
+		}
+		catch (NullPointerException er)
+		{
+			er.printStackTrace();
+			JMeterUtils.reportErrorToUser("Sorry, this feature (" + e.getActionCommand() +
+					") not yet implemented");
+		}
+	}
+
+	private void populateCommandMap()
+	{
+		List listClasses;
+		Command command;
+		Iterator iterClasses;
+		Class commandClass;
+		try
+		{
+			listClasses = ClassFinder.findClassesThatExtend(
+					new Class[]{Class.forName("org.apache.jmeter.gui.action.Command")});
+			commands = new HashMap(listClasses.size());
+			if (listClasses.size() == 0)
+			{
+				System.out.println("!!!!!Uh-oh, didn't find any action handlers!!!!!");
+			}
+			iterClasses = listClasses.iterator();
+			while (iterClasses.hasNext())
+			{
+				String strClassName = (String) iterClasses.next();
+				commandClass = Class.forName(strClassName);
+				if (!Modifier.isAbstract(commandClass.getModifiers()))
+				{
+					command = (Command) commandClass.newInstance();
+					Iterator iter = command.getActionNames().iterator();
+					while (iter.hasNext())
+					{
+						String commandName = (String)iter.next();
+						Set commandObjects = (Set)commands.get(commandName);
+						if(commandObjects == null)
+						{
+							commandObjects = new HashSet();
+							commands.put(commandName,commandObjects);
+						}
+						commandObjects.add(command);
+					}
+				}
+			}
+		}
+		catch (Exception e)
+		{
+			System.out.println("exception finding action handlers");
+			e.printStackTrace();
+		}
+	}
+
+	/**
+	 *  Gets the Instance attribute of the ActionRouter class
+	 *
+	 *@return    The Instance value
+	 */
+	public static ActionRouter getInstance()
+	{
+		if (router == null)
+		{
+			router = new ActionRouter();
+			router.populateCommandMap();
+		}
+		return router;
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AddParent.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AddParent.java
new file mode 100644
index 0000000..50f3e47
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AddParent.java
@@ -0,0 +1,78 @@
+package org.apache.jmeter.gui.action;
+import java.awt.Component;
+import java.awt.event.ActionEvent;
+import java.util.*;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.tree.JMeterTreeNode;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:43 $
+ *@version   1.0
+ ***************************************/
+
+public class AddParent implements Command
+{
+	private static Set commands = new HashSet();
+	static
+	{
+		commands.add("Add Parent");
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public AddParent() { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		String name = ((Component)e.getSource()).getName();
+		try
+		{
+			JMeterGUIComponent controller = (JMeterGUIComponent)Class.forName(name).newInstance();
+			addParentToTree(controller);
+		}
+		catch(Exception err)
+		{
+			err.printStackTrace();
+		}
+
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param newParent  !ToDo
+	 ***************************************/
+	protected void addParentToTree(JMeterGUIComponent newParent)
+	{
+		GuiPackage guiPackage = GuiPackage.getInstance();
+		JMeterTreeNode newNode = new JMeterTreeNode(newParent);
+		JMeterTreeNode currentNode = guiPackage.getTreeListener().getCurrentNode();
+		JMeterTreeNode parentNode = (JMeterTreeNode)currentNode.getParent();
+		int index = parentNode.getIndex(currentNode);
+		guiPackage.getTreeModel().removeNodeFromParent(currentNode);
+		guiPackage.getTreeModel().insertNodeInto(newNode,
+				(JMeterTreeNode)parentNode, index);
+		guiPackage.getTreeModel().insertNodeInto(currentNode, newNode,
+				newNode.getChildCount());
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AddToTree.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AddToTree.java
new file mode 100644
index 0000000..9883f40
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/AddToTree.java
@@ -0,0 +1,125 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.gui.action;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.gui.tree.JMeterTreeNode;
+import org.apache.jmeter.util.ClassFinder;
+
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+
+/**
+ *  !ToDo (Class description)
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:44 $
+ *@version    $Revision: 1.1 $
+ */
+public class AddToTree implements Command
+{
+	private Map allJMeterComponentCommands;
+
+	public AddToTree()
+	{
+		allJMeterComponentCommands = new HashMap();
+		allJMeterComponentCommands.put("Add","Add");
+		List classes;
+		
+	}
+
+
+	/**
+	 *  Gets the Set of actions this Command class responds to.
+	 *
+	 *@return    The ActionNames value
+	 */
+	public Set getActionNames()
+	{
+		return allJMeterComponentCommands.keySet();
+	}
+
+
+	/**
+	 *  Adds the specified class to the current node of the tree.
+	 *
+	 *@param  e           Description of Parameter
+	 *@param  guiPackage  Description of Parameter
+	 */
+	public void doAction(ActionEvent e)
+	{		
+		try
+		{
+			JMeterGUIComponent gui = (JMeterGUIComponent) Class.forName(((JComponent)e.getSource()).getName()).newInstance();
+			addObjectToTree(gui);
+		}
+		catch(Exception err)
+		{
+			err.printStackTrace();
+		}
+	}
+
+	protected void addObjectToTree(JMeterGUIComponent guiObject)
+	{
+		GuiPackage guiPackage = GuiPackage.getInstance();
+		guiPackage.getTreeModel().insertNodeInto(new JMeterTreeNode(guiObject),
+				guiPackage.getTreeListener().getCurrentNode(),
+				guiPackage.getTreeListener().getCurrentNode().getChildCount());
+	}
+
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Analyze.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Analyze.java
new file mode 100644
index 0000000..b1d1881
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Analyze.java
@@ -0,0 +1,127 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+import java.awt.event.ActionEvent;
+import java.io.*;
+import java.util.*;
+import javax.swing.JFileChooser;
+import org.xml.sax.InputSource;
+import org.xml.sax.XMLReader;
+import junit.framework.*;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.reporters.FileReporter;
+import org.apache.jmeter.save.*;
+import org.apache.jmeter.util.*;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+public class Analyze implements Command
+{
+	private static Set commands = new HashSet();
+
+
+	static
+	{
+		commands.add("Analyze File");
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public Analyze() { }
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		FileReporter analyzer = new FileReporter();
+		try
+		{
+			File f = FileDialoger.promptToOpenFile(new String[]{".jtl"}).getSelectedFile();
+			if(f != null)
+			{
+				try
+				{
+					analyzer.init(f.getPath());
+				}
+				catch(IOException err)
+				{
+					JMeterUtils.reportErrorToUser("The file you selected could not be analyzed");
+				}
+			}
+		}
+		catch(NullPointerException err){}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Entries
new file mode 100644
index 0000000..732c47f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Entries
@@ -0,0 +1,22 @@
+/AboutCommand.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/AbstractAction.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/ActionRouter.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/AddParent.java/1.1/Sun Aug 11 19:24:43 2002//Tv1_7_3
+/AddToTree.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Analyze.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/CheckDirty.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Clear.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Command.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/CreateFunctionDialog.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/DragNDrop.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/EditCommand.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/ExitCommand.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Load.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/LookAndFeelCommand.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/New.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/RemoteStart.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Remove.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/SSLManagerCommand.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Save.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/Start.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Repository
new file mode 100644
index 0000000..ac4205e
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/gui/action
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CheckDirty.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CheckDirty.java
new file mode 100644
index 0000000..89afbc0
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CheckDirty.java
@@ -0,0 +1,160 @@
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.Map;
+import java.util.Set;
+
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.tree.JMeterTreeNode;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.ListedHashTreeVisitor;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class CheckDirty extends AbstractAction implements 
+		ListedHashTreeVisitor 
+{
+	private Map previousGuiItems;
+	public static final String CHECK_DIRTY = "check_dirty";
+	public static final String SUB_TREE_SAVED = "sub_tree_saved";
+	public static final String SUB_TREE_LOADED = "sub_tree_loaded";
+	public static final String ADD_ALL = "add_all";
+	public static final String SAVE = "save";
+	public static final String SAVE_ALL = "save_all";
+	public static final String REMOVE = "check_remove";
+	
+	boolean checkMode = false;
+	boolean removeMode = false;
+	boolean dirty = false;
+	
+	private static Set commands = new HashSet();
+	static
+	{
+		commands.add(CHECK_DIRTY);
+		commands.add(SUB_TREE_SAVED);
+		commands.add(SUB_TREE_LOADED);
+		commands.add(ADD_ALL);
+		commands.add(SAVE);
+		commands.add(SAVE_ALL);
+		commands.add(REMOVE);
+	}
+	
+	public CheckDirty()
+	{
+		previousGuiItems = new HashMap();
+	}
+		
+
+	/**
+	 * @see Command#doAction(ActionEvent)
+	 */
+	public void doAction(ActionEvent e) {
+		String action = e.getActionCommand();
+		if(action.equals(SUB_TREE_SAVED) || action.equals(SAVE))
+		{
+			ListedHashTree subTree = GuiPackage.getInstance().getCurrentSubTree();
+			subTree.traverse(this);
+		}
+		else if(action.equals(SAVE_ALL))
+		{
+			ListedHashTree subTree = GuiPackage.getInstance().getTreeModel().getTestPlan();
+			subTree.traverse(this);
+		}
+		else if(action.equals(SUB_TREE_LOADED))
+		{
+			ListedHashTree addTree = (ListedHashTree)e.getSource();
+			addTree.traverse(this);
+		}
+		else if(action.equals(ADD_ALL))
+		{
+			previousGuiItems.clear();
+			GuiPackage.getInstance().getTreeModel().getTestPlan().traverse(this);
+		}
+		else if(action.equals(REMOVE))
+		{
+			GuiPackage guiPackage = GuiPackage.getInstance();
+			JMeterTreeNode[] nodes = guiPackage.getTreeListener().getSelectedNodes();
+			removeMode = true;
+			for (int i = nodes.length - 1; i >= 0; i--)
+			{
+				guiPackage.getTreeModel().getCurrentSubTree(nodes[i]).traverse(this);
+			}
+			removeMode = false;
+		}
+		else if(action.equals(CHECK_DIRTY))
+		{
+			checkMode = true;
+			dirty = false;
+			ListedHashTree wholeTree = GuiPackage.getInstance().getTreeModel().getTestPlan();
+			wholeTree.traverse(this);
+			GuiPackage.getInstance().setDirty(dirty);
+			checkMode = false;
+		}		
+	}
+	
+	/**
+	 * The tree traverses itself depth-first, calling processNode for each object
+	 * it encounters as it goes.
+	 */
+	public void addNode(Object node,ListedHashTree subTree)
+	{
+		JMeterGUIComponent treeNode = (JMeterGUIComponent)node;
+		if(checkMode)
+		{
+			if(previousGuiItems.containsKey(treeNode))
+			{
+				if(!previousGuiItems.get(treeNode).equals(
+						treeNode.createTestElement()))
+				{
+					dirty = true;
+				}
+			}
+			else
+			{
+				dirty = true;
+			}
+		}
+		else if(removeMode)
+		{
+			previousGuiItems.remove(treeNode);
+		}
+		else
+		{
+			previousGuiItems.put(treeNode,treeNode.createTestElement());
+		}
+	}
+
+	/**
+	 * Indicates traversal has moved up a step, and the visitor should remove the
+	 * top node from it's stack structure.
+	 */
+	public void subtractNode()
+	{
+	}
+
+	/**
+	 * Process path is called when a leaf is reached.  If a visitor wishes to generate
+	 * Lists of path elements to each leaf, it should keep a Stack data structure of
+	 * nodes passed to it with addNode, and removing top items for every subtractNode()
+	 * call.
+	 */
+	public void processPath()
+	{
+	}
+
+	/**
+	 * @see Command#getActionNames()
+	 */
+	public Set getActionNames() {
+		return commands;
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Clear.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Clear.java
new file mode 100644
index 0000000..f4eefa3
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Clear.java
@@ -0,0 +1,140 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.*;
+import java.lang.reflect.*;
+
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.samplers.Clearable;
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:44 $
+ *@version    1.0
+ ***********************************************************/
+
+public class Clear implements Command
+{
+
+	public final static String CLEAR = "action.clear";
+	public final static String CLEAR_ALL = "action.clear_all";
+
+	private static Set commands = new HashSet();
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public Clear()
+	{
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void doAction(ActionEvent e)
+	{
+		GuiPackage guiPackage = GuiPackage.getInstance();
+		if (e.getActionCommand().equals(CLEAR))
+		{
+			JMeterGUIComponent model = (JMeterGUIComponent)guiPackage.getTreeListener().getCurrentNode().getUserObject();
+			try
+			{
+				((Clearable)model).clear();
+			}
+			catch (Throwable ex)
+			{
+				ex.printStackTrace();
+			}
+		}
+		else
+		{
+			Iterator iter = guiPackage.getTreeModel().getNodesOfType(Clearable.class).iterator();
+			while (iter.hasNext())
+			{
+				try
+				{
+					Clearable item = (Clearable)((JMeterTreeNode)iter.next()).getUserObject();
+					item.clear();
+				}
+				catch (Exception ex)
+				{
+					ex.printStackTrace();
+				}
+			}
+		}
+	}
+	static
+	{
+		commands.add(CLEAR);
+		commands.add(CLEAR_ALL);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Command.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Command.java
new file mode 100644
index 0000000..67b79ca
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Command.java
@@ -0,0 +1,76 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.*;
+
+import org.apache.jmeter.gui.*;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface Command
+{
+	public void doAction(ActionEvent e);
+
+	public Set getActionNames();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CreateFunctionDialog.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CreateFunctionDialog.java
new file mode 100644
index 0000000..5efe1df
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/CreateFunctionDialog.java
@@ -0,0 +1,46 @@
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.HashSet;
+import java.util.Set;
+
+import org.apache.jmeter.functions.gui.FunctionHelper;
+import org.apache.jmeter.gui.GuiPackage;
+
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class CreateFunctionDialog extends AbstractAction {
+	
+	private static Set commands;
+	private FunctionHelper helper = null;
+
+    static {
+        commands = new HashSet();
+        commands.add("functions");
+    }
+    
+    public CreateFunctionDialog()
+    {
+			helper = new FunctionHelper();
+    }
+    
+    /**
+     * Provide the list of Action names that are available in this command.
+     */
+    public Set getActionNames() {
+        return commands;
+    }
+
+	/**
+	 * @see ActionListener#actionPerformed(ActionEvent)
+	 */
+	public void doAction(ActionEvent arg0) 
+	{   
+		helper.show();
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/DragNDrop.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/DragNDrop.java
new file mode 100644
index 0000000..6a1afb1
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/DragNDrop.java
@@ -0,0 +1,70 @@
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.HashSet;
+import java.util.Set;
+
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.tree.JMeterTreeListener;
+import org.apache.jmeter.gui.tree.JMeterTreeNode;
+
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class DragNDrop extends AbstractAction {
+
+	public final static String ADD = "drag_n_drop.add";
+	public final static String INSERT_BEFORE = "drag_n_drop.insert_before";
+	public final static String INSERT_AFTER = "drag_n_drop.insert_after";
+	
+	private static Set commands = new HashSet();
+	static
+	{
+		commands.add(ADD);
+		commands.add(INSERT_BEFORE);
+		commands.add(INSERT_AFTER);
+	}
+	/**
+	 * @see Command#doAction(ActionEvent)
+	 */
+	public void doAction(ActionEvent e) {
+		String action = e.getActionCommand();
+		JMeterTreeNode draggedNode = GuiPackage.getInstance().getTreeListener().getDraggedNode();
+		JMeterTreeListener treeListener = GuiPackage.getInstance().getTreeListener();
+		JMeterTreeNode currentNode = treeListener.getCurrentNode();
+		GuiPackage.getInstance().getTreeModel().removeNodeFromParent(
+				GuiPackage.getInstance().getTreeListener().getDraggedNode());
+		if(ADD.equals(action))
+		{
+			GuiPackage.getInstance().getTreeModel().insertNodeInto(draggedNode,
+				currentNode,currentNode.getChildCount());
+		}
+		else if(INSERT_BEFORE.equals(action))
+		{
+			JMeterTreeNode parentNode = (JMeterTreeNode)currentNode.getParent();
+			int index = parentNode.getIndex(currentNode);
+			GuiPackage.getInstance().getTreeModel().insertNodeInto(draggedNode,
+					parentNode, index);
+		}
+		else if(INSERT_AFTER.equals(action))
+		{
+			JMeterTreeNode parentNode = (JMeterTreeNode)currentNode.getParent();
+			int index = parentNode.getIndex(currentNode)+1;
+			GuiPackage.getInstance().getTreeModel().insertNodeInto(draggedNode,
+					parentNode, index);
+		}
+		GuiPackage.getInstance().getMainFrame().repaint();
+	}
+
+	/**
+	 * @see Command#getActionNames()
+	 */
+	public Set getActionNames() {
+		return commands;
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/EditCommand.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/EditCommand.java
new file mode 100644
index 0000000..ad919ac
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/EditCommand.java
@@ -0,0 +1,63 @@
+package org.apache.jmeter.gui.action;
+import java.awt.event.ActionEvent;
+import java.util.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class EditCommand implements Command
+{
+
+	private static Set commands = new HashSet();
+	static
+	{
+		commands.add(JMeterUtils.getResString("edit"));
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public EditCommand() { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		GuiPackage guiPackage = GuiPackage.getInstance();
+		guiPackage.getMainFrame().setMainPanel((javax.swing.JComponent)
+					guiPackage.getTreeListener().getCurrentNode().getUserObject());
+		guiPackage.getMainFrame().setEditMenu(
+				((JMeterGUIComponent)guiPackage.getTreeListener().getCurrentNode().getUserObject()).createPopupMenu());
+		if(!(guiPackage.getTreeListener().getCurrentNode().getUserObject() instanceof NamePanel))
+		{
+			guiPackage.getMainFrame().setFileLoadEnabled(true);
+			guiPackage.getMainFrame().setFileSaveEnabled(true);
+		}
+		else
+		{
+			guiPackage.getMainFrame().setFileLoadEnabled(false);
+			guiPackage.getMainFrame().setFileSaveEnabled(false);
+		}			
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Set getActionNames()
+	{
+
+		return commands;
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/ExitCommand.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/ExitCommand.java
new file mode 100644
index 0000000..621a9ea
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/ExitCommand.java
@@ -0,0 +1,129 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.*;
+import java.lang.reflect.*;
+import javax.swing.*;
+
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.gui.util.*;
+import org.apache.jmeter.util.*;
+
+/**
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Brendan Burns
+ *@created    October 5, 2001
+ *@version    1.0
+ */
+
+public class ExitCommand implements Command
+{
+
+	private static Set commands = new HashSet();
+
+	/**
+	 *  Constructor for the ExitCommand object
+	 */
+	public ExitCommand()
+	{
+	}
+
+	/**
+	 *  Gets the ActionNames attribute of the ExitCommand object
+	 *
+	 *@return    The ActionNames value
+	 */
+	public Set getActionNames()
+	{
+		return commands;
+	}
+	
+	
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  e  Description of Parameter
+	 */
+	public void doAction(ActionEvent e)
+	{
+		ActionRouter.getInstance().actionPerformed(new ActionEvent(
+				e.getSource(),e.getID(),CheckDirty.CHECK_DIRTY));
+		if(GuiPackage.getInstance().isDirty())
+		{
+			if(JOptionPane.showConfirmDialog(GuiPackage.getInstance().getMainFrame(),
+					JMeterUtils.getResString("cancel_exit_to_save"),
+					JMeterUtils.getResString("Save?"),
+					JOptionPane.YES_NO_OPTION,
+					JOptionPane.QUESTION_MESSAGE) == JOptionPane.NO_OPTION)
+			{
+				System.exit(0);
+			}
+		}
+		else
+		{
+				System.exit(0);
+		}
+	}
+
+	static
+	{
+		commands.add("exit");
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Load.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Load.java
new file mode 100644
index 0000000..35e68e5
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Load.java
@@ -0,0 +1,411 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+import java.awt.event.ActionEvent;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.InputStream;
+import java.util.HashSet;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Set;
+
+import javax.swing.JFileChooser;
+import junit.framework.TestCase;
+
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.control.gui.LogicControllerGui;
+import org.apache.jmeter.control.gui.WorkBenchGui;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.save.SaveService;
+import org.apache.jmeter.save.old.JMeterNameSpaceHandler;
+import org.apache.jmeter.save.old.xml.XmlHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.ListedHashTree;
+import org.xml.sax.InputSource;
+import org.xml.sax.XMLReader;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+public class Load implements Command
+{
+	private static Set commands = new HashSet();
+
+	static
+	{
+		commands.add(JMeterUtils.getResString("open"));
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public Load() { }
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		JFileChooser chooser = FileDialoger.promptToOpenFile(new String[]{".jmx"});
+		if(chooser == null)
+		{
+			return;
+		}
+		InputStream reader = null;
+		File f = null;
+		try
+		{
+			f = chooser.getSelectedFile();
+			if(f != null)
+			{
+				reader = new FileInputStream(f);
+				ListedHashTree tree = SaveService.loadSubTree(reader);
+				insertLoadedTree(e.getID(), tree);
+			}
+		}
+		catch(IllegalUserActionException ex)
+		{
+			JMeterUtils.reportErrorToUser(ex.getMessage());
+		}
+		catch(Throwable ex)
+		{
+			try
+			{
+				legacyLoad(f);
+			}
+			catch(Throwable err)
+			{
+				//ex.printStackTrace();
+				err.printStackTrace();
+				JMeterUtils.reportErrorToUser("Couldn't load JMX file.  May have been corrupted");
+			}
+		}
+		finally
+		{
+			GuiPackage.getInstance().getMainFrame().repaint();
+		}
+	}
+
+	private void insertLoadedTree(int id, ListedHashTree tree) throws Exception, IllegalUserActionException {
+		convertTree(tree);
+		GuiPackage.getInstance().addSubTree(tree);
+		tree = GuiPackage.getInstance().getCurrentSubTree();				
+		ActionRouter.getInstance().actionPerformed(new ActionEvent(
+			tree.get(tree.getArray()[tree.size()-1]),id,CheckDirty.SUB_TREE_LOADED));
+	}
+
+	private void convertTree(ListedHashTree tree) throws Exception
+	{
+		Iterator iter = new LinkedList(tree.list()).iterator();
+		while (iter.hasNext())
+		{
+			TestElement item = (TestElement)iter.next();
+			convertTree(tree.get(item));
+			JMeterGUIComponent comp = generateGUIComponent(item);
+			tree.replace(item,comp);
+		}
+	}
+
+	private JMeterGUIComponent generateGUIComponent(TestElement item) throws Exception
+	{
+			JMeterGUIComponent gui = null;
+			try {
+				gui = (JMeterGUIComponent)Class.forName((String)item.getProperty(TestElement.GUI_CLASS)).newInstance();
+			} catch(Exception e) {
+				System.out.println("Couldn't get gui for "+item);
+				e.printStackTrace();
+				gui = new WorkBenchGui();
+			} 
+			gui.configure(item);
+			return gui;
+	}
+	
+	private void legacyLoad(File f) throws Exception
+	{
+		FileInputStream reader = new FileInputStream(f);
+				XmlHandler handler = new XmlHandler(new JMeterNameSpaceHandler());
+				XMLReader parser = JMeterUtils.getXMLParser();
+				parser.setContentHandler(handler);
+				parser.setErrorHandler(handler);
+				parser.parse(new InputSource(reader));
+				ListedHashTree tree = handler.getDataTree();
+				updateTree(tree);
+				insertLoadedTree(443,tree);
+	}
+
+	
+	/**
+	 * For loading a 1.6 version test tree
+	 * */
+	private void updateTree(ListedHashTree tree) {
+			List items = new LinkedList(tree.list());
+			Iterator iter = items.iterator();
+
+			while (iter.hasNext()) {
+				Object item = iter.next();
+				if (item instanceof HTTPSampler) {
+					List subItems = new LinkedList(tree.list(item));
+					boolean replaced = false;
+					Iterator iter2 = subItems.iterator();
+					while (iter2.hasNext()) {
+						TestElement config = (TestElement)iter2.next();
+						if (config.getPropertyAsString(TestElement.TEST_CLASS).equals(
+								"org.apache.jmeter.protocol.http.config.UrlConfig")) {
+							replaced = true;
+							HTTPSampler newControl = new HTTPSampler();
+							newControl.setName((String)((TestElement)item).getProperty(TestElement.NAME));
+							newControl.addTestElement( config);	
+							newControl.setProperty(TestElement.GUI_CLASS,
+									"org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui");
+							tree.get(item).replace(config, newControl);
+						}
+					}
+
+					if (replaced) {
+						((TestElement)item).setProperty(TestElement.GUI_CLASS,
+								"org.apache.jmeter.protocol.http.config.gui.UrlConfigGui");
+						((TestElement)item).setProperty(TestElement.NAME,"HTTP Request Defaults");
+						GenericController newControl = new GenericController();
+						newControl.setProperty(TestElement.GUI_CLASS,
+								"org.apache.jmeter.control.gui.LogicControllerGui");
+						newControl.setName("Simple Controller");
+						tree.replace(item, newControl);
+						tree.add(newControl, item);
+					}
+				} else {
+					updateTree(tree.get(item));
+				}
+			}
+		}
+		
+	/************************************************************
+	 *  !ToDo (Class description)
+	 *
+	 *@author     $Author: mstover1 $
+	 *@created    $Date: 2002/08/11 19:24:44 $
+	 *@version    $Revision: 1.1 $
+	 ***********************************************************/
+	public static class Test extends TestCase {
+		File testFile1, testFile2, testFile3,testFile4,testFile5,testFile6,testFile7,
+				testFile8,testFile9,testFile10,testFile11,testFile12,testFile13;
+		static Load loader = new Load();
+
+		public Test(String name) {
+			super(name);
+		}
+
+		/************************************************************
+		 *  !ToDo
+		 ***********************************************************/
+		public void setUp() {
+			testFile1 =
+				new File(System.getProperty("user.dir") + "/testfiles", "Test Plan.jmx");
+			testFile2 =
+				new File(
+					System.getProperty("user.dir") + "/testfiles",
+					"Modification Manager.jmx");
+			testFile3 =
+				new File(System.getProperty("user.dir") + "/testfiles", "proxy.jmx");
+			testFile4 =
+				new File(System.getProperty("user.dir") + "/testfiles", "AssertionTestPlan.jmx");
+			testFile5 =
+				new File(System.getProperty("user.dir") + "/testfiles", "AuthManagerTestPlan.jmx");
+			testFile6 =
+				new File(System.getProperty("user.dir") + "/testfiles", "HeaderManagerTestPlan.jmx");
+			testFile7 =
+				new File(System.getProperty("user.dir") + "/testfiles", "InterleaveTestPlan.jmx");
+			testFile8 =
+				new File(System.getProperty("user.dir") + "/testfiles", "InterleaveTestPlan2.jmx");
+			testFile9 =
+				new File(System.getProperty("user.dir") + "/testfiles", "LoopTestPlan.jmx");
+			testFile10 =
+				new File(System.getProperty("user.dir") + "/testfiles", "OnceOnlyTestPlan.jmx");
+			testFile11 =
+				new File(System.getProperty("user.dir") + "/testfiles", "ProxyServerTestPlan.jmx");
+			testFile12 =
+				new File(System.getProperty("user.dir") + "/testfiles", "SimpleTestPlan.jmx");
+			testFile13 =
+				new File(System.getProperty("user.dir") + "/testfiles", "URLRewritingExample.jmx");
+		}
+
+		/************************************************************
+		 *  !ToDo
+		 *
+		 *@exception  Exception  !ToDo (Exception description)
+		 ***********************************************************/
+		public void testUpdateTree() throws Exception {
+			ListedHashTree tree = getTree(testFile2);
+			loader.updateTree(tree);
+			assertTrue(tree.list(tree.list().get(0)).get(0) instanceof GenericController);
+			loader.convertTree(tree);
+			assertEquals(new LogicControllerGui().getStaticLabel(),
+					((JMeterGUIComponent)tree.list(tree.list().get(0)).get(0)).getStaticLabel());
+		}
+
+		public void testFile3() throws Exception {
+			ListedHashTree tree = getTree(testFile3);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.threads.ThreadGroup);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.threads.gui.ThreadGroupGui);
+		}
+		
+		public void testFile4() throws Exception {
+			ListedHashTree tree = getTree(testFile4);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile5() throws Exception {
+			ListedHashTree tree = getTree(testFile5);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile6() throws Exception {
+			ListedHashTree tree = getTree(testFile6);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile7() throws Exception {
+			ListedHashTree tree = getTree(testFile7);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile8() throws Exception {
+			ListedHashTree tree = getTree(testFile8);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile9() throws Exception {
+			ListedHashTree tree = getTree(testFile9);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile10() throws Exception {
+			ListedHashTree tree = getTree(testFile10);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile11() throws Exception {
+			ListedHashTree tree = getTree(testFile11);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+		
+		public void testFile12() throws Exception {
+			ListedHashTree tree = getTree(testFile12);
+			//loader.updateTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.testelement.TestPlan);
+			loader.convertTree(tree);
+			assertTrue(tree.list().get(0) instanceof org.apache.jmeter.control.gui.TestPlanGui);
+		}
+
+		private ListedHashTree getTree(File f) throws Exception {
+				FileInputStream reader = new FileInputStream(f);
+				XmlHandler handler = new XmlHandler(new JMeterNameSpaceHandler());
+				XMLReader parser = JMeterUtils.getXMLParser();
+				parser.setContentHandler(handler);
+				parser.setErrorHandler(handler);
+				parser.parse(new InputSource(reader));
+				ListedHashTree tree = handler.getDataTree();
+				return tree;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/LookAndFeelCommand.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/LookAndFeelCommand.java
new file mode 100644
index 0000000..918a542
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/LookAndFeelCommand.java
@@ -0,0 +1,129 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.*;
+import java.lang.reflect.*;
+import javax.swing.*;
+
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Brendan Burns
+ * @version 1.0
+ */
+
+public class LookAndFeelCommand implements Command
+{
+
+	 private static Set commands = new HashSet();
+	 static
+	 {
+	UIManager.LookAndFeelInfo[] lfs = UIManager.getInstalledLookAndFeels();
+	for(int i=0;i<lfs.length;i++)
+		 commands.add("laf:"+lfs[i].getClassName());
+
+		 try
+		 {
+			String defaultUI = JMeterUtils.getPropDefault("jmeter.laf",
+								  UIManager.getCrossPlatformLookAndFeelClassName());
+			UIManager.setLookAndFeel(defaultUI);
+		 }
+		 catch(Exception e)
+		 {}
+	 }
+
+	 public LookAndFeelCommand()
+	 {
+	 }
+
+	 public void doAction(ActionEvent ev)
+	 {
+	try {
+		 String className =
+		ev.getActionCommand().substring(4).replace('/','.');
+		 UIManager.setLookAndFeel(className);
+		 SwingUtilities.updateComponentTreeUI(GuiPackage.getInstance().getMainFrame());
+	}
+	catch (javax.swing.UnsupportedLookAndFeelException e) {
+		 JMeterUtils.reportErrorToUser("Look and Feel unavailable:"+
+					  e.toString());
+	}
+	catch (InstantiationException e) {
+		 JMeterUtils.reportErrorToUser("Look and Feel unavailable:"+
+					  e.toString());
+	}
+	catch (ClassNotFoundException e) {
+		 JMeterUtils.reportErrorToUser("Look and Feel unavailable:"+
+					  e.toString());
+	}
+	catch (IllegalAccessException e) {
+		 JMeterUtils.reportErrorToUser("Look and Feel unavailable:"+
+					  e.toString());
+	}
+	 }
+
+	 public Set getActionNames()
+	 {
+	return commands;
+	 }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/New.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/New.java
new file mode 100644
index 0000000..5c333e1
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/New.java
@@ -0,0 +1,131 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.*;
+import javax.swing.*;
+
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.testelement.WorkBench;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ *  Title: JMeter Description: Copyright: Copyright (c) 2002 Company: Apache
+ * This command clears the existing test plan, 
+ * allowing the creation of a New test plan
+ *
+ *@author     <a href="mramshaw@alumni.concordia.ca">Martin Ramshaw</a>
+ *@created    June 6, 2002
+ *@version    1.0
+ */
+
+public class New implements Command
+{
+
+	private static Set commands = new HashSet();
+
+	/**
+	 *  Constructor for the New object.
+	 */
+	public New()
+	{
+	}
+
+	/**
+	 *  Gets the ActionNames attribute of the New object.
+	 *
+	 *@return    The ActionNames value.
+	 */
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/**
+	 *  This method performs the actual command processing.
+	 *
+	 *@param  e  This is the generic UI action event.
+	 */
+	public void doAction(ActionEvent e)
+	{
+		ActionRouter.getInstance().actionPerformed(new ActionEvent(
+				e.getSource(),e.getID(),CheckDirty.CHECK_DIRTY));
+		GuiPackage guiPackage = GuiPackage.getInstance();
+		if(guiPackage.isDirty())
+		{
+			if(JOptionPane.showConfirmDialog(GuiPackage.getInstance().getMainFrame(),
+					JMeterUtils.getResString("cancel_new_to_save"),
+					JMeterUtils.getResString("Save?"),
+					JOptionPane.YES_NO_OPTION,
+					JOptionPane.QUESTION_MESSAGE) == JOptionPane.YES_OPTION)
+				ActionRouter.getInstance().actionPerformed(new ActionEvent(
+						e.getSource(),e.getID(),CheckDirty.SAVE_ALL));
+		}
+		guiPackage.getTreeModel().clearTestPlan();
+		guiPackage.getTreeListener().getJTree().setSelectionRow(1);
+		ActionRouter.getInstance().actionPerformed(new ActionEvent(
+				e.getSource(),e.getID(),CheckDirty.ADD_ALL));
+	}
+
+	static
+	{
+		commands.add("new");
+	}
+
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/RemoteStart.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/RemoteStart.java
new file mode 100644
index 0000000..9ab8c64
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/RemoteStart.java
@@ -0,0 +1,162 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+import java.awt.Component;
+import java.awt.event.ActionEvent;
+import java.rmi.RemoteException;
+import java.util.*;
+import org.apache.jmeter.engine.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.ListedHashTree;
+import javax.swing.JOptionPane;
+
+/****************************************
+ * Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class RemoteStart extends AbstractAction
+{
+
+	private Map remoteEngines = new HashMap();
+
+	private static Set commands = new HashSet();
+	static
+	{
+		commands.add("remote_start");
+		commands.add("remote_stop");
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public RemoteStart() { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		String name = ((Component)e.getSource()).getName();
+		String action = e.getActionCommand();
+		if(action.equals("remote_stop"))
+		{
+			JMeterEngine engine = (JMeterEngine)remoteEngines.get(name);
+			engine.stopTest();
+		}
+		else if(action.equals("remote_start"))
+		{
+			JMeterEngine engine = (JMeterEngine)remoteEngines.get(name);
+			if(engine == null)
+			{
+				try
+				{
+					engine = new ClientJMeterEngine(name);
+					remoteEngines.put(name, engine);
+				}
+				catch(Exception ex)
+				{
+					ex.printStackTrace();
+					JMeterUtils.reportErrorToUser("Bad call to remote host");
+					return;
+				}
+			}
+			else
+			{
+				engine.reset();
+			}
+			startEngine(engine, name);
+		}
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param engine  !ToDo (Parameter description)
+	 *@param host    !ToDo (Parameter description)
+	 ***************************************/
+	private void startEngine(JMeterEngine engine, String host)
+	{
+		GuiPackage gui = GuiPackage.getInstance();
+		ListedHashTree testTree = gui.getTreeModel().getTestPlan();
+		convertSubTree(testTree);
+		testTree.add(testTree.getArray()[0],gui.getMainFrame());
+		engine.configure(testTree);
+		try {
+			engine.runTest();
+		} catch(JMeterEngineException e) {
+			JOptionPane.showMessageDialog(gui.getMainFrame(),e.getMessage(),
+					JMeterUtils.getResString("Error Occurred"),JOptionPane.ERROR_MESSAGE);
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Remove.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Remove.java
new file mode 100644
index 0000000..59188a4
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Remove.java
@@ -0,0 +1,118 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.HashSet;
+import java.util.Set;
+
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.tree.JMeterTreeNode;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    October 5, 2001
+ *@version    1.0
+ */
+
+public class Remove implements Command
+{
+
+	private static Set commands = new HashSet();
+
+	/**
+	 *  Constructor for the Remove object
+	 */
+	public Remove()
+	{
+	}
+
+	/**
+	 *  Gets the ActionNames attribute of the Remove object
+	 *
+	 *@return    The ActionNames value
+	 */
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  e  Description of Parameter
+	 */
+	public void doAction(ActionEvent e)
+	{
+		ActionRouter.getInstance().actionPerformed(new ActionEvent(e.getSource(),
+				e.getID(),CheckDirty.REMOVE));
+		GuiPackage guiPackage = GuiPackage.getInstance();
+		JMeterTreeNode[] nodes = guiPackage.getTreeListener().getSelectedNodes();
+		guiPackage.getTreeListener().removedSelectedNode();
+		for (int i = nodes.length - 1; i >= 0; i--)
+		{
+				guiPackage.getTreeModel().removeNodeFromParent(nodes[i]);
+		}
+		guiPackage.getTreeListener().getJTree().setSelectionRow(1);
+
+	}
+	static
+	{
+		commands.add(JMeterUtils.getResString("remove"));
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/SSLManagerCommand.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/SSLManagerCommand.java
new file mode 100644
index 0000000..4ef17f0
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/SSLManagerCommand.java
@@ -0,0 +1,172 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+
+import java.awt.event.ActionEvent;
+import java.util.Set;
+import java.util.HashSet;
+import java.util.Collections;
+import javax.swing.*;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.border.*;
+import java.util.ResourceBundle;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.SSLManager;
+
+import java.io.File;
+import javax.swing.filechooser.FileFilter;
+
+/**
+ * SSL Manager Command.  The SSL Manager provides a mechanism to change your
+ * client authentication if required by the server.  If you have JSSE 1.0.2
+ * installed, you can select your client identity from a list of installed keys.
+ * You can also change your keystore.  JSSE 1.0.2 allows you to export a PKCS#12
+ * key from Netscape 4.04 or higher and use it in a read only format.  You must
+ * supply a password that is greater than six characters due to limitations in
+ * the keytool program--and possibly the rest of the system.
+ *
+ * <p>
+ * By selecting a *.p12 file as your keystore (your PKCS#12) format file, you can
+ * have a whopping one key keystore.  The advantage is that you can test a
+ * connection using the assigned Certificate from a Certificate Authority.
+ * </p>
+ *
+ * @author <a href="bloritsch@apache.org">Berin Loritsch</a>
+ * @version CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:44 $
+ */
+
+public class SSLManagerCommand implements Command {
+    private static Set commandSet;
+    private JFileChooser keyStoreChooser;
+
+    static {
+        HashSet commands = new HashSet();
+        commands.add("sslManager");
+        SSLManagerCommand.commandSet = Collections.unmodifiableSet(commands);
+        System.setProperty("java.protocol.handler.pkgs", "com.sun.net.ssl.internal.www.protocol");
+        System.setProperty("javax.net.ssl.debug", "all");
+    }
+
+    /**
+     * Handle the "sslmanager" action by displaying the "SSL CLient Manager"
+     * dialog box.  The Dialog Box is NOT modal, because those should be avoided
+     * if at all possible.
+     */
+    public void doAction(ActionEvent e) {
+        if (e.getActionCommand().equals("sslManager")) {
+            this.sslManager();
+        }
+    }
+
+    /**
+     * Provide the list of Action names that are available in this command.
+     */
+    public Set getActionNames() {
+        return SSLManagerCommand.commandSet;
+    }
+
+    /**
+     * Called by sslManager button. Raises sslManager dialog.  Currently the sslManager box has
+     * the product image and the copyright notice.  The dialog box is centered
+     * over the MainFrame.
+     */
+    private void sslManager() {
+        SSLManager.reset();
+
+        keyStoreChooser = new JFileChooser(JMeterUtils.getJMeterProperties().getProperty("user.dir"));
+        keyStoreChooser.addChoosableFileFilter(new AcceptPKCS12FileFilter());
+        keyStoreChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
+        int retVal = keyStoreChooser.showOpenDialog(GuiPackage.getInstance().getMainFrame());
+
+        if (JFileChooser.APPROVE_OPTION == retVal) {
+            File selectedFile = keyStoreChooser.getSelectedFile();
+            try {
+                JMeterUtils.getJMeterProperties().setProperty("javax.net.ssl.keyStore", selectedFile.getCanonicalPath());
+            } catch (Exception e) {
+            }
+        }
+
+        keyStoreChooser = null;
+        SSLManager.getInstance();
+    }
+
+    /**
+     * Internal class to add a PKCS12 file format filter for JFileChooser.
+     */
+    static private class AcceptPKCS12FileFilter extends FileFilter {
+        /**
+         * Get the description that shows up in JFileChooser filter menu.
+         *
+         * @return description
+         */
+        public String getDescription() {
+            return JMeterUtils.getResString("pkcs12_desc");
+        }
+
+        /**
+         * Tests to see if the file ends with "*.p12" or "*.P12".
+         *
+         * @param testfile file to test
+         * @return         true if file is accepted, false otherwise
+         */
+        public boolean accept(File testFile) {
+            return testFile.isDirectory() ||
+                   testFile.getName().endsWith(".p12") ||
+                   testFile.getName().endsWith(".P12");
+        }
+    }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Save.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Save.java
new file mode 100644
index 0000000..020feee
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Save.java
@@ -0,0 +1,210 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+import java.awt.event.ActionEvent;
+import java.io.*;
+import java.util.*;
+import javax.swing.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.save.*;
+import org.apache.jmeter.util.*;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.save.SaveService;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   February 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class Save implements Command
+{
+	private final static String SAVE_ALL = "save_all";
+	private final static String SAVE = "save";
+
+	private static Set commands = new HashSet();
+	static
+	{
+		commands.add(SAVE);
+		commands.add(SAVE_ALL);
+	}
+
+
+	/****************************************
+	 * Constructor for the Save object
+	 ***************************************/
+	public Save() { }
+
+
+	/****************************************
+	 * Gets the ActionNames attribute of the Save object
+	 *
+	 *@return   The ActionNames value
+	 ***************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		ListedHashTree subTree = null;
+		if(e.getActionCommand().equals(SAVE))
+		{
+			subTree = GuiPackage.getInstance().getCurrentSubTree();
+		}
+		else if(e.getActionCommand().equals(SAVE_ALL))
+		{
+			subTree = GuiPackage.getInstance().getTreeModel().getTestPlan();
+		}
+		try
+		{
+			convertSubTree(subTree);
+		}catch(Exception err)
+		{}
+		JFileChooser chooser = FileDialoger.promptToSaveFile(
+				GuiPackage.getInstance().getTreeListener().getCurrentNode().getName() + ".jmx");
+		if(chooser == null)
+		{
+			return;
+		}
+		OutputStream writer = null;
+		try
+		{
+			writer = new FileOutputStream(chooser.getSelectedFile());
+			SaveService.saveSubTree(subTree,writer);
+		}
+		catch(Throwable ex)
+		{
+			ex.printStackTrace();
+		}
+		finally
+		{
+			closeWriter(writer);
+			GuiPackage.getInstance().getMainFrame().repaint();
+		}
+	}
+
+	private void convertSubTree(ListedHashTree tree)
+	{
+		Iterator iter = new LinkedList(tree.list()).iterator();
+		while (iter.hasNext())
+		{
+			JMeterGUIComponent item = (JMeterGUIComponent)iter.next();
+			convertSubTree(tree.get(item));
+			TestElement testElement = item.createTestElement();
+			tree.replace(item,testElement);
+		}
+	}
+
+	public static class Test extends junit.framework.TestCase
+	{
+		Save save;
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void setUp()
+		{
+			save = new Save();
+		}
+
+		public void testTreeConversion() throws Exception
+		{
+			ListedHashTree tree = new ListedHashTree();
+			JMeterGUIComponent root = new org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui();
+			tree.add(root,root);
+			tree.get(root).add(root,root);
+			save.convertSubTree(tree);
+			assertEquals(tree.getArray()[0].getClass().getName(),root.createTestElement().getClass().getName());
+			tree = tree.get(tree.getArray()[0]);
+			assertEquals(tree.getArray()[0].getClass().getName(),
+					root.createTestElement().getClass().getName());
+			assertEquals(tree.get(tree.getArray()[0]).getArray()[0].getClass().getName(),
+					root.createTestElement().getClass().getName());
+		}
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param writer  Description of Parameter
+	 ***************************************/
+	private void closeWriter(OutputStream writer)
+	{
+		if(writer != null)
+		{
+			try
+			{
+				writer.close();
+			}
+			catch(Exception ex)
+			{
+				ex.printStackTrace();
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Start.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Start.java
new file mode 100644
index 0000000..79a1738
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/action/Start.java
@@ -0,0 +1,144 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.action;
+import java.awt.event.ActionEvent;
+import java.util.HashSet;
+import java.util.Set;
+
+import javax.swing.JOptionPane;
+import org.apache.jmeter.engine.JMeterEngineException;
+import org.apache.jmeter.engine.StandardJMeterEngine;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.ListedHashTree;
+
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   March 1, 2001
+ *@version   1.0
+ ***************************************/
+
+public class Start extends AbstractAction
+{
+	private static Set commands = new HashSet();
+
+	private StandardJMeterEngine engine;
+	static
+	{
+		commands.add("start");
+		commands.add("stop");
+	}
+
+
+	/****************************************
+	 * Constructor for the Start object
+	 ***************************************/
+	public Start() { }
+
+
+	/****************************************
+	 * Gets the ActionNames attribute of the Start object
+	 *
+	 *@return   The ActionNames value
+	 ***************************************/
+	public Set getActionNames()
+	{
+		return commands;
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void doAction(ActionEvent e)
+	{
+		if(e.getActionCommand().equals("start"))
+		{
+			startEngine();
+		}
+		else if(e.getActionCommand().equals("stop"))
+		{
+			engine.stopTest();
+			engine = null;
+			GuiPackage.getInstance().getMainFrame().showStoppingMessage();
+		}
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 ***************************************/
+	protected void startEngine()
+	{
+		GuiPackage gui = GuiPackage.getInstance();
+		engine = new StandardJMeterEngine();
+		ListedHashTree testTree = gui.getTreeModel().getTestPlan();
+		convertSubTree(testTree);
+		testTree.add(testTree.getArray()[0],gui.getMainFrame());
+		engine.configure(testTree);
+		try {
+			engine.runTest();
+		} catch(JMeterEngineException e) {
+			JOptionPane.showMessageDialog(gui.getMainFrame(),e.getMessage(),
+					JMeterUtils.getResString("Error Occurred"),JOptionPane.ERROR_MESSAGE);
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Entries
new file mode 100644
index 0000000..42dfe7b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Entries
@@ -0,0 +1,5 @@
+/JMeterCellRenderer.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JMeterTreeListener.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JMeterTreeModel.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JMeterTreeNode.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Repository
new file mode 100644
index 0000000..020db1b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/gui/tree
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterCellRenderer.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterCellRenderer.java
new file mode 100644
index 0000000..ca4876f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterCellRenderer.java
@@ -0,0 +1,99 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.tree;
+
+import javax.swing.tree.*;
+import javax.swing.*;
+import java.awt.Component;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.GuiFactory;
+import org.apache.jmeter.gui.GuiPackage;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class JMeterCellRenderer extends DefaultTreeCellRenderer
+{
+
+	 ImageIcon timer;
+
+	public JMeterCellRenderer()
+	{
+		 timer = org.apache.jmeter.util.JMeterUtils.getImage("timer.gif");
+	}
+
+	public Component getTreeCellRendererComponent(JTree tree,
+															 Object value,
+															 boolean sel,
+															 boolean expanded,
+															 boolean leaf,
+															 int row,
+															 boolean hasFocus)
+	{
+		super.getTreeCellRendererComponent(tree,((JMeterGUIComponent)value).getName(),
+				sel,expanded,leaf,row,hasFocus);
+		ImageIcon ic = ((JMeterTreeNode)value).getIcon();
+		if (ic!=null)
+			 setIcon(ic);
+		return this;
+	}
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeListener.java
new file mode 100644
index 0000000..458959a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeListener.java
@@ -0,0 +1,432 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.tree;
+import java.awt.Container;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.KeyEvent;
+import java.awt.event.KeyListener;
+import java.awt.event.MouseEvent;
+import java.awt.event.MouseListener;
+import java.awt.event.MouseMotionListener;
+
+import javax.swing.JLabel;
+import javax.swing.JMenuItem;
+import javax.swing.JPopupMenu;
+import javax.swing.JTree;
+import javax.swing.event.TreeSelectionEvent;
+import javax.swing.event.TreeSelectionListener;
+import javax.swing.tree.TreePath;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.MainFrame;
+import org.apache.jmeter.gui.action.DragNDrop;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   March 11, 2001
+ *@version   1.0
+ ***************************************/
+
+public class JMeterTreeListener implements TreeSelectionListener, MouseListener, 
+		KeyListener,MouseMotionListener
+{
+	Container endWindow;
+	JPopupMenu pop;
+	TreePath currentPath;
+	ActionListener actionHandler;
+
+	private JMeterTreeModel model;
+	private JTree tree;
+	private boolean dragging = false;
+	private JMeterTreeNode draggedNode;
+	private JLabel dragIcon = new JLabel(JMeterUtils.getImage("leafnode.gif"));
+
+	/****************************************
+	 * Constructor for the JMeterTreeListener object
+	 *
+	 *@param model  Description of Parameter
+	 ***************************************/
+	public JMeterTreeListener(JMeterTreeModel model)
+	{
+		this.model = model;
+		dragIcon.validate();
+		dragIcon.setVisible(true);
+	}
+	
+	public JMeterTreeListener()
+	{
+		dragIcon.validate();
+		dragIcon.setVisible(true);
+	}
+	
+	public void setModel(JMeterTreeModel m)
+	{
+		model = m;
+	}
+
+
+	/****************************************
+	 * Sets the ActionHandler attribute of the JMeterTreeListener object
+	 *
+	 *@param ah  The new ActionHandler value
+	 ***************************************/
+	public void setActionHandler(ActionListener ah)
+	{
+		actionHandler = ah;
+	}
+
+
+	/****************************************
+	 * Sets the JTree attribute of the JMeterTreeListener object
+	 *
+	 *@param tree  The new JTree value
+	 ***************************************/
+	public void setJTree(JTree tree)
+	{
+		this.tree = tree;
+	}
+
+
+	/****************************************
+	 * Sets the EndWindow attribute of the JMeterTreeListener object
+	 *
+	 *@param window  The new EndWindow value
+	 ***************************************/
+	public void setEndWindow(Container window)
+	{
+		endWindow = window;
+	}
+	
+	/****************************************
+	 * Gets the JTree attribute of the JMeterTreeListener object.
+	 *
+	 *@return tree The current JTree value.
+	 ***************************************/
+	public JTree getJTree()
+	{
+		return tree;
+	}
+
+
+	/****************************************
+	 * Gets the CurrentNode attribute of the JMeterTreeListener object
+	 *
+	 *@return   The CurrentNode value
+	 ***************************************/
+	public JMeterTreeNode getCurrentNode()
+	{
+		if(currentPath != null)
+		{
+			if(currentPath.getLastPathComponent() != null)
+			{
+				return (JMeterTreeNode)currentPath.getLastPathComponent();
+			}
+			else
+			{
+				return (JMeterTreeNode)currentPath.getParentPath().getLastPathComponent();
+			}
+		}
+		else
+		{
+			return (JMeterTreeNode)model.getRoot();
+		}
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JMeterTreeNode[] getSelectedNodes()
+	{
+		TreePath[] paths = tree.getSelectionPaths();
+		if(paths == null)
+		{
+			return new JMeterTreeNode[]{getCurrentNode()};
+		}
+		JMeterTreeNode[] nodes = new JMeterTreeNode[paths.length];
+		for(int i = 0; i < paths.length; i++)
+		{
+			nodes[i] = (JMeterTreeNode)paths[i].getLastPathComponent();
+		}
+
+		return nodes;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void removedSelectedNode()
+	{
+		currentPath = currentPath.getParentPath();
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void valueChanged(TreeSelectionEvent e)
+	{
+		currentPath = e.getNewLeadSelectionPath();
+		actionHandler.actionPerformed(new ActionEvent(this, 3333, JMeterUtils.getResString("edit")));
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param ev  Description of Parameter
+	 ***************************************/
+	public void mouseClicked(MouseEvent ev) { }
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void mouseReleased(MouseEvent e) 
+	{ 
+		if(dragging && draggedNode != getCurrentNode())
+		{
+			dragging = false;
+			JPopupMenu dragNdrop = new JPopupMenu();
+			JMenuItem item = new JMenuItem(JMeterUtils.getResString("Insert Before"));
+			item.addActionListener(actionHandler);
+			item.setActionCommand(DragNDrop.INSERT_BEFORE);
+			dragNdrop.add(item);
+			item = new JMenuItem(JMeterUtils.getResString("Insert After"));
+			item.addActionListener(actionHandler);
+			item.setActionCommand(DragNDrop.INSERT_AFTER);
+			dragNdrop.add(item);
+			item = new JMenuItem(JMeterUtils.getResString("Add as Child"));
+			item.addActionListener(actionHandler);
+			item.setActionCommand(DragNDrop.ADD);
+			dragNdrop.add(item);
+			dragNdrop.addSeparator();
+			item = new JMenuItem(JMeterUtils.getResString("Cancel"));
+			dragNdrop.add(item);
+			displayPopUp(e,dragNdrop);
+		}
+		dragging = false;
+	}
+	
+	public JMeterTreeNode getDraggedNode()
+	{
+		return draggedNode;
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param ev  Description of Parameter
+	 ***************************************/
+	public void mouseEntered(MouseEvent e) 
+	{ 
+	}
+	
+	private void changeSelectionIfDragging(MouseEvent e)
+	{
+		if(dragging)
+		{	
+			GuiPackage.getInstance().getMainFrame().drawDraggedComponent(dragIcon,e.getX(),e.getY());
+			if(tree.getPathForLocation(e.getX(), e.getY()) != null)
+			{
+				currentPath = tree.getPathForLocation(e.getX(), e.getY());
+				if(getCurrentNode() != draggedNode)
+				{
+					tree.setSelectionPath(currentPath);
+				}
+			}
+		}
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void mousePressed(MouseEvent e)
+	{
+		// Get the Main Frame.
+		MainFrame mainFrame = GuiPackage.getInstance().getMainFrame();
+
+		// Close any Main Menu that is open
+		mainFrame.closeMenu();
+		int selRow = tree.getRowForLocation(e.getX(), e.getY());
+		if(tree.getPathForLocation(e.getX(), e.getY()) != null)
+		{
+			currentPath = tree.getPathForLocation(e.getX(), e.getY());
+		}
+		if(selRow != -1)
+		{
+			//updateMainMenu(((JMeterGUIComponent)getCurrentNode().getUserObject()).createPopupMenu());
+			if(isRightClick(e))
+			{
+				if(tree.getSelectionCount() < 2)
+				{
+					tree.setSelectionPath(currentPath);
+				}
+				if(getCurrentNode().getUserObject() instanceof JMeterGUIComponent)
+				{
+					displayPopUp(e);
+				}
+			}
+		}
+	}
+	
+	public void mouseDragged(MouseEvent e)
+	{
+		if(!dragging)
+		{
+			dragging = true;
+			draggedNode = getCurrentNode();
+			
+		}
+		changeSelectionIfDragging(e);
+	}
+	
+	public void mouseMoved(MouseEvent e)
+	{
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param ev  Description of Parameter
+	 ***************************************/
+	public void mouseExited(MouseEvent ev) { }
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void keyPressed(KeyEvent e) { }
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void keyReleased(KeyEvent e) { }
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void keyTyped(KeyEvent e) { }
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 *@return   Description of the Returned Value
+	 ***************************************/
+	private boolean isRightClick(MouseEvent e)
+	{
+		return (MouseEvent.BUTTON2_MASK & e.getModifiers()) > 0 ||
+				(MouseEvent.BUTTON3_MASK == e.getModifiers());
+	}
+
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param addMenu  Description of Parameter
+	 ***************************************/
+	private void updateMainMenu(JPopupMenu menu)
+	{
+		try
+		{
+			Object model = getCurrentNode().getUserObject();
+			MainFrame mainFrame = GuiPackage.getInstance().getMainFrame();
+			mainFrame.setEditMenu(menu);
+		}
+		catch(NullPointerException e)
+		{
+			System.out.println("Null pointer: JMeterTreeListener.updateMenuItem()");
+			e.printStackTrace();
+		}
+	}
+
+	private void displayPopUp(MouseEvent e)
+	{
+		JPopupMenu pop = ((JMeterGUIComponent)getCurrentNode().getUserObject()).createPopupMenu();
+		displayPopUp(e,pop);
+	}
+	
+	private void displayPopUp(MouseEvent e,JPopupMenu popup)
+	{
+		if(popup != null)
+		{
+			popup.pack();
+			popup.show(tree, e.getX(), e.getY());
+			popup.setVisible(true);
+			popup.requestFocus();
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeModel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeModel.java
new file mode 100644
index 0000000..a9c1e64
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeModel.java
@@ -0,0 +1,214 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.tree;
+import java.util.*;
+import javax.swing.tree.*;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.control.gui.TestPlanGui;
+import org.apache.jmeter.control.gui.WorkBenchGui;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.threads.gui.ThreadGroupGui;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.testelement.TestPlan;
+import org.apache.jmeter.testelement.WorkBench;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.timers.Timer;
+import org.apache.jmeter.util.ListedHashTree;
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class JMeterTreeModel extends DefaultTreeModel
+{
+	private static ResourceBundle rb = ResourceBundle.getBundle("org.apache.jmeter.resources.messages");
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public JMeterTreeModel()
+	{
+		super(new JMeterTreeNode(new NamePanel()));
+		this.insertNodeInto(new JMeterTreeNode(new TestPlanGui()),
+				(JMeterTreeNode)getRoot(), 0);
+		this.insertNodeInto(new JMeterTreeNode(new WorkBenchGui()),
+				(JMeterTreeNode)getRoot(), 1);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param type  !ToDo (Parameter description)
+	 *@return      !ToDo (Return description)
+	 ***************************************/
+	public List getNodesOfType(Class type)
+	{
+		List nodeList = new LinkedList();
+		traverseAndFind(type, (JMeterTreeNode)this.getRoot(), nodeList);
+		return nodeList;
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param subTree                         !ToDo
+	 *@param current                         !ToDo
+	 *@exception IllegalUserActionException  !ToDo (Exception description)
+	 ***************************************/
+	public void addSubTree(ListedHashTree subTree, JMeterTreeNode current)
+			 throws IllegalUserActionException
+	{
+		Iterator iter = subTree.list().iterator();
+		while(iter.hasNext())
+		{
+			JMeterGUIComponent item = (JMeterGUIComponent)iter.next();
+			if(item instanceof TestPlanGui)
+			{
+				current = (JMeterTreeNode)((JMeterTreeNode)getRoot()).getChildAt(0);
+				current.configure(item.createTestElement());
+				addSubTree(subTree.get(item), current);
+			}
+			else
+			{
+				addSubTree(subTree.get(item), addComponent(item, current));
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param component                       !ToDo
+	 *@param node                            !ToDo
+	 *@return                                !ToDo (Return description)
+	 *@exception IllegalUserActionException  !ToDo (Exception description)
+	 ***************************************/
+	public JMeterTreeNode addComponent(Object component, JMeterTreeNode node)
+			 throws IllegalUserActionException
+	{
+		if((node.getUserObject() instanceof TestPlanGui) && !(component instanceof ThreadGroupGui))
+		{
+			throw new IllegalUserActionException("Only ThreadGroups can be added to Test Plan nodes");
+		}
+		if(node.getUserObject() instanceof AbstractConfigGui)
+		{
+			throw new IllegalUserActionException("This node cannot hold sub-elements");
+		}
+		JMeterTreeNode newNode = new JMeterTreeNode((JMeterGUIComponent)component);
+		this.insertNodeInto(newNode, node, node.getChildCount());
+		return newNode;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param node  !ToDo (Parameter description)
+	 ***************************************/
+	public void removeNodeFromParent(JMeterTreeNode node)
+	{
+		if(!(node.getUserObject() instanceof TestPlan) &&
+				!(node.getUserObject() instanceof WorkBench))
+		{
+			super.removeNodeFromParent(node);
+		}
+	}
+
+	private void traverseAndFind(Class type, JMeterTreeNode node, List nodeList)
+	{
+		if(type.isInstance(node.getUserObject()))
+		{
+			nodeList.add(node);
+		}
+		Enumeration enum = node.children();
+		while(enum.hasMoreElements())
+		{
+			JMeterTreeNode child = (JMeterTreeNode)enum.nextElement();
+			traverseAndFind(type, child, nodeList);
+		}
+	}
+
+	public ListedHashTree getCurrentSubTree(JMeterTreeNode node)
+	{
+		ListedHashTree hashTree = new ListedHashTree(node);
+		Enumeration enum = node.children();
+		while(enum.hasMoreElements())
+		{
+			JMeterTreeNode child = (JMeterTreeNode)enum.nextElement();
+			hashTree.add(node,getCurrentSubTree(child));
+		}
+		return hashTree;
+	}
+
+	public ListedHashTree getTestPlan()
+	{
+		return getCurrentSubTree((JMeterTreeNode)((JMeterTreeNode)this.getRoot()).getChildAt(0));
+	}
+	
+	public void clearTestPlan()
+	{
+		super.removeNodeFromParent((JMeterTreeNode)getChild(getRoot(), 0));
+		this.insertNodeInto(new JMeterTreeNode(new TestPlanGui()),
+				(JMeterTreeNode)getRoot(), 0);
+		super.removeNodeFromParent((JMeterTreeNode)getChild(getRoot(), 1));
+		this.insertNodeInto(new JMeterTreeNode(new WorkBenchGui()),
+				(JMeterTreeNode)getRoot(), 1);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeNode.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeNode.java
new file mode 100644
index 0000000..2ffa00f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/tree/JMeterTreeNode.java
@@ -0,0 +1,139 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.tree;
+
+import javax.swing.tree.DefaultMutableTreeNode;
+import javax.swing.tree.TreeNode;
+import javax.swing.JPopupMenu;
+import java.util.Collection;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import java.awt.event.MouseListener;
+import java.awt.event.MouseEvent;
+import org.apache.jmeter.testelement.TestElement;
+import javax.swing.ImageIcon;
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:44 $
+ *@version    1.0
+ ***********************************************************/
+
+public class JMeterTreeNode extends DefaultMutableTreeNode implements JMeterGUIComponent
+{
+
+	public JMeterTreeNode()
+	{
+		this.setUserObject(new org.apache.jmeter.control.gui.WorkBenchGui());
+	}
+
+	public JMeterTreeNode(JMeterGUIComponent userObj)
+	{
+		super(userObj);
+	}
+	
+	public ImageIcon getIcon()
+	{
+		return null;
+	}
+
+	public Collection getMenuCategories()
+	{
+		return ((JMeterGUIComponent)getUserObject()).getMenuCategories();
+	}
+
+	public JPopupMenu createPopupMenu()
+	{
+		return ((JMeterGUIComponent)getUserObject()).createPopupMenu();
+	}
+
+	public void configure(TestElement element)
+	{
+		((JMeterGUIComponent)getUserObject()).configure(element);
+	}
+
+	public TestElement createTestElement()
+	{
+		return ((JMeterGUIComponent)getUserObject()).createTestElement();
+	}
+
+	public String getStaticLabel()
+	{
+		return ((JMeterGUIComponent)getUserObject()).getStaticLabel();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  name  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setName(String name)
+	{
+		Object userObj = getUserObject();
+		((JMeterGUIComponent)userObj).setName(name);
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getName()
+	{
+		Object userObj = getUserObject();
+		return ((JMeterGUIComponent)userObj).getName();
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/ButtonPanel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/ButtonPanel.java
new file mode 100644
index 0000000..8958d6a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/ButtonPanel.java
@@ -0,0 +1,185 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */package org.apache.jmeter.gui.util;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class ButtonPanel extends JPanel
+{
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static int ADD_BUTTON = 1;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static int EDIT_BUTTON = 2;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static int DELETE_BUTTON = 3;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static int LOAD_BUTTON = 4;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static int SAVE_BUTTON = 5;
+
+	private JButton add, delete, edit, load, save;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ButtonPanel()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param button    !ToDo
+	 *@param listener  !ToDo
+	 ***************************************/
+	public void addButtonListener(int button, ActionListener listener)
+	{
+		switch (button)
+		{
+			case ADD_BUTTON:
+				add.addActionListener(listener);
+				break;
+			case EDIT_BUTTON:
+				edit.addActionListener(listener);
+				break;
+			case DELETE_BUTTON:
+				delete.addActionListener(listener);
+				break;
+			case LOAD_BUTTON:
+				load.addActionListener(listener);
+				break;
+			case SAVE_BUTTON:
+				save.addActionListener(listener);
+				break;
+		}
+	}
+
+	private void initButtonMap() { }
+
+	private void init()
+	{
+		add = new JButton(JMeterUtils.getResString("add"));
+		add.setActionCommand("Add");
+		edit = new JButton(JMeterUtils.getResString("edit"));
+		edit.setActionCommand("Edit");
+		delete = new JButton(JMeterUtils.getResString("delete"));
+		delete.setActionCommand("Delete");
+		load = new JButton(JMeterUtils.getResString("load"));
+		load.setActionCommand("Load");
+		save = new JButton(JMeterUtils.getResString("save"));
+		save.setActionCommand("Save");
+		Dimension d = delete.getPreferredSize();
+		add.setPreferredSize(d);
+		edit.setPreferredSize(d);
+		//close.setPreferredSize(d);
+		load.setPreferredSize(d);
+		save.setPreferredSize(d);
+		GridBagLayout g = new GridBagLayout();
+		this.setLayout(g);
+		GridBagConstraints c = new GridBagConstraints();
+		c.fill = c.NONE;
+		c.gridwidth = 1;
+		c.gridheight = 1;
+		c.gridx = 1;
+		c.gridy = 1;
+		g.setConstraints(add, c);
+		this.add(add);
+		c.gridx = 2;
+		c.gridy = 1;
+		g.setConstraints(edit, c);
+		this.add(edit);
+		c.gridx = 3;
+		c.gridy = 1;
+		g.setConstraints(delete, c);
+		this.add(delete);
+		/*
+		 * c.gridx = 1;
+		 * c.gridy = 2;
+		 * g.setConstraints(close, c);
+		 * panel.add(close);
+		 */
+		c.gridx = 2;
+		c.gridy = 2;
+		g.setConstraints(load, c);
+		this.add(load);
+		c.gridx = 3;
+		c.gridy = 2;
+		g.setConstraints(save, c);
+		this.add(save);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Entries
new file mode 100644
index 0000000..deadb3f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Entries
@@ -0,0 +1,21 @@
+/ButtonPanel.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/ComponentUtil.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/FileDialoger.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/FilePanel.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/FocusRequester.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JLabeledChoice.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JLabeledField.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JLabeledPasswordField.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JLabeledTextArea.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JLabeledTextField.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JLabeledTextField.java_old/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JMeterColor.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/JMeterMenuBar.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/MenuFactory.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/MenuInfo.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/NumberFieldErrorListener.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/PowerTableModel.java/1.2/Wed Aug 14 02:52:18 2002//Tv1_7_3
+/TextAreaCellRenderer.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+/TextAreaTableCellEditor.java/1.2/Wed Aug 14 02:52:18 2002//Tv1_7_3
+/VerticalLayout.java/1.1/Sun Aug 11 19:24:44 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Repository
new file mode 100644
index 0000000..a2f1991
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/gui/util
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/ComponentUtil.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/ComponentUtil.java
new file mode 100644
index 0000000..ec2778d
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/ComponentUtil.java
@@ -0,0 +1,147 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */package org.apache.jmeter.gui.util;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author bo.regnlin@pc.nu (Bo Regnlin)
+ * @version 1.0
+ */
+
+import java.awt.Dimension;
+import java.awt.Component;
+
+/**
+ * This class is a Util for awt Component and could be
+ * used to place them in center of an other.
+ *
+ *
+ * @author  <a href="mailto:bo.regnlin@pc.nu">Bo Regnlin</a>
+* @version 1.0
+ */
+public class ComponentUtil
+{
+  /**
+		 * Use this static method if you want to center
+	  * and set its proposion compared to the size of
+	  * the current users screen size.
+	  * Valid percent is between +-(0-100) minus is treated
+	  * as plus, bigger than 100 is always set to 100.
+		 *
+		 *@param  component The component you want to center and set
+size on.
+		 *@param  percentOfScreen The percent of the current screensize
+you want
+	  *        the component to be.
+		 */
+  public static void centerComponentInWindow(Component component, int
+percentOfScreen)
+  {
+	 if(percentOfScreen < 0)
+	 {
+		centerComponentInWindow(component, - percentOfScreen);
+		return;
+	 }
+	 if(percentOfScreen > 100)
+	 {
+		centerComponentInWindow(component, 100);
+		return;
+	 }
+	 double percent = percentOfScreen / 100.d;
+	 Dimension dimension = component.getToolkit().getScreenSize();
+	 component.setSize((int)(dimension.getWidth()*percent),
+							 (int)(dimension.getHeight()*percent));
+	 centerComponentInWindow(component);
+  }
+
+  /**
+		 * Use this static method if you want to center a component in
+Window.
+		 *
+		 *@param  component The component you want to center in window.
+		 */
+  public static void centerComponentInWindow(Component component)
+  {
+	 Dimension dimension = component.getToolkit().getScreenSize();
+
+	 component.setLocation((int)((dimension.getWidth()-component.getWidth())/2),
+								  (int)((dimension.getHeight()-component.getHeight
+())/2));
+	 component.validate();
+	 component.repaint();
+  }
+
+  /**
+		 * Use this static method if you want to center
+	  * a component over an other component.
+		 *
+		 *@param  parent The component you want to use to place it on.
+		 *@param  toBeCentered The component you want to center.
+		 */
+  public static void centerComponentInComponent(Component parent, Component
+toBeCentered)
+  {
+	 toBeCentered.setLocation((int)parent.getX() + (int)((parent.getWidth()-
+toBeCentered.getWidth())/2),
+									 (int)parent.getY() + (int)((parent.getHeight()-
+toBeCentered.getHeight())/2));
+
+	 toBeCentered.validate();
+	 toBeCentered.repaint();
+  }
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FileDialoger.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FileDialoger.java
new file mode 100644
index 0000000..131b9f3
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FileDialoger.java
@@ -0,0 +1,190 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */package org.apache.jmeter.gui.util;
+import java.io.*;
+import javax.swing.*;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.JMeterFileFilter;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class FileDialoger
+{
+	/****************************************
+	 * The last directory visited by the user while choosing Files.
+	 ***************************************/
+	public static String lastJFCDirectory = null;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public FileDialoger() { }
+
+	/****************************************
+	 * Prompts the user to choose a file from their filesystems for our own devious
+	 * uses. This method maintains the last directory the user visited before
+	 * dismissing the dialog. This does NOT imply they actually chose a file from
+	 * that directory, only that they closed the dialog there. It is the caller's
+	 * responsibility to check to see if the selected file is non-null.
+	 *
+	 *@return    !ToDo (Return description)
+	 *@returns   The JFileChooser that interacted with the user, after they are
+	 *      finished using it (accept or otherwise).
+	 ***************************************/
+	public static JFileChooser promptToOpenFile(String[] exts)
+	{
+		JFileChooser jfc = null;
+
+		if(lastJFCDirectory == null)
+		{
+			String start = JMeterUtils.getPropDefault("user.dir", "");
+
+			if(!start.equals(""))
+			{
+				jfc = new JFileChooser(start);
+			}
+			else
+			{
+				jfc = new JFileChooser();
+			}
+		}
+		else
+		{
+			jfc = new JFileChooser(lastJFCDirectory);
+		}
+
+		jfc.addChoosableFileFilter(new JMeterFileFilter(exts));
+		int retVal = jfc.showOpenDialog(GuiPackage.getInstance().getMainFrame());
+		lastJFCDirectory = jfc.getCurrentDirectory().getAbsolutePath();
+
+		if(retVal == jfc.APPROVE_OPTION)
+		{
+			return jfc;
+		}
+		else 
+		{
+			return null;
+		}
+	}
+	
+	public static JFileChooser promptToOpenFile()
+	{
+		return promptToOpenFile(new String[0]);
+	}
+
+	/****************************************
+	 * Prompts the user to choose a file from their filesystems for our own devious
+	 * uses. This method maintains the last directory the user visited before
+	 * dismissing the dialog. This does NOT imply they actually chose a file from
+	 * that directory, only that they closed the dialog there. It is the caller's
+	 * responsibility to check to see if the selected file is non-null.
+	 *
+	 *@param filename  !ToDo (Parameter description)
+	 *@return          !ToDo (Return description)
+	 *@returns         The JFileChooser that interacted with the user, after they
+	 *      are finished using it (accept or otherwise).
+	 *@see             #promptToOpenFile
+	 ***************************************/
+	public static JFileChooser promptToSaveFile(String filename)
+	{
+		JFileChooser jfc = null;
+		if(lastJFCDirectory == null)
+		{
+			String start = JMeterUtils.getPropDefault("user.dir", "");
+			if(!start.equals(""))
+			{
+				jfc = new JFileChooser(start);
+			}
+			else
+			{
+				jfc = new JFileChooser();
+			}
+		}
+		else
+		{
+			jfc = new JFileChooser(lastJFCDirectory);
+		}
+		String ext = ".jmx";
+		if(filename != null)
+		{
+			jfc.setSelectedFile(new File(lastJFCDirectory, filename));
+			int i = -1;
+			if((i = filename.indexOf(".")) > -1)
+			{
+				ext = filename.substring(i);
+			}
+		}		
+		
+		jfc.addChoosableFileFilter(new JMeterFileFilter(new String[]{ext}));
+
+
+		int retVal = jfc.showSaveDialog(GuiPackage.getInstance().getMainFrame());
+		lastJFCDirectory = jfc.getCurrentDirectory().getAbsolutePath();
+		if(retVal == jfc.APPROVE_OPTION)
+		{
+			return jfc;
+		}
+		else 
+		{
+			return null;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FilePanel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FilePanel.java
new file mode 100644
index 0000000..b2a61d0
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FilePanel.java
@@ -0,0 +1,165 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */package org.apache.jmeter.gui.util;
+import javax.swing.*;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.util.*;
+import javax.swing.event.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ *  Title: Jakarta JMeter Description: Copyright: Copyright (c) 2002 Company:
+ *  Apache Software Foundation
+ *
+ *@author     Michael Stover
+ *@created    April 18, 2002
+ *@version    1.0
+ */
+
+public class FilePanel extends JPanel implements ActionListener
+{
+
+	JTextField filename = new JTextField(30);
+	JLabel label = new JLabel(JMeterUtils.getResString("file_visualizer_filename"));
+	JButton browse = new JButton(JMeterUtils.getResString("browse"));
+	List listeners = new LinkedList();
+	
+	/**
+	 *  Constructor for the FilePanel object
+	 */
+	public FilePanel()
+	{
+		init();
+	}
+
+	/**
+	 *  Constructor for the FilePanel object
+	 */
+	public FilePanel(ChangeListener l)
+	{
+		init();
+		listeners.add(l);
+	}
+	
+	public void addChangeListener(ChangeListener l)
+	{
+		listeners.add(l);
+	}
+
+	/**
+	 *  Description of the Method
+	 */
+	private void init()
+	{
+		add(label);
+		add(filename);
+		filename.addActionListener(this);
+		add(browse);
+		browse.setActionCommand("browse");
+		browse.addActionListener(this);
+	}
+
+	/**
+	 *  Gets the filename attribute of the FilePanel object
+	 *
+	 *@return    The filename value
+	 */
+	public String getFilename()
+	{
+		return filename.getText();
+	}
+
+	/**
+	 *  Sets the filename attribute of the FilePanel object
+	 *
+	 *@param  f  The new filename value
+	 */
+	public void setFilename(String f)
+	{
+		filename.setText(f);
+	}
+	
+	private void fireFileChanged()
+	{
+		Iterator iter = listeners.iterator();
+		while(iter.hasNext())
+		{
+			((ChangeListener)iter.next()).stateChanged(new ChangeEvent(this));
+		}
+	}
+			
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  e  Description of the Parameter
+	 */
+	public void actionPerformed(ActionEvent e)
+	{
+		if(e.getActionCommand().equals("browse"))
+		{
+			JFileChooser chooser = FileDialoger.promptToOpenFile(new String[]{".jtl"});
+			if(chooser != null && chooser.getSelectedFile() != null)
+			{
+				filename.setText(chooser.getSelectedFile().getPath());
+				fireFileChanged();
+			}
+		}
+		else
+		{
+			fireFileChanged();
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FocusRequester.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FocusRequester.java
new file mode 100644
index 0000000..e025d95
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/FocusRequester.java
@@ -0,0 +1,46 @@
+package org.apache.jmeter.gui.util;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ * Note: This helper class appeared in JavaWorld in June 2001
+ * (http://www.javaworld.com) and was written by Michael Daconta.
+ *
+ *@author    Kevin Hammond
+ *@created   xxxx
+ *@version   xxxx
+ ***************************************/
+
+public class FocusRequester implements Runnable
+{
+	private Component comp;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param comp  !ToDo (Parameter description)
+	 ***************************************/
+	public FocusRequester(Component comp)
+	{
+		this.comp = comp;
+		try
+		{
+			SwingUtilities.invokeLater(this);
+		}
+		catch(Exception e)
+		{
+			e.printStackTrace();
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void run()
+	{
+		comp.requestFocus();
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledChoice.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledChoice.java
new file mode 100644
index 0000000..2a5555b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledChoice.java
@@ -0,0 +1,284 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.util;
+
+import java.util.*;
+import javax.swing.*;
+import java.awt.event.*;
+import java.awt.Component;
+import java.awt.Insets;
+import javax.swing.event.ChangeListener;
+import javax.swing.event.ChangeEvent;
+import java.util.*;
+import javax.swing.plaf.basic.BasicComboBoxEditor;
+
+
+public class JLabeledChoice extends JPanel implements JLabeledField
+{
+	 private JLabel mLabel = new JLabel();
+	 private JComboBox choiceList;
+	 private ArrayList mChangeListeners = new ArrayList(3);  // Maybe move to vector if MT problems occur
+	 private JButton delete,add;
+
+	 /**
+	  * Default constructor, The label and the Text field are left empty.
+	  */
+	 public JLabeledChoice()
+	 {
+		  super();
+		  choiceList = new JComboBox();
+		  init();
+	 }
+
+	 public List getComponentList()
+	 {
+		List comps = new LinkedList();
+		comps.add(mLabel);
+		comps.add(choiceList);
+		return comps;
+	 }
+
+	 /**
+	  * Constructs a new component with the label displaying the
+	  * passed text.
+	  *
+	  * @param pLabel The text to in the label.
+	  */
+	 public JLabeledChoice(String pLabel,String[] items)
+	 {
+		  super();
+		  mLabel.setText(pLabel);
+		  choiceList = new JComboBox(items);
+		choiceList.setEditable(false);
+		  init();
+	 }
+
+	 public JLabeledChoice(String pLabel,String[] items,boolean editable)
+	 {
+		super();
+		  mLabel.setText(pLabel);
+		  choiceList = new JComboBox(items);
+			choiceList.setEditable(editable);
+		  init();
+	 }
+
+	 /**
+	  * Initialises all of the components on this panel.
+	  */
+	 private void init()
+	 {
+		/*if(choiceList.isEditable())
+		{
+			choiceList.addActionListener(new ComboListener());
+		}*/
+		choiceList.setBorder(BorderFactory.createLoweredBevelBorder());
+		  // Register the handler for focus listening. This handler will
+		  // only notify the registered when the text changes from when
+		  // the focus is gained to when it is lost.
+		  choiceList.addItemListener(new ItemListener(){
+
+				/**
+				 * Callback method when the focus to the Text Field component
+				 * is lost.
+				 *
+				 * @param pFocusEvent The focus event that occured.
+				 */
+				public void itemStateChanged(ItemEvent e)
+				{
+					if(e.getStateChange() == e.SELECTED)
+					{
+						notifyChangeListeners();
+					}
+				}
+		  });
+
+		  // Add the sub components
+		  this.add(mLabel);
+		  this.add(choiceList);
+		  if(choiceList.isEditable())
+		  {
+			add = new JButton("Add");
+			add.setMargin(new Insets(1,1,1,1));
+			add.addActionListener(new AddListener());
+			this.add(add);
+			delete = new JButton("Del");
+			delete.setMargin(new Insets(1,1,1,1));
+			delete.addActionListener(new DeleteListener());
+			this.add(delete);
+		  }
+
+	 }
+
+	 /**
+	  * Set the text displayed in the label.
+	  *
+	  * @param pLabel The new label text.
+	  */
+	 public void setLabel(String pLabel)
+	 {
+		  mLabel.setText(pLabel);
+	 }
+
+	 /**
+	  * Set the text displayed in the Text Field.
+	  *
+	  * @param pText The new text to display in the text field.
+	  */
+	 public void setText(String pText)
+	 {
+		  choiceList.setSelectedItem(pText);
+	 }
+
+	 /**
+	  * Returns the text in the Text Field.
+	  *
+	  * @return The text in the Text Field.
+	  */
+	 public String getText()
+	 {
+		  return (String)choiceList.getSelectedItem();
+	 }
+
+	 public Object[] getSelectedItems()
+	 {
+		return choiceList.getSelectedObjects();
+	 }
+
+	 public String[] getItems()
+	 {
+		String[] items = new String[choiceList.getItemCount()];
+		for (int i = 0; i < items.length; i++)
+		{
+			items[i] = (String)choiceList.getItemAt(i);
+		}
+		return items;
+	 }
+
+	 /**
+	  * Returns the text of the label.
+	  *
+	  * @return The text of the label.
+	  */
+	 public String getLabel()
+	 {
+		  return mLabel.getText();
+	 }
+
+	 /**
+	  * Adds a change listener, that will be notified when the text in the
+	  * text field is changed. The ChangeEvent that will be passed
+	  * to registered listeners will contain this object as the source, allowing
+	  * the new text to be extracted using the {@link #getText() getText} method.
+	  *
+	  * @param pChangeListener The listener to add
+	  */
+	 public void addChangeListener(ChangeListener pChangeListener)
+	 {
+		  mChangeListeners.add(pChangeListener);
+	 }
+
+	 /**
+	  * Removes a change listener.
+	  *
+	  * @param pChangeListener The change listener to remove.
+	  */
+	 public void removeChangeListener(ChangeListener pChangeListener)
+	 {
+		  mChangeListeners.remove(pChangeListener);
+	 }
+
+	 /**
+	  * Notify all registered change listeners that the
+	  * text in the text field has changed.
+	  */
+	 private void notifyChangeListeners()
+	 {
+		  ChangeEvent ce = new ChangeEvent(this);
+		  for (int index = 0; index < mChangeListeners.size(); index ++)
+		  {
+				((ChangeListener)mChangeListeners.get(index)).stateChanged(ce);
+		  }
+	 }
+
+	 private class AddListener implements ActionListener
+	 {
+
+		public void actionPerformed(ActionEvent e)
+		{
+			Object item = choiceList.getSelectedItem();
+			int index = choiceList.getSelectedIndex();
+			if(!item.equals(choiceList.getItemAt(index)))
+			{
+				choiceList.addItem(item);
+			}
+			choiceList.setSelectedItem(item);
+			notifyChangeListeners();
+		}
+	 }
+
+
+	 private class DeleteListener implements ActionListener
+	 {
+
+		public void actionPerformed(ActionEvent e)
+		{
+			if(choiceList.getItemCount() > 1)
+			{
+				choiceList.removeItemAt(choiceList.getSelectedIndex());
+				notifyChangeListeners();
+			}
+		}
+	 }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledField.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledField.java
new file mode 100644
index 0000000..8124d78
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledField.java
@@ -0,0 +1,77 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+
+import javax.swing.event.*;
+import java.util.*;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public interface JLabeledField
+{
+
+	public String getText();
+	public void setText(String text);
+	public void setLabel(String pLabel);
+	public void addChangeListener(ChangeListener pChangeListener);
+	public List getComponentList();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledPasswordField.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledPasswordField.java
new file mode 100644
index 0000000..2b5fa08
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledPasswordField.java
@@ -0,0 +1,91 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+
+import javax.swing.JPasswordField;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public class JLabeledPasswordField extends JLabeledTextField
+{
+
+	public JLabeledPasswordField()
+	{
+		super();
+	}
+
+	/**
+	  * Constructs a new component with the label displaying the
+	  * passed text.
+	  *
+	  * @param pLabel The text to in the label.
+	  */
+	 public JLabeledPasswordField(String pLabel)
+	 {
+		  super(pLabel);
+	 }
+
+	 protected void createTextField()
+	 {
+		mTextField = new JPasswordField(30);
+	 }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextArea.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextArea.java
new file mode 100644
index 0000000..629dd74
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextArea.java
@@ -0,0 +1,242 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+
+import javax.swing.*;
+import java.util.*;
+import javax.swing.text.Document;
+import javax.swing.event.ChangeListener;
+import javax.swing.event.ChangeEvent;
+import java.awt.BorderLayout;
+import java.util.ArrayList;
+import java.awt.event.FocusListener;
+import java.awt.event.FocusEvent;
+
+/**
+ * A Helper component that wraps a JTextField with a label into
+ * a JPanel (this). This component also has an efficient event handling
+ * mechanism for handling the text changing in the Text Field. The registered
+ * change listeners are only called when the text has changed.
+ *
+ * @author S.Coleman
+ */
+public class JLabeledTextArea extends JPanel implements JLabeledField
+{
+	 private JLabel mLabel = new JLabel();
+	 private JTextArea mTextArea = new JTextArea(4,40);
+	 private ArrayList mChangeListeners = new ArrayList(3);  // Maybe move to vector if MT problems occur
+
+	 /**
+	  * Default constructor, The label and the Text field are left empty.
+	  */
+	 public JLabeledTextArea()
+	 {
+		  super();
+		  init();
+	 }
+
+	 public List getComponentList()
+	 {
+		List comps = new LinkedList();
+		comps.add(mLabel);
+		comps.add(mTextArea);
+		return comps;
+	 }
+
+	 /**
+	  * Constructs a new component with the label displaying the
+	  * passed text.
+	  *
+	  * @param pLabel The text to in the label.
+	  */
+	 public JLabeledTextArea(String pLabel,Document docModel)
+	 {
+		  super();
+		  mLabel.setText(pLabel);
+		  if(docModel != null)
+		  {
+			setDocumentModel(docModel);
+		  }
+		  init();
+	 }
+
+	 public void setDocumentModel(Document docModel)
+	 {
+		mTextArea.setDocument(docModel);
+	 }
+
+	 /**
+	  * Initialises all of the components on this panel.
+	  */
+	 private void init()
+	 {
+		this.setLayout(new BorderLayout());
+		mTextArea.setLineWrap(true);
+		mTextArea.setWrapStyleWord(true);
+		  // Register the handler for focus listening. This handler will
+		  // only notify the registered when the text changes from when
+		  // the focus is gained to when it is lost.
+		  mTextArea.addFocusListener(new FocusListener(){
+
+				String oldValue = ""; // A temporary cache.
+
+				/**
+				 * Callback method when the focus to the Text Field component
+				 * is lost.
+				 *
+				 * @param pFocusEvent The focus event that occured.
+				 */
+				public void focusLost(FocusEvent pFocusEvent)
+				{
+					 // Compare if the value has changed, since we received focus.
+					 if (oldValue.equals(mTextArea.getText()) == false)
+					 {
+						  notifyChangeListeners();
+					 }
+				}
+
+				/**
+				 * Catch what the value was when focus was gained.
+				 */
+				public void focusGained(FocusEvent pFocusEvent)
+				{
+					 oldValue = mTextArea.getText();
+				}
+		  });
+		  mTextArea.setBorder(BorderFactory.createLoweredBevelBorder());
+
+		  // Add the sub components
+		  this.add(mLabel,BorderLayout.NORTH);
+		  this.add(mTextArea,BorderLayout.CENTER);
+	 }
+
+	 /**
+	  * Set the text displayed in the label.
+	  *
+	  * @param pLabel The new label text.
+	  */
+	 public void setLabel(String pLabel)
+	 {
+		  mLabel.setText(pLabel);
+	 }
+
+	 /**
+	  * Set the text displayed in the Text Field.
+	  *
+	  * @param pText The new text to display in the text field.
+	  */
+	 public void setText(String pText)
+	 {
+		  mTextArea.setText(pText);
+	 }
+
+	 /**
+	  * Returns the text in the Text Field.
+	  *
+	  * @return The text in the Text Field.
+	  */
+	 public String getText()
+	 {
+		  return mTextArea.getText();
+	 }
+
+	 /**
+	  * Returns the text of the label.
+	  *
+	  * @return The text of the label.
+	  */
+	 public String getLabel()
+	 {
+		  return mLabel.getText();
+	 }
+
+	 /**
+	  * Adds a change listener, that will be notified when the text in the
+	  * text field is changed. The ChangeEvent that will be passed
+	  * to registered listeners will contain this object as the source, allowing
+	  * the new text to be extracted using the {@link #getText() getText} method.
+	  *
+	  * @param pChangeListener The listener to add
+	  */
+	 public void addChangeListener(ChangeListener pChangeListener)
+	 {
+		  mChangeListeners.add(pChangeListener);
+	 }
+
+	 /**
+	  * Removes a change listener.
+	  *
+	  * @param pChangeListener The change listener to remove.
+	  */
+	 public void removeChangeListener(ChangeListener pChangeListener)
+	 {
+		  mChangeListeners.remove(pChangeListener);
+	 }
+
+	 /**
+	  * Notify all registered change listeners that the
+	  * text in the text field has changed.
+	  */
+	 private void notifyChangeListeners()
+	 {
+		  ChangeEvent ce = new ChangeEvent(this);
+		  for (int index = 0; index < mChangeListeners.size(); index ++)
+		  {
+				((ChangeListener)mChangeListeners.get(index)).stateChanged(ce);
+		  }
+	 }
+
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextField.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextField.java
new file mode 100644
index 0000000..883e25f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextField.java
@@ -0,0 +1,251 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.gui.util;
+
+import javax.swing.*;
+import java.util.*;
+import javax.swing.event.ChangeListener;
+import javax.swing.event.ChangeEvent;
+import java.util.ArrayList;
+import java.awt.event.FocusListener;
+import java.awt.event.FocusEvent;
+import java.awt.FlowLayout;
+
+/**
+ * A Helper component that wraps a JTextField with a label into
+ * a JPanel (this). This component also has an efficient event handling
+ * mechanism for handling the text changing in the Text Field. The registered
+ * change listeners are only called when the text has changed.
+ *
+ * @author S.Coleman
+ */
+public class JLabeledTextField extends JPanel implements JLabeledField
+{
+	 private JLabel mLabel = new JLabel();
+	 protected JTextField mTextField;
+	 private ArrayList mChangeListeners = new ArrayList(3);  // Maybe move to vector if MT problems occur
+
+	 /**
+	  * Default constructor, The label and the Text field are left empty.
+	  */
+	 public JLabeledTextField()
+	 {
+		  super();
+		  createTextField(20);
+		  init();
+	 }
+
+	 public List getComponentList()
+	 {
+		List comps = new LinkedList();
+		comps.add(mLabel);
+		comps.add(mTextField);
+		return comps;
+	 }
+
+	 protected void createTextField(int size)
+	 {
+		mTextField = new JTextField(size);
+	 }
+
+	 /**
+	  * Constructs a new component with the label displaying the
+	  * passed text.
+	  *
+	  * @param pLabel The text to in the label.
+	  */
+	 public JLabeledTextField(String pLabel)
+	 {
+		  super();
+		  createTextField(20);
+		  mLabel.setText(pLabel);
+		  init();
+	 }
+	 
+	 public JLabeledTextField(String pLabel,int size)
+	 {
+		  super();
+		  createTextField(size);
+		  mLabel.setText(pLabel);
+		  init();
+	 }
+
+	 public void setEnabled(boolean enable)
+	 {
+		super.setEnabled(enable);
+		mTextField.setEnabled(enable);
+	 }
+
+	 /**
+	  * Initialises all of the components on this panel.
+	  */
+	 private void init()
+	 {
+		this.setLayout(new FlowLayout(FlowLayout.LEFT));
+		  // Register the handler for focus listening. This handler will
+		  // only notify the registered when the text changes from when
+		  // the focus is gained to when it is lost.
+		  mTextField.addFocusListener(new FocusListener(){
+
+				String oldValue = ""; // A temporary cache.
+
+				/**
+				 * Callback method when the focus to the Text Field component
+				 * is lost.
+				 *
+				 * @param pFocusEvent The focus event that occured.
+				 */
+				public void focusLost(FocusEvent pFocusEvent)
+				{
+					 // Compare if the value has changed, since we received focus.
+					 if (oldValue.equals(mTextField.getText()) == false)
+					 {
+						  notifyChangeListeners();
+					 }
+				}
+
+				/**
+				 * Catch what the value was when focus was gained.
+				 */
+				public void focusGained(FocusEvent pFocusEvent)
+				{
+					 oldValue = mTextField.getText();
+				}
+		  });
+
+		  // Add the sub components
+		  this.add(mLabel);
+		  this.add(mTextField);
+	 }
+
+	 /**
+	  * Set the text displayed in the label.
+	  *
+	  * @param pLabel The new label text.
+	  */
+	 public void setLabel(String pLabel)
+	 {
+		  mLabel.setText(pLabel);
+	 }
+
+	 /**
+	  * Set the text displayed in the Text Field.
+	  *
+	  * @param pText The new text to display in the text field.
+	  */
+	 public void setText(String pText)
+	 {
+		  mTextField.setText(pText);
+	 }
+
+	 /**
+	  * Returns the text in the Text Field.
+	  *
+	  * @return The text in the Text Field.
+	  */
+	 public String getText()
+	 {
+		  return mTextField.getText();
+	 }
+
+	 /**
+	  * Returns the text of the label.
+	  *
+	  * @return The text of the label.
+	  */
+	 public String getLabel()
+	 {
+		  return mLabel.getText();
+	 }
+
+	 /**
+	  * Adds a change listener, that will be notified when the text in the
+	  * text field is changed. The ChangeEvent that will be passed
+	  * to registered listeners will contain this object as the source, allowing
+	  * the new text to be extracted using the {@link #getText() getText} method.
+	  *
+	  * @param pChangeListener The listener to add
+	  */
+	 public void addChangeListener(ChangeListener pChangeListener)
+	 {
+		  mChangeListeners.add(pChangeListener);
+	 }
+
+	 /**
+	  * Removes a change listener.
+	  *
+	  * @param pChangeListener The change listener to remove.
+	  */
+	 public void removeChangeListener(ChangeListener pChangeListener)
+	 {
+		  mChangeListeners.remove(pChangeListener);
+	 }
+
+	 /**
+	  * Notify all registered change listeners that the
+	  * text in the text field has changed.
+	  */
+	 protected void notifyChangeListeners()
+	 {
+		  ChangeEvent ce = new ChangeEvent(this);
+		  for (int index = 0; index < mChangeListeners.size(); index ++)
+		  {
+				((ChangeListener)mChangeListeners.get(index)).stateChanged(ce);
+		  }
+	 }
+
+
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextField.java_old b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextField.java_old
new file mode 100644
index 0000000..79d250a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JLabeledTextField.java_old
@@ -0,0 +1,167 @@
+package org.apache.jmeter.gui.util;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.util.ArrayList;
+import javax.swing.*;
+import javax.swing.event.ChangeEvent;
+import javax.swing.event.ChangeListener;
+
+/****************************************
+ * A Helper component that wraps a JTextField with a label into a JPanel (this).
+ * This component also has an efficient event handling mechanism for handling
+ * the text changing in the Text Field. The registered change listeners are only
+ * called when the text has changed.
+ *
+ *@author    S.Coleman
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class JLabeledTextField extends JPanel
+{
+	private JLabel mLabel = new JLabel();
+	private JTextField mTextField = new JTextField(30);
+	private ArrayList mChangeListeners = new ArrayList(3);// Maybe move to vector if MT problems occur
+
+	/****************************************
+	 * Default constructor, The label and the Text field are left empty.
+	 ***************************************/
+	public JLabeledTextField()
+	{
+		super();
+		init();
+	}
+
+	/****************************************
+	 * Constructs a new component with the label displaying the passed text.
+	 *
+	 *@param pLabel  The text to in the label.
+	 ***************************************/
+	public JLabeledTextField(String pLabel)
+	{
+		super();
+		mLabel.setText(pLabel);
+		init();
+	}
+
+	/****************************************
+	 * Set the text displayed in the label.
+	 *
+	 *@param pLabel  The new label text.
+	 ***************************************/
+	public void setLabel(String pLabel)
+	{
+		mLabel.setText(pLabel);
+	}
+
+	/****************************************
+	 * Set the text displayed in the Text Field.
+	 *
+	 *@param pText  The new text to display in the text field.
+	 ***************************************/
+	public void setText(String pText)
+	{
+		mTextField.setText(pText);
+	}
+
+	/****************************************
+	 * Returns the text in the Text Field.
+	 *
+	 *@return   The text in the Text Field.
+	 ***************************************/
+	public String getText()
+	{
+		return mTextField.getText();
+	}
+
+	/****************************************
+	 * Returns the text of the label.
+	 *
+	 *@return   The text of the label.
+	 ***************************************/
+	public String getLabel()
+	{
+		return mLabel.getText();
+	}
+
+	/****************************************
+	 * Adds a change listener, that will be notified when the text in the text
+	 * field is changed. The ChangeEvent that will be passed to registered
+	 * listeners will contain this object as the source, allowing the new text to
+	 * be extracted using the {@link #getText() getText} method.
+	 *
+	 *@param pChangeListener  The listener to add
+	 ***************************************/
+	public void addChangeListener(ChangeListener pChangeListener)
+	{
+		mChangeListeners.add(pChangeListener);
+	}
+
+	/****************************************
+	 * Removes a change listener.
+	 *
+	 *@param pChangeListener  The change listener to remove.
+	 ***************************************/
+	public void removeChangeListener(ChangeListener pChangeListener)
+	{
+		mChangeListeners.remove(pChangeListener);
+	}
+
+	/****************************************
+	 * Initialises all of the components on this panel.
+	 ***************************************/
+	private void init()
+	{
+		// Register the handler for focus listening. This handler will
+		// only notify the registered when the text changes from when
+		// the focus is gained to when it is lost.
+		mTextField.addFocusListener(
+			new FocusListener()
+			{
+
+				String oldValue = "";// A temporary cache.
+
+				/****************************************
+				 * Callback method when the focus to the Text Field component is lost.
+				 *
+				 *@param pFocusEvent  The focus event that occured.
+				 ***************************************/
+				public void focusLost(FocusEvent pFocusEvent)
+				{
+					// Compare if the value has changed, since we received focus.
+					if(oldValue.equals(mTextField.getText()) == false)
+					{
+						notifyChangeListeners();
+					}
+				}
+
+				/****************************************
+				 * Catch what the value was when focus was gained.
+				 *
+				 *@param pFocusEvent  !ToDo (Parameter description)
+				 ***************************************/
+				public void focusGained(FocusEvent pFocusEvent)
+				{
+					oldValue = mTextField.getText();
+				}
+			});
+
+		// Add the sub components
+		this.add(mLabel);
+		this.add(mTextField);
+	}
+
+	/****************************************
+	 * Notify all registered change listeners that the text in the text field has
+	 * changed.
+	 ***************************************/
+	private void notifyChangeListeners()
+	{
+		ChangeEvent ce = new ChangeEvent(this);
+		for(int index = 0; index < mChangeListeners.size(); index++)
+		{
+			((ChangeListener)mChangeListeners.get(index)).stateChanged(ce);
+		}
+	}
+
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JMeterColor.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JMeterColor.java
new file mode 100644
index 0000000..4592ccf
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JMeterColor.java
@@ -0,0 +1,76 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+
+import java.awt.Color;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class JMeterColor extends Color {
+	
+	public final static Color dark_green = new JMeterColor(0F,.5F,0F);
+	public final static Color YELLOW = new JMeterColor(1F,1F,0);
+	public final static Color LAVENDER = new JMeterColor(206F/255F,207F/255F,1F);
+	
+	public JMeterColor(float r,float g,float b)
+	{
+		super(r,g,b);
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JMeterMenuBar.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JMeterMenuBar.java
new file mode 100644
index 0000000..a22ee79
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/JMeterMenuBar.java
@@ -0,0 +1,454 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */package org.apache.jmeter.gui.util;
+import java.awt.Component;
+import java.awt.event.KeyEvent;
+import java.util.Collection;
+import java.util.Iterator;
+import java.util.LinkedList;
+
+import javax.swing.JMenu;
+import javax.swing.JMenuBar;
+import javax.swing.JMenuItem;
+import javax.swing.JPopupMenu;
+import javax.swing.KeyStroke;
+import javax.swing.MenuElement;
+import javax.swing.UIManager;
+import org.apache.jmeter.gui.action.ActionRouter;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.SSLManager;
+
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class JMeterMenuBar extends JMenuBar
+{
+	JMenu fileMenu;
+	JMenuItem file_save_all;
+	JMenuItem file_load;
+	JMenuItem file_exit;
+	JMenuItem file_new;
+	JMenu editMenu;
+	JMenu edit_add;
+	JMenu edit_add_submenu;
+	JMenuItem edit_remove;
+	JMenu runMenu;
+	JMenuItem run_start;
+	JMenu remote_start;
+	Collection remote_engine_start;
+	JMenuItem run_stop;
+	JMenu remote_stop;
+	Collection remote_engine_stop;
+	JMenuItem run_clear;
+	JMenuItem run_clearAll;
+	JMenu reportMenu;
+	JMenuItem analyze;
+	JMenu optionsMenu;
+	JMenu lafMenu;
+	JMenuItem sslManager;
+	JMenu helpMenu;
+	JMenuItem help_about;
+
+	String[] remoteHosts;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public JMeterMenuBar()
+	{
+		remote_engine_start = new LinkedList();
+		remote_engine_stop = new LinkedList();
+		remoteHosts = JMeterUtils.split(
+				JMeterUtils.getPropDefault("remote_hosts", ""), ",");
+		if(remoteHosts.length == 1 && remoteHosts[0].equals(""))
+		{
+			remoteHosts = new String[0];
+		}
+		this.getRemoteItems();
+
+		createMenuBar();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setFileSaveEnabled(boolean enabled)
+	{
+		file_save_all.setEnabled(enabled);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setFileLoadEnabled(boolean enabled)
+	{
+		if(file_load != null)
+		{
+			file_load.setEnabled(enabled);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditEnabled(boolean enabled)
+	{
+		if(editMenu != null)
+		{
+			editMenu.setEnabled(enabled);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param menu  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditAddMenu(JMenu menu)
+	{
+		// If the Add menu already exists, remove it.
+		if(edit_add != null)
+		{
+			editMenu.remove(edit_add);
+		}
+
+		// Insert the Add menu as the first menu item in the Edit menu.
+		edit_add = menu;
+		editMenu.insert(edit_add, 0);
+	}
+
+	public void setEditMenu(JPopupMenu menu)
+	{
+		if(menu != null)
+		{
+			editMenu.removeAll();
+			Component[] comps = menu.getComponents();
+			for(int i = 0;i < comps.length;i++)
+			{
+				editMenu.add(comps[i]);
+			}
+			editMenu.setEnabled(true);
+		}
+		else
+		{
+			editMenu.setEnabled(false);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditAddEnabled(boolean enabled)
+	{
+		// There was a NPE being thrown without the null check here.. JKB
+		if(edit_add != null)
+		{
+			edit_add.setEnabled(enabled);
+		}
+
+		// If we are enabling the Edit-->Add menu item, then we also need to
+		// enable the Edit menu. The Edit menu may already be enabled, but
+		// there's no harm it trying to enable it again.
+		if(enabled)
+		{
+			setEditEnabled(true);
+		}
+		else
+		{
+			// If we are disabling the Edit-->Add menu item and the Edit-->Remove
+			// menu item is disabled, then we also need to disable the Edit menu.
+			// The Java Look and Feel Guidelines say to disable a menu if all
+			// menu items are disabled.
+			if(!edit_remove.isEnabled())
+			{
+				editMenu.setEnabled(false);
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enabled  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEditRemoveEnabled(boolean enabled)
+	{
+		edit_remove.setEnabled(enabled);
+
+		// If we are enabling the Edit-->Remove menu item, then we also need to
+		// enable the Edit menu. The Edit menu may already be enabled, but
+		// there's no harm it trying to enable it again.
+		if(enabled)
+		{
+			setEditEnabled(true);
+		}
+		else
+		{
+			// If we are disabling the Edit-->Remove menu item and the Edit-->Add
+			// menu item is disabled, then we also need to disable the Edit menu.
+			// The Java Look and Feel Guidelines say to disable a menu if all
+			// menu items are disabled.
+			if(!edit_add.isEnabled())
+			{
+				editMenu.setEnabled(false);
+			}
+		}
+	}
+
+	/****************************************
+	 * Creates the MenuBar for this application. I believe in my heart that this
+	 * should be defined in a file somewhere, but that is for later.
+	 ***************************************/
+	public void createMenuBar()
+	{
+		// FILE MENU
+		fileMenu = new JMenu(JMeterUtils.getResString("file"));
+		fileMenu.setMnemonic('F');
+
+		file_save_all = new JMenuItem(JMeterUtils.getResString("save_all"), 'A');
+		file_save_all.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_A, KeyEvent.CTRL_MASK));
+		file_save_all.setActionCommand("save_all");
+		file_save_all.addActionListener(ActionRouter.getInstance());
+		// Currently, SAVE ALL is not implemented. It actually generates
+		// a nasty exception when selected. Therefore, for now, always
+		// make the SAVE ALL menu item disabled.
+		file_save_all.setEnabled(true);
+
+		file_load = new JMenuItem(JMeterUtils.getResString("open"), 'O');
+		file_load.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O, KeyEvent.CTRL_MASK));
+		file_load.addActionListener(ActionRouter.getInstance());
+
+		// Set default SAVE menu item to disabled since the default node that is selected
+		// is ROOT, which does not allow items to be inserted.
+		file_load.setEnabled(false);
+		
+		file_new = new JMenuItem(JMeterUtils.getResString("new"), 'N');
+		file_new.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, KeyEvent.CTRL_MASK));
+		file_new.setActionCommand("new");
+		file_new.addActionListener(ActionRouter.getInstance());
+
+		file_exit = new JMenuItem(JMeterUtils.getResString("exit"), 'X');
+		file_exit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q, KeyEvent.CTRL_MASK));
+		file_exit.setActionCommand("exit");
+		file_exit.addActionListener(ActionRouter.getInstance());
+		fileMenu.add(file_new);
+		fileMenu.add(file_load);
+		fileMenu.add(file_save_all);
+		fileMenu.addSeparator();
+		fileMenu.add(file_exit);
+
+		// EDIT MENU
+		editMenu = new JMenu(JMeterUtils.getResString("edit"));
+		// From the Java Look and Feel Guidelines: If all items in a menu
+		// are disabled, then disable the menu.  Makes sense.
+		editMenu.setEnabled(false);
+
+		// RUN MENU
+		runMenu = new JMenu(JMeterUtils.getResString("run"));
+		runMenu.setMnemonic('R');
+		run_start = new JMenuItem(JMeterUtils.getResString("start"), 'S');
+		run_start.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_R, KeyEvent.CTRL_MASK));
+		run_start.addActionListener(ActionRouter.getInstance());
+		run_start.setActionCommand("start");
+		run_stop = new JMenuItem(JMeterUtils.getResString("stop"), 'T');
+		run_stop.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_PERIOD, KeyEvent.CTRL_MASK));
+		run_stop.setEnabled(false);
+		run_stop.addActionListener(ActionRouter.getInstance());
+		run_stop.setActionCommand("stop");
+		run_clear = new JMenuItem(JMeterUtils.getResString("clear"), 'C');
+		run_clear.addActionListener(ActionRouter.getInstance());
+		run_clear.setActionCommand(org.apache.jmeter.gui.action.Clear.CLEAR);
+		run_clearAll = new JMenuItem(JMeterUtils.getResString("clear_all"), 'a');
+		run_clearAll.addActionListener(ActionRouter.getInstance());
+		run_clearAll.setActionCommand(org.apache.jmeter.gui.action.Clear.CLEAR_ALL);
+		runMenu.add(run_start);
+		if(remote_start != null)
+		{
+			runMenu.add(remote_start);
+		}
+		runMenu.add(run_stop);
+		if(remote_stop != null)
+		{
+			runMenu.add(remote_stop);
+		}
+
+		runMenu.addSeparator();
+
+		runMenu.add(run_clear);
+		runMenu.add(run_clearAll);
+
+		// OPTIONS MENU
+		optionsMenu = new JMenu(JMeterUtils.getResString("option"));
+		JMenuItem functionHelper = new JMenuItem(JMeterUtils.getResString(
+				"function_dialog_menu_item"),'F');
+		functionHelper.addActionListener(ActionRouter.getInstance());
+		functionHelper.setActionCommand("functions");
+		functionHelper.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F,
+				KeyEvent.CTRL_MASK));
+		lafMenu = new JMenu(JMeterUtils.getResString("appearance"));
+		UIManager.LookAndFeelInfo lafs[] = UIManager.getInstalledLookAndFeels();
+		for(int i = 0; i < lafs.length; ++i)
+		{
+			JMenuItem laf = new JMenuItem(lafs[i].getName());
+			laf.addActionListener(ActionRouter.getInstance());
+			laf.setActionCommand("laf:" + lafs[i].getClassName());
+			lafMenu.setMnemonic('L');
+			lafMenu.add(laf);
+		}
+		optionsMenu.setMnemonic('O');
+		optionsMenu.add(functionHelper);
+		optionsMenu.add(lafMenu);
+		if(SSLManager.isSSLSupported())
+		{
+			sslManager = new JMenuItem(JMeterUtils.getResString("sslManager"));
+			sslManager.addActionListener(ActionRouter.getInstance());
+			sslManager.setActionCommand("sslManager");
+			sslManager.setMnemonic('S');
+			sslManager.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_M, KeyEvent.CTRL_MASK));
+			optionsMenu.add(sslManager);
+		}
+
+		// HELP MENU
+		helpMenu = new JMenu(JMeterUtils.getResString("help"));
+		helpMenu.setMnemonic('H');
+		help_about = new JMenuItem(JMeterUtils.getResString("about"), 'A');
+		help_about.setActionCommand("about");
+		help_about.addActionListener(ActionRouter.getInstance());
+		helpMenu.add(help_about);
+
+		this.add(fileMenu);
+		this.add(editMenu);
+		this.add(runMenu);
+		this.add(optionsMenu);
+		this.add(helpMenu);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param running  !ToDo (Parameter description)
+	 *@param host     !ToDo (Parameter description)
+	 ***************************************/
+	public void setRunning(boolean running, String host)
+	{
+		Iterator iter = remote_engine_start.iterator();
+		Iterator iter2 = remote_engine_stop.iterator();
+		while(iter.hasNext() && iter2.hasNext())
+		{
+			JMenuItem start = (JMenuItem)iter.next();
+			JMenuItem stop = (JMenuItem)iter2.next();
+			System.out.println("host = "+host+" start = "+start.getText());
+			if(start.getText().equals(host))
+			{
+				start.setEnabled(!running);
+			}
+			if(stop.getText().equals(host))
+			{
+				stop.setEnabled(running);
+			}
+		}
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param enable  !ToDo (Parameter description)
+	 ***************************************/
+	public void setEnabled(boolean enable)
+	{
+		run_start.setEnabled(!enable);
+		run_stop.setEnabled(enable);
+	}
+
+	private void getRemoteItems()
+	{
+		if(remoteHosts.length > 0)
+		{
+			remote_start = new JMenu(JMeterUtils.getResString("remote_start"));
+			remote_stop = new JMenu(JMeterUtils.getResString("remote_stop"));
+			for(int i = 0; i < remoteHosts.length; i++)
+			{
+				JMenuItem item = new JMenuItem(remoteHosts[i]);
+				item.setActionCommand("remote_start");
+				item.setName(remoteHosts[i]);
+				item.addActionListener(ActionRouter.getInstance());
+				remote_engine_start.add(item);
+				remote_start.add(item);
+
+				item = new JMenuItem(remoteHosts[i]);
+				item.setActionCommand("remote_stop");
+				item.setName(remoteHosts[i]);
+				item.addActionListener(ActionRouter.getInstance());
+				item.setEnabled(false);
+				remote_engine_stop.add(item);
+				remote_stop.add(item);
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/MenuFactory.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/MenuFactory.java
new file mode 100644
index 0000000..6319b48
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/MenuFactory.java
@@ -0,0 +1,496 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */package org.apache.jmeter.gui.util;
+import java.util.*;
+import javax.swing.*;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.action.ActionRouter;
+import org.apache.jmeter.util.*;
+import org.apache.log4j.*;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+public class MenuFactory
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public static Category catClass =
+			Category.getInstance(MenuFactory.class.getName());
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String TIMERS = "menu_timer";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String CONTROLLERS = "menu_logic_controller";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String SAMPLERS = "menu_generative_controller";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String CONFIG_ELEMENTS = "menu_config_element";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String MODIFIERS = "menu_modifiers";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String RESPONSE_BASED_MODIFIERS = "menu_response_based_modifiers";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String ASSERTIONS = "menu_assertions";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String NON_TEST_ELEMENTS = "menu_non_test_elements";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String LISTENERS = "menu_listener";
+	private static Map menuMap = new HashMap();
+	private static Set elementsToSkip = new HashSet();
+
+	private static List timers, controllers, samplers,
+			configElements, modifiers, responseBasedModifiers,
+			assertions, listeners, nonTestElements;
+
+	private static JMenu timerMenu;
+	private static JMenu controllerMenu;
+	private static JMenu generativeControllerMenu;
+	private static JMenu listenerMenu;
+	private static JMenu ModifierMenu;
+	private static JMenu ResponseBasedModifierMenu;
+	private static JMenu assertionMenu;
+	private static JMenu configMenu;
+	private static JMenu insertControllerMenu;
+	static
+	{
+		String[] classesToSkip = JMeterUtils.split(
+				JMeterUtils.getPropDefault("not_in_menu", ""), ",");
+		for(int i = 0; i < classesToSkip.length; i++)
+		{
+			elementsToSkip.add(classesToSkip[i].trim());
+		}
+
+		initializeMenus();
+	}
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public MenuFactory() { }
+
+
+
+
+
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static String doNothing()
+	{
+		return "doing nothing";
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param menu       !ToDo
+	 *@param removable  !ToDo
+	 ***************************************/
+	public static void addEditMenu(JPopupMenu menu, boolean removable)
+	{
+		addSeparator(menu);
+		if(removable)
+		{
+			menu.add(makeMenuItem(JMeterUtils.getResString("remove"), "Remove", JMeterUtils.getResString("remove")));
+		}
+		menu.add(makeMenuItem(JMeterUtils.getResString("cut"), "Cut", "Cut"));
+		menu.add(makeMenuItem(JMeterUtils.getResString("copy"), "Copy", "Copy"));
+		menu.add(makeMenuItem(JMeterUtils.getResString("paste"), "Paste", "Paste"));
+		menu.add(makeMenuItem(JMeterUtils.getResString("paste_insert"), "Paste Insert", "Paste Insert"));
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param menu  !ToDo
+	 ***************************************/
+	public static void addFileMenu(JPopupMenu menu)
+	{
+		addSeparator(menu);
+		menu.add(makeMenuItem(JMeterUtils.getResString("open"), "Open", JMeterUtils.getResString("open")));
+		menu.add(makeMenuItem(JMeterUtils.getResString("save"), "Save", "save"));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param categories     !ToDo (Parameter description)
+	 *@param label          !ToDo (Parameter description)
+	 *@param actionCommand  !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 ***************************************/
+	public static JMenu makeMenus(String[] categories, String label, String actionCommand)
+	{
+		JMenu addMenu = new JMenu(label);
+		for(int i = 0; i < categories.length; i++)
+		{
+			addMenu.add(makeMenu(categories[i], actionCommand));
+		}
+		return addMenu;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static JPopupMenu getDefaultControllerMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		pop.add(MenuFactory.makeMenus(new String[]{MenuFactory.CONTROLLERS,
+				MenuFactory.SAMPLERS, MenuFactory.CONFIG_ELEMENTS,
+				MenuFactory.MODIFIERS,MenuFactory.RESPONSE_BASED_MODIFIERS,
+				MenuFactory.TIMERS,
+				MenuFactory.LISTENERS},
+				JMeterUtils.getResString("Add"),
+				"Add"));
+		pop.add(makeMenus(new String[]{MenuFactory.CONTROLLERS},
+				JMeterUtils.getResString("insert_parent"),"Add Parent"));
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static JPopupMenu getDefaultSamplerMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		pop.add(MenuFactory.makeMenus(new String[]{MenuFactory.CONFIG_ELEMENTS,
+				MenuFactory.ASSERTIONS,MenuFactory.MODIFIERS,
+				MenuFactory.RESPONSE_BASED_MODIFIERS,
+				MenuFactory.TIMERS,
+				MenuFactory.LISTENERS},
+				JMeterUtils.getResString("Add"),
+				"Add"));
+		pop.add(makeMenus(new String[]{MenuFactory.CONTROLLERS},
+				JMeterUtils.getResString("insert_parent"),"Add Parent"));
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static JPopupMenu getDefaultConfigElementMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static JPopupMenu getDefaultVisualizerMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static JPopupMenu getDefaultTimerMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	public static JPopupMenu getDefaultModifierMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	public static JPopupMenu getDefaultResponseBasedModifierMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	public static JPopupMenu getDefaultAssertionMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param category       !ToDo (Parameter description)
+	 *@param actionCommand  !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 ***************************************/
+	public static JMenu makeMenu(String category, String actionCommand)
+	{
+		return makeMenu((Collection)menuMap.get(category), actionCommand, JMeterUtils.getResString(category));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param menuInfo       !ToDo (Parameter description)
+	 *@param actionCommand  !ToDo (Parameter description)
+	 *@param menuName       !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 ***************************************/
+	public static JMenu makeMenu(Collection menuInfo, String actionCommand, String menuName)
+	{
+		Iterator iter = menuInfo.iterator();
+		JMenu menu = new JMenu(menuName);
+		while(iter.hasNext())
+		{
+			MenuInfo info = (MenuInfo)iter.next();
+			menu.add(makeMenuItem(info.label, info.className, actionCommand));
+		}
+		return menu;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param menu  !ToDo (Parameter description)
+	 ***************************************/
+	public static void setEnabled(JMenu menu)
+	{
+		if(menu.getSubElements().length == 0)
+		{
+			menu.setEnabled(false);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param label          !ToDo (Parameter description)
+	 *@param name           !ToDo (Parameter description)
+	 *@param actionCommand  !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 ***************************************/
+	public static JMenuItem makeMenuItem(String label, String name, String actionCommand)
+	{
+		JMenuItem newMenuChoice = new JMenuItem(label);
+		newMenuChoice.setName(name);
+		newMenuChoice.addActionListener(ActionRouter.getInstance());
+		if(actionCommand != null)
+		{
+			newMenuChoice.setActionCommand(actionCommand);
+		}
+
+		return newMenuChoice;
+	}
+
+	private static void initializeMenus()
+	{
+		try
+		{
+			List guiClasses = ClassFinder.findClassesThatExtend(new Class[]
+					{JMeterGUIComponent.class});
+			timers = new LinkedList();
+			controllers = new LinkedList();
+			samplers = new LinkedList();
+			configElements = new LinkedList();
+			modifiers = new LinkedList();
+			responseBasedModifiers = new LinkedList();
+			assertions = new LinkedList();
+			listeners = new LinkedList();
+			nonTestElements = new LinkedList();
+			menuMap.put(TIMERS, timers);
+			menuMap.put(ASSERTIONS, assertions);
+			menuMap.put(CONFIG_ELEMENTS, configElements);
+			menuMap.put(CONTROLLERS, controllers);
+			menuMap.put(LISTENERS, listeners);
+			menuMap.put(MODIFIERS, modifiers);
+			menuMap.put(NON_TEST_ELEMENTS, nonTestElements);
+			menuMap.put(RESPONSE_BASED_MODIFIERS, responseBasedModifiers);
+			menuMap.put(SAMPLERS, samplers);
+			Collections.sort(guiClasses);
+			Iterator iter = guiClasses.iterator();
+			while(iter.hasNext())
+			{
+				JMeterGUIComponent item = (JMeterGUIComponent)Class.forName(
+						(String)iter.next()).newInstance();
+				if(elementsToSkip.contains(item.getClass().getName()) ||
+						elementsToSkip.contains(item.getStaticLabel()))
+				{
+					continue;
+				}
+				Collection categories = item.getMenuCategories();
+				if(categories == null)
+				{
+					continue;
+				}
+				if(categories.contains(TIMERS))
+				{
+					timers.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(CONTROLLERS))
+				{
+					controllers.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(SAMPLERS))
+				{
+					samplers.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(RESPONSE_BASED_MODIFIERS))
+				{
+					responseBasedModifiers.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(NON_TEST_ELEMENTS))
+				{
+					nonTestElements.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(MODIFIERS))
+				{
+					modifiers.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(LISTENERS))
+				{
+					listeners.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+				if(categories.contains(CONFIG_ELEMENTS))
+				{
+					configElements.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+				if(categories.contains(ASSERTIONS))
+				{
+					assertions.add(new MenuInfo(item.getStaticLabel(),
+							item.getClass().getName()));
+				}
+
+			}
+		}
+		catch(Exception e)
+		{
+			e.printStackTrace();
+		}
+	}
+
+	private static void addSeparator(JPopupMenu menu)
+	{
+		MenuElement[] elements = menu.getSubElements();
+		if((elements.length > 0) && !(elements[elements.length - 1] instanceof JPopupMenu.Separator))
+		{
+			menu.addSeparator();
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/MenuInfo.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/MenuInfo.java
new file mode 100644
index 0000000..5254d85
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/MenuInfo.java
@@ -0,0 +1,94 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   1.0
+ ***************************************/
+
+/****************************************
+ * !ToDo (Class description)
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class MenuInfo
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public String label;
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public String className;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param l   !ToDo (Parameter description)
+	 *@param cn  !ToDo (Parameter description)
+	 ***************************************/
+	public MenuInfo(String l, String cn)
+	{
+		label = l;
+		className = cn;
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/NumberFieldErrorListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/NumberFieldErrorListener.java
new file mode 100644
index 0000000..f2dffea
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/NumberFieldErrorListener.java
@@ -0,0 +1,110 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+
+import java.awt.Component;
+import java.awt.TextComponent;
+import java.awt.event.FocusAdapter;
+import java.awt.event.FocusEvent;
+
+import javax.swing.JOptionPane;
+import javax.swing.text.JTextComponent;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class NumberFieldErrorListener extends FocusAdapter {
+	
+	private static NumberFieldErrorListener listener = new NumberFieldErrorListener();
+	
+	public static NumberFieldErrorListener getNumberFieldErrorListener()
+	{
+		return listener;
+	}
+	
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void focusLost(FocusEvent e)
+	{
+		Component source = (Component)e.getSource();
+		String text = "";
+		if(source instanceof JTextComponent)
+		{
+			text = ((JTextComponent)source).getText();
+		}
+		else if(source instanceof TextComponent)
+		{
+			text = ((TextComponent)source).getText();
+		}
+		try
+		{
+			Integer.parseInt(text);
+		}
+		catch(NumberFormatException nfe)
+		{
+			JOptionPane.showMessageDialog(source, JMeterUtils.getResString("You must enter a valid number"),
+						JMeterUtils.getResString("Invalid data"), JOptionPane.WARNING_MESSAGE);
+			new FocusRequester(source);
+		}		
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/PowerTableModel.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/PowerTableModel.java
new file mode 100644
index 0000000..ff1409c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/PowerTableModel.java
@@ -0,0 +1,219 @@
+package org.apache.jmeter.gui.util;
+
+import java.lang.reflect.Constructor;
+
+import javax.swing.table.DefaultTableModel;
+import org.apache.jmeter.util.Data;
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class PowerTableModel extends DefaultTableModel {
+	Data model = new Data();
+	Class[] columnClasses;
+
+	public PowerTableModel(String[] headers, Class[] cc) {
+		model.setHeaders(headers);
+		columnClasses = cc;
+	}
+
+	public void setRowValues(int row, Object[] values) {
+		model.setCurrentPos(row);
+		for (int i = 0; i < values.length; i++) {
+			model.addColumnValue(model.getHeaders()[i], values[i]);
+		}
+	}
+
+	public Data getData() {
+		return model;
+	}
+
+	/****************************************
+		 * Description of the Method
+		 *
+		 *@param row  Description of Parameter
+		 ***************************************/
+	public void removeRow(int row) {
+		if (model.size() > row) {
+			model.removeRow(row);
+		}
+	}
+	
+	public void clearData()
+	{
+		String[] headers = model.getHeaders();
+		model = new Data();
+		model.setHeaders(headers);
+		this.fireTableDataChanged();
+	}
+
+	public void addRow(Object data[]) {
+		model.setCurrentPos(model.size());
+		for (int i = 0; i < data.length; i++) {
+			model.addColumnValue(model.getHeaders()[i], data[i]);
+		}
+	}
+
+	/****************************************
+	 ***************************************/
+	public void addNewRow() {		
+		addRow(createDefaultRow());
+	}
+	
+	private Object[] createDefaultRow()
+	{
+		Object[] rowData = new Object[getColumnCount()];
+		for(int i = 0;i < rowData.length;i++)
+		{
+			rowData[i] = createDefaultValue(i);
+		}
+		return rowData;
+	}
+	
+	public Object[] getRowData(int row)
+	{
+		Object[] rowData = new Object[getColumnCount()];
+		for(int i = 0;i < rowData.length;i++)
+		{
+			rowData[i] = model.getColumnValue(i,row);
+		}
+		return rowData;
+	}
+	
+	private Object createDefaultValue(int i)
+	{
+		Class colClass = getColumnClass(i);
+		try {
+			return colClass.newInstance();
+		} catch(Exception e) {
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{String.class});
+				return constr.newInstance(new Object[]{""});
+			} catch(Exception err) {
+			} 
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Integer.TYPE});
+				return constr.newInstance(new Object[]{new Integer(0)});
+			} catch(Exception err) {
+			} 
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Long.TYPE});
+				return constr.newInstance(new Object[]{new Long(0L)});
+			} catch(Exception err) {
+			}
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Boolean.TYPE});
+				return constr.newInstance(new Object[]{new Boolean(false)});
+			} catch(Exception err) {
+			}
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Float.TYPE});
+				return constr.newInstance(new Object[]{new Float(0F)});
+			} catch(Exception err) {
+			}
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Double.TYPE});
+				return constr.newInstance(new Object[]{new Double(0D)});
+			} catch(Exception err) {
+			}
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Character.TYPE});
+				return constr.newInstance(new Object[]{new Character(' ')});
+			} catch(Exception err) {
+			}
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Byte.TYPE});
+				return constr.newInstance(new Object[]{new Byte(Byte.MIN_VALUE)});
+			} catch(Exception err) {
+			}
+			try {
+				Constructor constr = colClass.getConstructor(new Class[]{Short.TYPE});
+				return constr.newInstance(new Object[]{new Short(Short.MIN_VALUE)});
+			} catch(Exception err) {
+			}
+		}
+		return "";		
+	}
+
+	/****************************************
+	 * required by table model interface
+	 *
+	 *@return   The RowCount value
+	 ***************************************/
+	public int getRowCount() {
+		if (model == null) {
+			return 0;
+		}
+		return model.size();
+	}
+
+	/****************************************
+	 * required by table model interface
+	 *
+	 *@return   The ColumnCount value
+	 ***************************************/
+	public int getColumnCount() {
+		return model.getHeaders().length;
+	}
+
+	/****************************************
+	 * required by table model interface
+	 *
+	 *@param column  Description of Parameter
+	 *@return        The ColumnName value
+	 ***************************************/
+	public String getColumnName(int column) {
+		return model.getHeaders()[column];
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param row     !ToDo (Parameter description)
+	 *@param column  !ToDo (Parameter description)
+	 *@return        !ToDo (Return description)
+	 ***************************************/
+	public boolean isCellEditable(int row, int column) {
+		// all table cells are editable
+		return true;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param column  !ToDo (Parameter description)
+	 *@return        !ToDo (Return description)
+	 ***************************************/
+	public Class getColumnClass(int column) {
+		return columnClasses[column];
+	}
+
+	/****************************************
+	 * required by table model interface
+	 *
+	 *@param row     Description of Parameter
+	 *@param column  Description of Parameter
+	 *@return        The ValueAt value
+	 ***************************************/
+	public Object getValueAt(int row, int column) {
+		return model.getColumnValue(column, row);
+	}
+
+	/****************************************
+	 * Sets the ValueAt attribute of the Arguments object
+	 *
+	 *@param value   The new ValueAt value
+	 *@param row     The new ValueAt value
+	 *@param column  !ToDo (Parameter description)
+	 ***************************************/
+	public void setValueAt(Object value, int row, int column) {
+		if(row < model.size())
+		{
+			model.setCurrentPos(row);
+			model.addColumnValue(model.getHeaders()[column], value);
+		}
+	}
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/TextAreaCellRenderer.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/TextAreaCellRenderer.java
new file mode 100644
index 0000000..23bccfc
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/TextAreaCellRenderer.java
@@ -0,0 +1,46 @@
+package org.apache.jmeter.gui.util;
+
+import java.awt.Component;
+
+import javax.swing.JTable;
+import javax.swing.JTextArea;
+import javax.swing.table.TableCellRenderer;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class TextAreaCellRenderer implements TableCellRenderer {
+
+	private JTextArea rend = new JTextArea("");
+	/**
+	 * @see TableCellRenderer#getTableCellRendererComponent(JTable, Object, boolean, boolean, int, int)
+	 */
+	public Component getTableCellRendererComponent(JTable arg0,
+		Object arg1,
+		boolean arg2,
+		boolean arg3,
+		int arg4,
+		int arg5) 
+	{
+		rend = new JTextArea(arg1.toString());
+		rend.revalidate();
+		if(!arg3 && !arg2)
+		{
+			rend.setBackground(JMeterColor.LAVENDER);
+		}
+		if(arg0.getRowHeight(arg4) < getPreferredHeight())
+		{
+			arg0.setRowHeight(arg4,getPreferredHeight());
+		}
+		return rend;
+	}
+	
+	public int getPreferredHeight()
+	{
+		return rend.getPreferredSize().height + 5;
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/TextAreaTableCellEditor.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/TextAreaTableCellEditor.java
new file mode 100644
index 0000000..e14188a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/TextAreaTableCellEditor.java
@@ -0,0 +1,139 @@
+package org.apache.jmeter.gui.util;
+
+import java.awt.Component;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.awt.event.MouseEvent;
+import java.util.EventObject;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+
+import javax.swing.JScrollPane;
+import javax.swing.JTable;
+import javax.swing.JTextArea;
+import javax.swing.event.CellEditorListener;
+import javax.swing.event.ChangeEvent;
+import javax.swing.table.TableCellEditor;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class TextAreaTableCellEditor implements TableCellEditor,FocusListener {
+	JScrollPane pane;
+	JTextArea editor;
+	String value = "";
+	LinkedList listeners = new LinkedList();
+	int row,col;
+	
+	public Component getTableCellEditorComponent(JTable table,
+                                             Object value,
+                                             boolean isSelected,
+                                             int row,
+                                             int column)
+    {
+    	editor = new JTextArea(value.toString());
+    	editor.addFocusListener(this);
+    	editor.setEnabled(true);
+    	editor.setRows(editor.getRows());
+    	editor.revalidate();
+    	pane = new JScrollPane(editor,JScrollPane.VERTICAL_SCROLLBAR_NEVER,
+    			JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
+    	pane.validate();
+    	this.row = row;
+    	this.col = col;
+    	return pane;
+    }
+    
+    public int getColumn()
+    {
+    	return col;
+    }
+    
+    public int getRow()
+    {
+    	return row;
+    }
+    
+    public void focusLost(FocusEvent fe)
+    {
+    	stopCellEditing();
+    }
+    
+    public void focusGained(FocusEvent fe)
+    {
+    }
+    
+    public TextAreaTableCellEditor()
+    {
+    	editor = new JTextArea();
+    	editor.setRows(3);
+    }
+    
+    public Component getComponent()
+    {
+    	return editor;
+    }
+    
+    public Object getCellEditorValue()
+    {
+    	return editor.getText();
+    }
+    
+    public void cancelCellEditing()
+    {
+    	Iterator iter = ((List)listeners.clone()).iterator();
+    	while(iter.hasNext())
+    	{
+    		((CellEditorListener)iter.next()).editingCanceled(new ChangeEvent(this));
+    	}
+    }
+    
+    public boolean stopCellEditing()
+    {
+    	Iterator iter = ((List)listeners.clone()).iterator();
+    	while(iter.hasNext())
+    	{
+    		((CellEditorListener)iter.next()).editingStopped(new ChangeEvent(this));
+    	}
+    	return true;
+    }
+    
+    public void addCellEditorListener(CellEditorListener lis)
+    {
+    	listeners.add(lis);
+    }
+    
+    public boolean isCellEditable(EventObject anEvent)
+    {
+    	if (anEvent instanceof MouseEvent)
+		{
+			if (((MouseEvent)anEvent).getClickCount() > 0)
+			{
+				return true;
+			}
+		}
+		else if(anEvent instanceof FocusEvent)
+		{
+			if(((FocusEvent)anEvent).getID() == FocusEvent.FOCUS_GAINED)
+			{
+				return true;
+			}
+		}
+		return true;
+    }
+    
+    public void removeCellEditorListener(CellEditorListener lis)
+    {
+    	listeners.remove(lis);
+    }
+    
+    public boolean shouldSelectCell(EventObject eo)
+    {
+    	return true;
+    }
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/VerticalLayout.java b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/VerticalLayout.java
new file mode 100644
index 0000000..502e11a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/gui/util/VerticalLayout.java
@@ -0,0 +1,301 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.gui.util;
+import java.awt.*;
+import java.util.*;
+/****************************************
+ * A vertical layout manager similar to java.awt.FlowLayout. Like FlowLayout
+ * components do not expand to fill available space except when the horizontal
+ * alignment is <code>BOTH</code> in which case components are stretched
+ * horizontally. Unlike FlowLayout, components will not wrap to form another
+ * column if there isn't enough space vertically. VerticalLayout can optionally
+ * anchor components to the top or bottom of the display area or center them
+ * between the top and bottom. Revision date 04 April 1999
+ *
+ *@author    Colin Mummery e-mail:equitysoft@iname.com
+ *      Homepage:www.kagi.com/equitysoft - Based on 'FlexLayout' in Java class
+ *      libraries Vol 2 Chan/Lee Addison-Wesley 1998
+ *@created   $Date: 2002/08/11 19:24:44 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+
+public class VerticalLayout implements LayoutManager
+{
+
+	/****************************************
+	 * The horizontal alignment constant that designates centering. Also used to
+	 * designate center anchoring.
+	 ***************************************/
+	public final static int CENTER = 0;
+	/****************************************
+	 * The horizontal alignment constant that designates right justification.
+	 ***************************************/
+	public final static int RIGHT = 1;
+	/****************************************
+	 * The horizontal alignment constant that designates left justification.
+	 ***************************************/
+	public final static int LEFT = 2;
+	/****************************************
+	 * The horizontal alignment constant that designates stretching the component
+	 * horizontally.
+	 ***************************************/
+	public final static int BOTH = 3;
+
+	/****************************************
+	 * The anchoring constant that designates anchoring to the top of the display
+	 * area
+	 ***************************************/
+	public final static int TOP = 1;
+	/****************************************
+	 * The anchoring constant that designates anchoring to the bottom of the
+	 * display area
+	 ***************************************/
+	public final static int BOTTOM = 2;
+	private int vgap;//the vertical vgap between components...defaults to 5
+	private int alignment;//LEFT, RIGHT, CENTER or BOTH...how the components are justified
+	private int anchor;//TOP, BOTTOM or CENTER ...where are the components positioned in an overlarge space
+	private Hashtable comps;
+
+//Constructors
+	/****************************************
+	 * Constructs an instance of VerticalLayout with a vertical vgap of 5 pixels,
+	 * horizontal centering and anchored to the top of the display area.
+	 ***************************************/
+	public VerticalLayout()
+	{
+		this(5, CENTER, TOP);
+	}
+
+	/****************************************
+	 * Constructs a VerticalLayout instance with horizontal centering, anchored to
+	 * the top with the specified vgap
+	 *
+	 *@param vgap  An int value indicating the vertical seperation of the
+	 *      components
+	 ***************************************/
+	public VerticalLayout(int vgap)
+	{
+		this(vgap, CENTER, TOP);
+	}
+
+	/****************************************
+	 * Constructs a VerticalLayout instance anchored to the top with the specified
+	 * vgap and horizontal alignment
+	 *
+	 *@param vgap       An int value indicating the vertical seperation of the
+	 *      components
+	 *@param alignment  An int value which is one of <code>RIGHT, LEFT, CENTER, BOTH</code>
+	 *      for the horizontal alignment.
+	 ***************************************/
+	public VerticalLayout(int vgap, int alignment)
+	{
+		this(vgap, alignment, TOP);
+	}
+
+	/****************************************
+	 * Constructs a VerticalLayout instance with the specified vgap, horizontal
+	 * alignment and anchoring
+	 *
+	 *@param vgap       An int value indicating the vertical seperation of the
+	 *      components
+	 *@param alignment  An int value which is one of <code>RIGHT, LEFT, CENTER, BOTH</code>
+	 *      for the horizontal alignment.
+	 *@param anchor     An int value which is one of <code>TOP, BOTTOM, CENTER</code>
+	 *      indicating where the components are to appear if the display area
+	 *      exceeds the minimum necessary.
+	 ***************************************/
+	public VerticalLayout(int vgap, int alignment, int anchor)
+	{
+		this.vgap = vgap;
+		this.alignment = alignment;
+		this.anchor = anchor;
+	}
+//-----------------------------------------------------------------------------
+	/****************************************
+	 * Lays out the container.
+	 *
+	 *@param parent  !ToDo (Parameter description)
+	 ***************************************/
+	public void layoutContainer(Container parent)
+	{
+		Insets insets = parent.getInsets();
+		Dimension dim = layoutSize(parent, false);
+		synchronized(parent.getTreeLock())
+		{
+			int n = parent.getComponentCount();
+			Dimension pd = parent.getSize();
+			int y = 0;
+//work out the total size
+			for(int i = 0; i < n; i++)
+			{
+				Component c = parent.getComponent(i);
+				Dimension d = c.getPreferredSize();
+				y += d.height + vgap;
+			}
+			y -= vgap;//otherwise there's a vgap too many
+//Work out the anchor paint
+			if(anchor == TOP)
+			{
+				y = insets.top;
+			}
+			else if(anchor == CENTER)
+			{
+				y = (pd.height - y) / 2;
+			}
+			else
+			{
+				y = pd.height - y - insets.bottom;
+			}
+//do layout
+			for(int i = 0; i < n; i++)
+			{
+				Component c = parent.getComponent(i);
+				Dimension d = c.getPreferredSize();
+				int x = insets.left;
+				int wid = d.width;
+				if(alignment == CENTER)
+				{
+					x = (pd.width - d.width) / 2;
+				}
+				else if(alignment == RIGHT)
+				{
+					x = pd.width - d.width - insets.right;
+				}
+				else if(alignment == BOTH)
+				{
+					wid = pd.width - insets.left - insets.right;
+				}
+				c.setBounds(x, y, wid, d.height);
+				y += d.height + vgap;
+			}
+		}
+	}
+//-----------------------------------------------------------------------------
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param parent  !ToDo (Parameter description)
+	 *@return        !ToDo (Return description)
+	 ***************************************/
+	public Dimension minimumLayoutSize(Container parent)
+	{
+		return layoutSize(parent, true);
+	}
+//-----------------------------------------------------------------------------
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param parent  !ToDo (Parameter description)
+	 *@return        !ToDo (Return description)
+	 ***************************************/
+	public Dimension preferredLayoutSize(Container parent)
+	{
+		return layoutSize(parent, false);
+	}
+//----------------------------------------------------------------------------
+	/****************************************
+	 * Not used by this class
+	 *
+	 *@param name  !ToDo
+	 *@param comp  !ToDo
+	 ***************************************/
+	public void addLayoutComponent(String name, Component comp) { }
+//-----------------------------------------------------------------------------
+	/****************************************
+	 * Not used by this class
+	 *
+	 *@param comp  !ToDo (Parameter description)
+	 ***************************************/
+	public void removeLayoutComponent(Component comp) { }
+//-----------------------------------------------------------------------------
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String toString()
+	{
+		return getClass().getName() + "[vgap=" + vgap + " align=" + alignment + " anchor=" + anchor + "]";
+	}
+//----------------------------------------------------------------------------
+	private Dimension layoutSize(Container parent, boolean minimum)
+	{
+		Dimension dim = new Dimension(0, 0);
+		Dimension d;
+		synchronized(parent.getTreeLock())
+		{
+			int n = parent.getComponentCount();
+			for(int i = 0; i < n; i++)
+			{
+				Component c = parent.getComponent(i);
+				if(c.isVisible())
+				{
+					d = minimum ? c.getMinimumSize() : c.getPreferredSize();
+					dim.width = Math.max(dim.width, d.width);
+					dim.height += d.height;
+					if(i > 0)
+					{
+						dim.height += vgap;
+					}
+				}
+			}
+		}
+		Insets insets = parent.getInsets();
+		dim.width += insets.left + insets.right;
+		dim.height += insets.top + insets.bottom + vgap + vgap;
+		return dim;
+	}
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/help.txt b/jakarta-jmeter/src/core/org/apache/jmeter/help.txt
new file mode 100644
index 0000000..cb5c751
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/help.txt
@@ -0,0 +1,37 @@
+
+To run Apache JMeter in GUI mode:
+Double-click on the ApacheJMeter.jar file.  
+If this doesn't work, open a command prompt and type:
+
+java -jar ApacheJMeter.jar [-p property-file]
+
+--------------------------------------------------
+
+To run Apache JMeter in NON_GUI mode:
+Open a command prompt (or Unix shell) and type:
+
+java -jar ApacheJMeter.jar -n -t test-file [-p property-file] [-l log-file]
+
+--------------------------------------------------
+
+To tell Apache JMeter to use a proxy server:
+Open a command prompt and type:
+
+java -jar ApacheJMeter.jar -H [your.proxy.server] -P [your proxy server port]
+
+---------------------------------------------------
+
+To run Apache JMeter in server mode:
+Open a command prompty and type
+
+java -jar ApacheJMeter.jar -s
+
+Or, use the provided script file: jmeter-server.bat(Windows)/jmeter-server(Linux)
+
+---------------------------------------------------
+
+Please note that a script file is provided: 
+jmeter.bat(Windows)/jmeter(Linux) that can be
+used in place of "java -jar ApacheJMeter.jar".  Example:
+
+jmeter -p jmeter.properties -H my.proxy.com -P 9999
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Entries
new file mode 100644
index 0000000..6301f71
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Entries
@@ -0,0 +1,57 @@
+/Delete24.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Delete24.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Delete24.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Delete24.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Delete24.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Edit24.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Edit24.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Edit24.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Edit24.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Edit24.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/New24.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/New24.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/New24.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/New24.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/New24.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Open24.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Open24.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Open24.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Open24.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/Open24.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/SaveAll24.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/SaveAll24.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/SaveAll24.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/SaveAll24.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/SaveAll24.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/about.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/about.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/about.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/about.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/beaker.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/clear.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/clear.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/clear.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/clear.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/clipboard.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/ear.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/feather.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/jmeter.jpg/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/knob.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/leafnode.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/smallthread.disabled.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/smallthread.enabled.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/smallthread.idle.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/start.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/start.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/start.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/start.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/stop.down.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/stop.off.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/stop.on.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/stop.over.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/thread.disabled.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/thread.enabled.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/thread.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/thread.idle.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+/timer.gif/1.1/Sun Aug 11 19:24:45 2002/-kb/Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Repository
new file mode 100644
index 0000000..e7bb362
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/images
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/images/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.down.gif
new file mode 100644
index 0000000..28f3604
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.gif
new file mode 100644
index 0000000..96d799a
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.off.gif
new file mode 100644
index 0000000..96d799a
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.on.gif
new file mode 100644
index 0000000..96d799a
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.over.gif
new file mode 100644
index 0000000..4e609f3
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Delete24.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.down.gif
new file mode 100644
index 0000000..0b70c7d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.gif
new file mode 100644
index 0000000..a5af7d7
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.off.gif
new file mode 100644
index 0000000..a5af7d7
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.on.gif
new file mode 100644
index 0000000..a5af7d7
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.over.gif
new file mode 100644
index 0000000..70d327d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Edit24.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.down.gif
new file mode 100644
index 0000000..7d5cf3d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.gif
new file mode 100644
index 0000000..1cc488d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.off.gif
new file mode 100644
index 0000000..1cc488d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.on.gif
new file mode 100644
index 0000000..1cc488d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.over.gif
new file mode 100644
index 0000000..44b6f4f
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/New24.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.down.gif
new file mode 100644
index 0000000..9d186da
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.gif
new file mode 100644
index 0000000..2086bc2
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.off.gif
new file mode 100644
index 0000000..2086bc2
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.on.gif
new file mode 100644
index 0000000..2086bc2
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.over.gif
new file mode 100644
index 0000000..ad89c99
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/Open24.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.down.gif
new file mode 100644
index 0000000..45a766c
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.gif
new file mode 100644
index 0000000..9e4e168
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.off.gif
new file mode 100644
index 0000000..9e4e168
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.on.gif
new file mode 100644
index 0000000..9e4e168
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.over.gif
new file mode 100644
index 0000000..824ffa3
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/SaveAll24.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/about.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.down.gif
new file mode 100644
index 0000000..5476fee
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/about.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.off.gif
new file mode 100644
index 0000000..d49b882
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/about.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.on.gif
new file mode 100644
index 0000000..8bdefc5
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/about.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.over.gif
new file mode 100644
index 0000000..84122eb
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/about.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/beaker.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/beaker.gif
new file mode 100644
index 0000000..8dc5e0c
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/beaker.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.down.gif
new file mode 100644
index 0000000..627f840
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.off.gif
new file mode 100644
index 0000000..5fbbf8a
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.on.gif
new file mode 100644
index 0000000..674c8c7
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.over.gif
new file mode 100644
index 0000000..ee3cd27
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/clear.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/clipboard.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/clipboard.gif
new file mode 100644
index 0000000..68b1f19
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/clipboard.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/ear.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/ear.gif
new file mode 100644
index 0000000..9194c92
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/ear.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/feather.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/feather.gif
new file mode 100644
index 0000000..2eef441
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/feather.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/jmeter.jpg b/jakarta-jmeter/src/core/org/apache/jmeter/images/jmeter.jpg
new file mode 100644
index 0000000..304363a
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/jmeter.jpg differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/knob.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/knob.gif
new file mode 100644
index 0000000..62ef008
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/knob.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/leafnode.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/leafnode.gif
new file mode 100644
index 0000000..48b2b4f
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/leafnode.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.disabled.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.disabled.gif
new file mode 100644
index 0000000..3da09c3
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.disabled.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.enabled.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.enabled.gif
new file mode 100644
index 0000000..f99aa87
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.enabled.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.idle.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.idle.gif
new file mode 100644
index 0000000..bea1c27
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/smallthread.idle.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/start.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.down.gif
new file mode 100644
index 0000000..5cf8d4b
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/start.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.off.gif
new file mode 100644
index 0000000..c2f4b75
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/start.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.on.gif
new file mode 100644
index 0000000..42895f2
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/start.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.over.gif
new file mode 100644
index 0000000..41ab749
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/start.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.down.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.down.gif
new file mode 100644
index 0000000..2997029
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.down.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.off.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.off.gif
new file mode 100644
index 0000000..7f14ddf
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.off.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.on.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.on.gif
new file mode 100644
index 0000000..0b38a7a
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.on.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.over.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.over.gif
new file mode 100644
index 0000000..b75f546
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/stop.over.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.disabled.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.disabled.gif
new file mode 100644
index 0000000..89f265d
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.disabled.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.enabled.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.enabled.gif
new file mode 100644
index 0000000..2962c0f
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.enabled.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.gif
new file mode 100644
index 0000000..6b7296c
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.idle.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.idle.gif
new file mode 100644
index 0000000..1f20726
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/thread.idle.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/images/timer.gif b/jakarta-jmeter/src/core/org/apache/jmeter/images/timer.gif
new file mode 100644
index 0000000..f3f0f56
Binary files /dev/null and b/jakarta-jmeter/src/core/org/apache/jmeter/images/timer.gif differ
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/junit/AllTests.java b/jakarta-jmeter/src/core/org/apache/jmeter/junit/AllTests.java
new file mode 100644
index 0000000..6b2492c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/junit/AllTests.java
@@ -0,0 +1,146 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.junit;
+
+import java.io.*;
+import java.util.*;
+import junit.framework.*;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.jmeter.util.JMeterUtils;
+
+/************************************************************
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:46 $
+ *@version    1.0
+ ***********************************************************/
+public class AllTests
+{
+	/************************************************************
+	 *  Constructor for the AllTests object
+	 ***********************************************************/
+	public AllTests()
+	{
+	}
+
+	/************************************************************
+	 *  The main program for the AllTests class
+	 *
+	 *@param  args  The command line arguments
+	 ***********************************************************/
+	public static void main(String[] args)
+	{
+		if (args.length < 1)
+		{
+			System.out.println("Need an argument specifying the jmeter property file");
+			System.exit(0);
+		}
+		JMeterUtils.getProperties(args[0]);
+		JMeterUtils.setJMeterHome(new File(System.getProperty("user.dir")).getParent());
+		// end : added - 11 July 2001
+		try
+		{
+			TestSuite suite = suite();
+			PrintStream out = new PrintStream(new FileOutputStream("testresults.txt"));
+			junit.textui.TestRunner runner = new junit.textui.TestRunner(out);
+			runner.run(suite);
+			out.close();
+		}
+		catch (FileNotFoundException e)
+		{
+			e.printStackTrace();
+		}
+		System.exit(0);
+	}
+
+	/************************************************************
+	 *  A unit test suite for JUnit
+	 *
+	 *@return    The test suite
+	 ***********************************************************/
+	public static TestSuite suite()
+	{
+		TestSuite suite = new TestSuite();
+		try
+		{
+			Iterator classes = ClassFinder.findClassesThatExtend(new Class[]{TestCase.class},true).iterator();
+			while (classes.hasNext())
+			{
+				String name = (String)classes.next();
+				try
+				{
+					suite.addTest(new TestSuite(Class.forName(name)));
+				}
+				catch (Exception ex)
+				{
+					System.out.println("error adding test :"+ex);
+				}
+			}
+		}
+		catch (IOException e)
+		{
+			e.printStackTrace();
+		}
+		catch (ClassNotFoundException e)
+		{
+			e.printStackTrace();
+		}
+		return suite;
+	}
+}
+
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Entries
new file mode 100644
index 0000000..1c265e3
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Entries
@@ -0,0 +1,3 @@
+/AllTests.java/1.1/Sun Aug 11 19:24:46 2002//Tv1_7_3
+/JMeterTest.java/1.1/Sun Aug 11 19:24:46 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Repository
new file mode 100644
index 0000000..053d982
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/junit
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/junit/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/junit/JMeterTest.java b/jakarta-jmeter/src/core/org/apache/jmeter/junit/JMeterTest.java
new file mode 100644
index 0000000..fc04a64
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/junit/JMeterTest.java
@@ -0,0 +1,127 @@
+package org.apache.jmeter.junit;
+import java.util.*;
+import junit.framework.TestCase;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.ClassFinder;
+import java.io.Serializable;
+import org.apache.jmeter.gui.tree.JMeterTreeNode;
+import org.apache.jmeter.save.SaveService;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:46 $
+ *@version   1.0
+ ***************************************/
+
+public class JMeterTest extends TestCase
+{
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public JMeterTest(String name)
+	{
+		super(name);
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@exception Exception  !ToDo (Exception description)
+	 ***************************************/
+	public void testGUIComponents() throws Exception
+	{
+		Iterator iter = getObjects(JMeterGUIComponent.class).iterator();
+		while(iter.hasNext())
+		{
+			JMeterGUIComponent item = (JMeterGUIComponent)iter.next();
+			if(item instanceof JMeterTreeNode)
+			{
+				continue;
+			}
+			this.assertEquals("Failed on " + item.getClass().getName(), 
+					item.getStaticLabel(), item.getName());
+			TestElement el = item.createTestElement();
+			assertEquals("GUI-CLASS: Failed on " + item.getClass().getName(), item.getClass().getName(),
+					el.getProperty(TestElement.GUI_CLASS));
+			assertEquals("NAME: Failed on " + item.getClass().getName(), item.getName(),
+					el.getProperty(TestElement.NAME));
+			assertEquals("TEST-CLASS: Failed on " + item.getClass().getName(),
+					el.getClass().getName(), el.getProperty(TestElement.TEST_CLASS));
+			el.setProperty(TestElement.NAME, "hey, new name!:");
+			el.setProperty("NOT","Shouldn't be here");
+			TestElement el2 = item.createTestElement();
+			assertNull("GUI-CLASS: Failed on " + item.getClass().getName(),
+			el2.getProperty("NOT"));
+			el = SaveService.createTestElement(SaveService.getConfigForTestElement(null,
+					el));
+			item.configure(el);
+			assertEquals("CONFIGURE-TEST: Failed on " + item.getClass().getName(),
+					el.getProperty(TestElement.NAME), item.getName());
+		}
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@exception Exception  !ToDo (Exception description)
+	 ***************************************/
+	public void testTestElements() throws Exception
+	{
+		Iterator iter = getObjects(TestElement.class).iterator();
+		while(iter.hasNext())
+		{
+			TestElement item = (TestElement)iter.next();
+			checkElementCloning(item);
+			assertTrue(item.getClass().getName()+" must implement Serializable",
+					item instanceof Serializable);
+		}
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param extendsClass   !ToDo (Parameter description)
+	 *@return               !ToDo (Return description)
+	 *@exception Exception  !ToDo (Exception description)
+	 ***************************************/
+	protected Collection getObjects(Class extendsClass) throws Exception
+	{
+		Iterator classes = ClassFinder.findClassesThatExtend(new Class[]{extendsClass}).iterator();
+		List objects = new LinkedList();
+		while(classes.hasNext())
+		{
+			objects.add(Class.forName((String)classes.next()).newInstance());
+		}
+		return objects;
+	}
+
+	private void cloneTesting(TestElement item, TestElement clonedItem)
+	{
+		this.assertTrue(item != clonedItem);
+		this.assertEquals("CLONE-SAME-CLASS: testing " + item.getClass().getName(),
+				item.getClass().getName(), clonedItem.getClass().getName());
+	}
+
+	private void checkElementCloning(TestElement item)
+	{
+		TestElement clonedItem = (TestElement)item.clone();
+		cloneTesting(item, clonedItem);
+		Iterator iter2 = item.getPropertyNames().iterator();
+		while(iter2.hasNext())
+		{
+			Object item2 = iter2.next();
+			if(item2 instanceof TestElement)
+			{
+				checkElementCloning((TestElement)item2);
+			}
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/AbstractListenerElement.java b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/AbstractListenerElement.java
new file mode 100644
index 0000000..72216af
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/AbstractListenerElement.java
@@ -0,0 +1,38 @@
+package org.apache.jmeter.reporters;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.visualizers.Visualizer;
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public abstract class AbstractListenerElement extends AbstractTestElement
+{
+	private Visualizer listener;
+
+	public AbstractListenerElement()
+	{
+	}
+
+	protected Visualizer getVisualizer()
+	{
+		return listener;
+	}
+
+	public void setListener(Visualizer vis)
+	{
+		listener = vis;
+	}
+	
+	public Object clone()
+	{
+		AbstractListenerElement clone = (AbstractListenerElement)super.clone();
+		clone.setListener(getVisualizer());
+		return clone;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/AssertionReporter.java b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/AssertionReporter.java
new file mode 100644
index 0000000..5fe7c89
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/AssertionReporter.java
@@ -0,0 +1,20 @@
+package org.apache.jmeter.reporters;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.assertions.*;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ * Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:47 $
+ *@version   1.0
+ ***************************************/
+
+public class AssertionReporter extends ResultCollector implements Serializable
+{
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Entries
new file mode 100644
index 0000000..5c0e996
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Entries
@@ -0,0 +1,5 @@
+/AbstractListenerElement.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/AssertionReporter.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/FileReporter.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/ResultCollector.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Repository
new file mode 100644
index 0000000..4029adf
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/reporters
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/FileReporter.java b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/FileReporter.java
new file mode 100644
index 0000000..613d339
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/FileReporter.java
@@ -0,0 +1,328 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.reporters;
+
+import java.awt.*;
+import java.util.*;
+import java.awt.event.*;
+import java.io.*;
+import java.text.*;
+import javax.swing.*;
+import javax.swing.event.*;
+
+/**
+ * This class loads data from a saved file and displays
+ * statistics about it.
+ *
+ *
+ * @author  Tom Schneider
+ */
+public class FileReporter extends JPanel  {
+	Hashtable data = new Hashtable();
+	/**  initalize a file reporter from a file */
+	public void init(String file) throws IOException {
+		File datafile = new File(file);
+		BufferedReader reader = null;
+		if( datafile.canRead() ) {
+			reader = new BufferedReader(new FileReader(datafile));
+		} else {
+			JOptionPane.showMessageDialog(
+				null,"The file you specified cannot be read.",
+				"Information",JOptionPane.INFORMATION_MESSAGE);
+			return;
+		}
+		String line;
+		while ((line = reader.readLine()) != null) {
+			try {
+				line.trim();
+				if (line.startsWith("#") || line.length() == 0)
+					continue;
+				int splitter = line.lastIndexOf(' ');
+				String key = line.substring(0, splitter);
+				int len = line.length() - 1;
+				Integer value = null;
+				if (line.charAt(len) == ',') {
+					value = new Integer(
+						line.substring(splitter + 1, len));
+				} else {
+					value = new Integer(
+						line.substring(splitter + 1));
+				}
+				Vector v = getData(key);
+				if (v == null) {
+					v = new Vector();
+					this.data.put(key, v);
+				}
+				v.addElement(value);
+			} catch (NumberFormatException nfe) {
+				System.out.println(nfe.toString());
+				System.out.println("This line could not be parsed: "
+					+ line);
+			} catch (Exception e) {
+				System.out.println(e.toString());
+			}
+		}
+		reader.close();
+		showPanel();
+	}
+	public Vector getData(String key) {
+		return (Vector) data.get(key);
+	}
+	/**  show main panel with length, graph, and stats */
+	public void showPanel() {
+		JFrame f = new JFrame("Data File Report");
+		setLayout(new BorderLayout());
+		graphPanel gp = new graphPanel(data);
+		add(gp, "Center");
+		add(gp.getStats(), BorderLayout.EAST);
+		add(gp.getLegend(), BorderLayout.NORTH);
+		f.setSize(500, 300);
+		f.getContentPane().add(this);
+		f.show();
+	}
+}
+
+/**  Graph panel generates all the panels for this reporter.
+  *  Data is organized based on thread name in a hashtable.
+  *  The data itself is a Vector of Integer objects
+  */
+class graphPanel extends JPanel {
+	boolean autoScale = true;
+	Hashtable data;
+	Vector keys = new Vector();
+	Vector colorList = new Vector();
+	public graphPanel(Hashtable data) {
+		this.data = data;
+		Enumeration e = data.keys();
+		while (e.hasMoreElements()) {
+			String key = (String) e.nextElement();
+			keys.addElement(key);
+		}
+		for (int a = 0x33; a < 0xFF; a += 0x66) {
+			for (int b = 0x33; b < 0xFF; b += 0x66) {
+				for (int c = 0x33; c < 0xFF; c += 0x66) {
+					colorList.addElement(new Color(a, b, c));
+				}
+			}
+		}
+	}
+	/**  get the maximum for all the data */
+	public float getMax() {
+		float maxValue = 0;
+		for (int t = 0; t < keys.size(); t++) {
+			String key = (String) keys.elementAt(t);
+			Vector temp = (Vector) data.get(key);
+			for (int j = 0; j < temp.size(); j++) {
+				float f = ((Integer) temp.elementAt(j)).intValue();
+				maxValue = Math.max(f, maxValue);
+			}
+		}
+		return (float) (maxValue + maxValue * 0.1);
+	}
+	/**  get the minimum for all the data */
+	public float getMin() {
+		float minValue = 9999999;
+		for (int t = 0; t < keys.size(); t++) {
+			String key = (String) keys.elementAt(t);
+			Vector temp = (Vector) data.get(key);
+			for (int j = 0; j < temp.size(); j++) {
+				float f = ((Integer) temp.elementAt(j)).intValue();
+				minValue = Math.min(f, minValue);
+			}
+		}
+		return (float) (minValue - minValue * 0.1);
+	}
+	/**  get the legend panel */
+	public JPanel getLegend() {
+		JPanel main = new JPanel();
+		GridBagLayout g = new GridBagLayout();
+		main.setLayout(g);
+		GridBagConstraints c = new GridBagConstraints();
+		c.insets = new Insets(3,3,3,3);
+		c.fill = c.BOTH;
+		c.gridwidth = 1;
+		c.gridheight = 1;
+		for (int t = 0; t < keys.size(); t++) {
+			String key = (String) keys.elementAt(t);
+			JLabel colorSwatch = new JLabel("  ");
+			colorSwatch.setBackground((Color) colorList.elementAt(t % colorList.size()));
+			colorSwatch.setOpaque(true);
+			c.gridx = 1;
+			c.gridy = t;
+			g.setConstraints(colorSwatch, c);
+			main.add(colorSwatch);
+			JLabel name = new JLabel(key);
+			c.gridx = 2;
+			c.gridy = t;
+			g.setConstraints(name, c);
+			main.add(name);
+		}
+		return main;
+	}
+	/**  get the stats panel */
+	public JPanel getStats() {
+		int total = 0;
+		float totalValue = 0;
+		float maxValue = 0;
+		float minValue = 999999;
+		for (int t = 0; t < keys.size(); t++) {
+			String key = (String) keys.elementAt(t);
+			Vector temp = (Vector) data.get(key);
+			for (int j = 0; j < temp.size(); j++) {
+				float f = ((Integer) temp.elementAt(j)).intValue();
+				minValue = Math.min(f, minValue);
+				maxValue = Math.max(f, maxValue);
+				totalValue += f;
+				total++;
+			}
+		}
+		float averageValue = totalValue / total;
+		JPanel main = new JPanel();
+		GridBagLayout g = new GridBagLayout();
+		main.setLayout(g);
+		DecimalFormat df = new DecimalFormat("#0.0");
+		GridBagConstraints c = new GridBagConstraints();
+		c.insets = new Insets(3,6,3,6);
+		c.fill = c.BOTH;
+		c.gridwidth = 1;
+		c.gridheight = 1;
+		JLabel count = new JLabel("Count: " + total);
+		c.gridx = 1;
+		c.gridy = 1;
+		g.setConstraints(count, c);
+		JLabel min = new JLabel("Min: " + df.format(new Float(minValue)));
+		c.gridx = 1;
+		c.gridy = 2;
+		g.setConstraints(min, c);
+		JLabel max = new JLabel("Max: " + df.format(new Float(maxValue)));
+		c.gridx = 1;
+		c.gridy = 3;
+		g.setConstraints(max, c);
+		JLabel average = new JLabel("Average: " + df.format(new Float(averageValue)));
+		c.gridx = 1;
+		c.gridy = 4;
+		g.setConstraints(average, c);
+		main.add(count);
+		main.add(min);
+		main.add(max);
+		main.add(average);
+		return main;
+	}
+	/**  gets the size of the biggest Vector */
+	public int getDataWidth() {
+		int size = 0;
+		for (int t = 0; t < keys.size(); t++) {
+			String key = (String) keys.elementAt(t);
+			Vector v = (Vector) data.get(key);
+			size = Math.max(size, v.size());
+		}
+		return size;
+	}
+	/**  draws the graph */
+	public void update(Graphics g) {
+		// setup drawing area
+	 int base = 10;
+		g.setColor(Color.white);
+		g.fillRect(0, 0, getSize().width, getSize().height);
+		int width = getSize().width;
+		int height = getSize().height;
+		float maxValue = getMax();
+		float minValue = getMin();
+		// draw grid
+		g.setColor(Color.gray);
+		int dataWidth = getDataWidth();
+		int increment = Math.round((width - 1) / (dataWidth - 1));
+		/*for (int t = 0; t < dataWidth; t++) {
+			g.drawLine(t * increment, 0, t * increment, height);
+		}*/
+		int yIncrement = Math.round(((float) height - (1+base)) / (10 - 1));
+		/*for (int t = 0; t < 10; t++) {
+			g.drawLine(0, height - t * yIncrement, width, height - t * yIncrement);
+		}*/
+		// draw axis
+		for (int t = 1; t < dataWidth; t+=(dataWidth/25+1)) {
+			g.drawString((new Integer(t)).toString(), t * increment + 2, height - 2);
+		}
+		float incrementValue = (maxValue - minValue) / (10 - 1);
+		for (int t = 0; t < 10; t++) {
+			g.drawString(new Integer(Math.round(minValue + (t * incrementValue))).toString(), 2,height - t * yIncrement - 2 - base);
+		}
+		// draw data lines
+		int start = 0;
+		for (int t = 0; t < keys.size(); t++) {
+			String key = (String) keys.elementAt(t);
+			Vector v = (Vector) data.get(key);
+			start = 0;
+			g.setColor((Color) colorList.elementAt(t % colorList.size()));
+			for (int i = 0; i < v.size() - 1; i++) {
+				float y1 = (float) ((Integer) v.elementAt(i)).intValue();
+				float y2 = (float) ((Integer) v.elementAt(i + 1)).intValue();
+				y1 = y1 - minValue;
+				y2 = y2 - minValue;
+				int Y1 = Math.round((height * y1) / (maxValue - minValue));
+				int Y2 = Math.round((height * y2) / (maxValue - minValue));
+				Y1 = height - Y1 - base;
+				Y2 = height - Y2 - base;
+							g.drawLine(start, Y1, start + increment, Y2);
+				Integer value = (Integer) v.elementAt(i);
+				start += increment;
+			}
+		}
+	}
+	public void paint(Graphics g) {
+		update(g);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/reporters/ResultCollector.java b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/ResultCollector.java
new file mode 100644
index 0000000..dd4b70b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/reporters/ResultCollector.java
@@ -0,0 +1,433 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.reporters;
+import java.io.BufferedOutputStream;
+import java.io.ByteArrayOutputStream;
+import java.io.File;
+import java.io.FileNotFoundException;
+import java.io.FileOutputStream;
+import java.io.IOException;
+import java.io.OutputStreamWriter;
+import java.io.PrintWriter;
+import java.io.Serializable;
+import java.util.ArrayList;
+import java.util.Collections;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+
+import org.apache.avalon.framework.configuration.Configuration;
+import org.apache.avalon.framework.configuration.ConfigurationException;
+import org.apache.avalon.framework.configuration.DefaultConfigurationBuilder;
+import org.apache.avalon.framework.configuration.DefaultConfigurationSerializer;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.samplers.Clearable;
+import org.apache.jmeter.samplers.Remoteable;
+import org.apache.jmeter.samplers.SampleEvent;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.save.SaveService;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.TextFile;
+import org.xml.sax.SAXException;
+
+/**
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:47 $
+ *@version    1.0
+ */
+
+public class ResultCollector extends AbstractListenerElement implements SampleListener, Clearable,
+		Serializable,TestListener,Remoteable
+{
+	private final static String COLLECTED = "collected";
+	public final static String FILENAME = "filename";
+	private static boolean functionalMode = false;
+
+	/**
+	 *  !ToDo (Field description)
+	 */
+	//protected List results = Collections.synchronizedList(new ArrayList());
+	private int current;
+	private DefaultConfigurationSerializer serializer;
+	private boolean inLoading = false;
+	private PrintWriter out;
+	private boolean inTest = false;
+	private static Map files = new HashMap();
+	private Set hosts = new HashSet();
+	
+
+	/**
+	 *  !ToDo (Constructor description)
+	 */
+	public ResultCollector()
+	{
+		current = -1;
+		serializer = new DefaultConfigurationSerializer();
+	}
+	
+	private void setFilenameProperty(String f)
+	{
+		setProperty(FILENAME,f);
+	}
+	
+	public String getFilename()
+	{
+		return getPropertyAsString(FILENAME);
+	}
+
+	/**
+	 *  Sets the filename attribute of the ResultCollector object
+	 *
+	 *@param  f  The new filename value`
+	 */
+	public void setFilename(String f) throws IOException,IllegalUserActionException
+	{
+		if(inTest)
+		{
+			throw new IllegalUserActionException(JMeterUtils.getResString("busy_testing"));
+		}
+		try
+		{
+			setFilenameProperty(f);
+			loadExistingFile();
+		}
+		catch(SAXException e)
+		{
+			e.printStackTrace();
+			throw new IOException("File "+f+" was improperly formatted");
+		}
+		catch(ConfigurationException e)
+		{
+			throw new IOException("File "+f+" was improperly formatted");
+		}
+	}
+	
+	public void testEnded(String host)
+	{
+		hosts.remove(host);
+		if(hosts.size() == 0)
+		{
+			finalizeFileOutput();
+			inTest = false;
+		}
+	}
+	
+	public void testStarted(String host)
+	{
+		hosts.add(host);
+		try {
+			initializeFileOutput();
+		} catch(Exception e) {
+			e.printStackTrace();
+		} 
+		inTest = true;
+	}
+	
+	public void testEnded()
+	{
+		testEnded("local");
+	}
+	
+	public void testStarted()
+	{
+		testStarted("local");		
+	}
+
+	public void loadExistingFile()
+		throws SAXException, IOException, ConfigurationException {
+			inLoading = true;
+		if(new File(getFilename()).exists())
+		{
+			clear();
+			try {
+				Configuration savedSamples = getConfiguration(getFilename());
+				readSamples(savedSamples);
+			} catch(Exception e) {
+				e.printStackTrace();
+			}
+		}
+		inLoading = false;
+	}
+
+	/**
+	 *  Description of the Method
+	 */
+	private static void writeFileStart(PrintWriter writer)
+	{		
+			writer.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
+			writer.println("<testResults>");
+	}
+
+	/**
+	 *  Description of the Method
+	 */
+	private void writeFileEnd()
+	{
+		out.print("</testResults>");
+	}
+	
+	private static synchronized PrintWriter getFileWriter(String filename) throws IOException
+	{
+		PrintWriter writer = (PrintWriter)files.get(filename);
+		boolean trimmed = true;
+		if(writer == null)
+		{
+			trimmed = trimLastLine(filename);
+			writer = new PrintWriter(new OutputStreamWriter(
+					new BufferedOutputStream(new FileOutputStream(
+					filename,trimmed)),"UTF-8"));
+			files.put(filename,writer);
+		}
+		if(!trimmed)
+		{
+			writeFileStart(writer);
+		}
+		return writer;
+	}
+	
+	private static boolean trimLastLine(String filename)
+	{
+		try
+		{
+			TextFile text = new TextFile(filename);
+			String xml = text.getText();
+			xml = xml.substring(0,xml.indexOf("</testResults>"));
+			text.setText(xml);
+		}
+		catch(Exception e)
+		{
+			return false;
+		}
+		return true;
+	}
+	
+	public static void enableFunctionalMode(boolean mode)
+	{
+		functionalMode = mode;
+	}
+
+	/**
+	 *  Gets the serializedSampleResult attribute of the ResultCollector object
+	 *
+	 *@param  result  Description of the Parameter
+	 *@return         The serializedSampleResult value
+	 */
+	private String getSerializedSampleResult(SampleResult result) throws SAXException,
+			IOException,ConfigurationException
+	{
+		ByteArrayOutputStream tempOut = new ByteArrayOutputStream();
+		serializer.serialize(tempOut, SaveService.getConfiguration(result,functionalMode));
+		String serVer = tempOut.toString();
+		return serVer.substring(serVer.indexOf(System.getProperty("line.separator")));
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  testResults  Description of the Parameter
+	 */
+	private void readSamples(Configuration testResults) throws
+			IOException,SAXException,ConfigurationException
+	{
+		Configuration[] samples = testResults.getChildren();
+		for(int i = 0; i < samples.length; i++)
+		{
+			SampleResult result = SaveService.getSampleResult(samples[i]);
+			sendToVisualizer(result);
+			recordResult(result);
+		}
+	}
+
+	/**
+	 *  Gets the configuration attribute of the ResultCollector object
+	 *
+	 *@param  filename  Description of the Parameter
+	 *@return           The configuration value
+	 */
+	private Configuration getConfiguration(String filename) throws SAXException,
+			IOException,ConfigurationException
+	{
+		DefaultConfigurationBuilder builder = new DefaultConfigurationBuilder();
+		return builder.buildFromFile(filename);
+	}
+
+	/**
+	 *  !ToDo (Method description)
+	 */
+	public void clear()
+	{
+		current = -1;
+		if(getVisualizer() != null && getVisualizer() instanceof Clearable)
+		{
+			((Clearable)getVisualizer()).clear();
+		}
+		finalizeFileOutput();
+	}
+
+	/**
+	 *  !ToDo (Method description)
+	 *
+	 *@param  l  !ToDo (Parameter description)
+	 */
+	public void setListener(Object l) { }
+
+	
+
+	/**
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 */
+	public void sampleStarted(SampleEvent e) { }
+
+	/**
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 */
+	public void sampleStopped(SampleEvent e) { }
+
+	/**
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 */
+	public void sampleOccurred(SampleEvent e)
+	{
+		sendToVisualizer(e.getResult());
+		try
+		{
+			recordResult(e.getResult());
+		}
+		catch(Exception err)
+		{
+			err.printStackTrace(); //should throw exception back to caller
+		}
+	}
+
+	protected void sendToVisualizer(SampleResult r) {
+		if(getVisualizer() != null)
+		{
+			getVisualizer().add(r);
+		}
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  result  Description of the Parameter
+	 */
+	private void recordResult(SampleResult result) throws SAXException,IOException,
+			ConfigurationException
+	{
+		if(out != null)
+		{
+			if(!isResultMarked(result))
+			{
+				out.print(getSerializedSampleResult(result));
+			}
+		}
+	}
+	
+	private synchronized boolean isResultMarked(SampleResult res)
+	{
+		boolean marked = res.isMarked(getFilename());
+		if(!marked)
+		{
+			res.setMarked(getFilename());
+		}
+		return marked;
+	}
+
+	private void initializeFileOutput() throws IOException,
+			ConfigurationException,SAXException
+	{
+		
+		if(out == null && getFilename() != null)
+		{
+			if(out == null)
+			{
+				try
+				{
+					out = getFileWriter(getFilename());
+				}
+				catch(FileNotFoundException e)
+				{
+					out = null;
+				}
+			}
+		}
+	}
+
+	/**
+	 *  Description of the Method
+	 */
+	private synchronized void finalizeFileOutput()
+	{
+		if(out != null)
+		{
+			writeFileEnd();
+			out.close();
+			files.remove(getFilename());
+			out = null;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Entries
new file mode 100644
index 0000000..1b697fb
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Entries
@@ -0,0 +1,5 @@
+/messages.properties/1.2/Wed Aug 14 02:52:19 2002//Tv1_7_3
+/messages_de.properties/1.3/Wed Aug 14 02:52:19 2002//Tv1_7_3
+/messages_ja.properties/1.2/Wed Aug 14 02:52:19 2002//Tv1_7_3
+/messages_no.properties/1.2/Wed Aug 14 02:52:19 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Repository
new file mode 100644
index 0000000..dccf194
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/resources
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages.properties b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages.properties
new file mode 100644
index 0000000..46bb7ab
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages.properties
@@ -0,0 +1,274 @@
+file=File
+run=Run
+save=Save As...
+save_all=Save Test Plan
+load=Load
+open=Open...
+edit=Edit
+exit=Exit
+start=Start
+stop=Stop
+new=New
+clear=Clear
+clear_all=Clear All
+report=Report
+analyze=Analyze Data File...
+option=Options
+appearance=Look and Feel
+menu_timer=Timer
+menu_assertions=Assertions
+menu_listener=Listener
+menu_logic_controller=Logic Controller
+menu_generative_controller=Sampler
+menu_config_element=Config Element
+menu_response_based_modifiers=Response Based Modifiers
+menu_modifiers=Modifiers
+sslmanager=SSL Manager
+pkcs12_desc=PKCS 12 Key (*.p12)
+ssl_error_title=Key Store Problem
+ssl_pass_prompt=Please type your password
+ssl_pass_title=KeyStore Password
+ssl_alias_prompt=Please type your preferred alias
+ssl_alias_select=Select your alias for the test
+ssl_alias_title=Client Alias
+help=Help
+about=About Apache JMeter
+remote_start=Remote Start
+remote_stop=Remote Stop
+root=Root
+test_plan=Test Plan
+workbench=WorkBench
+add=Add
+remove=Remove
+delete=Delete
+threadgroup=Thread Group
+controller=Controller
+config_element=Config Element
+protocol=Protocol:
+domain=Domain
+port=Port:
+path=Path:
+follow_redirects=Follow Redirects
+use_keepalive=Use KeepAlive
+method=Method:
+default_parameters=Default Parameters
+name=Name:
+value=Value
+metadata=MetaData
+secure=Secure
+expiration=Expiration
+username=Username
+password=Password
+number_of_threads=Number of Threads:
+infinite=Forever
+iterator_num=Loop Count:
+add_value=Add Value
+paramtable=Send Parameters With the Request:
+upload=File Upload
+field_name=Field name
+looping_control=Looping Control
+browse=Browse...
+constant_timer_memo=Add a constant delay between sampling
+gaussian_timer_memo=Adds a random delay with a gaussian distribution
+uniform_timer_memo=Adds a random delay with a uniform distribution
+modification_controller_title=Modification Manager
+mimetype=Mimetype
+patterns_to_include=Patterns to Include
+patterns_to_exclude=Patterns to Exclude
+add_pattern=Add Pattern:
+ramp_up=Ramp-Up Period (in seconds):
+constant_timer_title=Constant Timer
+constant_timer_delay=Thread Delay (in milliseconds):
+gaussian_timer_title=Gaussian Random Timer
+gaussian_timer_delay=Constant Delay Offset (in milliseconds):
+gaussian_timer_range=Deviation (in milliseconds):
+uniform_timer_title=Uniform Random Timer
+uniform_timer_delay=Constant Delay Offset (in milliseconds):
+uniform_timer_range=Random Delay Maximum (in milliseconds):
+thread_delay_properties=Thread Delay Properties
+thread_group_title=Thread Group
+loop_controller_title=Loop Controller
+modification_manager_title=Modification Manager
+interleave_control_title=Interleave Controller
+random_control_title=Random Controller
+logic_controller_title=Simple Controller
+once_only_controller_title=Once Only Controller
+modification_controller_title=Modification Controller
+workbench_title=WorkBench
+root_title=Root
+menu_edit=Edit
+graph_full_results_title=GraphFull Results
+graph_results_title=Graph Results
+graph_results_data=Data
+graph_results_average=Average
+graph_results_deviation=Deviation
+graph_results_no_samples=No of Samples
+graph_results_ms=ms
+graph_results_latest_sample=Latest Sample
+graph_choose_graphs=Graphs to Display
+spline_visualizer_title=Spline Visualizer
+spline_visualizer_maximum=Maximum
+spline_visualizer_minimum=Minimum
+spline_visualizer_average=Average
+spline_visualizer_incoming=Incoming
+spline_visualizer_waitingmessage=Waiting for samples
+ftp_testing_title=FTP Request
+server=Server Name or IP:
+file_to_retrieve=File to Retrieve From Server:
+ftp_sample_title=FTP Request Defaults
+argument_must_not_be_negative=The Argument must not be negative!
+duration_assertion_failure=The operation lasted to long: It took {0} milliseconds, but should not have lasted longer than {1} milliseconds.
+duration_assertion_title=Duration Assertion
+duration_assertion_duration_test=Duration to Assert
+duration_assertion_label=Duration in milliseconds:
+assertion_title=Response Assertion
+assertion_visualizer_title=Assertion Results
+assertion_resp_field=Response Field to Test
+assertion_text_resp=Text Response
+assertion_url_samp=URL Sampled
+assertion_pattern_match_rules=Pattern Matching Rules
+assertion_contains=Contains
+assertion_matches=Matches
+assertion_not=Not
+assertion_patterns_to_test=Patterns to Test
+assertion_textarea_label=Assertions:
+login_config=Login Configuration
+database_testing_title=JDBC Request
+database_driver_class=Driver Class:
+database_url=JDBC URL:
+database_url_jdbc_props=Database URL and JDBC Driver
+database_login_title=JDBC Database Login Defaults
+database_conn_pool_props=Database Connection Pool
+database_conn_pool_title=JDBC Database Connection Pool Defaults
+database_conn_pool_size=Number of Connections in Pool:
+database_conn_pool_max_usage=Max Usage For Each Connection:
+database_sql_query_title=JDBC SQL Query Defaults
+database_sql_query_string=SQL Query String:
+file_visualizer_title=File Reporter
+file_visualizer_output_file=Write All Data to a File
+file_visualizer_browse=Browse...
+file_visualizer_append=Append to Existing Data File
+file_visualizer_verbose=Verbose Output
+file_visualizer_auto_flush=Automatically Flush After Each Data Sample
+file_visualizer_submit_data=Include Submitted Data
+file_visualizer_open=Open
+file_visualizer_flush=Flush
+file_visualizer_close=Close
+file_visualizer_filename=Enter a new filename, or browse to an existing file.
+file_visualizer_file_options=File Options
+file_visualizer_missing_filename=No output filename specified.
+url_config_post=POST
+url_config_get=GET
+url_config_http=HTTP
+url_config_https=HTTPS
+url_config_title=HTTP Request Defaults
+url_full_config_title=UrlFull Sample
+web_server=Web Server
+web_server_domain=Server Name or IP:
+web_server_port=Port Number:
+web_request=HTTP Request
+web_testing_title=HTTP Request
+web_testing_retrieve_images=Retrieve  All Images and Java Applets (HTML files only)
+send_file=Send a File With the Request:
+send_file_filename_label=Filename:
+send_file_browse=Browse...
+send_file_param_name_label=Parameter Name:
+send_file_mime_label=MIME Type:
+optional_tasks=Optional Tasks
+proxy_title=HTTP Proxy Server
+view_results_title=View Results
+view_results_tree_title=View Results Tree
+view_graph_tree_title=View Graph Tree
+email_results_title=Email Results
+cookie_manager_title=HTTP Cookie Manager
+cookies_stored=Cookies Stored in the Cookie Manager
+header_manager_title=HTTP Header Manager
+headers_stored=Headers Stored in the Header Manager
+auth_manager_title=HTTP Authorization Manager
+auth_base_url=Base URL
+auths_stored=Authorizations Stored in the Authorization Manager
+anchor_modifier_title=HTTP HTML Link Parser
+jndi_config_title=JNDI Configuration
+jndi_url_jndi_props=JNDI Properties
+jndi_lookup_title=JNDI Lookup Configuration
+jndi_lookup_name=Remote Interface
+jndi_method_title=Remote Method Configuration
+jndi_testing_title=JNDI Request
+jndi_method_name=Method Configuration
+jndi_method_home_name=Home Method Name
+jndi_method_home_parms=Home Method Parameters
+jndi_method_remote_name=Remote Method Name
+jndi_method_remote_parms=Remote Method Parameters
+jndi_method_remote_interface_list=Remote Interfaces
+jndi_method_button_reflect=Reflect
+jndi_method_button_invoke=Invoke
+insert_parent=Insert Parent
+copy=Copy
+cut=Cut
+paste_insert=Paste As Insert
+paste=Paste
+url=URL
+success?=Success?
+html_parameter_mask=HTML Parameter Mask
+id_prefix=ID Prefix
+lower_bound=Lower Bound
+upper_bound=Upper Bound
+increment=Increment
+id_suffix=ID Suffix
+url_multipart_config_title=HTTP Multipart Request Defaults
+view_results_in_table=View Results in Table
+http_response_code=HTTP response code
+aggregate_report=Aggregate Report
+login_config_element=Login Config Element
+menu_non_test_elements=Non-Test Elements
+file_already_in_use=That file is already in use
+busy_testing=I'm busy testing, please stop the test before changing settings
+http_user_parameter_modifier=HTTP User Parameter Modifier
+user_param_mod_help_note=(Do not change this.  Instead, modify the file of that name in JMeter's /bin directory)
+filename=File Name
+cancel_exit_to_save=There are test items that have not been saved.  Do you wish to save before exiting?
+cancel_new_to_save=There are test items that have not been saved.  Do you wish to save before clearing the test plan?
+save?=Save?
+insert_before=Insert Before
+insert_after=Insert After
+add_as_child=Add as Child
+cancel=Cancel
+protocol_java_classname=Classname:
+protocol_java_config_tile=Configure Java Sample
+protocol_java_border=Java class
+protocol_java_test_title=Java Testing
+java_request=Java Request
+java_request_defaults=Java Request Defaults
+second=second
+graph_results_throughput=Throughput
+minute=minute
+http_url_rewriting_modifier_title=HTTP URL-Rewriting Modifier
+session_argument_name=Session Argument Name
+path_extension_choice=Path Extension (use ";" as separator)
+you_must_enter_a_valid_number=You must enter a valid number
+invalid_data=Invalid data
+error_occurred=Error Occurred
+proxy_cl_error=If specifying a proxy server, host and port must be given
+functional_mode=Functional Test Mode
+functional_mode_explanation=Select functional test mode only if you need \nto record to file the data received from the server for each request.  \n\nSelecting this option impacts performance considerably.
+stopping_test_title=Stopping Test
+stopping_test=Shutting down all test threads.  Please be patient.
+soap_sampler_title=Soap/XML-RPC Sampler (Alpha code)
+soap_data_title=Soap/XML-RPC Data
+user_defined_variables=User Defined Variables
+regexfunc_param_1=Regular expression used to search results from previous request
+regexfunc_param_2=Template for the replacement string, using groups from the regular expression.  Format is $[group]$.  Example $1$.
+regexfunc_param_3=Which match to use.  An integer 1 or greater, RAND to indicate JMeter should randomly choose, A float, or ALL indicating all matches should be used
+regexfunc_param_4=Between text.  If ALL is selected, the between text will be used to generate the results
+regexfunc_param_5=Default text.  Used instead of the template if the regular expression finds no matches
+function_dialog_menu_item=Function Helper Dialog
+function_params=Function Parameters
+cut_paste_function=Copy and paste function string
+choose_function=Choose a function
+function_helper_title=Function Helper
+generate=Generate
+iteration_counter_arg_1=TRUE, for each user to have own counter, FALSE for a global counter
+request_data=Request Data
+restart=Restart
+encoded_value=URL Encoded Value
+encode?=Encode?
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_de.properties b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_de.properties
new file mode 100644
index 0000000..583e270
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_de.properties
@@ -0,0 +1,269 @@
+file=Datei
+run=Start
+save=Speichern als
+save_all=Speichern Test Plan
+load=Laden
+open=Öffnen
+edit=Bearbeiten
+exit=Beenden
+start=Start
+stop=Stop
+new=Neu
+clear=Löschen
+clear_all=Alle Löschen
+report=Report
+analyze=Analysiere Daten Datei...
+option=Optionen
+appearance=Aussehen
+menu_timer=Timer
+menu_assertions=Überprüfung
+menu_listener=Lauscher
+menu_logic_controller=Logik Kontroller
+menu_generative_controller=Sampler
+menu_config_element=Konfigurations Element
+menu_response_based_modifiers=Antwort Basierter Modifizierer
+menu_modifiers=Modifizierer
+sslManager=SSL Manager
+pkcs12_desc=PKCS 12 Key (*.p12)
+ssl_error_title=Schlüssel Speicher Problem
+ssl_pass_prompt=Bitte geben Sie Ihr Passwort ein
+ssl_pass_title=Schlüssel Speicher Passwort
+ssl_alias_prompt=Bitte geben Sie Ihren bevorzugten Alias ein
+ssl_alias_select=Wählen Sie Ihren Alias für den Test
+ssl_alias_title=Client Alias
+help=Hilfe
+about=Über Apache JMeter
+remote_start=Remote Start
+remote_stop=Remote Stop
+root=Root
+test_plan=Test Plan
+workbench=WorkBench
+add=Hinzufügen
+remove=Entfernen
+delete=Löschen
+threadgroup=Thread Gruppe
+controller=Controller
+config_element=Konfigurations Element
+protocol=Protocol:
+domain=Domain
+port=Port:
+path=Path:
+follow_redirects=Folge Redirects
+use_keepalive=Benutze KeepAlive
+method=Method:
+default_parameters=Standard Parameters
+name=Name:
+value=Wert
+metadata=MetaData
+secure=Sicher
+expiration=Expiration
+username=Benutzername
+password=Passwort
+number_of_threads=Anzahl von Threads:
+infinite=Endloswiederholen
+iterator_num=Wiederholanzahl:
+add_value=Wert addieren
+paramtable=Parameter die mit dem Request gesendet werden:
+upload=Datei hochladen
+field_name=Feldername
+looping_control=Wiederholungs Controlle
+browse=Datei laden...
+constant_timer_memo=Add a constant delay between sampling
+gaussian_timer_memo=Adds a random delay with a gaussian distribution
+uniform_timer_memo=Adds a random delay with a uniform distribution
+modification_controller_title=Modifikation Manager
+mimetype=Mimetype
+patterns_to_include=Muster zum einschliessen
+patterns_to_exclude=Muster zum ausschliessen
+add_pattern=Addiere Muster:
+ramp_up=Ramp-Up Period (in seconds):
+constant_timer_title=Konstanter Timer
+constant_timer_delay=Thread Delay (in milliseconds):
+gaussian_timer_title=Gaussian Random Timer
+gaussian_timer_delay=Constant Delay Offset (in milliseconds):
+gaussian_timer_range=Deviation (in milliseconds):
+uniform_timer_title=Uniform Random Timer
+uniform_timer_delay=Constant Delay Offset (in milliseconds):
+uniform_timer_range=Random Delay Maximum (in milliseconds):
+thread_delay_properties=Thread Delay Properties
+thread_group_title=Thread Gruppe
+loop_controller_title=Wiederhollungs Kontroller
+modification_manager_title=Modifikations Manager
+interleave_control_title=Aus Controller
+random_control_title=Zufalls Kontroller
+logic_controller_title=Einfacher Kontroller
+once_only_controller_title=Nur einmal Kontroller
+modification_controller_title=Modifikations Kontroller
+workbench_title=WorkBench
+root_title=Root
+menu_edit=Editieren
+graph_full_results_title=GraphFull Results
+graph_results_title=Graph Results
+graph_results_data=Daten
+graph_results_average=Durchschnitt
+graph_results_deviation=Abweichung
+graph_results_no_samples=Nr. von Samples
+graph_results_ms=ms
+graph_results_latest_sample=letztes Sample
+graph_choose_graphs=Graphs to Display
+spline_visualizer_title=Spline Visualizer
+spline_visualizer_maximum=Maximum
+spline_visualizer_minimum=Minimum
+spline_visualizer_average=Durchschnitt
+spline_visualizer_incoming=hereinkommened
+spline_visualizer_waitingmessage=Waiting for samples
+ftp_testing_title=FTP Request
+server=Server Name oder IP:
+file_to_retrieve=Dateien die vom Server geholt werden sollen:
+ftp_sample_title=FTP Request Defaults
+assertion_title=Assertion
+assertion_visualizer_title=Assertion Results
+assertion_resp_field=zu testendes Response Feld
+assertion_text_resp=Text Response
+assertion_url_samp=URL Sampled
+assertion_pattern_match_rules=Pattern Matching Rules
+assertion_contains=Einhält
+assertion_matches=Matches/Muster
+assertion_not=Nicht
+assertion_patterns_to_test=zu testende Muster
+assertion_textarea_label=Assertions:
+login_config=Login Konfiguration
+database_testing_title=JDBC Request
+database_driver_class=Driver Class:
+database_url=JDBC URL:
+database_url_jdbc_props=Datenbank URL und JDBC Treiber
+database_login_title=JDBC Datenbank Login Standards
+database_conn_pool_props=Datenbank Connection Pool
+database_conn_pool_title=JDBC Datenbank Connection Pool Standards
+database_conn_pool_size=Anzahl von Connections in Pool:
+database_conn_pool_max_usage=Max Verbrauch für jede Connection:
+database_sql_query_title=JDBC SQL Query Defaults
+database_sql_query_string=SQL Query String:
+file_visualizer_title=Datei Reporter
+file_visualizer_output_file=Schreibe alle daten in eine Datei
+file_visualizer_browse=Datei laden...
+file_visualizer_append=Anhängen an eine existierende Daten Datei
+file_visualizer_verbose=wortreiche Ausgabe
+file_visualizer_auto_flush=automatischer Fulsh nach jedem Daten Sample
+file_visualizer_submit_data=Einschliesslich übermittelten Daten
+file_visualizer_open=Öffnen
+file_visualizer_flush=Flush
+file_visualizer_close=Schliessen
+file_visualizer_filename=Dateinamen eingeben, oder eine existierende Datei auswählen.
+file_visualizer_file_options=Datei Optionen
+file_visualizer_missing_filename=Kein Ausgabe Dateiname angegeben.
+url_config_post=POST
+url_config_get=GET
+url_config_http=HTTP
+url_config_https=HTTPS
+url_config_title=HTTP Request Standard Einstellungen
+url_full_config_title=UrlFull Sample
+web_server=Web Server
+web_server_domain=Server Name or IP:
+web_server_port=Port Number:
+web_request=HTTP Request
+web_testing_title=HTTP Request
+web_testing_retrieve_images=Hole alle Bilder und Java Applets (nur HTML Dateien)
+send_file=Sende eine Datei mit dem Request:
+send_file_filename_label=Dateiname:
+send_file_browse=Datei auswählen...
+send_file_param_name_label=Parameter Name:
+send_file_mime_label=MIME Type:
+optional_tasks=Optional Tasks
+proxy_title=HTTP Proxy Server
+view_results_title=View Results
+view_results_tree_title=View Results Tree
+view_graph_tree_title=View Graph Tree
+email_results_title=Email Results
+cookie_manager_title=HTTP Cookie Manager
+cookies_stored=Cookies gespeichert im Cookie Manager
+header_manager_title=HTTP Header Manager
+headers_stored=Headers gespeichert im Header Manager
+auth_manager_title=HTTP Authorization Manager
+auth_base_url=Base URL
+auths_stored=Authorizations gespeichert im Authorization Manager
+anchor_modifier_title=HTTP HTML Link Parser
+jndi_config_title=JNDI Konfiguration
+jndi_url_jndi_props=JNDI Eigenschaften
+jndi_lookup_title=JNDI Lookup Configuration
+jndi_lookup_name=Remote Interface
+jndi_method_title=Remote Method Configuration
+jndi_testing_title=JNDI Request
+jndi_method_name=Method Configuration
+jndi_method_home_name=Home Method Name
+jndi_method_home_parms=Home Method Parameters
+jndi_method_remote_name=Remote Method Name
+jndi_method_remote_parms=Remote Method Parameters
+jndi_method_remote_interface_list=Remote Interfaces
+jndi_method_button_reflect=Reflect
+jndi_method_button_invoke=Invoke
+insert_parent=Davor Einfügen
+copy=Kopieren
+cut=Ausschneiden
+paste_insert=Als Eintrag einfügen
+paste=Einfügen
+url=URL
+success?=Erfolg?
+html_parameter_mask=HTML Parameter Mask
+id_prefix=ID Prefix
+lower_bound=untere Grenze
+upper_bound=obere Grenze
+increment=Zunahme
+id_suffix=ID Suffix
+url_multipart_config_title=HTTP Multipart Request Defaults
+view_results_in_table=Zeige Ergebnisse in der Tabelle
+http_response_code=HTTP response code
+aggregate_report=Aggregate Report
+login_config_element=Login Config Element
+menu_non_test_elements=Non-Test Elements
+file_already_in_use=Die Datei ist bereits geöffnet
+busy_testing=Ich bin mit dem Testen beschäftigt, bitte stoppen sie den Test bevor sie die Einstellungen ändern.
+http_user_parameter_modifier=HTTP User Parameter Modifier
+user_param_mod_help_note=(Änder Sie dies nicht. Stattdessen, bitte die Datei mit dem Namen in JMeter's /bin Ordner ändern.)
+filename=Dateiname
+cancel_exit_to_save=Es gibt Test die noch nicht gespeichert wurden.  Wollen Sie diese vor dem Beenden speichern?
+cancel_new_to_save=Es gibt Test die noch nicht gespeichert wurden.  Wollen Sie diese vor dem Bereinigen speichern?
+save?=Speichern?
+insert_before=Davor einfügen
+insert_after=Danach einfügen
+add_as_child=Als ein Kind hinzufügen
+cancel=Abbrechen
+protocol_java_classname=Classname:
+protocol_java_config_tile=Configure Java Sample
+protocol_java_border=Java class
+protocol_java_test_title=Java Testing
+java_request=Java Request
+java_request_defaults=Java Request Defaults
+second=Sekunde
+graph_results_throughput=Durchsatz
+minute=Minute
+http_url_rewriting_modifier_title=HTTP URL-Rewriting Modifier
+session_argument_name=Session Argument Name
+path_extension_choice=Path Erweiterung (benutze ";" als Trennzeichen)
+you_must_enter_a_valid_number=Sie müssen ein gültige Nummer eingeben
+invalid_data=ungültige Daten
+error_occurred=Fehler aufgetreten
+proxy_cl_error=Wenn Sie einen Proxy Server spezifizieren, müssen Sie den Host und Port angeben
+functional_mode=Funktionaler Test Mode
+functional_mode_explanation=Wählen Sie den funktionalen Test Mode nur, um die empfangenen Dateien \nvom Server bei jedem Request aufzuzeichnen bzw. zu speichern.  \n\nDiese Funktion führt zu beträchtlichen Performanceverlusten.
+stopping_test_title=Stoppe den Test
+stopping_test=Stoppe alle Tests. Bitte warten ...
+soap_sampler_title=Soap/XML-RPC Sampler (Alpha code)
+soap_data_title=Soap/XML-RPC Data
+user_defined_variables=Benutzer definierte Variablen
+regexfunc_param_1=Reguläre Ausdrücke zum suchen in den Resultsder vorherigen Requests
+regexfunc_param_2=Beispiel für Ersetzungs Strings, benuzte Gruppen von den regulären Ausdrücken
+regexfunc_param_3=Which match to use.  Einen Integer 1 oder grösser, RAND damit JMeter eine zufällige auswahl trifft, eine Fliesskommazahl, oder ALL wenn alle matches benutzt werden
+regexfunc_param_4=Zwischen Text.  Wenn ALL ausgeählt ist, wird der zwischen Test benutzt um das Ergebnis zu generieren
+regexfunc_param_5=Standard text.  Wird benutzt anstatt der Vorlage, falls der Reguläre Ausdruck keine Treffer findet
+function_dialog_menu_item=Funktions Helfer Dialog
+function_params=Funktions Parameter
+cut_paste_function=Kopieren und Einfügen des Funktions Strings
+choose_function=Wählen Sie eine Funktion
+function_helper_title=Funktions Helfer
+generate=Generiere
+iteration_counter_arg_1=TRUE, damit jeder Benutzer einen eingenem Zähler hat, FALSE für eine gesamten Zähler
+request_data=Request Daten
+restart=Restart
+encoded_value=URL Encoded Value
+encode?=Encode?
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_ja.properties b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_ja.properties
new file mode 100644
index 0000000..3e25861
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_ja.properties
@@ -0,0 +1,269 @@
+file=\u30d5\u30a1\u30a4\u30eb
+run=\u5b9f\u884c
+save=\u4fdd\u5b58
+save_all=\u5168\u3066\u4fdd\u5b58
+load=\u8aad\u8fbc
+open=\u958B\u304F...
+edit=\u7de8\u96c6
+exit=\u7d42\u4e86
+start=\u958b\u59cb
+new=New
+stop=\u505c\u6b62
+clear=\u6d88\u53bb
+clear_all=\u5168\u3066\u6d88\u53bb
+report=\u30ec\u30dd\u30fc\u30c8
+analyze=\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u6790
+option=\u30aa\u30d7\u30b7\u30e7\u30f3
+appearance=\u30eb\u30c3\u30af&\u30d5\u30a3\u30fc\u30eb
+sslmanager=SSL \u30de\u30cd\u30fc\u30b8\u30e3
+pkcs12_desc=PKCS 12 Key (*.p12)
+ssl_error_title=\u30AD\u30FC\u30B9\u30C8\u30A2\u30A8\u30E9\u30FC
+ssl_pass_prompt=\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002
+ssl_pass_title=\u30AD\u30FC\u30B9\u30C8\u30A2\u30D1\u30B9\u30EF\u30FC\u30C9
+ssl_alias_prompt=\u3042\u306a\u305f\u306e\u5b9a\u7fa9\u6e08\u307f\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002
+ssl_alias_select=\u30c6\u30b9\u30c8\u306e\u305f\u3081\u306e\u3042\u306a\u305f\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002
+ssl_alias_title=\u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\u30A8\u30A4\u30EA\u30A2\u30B9
+help=\u30d8\u30eb\u30d7
+about=Apache JMeter \u306b\u3064\u3044\u3066
+remote_start=\u958b\u59cb(\u30ea\u30e2\u30fc\u30c8)
+remote_start=\u958B\u59CB(\u30EA\u30E2\u30FC\u30C8)
+root=\u30eb\u30fc\u30c8
+test_plan=\u30c6\u30b9\u30c8\u30d7\u30e9\u30f3
+workbench=\u30ef\u30fc\u30af\u30d9\u30f3\u30c1
+add=\u8ffd\u52a0
+remove=\u524a\u9664
+delete=\u524a\u9664
+threadgroup=\u30b9\u30ec\u30c3\u30c9\u30b0\u30eb\u30fc\u30d7
+controller=\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9
+config_element=\u30b3\u30f3\u30d5\u30a3\u30b0\u30a8\u30ec\u30e1\u30f3\u30c8
+protocol=\u30d7\u30ed\u30c8\u30b3\u30eb
+domain=\u30c9\u30e1\u30a4\u30f3
+port=\u30dd\u30fc\u30c8
+path=\u30d1\u30b9
+follow_redirects=Follow redirects [TO-DO]
+use_keepalive=Use KeepAlive
+method=\u30E1\u30BD\u30C3\u30C9:
+default_parameters=\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf
+name=\u540D\u524D:
+value=\u5024
+secure=\u30bb\u30ad\u30e5\u30a2
+expiration=\u671f\u9650
+username=\u30e6\u30fc\u30b6\u540d
+password=\u30d1\u30b9\u30ef\u30fc\u30c9
+number_of_threads=\u30b9\u30ec\u30c3\u30c9\u6570
+infinite=\u7121\u9650\u30eb\u30fc\u30d7
+iterator_num=\u30EB\u30FC\u30D7\u56DE\u6570:
+add_value=\u5024\u306e\u8ffd\u52a0
+paramtable=\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u9001\u308b\u30d1\u30e9\u30e1\u30fc\u30bf
+upload=\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9
+field_name=\u30d5\u30a3\u30fc\u30eb\u30c9\u540d
+looping_control=\u30eb\u30fc\u30d7\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb
+browse=\u53c2\u7167
+html_parameter_mask=HTML\u30D1\u30E9\u30E1\u30FC\u30BF\u30DE\u30B9\u30AF
+increment=\u30A4\u30F3\u30AF\u30EA\u30E1\u30F3\u30C8
+id_prefix=ID\u63A5\u982D\u8F9E
+lower_bound=\u4E0B\u9650
+upper_bound=\u4E0A\u9650
+menu_modifiers=\u4FEE\u98FE
+jndi_method_remote_parms=\u30EA\u30E2\u30FC\u30C8\u30E1\u30BD\u30C3\u30C9\u30D1\u30E9\u30E1\u30FC\u30BF
+jndi_method_remote_name=\u30EA\u30E2\u30FC\u30C8\u30E1\u30BD\u30C3\u30C9\u540D
+jndi_method_remote_interface_list=\u30EA\u30E2\u30FC\u30C8\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30A4\u30B9
+jndi_method_home_parms=\u30DB\u30FC\u30E0\u30E1\u30BD\u30C3\u30C9\u30D1\u30E9\u30E1\u30FC\u30BF
+jndi_method_home_name=\u30DB\u30FC\u30E0\u30E1\u30BD\u30C3\u30C9\u540D
+remote_stop=\u505C\u6B62(\u30EA\u30E2\u30FC\u30C8)
+paste_insert=\u30DA\u30FC\u30B9\u30C8(\u633F\u5165)
+paste_add=\u30DA\u30FC\u30B9\u30C8(\u8FFD\u52A0)
+cut=\u30AB\u30C3\u30C8
+copy=\u30B3\u30D4\u30FC
+view_graph_tree_title=\u7D50\u679C\u3092\u30B0\u30E9\u30D5\u3068\u30C4\u30EA\u30FC\u3067\u8868\u793A
+menu_assertions=\u30A2\u30B5\u30FC\u30B7\u30E7\u30F3
+menu_config_element=\u5404\u7A2E\u8A2D\u5B9A
+menu_listener=\u30EA\u30B9\u30CA\u30FC
+menu_response_based_modifiers=\u30EC\u30B9\u30DD\u30F3\u30B9\u30D9\u30FC\u30B9\u306E\u4FEE\u98FE
+menu_timer=\u30BF\u30A4\u30DE
+menu_logic_controller=\u30ED\u30B8\u30C3\u30AF\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9
+email_results_title=\u7D50\u679C\u3092\u30E1\u30FC\u30EB\u3067\u9001\u4FE1
+menu_generative_controller=\u4E3B\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9
+modification_controller_title=\u4FEE\u98FE\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9
+constant_timer_memo=\u30B5\u30F3\u30D7\u30EA\u30F3\u30B0\u9593\u306B\u4E00\u5B9A\u306E\u9045\u5EF6\u3092\u8FFD\u52A0
+gaussian_timer_memo=\u30AC\u30A6\u30B7\u30A2\u30F3\u306B\u3088\u308B\u30E9\u30F3\u30C0\u30E0\u306A\u9045\u5EF6\u3092\u8FFD\u52A0
+mimetype=Mime\u30bf\u30a4\u30d7
+patterns_to_include=\u633f\u5165\u3059\u308b\u30d1\u30bf\u30fc\u30f3
+patterns_to_exclude=\u9664\u5916\u3059\u308b\u30d1\u30bf\u30fc\u30f3
+add_pattern=\u30D1\u30BF\u30FC\u30F3\u8FFD\u52A0:
+ramp_up=Ramp-Up \u671f\u9593 (\u79d2):
+constant_timer_title=\u5B9A\u6570\u30BF\u30A4\u30DE
+constant_timer_delay=\u30b9\u30ec\u30c3\u30c9\u9045\u5ef6\u6642\u9593 (\u30df\u30ea\u79d2):
+gaussian_timer_title=\u30AC\u30A6\u30B7\u30A2\u30F3\u4E71\u6570\u30BF\u30A4\u30DE
+gaussian_timer_delay=\u9045\u5ef6\u6642\u9593\u306e\u5b9a\u6570\u30aa\u30d5\u30bb\u30c3\u30c8 (\u30df\u30ea\u79d2):
+gaussian_timer_range=\u504f\u5dee (\u30df\u30ea\u79d2):
+uniform_timer_title=\u4E00\u69D8\u4E71\u6570\u30BF\u30A4\u30DE
+uniform_timer_delay=\u9045\u5ef6\u6642\u9593\u306e\u5b9a\u6570\u30aa\u30d5\u30bb\u30c3\u30c8 (\u30df\u30ea\u79d2):
+uniform_timer_range=\u6700\u5927\u9045\u5ef6\u6642\u9593 (\u30df\u30ea\u79d2):
+thread_delay_properties=\u30b9\u30ec\u30c3\u30c9\u9045\u5ef6\u6642\u9593\u30d7\u30ed\u30d1\u30c6\u30a3
+thread_group_title=\u30b9\u30ec\u30c3\u30c9\u30b0\u30eb\u30fc\u30d7
+loop_controller_title=\u30eb\u30fc\u30d7\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9
+modification_manager_title=\u4fee\u6b63\u30de\u30cd\u30fc\u30b8\u30e3
+interleave_control_title=\u30A4\u30F3\u30BF\u30EA\u30FC\u30D6\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9
+random_control_title=Random Controller
+logic_controller_title=\u30B7\u30F3\u30D7\u30EB\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9
+once_only_controller_title=\u4E00\u5EA6\u3060\u3051\u5B9F\u884C\u3055\u308C\u308B\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9
+workbench_title=\u30ef\u30fc\u30af\u30d9\u30f3\u30c1
+root_title=\u30eb\u30fc\u30c8
+menu_edit=\u7de8\u96c6
+graph_full_results_title=\u7D50\u679C\u3092\u30B0\u30E9\u30D5\u8868\u793A(\u8A73\u7D30)
+graph_results_title=\u30b0\u30e9\u30d5\u8868\u793a
+graph_results_data=\u30c7\u30fc\u30bf
+graph_results_average=\u5e73\u5747
+graph_results_deviation=\u504f\u5dee
+graph_results_no_samples=\u30B5\u30F3\u30D7\u30EB\u306A\u3057
+graph_results_ms=ms
+graph_results_latest_sample=\u6700\u65B0\u306E\u30B5\u30F3\u30D7\u30EB
+graph_choose_graphs=\u8868\u793A\u3059\u308B\u30B0\u30E9\u30D5
+spline_visualizer_title=\u30b9\u30d7\u30e9\u30a4\u30f3\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30b6
+spline_visualizer_maximum=\u6700\u5927
+spline_visualizer_minimum=\u6700\u5c0f
+spline_visualizer_average=\u5e73\u5747
+spline_visualizer_incoming=\u5230\u7740
+spline_visualizer_waitingmessage=\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u958b\u59cb\u307e\u3067\u304a\u5f85\u3061\u4e0b\u3055\u3044\u3002
+ftp_testing_title=FTP \u30ea\u30af\u30a8\u30b9\u30c8
+server=\u30b5\u30fc\u30d0\u540d\u307e\u305f\u306f IP:
+file_to_retrieve=\u30b5\u30fc\u30d0\u304b\u3089\u7e70\u308a\u8fd4\u3057\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a1\u30a4\u30eb:
+ftp_sample_title=FTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a
+assertion_title=\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3
+assertion_visualizer_title=\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3 \u7d50\u679c
+assertion_resp_field=\u30c6\u30b9\u30c8\u3059\u308b\u30ec\u30b9\u30dd\u30f3\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9
+assertion_text_resp=\u30c6\u30ad\u30b9\u30c8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9
+assertion_url_samp=\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3055\u308c\u305f URL
+assertion_pattern_match_rules=\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u30eb\u30fc\u30eb
+assertion_contains=\u542b\u3080
+assertion_matches=\u30de\u30c3\u30c1\u3059\u308b
+assertion_not=\u5426\u5b9a
+assertion_patterns_to_test=\u30c6\u30b9\u30c8\u30d1\u30bf\u30fc\u30f3
+assertion_textarea_label=\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3:
+login_config=\u30ed\u30b0\u30a4\u30f3\u8a2d\u5b9a
+database_testing_title=JDBC \u30ea\u30af\u30a8\u30b9\u30c8
+database_driver_class=\u30c9\u30e9\u30a4\u30d0\u30af\u30e9\u30b9:
+database_url=JDBC URL:
+database_url_jdbc_props=\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 URL \u3068 JDBC \u30c9\u30e9\u30a4\u30d0
+database_login_title=JDBC \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30ed\u30b0\u30a4\u30f3\u8a2d\u5b9a
+database_conn_pool_props=\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30eb
+database_conn_pool_title=JDBC \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30eb\u8a2d\u5b9a
+database_conn_pool_size=\u30d7\u30fc\u30eb\u4e2d\u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6570:
+database_conn_pool_max_usage=\u5404\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u6700\u5927\u4f7f\u7528\u6570:
+database_sql_query_title=JDBC SQL \u30af\u30a8\u30ea\u30fc\u8a2d\u5b9a
+database_sql_query_string=SQL \u30af\u30a8\u30ea\u30fc\u6587\u5b57\u5217:
+file_visualizer_title=\u30d5\u30a1\u30a4\u30eb\u30ec\u30dd\u30fc\u30bf
+file_visualizer_output_file=\u5168\u3066\u306e\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b
+file_visualizer_browse=\u53c2\u7167...
+file_visualizer_append=\u65e2\u306b\u5b58\u5728\u3059\u308b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0
+file_visualizer_verbose=\u8a73\u7d30\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u51fa\u529b
+file_visualizer_auto_flush=\u5404\u30c7\u30fc\u30bf\u3092\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u3057\u305f\u3042\u3068\u306b\u81ea\u52d5\u7684\u306b\u30d5\u30e9\u30c3\u30b7\u30e5
+file_visualizer_submit_data=\u9001\u4fe1\u30c7\u30fc\u30bf\u3092\u542b\u307e\u305b\u308b
+file_visualizer_open=\u958b\u304f
+file_visualizer_flush=\u30d5\u30e9\u30c3\u30b7\u30e5
+file_visualizer_close=\u9589\u3058\u308b
+file_visualizer_filename=\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5165\u529b\u3059\u308b\u304b\u3001\u65e2\u306b\u5b58\u5728\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u4e0b\u3055\u3044\u3002
+file_visualizer_file_options=\u30d5\u30a1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3
+file_visualizer_missing_filename=\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002
+url_config_post=POST
+url_config_get=GET
+url_config_http=HTTP
+url_config_https=HTTPS
+url_config_title=HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a
+url_full_config_title=HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a
+web_server=Web \u30b5\u30fc\u30d0
+web_server_domain=\u30b5\u30fc\u30d0\u540d\u307e\u305f\u306f IP:
+web_server_port=\u30dd\u30fc\u30c8\u756a\u53f7:
+web_request=HTTP \u30ea\u30af\u30a8\u30b9\u30c8
+web_testing_title=HTTP \u30ea\u30af\u30a8\u30b9\u30c8
+web_testing_retrieve_images=\u5168\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u3068\u30a2\u30d7\u30ec\u30c3\u30c8\u3092\u7e70\u308a\u8fd4\u3057\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b(HTML \u30d5\u30a1\u30a4\u30eb\u306e\u307f)
+send_file=\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u4e00\u7dd2\u306b\u9001\u4fe1\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb:
+send_file_filename_label=\u30d5\u30a1\u30a4\u30eb\u540d:
+send_file_browse=\u53c2\u7167...
+send_file_param_name_label=\u30d1\u30e9\u30e1\u30fc\u30bf\u540d:
+send_file_mime_label=MIME \u30bf\u30a4\u30d7:
+optional_tasks=\u30aa\u30d7\u30b7\u30e7\u30f3\u30bf\u30b9\u30af
+proxy_title=HTTP \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0
+view_results_title=\u7d50\u679c\u8868\u793a
+view_results_tree_title=\u30c4\u30ea\u30fc\u3067\u7d50\u679c\u8868\u793a
+cookie_manager_title=HTTP \u30af\u30c3\u30ad\u30fc\u30de\u30cd\u30fc\u30b8\u30e3
+cookies_stored=\u30af\u30c3\u30ad\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30af\u30c3\u30ad\u30fc
+header_manager_title=HTTP \u30d8\u30c3\u30c0\u30de\u30cd\u30fc\u30b8\u30e3
+headers_stored=\u30d8\u30c3\u30c0\u30fc\u30de\u30cd\u30fc\u30b8\u30e3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30d8\u30c3\u30c0
+auth_manager_title=HTTP \u8a8d\u8a3c\u30de\u30cd\u30fc\u30b8\u30e3
+auth_base_url=\u30d9\u30fc\u30b9URL
+auths_stored=\u8a8d\u8a3c\u30de\u30cd\u30fc\u30b8\u30e3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u8a8d\u8a3c
+anchor_modifier_title=HTTP HTML \u30ea\u30f3\u30af\u30d1\u30fc\u30b5
+jndi_config_title=JNDI \u8a2d\u5b9a
+jndi_url_jndi_props=JNDI \u30d7\u30ed\u30d1\u30c6\u30a3
+jndi_lookup_title=JNDI \u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u5b9a
+jndi_lookup_name=\u30ea\u30e2\u30fc\u30c8\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9
+jndi_method_title=\u30ea\u30e2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u8a2d\u5b9a
+jndi_testing_title=JNDI \u30ea\u30af\u30a8\u30b9\u30c8
+jndi_method_name=\u30e1\u30bd\u30c3\u30c9\u540d
+jndi_method_parms=\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570
+jndi_method_button_reflect=\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3
+jndi_method_button_invoke=\u547c\u3073\u51fa\u3057
+uniform_timer_memo=\u4E00\u69D8\u306B\u30E9\u30F3\u30C0\u30E0\u306A\u9045\u5EF6\u3092\u8FFD\u52A0
+insert_parent=\u4E0A\u306E\u968E\u5C64\u306B\u633F\u5165
+url=URL
+success?=\u6210\u529F?
+id_suffix=ID Suffix
+url_multipart_config_title=HTTP Multipart Request Defaults
+view_results_in_table=View Results in Table
+http_response_code=HTTP response code
+aggregate_report=Aggregate Report
+login_config_element=Login Config Element
+menu_non_test_elements=Non-Test Elements
+file_already_in_use=That file is already in use
+busy_testing=I'm busy testing, please stop the test before changing settings
+http_user_parameter_modifier=HTTP User Parameter Modifier
+user_param_mod_help_note=(\u5909\u66F4\u3057\u306A\u3044\u3067\u304F\u3060\u3055\u3044\u3002\u5909\u66F4\u3059\u308B\u5834\u5408\u306F\u3001JMeter\u306E/bin\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306B\u3042\u308B\u540C\u76DF\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u4FEE\u6B63\u3057\u3066\u304F\u3060\u3055\u3044\u3002)
+filename=File Name
+cancel_exit_to_save=There are test items that have not been saved.  Do you wish to save before exiting?
+cancel_new_to_save=There are test items that have not been saved.  Do you wish to save before clearing the test plan?
+save?=Save?
+insert_before=Insert Before
+insert_after=Insert After
+add_as_child=Add as Child
+cancel=Cancel
+protocol_java_classname=Classname:
+protocol_java_config_tile=Configure Java Sample
+protocol_java_border=Java class
+protocol_java_test_title=Java Testing
+java_request=Java Request
+java_request_defaults=Java Request Defaults
+second=second
+graph_results_throughput=Throughput
+minute=minute
+http_url_rewriting_modifier_title=HTTP URL-Rewriting Modifier
+session_argument_name=Session Argument Name
+path_extension_choice=Path Extension (use ";" as separator)
+you_must_enter_a_valid_number=You must enter a valid number
+invalid_data=Invalid data
+error_occurred=Error Occurred
+proxy_cl_error=If specifying a proxy server, host and port must be given
+functional_mode=Functional Test Mode
+functional_mode_explanation=Select functional test mode only if you need \nto record to file the data received from the server for each request.  \n\nSelecting this option impacts performance considerably.
+stopping_test_title=Stopping Test
+stopping_test=Shutting down all test threads.  Please be patient.
+soap_sampler_title=Soap/XML-RPC Sampler (Alpha code)
+soap_data_title=Soap/XML-RPC Data
+user_defined_variables=User Defined Variables
+regexfunc_param_1=Regular expression used to search results from previous request
+regexfunc_param_2=Template for the replacement string, using groups from the regular expression.  Format is $[group]$.  Example $1$.
+regexfunc_param_3=Which match to use.  An integer 1 or greater, RAND to indicate JMeter should randomly choose, A float, or ALL indicating all matches should be used
+regexfunc_param_4=Between text.  If ALL is selected, the between text will be used to generate the results
+regexfunc_param_5=Default text.  Used instead of the template if the regular expression finds no matches
+function_dialog_menu_item=Function Helper Dialog
+function_params=Function Parameters
+cut_paste_function=Copy and paste function string
+choose_function=Choose a function
+function_helper_title=Function Helper
+generate=Generate
+iteration_counter_arg_1=TRUE, for each user to have own counter, FALSE for a global counter
+request_data=Request Data
+restart=Restart
+encoded_value=URL Encoded Value
+encode?=Encode?
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_no.properties b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_no.properties
new file mode 100644
index 0000000..85e2197
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/resources/messages_no.properties
@@ -0,0 +1,261 @@
+file=Fil
+run=Kjør
+save=Lagre som...
+save_all=Lagre alle
+load=Hent
+open=Åpne...
+edit=Rediger
+exit=Avslutt
+new=New
+start=Start
+stop=Stopp
+clear=Nullstill
+clear_all=Nullstill alle
+report=Rapport
+analyze=Analyser data fil...
+option=Innstillinger
+appearance=Look and Feel
+menu_timer=Timer
+menu_assertions=Assertions
+menu_listener=Listener
+menu_logic_controller=Logic Controller
+menu_generative_controller=Sampler
+menu_config_element=Config Element
+menu_response_based_modifiers=Response Based Modifiers
+menu_modifiers=Modifiers
+sslmanager=SSL manager
+pkcs12_desc=PKCS 12 Key (*.p12)
+ssl_error_title=Key Store Problem
+ssl_pass_prompt=Tast inn ditt passord
+ssl_pass_title=KeyStore passord
+ssl_alias_prompt=Tast inn ditt preferred alias
+ssl_alias_select=Velg ditt alias for testeen
+ssl_alias_title=klient alias
+help=Hjelp
+about=Om Apache JMeter
+remote_start=Remote start
+remote_stop=Remote stopp
+root=Rot
+test_plan=Testplan
+workbench=Arbeidsbenk
+add=Legg til
+remove=Fjern
+delete=Slett
+threadgroup=Trådgruppe
+controller=Kontroller
+config_element=Konfigurasjonselement
+protocol=Protokoll:
+domain=Domene
+port=Port:
+path=Sti:
+follow_redirects=Follow redirects [TO-DO]
+use_keepalive=Use KeepAlive
+method=Metode:
+default_parameters=Standard parametre
+name=Navn:
+value=Verdi
+secure=Sikker
+expiration=Utløper
+username=Brukernavn
+password=Passord
+number_of_threads=Antall tråder:
+infinite=Uendelig
+iterator_num=Løkketeller:
+add_value=Legg til verdi
+paramtable=Send parametre med forespørselen:
+upload=Fil opplasting
+field_name=Field name
+looping_control=Løkkekontroll
+browse=Bla gjennom
+mimetype=Mimetype
+patterns_to_include=Mønster å inkludere
+patterns_to_exclude=Mønster å ekskludere
+add_pattern=Legg til mønster:
+ramp_up=Oppstartsperiode (i sekunder):
+constant_timer_title=Konstant timer
+constant_timer_delay=Trådforsinkelse (i millisekund):
+gaussian_timer_title=Gaussisk tilfeldig timer
+gaussian_timer_delay=Konstant forsinkelsesoffset (i millisekund):
+gaussian_timer_range=Avvik (i millisekund):
+uniform_timer_title=Uniform tilfeldig timer
+uniform_timer_delay=Konstant forsinkelsesoffset (i millisekund):
+uniform_timer_range=Tilfeldig forsinkelse maksimum (i millisekund):
+thread_delay_properties=Trådforsinkelse egenskaper
+thread_group_title=Trådgruppe
+loop_controller_title=Løkke kontroller
+modification_manager_title=Modifiseringsmanager
+interleave_control_title=Vekslende kontroller
+random_control_title=Random kontroller
+logic_controller_title=Enkel kontroller
+once_only_controller_title=En gang kontroller
+workbench_title=Arbeidsbenk
+root_title=Rot
+menu_edit=Rediger
+graph_full_results_title=Graf full resultater
+graph_results_title=Graf resultater
+graph_results_data=Data
+graph_results_average=Gjennomsnitt
+graph_results_deviation=Avvik
+graph_results_no_samples=No of Samples
+graph_results_ms=ms
+graph_results_latest_sample=Latest Sample
+graph_choose_graphs=Graphs to Display
+spline_visualizer_title=Spline visualiserer
+spline_visualizer_maximum=Maksimum
+spline_visualizer_minimum=Minimum
+spline_visualizer_average=Gjennomsnitt
+spline_visualizer_incoming=Innkommende
+spline_visualizer_waitingmessage=Venter på målinger
+ftp_testing_title=FTP forespørsel
+server=Server navn eller IP:
+file_to_retrieve=Fil å hente fra server:
+ftp_sample_title=FTP forespørsel standard instillinger
+assertion_title=Assertion
+assertion_visualizer_title=Assertion Results
+assertion_resp_field=Svarfelt å teste
+assertion_text_resp=Tektssvar
+assertion_url_samp=URL Sampled
+assertion_pattern_match_rules=Mønster matching regler
+assertion_contains=Inneholder
+assertion_matches=Matcher
+assertion_not=Ikke
+assertion_patterns_to_test=Mønster å teste
+assertion_textarea_label=Assertions:
+login_config=Innlogging konfigurasjon
+database_testing_title=JDBC forespørsel
+database_driver_class=Driver klasse:
+database_url=JDBC URL:
+database_url_jdbc_props=Database URL og JDBC driver
+database_login_title=JDBC database innlogging standard instillinger
+database_conn_pool_props=Database forbindelse pool
+database_conn_pool_title=JDBC database forbindelse pool standard instillinger
+database_conn_pool_size=Antall forbindelser i pool:
+database_conn_pool_max_usage=Maks bruk for hver forbindelse:
+database_sql_query_title=JDBC SQL forespørsel standard instillinger
+database_sql_query_string=SQL forespørsel:
+file_visualizer_title=Filrapportør
+file_visualizer_output_file=Skriv alle data til en fil
+file_visualizer_browse=Bla gjennom...
+file_visualizer_append=Legg til en eksisterende fil
+file_visualizer_verbose=Utførlig output
+file_visualizer_auto_flush=Automatisk tømming etter hver måledata
+file_visualizer_submit_data=Inkluder sendte data
+file_visualizer_open=Åpne
+file_visualizer_flush=Tøm
+file_visualizer_close=Lukk
+file_visualizer_filename=Skriv et nytt filnavn, eller bla gjennom til en eksisterende fil
+file_visualizer_file_options=Fil egenskaper
+file_visualizer_missing_filename=Ingen utfil spesifisert.
+url_config_post=POST
+url_config_get=GET
+url_config_http=HTTP
+url_config_https=HTTPS
+url_config_title=HTTP forespørsel standard instillinger
+url_full_config_title=UrlFull Sample
+web_server=Web server
+web_server_domain=Server navn eller IP:
+web_server_port=Port nummer:
+web_request=HTTP Request
+web_testing_title=HTTP forespørsel
+web_testing_retrieve_images=Hent alle bilder og Java Applets (kun HTML)
+send_file=Send en fil med forespørselen:
+send_file_filename_label=Filnavn:
+send_file_browse=Bla gjennom...
+send_file_param_name_label=Parameter navn:
+send_file_mime_label=MIME type:
+optional_tasks=Valgfrie oppgaver
+proxy_title=HTTP proxy server
+view_results_title=Vis resultat
+view_results_tree_title=Vis resultattre
+cookie_manager_title=HTTP cookie manager
+cookies_stored=Cookies lagret hos cookie manager
+header_manager_title=HTTP header manager
+headers_stored=Headere lagret hos headermanager
+auth_manager_title=HTTP autentiseringsmanager
+auth_base_url=Basis URL
+auths_stored=Autentiseringer lagret hos autentiseringsmanager
+anchor_modifier_title=HTTP HTML link parser
+jndi_config_title=JNDI konfigurasjon
+jndi_url_jndi_props=JNDI egenskaper
+jndi_lookup_title=JNDI lookup konfigurasjon
+jndi_lookup_name=Remote interface
+jndi_method_title=Remote metode konfigurasjon
+jndi_testing_title=JNDI forespørsel
+jndi_method_name=Metode konfigurasjon
+jndi_method_home_name=Home metode navn
+jndi_method_home_parms=Home metode parametre
+jndi_method_remote_name=Remote metode navn
+jndi_method_remote_parms=Remote metode parametre
+jndi_method_remote_interface_list=Remote interfaces
+jndi_method_button_reflect=Reflect
+jndi_method_button_invoke=Invoke
+insert_parent=Insert Parent
+copy=Copy
+cut=Cut
+paste_insert=Paste As Insert
+paste=Paste
+url=URL
+success?=Success?
+html_parameter_mask=HTML Parameter Mask
+id_prefix=ID Prefix
+lower_bound=Lower Bound
+upper_bound=Upper Bound
+increment=Increment
+id_suffix=ID Suffix
+url_multipart_config_title=HTTP Multipart Request Defaults
+view_results_in_table=View Results in Table
+http_response_code=HTTP response code
+aggregate_report=Aggregate Report
+login_config_element=Login Config Element
+menu_non_test_elements=Non-Test Elements
+file_already_in_use=That file is already in use
+busy_testing=I'm busy testing, please stop the test before changing settings
+http_user_parameter_modifier=HTTP User Parameter Modifier
+user_param_mod_help_note=(Do not change this.  Instead, modify the file of that name in JMeter's /bin directory)
+filename=File Name
+cancel_exit_to_save=There are test items that have not been saved.  Do you wish to save before exiting?
+cancel_new_to_save=There are test items that have not been saved.  Do you wish to save before clearing the test plan?
+save?=Save?
+insert_before=Insert Before
+insert_after=Insert After
+add_as_child=Add as Child
+cancel=Cancel
+protocol_java_classname=Classname:
+protocol_java_config_tile=Configure Java Sample
+protocol_java_border=Java class
+protocol_java_test_title=Java Testing
+java_request=Java Request
+java_request_defaults=Java Request Defaults
+second=second
+graph_results_throughput=Throughput
+minute=minute
+http_url_rewriting_modifier_title=HTTP URL-Rewriting Modifier
+session_argument_name=Session Argument Name
+path_extension_choice=Path Extension (use ";" as separator)
+you_must_enter_a_valid_number=You must enter a valid number
+invalid_data=Invalid data
+error_occurred=Error Occurred
+proxy_cl_error=If specifying a proxy server, host and port must be given
+functional_mode=Functional Test Mode
+functional_mode_explanation=Select functional test mode only if you need \nto record to file the data received from the server for each request.  \n\nSelecting this option impacts performance considerably.
+stopping_test_title=Stopping Test
+stopping_test=Shutting down all test threads.  Please be patient.
+soap_sampler_title=Soap/XML-RPC Sampler (Alpha code)
+soap_data_title=Soap/XML-RPC Data
+user_defined_variables=User Defined Variables
+regexfunc_param_1=Regular expression used to search results from previous request
+regexfunc_param_2=Template for the replacement string, using groups from the regular expression.  Format is $[group]$.  Example $1$.
+regexfunc_param_3=Which match to use.  An integer 1 or greater, RAND to indicate JMeter should randomly choose, A float, or ALL indicating all matches should be used
+regexfunc_param_4=Between text.  If ALL is selected, the between text will be used to generate the results
+regexfunc_param_5=Default text.  Used instead of the template if the regular expression finds no matches
+function_dialog_menu_item=Function Helper Dialog
+function_params=Function Parameters
+cut_paste_function=Copy and paste function string
+choose_function=Choose a function
+function_helper_title=Function Helper
+generate=Generate
+iteration_counter_arg_1=TRUE, for each user to have own counter, FALSE for a global counter
+request_data=Request Data
+restart=Restart
+encoded_value=URL Encoded Value
+encode?=Encode?
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/AbstractSampler.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/AbstractSampler.java
new file mode 100644
index 0000000..b156b52
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/AbstractSampler.java
@@ -0,0 +1,57 @@
+package org.apache.jmeter.samplers;
+import java.util.*;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.assertions.Assertion;
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.testelement.PerSampleClonable;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:47 $
+ *@version   1.0
+ ***************************************/
+
+public abstract class AbstractSampler extends AbstractTestElement implements Sampler,
+		PerSampleClonable
+{
+	private final static String ASSERTIONS = "AbstractSampler.assertions";
+
+	public AbstractSampler()
+	{
+		setProperty(ASSERTIONS,new ArrayList());
+	}
+
+	public void addTestElement(TestElement element)
+	{
+		if(element instanceof Assertion)
+		{
+			addAssertion((Assertion)element);
+		}
+		else
+		{
+			if(element.getClass().getName().equals(ConfigTestElement.class.getName()))
+			{
+				mergeIn(element);
+			}
+			else
+			{
+				addCustomTestElement(element);
+			}
+		}
+	}
+
+	abstract protected void addCustomTestElement(TestElement element);
+
+	protected void addAssertion(Assertion assertion)
+	{
+		getAssertions().add(assertion);
+	}
+
+	protected List getAssertions()
+	{
+		return (List)getProperty(ASSERTIONS);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Entries
new file mode 100644
index 0000000..85ed43f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Entries
@@ -0,0 +1,15 @@
+/AbstractSampler.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/Clearable.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/CycleEntry.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/Entry.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/RemoteListenerWrapper.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/RemoteSampleListener.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/RemoteSampleListenerImpl.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/RemoteSampleListenerWrapper.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/RemoteTestListenerWrapper.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/Remoteable.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/SampleEvent.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/SampleListener.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/SampleResult.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/Sampler.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Repository
new file mode 100644
index 0000000..5b97feb
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/samplers
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Clearable.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Clearable.java
new file mode 100644
index 0000000..140acfa
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Clearable.java
@@ -0,0 +1,18 @@
+package org.apache.jmeter.samplers;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface Clearable
+{
+	/**
+	 * Clears the current data of the object.
+	 */
+	public void clear();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CycleEntry.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CycleEntry.java
new file mode 100644
index 0000000..948b820
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/CycleEntry.java
@@ -0,0 +1,72 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.samplers;
+
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class CycleEntry extends Entry
+{
+
+	public CycleEntry()
+	{
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Entry.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Entry.java
new file mode 100644
index 0000000..ecb497c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Entry.java
@@ -0,0 +1,189 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.samplers;
+
+import java.util.*;
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.assertions.Assertion;
+
+/************************************************************
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:47 $
+ *@version    1.0
+ ***********************************************************/
+
+public class Entry
+{
+
+	Map configSet;
+	Set clonedSet;
+	Class sampler;
+	List assertions;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public Entry()
+	{
+		configSet = new HashMap();
+		clonedSet = new HashSet();
+		assertions = new LinkedList();
+	}
+
+	public void addAssertion(Assertion assertion)
+	{
+		assertions.add(assertion);
+	}
+
+	public List getAssertions()
+	{
+		return assertions;
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  samplerClass  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setSamplerClass(Class samplerClass)
+	{
+		this.sampler = samplerClass;
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Class getSamplerClass()
+	{
+		return this.sampler;
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@param  configClass  !ToDo (Parameter description)
+	 *@return              !ToDo (Return description)
+	 ***********************************************************/
+	public ConfigElement getConfigElement(Class configClass)
+	{
+		return (ConfigElement)configSet.get(configClass);
+	}
+
+	/************************************************************
+	 *  !ToDo
+	 *
+	 *@param  config  !ToDo
+	 ***********************************************************/
+	public void addConfigElement(ConfigElement config)
+	{
+		addConfigElement(config,config.getClass());
+	}
+
+	/**
+	 * Add a config element as a specific class.  Usually this is done to add a
+	 * subclass as one of it's parent classes.
+	 */
+	public void addConfigElement(ConfigElement config,Class asClass)
+	{
+		if (config != null)
+		{
+			ConfigElement current = (ConfigElement)configSet.get(asClass);
+			if (current == null)
+			{
+				configSet.put(asClass, cloneIfNecessary(config));
+			}
+			else
+			{
+				current.addConfigElement(config);
+			}
+		}
+	}
+
+	private ConfigElement cloneIfNecessary(ConfigElement config)
+	{
+		if(config.expectsModification())
+		{
+			return config;
+		}
+		else
+		{
+			return (ConfigElement)config.clone();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Object clone()
+	{
+		try
+		{
+			return super.clone();
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+		return null;
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteListenerWrapper.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteListenerWrapper.java
new file mode 100644
index 0000000..a91cdde
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteListenerWrapper.java
@@ -0,0 +1,110 @@
+package org.apache.jmeter.samplers;
+
+import java.rmi.RemoteException;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import java.io.Serializable;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public class RemoteListenerWrapper extends AbstractTestElement implements
+		SampleListener,TestListener,Serializable
+{
+	RemoteSampleListener listener;
+
+	public RemoteListenerWrapper(RemoteSampleListener l)
+	{
+		listener = l;
+	}
+
+	public RemoteListenerWrapper()
+	{
+	}
+
+	public void testStarted()
+	{
+		try
+		{
+			listener.testStarted();
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+
+	}
+	public void testEnded()
+	{
+		try
+		{
+			listener.testEnded();
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+	public void testStarted(String host)
+	{
+		try
+		{
+			listener.testStarted(host);
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+	public void testEnded(String host)
+	{
+		try
+		{
+			listener.testEnded(host);
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+
+	public void sampleOccurred(SampleEvent e)
+	{
+		try
+		{
+			listener.sampleOccurred(e);
+		}
+		catch(RemoteException err)
+		{
+			err.printStackTrace();
+		}
+	}
+	public void sampleStarted(SampleEvent e)
+	{
+		try
+		{
+			listener.sampleStarted(e);
+		}
+		catch(RemoteException err)
+		{
+			err.printStackTrace();
+		}
+	}
+	public void sampleStopped(SampleEvent e)
+	{
+		try
+		{
+			listener.sampleStopped(e);
+		}
+		catch(RemoteException err)
+		{
+			err.printStackTrace();
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListener.java
new file mode 100644
index 0000000..8955504
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListener.java
@@ -0,0 +1,90 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.samplers;
+
+import java.rmi.RemoteException;
+
+/**
+ * Allows notification on events occuring during the sampling process.
+ * Specifically, when sampling is started,
+ * when a specific sample is obtained,
+ * and when sampling is stopped.
+ */
+public interface RemoteSampleListener
+	 extends java.rmi.Remote, java.io.Serializable
+{
+	
+	public void testStarted() throws RemoteException;
+	
+	public void testStarted(String host) throws RemoteException;
+	
+	public void testEnded() throws RemoteException;
+	
+	public void testEnded(String host) throws RemoteException;
+	 /**
+	  * A sample has started and stopped.
+	  **/
+	 public void sampleOccurred(SampleEvent e) throws RemoteException;
+
+	 /**
+	  * A sample has started.
+	  **/
+	 public void sampleStarted(SampleEvent e) throws RemoteException;
+
+	 /**
+	  * A sample has stopped.
+	  **/
+	 public void sampleStopped(SampleEvent e) throws RemoteException;
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListenerImpl.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListenerImpl.java
new file mode 100644
index 0000000..970a263
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListenerImpl.java
@@ -0,0 +1,163 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.samplers;
+
+import java.rmi.RemoteException;
+
+import org.apache.jmeter.testelement.TestListener;
+
+/************************************************************
+ *  !ToDo (Class description)
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:47 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+public class RemoteSampleListenerImpl
+		 extends java.rmi.server.UnicastRemoteObject
+		 implements RemoteSampleListener,SampleListener,TestListener
+{
+	TestListener testListener;
+	SampleListener sampleListener;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  listeners            !ToDo (Parameter description)
+	 *@exception  RemoteException  !ToDo (Exception description)
+	 ***********************************************************/
+	public RemoteSampleListenerImpl(Object listener) throws RemoteException
+	{
+		super();
+		if(listener instanceof TestListener)
+		{
+			testListener = (TestListener)listener;
+		}
+		if(listener instanceof SampleListener)
+		{
+			sampleListener = (SampleListener)listener;
+		}
+	}
+
+	public void testStarted()
+	{
+		if(testListener != null)
+		{
+			testListener.testStarted();
+		}
+	}
+
+	public void testStarted(String host)
+	{
+		if(testListener != null)
+		{
+			testListener.testStarted(host);
+		}
+	}
+
+	public void testEnded()
+	{
+		if(testListener != null)
+		{
+			testListener.testEnded();
+		}
+	}
+
+	public void testEnded(String host)
+	{
+		if(testListener != null)
+		{
+			testListener.testEnded(host);
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void sampleOccurred(SampleEvent e)
+	{
+		if (sampleListener != null)
+		{
+			sampleListener.sampleOccurred(e);
+		}
+	}
+
+	/************************************************************
+	 *  A sample has started.
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void sampleStarted(SampleEvent e)
+	{
+		if (sampleListener != null)
+		{
+			sampleListener.sampleStarted(e);
+		}
+	}
+
+	/************************************************************
+	 *  A sample has stopped.
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void sampleStopped(SampleEvent e)
+	{
+		if (sampleListener != null)
+		{
+			sampleListener.sampleStopped(e);
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListenerWrapper.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListenerWrapper.java
new file mode 100644
index 0000000..621caa7
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteSampleListenerWrapper.java
@@ -0,0 +1,63 @@
+package org.apache.jmeter.samplers;
+
+import java.rmi.RemoteException;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import java.io.Serializable;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public class RemoteSampleListenerWrapper extends AbstractTestElement implements
+		SampleListener,Serializable
+{
+	RemoteSampleListener listener;
+
+	public RemoteSampleListenerWrapper(RemoteSampleListener l)
+	{
+		listener = l;
+	}
+
+	public RemoteSampleListenerWrapper()
+	{
+	}
+
+	public void sampleOccurred(SampleEvent e)
+	{
+		try
+		{
+			listener.sampleOccurred(e);
+		}
+		catch(RemoteException err)
+		{
+			err.printStackTrace();
+		}
+	}
+	public void sampleStarted(SampleEvent e)
+	{
+		try
+		{
+			listener.sampleStarted(e);
+		}
+		catch(RemoteException err)
+		{
+			err.printStackTrace();
+		}
+	}
+	public void sampleStopped(SampleEvent e)
+	{
+		try
+		{
+			listener.sampleStopped(e);
+		}
+		catch(RemoteException err)
+		{
+			err.printStackTrace();
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteTestListenerWrapper.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteTestListenerWrapper.java
new file mode 100644
index 0000000..3ddf3bb
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/RemoteTestListenerWrapper.java
@@ -0,0 +1,75 @@
+package org.apache.jmeter.samplers;
+
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import java.io.Serializable;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public class RemoteTestListenerWrapper extends AbstractTestElement implements
+		TestListener,Serializable
+{
+
+	RemoteSampleListener listener;
+
+	public RemoteTestListenerWrapper()
+	{
+	}
+
+	public RemoteTestListenerWrapper(RemoteSampleListener l)
+	{
+		listener = l;
+	}
+	public void testStarted()
+	{
+		try
+		{
+			listener.testStarted();
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+
+	}
+	public void testEnded()
+	{
+		try
+		{
+			listener.testEnded();
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+	public void testStarted(String host)
+	{
+		try
+		{
+			listener.testStarted(host);
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+	public void testEnded(String host)
+	{
+		try
+		{
+			listener.testEnded(host);
+		}
+		catch (Exception ex)
+		{
+			ex.printStackTrace();
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Remoteable.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Remoteable.java
new file mode 100644
index 0000000..5e4616c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Remoteable.java
@@ -0,0 +1,11 @@
+package org.apache.jmeter.samplers;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public interface Remoteable {
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleEvent.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleEvent.java
new file mode 100644
index 0000000..db494a8
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleEvent.java
@@ -0,0 +1,82 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.samplers;
+
+/**
+ * Packages information regarding the target of a sample event,
+ * such as the result from that event and the thread group it
+ * ran in.
+ */
+public class SampleEvent implements java.io.Serializable {
+	 SampleResult result;
+	 String threadGroup;
+
+	 public SampleEvent()
+	 {
+	 }
+
+	 public SampleEvent(SampleResult result, String threadGroup) {
+	this.result=result;
+	this.threadGroup=threadGroup;
+	 }
+
+	 public SampleResult getResult() {
+	return result;
+	 }
+
+	 public String getThreadGroup() {
+	return threadGroup;
+	 }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleListener.java
new file mode 100644
index 0000000..9f96771
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleListener.java
@@ -0,0 +1,78 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.samplers;
+
+/**
+ * Allows notification on events occuring during the sampling process.
+ * Specifically, when sampling is started,
+ * when a specific sample is obtained,
+ * and when sampling is stopped.
+ */
+public interface SampleListener extends java.io.Serializable {
+	 /**
+	  * A sample has started and stopped.
+	  **/
+	 public void sampleOccurred(SampleEvent e);
+
+	 /**
+	  * A sample has started.
+	  **/
+	 public void sampleStarted(SampleEvent e);
+
+	 /**
+	  * A sample has stopped.
+	  **/
+	 public void sampleStopped(SampleEvent e);
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleResult.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleResult.java
new file mode 100644
index 0000000..5068e79
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/SampleResult.java
@@ -0,0 +1,331 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.samplers;
+import java.util.*;
+import java.io.*;
+import org.apache.avalon.framework.configuration.*;
+import org.apache.log4j.*;
+
+import org.apache.jmeter.assertions.AssertionResult;
+import org.apache.jmeter.save.SaveService;
+import org.apache.jmeter.testelement.TestElement;
+
+/**
+ *  This is a nice packaging for the various information returned from taking a
+ *  sample of an entry.
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:47 $
+ *@version    $Revision: 1.1 $
+ */
+public class SampleResult implements Serializable
+{
+	//public final static String URL = "sampler.url";
+
+	public final static String TAG_NAME = "sampleResult";
+	public final static String TEXT = "text";
+	public final static String BINARY = "bin";
+	private byte[] responseData;
+	private String responseCode;
+	private String label;
+	private TestElement samplerData;
+	private String threadName;
+	private String responseMessage;
+	private long timeStamp = 0;
+	private List assertionResults = new ArrayList();
+	private List subResults = new ArrayList();
+	private String dataType;
+	private boolean success;
+	private boolean mark = false;
+	private Set files = new HashSet();
+	
+
+	Map map;
+	long time;
+	/**
+	 *  Description of the Field
+	 */
+	private final static String SAMPLE_LABEL = "displayName";
+	private final static String SAMPLER_CONFIG = "samplerConfig";
+	private final static String DATA_TYPE = "dataType";
+	private final static String RESPONSE_CODE = "responseCode";
+	private final static String RESPONSE_MESSAGE = "responseMessage";
+	private final static String THREAD_NAME = "threadName";
+	private final static String TIME_STAMP = "timeStamp";
+	/**
+	 *  Description of the Field
+	 */
+	private final static String ASSERTION_RESULTS = "assertionResults";
+	/**
+	 *  Description of the Field
+	 */
+	private final static String RESPONSE_DATA = "responseData";
+	/**
+	 *  Description of the Field
+	 */
+	private final static String SUCCESS = "success";
+
+	/**
+	 *  Description of the Field
+	 */
+	private final static String TOTAL_TIME = "totalTime";
+
+	private static transient Category catClass =
+			Category.getInstance(SampleResult.class.getName());
+
+
+	/**
+	 *  !ToDo (Constructor description)
+	 */
+	public SampleResult()
+	{
+		map = new HashMap();
+		time = 0;
+	}
+	
+	public void setMarked(String filename)
+	{
+		files.add(filename);
+	}
+	
+	public boolean isMarked(String filename)
+	{
+		return files.contains(filename);
+	}	
+	
+	public String getResponseCode()
+	{
+		return responseCode;
+	}
+	
+	public void setResponseCode(String code)
+	{
+		responseCode = code;
+	}
+	
+	public String getResponseMessage()
+	{
+		return responseMessage;
+	}
+	
+	public void setResponseMessage(String msg)
+	{
+		responseMessage = msg;
+	}
+	
+	public String getThreadName()
+	{
+		return threadName;
+	}
+	
+	public void setThreadName(String threadName)
+	{
+		this.threadName = threadName;
+	}
+	
+	public long getTimeStamp()
+	{
+		return timeStamp;
+	}
+	
+	public void setTimeStamp(long timeStamp)
+	{
+		this.timeStamp = timeStamp;
+	}
+
+	public String getSampleLabel()
+	{
+		return label;
+	}
+
+	public void setSampleLabel(String label)
+	{
+		this.label = label;
+	}
+
+	public void addAssertionResult(AssertionResult assertResult)
+	{
+		assertionResults.add(assertResult);
+	}
+
+	public AssertionResult[] getAssertionResults()
+	{
+		return (AssertionResult[])assertionResults.toArray(new AssertionResult[0]);
+	}
+
+	public void addSubResult(SampleResult subResult)
+	{
+		subResults.add(subResult);
+	}
+
+	public SampleResult[] getSubResults()
+	{
+		return (SampleResult[])subResults.toArray(new SampleResult[0]);
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  info  Description of the Parameter
+	 */
+	public void configure(Configuration info)
+	{
+		setTime(info.getAttributeAsLong(TOTAL_TIME,0L));
+	}
+
+	/**
+	 *  Set the time this sample took to occur.
+	 *
+	 *@param  t  !ToDo (Parameter description)
+	 */
+	public void setTime(long t)
+	{
+		time = t;
+	}
+
+	/**
+	 *  Sets the responseData attribute of the SampleResult object
+	 *
+	 *@param  response  The new responseData value
+	 */
+	public void setResponseData(byte[] response)
+	{
+		responseData = response;
+		/*DefaultConfiguration responseChild = new DefaultConfiguration(RESPONSE_DATA, "");
+		responseChild.setValue(getHexString(response));
+		addChild(responseChild);*/
+	}
+
+	
+
+
+	/**
+	 *  Gets the responseData attribute of the SampleResult object
+	 *
+	 *@return    The responseData value
+	 */
+	public byte[] getResponseData()
+	{
+		return responseData;
+		/*Configuration responseChild = getChild(RESPONSE_DATA);
+		ByteArrayOutputStream bytes = new ByteArrayOutputStream();
+		String res = responseChild.getValue("");
+		for (int i = 0; i < res.length(); i+=2)
+		{
+			bytes.write(Integer.parseInt(res.substring(i,i+2),16));
+		}
+		return bytes.toByteArray();*/
+	}
+
+	public void setSamplerData(TestElement s)
+	{
+		samplerData = s;
+	}
+
+	public TestElement getSamplerData()
+	{
+		return samplerData;
+	}
+
+	/**
+	 *  Get the time it took this sample to occur.
+	 *
+	 *@return    !ToDo (Return description)
+	 */
+	public long getTime()
+	{
+		return time;
+	}
+
+	/**
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 */
+	public boolean isSuccessful()
+	{
+		return success;
+	}
+	
+	public void setDataType(String dataType)
+	{
+		this.dataType = dataType;
+	}
+	
+	public String getDataType()
+	{
+		return dataType;
+	}
+
+	/**
+	 *  Sets the successful attribute of the SampleResult object
+	 *
+	 *@param  success  The new successful value
+	 */
+	public void setSuccessful(boolean success)
+	{
+		this.success = success;
+	}
+
+	/**
+	 *  Returns the display name
+	 *
+	 *@return    display name of this sample result
+	 */
+	public String toString()
+	{
+		return getSampleLabel();
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Sampler.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Sampler.java
new file mode 100644
index 0000000..177a6fc
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/Sampler.java
@@ -0,0 +1,87 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.samplers;
+
+ import org.apache.jmeter.testelement.TestElement;
+
+/************************************************************
+ *  Classes which are able to generate information about an entry should
+ *  implement this interface.
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:47 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+public interface Sampler extends java.io.Serializable, TestElement
+{
+	public final static String HEADER = "sampler.HEADER";
+
+	/************************************************************
+	 *@param  e  !ToDo (Parameter description)
+	 *@return    !ToDo (Return description)
+	 *@link      dependency
+	 ***********************************************************/
+	/*
+	 * #Entry e;
+	 */
+	/************************************************************
+	 *  Obtains statistics about the given Entry, and packages the information into
+	 *  a SampleResult.
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public SampleResult sample(Entry e);
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/AbstractSamplerGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/AbstractSamplerGui.java
new file mode 100644
index 0000000..68d0c5e
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/AbstractSamplerGui.java
@@ -0,0 +1,43 @@
+package org.apache.jmeter.samplers.gui;
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:47 $
+ *@version   1.0
+ ***************************************/
+
+public abstract class AbstractSamplerGui extends AbstractJMeterGuiComponent
+{
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		return MenuFactory.getDefaultSamplerMenu();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return Arrays.asList(new String[]{MenuFactory.SAMPLERS});
+	}
+
+	}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Entries
new file mode 100644
index 0000000..10515fb
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/AbstractSamplerGui.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Repository
new file mode 100644
index 0000000..492f3c9
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/samplers/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Entries
new file mode 100644
index 0000000..c3a8f70
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Entries
@@ -0,0 +1,2 @@
+/SaveService.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+D/old////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Repository
new file mode 100644
index 0000000..c451558
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/save
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/SaveService.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/SaveService.java
new file mode 100644
index 0000000..46b4aee
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/SaveService.java
@@ -0,0 +1,420 @@
+package org.apache.jmeter.save;
+
+import java.io.File;
+import java.io.FileWriter;
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.OutputStream;
+import java.io.PrintWriter;
+import java.io.UnsupportedEncodingException;
+import java.util.Collection;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+
+import junit.framework.TestCase;
+import org.apache.avalon.framework.configuration.Configuration;
+import org.apache.avalon.framework.configuration.ConfigurationException;
+import org.apache.avalon.framework.configuration.DefaultConfiguration;
+import org.apache.avalon.framework.configuration.DefaultConfigurationBuilder;
+import org.apache.avalon.framework.configuration.DefaultConfigurationSerializer;
+import org.apache.jmeter.assertions.ResponseAssertion;
+import org.apache.jmeter.assertions.AssertionResult;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.ListedHashTree;
+import org.xml.sax.SAXException;
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public class SaveService
+{
+	private static final String ASSERTION_RESULT_TAG_NAME = "assertionResult";
+	private static final String SAMPLE_RESULT_TAG_NAME = "sampleResult";
+	private static final String TIME = "time";
+	private static final String LABEL = "label";
+	private static final String RESPONSE_CODE = "responseCode";
+	private static final String RESPONSE_MESSAGE = "responseMessage";
+	private static final String THREAD_NAME = "threadName";
+	private static final String DATA_TYPE = "dataType";
+	private static final String TIME_STAMP = "timeStamp";
+	private static final String BINARY = "binary";
+	private static final String FAILURE_MESSAGE = "failureMessage";
+	private static final String ERROR = "error";
+	private static final String FAILURE = "failure";
+	private static final String SUCCESSFUL = "success";
+	
+	private static DefaultConfigurationBuilder builder = new DefaultConfigurationBuilder();
+
+	public SaveService()
+	{
+	}
+
+	public static void saveSubTree(ListedHashTree subTree,OutputStream writer) throws
+			IOException
+	{
+		Configuration config = (Configuration)getConfigsFromTree(subTree).get(0);
+		DefaultConfigurationSerializer saver = new DefaultConfigurationSerializer();
+		saver.setIndent(true);
+		try
+		{
+			saver.serialize(writer,config);
+		}
+		catch(SAXException e)
+		{
+			throw new IOException("SAX implementation problem");
+		}
+		catch(ConfigurationException e)
+		{
+			throw new IOException("Problem using Avalon Configuration tools");
+		}
+	}
+	
+	public static SampleResult getSampleResult(Configuration config)
+	{
+		SampleResult result = new SampleResult();
+		result.setThreadName(config.getAttribute(THREAD_NAME,""));
+		result.setDataType(config.getAttribute(DATA_TYPE,""));
+		result.setResponseCode(config.getAttribute(RESPONSE_CODE,""));
+		result.setResponseMessage(config.getAttribute(RESPONSE_MESSAGE,""));
+		result.setTime(config.getAttributeAsLong(TIME,0L));
+		result.setTimeStamp(config.getAttributeAsLong(TIME_STAMP,0L));
+		result.setSuccessful(config.getAttributeAsBoolean(SUCCESSFUL,false));
+		result.setSampleLabel(config.getAttribute(LABEL,""));
+		result.setResponseData(getBinaryData(config.getChild(BINARY)));
+		Configuration[] subResults = config.getChildren(SAMPLE_RESULT_TAG_NAME);
+		for(int i = 0;i < subResults.length;i++)
+		{
+			result.addSubResult(getSampleResult(subResults[i]));
+		}
+		Configuration[] assResults = config.getChildren(ASSERTION_RESULT_TAG_NAME);
+		for(int i = 0;i < assResults.length;i++)
+		{
+			result.addAssertionResult(getAssertionResult(assResults[i]));
+		}
+		return result;
+	}
+
+	private static List getConfigsFromTree(ListedHashTree subTree)
+	{
+		Iterator iter = subTree.list().iterator();
+		List configs = new LinkedList();
+		while (iter.hasNext())
+		{
+			TestElement item = (TestElement)iter.next();
+			DefaultConfiguration config = new DefaultConfiguration("node","node");
+			config.addChild(getConfigForTestElement(null,item));
+			List configList = getConfigsFromTree(subTree.get(item));
+			Iterator iter2 = configList.iterator();
+			while(iter2.hasNext())
+			{
+				config.addChild((Configuration)iter2.next());
+			}
+			configs.add(config);
+		}
+		return configs;
+	}
+	
+	public static Configuration getConfiguration(byte[] bin)
+	{
+		DefaultConfiguration config = new DefaultConfiguration(BINARY,"JMeter Save Service");
+		try {
+			config.setValue(new String(bin,"utf-8"));
+		} catch(UnsupportedEncodingException e) {
+			e.printStackTrace();
+		}
+		return config;
+	}
+	
+	public static byte[] getBinaryData(Configuration config)
+	{
+		if(config == null)
+		{
+			return new byte[0];
+		}
+		try {
+			return config.getValue("").getBytes("utf-8");
+		} catch(UnsupportedEncodingException e) {
+			return new byte[0];
+		}
+	}
+	
+	public static AssertionResult getAssertionResult(Configuration config)
+	{
+		AssertionResult result = new AssertionResult();
+		result.setError(config.getAttributeAsBoolean(ERROR,false));
+		result.setFailure(config.getAttributeAsBoolean(FAILURE,false));
+		result.setFailureMessage(config.getAttribute(FAILURE_MESSAGE,""));
+		return result;		
+	}
+	
+	public static Configuration getConfiguration(AssertionResult assResult)
+	{
+		DefaultConfiguration config = new DefaultConfiguration(ASSERTION_RESULT_TAG_NAME,
+				"JMeter Save Service");
+		config.setAttribute(FAILURE_MESSAGE,assResult.getFailureMessage());
+		config.setAttribute(ERROR,""+assResult.isError());
+		config.setAttribute(FAILURE,""+assResult.isFailure());
+		return config;		
+	}
+	
+	public static Configuration getConfiguration(SampleResult result,boolean funcTest)
+	{
+		DefaultConfiguration config = new DefaultConfiguration(SAMPLE_RESULT_TAG_NAME,"JMeter Save Service");
+		config.setAttribute(TIME,""+result.getTime());
+		config.setAttribute(LABEL,result.getSampleLabel());
+		config.setAttribute(RESPONSE_CODE,result.getResponseCode());
+		config.setAttribute(RESPONSE_MESSAGE,result.getResponseMessage());
+		config.setAttribute(THREAD_NAME,result.getThreadName());
+		config.setAttribute(DATA_TYPE,result.getDataType());
+		config.setAttribute(TIME_STAMP,""+result.getTimeStamp());
+		config.setAttribute(SUCCESSFUL,new Boolean(result.isSuccessful()).toString());
+		SampleResult[] subResults = result.getSubResults();
+		for(int i = 0;i < subResults.length;i++)
+		{
+			config.addChild(getConfiguration(subResults[i],funcTest));
+		}
+		if(funcTest)
+		{
+			config.addChild(getConfigForTestElement(null,result.getSamplerData()));
+			AssertionResult[] assResults = result.getAssertionResults();
+			for(int i = 0;i < assResults.length;i++)
+			{
+				config.addChild(getConfiguration(assResults[i]));
+			}
+			config.addChild(getConfiguration(result.getResponseData()));
+		}
+		return config;		
+	}
+
+	public static Configuration getConfigForTestElement(String named,TestElement item)
+	{
+		DefaultConfiguration config = new DefaultConfiguration("testelement","testelement");
+		if(named != null)
+		{
+			config.setAttribute("name",named);
+		}
+		if(item.getProperty(TestElement.TEST_CLASS) != null)
+		{
+			config.setAttribute("class",(String)item.getProperty(TestElement.TEST_CLASS));
+		}
+		else
+		{
+			config.setAttribute("class",item.getClass().getName());
+		}
+		Iterator iter = item.getPropertyNames().iterator();
+		while (iter.hasNext())
+		{
+			String name = (String)iter.next();
+			Object value = item.getProperty(name);
+			if(value instanceof TestElement)
+			{
+				config.addChild(getConfigForTestElement(name,(TestElement)value));
+			}
+			else if(value instanceof Collection)
+			{
+				config.addChild(createConfigForCollection(name,(Collection)value));
+			}
+			else if(value != null)
+			{
+				config.addChild(createConfigForString(name,value.toString()));
+			}
+		}
+		return config;
+	}
+
+	private static Configuration createConfigForCollection(String propertyName,Collection list)
+	{
+		DefaultConfiguration config = new DefaultConfiguration("collection","collection");
+		if(propertyName != null)
+		{
+			config.setAttribute("name",propertyName);
+		}
+		config.setAttribute("class",list.getClass().getName());
+		Iterator iter = list.iterator();
+		while (iter.hasNext())
+		{
+			Object item = iter.next();
+			if(item instanceof TestElement)
+			{
+				config.addChild(getConfigForTestElement(null,(TestElement)item));
+			}
+			else if(item instanceof Collection)
+			{
+				config.addChild(createConfigForCollection(null,(Collection)item));
+			}
+			else
+			{
+				config.addChild(createConfigForString(item.toString()));
+			}
+		}
+		return config;
+	}
+
+	private static Configuration createConfigForString(String value)
+	{
+		DefaultConfiguration config = new DefaultConfiguration("string","string");
+		config.setValue(value);
+		return config;
+	}
+
+	private static Configuration createConfigForString(String name,String value)
+	{
+		if(value == null || value.equals(""))
+		{
+			value = " ";
+		}
+		DefaultConfiguration config = new DefaultConfiguration("property","property");
+		config.setAttribute("name",name);
+		config.setValue(value);
+		return config;
+	}
+
+	public synchronized static ListedHashTree loadSubTree(InputStream in) throws IOException
+	{
+		try
+		{
+			Configuration config = builder.build(in);
+			ListedHashTree loadedTree = generateNode(config);
+			return loadedTree;
+		}
+		catch(ConfigurationException e)
+		{
+			throw new IOException("Problem loading using Avalon Configuration tools");
+		}
+		catch(SAXException e)
+		{
+			throw new IOException("Problem with SAX implementation");
+		}
+	}
+
+	public static TestElement createTestElement(Configuration config) throws ConfigurationException,
+			ClassNotFoundException, IllegalAccessException,InstantiationException
+	{
+		TestElement element = null;
+		try
+		{
+			element = (TestElement)Class.forName((String)config.getAttribute("class")).newInstance();
+		}
+		catch(InstantiationException e)
+		{
+			//Assertion is now an interface, replaced with ResponseAssertion
+			if(config.getAttribute("class").equals("org.apache.jmeter.assertions.Assertion"))
+			{
+				element = new ResponseAssertion();
+			}
+		}
+		Configuration[] children = config.getChildren();
+		for (int i = 0; i < children.length; i++)
+		{
+			if(children[i].getName().equals("property"))
+			{
+				try
+				{
+					element.setProperty(children[i].getAttribute("name"),
+						children[i].getValue());
+				}
+				catch (Exception ex)
+				{
+					element.setProperty(children[i].getAttribute("name"),"");
+				}
+			}
+			else if(children[i].getName().equals("testelement"))
+			{
+				element.setProperty(children[i].getAttribute("name"),
+						createTestElement(children[i]));
+			}
+			else if(children[i].getName().equals("collection"))
+			{
+				element.setProperty(children[i].getAttribute("name"),
+						createCollection(children[i]));
+			}
+		}
+		return element;
+	}
+
+	private static Collection createCollection(Configuration config) throws ConfigurationException,
+			ClassNotFoundException,IllegalAccessException,InstantiationException
+	{
+		Collection coll = (Collection)Class.forName((String)config.getAttribute("class")).newInstance();
+		Configuration[] items = config.getChildren();
+		for (int i = 0; i < items.length; i++)
+		{
+			if(items[i].getName().equals("property"))
+			{
+				coll.add(items[i].getValue());
+			}
+			else if(items[i].getName().equals("testelement"))
+			{
+				coll.add(createTestElement(items[i]));
+			}
+			else if(items[i].getName().equals("collection"))
+			{
+				coll.add(createCollection(items[i]));
+			}
+			else if(items[i].getName().equals("string"))
+			{
+				coll.add(items[i].getValue());
+			}
+		}
+		return coll;
+	}
+
+	private static ListedHashTree generateNode(Configuration config)
+	{
+		TestElement element = null;
+		try
+		{
+			element = createTestElement(config.getChild("testelement"));
+		}
+		catch(Exception e)
+		{
+			try{
+				PrintWriter logger = new PrintWriter(new FileWriter("c:\\log.txt"));
+			e.printStackTrace(logger);
+			logger.close();
+			System.out.println("Problem loading part of file");
+			}catch(Exception err){}
+			return null;
+		}
+		ListedHashTree subTree = new ListedHashTree(element);
+		Configuration[] subNodes = config.getChildren("node");
+		for (int i = 0; i < subNodes.length; i++)
+		{
+			ListedHashTree t = generateNode(subNodes[i]);
+			if(t != null)
+			{
+				subTree.add(element,t);
+			}
+		}
+		return subTree;
+	}
+	
+	public static class Test extends TestCase
+	{
+		private File assertionFile;
+		public Test(String name)
+		{
+			super(name);
+		}
+		
+		public void setUp() {
+			assertionFile =
+				new File(System.getProperty("user.dir") + "/testfiles", "assertion.jmx");
+			
+		}
+		
+		public void testLoadAssertion() throws Exception
+		{
+			Configuration config = new DefaultConfigurationBuilder().buildFromFile(assertionFile);
+			ResponseAssertion testEl = (ResponseAssertion)createTestElement(config.getChild("testelement"));
+			assertEquals("save this string \\d+",testEl.getTestStrings().get(0));
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/BadHandlerException.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/BadHandlerException.java
new file mode 100644
index 0000000..ee4c403
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/BadHandlerException.java
@@ -0,0 +1,85 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+/**
+ * Title:        JMeter<p>
+ * Description:  <p>
+ * Copyright:    Copyright (c) Michael Stover<p>
+ * Company:      Apache JMeter<p>
+ * @author Michael Stover
+ * @version 1.0
+ */
+ package org.apache.jmeter.save.old;
+
+public class BadHandlerException extends Exception
+{
+  String message;
+
+  public BadHandlerException()
+  {
+  }
+
+  public BadHandlerException(String m)
+  {
+	 message = m;
+  }
+
+  public String getMessage()
+  {
+	 return message;
+  }
+
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Entries
new file mode 100644
index 0000000..0926fa7
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Entries
@@ -0,0 +1,6 @@
+/BadHandlerException.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/JMeterNameSpaceHandler.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/SaveHandler.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+/Saveable.java/1.1/Sun Aug 11 19:24:47 2002//Tv1_7_3
+D/handlers////
+D/xml////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Repository
new file mode 100644
index 0000000..4ca30ac
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/save/old
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/JMeterNameSpaceHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/JMeterNameSpaceHandler.java
new file mode 100644
index 0000000..cb91f77
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/JMeterNameSpaceHandler.java
@@ -0,0 +1,133 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old;
+
+import java.io.File;
+import java.io.FileInputStream;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Map;
+
+import junit.framework.TestCase;
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.gui.action.Load;
+import org.apache.jmeter.protocol.http.config.gui.UrlConfigGui;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.save.old.xml.NameSpaceHandler;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.save.old.xml.XmlHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.ListedHashTree;
+import org.xml.sax.Attributes;
+import org.xml.sax.InputSource;
+import org.xml.sax.XMLReader;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class JMeterNameSpaceHandler implements NameSpaceHandler {
+
+	private static Map saveHandlers = new HashMap();
+	static {
+		try {
+			List classes =
+				ClassFinder.findClassesThatExtend(
+					new Class[] { org.apache.jmeter.save.old.xml.TagHandler.class });
+			Iterator iter = classes.iterator();
+			while (iter.hasNext()) {
+				String item = (String) iter.next();
+				try {
+					TagHandler obj = (TagHandler) Class.forName(item).newInstance();
+					saveHandlers.put(obj.getPrimaryTagName(), obj.getClass());
+				} catch (Exception ex) {
+					ex.printStackTrace();
+				}
+			}
+		} catch (Exception ex) {
+			ex.printStackTrace();
+		}
+	}
+
+	public JMeterNameSpaceHandler() {
+	}
+
+	public TagHandler getXmlObject(String tagName, Attributes atts) {
+		try {
+
+			TagHandler handler =
+				(TagHandler) ((Class) saveHandlers.get(tagName)).newInstance();
+			handler.setTagName(handler.getPrimaryTagName());
+			handler.setAtts(atts);
+			return handler;
+		} catch(NullPointerException e)
+		{
+			return null;
+		}catch (Exception ex) {
+			ex.printStackTrace();
+			return null;
+		}
+
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/SaveHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/SaveHandler.java
new file mode 100644
index 0000000..45cb713
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/SaveHandler.java
@@ -0,0 +1,80 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old;
+
+import java.io.*;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface SaveHandler
+{
+
+	  /**
+	* Gets the tag name that will trigger the use of this object's TagHandler.
+	*/
+	public String getPrimaryTagName();
+
+  /**
+	* Tells the object to save itself to the given output stream.
+	*/
+  public void save(Saveable objectToSave,Writer out) throws IOException;
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/Saveable.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/Saveable.java
new file mode 100644
index 0000000..a4afdfe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/Saveable.java
@@ -0,0 +1,78 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+/**
+ * Title:        JMeter<p>
+ * Description:  <p>
+ * Copyright:    Copyright (c) Michael Stover<p>
+ * Company:      Apache JMeter<p>
+ * @author Michael Stover
+ * @version 1.0
+ */
+package org.apache.jmeter.save.old;
+
+import java.io.*;
+import org.xml.sax.*;
+
+import org.apache.jmeter.save.old.xml.*;
+
+public interface Saveable
+{
+  /**
+	*  Gets the TagHandler that will handle the parsing of the xml for this type of
+	*  object.
+	*/
+  public Class getTagHandlerClass();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AbstractConfigElementHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AbstractConfigElementHandler.java
new file mode 100644
index 0000000..1a4214c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AbstractConfigElementHandler.java
@@ -0,0 +1,253 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.save.old.handlers;
+
+
+import java.io.IOException;
+import java.io.Writer;
+import java.util.List;
+
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    June 9, 2001
+ *@version    1.0
+ ***********************************************************/
+
+
+public class AbstractConfigElementHandler extends TagHandler
+{
+
+	protected TestElement config;
+
+	protected String currentProperty;
+
+
+	/************************************************************
+	 *  Constructor for the AbstractConfigElementHandler object
+	 ***********************************************************/
+	public AbstractConfigElementHandler()
+	{
+
+	}
+
+
+	/************************************************************
+	 *  This is called when a tag is first encountered for this handler class to
+	 *  handle. The attributes of the tag are passed, and the SaveHandler object is
+	 *  expected to instantiate a new object.
+	 *
+	 *@param  atts           The new Atts value
+	 *@exception  Exception  Description of Exception
+	 ***********************************************************/
+
+	public void setAtts(Attributes atts) throws Exception
+	{
+
+		config = (TestElement)Class.forName(JMeterHandler.getComponentConversion(atts.getValue("type"))).newInstance();
+		config.setProperty(TestElement.TEST_CLASS,atts.getValue("type"));
+		config.setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("type")));
+		config.setProperty(TestElement.NAME,atts.getValue("name"));
+	}
+
+
+	/************************************************************
+	 *  Returns the AbstractConfigElement object parsed from the XML. This method
+	 *  is required to fulfill the SaveHandler interface. It is used by the XML
+	 *  routines to gather all the saved objects.
+	 *
+	 *@return    The Model value
+	 ***********************************************************/
+
+	public Object getModel()
+	{
+
+		return config;
+	}
+
+
+
+	/************************************************************
+	 *  Gets the tag name that will trigger the use of this object's TagHandler.
+	 *
+	 *@return    The PrimaryTagName value
+	 ***********************************************************/
+
+	public String getPrimaryTagName()
+	{
+
+		return "ConfigElement";
+	}
+
+
+	/************************************************************
+	 *  Called by reflection when a &lt;property&gt; tag is encountered. Again, the
+	 *  attributes are passed.
+	 *
+	 *@param  atts  Description of Parameter
+	 ***********************************************************/
+
+	public void property(Attributes atts)
+	{
+
+		currentProperty = atts.getValue("name");
+
+	}
+
+
+	/************************************************************
+	 *  Called by reflection when text between the begin and end &lt;property&gt;
+	 *  tag is encountered.
+	 *
+	 *@param  data  Description of Parameter
+	 ***********************************************************/
+
+	public void property(String data)
+	{
+		if(data != null && data.trim().length() > 0)
+		{
+			config.setProperty(JMeterHandler.convertProperty(currentProperty), data.trim());
+			currentProperty = null;
+		}
+	}
+
+
+	/************************************************************
+	 *  Called by reflection when the &lt;property&gt; tag is ended.
+	 ***********************************************************/
+
+	public void propertyTagEnd()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if(children.size() == 1)
+		{
+			config.setProperty(JMeterHandler.convertProperty(currentProperty), ((TagHandler)children.get(0)).getModel());
+		}
+	}
+
+
+	/************************************************************
+	 *  Tells the object to save itself to the given output stream.
+	 *
+	 *@param  obj              Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 ***********************************************************/
+
+	public void save(Saveable obj, Writer out) throws IOException
+	{
+		/*
+		AbstractConfigElement saved = (AbstractConfigElement)obj;
+
+		out.write("<ConfigElement type=\"");
+
+		out.write(JMeterHandler.convertToXML(saved.getClass().getName()));
+
+		out.write("\">\n");
+
+		Iterator iter = saved.getPropertyNames().iterator();
+
+		while(iter.hasNext())
+		{
+
+			String key = (String)iter.next();
+
+			Object value = saved.getProperty(key);
+
+			writeProperty(out, key, value);
+
+		}
+
+		out.write("</ConfigElement>");*/
+
+	}
+
+
+	/************************************************************
+	 *  Routine to write each property to xml.
+	 *
+	 *@param  out              Description of Parameter
+	 *@param  key              Description of Parameter
+	 *@param  value            Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 ***********************************************************/
+
+	protected void writeProperty(Writer out, String key, Object value) throws IOException
+	{
+
+		out.write("<property name=\"");
+
+		out.write(JMeterHandler.convertToXML(key));
+
+		out.write("\">");
+
+		JMeterHandler.writeObject(value, out);
+
+		out.write("</property>\n");
+
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ArgumentsHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ArgumentsHandler.java
new file mode 100644
index 0000000..e5f40c3
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ArgumentsHandler.java
@@ -0,0 +1,144 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.handlers;
+
+import java.io.IOException;
+import java.io.Writer;
+import java.util.Iterator;
+
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class ArgumentsHandler extends TagHandler
+{
+	Arguments args;
+	String currentArgument;
+
+	public ArgumentsHandler()
+	{
+	}
+
+	public void save(Saveable parm1, Writer out) throws java.io.IOException
+	{
+		Arguments args = (Arguments)parm1;
+		out.write("<Arguments>\n");
+		Iterator iter = args.iterator();
+		while (iter.hasNext())
+		{
+			writeArgument((Argument)iter.next(),out);
+		}
+		out.write("</Arguments>\n");
+	}
+
+	private void writeArgument(Argument arg,Writer out) throws IOException
+	{
+		out.write("<argument name=\"");
+		out.write(JMeterHandler.convertToXML(arg.getName()));
+		out.write("\">");
+		try
+		{
+			out.write(JMeterHandler.convertToXML(" "+arg.getValue().toString()));
+		}
+		catch (Exception ex)
+		{
+
+		}
+		out.write("</argument>\n");
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		args = new Arguments();
+		args.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.config.gui.ArgumentsPanel");
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "Arguments";
+	}
+
+	public void argument(Attributes atts)
+	{
+		currentArgument = atts.getValue("name");
+	}
+
+	public void argument(String data)
+	{
+		if(data != null)
+		{
+			data = data.trim();
+		}
+		args.addArgument(currentArgument,data);
+		currentArgument = null;
+	}
+
+	public Object getModel()
+	{
+		return args;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AssertionHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AssertionHandler.java
new file mode 100644
index 0000000..c842fb4
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AssertionHandler.java
@@ -0,0 +1,87 @@
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.IOException;
+import java.io.Writer;
+
+import org.apache.jmeter.assertions.ResponseAssertion;
+import org.apache.jmeter.save.old.SaveHandler;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:        Jakarta-JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class AssertionHandler extends TagHandler implements SaveHandler
+{
+
+	ResponseAssertion model;
+
+	public AssertionHandler() {
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "assertion";
+	}
+
+	public void save(Saveable objectToSave, Writer out) throws IOException {
+		ResponseAssertion saved = (ResponseAssertion)objectToSave;
+		out.write("<");
+		out.write(getPrimaryTagName());
+		out.write(" name=\"");
+		out.write(saved.getName());
+		out.write("\" class=\"");
+		out.write(saved.getClass().getName());
+		out.write("\" testType=\"");
+		out.write(""+saved.getTestType());
+		out.write("\" testField=\"");
+		out.write(saved.getTestField());
+		out.write("\">");
+		writeTestStrings(saved,out);
+		out.write("\n</");
+		out.write(getPrimaryTagName());
+		out.write(">");
+	}
+
+	public Object getModel()
+	{
+		return model;
+	}
+
+	public void setAtts(Attributes atts) throws ClassNotFoundException,IllegalAccessException,InstantiationException
+	{
+		try {
+			model = (ResponseAssertion)Class.forName(JMeterHandler.getComponentConversion(atts.getValue("class"))).newInstance();
+			model.setName(atts.getValue("name"));
+			model.setTestType(Integer.parseInt(atts.getValue("testType")));
+			model.setTestField(JMeterHandler.convertProperty(atts.getValue("testField")));
+			model.setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("class")));
+		} catch (Exception e) {
+			e.printStackTrace();
+		} 
+	}
+
+	public void testString(String data)
+	{
+		model.addTestString(data);
+	}
+
+	private void writeTestStrings(ResponseAssertion saved, Writer out) throws IOException
+	{
+		/*Iterator iter = saved.getTestStringList().iterator();
+		while (iter.hasNext())
+		{
+			out.write("\n<testString>");
+			out.write(JMeterHandler.convertToXML(iter.next().toString()));
+			out.write("</testString>");
+		}*/
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AuthManagerHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AuthManagerHandler.java
new file mode 100644
index 0000000..1ba8147
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/AuthManagerHandler.java
@@ -0,0 +1,122 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.Iterator;
+import java.util.List;
+
+import org.apache.jmeter.protocol.http.control.AuthManager;
+import org.apache.jmeter.protocol.http.control.Authorization;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class AuthManagerHandler extends TagHandler
+{
+
+	private AuthManager authMan;
+	private String currentProperty;
+	private Authorization auth;
+
+	public AuthManagerHandler()
+	{
+	}
+	public void save(Saveable s, Writer out) throws java.io.IOException
+	{
+		AuthManager save = (AuthManager)s;
+		out.write("<AuthManager name=\"");
+		out.write(JMeterHandler.convertToXML(save.getName()));
+		out.write("\">\n");
+		JMeterHandler.writeObjects(save.getAuthObjects(),out);
+		out.write("</AuthManager>\n");
+	}
+
+	public void AuthManagerTagEnd()
+	{
+		List auths = xmlParent.takeChildObjects(this);
+		Iterator iter = auths.iterator();
+		while (iter.hasNext())
+		{
+			authMan.addTestElement((TestElement)((TagHandler)iter.next()).getModel());
+		}
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		authMan = new AuthManager();
+		authMan.setName(atts.getValue("name"));
+		authMan.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.protocol.http.gui.AuthPanel");
+	}
+	public String getPrimaryTagName()
+	{
+		return "AuthManager";
+	}
+
+	public Object getModel()
+	{
+		return authMan;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Entries
new file mode 100644
index 0000000..d60b43c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Entries
@@ -0,0 +1,20 @@
+/AbstractConfigElementHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/ArgumentsHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/AssertionHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/AuthManagerHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/CookieManagerHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/FilerHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/FtpTestHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/GenericControllerHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/HeaderManagerHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/HttpTestSampleHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/JMeterComponentHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/JMeterHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/JdbcTestSampleHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/LoopControlHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/ParamMaskHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/ProxyControlHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/TestPlanHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/ThreadGroupHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/TimerHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Repository
new file mode 100644
index 0000000..362df84
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CookieManagerHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CookieManagerHandler.java
new file mode 100644
index 0000000..85f80ad
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/CookieManagerHandler.java
@@ -0,0 +1,123 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.Iterator;
+import java.util.List;
+
+import org.apache.jmeter.protocol.http.control.Cookie;
+import org.apache.jmeter.protocol.http.control.CookieManager;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class CookieManagerHandler extends TagHandler
+{
+
+	private CookieManager cookieManager;
+
+	public CookieManagerHandler()
+	{
+	}
+
+	public void save(Saveable cm, Writer out) throws java.io.IOException
+	{
+		CookieManager cookies = (CookieManager)cm;
+		out.write("<CookieManager name=\"");
+		out.write(JMeterHandler.convertToXML(cookies.getName()));
+		out.write("\">\n");
+		JMeterHandler.writeObjects(cookies.getCookies(),out);
+		out.write("</CookieManager>\n");
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		cookieManager = new CookieManager();
+		cookieManager.setName(atts.getValue("name"));
+		cookieManager.setProperty(TestElement.GUI_CLASS,
+				"org.apache.jmeter.protocol.http.gui.CookiePanel");
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "CookieManager";
+	}
+
+	public void CookieManagerTagEnd()
+	{
+		List cookies = xmlParent.takeChildObjects(this);
+		Iterator iter = cookies.iterator();
+		while (iter.hasNext())
+		{
+			cookieManager.add((Cookie)((TagHandler)iter.next()).getModel());
+		}
+	}
+
+	public Object getModel()
+	{
+		return cookieManager;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/FilerHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/FilerHandler.java
new file mode 100644
index 0000000..c23e22d
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/FilerHandler.java
@@ -0,0 +1,83 @@
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+
+import org.apache.jmeter.reporters.ResultCollector;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public class FilerHandler extends TagHandler
+{
+	ResultCollector model;
+
+	public FilerHandler()
+	{
+	}
+
+	public void save(Saveable saveObject, Writer out) throws java.io.IOException
+	{
+ 		/* protect ourselves from bad input.
+		if ((saveObject == null) || (out == null))
+		{
+			// error!
+		}
+		else
+		{
+	 		Filer save = (Filer)saveObject;
+
+			// validate filename
+			String filename = save.getFile();
+			if (filename == null)
+			{
+				System.err.println("Error. Missing filename in File Reporter.");
+				filename = "";
+			}
+
+			out.write("<Filer type=\"");
+			out.write(JMeterHandler.convertToXML(save.getClass().getName()));
+			out.write("\" name=\"");
+			out.write(JMeterHandler.convertToXML(save.getName()));
+			out.write("\" verbose=\"");
+			out.write(""+save.getVerbose());
+			out.write("\" append=\"");
+			out.write(""+save.getAppend());
+			out.write("\" autoFlush=\"");
+			out.write("" + save.getAutoFlush());
+			out.write("\" viewSubmitData=\"");
+			out.write("" + save.getViewSubmitData());
+			out.write("\" file=\"");
+			out.write(JMeterHandler.convertToXML(filename));
+			out.write("\"/>");
+		}*/
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		model = new ResultCollector();
+		model.setName(atts.getValue("name"));
+		model.setFilename(atts.getValue("file"));
+		model.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.visualizers.GraphVisualizer");
+
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "Filer";
+	}
+
+	public Object getModel()
+	{
+		return model;
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/FtpTestHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/FtpTestHandler.java
new file mode 100644
index 0000000..8797fec
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/FtpTestHandler.java
@@ -0,0 +1,173 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.List;
+
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.protocol.ftp.sampler.FTPSampler;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@created    July 30, 2001
+ *@version    1.0
+ */
+
+public class FtpTestHandler extends TagHandler
+{
+	FTPSampler sampler;
+	//Constructor for the FtpTestHandler object
+
+		  public FtpTestHandler()	{}
+
+	/**
+	 *  Gets the PrimaryTagName attribute of the FtpTestHandler
+	 */
+	public String getPrimaryTagName()
+	{
+		return "FtpTestSampler";
+	}
+
+	//called by reflection when the <defaultUrl> tag is ended
+		  public void defaultUrlTagEnd()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if (children.size() == 1)
+		{
+			sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+		}
+	}
+
+		  //called by reflection when the <defaultLogin> tag is ended
+		  public void loginConfigTagEnd()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if (children.size() == 1)
+		{
+			sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+		}
+	}
+	
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		sampler = new FTPSampler();
+		sampler.setName(atts.getValue("name"));
+		sampler.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.protocol.ftp.control.gui.FtpTestSamplerGui");
+
+	}
+	
+	public Object getModel()
+	{
+		return sampler;
+	}
+	/**
+	 *  Does the saving, calls write methods below to output config info to XML config file.
+			*/
+	public void save(Saveable cont, Writer out) throws java.io.IOException
+	{
+		/*FtpTestSampler controller = (FtpTestSampler) cont;
+		writeMainTag(out, controller);
+		writeDefaultUrl(out, controller);
+		writeLoginConfig(out, controller);
+		this.writeSubElements(controller,out);
+		out.write("</FtpTestSampler>\n");*/
+	}
+
+	/**
+	 *  This method writes the opening main tag to the XML config file, i.e. <FtpTestSampler>
+	 */
+	protected void writeMainTag(Writer out, GenericController controller) throws java.io.IOException
+	{
+		out.write("<FtpTestSampler type=\"");
+		out.write(JMeterHandler.convertToXML(controller.getClass().getName()));
+		out.write("\" name=\"");
+		out.write(JMeterHandler.convertToXML(controller.getName()));
+		out.write("\">\n");
+	}
+
+	/**
+			* Write out default domain and default filename defined in 'FTP Testing'
+	 * @exception  java.io.IOException  Description of Exception
+	 */
+	protected void writeDefaultUrl(Writer out)
+			 throws java.io.IOException
+	{
+		/*out.write("<defaultUrl>\n");
+		JMeterHandler.writeObject(controller.getDefaultUrl(), out);
+		out.write("</defaultUrl>\n");*/
+	}
+
+
+		  /**
+			* Write username and password info
+			*/
+		  protected void writeLoginConfig(Writer out)
+			 throws java.io.IOException
+	{
+		/*out.write("<loginConfig>\n");
+		JMeterHandler.writeObject(controller.getLoginConfig(), out);
+		out.write("</loginConfig>\n");*/
+	}
+}
+
+
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/GenericControllerHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/GenericControllerHandler.java
new file mode 100644
index 0000000..4affb47
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/GenericControllerHandler.java
@@ -0,0 +1,189 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.control.ModifyController;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/************************************************************
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    February 18, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public class GenericControllerHandler extends TagHandler
+{
+
+	protected GenericController controller;
+
+	/************************************************************
+	 *  Constructor for the GenericControllerHandler object
+	 ***********************************************************/
+	public GenericControllerHandler()
+	{
+	}
+
+
+	/************************************************************
+	 *  Sets the Atts attribute of the GenericControllerHandler object
+	 *
+	 *@param  atts                     The new Atts value
+	 *@exception  java.lang.Exception  Description of Exception
+	 ***********************************************************/
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		String className = atts.getValue("type");
+		if(className.equals("org.apache.jmeter.control.LogicController"))
+		{
+			controller = new GenericController();
+		}
+		else
+		{
+			controller = (GenericController)Class.forName(atts.getValue("type")).newInstance();
+		}
+		if(controller instanceof ModifyController)
+		{
+			controller = new GenericController();
+		}
+		controller.setName(atts.getValue("name"));
+		controller.setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("type")));
+
+	}
+
+	/************************************************************
+	 *  Gets the PrimaryTagName attribute of the GenericControllerHandler object
+	 *
+	 *@return    The PrimaryTagName value
+	 ***********************************************************/
+	public String getPrimaryTagName()
+	{
+		return "Controller";
+	}
+
+	/************************************************************
+	 *  Gets the Model attribute of the GenericControllerHandler object
+	 *
+	 *@return    The Model value
+	 ***********************************************************/
+	public Object getModel()
+	{
+		return controller;
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  cont                     Description of Parameter
+	 *@param  out                      Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 ***********************************************************/
+	public void save(Saveable cont, Writer out) throws java.io.IOException
+	{
+		GenericController controller = (GenericController)cont;
+		writeMainTag(out, controller);
+		writeSubElements(controller, out);
+		out.write("</Controller>");
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  out                      !ToDo (Parameter description)
+	 *@param  controller               !ToDo (Parameter description)
+	 *@exception  java.io.IOException  !ToDo (Exception description)
+	 ***********************************************************/
+	protected void writeSubControllers(Writer out, GenericController controller) throws java.io.IOException
+	{
+
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  out                      !ToDo (Parameter description)
+	 *@param  controller               !ToDo (Parameter description)
+	 *@exception  java.io.IOException  !ToDo (Exception description)
+	 ***********************************************************/
+	protected void writeMainTag(Writer out, GenericController controller) throws java.io.IOException
+	{
+		out.write("<Controller type=\"");
+		out.write(JMeterHandler.convertToXML(controller.getClass().getName()));
+		out.write("\" name=\"");
+		out.write(JMeterHandler.convertToXML(controller.getName()));
+		out.write("\">\n");
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  controller  !ToDo (Parameter description)
+	 *@param  out         !ToDo (Parameter description)
+	 ***********************************************************/
+	protected void writeSubElements(GenericController controller, Writer out) throws java.io.IOException
+	{
+		/*JMeterHandler.writeConfigElements(controller.getConfigElements(), out);
+		JMeterHandler.writeControllers(controller.getSubControllers(), out);
+		JMeterHandler.writeObjects(controller.getAssertions(), out);*/
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/HeaderManagerHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/HeaderManagerHandler.java
new file mode 100644
index 0000000..8e1f950
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/HeaderManagerHandler.java
@@ -0,0 +1,126 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.Iterator;
+import java.util.List;
+
+import org.apache.jmeter.protocol.http.control.Header;
+import org.apache.jmeter.protocol.http.control.HeaderManager;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:
+ * @author Giacomo Pati
+ * @version 1.0
+ */
+
+public class HeaderManagerHandler extends TagHandler
+{
+
+	private HeaderManager headerManager;
+
+	public HeaderManagerHandler()
+	{
+	}
+
+	public void save(Saveable cm, Writer out) throws java.io.IOException
+	{
+		HeaderManager headers = (HeaderManager)cm;
+		out.write("<HeaderManager name=\"");
+		out.write(JMeterHandler.convertToXML(headers.getName()));
+		out.write("\">\n");
+		JMeterHandler.writeObjects(headers.getHeaders(),out);
+		out.write("</HeaderManager>\n");
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		headerManager = new HeaderManager();
+		headerManager.setProperty(TestElement.GUI_CLASS,
+				"org.apache.jmeter.protocol.http.gui.HeaderPanel");
+		headerManager.setName(atts.getValue("name"));
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "HeaderManager";
+	}
+
+	public void HeaderManagerTagEnd()
+	{
+		List headers = xmlParent.takeChildObjects(this);
+		Iterator iter = headers.iterator();
+		while (iter.hasNext())
+		{
+			TestElement header = (TestElement)((TagHandler)iter.next()).getModel();
+			headerManager.add(new Header((String)header.getProperty(TestElement.NAME),
+					(String)header.getProperty("value")));
+		}
+	}
+
+	public Object getModel()
+	{
+		return headerManager;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/HttpTestSampleHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/HttpTestSampleHandler.java
new file mode 100644
index 0000000..2f40b7b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/HttpTestSampleHandler.java
@@ -0,0 +1,176 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.List;
+
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.protocol.http.sampler.HTTPSamplerFull;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    February 18, 2001
+ *@version    1.0
+ */
+
+public class HttpTestSampleHandler extends TagHandler
+{
+	HTTPSampler sampler;
+
+	/**
+	 *  Constructor for the HttpTestSampleHandler object
+	 */
+	public HttpTestSampleHandler()
+	{
+	}
+	
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		sampler = new HTTPSampler();
+		if(Boolean.valueOf(
+				atts.getValue("getImages")).booleanValue());
+		{
+			sampler = new HTTPSamplerFull();
+		}
+		sampler.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui");
+		sampler.setName(atts.getValue("name"));
+
+	}
+	
+	public Object getModel()
+	{
+		return sampler;
+	}
+
+	/**
+	 *  Gets the PrimaryTagName attribute of the GenericControllerHandler object
+	 *
+	 *@return    The PrimaryTagName value
+	 */
+	public String getPrimaryTagName()
+	{
+		return "HttpTestSample";
+	}
+
+	public void notifySubElementEnded(Object childObj)
+	{
+		if(this.getMethodName().endsWith("defaultUrl"))
+		{
+			List children = xmlParent.takeChildObjects(this);
+			if (children.size() == 1)
+			{
+				sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+			}
+		}
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  cont                     Description of Parameter
+	 *@param  out                      Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 */
+	public void save(Saveable cont, Writer out) throws java.io.IOException
+	{
+		/*HttpTestSample controller = (HttpTestSample) cont;
+		writeMainTag(out, controller);
+		writeDefaultUrl(out, controller);
+		writeSubElements(controller, out);
+		out.write("</HttpTestSample>\n");*/
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  out                      Description of Parameter
+	 *@param  controller               Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 */
+	protected void writeMainTag(Writer out, GenericController controller) throws java.io.IOException
+	{
+		/*out.write("<HttpTestSample type=\"");
+		out.write(JMeterHandler.convertToXML(controller.getClass().getName()));
+		out.write("\" name=\"");
+		out.write(JMeterHandler.convertToXML(controller.getName()));
+		out.write("\" getImages=\"");
+		out.write(""+((HttpTestSample)controller).isGetImages());
+		out.write("\">\n");*/
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  out                      Description of Parameter
+	 *@param  controller               Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 */
+	protected void writeDefaultUrl(Writer out)
+			 throws java.io.IOException
+	{
+		/*out.write("<defaultUrl>\n");
+		JMeterHandler.writeObject(controller.getDefaultUrl(), out);
+		out.write("</defaultUrl>\n");*/
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JMeterComponentHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JMeterComponentHandler.java
new file mode 100644
index 0000000..9bd9f1b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JMeterComponentHandler.java
@@ -0,0 +1,54 @@
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+
+import org.apache.jmeter.gui.JMeterComponentModel;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public class JMeterComponentHandler extends TagHandler
+{
+	TestElement model;
+
+	public JMeterComponentHandler()
+	{
+	}
+
+	public void save(Saveable saveObject, Writer out) throws java.io.IOException
+	{
+		JMeterComponentModel save = (JMeterComponentModel)saveObject;
+		out.write("<JMeterComponent type=\"");
+		out.write(JMeterHandler.convertToXML(save.getClass().getName()));
+		out.write("\" name=\"");
+		out.write(JMeterHandler.convertToXML(save.getName()));
+		out.write("\"/>");
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		model = (TestElement)Class.forName(JMeterHandler.getComponentConversion(atts.getValue("type"))).newInstance();
+		model.setProperty(TestElement.NAME,atts.getValue("name"));
+		model.setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("type")));
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "JMeterComponent";
+	}
+
+	public Object getModel()
+	{
+		return model;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JMeterHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JMeterHandler.java
new file mode 100644
index 0000000..aa2237e
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JMeterHandler.java
@@ -0,0 +1,368 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.IOException;
+import java.io.Writer;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.Map;
+
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.save.old.SaveHandler;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.assertions.ResponseAssertion;
+
+
+/**
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author     Michael Stover
+ *@created    June 8, 2001
+ *@version    1.0
+ */
+
+public class JMeterHandler
+{
+	private static String TOKENS = "&'\"<>\n\r\t\f\b\\";
+	private static Map guiClassMap = new HashMap();
+	private static Map propertyConversion = new HashMap();
+	private static Map componentMap = new HashMap();
+	
+	static
+	{
+		guiClassMap.put("org.apache.jmeter.protocol.http.config.UrlConfig","org.apache.jmeter.protocol.http.config.gui.UrlConfigGui");
+		guiClassMap.put("org.apache.jmeter.control.ModifyController","org.apache.jmeter.control.gui.LogicControllerGui");
+		guiClassMap.put("org.apache.jmeter.control.LogicController",
+				"org.apache.jmeter.control.gui.LogicControllerGui");
+		guiClassMap.put("org.apache.jmeter.timers.GaussianRandomTimer",
+				"org.apache.jmeter.timers.gui.GaussianRandomTimerGui");
+		guiClassMap.put("org.apache.jmeter.timers.ConstantTimer",
+				"org.apache.jmeter.timers.gui.ConstantTimerGui");
+		guiClassMap.put("org.apache.jmeter.timers.UniformRandomTimer",
+				"org.apache.jmeter.timers.gui.UniformRandomTimerGui");
+		guiClassMap.put("org.apache.jmeter.visualizers.GraphModel",
+				"org.apache.jmeter.visualizers.GraphVisualizer");
+		guiClassMap.put("org.apache.jmeter.reporters.AssertionReporter",
+				"org.apache.jmeter.visualizers.AssertionVisualizer");
+		guiClassMap.put("org.apache.jmeter.reporters.ResultCollector",
+				"org.apache.jmeter.visualizers.ViewResultsFullVisualizer");
+		guiClassMap.put("org.apache.jmeter.control.LoopController",
+				"org.apache.jmeter.control.gui.LoopControlPanel");		
+		guiClassMap.put("org.apache.jmeter.protocol.http.modifier.AnchorModifier",
+				"org.apache.jmeter.protocol.http.modifier.gui.AnchorModifierGui");
+		guiClassMap.put("org.apache.jmeter.control.InterleaveControl",
+				"org.apache.jmeter.control.gui.InterleaveControlGui");
+		guiClassMap.put("org.apache.jmeter.control.OnceOnlyController",
+				"org.apache.jmeter.control.gui.OnceOnlyControllerGui");	
+		guiClassMap.put("org.apache.jmeter.protocol.jdbc.config.DbConfig",
+				"org.apache.jmeter.protocol.jdbc.config.gui.DbConfigGui");	
+		guiClassMap.put("org.apache.jmeter.protocol.jdbc.config.PoolConfig",
+				"org.apache.jmeter.protocol.jdbc.config.gui.PoolConfigGui");	
+		guiClassMap.put("org.apache.jmeter.protocol.jdbc.config.SqlConfig",
+				"org.apache.jmeter.protocol.jdbc.config.gui.SqlConfigGui");				
+		guiClassMap.put("org.apache.jmeter.protocol.ftp.config.FtpConfig",
+				"org.apache.jmeter.protocol.ftp.config.gui.FtpConfigGui");				
+		guiClassMap.put("org.apache.jmeter.assertions.Assertion",
+				"org.apache.jmeter.assertions.gui.AssertionGui");
+					
+		
+		propertyConversion.put("arguments",HTTPSampler.ARGUMENTS);
+		propertyConversion.put("port",HTTPSampler.PORT);
+		propertyConversion.put("PROTOCOL",HTTPSampler.PROTOCOL);
+		propertyConversion.put("method",HTTPSampler.METHOD);
+		propertyConversion.put("domain",HTTPSampler.DOMAIN);
+		propertyConversion.put("path",HTTPSampler.PATH);
+		propertyConversion.put("sampler.RESPONSE",ResponseAssertion.RESPONSE_DATA);
+		propertyConversion.put("sampler.LABEL",ResponseAssertion.SAMPLE_LABEL);
+		
+		propertyConversion.put("name",TestElement.NAME);
+		
+		componentMap.put("org.apache.jmeter.visualizers.GraphModel","org.apache.jmeter.reporters.ResultCollector");
+		componentMap.put("org.apache.jmeter.reporters.AssertionReporter","org.apache.jmeter.reporters.ResultCollector");
+		componentMap.put("org.apache.jmeter.reporters.ResultCollector","org.apache.jmeter.reporters.ResultCollector");
+		componentMap.put("org.apache.jmeter.protocol.http.config.UrlConfig","org.apache.jmeter.config.ConfigTestElement");
+		componentMap.put("org.apache.jmeter.protocol.http.config.MultipartUrlConfig","org.apache.jmeter.config.ConfigTestElement");
+		componentMap.put("org.apache.jmeter.assertions.Assertion",
+				"org.apache.jmeter.assertions.ResponseAssertion");
+		
+	}
+		
+
+	/**
+	 *  Constructor for the JMeterHandler object
+	 */
+	public JMeterHandler()
+	{
+	}
+	
+	public static String getComponentConversion(String old)
+	{
+		if(componentMap.containsKey(old))
+		{
+			return (String)componentMap.get(old);
+		}
+		else 
+		{
+			return old;
+		}
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  configs          Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeConfigElements(Collection configs, Writer out) throws IOException
+	{
+		out.write("<configElements>\n");
+		writeObjects(configs, out);
+		out.write("</configElements>\n");
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  controls         Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeControllers(Collection controls, Writer out) throws IOException
+	{
+		out.write("<controllers>\n");
+		writeObjects(controls, out);
+		out.write("</controllers>\n");
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  groups           Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeThreadGroups(Collection groups, Writer out) throws IOException
+	{
+		out.write("<threadgroups>\n");
+		writeObjects(groups, out);
+		out.write("</threadgroups>\n");
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  listeners        Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeListeners(Collection listeners, Writer out) throws IOException
+	{
+		out.write("<listeners>\n");
+		writeObjects(listeners, out);
+		out.write("</listeners>\n");
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  timers           Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeTimers(Collection timers, Writer out) throws IOException
+	{
+		out.write("<timers>\n");
+		writeObjects(timers, out);
+		out.write("</timers>\n");
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  objects          Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeObjects(Collection objects, Writer out) throws IOException
+	{
+		Iterator iter = objects.iterator();
+		while (iter.hasNext())
+		{
+			writeObject(iter.next(), out);
+			out.write("\n");
+		}
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  obj              Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public static void writeObject(Object obj, Writer out) throws IOException
+	{
+		if (obj instanceof Saveable)
+		{
+			try
+			{
+				((SaveHandler) ((Saveable) obj).getTagHandlerClass().newInstance()).save(
+						(Saveable) obj, out);
+			}
+			catch (Exception ex)
+			{
+				ex.printStackTrace();
+			}
+		}
+		else
+		{
+			out.write(convertToXML(obj.toString()));
+		}
+	}
+	
+	public static String getGuiClass(String testClass)
+	{
+		return (String)guiClassMap.get(testClass);
+	}
+	
+	public static String convertProperty(String prop)
+	{
+		if(propertyConversion.containsKey(prop))
+		{
+			return (String)propertyConversion.get(prop);
+		}
+		else return prop;
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  input  Description of Parameter
+	 *@return        Description of the Returned Value
+	 */
+	public static String convertToXML(String input)
+	{
+		if (input == null)
+		{
+			return null;
+		}
+		String retVal = "";
+		StringBuffer buffer = new StringBuffer(input);
+		int length = buffer.length();
+		for (int i = 0; i < length; i++)
+		{
+			char ch = buffer.charAt(i);
+			int chInt = (int) ch;
+			if (Character.isLetterOrDigit(ch) || ch == '\n' || ch == '\r' || ch == '\t' || ch == ' ')
+			{
+				continue;
+			}
+			int chType = Character.getType(ch);
+			if (chType == Character.CONTROL || chType == Character.UNASSIGNED)
+			{
+				buffer.setCharAt(i, ' ');
+			}
+		}
+		input = buffer.toString();
+		buffer = new StringBuffer();
+		java.util.StringTokenizer tokenizer = new java.util.StringTokenizer(input, TOKENS, true);
+		while (tokenizer.hasMoreTokens())
+		{
+			String nextToken = tokenizer.nextToken();
+			length = nextToken.length();
+			if (length > 1)
+			{
+				buffer.append(nextToken);
+			}
+			else if (length == 1)
+			{
+				char ch = nextToken.charAt(0);
+				switch (ch)
+				{
+					case '&':
+						buffer.append("&amp;");
+						break;
+					case '\'':
+						buffer.append("&apos;");
+						break;
+					case '"':
+						buffer.append("&quot;");
+						break;
+					case '<':
+						buffer.append("&lt;");
+						break;
+					case '>':
+						buffer.append("&gt;");
+						break;
+					case '\n':
+					case '\r':
+					case '\t':
+					case '\f':
+					case '\b':
+					case '\\':
+						buffer.append("&#");buffer.append((int)ch);buffer.append(";");
+						break;
+					default:
+						buffer.append(nextToken);
+				}
+			}
+		}
+		return buffer.toString();
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JdbcTestSampleHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JdbcTestSampleHandler.java
new file mode 100644
index 0000000..5ed2b29
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/JdbcTestSampleHandler.java
@@ -0,0 +1,256 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.List;
+
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:48 $
+ *@version    1.0
+ ***********************************************************/
+
+public class JdbcTestSampleHandler extends TagHandler
+{
+	
+	JDBCSampler sampler;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public JdbcTestSampleHandler()
+	{
+	}
+
+	/************************************************************
+	 *  Gets the PrimaryTagName attribute of the GenericControllerHandler object
+	 *
+	 *@return    The PrimaryTagName value
+	 ***********************************************************/
+	public String getPrimaryTagName()
+	{
+		return "JdbcTestSample";
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  childObj  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void notifySubElementEnded(Object childObj)
+	{
+		System.out.println(childObj);
+		if (this.getMethodName().endsWith("defaultDb"))
+		{
+			retrieveDefaultDbConfig();
+		}
+		if (this.getMethodName().endsWith("defaultPool"))
+		{
+			retrieveDefaultPoolConfig();
+		}
+		if (this.getMethodName().endsWith("defaultSql"))
+		{
+			retrieveDefaultSqlConfig();
+		}
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public void defaultDbTagEnd()
+	{
+		retrieveDefaultDbConfig();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void defaultPoolTagEnd()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if (children.size() == 1)
+		{
+			sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+		}
+	}
+	
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		sampler = new JDBCSampler();
+		sampler.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.protocol.jdbc.control.gui.JdbcTestSampleGui");
+		sampler.setName(atts.getValue("name"));
+
+	}
+	
+	public Object getModel()
+	{
+		return sampler;
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  cont                     Description of Parameter
+	 *@param  out                      Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 ***********************************************************/
+	public void save(Saveable cont, Writer out) throws java.io.IOException
+	{
+		/*JdbcTestSample controller = (JdbcTestSample)cont;
+		writeMainTag(out, controller);
+		writeDefaultDb(out, controller);
+		writeDefaultPool(out, controller);
+		writeDefaultSql(out, controller);
+		writeSubElements(controller, out);
+		out.write("</JdbcTestSample>\n");*/
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  out                      Description of Parameter
+	 *@param  controller               Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 ***********************************************************/
+	protected void writeMainTag(Writer out, GenericController controller) throws java.io.IOException
+	{
+		/*out.write("<JdbcTestSample type=\"");
+		out.write(JMeterHandler.convertToXML(controller.getClass().getName()));
+		out.write("\" name=\"");
+		out.write(JMeterHandler.convertToXML(controller.getName()));
+		out.write("\">\n");*/
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  out                      Description of Parameter
+	 *@param  controller               Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 ***********************************************************/
+	protected void writeDefaultDb(Writer out)
+			 throws java.io.IOException
+	{
+		/*out.write("<defaultDb>\n");
+		JMeterHandler.writeObject(controller.getDefaultDbConfig(), out);
+		out.write("</defaultDb>\n");*/
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  out                      !ToDo (Parameter description)
+	 *@param  controller               !ToDo (Parameter description)
+	 *@exception  java.io.IOException  !ToDo (Exception description)
+	 ***********************************************************/
+	protected void writeDefaultPool(Writer out)
+			 throws java.io.IOException
+	{
+		/*out.write("<defaultPool>\n");
+		JMeterHandler.writeObject(controller.getDefaultPoolConfig(), out);
+		out.write("</defaultPool>\n");*/
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  out                      !ToDo (Parameter description)
+	 *@param  controller               !ToDo (Parameter description)
+	 *@exception  java.io.IOException  !ToDo (Exception description)
+	 ***********************************************************/
+	protected void writeDefaultSql(Writer out) throws java.io.IOException
+	{
+		/*out.write("<defaultSql>\n");
+		JMeterHandler.writeObject(controller.getDefaultSqlConfig(), out);
+		out.write("</defaultSql>\n");*/
+	}
+
+	private void retrieveDefaultDbConfig()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if (children.size() == 1)
+		{
+			sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+		}
+	}
+
+	private void retrieveDefaultPoolConfig()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if (children.size() == 1)
+		{
+			sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+		}
+	}
+
+	private void retrieveDefaultSqlConfig()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if (children.size() == 1)
+		{
+			sampler.addTestElement((TestElement)((TagHandler)children.get(0)).getModel());
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/LoopControlHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/LoopControlHandler.java
new file mode 100644
index 0000000..55fe35c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/LoopControlHandler.java
@@ -0,0 +1,135 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.control.LoopController;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:48 $
+ *@version    1.0
+ ***********************************************************/
+
+public class LoopControlHandler extends GenericControllerHandler
+{
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public LoopControlHandler()
+	{
+		super();
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "LoopController";
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  atts                     !ToDo (Parameter description)
+	 *@exception  java.lang.Exception  !ToDo (Exception description)
+	 ***********************************************************/
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		controller = (LoopController)Class.forName(atts.getValue("type")).newInstance();
+		controller.setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("type")));
+		((LoopController)controller).setName(atts.getValue("name"));
+		((LoopController)controller).setLoops(Integer.parseInt(atts.getValue("iterations")));
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  out                      !ToDo (Parameter description)
+	 *@param  controller               !ToDo (Parameter description)
+	 *@exception  java.io.IOException  !ToDo (Exception description)
+	 ***********************************************************/
+	protected void writeMainTag(Writer out, GenericController controller) throws java.io.IOException
+	{
+		out.write("<LoopController type=\"");
+		out.write(JMeterHandler.convertToXML(controller.getClass().getName()));
+		out.write("\" name=\"");
+		out.write(JMeterHandler.convertToXML(controller.getName()));
+		out.write("\" iterations=\"");
+		out.write("" + ((LoopController)controller).getLoops());
+		out.write("\">\n");
+	}
+
+	/**
+	 *  Description of the Method
+	 *
+	 *@param  cont                     Description of Parameter
+	 *@param  out                      Description of Parameter
+	 *@exception  java.io.IOException  Description of Exception
+	 */
+	public void save(Saveable cont, Writer out) throws java.io.IOException
+	{
+		LoopController controller = (LoopController) cont;
+		writeMainTag(out, controller);
+		writeSubElements(controller, out);
+		out.write("</LoopController>");
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ParamMaskHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ParamMaskHandler.java
new file mode 100644
index 0000000..6e26c75
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ParamMaskHandler.java
@@ -0,0 +1,92 @@
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.IOException;
+import java.io.Writer;
+
+import org.apache.jmeter.protocol.http.modifier.ParamMask;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+/**
+ * Saves and loads a {@link ParamMask} object to/from XML format.
+ *
+ * @author David La France
+ * @version 1.0
+ */
+public class ParamMaskHandler extends TagHandler {
+
+    /**
+     * Default constructor
+     */
+    public ParamMaskHandler() {
+    }
+
+    /**
+     * Writes a {@link ParamMask} object in XML format to the given <code>Writer</code>
+     */
+    public void save(Saveable parm1, Writer out) throws IOException {
+        ParamMask mask = (ParamMask) parm1;
+        out.write("\n");
+        out.write("  <ParamMask>\n");
+        out.write("    <mask name=\"");
+        out.write(JMeterHandler.convertToXML(mask.getName()));
+        out.write("\" prefix=\"");
+        out.write(JMeterHandler.convertToXML(mask.getPrefix()));
+        out.write("\" upperBound=\"");
+        out.write(JMeterHandler.convertToXML(Long.toString(mask.getUpperBound())));
+        out.write("\" lowerBound=\"");
+        out.write(JMeterHandler.convertToXML(Long.toString(mask.getLowerBound())));
+        out.write("\" increment=\"");
+        out.write(JMeterHandler.convertToXML(Long.toString(mask.getIncrement())));
+        out.write("\">");
+        out.write("</mask>\n");
+        out.write("  </ParamMask>\n");
+    }
+
+    /**
+     * This method is automatically called whenever a "ParamMask" tag is reached.  The ParamMask
+     * tag does not currently support attributes
+     *
+     * @param atts The attributes of the XML "ParamMask" tag
+     */
+    public void setAtts(Attributes atts) throws Exception {
+        _mask = new ParamMask();
+        _mask.setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("type")));
+    }
+
+
+    public String getPrimaryTagName() {
+        return "ParamMask";
+    }
+
+    /**
+     * This method is automatically called whenever a "mask" tag is reached.  Loads the values for
+     * the ParamMask
+     *
+     * @param atts The attributes of the XML "mask" tag
+     */
+    public void mask(Attributes atts) {
+        _mask.setName       (atts.getValue("name"));
+        _mask.setPrefix     (atts.getValue("prefix"));
+        _mask.setUpperBound (Long.parseLong(atts.getValue("upperBound")));
+        _mask.setLowerBound (Long.parseLong(atts.getValue("lowerBound")));
+        _mask.setIncrement  (Long.parseLong(atts.getValue("increment")));
+    }
+
+    /**
+     * This method is called with any String data found between the start and end tags of a "mask"
+     * tag.
+     *
+     * @param data The string data found
+     */
+    public void mask(String data) {
+    }
+
+    public Object getModel() {
+        return _mask;
+    }
+
+    ParamMask _mask;
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ProxyControlHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ProxyControlHandler.java
new file mode 100644
index 0000000..c4435c2
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ProxyControlHandler.java
@@ -0,0 +1,179 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.save.old.handlers;
+
+
+import java.io.IOException;
+import java.io.Writer;
+import java.util.Iterator;
+import java.util.List;
+
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.protocol.http.proxy.ProxyControl;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.xml.sax.Attributes;
+
+
+
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author     Michael Stover
+ *@created    June 9, 2001
+ *@version    1.0
+ ***********************************************************/
+
+
+public class ProxyControlHandler extends AbstractConfigElementHandler
+{
+
+	/************************************************************
+	 *  This is called when a tag is first encountered for this handler class to
+	 *  handle. The attributes of the tag are passed, and the SaveHandler object is
+	 *  expected to instantiate a new object.
+	 *
+	 *@param  atts           The new Atts value
+	 *@exception  Exception  Description of Exception
+	 ***********************************************************/
+	public void setAtts(Attributes atts) throws Exception
+	{
+		config = new ProxyControl();
+		config.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui");
+		config.setProperty(TestElement.NAME,atts.getValue("name"));
+	}
+
+	/************************************************************
+	 *  Gets the tag name that will trigger the use of this object's TagHandler.
+	 *
+	 *@return    The PrimaryTagName value
+	 ***********************************************************/
+	public String getPrimaryTagName()
+	{
+		return "ProxyControl";
+	}
+
+	/************************************************************
+	 *  Called by reflection when the &lt;property&gt; tag is ended.
+	 ***********************************************************/
+	public void propertyTagEnd()
+	{
+		List children = xmlParent.takeChildObjects(this);
+		if(children.size() == 1) {
+			// Include or Exclude list, encapsulated as a set of Arguments
+			Object model = ((TagHandler)children.get(0)).getModel();
+			if (model instanceof Arguments) {
+				Arguments args = (Arguments) model;
+				List list = null;
+				ProxyControl proxy = (ProxyControl) config;
+				if (currentProperty.equals("includes")) {
+					list = proxy.getIncludePatterns();
+				} else if (currentProperty.equals("excludes")) {
+					list = proxy.getExcludePatterns();
+				}
+				if (list != null) {
+					for (Iterator iter = args.iterator(); iter.hasNext(); ) {
+						Argument arg = (Argument) iter.next();
+						list.add(arg.getValue());
+					}
+				}
+			}
+		}
+	}
+
+
+
+	/************************************************************
+	 *  Tells the object to save itself to the given output stream.
+	 *
+	 *@param  obj              Description of Parameter
+	 *@param  out              Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 ***********************************************************/
+	public void save(Saveable obj, Writer out) throws IOException
+	{
+		ProxyControl saved = (ProxyControl)obj;
+		String tagName = getPrimaryTagName();
+		out.write("<" + tagName);
+		out.write(" type=\"");
+		out.write(JMeterHandler.convertToXML(saved.getClass().getName()));
+		out.write("\"");
+		out.write(">\n");
+
+		for (Iterator iter = saved.getPropertyNames().iterator(); iter.hasNext(); ) {
+			String key = (String)iter.next();
+			Object value = saved.getProperty(key);
+			writeProperty(out, key, value);
+		}
+
+		writePatterns(saved.getIncludePatterns(), "includes", out);
+		writePatterns(saved.getExcludePatterns(), "excludes", out);
+
+		out.write("</" + tagName + ">");
+	}
+
+	private void writePatterns(List list, String name, Writer out) throws IOException {
+		Arguments args = new Arguments();
+		int i = 0;
+		for (Iterator iter = list.iterator(); iter.hasNext(); ) {
+			String pattern = (String) iter.next();
+			args.addArgument("arg" + i++, pattern);
+		}
+		writeProperty(out, name, args);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/TestPlanHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/TestPlanHandler.java
new file mode 100644
index 0000000..4e8b272
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/TestPlanHandler.java
@@ -0,0 +1,127 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestPlan;
+import org.xml.sax.Attributes;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:48 $
+ *@version    1.0
+ ***********************************************************/
+
+public class TestPlanHandler extends TagHandler
+{
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public TestPlanHandler()
+	{
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  atts                     !ToDo (Parameter description)
+	 *@exception  java.lang.Exception  !ToDo (Exception description)
+	 ***********************************************************/
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getPrimaryTagName()
+	{
+		return "TestPlan";
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Object getModel()
+	{
+		return TestPlan.createTestPlan(null);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  s                        !ToDo (Parameter description)
+	 *@param  out                      !ToDo (Parameter description)
+	 *@exception  java.io.IOException  !ToDo (Exception description)
+	 ***********************************************************/
+	public void save(Saveable s, Writer out) throws java.io.IOException
+	{
+		/*out.write("<TestPlan>\n");
+		TestPlan save = (TestPlan)s;
+		JMeterHandler.writeThreadGroups(save.getThreadGroups(), out);
+		JMeterHandler.writeConfigElements(save.getConfigElements(), out);
+		out.write("</TestPlan>\n");*/
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ThreadGroupHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ThreadGroupHandler.java
new file mode 100644
index 0000000..568ecb5
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/ThreadGroupHandler.java
@@ -0,0 +1,183 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+import java.util.Iterator;
+
+import org.apache.jmeter.control.LoopController;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.xml.sax.Attributes;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:48 $
+ *@version    1.0
+ ***********************************************************/
+
+public class ThreadGroupHandler extends TagHandler
+{
+
+	 private ThreadGroup group;
+
+	 /************************************************************
+	  *  !ToDo (Constructor description)
+	  ***********************************************************/
+	 public ThreadGroupHandler()
+	 {
+	 }
+
+	 /************************************************************
+	  *  !ToDo (Method description)
+	  *
+	  *@param  atts                     !ToDo (Parameter description)
+	  *@exception  java.lang.Exception  !ToDo (Exception description)
+	  ***********************************************************/
+	 public void setAtts(Attributes atts) throws java.lang.Exception
+	 {
+		  group = new ThreadGroup();
+		  group.setName(atts.getValue("name"));
+		  group.setProperty(TestElement.GUI_CLASS,
+				"org.apache.jmeter.threads.gui.ThreadGroupGui");
+		  try
+		  {
+				group.setNumThreads(Integer.parseInt(atts.getValue("numThreads")));
+		  }
+		  catch(NumberFormatException err)
+		  {
+		  	group.setNumThreads(1);
+		  }
+		  try
+		  {
+				group.setRampUp(Integer.parseInt(atts.getValue("rampUp")));
+		  }
+		  catch (NumberFormatException ex)
+		  {
+				group.setRampUp(0);
+		  }
+
+	 }
+
+	 /************************************************************
+	  *  !ToDoo (Method description)
+	  *
+	  *@return    !ToDo (Return description)
+	  ***********************************************************/
+	 public String getPrimaryTagName()
+	 {
+		  return "ThreadGroup";
+	 }
+
+	 /************************************************************
+	  *  !ToDoo (Method description)
+	  *
+	  *@return    !ToDo (Return description)
+	  ***********************************************************/
+	 public Object getModel()
+	 {
+		  return group;
+	 }
+
+	 /************************************************************
+	  *  !ToDo (Method description)
+	  *
+	  *@param  s                        !ToDo (Parameter description)
+	  *@param  out                      !ToDo (Parameter description)
+	  *@exception  java.io.IOException  !ToDo (Exception description)
+	  ***********************************************************/
+	 public void save(Saveable s, Writer out) throws java.io.IOException
+	 {
+		  /*ThreadGroup save = (ThreadGroup)s;
+		  out.write("<ThreadGroup name=\"");
+		  out.write(JMeterHandler.convertToXML(save.getName()));
+		  out.write("\" numThreads=\"");
+
+		  out.write(String.valueOf(save.getNumThreads()));
+
+		  out.write("\" rampUp=\"");
+		  out.write(String.valueOf(save.getRampUp()));
+		  out.write("\"");
+
+		  out.write(">\n");
+		  Collection controllers = new LinkedList();
+		  controllers.add(save.getSamplerController());
+		  JMeterHandler.writeControllers(controllers, out);
+		  JMeterHandler.writeTimers(save.getTimers(), out);
+		  JMeterHandler.writeListeners(save.getListeners(), out);
+		  out.write("</ThreadGroup>\n");*/
+	 }
+
+	 /************************************************************
+	  *  !ToDo (Method description)
+	  *
+	  *@param  childObj  !ToDo (Parameter description)
+	  ***********************************************************/
+	 public void notifySubElementEnded(Object childObj)
+	 {
+		  if (childObj instanceof LoopController)
+		  {
+				Iterator children = xmlParent.takeChildObjects(this).iterator();
+				if (children.hasNext())
+				{
+					 group.setSamplerController((LoopController)((TagHandler)children.next()).getModel());
+				}
+		  }
+	 }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/TimerHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/TimerHandler.java
new file mode 100644
index 0000000..ae5cd04
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/handlers/TimerHandler.java
@@ -0,0 +1,90 @@
+package org.apache.jmeter.save.old.handlers;
+
+import java.io.Writer;
+
+import org.apache.jmeter.gui.JMeterComponentModel;
+import org.apache.jmeter.save.old.Saveable;
+import org.apache.jmeter.save.old.xml.TagHandler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.timers.Timer;
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2001
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public class TimerHandler extends TagHandler
+{
+	Timer timer;
+
+	public TimerHandler()
+	{
+	}
+
+	public void save(Saveable parm1, Writer out) throws java.io.IOException
+	{
+		Timer timer = (Timer)parm1;
+		out.write("<Timer type=\"");
+		out.write(JMeterHandler.convertToXML(timer.getClass().getName()));
+		out.write("\"");
+		if(timer instanceof JMeterComponentModel)
+		{
+			out.write(" name=\"");
+			out.write(JMeterHandler.convertToXML(((JMeterComponentModel)timer).getName()));
+			out.write("\"");
+		}
+		out.write(">\n");
+		out.write("<delay>");
+		out.write(Long.toString(timer.getDelay()));
+		out.write("</delay>\n");
+		out.write("<range>");
+		out.write(Double.toString(timer.getRange()));
+		out.write("</range>\n");
+		out.write("</Timer>\n");
+	}
+
+	public void setAtts(Attributes atts) throws java.lang.Exception
+	{
+		timer = (Timer)Class.forName(atts.getValue("type")).newInstance();
+		((TestElement)timer).setProperty(TestElement.GUI_CLASS,JMeterHandler.getGuiClass(atts.getValue("type")));
+		((TestElement)timer).setProperty(TestElement.NAME,atts.getValue("name"));
+	}
+
+	public void delay(String data)
+	{
+		try
+		{
+			timer.setDelay(Long.parseLong(data));
+		}
+		catch(NumberFormatException e)
+		{
+			timer.setDelay(0);
+		}
+	}
+
+	public void range(String data)
+	{
+		try
+		{
+			timer.setRange(Double.parseDouble(data));
+		}
+		catch(NumberFormatException e)
+		{
+			timer.setRange(0);
+		}
+	}
+
+	public String getPrimaryTagName()
+	{
+		return "Timer";
+	}
+	public Object getModel()
+	{
+		return timer;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Entries
new file mode 100644
index 0000000..c2444f1
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Entries
@@ -0,0 +1,5 @@
+/NameSpaceHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/NoCurrentHandlerException.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/TagHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/XmlHandler.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Repository
new file mode 100644
index 0000000..c32b16b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/NameSpaceHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/NameSpaceHandler.java
new file mode 100644
index 0000000..98ed000
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/NameSpaceHandler.java
@@ -0,0 +1,72 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.xml;
+
+import org.xml.sax.Attributes;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public interface NameSpaceHandler
+{
+
+	public TagHandler getXmlObject(String tagName,Attributes atts);
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/NoCurrentHandlerException.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/NoCurrentHandlerException.java
new file mode 100644
index 0000000..0f482f6
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/NoCurrentHandlerException.java
@@ -0,0 +1,72 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.xml;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public class NoCurrentHandlerException extends Exception
+{
+
+	public NoCurrentHandlerException()
+	{
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/TagHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/TagHandler.java
new file mode 100644
index 0000000..98afb3f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/TagHandler.java
@@ -0,0 +1,286 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.save.old.xml;
+
+import java.util.*;
+import java.lang.reflect.*;
+import java.io.*;
+
+import org.xml.sax.Attributes;
+
+import org.apache.jmeter.save.old.SaveHandler;
+
+/**
+ * Title:
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:
+ * @author
+ * @version 1.0
+ */
+
+public abstract class TagHandler implements SaveHandler
+{
+	private LinkedList tagsIn = new LinkedList();
+	private boolean done = false;
+	protected String tagName;
+	protected XmlHandler xmlParent;
+
+	private StringBuffer dataStore;
+
+
+	public abstract void setAtts(Attributes atts) throws Exception;
+
+	public void setXmlParent(XmlHandler xml)
+	{
+		xmlParent = xml;
+	}
+
+	public void startSave(Writer out) throws IOException
+	{
+		out.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n");
+	}
+
+	/************************************************************
+	 *  Indicates whether this tag has been completely parsed
+	 *
+	 *@return    True or false whether this tag is done being parsed
+	 ***********************************************************/
+	public boolean isDone()
+	{
+		return done;
+	}
+
+	protected void setDone(boolean done)
+	{
+		this.done = done;
+	}
+
+	public void unknownTagStart(String name,Attributes atts)
+	{
+	}
+
+	public void unknownTagEnd(String name)
+	{
+	}
+
+	public void setData(String data)
+	{
+	}
+
+	public String getTagName()
+	{
+		return tagName;
+	}
+
+	public void setTagName(String tagName)
+	{
+		this.tagName = tagName;
+	}
+
+	public abstract Object getModel();
+
+	/************************************************************
+	 *  Handles character data passed to this class
+	 *
+	 *@param  data  The data within the XML tag to be handled
+	 ***********************************************************/
+	public void handleData(String data)
+	{
+		this.callTagCombo(data);
+	}
+
+	protected void startTag(String tag)
+	{
+		if(!tagName.equals(tag))
+			tagsIn.addLast(tag);
+	}
+
+	protected void endTag(String tag)
+	{
+		if(tagName.equals(tag))
+		{
+			setDone(true);
+		}
+		else
+		{
+			tagsIn.removeLast();
+		}
+	}
+
+	protected String getMethodName()
+	{
+		StringBuffer methodName = new StringBuffer();
+		boolean first = true;
+		for (Iterator it = tagsIn.iterator(); it.hasNext(); )
+		{
+			if (!first)
+			{
+				methodName.append("_");
+			}
+			else
+			{
+				first = false;
+			}
+			methodName.append(it.next());
+		}
+		return methodName.toString();
+	}
+
+	protected void callTagCombo(Attributes atts)
+	{
+		try
+		{
+			Method method = this.getClass().getMethod(getMethodName(), new Class[]{Attributes.class});
+			method.invoke(this, new Object[]{atts});
+		}
+		catch(NoSuchMethodException e)
+		{
+		}
+		catch (Exception e)
+		{
+			e.printStackTrace();
+		}
+	}
+
+	protected void callTagCombo(String data)
+	{
+		if(dataStore == null)
+		{
+			dataStore = new StringBuffer();
+		}
+		dataStore.append(data);
+	}
+
+	private void releaseData()
+	{
+		if(dataStore != null)
+		{
+			try
+			{
+				if(getMethodName().equals(""))
+				{
+					setData(dataStore.toString());
+				}
+				else
+				{
+					Method method = this.getClass().getMethod(getMethodName(), new Class[]{String.class});
+					method.invoke(this, new Object[]{dataStore.toString()});
+				}
+			}
+			catch(NoSuchMethodException e)
+			{
+			}
+			catch (Exception ex)
+			{
+				ex.printStackTrace();
+			}
+		}
+		dataStore = null;
+	}
+
+	protected void passToHandler(String localName, Attributes atts)
+	{
+		releaseData();
+		try
+		{
+			Class handler = this.getClass();
+			startTag(localName);
+			Method method = handler.getMethod(localName + "TagStart", new Class[]{Attributes.class});
+			method.invoke(this, new Object[]{atts});
+		}
+		catch (NoSuchMethodException e)
+		{
+			unknownTagStart(localName,atts);
+		}
+		catch(InvocationTargetException e)
+		{
+			e.printStackTrace();
+		}
+		catch(IllegalAccessException e)
+		{
+			e.printStackTrace();
+		}
+		callTagCombo(atts);
+	}
+
+	protected void passToHandler(String localName)
+	{
+		releaseData();
+		try
+		{
+			Class handler = this.getClass();
+			endTag(localName);
+			Method method = handler.getMethod(localName + "TagEnd", new Class[0]);
+			method.invoke(this, new Object[0]);
+		}
+		catch (NoSuchMethodException e)
+		{
+			unknownTagEnd(localName);
+		}
+		catch(InvocationTargetException e)
+		{
+			e.printStackTrace();
+		}
+		catch(IllegalAccessException e)
+		{
+			e.printStackTrace();
+		}
+	}
+
+	public void notifySubElementEnded(Object childObj)
+	{
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/XmlHandler.java b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/XmlHandler.java
new file mode 100644
index 0000000..ccd3ea7
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/save/old/xml/XmlHandler.java
@@ -0,0 +1,367 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.save.old.xml;
+
+import org.xml.sax.helpers.DefaultHandler;
+import org.xml.sax.SAXException;
+import org.xml.sax.Attributes;
+import org.xml.sax.InputSource;
+import org.xml.sax.SAXParseException;
+import org.apache.xerces.parsers.SAXParser;
+import java.util.*;
+import java.lang.reflect.*;
+
+import org.apache.jmeter.util.*;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2000 Company:
+ *
+ *@author
+ *@created    $Date: 2002/08/11 19:24:48 $
+ *@version    1.0
+ ***********************************************************/
+
+public class XmlHandler extends DefaultHandler
+{
+	protected LinkedList objectStack;
+
+	NameSpaceHandler informer;
+	List finalHandlers;
+	ListedHashTree objectHierarchy = new ListedHashTree();
+	boolean replaced = false;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  informer  !ToDo (Parameter description)
+	 ***********************************************************/
+	public XmlHandler(NameSpaceHandler informer)
+	{
+		this.informer = informer;
+		objectStack = new LinkedList();
+		finalHandlers = new LinkedList();
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public ListedHashTree getDataTree()
+	{
+		if (!replaced)
+		{
+			replaceWithModels(objectHierarchy);
+		}
+		replaced = true;
+		return objectHierarchy;
+	}
+
+	/************************************************************
+	 *  HandlerBase implementation This reports an error that has occured. This
+	 *  indicates that a rule was broken in validation, but that parsing can
+	 *  continue.
+	 *
+	 *@param  e                 !ToDo (Parameter description)
+	 *@exception  SAXException  !ToDo (Exception description)
+	 ***********************************************************/
+	public void fatalError(SAXParseException e) throws SAXException
+	{
+		System.out.println("***Parsing Fatal Error**\n" +
+				" Line:   " + e.getLineNumber() + "\n" +
+				" URI:    " + e.getSystemId() + "\n" +
+				" Message: " + e.getMessage());
+		throw new SAXException("Fatal Error encountered");
+	}
+
+	/************************************************************
+	 *  HandlerBase implementation This reports a fatal error that has occured.
+	 *  This indicates that a rule was broken that makes continued parsing
+	 *  impossible.
+	 *
+	 *@param  errs              parse error message
+	 *@exception  SAXException  !ToDo (Exception description)
+	 ***********************************************************/
+	public void error(SAXParseException errs) throws SAXException
+	{
+		System.out.println("***Parsing Error**\n" +
+				" Line:   " + errs.getLineNumber() + "\n" +
+				" URI:    " + errs.getSystemId() + "\n" +
+				" Message: " + errs.getMessage());
+		throw new SAXException("Error encountered");
+	}
+
+	/************************************************************
+	 *  HandlerBase implementation This reports a warning that has occured; this
+	 *  indicates that while no XML rules were broken, something appears to be
+	 *  incorrect or missing.
+	 *
+	 *@param  err               parse warning message
+	 *@exception  SAXException  !ToDo (Exception description)
+	 ***********************************************************/
+	public void warning(SAXParseException err) throws SAXException
+	{
+		System.out.println("***Parsing Warning**\n" +
+				" Line:   " + err.getLineNumber() + "\n" +
+				" URI:    " + err.getSystemId() + "\n" +
+				" Message: " + err.getMessage());
+		throw new SAXException("Warning encountered");
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  chardata          !ToDo (Parameter description)
+	 *@param  start             !ToDo (Parameter description)
+	 *@param  end               !ToDo (Parameter description)
+	 *@exception  SAXException  !ToDo (Exception description)
+	 ***********************************************************/
+	public void characters(char[] chardata, int start, int end) throws SAXException
+	{
+		try
+		{
+			if(start >= 0 && start < chardata.length && (end + start) <= chardata.length)
+			{
+				getCurrentHandler().handleData(new String(chardata, start, end));
+			}
+		}
+		catch (Exception e)
+		{
+			e.printStackTrace();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  uri        !ToDo (Parameter description)
+	 *@param  localName  !ToDo (Parameter description)
+	 *@param  qName      !ToDo (Parameter description)
+	 *@param  atts       !ToDo (Parameter description)
+	 ***********************************************************/
+	public void startElement(String uri, String localName, String qName, Attributes atts)
+	{
+		//documentElement(localName+":"+qName, atts);
+		TagHandler newXmlObject = informer.getXmlObject(qName, atts);
+		if (newXmlObject == null)
+		{
+			try
+			{
+				getCurrentHandler().passToHandler(qName, atts);
+			}
+			catch (Exception ex)
+			{
+				System.out.println("No current Handler for " + qName);
+			}
+		}
+		else
+		{
+			newXmlObject.setXmlParent(this);
+			objectHierarchy.add(objectStack, newXmlObject);
+			objectStack.addLast(newXmlObject);
+			try
+			{
+				getCurrentHandler().passToHandler(qName, atts);
+			}
+			catch (Exception ex)
+			{
+				System.out.println("(2)No current Handler for " + qName);
+			}
+		}
+	}
+
+	/************************************************************
+	 *  HandlerBase implementation
+	 *
+	 *@param  uri               !ToDo (Parameter description)
+	 *@param  localName         !ToDo (Parameter description)
+	 *@param  qName             !ToDo (Parameter description)
+	 *@exception  SAXException  !ToDo (Exception description)
+	 ***********************************************************/
+	public void endElement(java.lang.String uri, java.lang.String localName,
+			java.lang.String qName) throws SAXException
+	{
+		try
+		{
+			getCurrentHandler().passToHandler(qName);
+		}
+		catch (Exception ex)
+		{
+			//ex.printStackTrace();
+		}
+		if (currentHandlerIsDone())
+		{
+			TagHandler currentHandler = (TagHandler)objectStack.removeLast();
+			try
+			{
+				TagHandler previousHandler = (TagHandler)objectStack.getLast();
+				previousHandler.notifySubElementEnded(currentHandler.getModel());
+			}
+			catch(Exception e)
+			{
+			}
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  handler  !ToDo (Parameter description)
+	 *@return          !ToDo (Return description)
+	 ***********************************************************/
+	public List takeChildObjects(TagHandler handler)
+	{
+		List stack = new LinkedList();
+		Iterator iter = objectStack.iterator();
+		while (iter.hasNext())
+		{
+			Object item = iter.next();
+			stack.add(item);
+			if (item.equals(handler))
+			{
+				break;
+			}
+		}
+		ListedHashTree subTree = objectHierarchy.get(stack);
+		if (subTree == null)
+		{
+			return new LinkedList();
+		}
+		List items = new LinkedList(subTree.list());
+		iter = items.iterator();
+		while (iter.hasNext())
+		{
+			Object item = iter.next();
+			replaceSubItems(subTree, item);
+			subTree.remove(item);
+		}
+		return items;
+	}
+
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@param  tagName  !ToDo (Parameter description)
+	 *@param  atts     !ToDo (Parameter description)
+	 *@return          !ToDo (Return description)
+	 ***********************************************************/
+	protected TagHandler getXmlObject(String tagName, Attributes atts)
+	{
+		return informer.getXmlObject(tagName, atts);
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return                                !ToDo (Return description)
+	 *@exception  NoCurrentHandlerException  !ToDo (Exception description)
+	 ***********************************************************/
+	protected TagHandler getCurrentHandler() throws NoCurrentHandlerException
+	{
+		if (objectStack.size() == 0)
+		{
+			throw new NoCurrentHandlerException();
+		}
+		else
+		{
+			return (TagHandler)objectStack.getLast();
+		}
+	}
+
+	private void replaceWithModels(ListedHashTree tree)
+	{
+		Iterator iter = new LinkedList(tree.list()).iterator();
+		while (iter.hasNext())
+		{
+			TagHandler item = (TagHandler)iter.next();
+			tree.replace(item,item.getModel());
+			replaceWithModels(tree.get(item.getModel()));
+		}
+	}
+
+	private boolean currentHandlerIsDone()
+	{
+		try
+		{
+			return getCurrentHandler().isDone();
+		}
+		catch (NoCurrentHandlerException e)
+		{
+			return false;
+		}
+	}
+
+	private void documentElement(String name, Attributes atts)
+	{
+		System.out.println("startElement= " + name);
+		for (int i = 0; i < atts.getLength(); i++)
+		{
+			System.out.println(" Attribute= " + atts.getQName(i) + "=" + atts.getValue(i));
+		}
+	}
+
+	private void replaceSubItems(ListedHashTree subTree, Object item)
+	{
+		ListedHashTree subSubTree = subTree.get(item);
+		List subItems = subSubTree.list();
+		Iterator iter2 = subItems.iterator();
+		while (iter2.hasNext())
+		{
+			Object subItem = iter2.next();
+			subTree.set(subItem, subSubTree.get(subItem));
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/AbstractTestElement.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/AbstractTestElement.java
new file mode 100644
index 0000000..1cb9f4c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/AbstractTestElement.java
@@ -0,0 +1,347 @@
+package org.apache.jmeter.testelement;
+import java.io.Serializable;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.Map;
+
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:48 $
+ *@version   1.0
+ ***************************************/
+
+public abstract class AbstractTestElement implements TestElement,Serializable
+{
+	private Map testInfo = new HashMap();
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Object clone()
+	{
+		try
+		{
+			TestElement newObject = (TestElement)this.getClass().newInstance();
+			configureClone(newObject);
+			return newObject;
+		}
+		catch(Exception e)
+		{
+			e.printStackTrace();
+		}
+		return null;
+	}
+
+	public void removeProperty(String key)
+	{
+		testInfo.remove(key);
+	}
+
+	public boolean equals(Object o)
+	{
+		if(o instanceof AbstractTestElement)
+		{
+			return ((AbstractTestElement)o).testInfo.equals(testInfo);
+		}
+		else
+		{
+			return false;
+		}
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param el  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement el)
+	{
+		if(el.getClass().equals(this.getClass()))
+		{
+			mergeIn(el);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		setProperty(TestElement.NAME, name);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return (String)getProperty(TestElement.NAME);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param key   !ToDo (Parameter description)
+	 *@param prop  !ToDo (Parameter description)
+	 ***************************************/
+	public void setProperty(String key, Object prop)
+	{
+		testInfo.put(key, prop);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param key  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public Object getProperty(String key)
+	{
+		return testInfo.get(key);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getPropertyNames()
+	{
+		return testInfo.keySet();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param newObject  !ToDo (Parameter description)
+	 ***************************************/
+	protected void configureClone(TestElement newObject)
+	{
+		Iterator iter = getPropertyNames().iterator();
+		while(iter.hasNext())
+		{
+			String key = (String)iter.next();
+			Object value = getProperty(key);
+			if(value instanceof TestElement)
+			{
+				newObject.setProperty(key, ((TestElement)value).clone());
+			}
+			else if(value instanceof Collection)
+			{
+				try {
+					newObject.setProperty(key,cloneCollection(value));
+				} catch(Exception e) {
+					e.printStackTrace();
+				}
+			}
+			else
+			{
+				newObject.setProperty(key, value);
+			}
+		}
+	}
+
+	protected Collection cloneCollection(Object value) throws InstantiationException,
+			IllegalAccessException,ClassNotFoundException
+	{
+		Iterator collIter = ((Collection)value).iterator();
+		Collection newColl = (Collection)value.getClass().newInstance();
+		while(collIter.hasNext())
+		{
+			Object val = collIter.next();
+			if(val instanceof TestElement)
+			{
+				val = ((TestElement)val).clone();
+			}
+			else if(val instanceof Collection)
+			{
+				try {
+					val = cloneCollection(val);
+				} catch(Exception e) {
+					continue;
+				}
+			}
+			newColl.add(val);
+		}
+		return newColl;
+	}
+
+	private long getLongValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return (long)0;
+		} else if (bound instanceof Long)
+		{
+			return ((Long) bound).longValue();
+		} else
+		{
+			return Long.parseLong((String) bound);
+		}
+	}
+
+	private float getFloatValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return (float)0;
+		} else if (bound instanceof Float)
+		{
+			return ((Float) bound).floatValue();
+		} else
+		{
+			return Float.parseFloat((String) bound);
+		}
+	}
+
+	private double getDoubleValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return (double)0;
+		} else if (bound instanceof Double)
+		{
+			return ((Double) bound).doubleValue();
+		} else
+		{
+			return Double.parseDouble((String) bound);
+		}
+	}
+
+	private String getStringValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return "";
+		} else return bound.toString();
+	}
+
+	private int getIntValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return (int)0;
+		} else if (bound instanceof Integer)
+		{
+			return ((Integer) bound).intValue();
+		} else
+		{
+			try
+			{
+				return Integer.parseInt((String) bound);
+			}
+			catch(NumberFormatException e)
+			{
+				return 0;
+			}
+		}
+	}
+
+	private boolean getBooleanValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return false;
+		} else if (bound instanceof Boolean)
+		{
+			return ((Boolean) bound).booleanValue();
+		}
+		else
+		{
+			return new Boolean((String) bound).booleanValue();
+		}
+	}
+
+	public int getPropertyAsInt(String key)
+	{
+		return getIntValue(getProperty(key));
+	}
+
+	public boolean getPropertyAsBoolean(String key)
+	{
+		return getBooleanValue(getProperty(key));
+	}
+
+	public float getPropertyAsFloat(String key)
+	{
+		return getFloatValue(getProperty(key));
+	}
+
+	public long getPropertyAsLong(String key)
+	{
+		return getLongValue(getProperty(key));
+	}
+
+	public double getPropertyAsDouble(String key)
+	{
+		return getDoubleValue(getProperty(key));
+	}
+
+	public String getPropertyAsString(String key)
+	{
+		return getStringValue(getProperty(key));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param element  !ToDo (Parameter description)
+	 ***************************************/
+	protected void mergeIn(TestElement element)
+	{
+		Iterator iter = element.getPropertyNames().iterator();
+		while(iter.hasNext())
+		{
+			String key = (String)iter.next();
+			Object value = element.getProperty(key);
+			if(getProperty(key) == null || getProperty(key).equals(""))
+			{
+				setProperty(key, value);
+				continue;
+			}
+			if(value instanceof TestElement)
+			{
+				if(getProperty(key) == null)
+				{
+					setProperty(key,value);
+				}
+				else if(getProperty(key) instanceof TestElement)
+				{
+					((TestElement)getProperty(key)).addTestElement((TestElement)value);
+				}
+			}
+			else if(value instanceof Collection)
+			{
+				Iterator iter2 = ((Collection)value).iterator();
+				Collection localCollection = (Collection)getProperty(key);
+				if(localCollection == null)
+				{
+					setProperty(key,value);
+				}
+				else
+				{
+					while(iter2.hasNext())
+					{
+						Object item = iter2.next();
+						if(!localCollection.contains(item))
+						{
+							localCollection.add(item);
+						}
+					}
+				}
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Entries
new file mode 100644
index 0000000..5b6c2ff
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Entries
@@ -0,0 +1,8 @@
+/AbstractTestElement.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/PerSampleClonable.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/PerThreadClonable.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/TestElement.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/TestListener.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/TestPlan.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+/WorkBench.java/1.1/Sun Aug 11 19:24:48 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Repository
new file mode 100644
index 0000000..e2ea485
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/testelement
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/PerSampleClonable.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/PerSampleClonable.java
new file mode 100644
index 0000000..b94376f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/PerSampleClonable.java
@@ -0,0 +1,16 @@
+package org.apache.jmeter.testelement;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public interface PerSampleClonable
+{
+
+	public Object clone();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/PerThreadClonable.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/PerThreadClonable.java
new file mode 100644
index 0000000..29c8604
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/PerThreadClonable.java
@@ -0,0 +1,16 @@
+package org.apache.jmeter.testelement;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public interface PerThreadClonable
+{
+
+	public Object clone();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestElement.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestElement.java
new file mode 100644
index 0000000..2782769
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestElement.java
@@ -0,0 +1,78 @@
+package org.apache.jmeter.testelement;
+import java.util.*;
+
+/****************************************
+ * <p>
+ *
+ * Title: Jakarta JMeter</p> <p>
+ *
+ * Description: Load testing software</p> <p>
+ *
+ * Copyright: Copyright (c) 2002</p> <p>
+ *
+ * Company: Apache Foundation</p>
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:48 $
+ *@version   1.0
+ ***************************************/
+
+public interface TestElement extends Cloneable
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String NAME = "TestElement.name";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String GUI_CLASS = "TestElement.gui_class";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String TEST_CLASS = "TestElement.test_class";
+
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param child  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement child);
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getPropertyNames();
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param key  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public Object getProperty(String key);
+
+	public String getPropertyAsString(String key);
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param key       !ToDo (Parameter description)
+	 *@param property  !ToDo (Parameter description)
+	 ***************************************/
+	public void setProperty(String key, Object property);
+
+	public void removeProperty(String key);
+
+	//lifecycle methods
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Object clone();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestListener.java
new file mode 100644
index 0000000..c991e62
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestListener.java
@@ -0,0 +1,22 @@
+package org.apache.jmeter.testelement;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public interface TestListener
+{
+
+	public void testStarted();
+
+	public void testEnded();
+	
+	public void testStarted(String host);
+	
+	public void testEnded(String host);
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestPlan.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestPlan.java
new file mode 100644
index 0000000..1183af8
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/TestPlan.java
@@ -0,0 +1,173 @@
+package org.apache.jmeter.testelement;
+import java.io.Serializable;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Map;
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   March 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class TestPlan extends AbstractTestElement implements Serializable
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String THREAD_GROUPS = "TestPlan.thread_groups";
+	public final static String FUNCTIONAL_MODE = "TestPlan.functional_mode";
+	public final static String USER_DEFINED_VARIABLES = "TestPlan.user_defined_variables";
+
+	private List threadGroups = new LinkedList();
+	private List configs = new LinkedList();
+	private static List itemsCanAdd = new LinkedList();
+	private static TestPlan plan;
+	private Map userDefinedVariables = new HashMap();
+
+	static
+	{
+		// WARNING! This String value must be identical to the String value returned
+		// in org.apache.jmeter.threads.ThreadGroup.getClassLabel() method.
+		// If it's not you will not be able to add a Thread Group element to a Test Plan.
+		itemsCanAdd.add(JMeterUtils.getResString("threadgroup"));
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public TestPlan()
+	{
+		this("Test Plan");
+		setFunctionalMode(false);
+	}
+	
+	public boolean isFunctionalMode()
+	{
+		return getPropertyAsBoolean(FUNCTIONAL_MODE);
+	}
+	
+	public void setUserDefinedVariables(Arguments vars)
+	{
+		setProperty(USER_DEFINED_VARIABLES,vars);
+	}
+	
+	public Map getUserDefinedVariables()
+	{
+		Arguments args = (Arguments)getProperty(USER_DEFINED_VARIABLES);
+		if(args != null)
+		{
+			return args.getArgumentsAsMap();
+		}
+		return new HashMap();
+	}
+	
+	public void setFunctionalMode(boolean funcMode)
+	{
+		setProperty(FUNCTIONAL_MODE,new Boolean(funcMode));
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public TestPlan(String name)
+	{
+		setName(name);
+		setProperty(THREAD_GROUPS, threadGroups);
+	}
+	
+	public void addParameter(String name,String value)
+	{
+		userDefinedVariables.put(name,value);
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param name  Description of Parameter
+	 *@return      Description of the Returned Value
+	 ***************************************/
+	public static TestPlan createTestPlan(String name)
+	{
+		if(plan == null)
+		{
+			if(name == null)
+			{
+				plan = new TestPlan();
+			}
+			else
+			{
+				plan = new TestPlan(name);
+			}
+			plan.setProperty(TestElement.GUI_CLASS,"org.apache.jmeter.control.gui.TestPlanGui");
+		}
+		return plan;
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param tg  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement tg)
+	{
+		if(tg instanceof ThreadGroup)
+		{
+			addThreadGroup((ThreadGroup)tg);
+		}
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param child  !ToDo
+	 ***************************************/
+	public void addJMeterComponent(TestElement child)
+	{
+		if(child instanceof ThreadGroup)
+		{
+			addThreadGroup((ThreadGroup)child);
+		}
+	}
+
+	/****************************************
+	 * Gets the ThreadGroups attribute of the TestPlan object
+	 *
+	 *@return   The ThreadGroups value
+	 ***************************************/
+	public Collection getThreadGroups()
+	{
+		return threadGroups;
+	}
+
+	/****************************************
+	 * Adds a feature to the ConfigElement attribute of the TestPlan object
+	 *
+	 *@param c  The feature to be added to the ConfigElement attribute
+	 ***************************************/
+	public void addConfigElement(ConfigElement c)
+	{
+		configs.add(c);
+	}
+
+	/****************************************
+	 * Adds a feature to the ThreadGroup attribute of the TestPlan object
+	 *
+	 *@param group  The feature to be added to the ThreadGroup attribute
+	 ***************************************/
+	public void addThreadGroup(ThreadGroup group)
+	{
+		threadGroups.add(group);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/testelement/WorkBench.java b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/WorkBench.java
new file mode 100644
index 0000000..9aa3a88
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/testelement/WorkBench.java
@@ -0,0 +1,39 @@
+package org.apache.jmeter.testelement;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.control.gui.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.MenuFactory;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   March 13, 2001
+ *@version   1.0
+ ***************************************/
+
+public class WorkBench extends TestPlan implements Serializable
+{
+	private static List itemsCanAdd = null;
+	private boolean isRootNode;
+
+	/****************************************
+	 * Constructor for the WorkBench object
+	 *
+	 *@param name        Description of Parameter
+	 *@param isRootNode  !ToDo (Parameter description)
+	 ***************************************/
+	public WorkBench(String name, boolean isRootNode)
+	{
+		setName(name);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public WorkBench()
+	{
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Entries
new file mode 100644
index 0000000..017aade
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Entries
@@ -0,0 +1,8 @@
+/JMeterThread.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/JMeterThreadMonitor.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/JMeterVariables.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/ReflectionThreadGroup.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/SamplePackage.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/TestCompiler.java/1.3/Tue Aug 13 18:17:50 2002//Tv1_7_3
+/ThreadGroup.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Repository
new file mode 100644
index 0000000..ce6671f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/threads
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterThread.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterThread.java
new file mode 100644
index 0000000..cdc5201
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterThread.java
@@ -0,0 +1,199 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.threads;
+import java.util.*;
+import org.apache.jmeter.assertions.*;
+import org.apache.jmeter.control.Controller;
+import org.apache.jmeter.control.NoEntryException;
+import org.apache.jmeter.samplers.*;
+import org.apache.jmeter.samplers.SampleEvent;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.timers.Timer;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.testelement.TestElement;
+/****************************************
+ * The JMeter interface to the sampling process, allowing JMeter to see the
+ * timing, add listeners for sampling events and to stop the sampling process.
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:49 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class JMeterThread implements Runnable, java.io.Serializable {
+	static Map samplers = new HashMap();
+	int initialDelay = 0;
+	Controller controller;
+	private boolean running;
+	ListedHashTree testTree;
+	TestCompiler compiler;
+	JMeterThreadMonitor monitor;
+	String threadName;
+	JMeterVariables threadVars;
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public JMeterThread() {}
+	public JMeterThread(ListedHashTree test, JMeterThreadMonitor monitor) {
+		this.monitor = monitor;
+		threadVars = new JMeterVariables();
+		testTree = test;
+		compiler = new TestCompiler(testTree,threadVars);
+		controller = (Controller) testTree.getArray()[0];
+	}
+
+	public void setThreadName(String threadName)
+	{
+		this.threadName = threadName;
+	}
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void run() {
+		try
+		{
+			testTree.traverse(compiler);
+			running = true;
+			//listeners = controller.getListeners();
+			Sampler entry = null;
+			rampUpDelay();
+			System.out.println("Thread "+Thread.currentThread().getName()+" started");
+			while (running) {
+				while (controller.hasNext() && running) {
+					threadVars.incIteration();
+					try
+					{
+						SamplePackage pack = compiler.configureSampler(controller.next());
+						delay(pack.getTimers());
+						SampleResult result = pack.getSampler().sample(null);
+						result.setThreadName(threadName);
+						result.setTimeStamp(System.currentTimeMillis());
+						checkAssertions(pack.getAssertions(), result);
+						notifyListeners(pack.getSampleListeners(), result);
+					}
+					catch(Exception e)
+					{
+						e.printStackTrace();
+					}
+				}
+				if (controller.isDone()) {
+					running = false;
+				}
+			}
+		}
+		finally
+		{
+			monitor.threadFinished(this);
+		}
+	}
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void stop() {
+		running = false;
+	}
+	private void checkAssertions(List assertions, SampleResult result) {
+		Iterator iter = assertions.iterator();
+		while (iter.hasNext()) {
+			AssertionResult assertion = ((Assertion)iter.next()).getResult(result);
+			result.setSuccessful(result.isSuccessful() &&
+					!(assertion.isError() || assertion.isFailure()));
+			result.addAssertionResult(assertion);
+		}
+	}
+	private void delay(List timers) {
+		int sum = 0;
+		Iterator iter = timers.iterator();
+		while (iter.hasNext()) {
+			sum += ((Timer) iter.next()).delay();
+		}
+		if(sum > 0)
+		{
+			try {
+				Thread.sleep(sum);
+			}
+			catch (InterruptedException e) {
+				e.printStackTrace();
+			}
+		}
+	}
+	private void notifyListeners(List listeners, SampleResult result) {
+		SampleEvent event =
+			new SampleEvent(result, (String) controller.getProperty(TestElement.NAME));
+		Iterator iter = listeners.iterator();
+		while (iter.hasNext()) {
+			SampleListener lis = (SampleListener)iter.next();
+			SampleListener item = lis;
+			item.sampleOccurred(event);
+		}
+	}
+	public void setInitialDelay(int delay) {
+		initialDelay = delay;
+	}
+	/****************************************
+	 * Initial delay if ramp-up period is active for this group
+	 ***************************************/
+	private void rampUpDelay() {
+		if (initialDelay > 0) {
+			try {
+				Thread.sleep(initialDelay);
+			}
+			catch (InterruptedException e) {
+				e.printStackTrace();
+			}
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterThreadMonitor.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterThreadMonitor.java
new file mode 100644
index 0000000..893da74
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterThreadMonitor.java
@@ -0,0 +1,11 @@
+package org.apache.jmeter.threads;
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public interface JMeterThreadMonitor 
+{
+	public void threadFinished(JMeterThread thread);
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterVariables.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterVariables.java
new file mode 100644
index 0000000..cb274f5
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/JMeterVariables.java
@@ -0,0 +1,45 @@
+package org.apache.jmeter.threads;
+
+import java.util.HashMap;
+import java.util.Map;
+
+/**
+ * @author default
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ * To enable and disable the creation of type comments go to
+ * Window>Preferences>Java>Code Generation.
+ */
+public class JMeterVariables {
+	private static Map iterationData = new HashMap();
+	
+	public String getThreadName()
+	{
+		return Thread.currentThread().getName();
+	}
+	
+	public int getIteration()
+	{
+		int[] a = (int[])iterationData.get(getThreadName());
+		return a[0];
+	}
+	
+	public void incIteration()
+	{
+		int[] a = (int[])iterationData.get(getThreadName());
+		if(a == null)
+		{
+			a = new int[1];
+			a[0] = 0;
+			iterationData.put(getThreadName(),a);
+		}
+		a[0]++;
+	}
+	
+	public static void initialize()
+	{
+		iterationData.clear();
+	}
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/ReflectionThreadGroup.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/ReflectionThreadGroup.java
new file mode 100644
index 0000000..92c003f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/ReflectionThreadGroup.java
@@ -0,0 +1,94 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.threads;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.control.LoopController;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.samplers.RemoteSampleListener;
+import org.apache.jmeter.samplers.SampleEvent;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.timers.Timer;
+
+/****************************************
+ * ThreadGroup used for reflection purposes. ThreadGroup has a <code>LoopController</code>
+ * which loops as many times as specified on the ThreadGroup gui. During
+ * reflection, we don't need the <code>LoopController</code> 'cos we need to run
+ * the Sampler e.g. <code>JNDISampler</code> only once. Thus we create this
+ * <code>ReflectionThreadGroup</code> which has a <code>nextEntry()</code> which
+ * doesn't make use of the <code>LoopController</code>
+ *
+ *@author    Khor Soon Hin
+ *@created   $Date: 2002/08/11 19:24:49 $
+ *@version   1.0
+ ***************************************/
+
+public class ReflectionThreadGroup extends ThreadGroup
+{
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Object clone()
+	{
+		ReflectionThreadGroup group = new ReflectionThreadGroup();
+		configureClone(group);
+		return group;
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/SamplePackage.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/SamplePackage.java
new file mode 100644
index 0000000..b3b8d8b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/SamplePackage.java
@@ -0,0 +1,69 @@
+package org.apache.jmeter.threads;
+
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.timers.Timer;
+import org.apache.jmeter.assertions.Assertion;
+
+import java.util.*;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class SamplePackage
+{
+	List sampleListeners = new LinkedList();
+	List timers = new LinkedList();
+	List assertions = new LinkedList();
+	Sampler sampler;
+
+	public SamplePackage()
+	{
+	}
+
+	public List getSampleListeners()
+	{
+		return sampleListeners;
+	}
+
+	public void addSampleListener(SampleListener listener)
+	{
+		sampleListeners.add(listener);
+	}
+
+	public List getTimers()
+	{
+		return timers;
+	}
+
+	public void addTimer(Timer timer)
+	{
+		timers.add(timer);
+	}
+
+	public void addAssertion(Assertion asser)
+	{
+		assertions.add(asser);
+	}
+
+	public List getAssertions()
+	{
+		return assertions;
+	}
+
+	public Sampler getSampler()
+	{
+		return sampler;
+	}
+
+	public void setSampler(Sampler s)
+	{
+		sampler = s;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/TestCompiler.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/TestCompiler.java
new file mode 100644
index 0000000..607136a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/TestCompiler.java
@@ -0,0 +1,467 @@
+package org.apache.jmeter.threads;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+
+import org.apache.jmeter.assertions.Assertion;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.config.Modifier;
+import org.apache.jmeter.config.ResponseBasedModifier;
+import org.apache.jmeter.control.GenericController;
+import org.apache.jmeter.functions.Function;
+import org.apache.jmeter.functions.InvalidVariableException;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+import org.apache.jmeter.samplers.SampleEvent;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.testelement.PerSampleClonable;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.timers.Timer;
+import org.apache.jmeter.util.ListedHashTree;
+import org.apache.jmeter.util.ListedHashTreeVisitor;
+
+/****************************************
+ * <p>
+ *
+ * Title: </p> <p>
+ *
+ * Description: </p> <p>
+ *
+ * Copyright: Copyright (c) 2001</p> <p>
+ *
+ * Company: </p>
+ *
+ *@author    unascribed
+ *@created   $Date: 2002/08/13 18:17:50 $
+ *@version   1.0
+ ***************************************/
+
+public class TestCompiler implements ListedHashTreeVisitor, SampleListener
+{
+	LinkedList stack = new LinkedList();
+	Map samplerConfigs = new HashMap();
+	Set objectsWithFunctions = new HashSet();
+	ListedHashTree testTree;
+	SampleResult previousResult;
+	Sampler currentSampler;
+	JMeterVariables threadVars;
+	private static Set pairing = new HashSet();
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param testTree  !ToDo (Parameter description)
+	 ***************************************/
+	public TestCompiler(ListedHashTree testTree,
+			JMeterVariables vars)
+	{
+		threadVars = vars;
+		this.testTree = testTree;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public static void initialize()
+	{
+		pairing.clear();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleOccurred(SampleEvent e)
+	{
+		previousResult = e.getResult();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleStarted(SampleEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleStopped(SampleEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param sampler  !ToDo (Parameter description)
+	 *@return         !ToDo (Return description)
+	 ***************************************/
+	public SamplePackage configureSampler(Sampler sampler)
+	{
+		currentSampler = sampler;
+		SamplePackage ret = new SamplePackage();
+		Sampler clonedSampler = sampler;
+		if(sampler instanceof PerSampleClonable)
+		{
+			clonedSampler = (Sampler)((PerSampleClonable)sampler).clone();
+		}
+		if(objectsWithFunctions.contains(sampler))
+		{
+			replaceValues(clonedSampler);
+		}
+		ret.setSampler(clonedSampler);
+		ret.addSampleListener(this);
+		Iterator iter = ((List)samplerConfigs.get(sampler)).iterator();
+		while(iter.hasNext())
+		{
+			TestElement config = (TestElement)iter.next();
+			layerElement(ret,config, clonedSampler);
+		}
+		return ret;
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param node     !ToDo
+	 *@param subTree  !ToDo
+	 ***************************************/
+	public void addNode(Object node, ListedHashTree subTree)
+	{
+		stack.addLast(node);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void subtractNode()
+	{
+		TestElement child = (TestElement)stack.getLast();
+		if(child instanceof Sampler)
+		{
+			saveSamplerConfigs((Sampler)child);
+		}
+		stack.removeLast();
+		if(stack.size() > 0)
+		{
+			ObjectPair pair = new ObjectPair(child, stack.getLast());
+			if(!pairing.contains(pair))
+			{
+				((TestElement)stack.getLast()).addTestElement(child);
+				pairing.add(pair);
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void processPath() { }
+
+	private void saveSamplerConfigs(Sampler sam)
+	{
+		List configs = new LinkedList();
+		for(int i = stack.size(); i > 0; i--)
+		{
+			Iterator iter = testTree.list(stack.subList(0, i)).iterator();
+			while(iter.hasNext())
+			{
+				TestElement item = (TestElement)iter.next();
+				synchronized(item)
+				{
+					if(hasFunctions(item))
+					{
+						objectsWithFunctions.add(item);
+					}
+				}
+				if(!(item instanceof Sampler))
+				{
+					configs.add(item);
+				}
+			}
+		}
+		synchronized(sam)
+		{
+			if(hasFunctions(sam))
+			{
+				objectsWithFunctions.add(sam);
+			}
+		}
+		samplerConfigs.put(sam, configs);
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/13 18:17:50 $
+	 *@version   $Revision: 1.3 $
+	 ***************************************/
+	public static class Test extends junit.framework.TestCase
+	{
+		/****************************************
+		 * !ToDo (Constructor description)
+		 *
+		 *@param name  !ToDo (Parameter description)
+		 ***************************************/
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		/****************************************
+		 * !ToDo
+		 *
+		 *@exception Exception  !ToDo (Exception description)
+		 ***************************************/
+		public void testConfigGathering() throws Exception
+		{
+			ListedHashTree testing = new ListedHashTree();
+			GenericController controller = new GenericController();
+			ConfigTestElement config1 = new ConfigTestElement();
+			config1.setName("config1");
+			config1.setProperty(HTTPSampler.DOMAIN, "www.jarkarta.org");
+			HTTPSampler sampler = new HTTPSampler();
+			sampler.setName("sampler");
+			Arguments args = new Arguments();
+			args.addArgument("param1", "value1");
+			HTTPSampler sampler2 = new HTTPSampler();
+			sampler.setName("sampler2");
+			Arguments args2 = new Arguments();
+			args2.addArgument(new HTTPArgument("xml","<data>1234</data>"));
+			sampler2.setArguments(args2);
+			testing.add(controller, config1);
+			testing.add(controller, sampler);
+			testing.add(controller,sampler2);
+			testing.get(controller).add(sampler, args);
+			TestCompiler.initialize();
+
+			TestCompiler compiler = new TestCompiler(testing,new JMeterVariables());
+			testing.traverse(compiler);
+			sampler = (HTTPSampler)compiler.configureSampler(sampler).getSampler();
+			assertEquals(config1.getProperty(HTTPSampler.DOMAIN), sampler.getDomain());
+			assertEquals(args.getArgument(0).getName(), sampler.getArguments().getArgument(0).getName());
+			assertEquals(1,sampler.getArguments().getArguments().size());
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/13 18:17:50 $
+	 *@version   $Revision: 1.3 $
+	 ***************************************/
+	private class ObjectPair
+	{
+		Object one, two;
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 *
+		 *@param one  !ToDo (Parameter description)
+		 *@param two  !ToDo (Parameter description)
+		 ***************************************/
+		public ObjectPair(Object one, Object two)
+		{
+			this.one = one;
+			this.two = two;
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public int hashCode()
+		{
+			return one.hashCode() + two.hashCode();
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param o  !ToDo (Parameter description)
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public boolean equals(Object o)
+		{
+			if(o instanceof ObjectPair)
+			{
+				return one == ((ObjectPair)o).one && two == ((ObjectPair)o).two;
+			}
+			return false;
+		}
+	}
+
+	private void layerElement(SamplePackage ret,TestElement config, Sampler clonedSampler)
+	{
+		boolean replace = objectsWithFunctions.contains(config);
+		if(config instanceof PerSampleClonable)
+		{
+			config = (TestElement)((PerSampleClonable)config).clone();
+		}
+		if(config instanceof Modifier)
+		{
+			((Modifier)config).modifyEntry(clonedSampler);
+		}
+		if(config instanceof ResponseBasedModifier && previousResult != null)
+		{
+			((ResponseBasedModifier)config).modifyEntry(clonedSampler, previousResult);
+		}
+		if(config instanceof SampleListener)
+		{
+			ret.addSampleListener((SampleListener)config);
+		}
+		if(config instanceof Assertion)
+		{
+			ret.addAssertion((Assertion)config);
+		}
+		if(config instanceof Timer)
+		{
+			ret.addTimer((Timer)config);
+		}
+		if(replace && config instanceof PerSampleClonable)
+		{
+			replaceValues(config);
+		}
+		else if(replace)
+		{
+			config = (TestElement)config.clone();
+			replaceValues(config);
+		}
+		clonedSampler.addTestElement(config);
+	}
+	
+	private boolean hasFunctions(TestElement el)
+	{
+		boolean hasFunctions = false;
+		Iterator iter = el.getPropertyNames().iterator();
+		while(iter.hasNext())
+		{
+			String propName = (String)iter.next();
+			Object propValue = el.getProperty(propName);
+			if(propValue instanceof Function)
+			{
+				((Function)propValue).setJMeterVariables(threadVars);
+				hasFunctions = true;
+			}
+			else if(propValue instanceof TestElement)
+			{
+				if(hasFunctions((TestElement)propValue))
+				{
+					hasFunctions = true;
+				}
+			}
+			else if(propValue instanceof Collection)
+			{
+				if(hasFunctions((Collection)propValue))
+				{
+					hasFunctions = true;
+				}
+			}
+		}
+		return hasFunctions;
+	}
+	
+	private boolean hasFunctions(Collection values)
+	{
+		Iterator iter = new LinkedList(values).iterator();
+		boolean hasFunctions = false;
+		while(iter.hasNext())
+		{
+			Object val = iter.next();
+			if(val instanceof TestElement)
+			{
+				if(hasFunctions((TestElement)val))
+				{
+					hasFunctions = true;
+				}
+			}
+			else if(val instanceof Function)
+			{
+				((Function)val).setJMeterVariables(threadVars);
+				hasFunctions = true;
+			}
+			else if(val instanceof Collection)
+			{
+				if(hasFunctions((Collection)val))
+				{
+					hasFunctions = true;
+				}
+			}
+		}
+		return hasFunctions;
+	}	
+	
+	private void replaceValues(TestElement el)
+	{
+		Iterator iter = el.getPropertyNames().iterator();
+		while(iter.hasNext())
+		{
+			String propName = (String)iter.next();
+			Object propValue = el.getProperty(propName);
+			if(propValue instanceof Function)
+			{
+				try
+				{
+					el.setProperty(propName,((Function)propValue).execute(previousResult,currentSampler));
+				}
+				catch(InvalidVariableException e)
+				{}
+			}
+			else if(propValue instanceof TestElement)
+			{
+				replaceValues((TestElement)propValue);
+			}
+			else if(propValue instanceof Collection)
+			{
+				el.setProperty(propName,replaceValues((Collection)propValue));
+			}
+		}
+	}
+	
+	private Collection replaceValues(Collection values)
+	{
+		Collection newColl = null;
+		try {
+			newColl = (Collection)values.getClass().newInstance();
+		} catch(Exception e) {
+			e.printStackTrace();
+			return values;
+		} 
+		Iterator iter = values.iterator();
+		while(iter.hasNext())
+		{
+			Object val = iter.next();
+			if(val instanceof TestElement)
+			{
+				replaceValues((TestElement)val);
+			}
+			else if(val instanceof Function)
+			{
+				try
+				{
+					val = ((Function)val).execute(previousResult,currentSampler);
+				}
+				catch(InvalidVariableException e)
+				{}
+			}
+			else if(val instanceof Collection)
+			{
+				val = replaceValues((Collection)val);
+			}
+			newColl.add(val);
+		}
+		return newColl;
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/ThreadGroup.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/ThreadGroup.java
new file mode 100644
index 0000000..0bc44af
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/ThreadGroup.java
@@ -0,0 +1,346 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.threads;
+import java.io.Serializable;
+import java.util.Collections;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+
+import org.apache.jmeter.control.Controller;
+import org.apache.jmeter.control.LoopController;
+import org.apache.jmeter.samplers.RemoteSampleListener;
+import org.apache.jmeter.samplers.SampleEvent;
+import org.apache.jmeter.samplers.SampleListener;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.PerThreadClonable;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:49 $
+ *@version   1.0
+ ***************************************/
+
+public class ThreadGroup extends AbstractTestElement implements SampleListener,
+		Serializable,Controller,PerThreadClonable
+{
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String NUM_THREADS = "ThreadGroup.num_threads";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String RAMP_TIME = "ThreadGroup.ramp_time";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public final static String MAIN_CONTROLLER = "ThreadGroup.main_controller";
+	private final int DEFAULT_NUM_THREADS = 1;
+	private final int DEFAULT_RAMP_UP = 0;
+	private SampleQueue queue = null;
+	private int threadsStarted = 0;
+	private LinkedList listeners = new LinkedList();
+	private LinkedList remoteListeners = new LinkedList();
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ThreadGroup()
+	{
+	}
+
+	/****************************************
+	 * !ToDo (Method aadescription)
+	 *
+	 *@param numThreads  !ToDo (Parameter description)
+	 ***************************************/
+	public void setNumThreads(int numThreads)
+	{
+		setProperty(NUM_THREADS,new Integer(numThreads));
+	}
+
+	public boolean isDone()
+	{
+		return getSamplerController().isDone();
+	}
+
+	public boolean hasNext()
+	{
+		return getSamplerController().hasNext();
+	}
+
+	public Sampler next()
+	{
+		return getSamplerController().next();
+	}
+
+	/****************************************
+	 * !ToDo (Method aadescription)
+	 *
+	 *@param rampUp  !ToDo (Parameter description)
+	 ***************************************/
+	public void setRampUp(int rampUp)
+	{
+		setProperty(RAMP_TIME,new Integer(rampUp));
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getRampUp()
+	{
+		return getPropertyAsInt(this.RAMP_TIME);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Controller getSamplerController()
+	{
+		return (Controller)getProperty(MAIN_CONTROLLER);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param c  !ToDo (Parameter description)
+	 ***************************************/
+	public void setSamplerController(LoopController c)
+	{
+		c.setContinueForever(false);
+		setProperty(MAIN_CONTROLLER, c);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getNumThreads()
+	{
+		return this.getPropertyAsInt(this.NUM_THREADS);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getDefaultNumThreads()
+	{
+		return this.DEFAULT_NUM_THREADS;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getDefaultRampUp()
+	{
+		return this.DEFAULT_RAMP_UP;
+	}
+
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param child  !ToDo
+	 ***************************************/
+	public void addTestElement(TestElement child)
+	{
+		getSamplerController().addTestElement(child);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleOccurred(SampleEvent e)
+	{
+		if(queue == null)
+		{
+			queue = new SampleQueue();
+			Thread thread = new Thread(queue);
+			//thread.setPriority(Thread.MAX_PRIORITY);
+			thread.start();
+		}
+		queue.sampleOccurred(e);
+	}
+
+	/****************************************
+	 * A sample has started.
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleStarted(SampleEvent e)
+	{
+	}
+
+	/****************************************
+	 * A sample has stopped.
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void sampleStopped(SampleEvent e)
+	{
+	}
+
+	/****************************************
+	 * Separate thread to deliver all SampleEvents. This ensures that sample
+	 * listeners will get sample events 1 at a time, and can thus ignore thread
+	 * issues.
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:49 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class SampleQueue implements Runnable, Serializable
+	{
+		List occurredQ = Collections.synchronizedList(new LinkedList());
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 ***************************************/
+		public SampleQueue() { }
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param e  !ToDo (Parameter description)
+		 ***************************************/
+		public synchronized void sampleOccurred(SampleEvent e)
+		{
+			occurredQ.add(e);
+			this.notify();
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 ***************************************/
+		public void run()
+		{
+			SampleEvent event = null;
+			while(true)
+			{
+				try
+				{
+					event = (SampleEvent)occurredQ.remove(0);
+				}
+				catch(Exception ex)
+				{
+					waitForSamples();
+					continue;
+				}
+				try
+				{
+					if(event != null)
+					{
+						Iterator iter = listeners.iterator();
+						while(iter.hasNext())
+						{
+							((SampleListener)iter.next()).sampleOccurred(event);
+						}
+						iter = remoteListeners.iterator();
+						while(iter.hasNext())
+						{
+							try
+							{
+								((RemoteSampleListener)iter.next()).sampleOccurred(event);
+							}
+							catch(Exception ex)
+							{
+								ex.printStackTrace();
+							}
+						}
+					}
+					else
+					{
+						waitForSamples();
+					}
+				}
+				catch(Throwable ex)
+				{
+					ex.printStackTrace();
+				}
+
+			}
+		}
+
+		private synchronized void waitForSamples()
+		{
+			try
+			{
+				this.wait();
+			}
+			catch(Exception ex)
+			{
+				ex.printStackTrace();
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Entries
new file mode 100644
index 0000000..2593c2a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/ThreadGroupGui.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Repository
new file mode 100644
index 0000000..88e508e
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/threads/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/ThreadGroupGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/ThreadGroupGui.java
new file mode 100644
index 0000000..e7ee687
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/threads/gui/ThreadGroupGui.java
@@ -0,0 +1,262 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.threads.gui;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import javax.swing.text.*;
+import org.apache.jmeter.control.LoopController;
+import org.apache.jmeter.control.gui.LoopControlPanel;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.FocusRequester;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.gui.util.NumberFieldErrorListener;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:49 $
+ *@version   1.0
+ ***************************************/
+
+public class ThreadGroupGui extends JPanel implements JMeterGUIComponent
+{
+	LoopControlPanel loopPanel;
+
+	private final static String THREAD_NAME = "Thread Field";
+	private final static String RAMP_NAME = "Ramp Up Field";
+
+	private JTextField threadInput;
+	private JTextField rampInput;
+	private NamePanel namePanel;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ThreadGroupGui()
+	{
+		init();
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param name  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String name)
+	{
+		super.setName(name);
+		namePanel.setName(name);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		ThreadGroup tg = new ThreadGroup();
+		tg.setProperty(TestElement.GUI_CLASS, this.getClass().getName());
+		tg.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());
+		tg.setSamplerController((LoopController)loopPanel.createTestElement());
+		tg.setProperty(TestElement.NAME, namePanel.getName());
+		tg.setProperty(ThreadGroup.NUM_THREADS, threadInput.getText());
+		tg.setProperty(ThreadGroup.RAMP_TIME, rampInput.getText());
+		return tg;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param tg  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement tg)
+	{
+		setName((String)tg.getProperty(TestElement.NAME));
+		threadInput.setText(tg.getProperty(ThreadGroup.NUM_THREADS).toString());
+		rampInput.setText(tg.getProperty(ThreadGroup.RAMP_TIME).toString());
+		loopPanel.configure((TestElement)tg.getProperty(ThreadGroup.MAIN_CONTROLLER));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu()
+	{
+		JPopupMenu pop = new JPopupMenu();
+		pop.add(MenuFactory.makeMenus(new String[]{MenuFactory.CONTROLLERS,
+				MenuFactory.LISTENERS, MenuFactory.SAMPLERS, MenuFactory.TIMERS,
+				MenuFactory.CONFIG_ELEMENTS}, JMeterUtils.getResString("Add"),
+				"Add"));
+		MenuFactory.addEditMenu(pop, true);
+		MenuFactory.addFileMenu(pop);
+		return pop;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPanel createControllerPanel()
+	{
+		loopPanel = new LoopControlPanel(false);
+		LoopController looper= (LoopController)loopPanel.createTestElement();
+		looper.setLoops(-1);
+		loopPanel.configure(looper);		
+		return loopPanel;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("ThreadGroup");
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("thread_group_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		namePanel = new NamePanel();
+		mainPanel.add(namePanel);
+
+		// THREAD PROPERTIES
+		JPanel threadPropsPanel = new JPanel();
+		margin = new EmptyBorder(5, 10, 10, 10);
+		threadPropsPanel.setLayout(new VerticalLayout(0, VerticalLayout.LEFT));
+		threadPropsPanel.setBorder(new CompoundBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("thread_delay_properties")), margin));
+
+		// NUMBER OF THREADS
+		JPanel threadPanel = new JPanel();
+		JLabel threadLabel = new JLabel(JMeterUtils.getResString("number_of_threads"));
+		threadPanel.add(threadLabel);
+		threadInput = new JTextField(5);
+		threadInput.setText("1");
+		threadInput.addFocusListener(NumberFieldErrorListener.getNumberFieldErrorListener());
+		threadInput.setName(THREAD_NAME);
+		threadPanel.add(threadInput);
+		threadPropsPanel.add(threadPanel);
+		new FocusRequester(threadInput);
+
+		// RAMP-UP
+		JPanel rampPanel = new JPanel();
+		JLabel rampLabel = new JLabel(JMeterUtils.getResString("ramp_up"));
+		rampPanel.add(rampLabel);
+		rampInput = new JTextField(5);
+		rampInput.setText("1");
+		rampInput.setName(RAMP_NAME);
+		rampInput.addFocusListener(NumberFieldErrorListener.getNumberFieldErrorListener());
+		rampPanel.add(rampInput);
+		threadPropsPanel.add(rampPanel);
+
+		// LOOP COUNT
+		threadPropsPanel.add(createControllerPanel());
+
+		mainPanel.add(threadPropsPanel);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Entries
new file mode 100644
index 0000000..07c7879
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Entries
@@ -0,0 +1,2 @@
+/Timer.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Repository
new file mode 100644
index 0000000..2e6833f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/timers
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/Timer.java b/jakarta-jmeter/src/core/org/apache/jmeter/timers/Timer.java
new file mode 100644
index 0000000..cd76bfa
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/Timer.java
@@ -0,0 +1,155 @@
+/*
+
+ * ====================================================================
+
+ * The Apache Software License, Version 1.1
+
+ *
+
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+
+ * reserved.
+
+ *
+
+ * Redistribution and use in source and binary forms, with or without
+
+ * modification, are permitted provided that the following conditions
+
+ * are met:
+
+ *
+
+ * 1. Redistributions of source code must retain the above copyright
+
+ * notice, this list of conditions and the following disclaimer.
+
+ *
+
+ * 2. Redistributions in binary form must reproduce the above copyright
+
+ * notice, this list of conditions and the following disclaimer in
+
+ * the documentation and/or other materials provided with the
+
+ * distribution.
+
+ *
+
+ * 3. The end-user documentation included with the redistribution,
+
+ * if any, must include the following acknowledgment:
+
+ * "This product includes software developed by the
+
+ * Apache Software Foundation (http://www.apache.org/)."
+
+ * Alternately, this acknowledgment may appear in the software itself,
+
+ * if and wherever such third-party acknowledgments normally appear.
+
+ *
+
+ * 4. The names "Apache" and "Apache Software Foundation" and
+
+ * "Apache JMeter" must not be used to endorse or promote products
+
+ * derived from this software without prior written permission. For
+
+ * written permission, please contact apache@apache.org.
+
+ *
+
+ * 5. Products derived from this software may not be called "Apache",
+
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+
+ * prior written permission of the Apache Software Foundation.
+
+ *
+
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+
+ * SUCH DAMAGE.
+
+ * ====================================================================
+
+ *
+
+ * This software consists of voluntary contributions made by many
+
+ * individuals on behalf of the Apache Software Foundation.  For more
+
+ * information on the Apache Software Foundation, please see
+
+ * <http://www.apache.org/>.
+
+ */
+
+
+
+package org.apache.jmeter.timers;
+
+
+
+
+
+
+
+/**
+
+ * This interface defines those methods that must be implemented
+
+ * by timer plugins.
+
+ *
+
+ * @author  <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:49 $
+
+ */
+
+public interface Timer extends java.io.Serializable {
+
+
+
+	 /**
+
+	  * This method is called after a sampling process is done
+
+	  * to know how much time the sampling thread has to wait
+
+	  * until sampling again.
+
+	  */
+
+	 public long delay();
+
+	 public void setRange(double range);
+	 public double getRange();
+
+	 public void setDelay(long delay);
+	 public long getDelay();
+}
+
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/AbstractTimerGui.java b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/AbstractTimerGui.java
new file mode 100644
index 0000000..996db1a
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/AbstractTimerGui.java
@@ -0,0 +1,33 @@
+package org.apache.jmeter.timers.gui;
+
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.testelement.TestElement;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public abstract class AbstractTimerGui extends AbstractJMeterGuiComponent
+{
+
+  public JPopupMenu createPopupMenu()
+  {
+	 return MenuFactory.getDefaultTimerMenu();
+  }
+
+  public Collection getMenuCategories()
+  {
+	 return Arrays.asList(new String[]{MenuFactory.TIMERS});
+  }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Entries
new file mode 100644
index 0000000..b899725
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/AbstractTimerGui.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Repository
new file mode 100644
index 0000000..8be83f2
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/timers/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/timers/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Entries
new file mode 100644
index 0000000..a2b5c62
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Entries
@@ -0,0 +1,14 @@
+/ClassFinder.java/1.2/Sun Aug 11 23:19:53 2002//Tv1_7_3
+/ColorHelper.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/Data.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/HashTree.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/JMeterUtils.java/1.2/Sun Aug 11 23:19:53 2002//Tv1_7_3
+/JsseSSLManager.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/ListedHashTree.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/ListedHashTreeVisitor.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/NamedObject.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/SSLManager.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/SearchByClass.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/SortedHashTree.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+/TextFile.java/1.1/Sun Aug 11 19:24:49 2002//Tv1_7_3
+D/keystore////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Repository
new file mode 100644
index 0000000..8f81d1b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/util
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/ClassFinder.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/ClassFinder.java
new file mode 100644
index 0000000..0da9650
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/ClassFinder.java
@@ -0,0 +1,775 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.util;
+import java.io.File;
+import java.io.FilenameFilter;
+import java.io.IOException;
+import java.lang.reflect.Modifier;
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.Enumeration;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Map;
+import java.util.Set;
+import java.util.StringTokenizer;
+import java.util.zip.ZipEntry;
+import java.util.zip.ZipFile;
+
+import junit.framework.TestCase;
+
+import org.apache.log4j.Category;
+/************************************************************
+
+ *  This class finds classes that implement one or more specified interfaces.
+
+ *  This allows us to implement a plugin-type search in jar files or
+
+ *  directories.
+
+ *
+
+ *@author     Burt Beckwith
+
+ *@created    November 30, 2000
+
+ *@version    1.0
+
+ ***********************************************************/
+public class ClassFinder {
+	private static Category catClass =
+		Category.getInstance(ClassFinder.class.getName());
+	private ClassFinder() {}
+	// static only
+	
+	/************************************************************	
+	 *  Convenience method for <code>findClassesThatExtend(Class[], boolean)</code>	
+	 *  with the option to include inner classes in the search set to false	
+	 *	
+	 *@param  superClasses                Description of Parameter	
+	 *@return                             ArrayList containing discovered classes.	
+	 *@exception  IOException	
+	 *@exception  ClassNotFoundException	
+	 ***********************************************************/
+	public static List findClassesThatExtend(Class[] superClasses)
+		throws IOException, ClassNotFoundException {
+		return findClassesThatExtend(superClasses, false);
+	}
+	
+	/************************************************************	
+	 *  Find classes in the provided path(s)/jar(s) that extend the class(es).	
+	 *	
+	 *@param  superClasses                Description of Parameter	
+	 *@param  innerClasses                indicate whether to include inner classes	
+	 *      in the search	
+	 *@return                             ArrayList containing discovered classes.	
+	 *@exception  IOException
+	 *@exception  ClassNotFoundException	
+	 ***********************************************************/
+	private static String[] addJarsInPath(String[] paths) {
+		Set fullList = new HashSet();
+		for (int i = 0; i < paths.length; i++) {
+			fullList.add(paths[i]);
+			if (!paths[i].endsWith(".jar")) {
+				File dir = new File(paths[i]);
+				if (dir.exists() && dir.isDirectory()) {
+					String[] jars = dir.list(new FilenameFilter() {
+						public boolean accept(File f, String name) {
+							if (name.endsWith(".jar")) {
+								return true;
+							}
+							return false;
+						}
+					});
+					for (int x = 0; x < jars.length; x++) {
+						fullList.add(jars[x]);
+					}
+				}
+			}
+		}
+		return (String[]) fullList.toArray(new String[0]);
+	}
+	
+	public static List findClassesThatExtend(
+		Class[] superClasses,
+		boolean innerClasses)
+		throws IOException, ClassNotFoundException 
+	{
+		List listPaths = null;
+		ArrayList listClasses = null;
+		List listSuperClasses = null;
+		String[] strPathsOrJars =
+			JMeterUtils.split(
+				JMeterUtils.getPropDefault("search_paths", "lib/ext"),
+				";");
+		// paths are relative to jmDir - convert to absolutec
+		for (int i = 0; i < strPathsOrJars.length; i++) {
+			File file = new File(strPathsOrJars[i]);
+			if (!file.isAbsolute()) {
+				file = new File(JMeterUtils.getJMeterHome(),
+					strPathsOrJars[i]);
+				strPathsOrJars[i] = file.getPath();
+			}
+		}
+		strPathsOrJars = addJarsInPath(strPathsOrJars);
+		if (catClass.isDebugEnabled()) {
+			for (int k = 0; k < strPathsOrJars.length; k++) {
+				catClass.debug("strPathsOrJars : " + strPathsOrJars[k]);
+			}
+		}
+		listPaths = getClasspathMatches(strPathsOrJars);
+		if (catClass.isDebugEnabled()) {
+			Iterator tIter = listPaths.iterator();
+			for (; tIter.hasNext();) {
+				catClass.debug("listPaths : " + tIter.next());
+			}
+		}
+		listClasses = new ArrayList();
+		listSuperClasses = new ArrayList();
+		for (int i = 0; i < superClasses.length; i++) {
+			listSuperClasses.add(superClasses[i].getName());
+		}
+		// first get all the classes
+		findClassesInPaths(listPaths, listClasses);
+		if (catClass.isDebugEnabled()) {
+			Iterator tIter = listClasses.iterator();
+			for (; tIter.hasNext();) {
+				catClass.debug("listClasses : " + tIter.next());
+			}
+		}
+		List subClassList =
+			findAllSubclasses(listSuperClasses, listClasses, innerClasses);
+		return subClassList;
+	}
+	/************************************************************
+	
+	 *  Convenience method to <code>findClassesByInterface(String[], Class[],
+	
+	 *  boolean)</code> with option to include inner classes in the search set to
+	
+	 *  false
+	
+	 *
+	
+	 *@param  interfaces                  Array of interfaces to search for.
+	
+	 *@param  strPathsOrJars              paths and jars to search
+	
+	 *@return                             ArrayList containing discovered classes.
+	
+	 *@exception  IOException
+	
+	 *@exception  ClassNotFoundException  !ToDo (Exception description)
+	
+	 ***********************************************************/
+	public static ArrayList findClassesByInterface(
+		String[] strPathsOrJars,
+		Class[] interfaces)
+		throws IOException, ClassNotFoundException {
+		return findClassesByInterface(strPathsOrJars, interfaces, false);
+	}
+	/************************************************************
+	
+	 *  Find classes in the provided path(s)/jar(s) that implement the
+	
+	 *  interface(s).
+	
+	 *
+	
+	 *@param  interfaces                  Array of interfaces to search for.
+	
+	 *@param  strPathsOrJars              paths and jars to search
+	
+	 *@param  innerClasses                Indicate whether the search includes
+	
+	 *      inner classes
+	
+	 *@return                             ArrayList containing discovered classes.
+	
+	 *@exception  IOException
+	
+	 *@exception  ClassNotFoundException
+	
+	 ***********************************************************/
+	public static ArrayList findClassesByInterface(
+		String[] strPathsOrJars,
+		Class[] interfaces,
+		boolean innerClasses)
+		throws IOException, ClassNotFoundException {
+		List listPaths = null;
+		ArrayList listClasses = null;
+		ArrayList listClassesWithInterface = null;
+		String strClassName = null;
+		Iterator iterClasses = null;
+		Class tempClass = null;
+		boolean foundIt;
+		int i;
+		listPaths = getClasspathMatches(strPathsOrJars);
+		listClasses = new ArrayList();
+		// first get all the classes
+		findClassesInPaths(listPaths, listClasses);
+		// then filter by the specified interfaces;
+		// if the array is null or empty, keep all classes
+		if (interfaces == null || interfaces.length == 0) {
+			listClassesWithInterface = listClasses;
+		} else {
+			// make a copy of the ArrayList, and remove all classes that
+			// don't implement one of the interefaces
+			listClassesWithInterface = (ArrayList) listClasses.clone();
+			iterClasses = listClasses.iterator();
+			while (iterClasses.hasNext()) {
+				strClassName = (String) iterClasses.next();
+				foundIt = false;
+				// only check classes if they are not inner classes
+				// or we intend to check for inner classes
+				if ((strClassName.indexOf("$") == -1) || innerClasses) {
+					// might throw an exception, assume this is ignorable
+					try {
+						tempClass = Class.forName(strClassName,true,Thread.currentThread().getContextClassLoader());
+						for (i = 0; i < interfaces.length; i++) {
+							if (classImplementsInterface(tempClass, interfaces[i])) {
+								foundIt = true;
+								break;
+							}
+						}
+					} catch (Throwable ignored) {}
+				}
+				if (!foundIt) {
+					listClassesWithInterface.remove(strClassName);
+				}
+			}
+		}
+		// listClassesWithInterface only contains classes that directly
+		// implement the interface(s);  to get all classes we need
+		// subclasses of these, too
+		return findAllSubclasses(listClassesWithInterface, listClasses, innerClasses);
+	}
+	private static List getClasspathMatches(String[] strPathsOrJars) {
+		ArrayList listPaths = null;
+		StringTokenizer stPaths = null;
+		String strPath = null;
+		int i;
+		listPaths = new ArrayList();
+		stPaths =
+			new StringTokenizer(
+				System.getProperty("java.class.path"),
+				System.getProperty("path.separator"));
+		if (strPathsOrJars != null) {
+			strPathsOrJars = fixDotDirs(strPathsOrJars);
+			strPathsOrJars = fixSlashes(strPathsOrJars);
+			strPathsOrJars = fixEndingSlashes(strPathsOrJars);
+		}
+		// find all jar files or paths that end with strPathOrJar
+		while (stPaths.hasMoreTokens()) {
+			strPath = fixDotDir((String) stPaths.nextToken());
+			strPath = fixSlashes(strPath);
+			strPath = fixEndingSlashes(strPath);
+			if (strPathsOrJars == null) {
+				listPaths.add(strPath);
+			} else {
+				for (i = 0; i < strPathsOrJars.length; i++) {
+					if (catClass.isDebugEnabled()) {
+						catClass.debug("strPath(lower) : " + strPath.toLowerCase());
+						catClass.debug("strPathsOrJars[" + i + "] : " + strPathsOrJars[i]);
+					}
+					if (strPath.endsWith(strPathsOrJars[i])) {
+						catClass.debug("match!!!");
+						listPaths.add(strPath);
+					}
+				}
+			}
+		}
+		return listPaths;
+	}
+	
+	/************************************************************	
+	 *  Get all interfaces that the class implements, including parent interfaces.
+	 *  This keeps us from having to instantiate and check instanceof, which	
+	 *  wouldn't work anyway since instanceof requires a hard-coded class or	
+	 *  interface name.	
+	 *	
+	 *@param  theClass     the class to get interfaces for	
+	 *@param  hInterfaces  a Map to store the discovered interfaces in	
+	 ***********************************************************/
+	private static void getAllInterfaces(Class theClass, Map hInterfaces) {
+		Class[] interfaces = theClass.getInterfaces();
+		for (int i = 0; i < interfaces.length; i++) {
+			hInterfaces.put(interfaces[i].getName(), interfaces[i]);
+			getAllInterfaces(interfaces[i], hInterfaces);
+		}
+	}
+	private static String[] fixDotDirs(String[] paths) {
+		for (int i = 0; i < paths.length; i++) {
+			paths[i] = fixDotDir(paths[i]);
+		}
+		return paths;
+	}
+	private static String fixDotDir(String path) {
+		if (path != null && path.equals(".")) {
+			return System.getProperty("user.dir");
+		} else {
+			return path.trim();
+		}
+	}
+	private static String[] fixEndingSlashes(String[] strings) {
+		String[] strNew = new String[strings.length];
+		for (int i = 0; i < strings.length; i++) {
+			strNew[i] = fixEndingSlashes(strings[i]);
+		}
+		return strNew;
+	}
+	private static String fixEndingSlashes(String string) {
+		if (string.endsWith("/") || string.endsWith("\\")) {
+			string = string.substring(0, string.length() - 1);
+			string = fixEndingSlashes(string);
+		}
+		return string;
+	}
+	private static String[] fixSlashes(String[] strings) {
+		String[] strNew = new String[strings.length];
+		for (int i = 0; i < strings.length; i++) {
+			strNew[i] = fixSlashes(strings[i]) /*.toLowerCase()*/;
+		}
+		return strNew;
+	}
+	private static String fixSlashes(String str) {
+		// replace \ with /
+		str = str.replace('\\', '/');
+		// compress multiples into singles;
+		// do in 2 steps with dummy string
+		// to avoid infinte loop
+		str = replaceString(str, "//", "_____");
+		str = replaceString(str, "_____", "/");
+		return str;
+	}
+	private static String replaceString(
+		String s,
+		String strToFind,
+		String strToReplace) {
+		int index;
+		int currentPos;
+		StringBuffer buffer = null;
+		if (s.indexOf(strToFind) == -1) {
+			return s;
+		}
+		currentPos = 0;
+		buffer = new StringBuffer();
+		while (true) {
+			index = s.indexOf(strToFind, currentPos);
+			if (index == -1) {
+				break;
+			}
+			buffer.append(s.substring(currentPos, index));
+			buffer.append(strToReplace);
+			currentPos = index + strToFind.length();
+		}
+		buffer.append(s.substring(currentPos));
+		return buffer.toString();
+	}
+	/************************************************************
+	
+	 *  Determine if the class implements the interface.
+	
+	 *
+	
+	 *@param  theClass      the class to check
+	
+	 *@param  theInterface  the interface to look for
+	
+	 *@return               boolean true if it implements
+	
+	 ***********************************************************/
+	private static boolean classImplementsInterface(
+		Class theClass,
+		Class theInterface) {
+		HashMap mapInterfaces = new HashMap();
+		String strKey = null;
+		// pass in the map by reference since the method is recursive
+		getAllInterfaces(theClass, mapInterfaces);
+		Iterator iterInterfaces = mapInterfaces.keySet().iterator();
+		while (iterInterfaces.hasNext()) {
+			strKey = (String) iterInterfaces.next();
+			if (mapInterfaces.get(strKey) == theInterface) {
+				return true;
+			}
+		}
+		return false;
+	}
+	/************************************************************
+	
+	 *  Convenience method for <code>findAllSubclasses(List, List, boolean)</code>
+	
+	 *  with the option to include inner classes in the search set to false
+	
+	 *
+	
+	 *@param  listSuperClasses  the base classes to find subclasses for
+	
+	 *@param  listAllClasses    the collection of classes to search in
+	
+	 *@return                   ArrayList of the subclasses
+	
+	 ***********************************************************/
+	private static ArrayList findAllSubclasses(
+		List listSuperClasses,
+		List listAllClasses) {
+		return findAllSubclasses(listSuperClasses, listAllClasses, false);
+	}
+	/************************************************************
+	
+	 *  Finds all classes that extend the classes in the listSuperClasses
+	
+	 *  ArrayList, searching in the listAllClasses ArrayList.
+	
+	 *
+	
+	 *@param  listSuperClasses  the base classes to find subclasses for
+	
+	 *@param  listAllClasses    the collection of classes to search in
+	
+	 *@param  innerClasses      indicate whether to include inner classes in the
+	
+	 *      search
+	
+	 *@return                   ArrayList of the subclasses
+	
+	 ***********************************************************/
+	private static ArrayList findAllSubclasses(
+		List listSuperClasses,
+		List listAllClasses,
+		boolean innerClasses) {
+		Iterator iterClasses = null;
+		ArrayList listSubClasses = null;
+		String strClassName = null;
+		Class tempClass = null;
+		listSubClasses = new ArrayList();
+		iterClasses = listSuperClasses.iterator();
+		while (iterClasses.hasNext()) {
+			strClassName = (String) iterClasses.next();
+			// only check classes if they are not inner classes
+			// or we intend to check for inner classes
+			if ((strClassName.indexOf("$") == -1) || innerClasses) {
+				// might throw an exception, assume this is ignorable
+				try {
+					tempClass = Class.forName(strClassName,true,Thread.currentThread().getContextClassLoader());
+					findAllSubclassesOneClass(
+						tempClass,
+						listAllClasses,
+						listSubClasses,
+						innerClasses);
+					// call by reference - recursive
+				} catch (Throwable ignored) {}
+			}
+		}
+		return listSubClasses;
+	}
+	/************************************************************
+	
+	 *  Convenience method for <code>findAllSubclassesOneClass(Class, List, List,
+	
+	 *  boolean)</code> with option to include inner classes in the search set to
+	
+	 *  false
+	
+	 *
+	
+	 *@param  theClass        the parent class
+	
+	 *@param  listAllClasses  the collection of classes to search in
+	
+	 *@param  listSubClasses  the collection of discovered subclasses
+	
+	 ***********************************************************/
+	private static void findAllSubclassesOneClass(
+		Class theClass,
+		List listAllClasses,
+		List listSubClasses) {
+		findAllSubclassesOneClass(theClass, listAllClasses, listSubClasses, false);
+	}
+	/************************************************************
+	
+	 *  Finds all classes that extend the class, searching in the listAllClasses
+	
+	 *  ArrayList.
+	
+	 *
+	
+	 *@param  theClass        the parent class
+	
+	 *@param  listAllClasses  the collection of classes to search in
+	
+	 *@param  listSubClasses  the collection of discovered subclasses
+	
+	 *@param  innerClasses    indicates whether inners classes should be included
+	
+	 *      in the search
+	
+	 ***********************************************************/
+	private static void findAllSubclassesOneClass(
+		Class theClass,
+		List listAllClasses,
+		List listSubClasses,
+		boolean innerClasses) {
+		Iterator iterClasses = null;
+		String strClassName = null;
+		String strSuperClassName = null;
+		Class c = null;
+		Class cParent = null;
+		boolean bIsSubclass = false;
+		strSuperClassName = theClass.getName();
+		iterClasses = listAllClasses.iterator();
+		while (iterClasses.hasNext()) {
+			strClassName = (String) iterClasses.next();
+			// only check classes if they are not inner classes
+			// or we intend to check for inner classes
+			if ((strClassName.indexOf("$") == -1) || innerClasses) {
+				// might throw an exception, assume this is ignorable
+				try {
+					// Class.forName() doesn't like nulls
+					if (strClassName == null)
+						continue;
+					c = Class.forName(strClassName,true,Thread.currentThread().getContextClassLoader());
+					if (!c.isInterface() && !Modifier.isAbstract(c.getModifiers())) {
+						bIsSubclass = theClass.isAssignableFrom(c);
+					} else {
+						bIsSubclass = false;
+					}
+					if (bIsSubclass) {
+						listSubClasses.add(strClassName);
+					}
+				} catch (Throwable ignored) {}
+			}
+		}
+	}
+	/************************************************************
+	
+	 *  Converts a class file from the text stored in a Jar file to a version that
+	
+	 *  can be used in Class.forName().
+	
+	 *
+	
+	 *@param  strClassName  the class name from a Jar file
+	
+	 *@return               String the Java-style dotted version of the name
+	
+	 ***********************************************************/
+	private static String fixClassName(String strClassName) {
+		strClassName = strClassName.replace('\\', '.');
+		strClassName = strClassName.replace('/', '.');
+		strClassName = strClassName.substring(0, strClassName.length() - 6);
+		// remove ".class"
+		return strClassName;
+	}
+	/************************************************************
+	
+	 *  Description of the Method
+	
+	 *
+	
+	 *@param  strPath          Description of Parameter
+	
+	 *@param  listClasses      Description of Parameter
+	
+	 *@exception  IOException  Description of Exception
+	
+	 ***********************************************************/
+	private static void findClassesInOnePath(String strPath, List listClasses)
+		throws IOException {
+		File file = null;
+		String strPathName = null;
+		ZipFile zipFile = null;
+		ZipEntry zipEntry = null;
+		Enumeration entries = null;
+		String strEntry = null;
+		file = new File(strPath);
+		if (file.isDirectory()) {
+			findClassesInPathsDir(strPath, file, listClasses);
+		} else
+			if (file.exists()) {
+				zipFile = new ZipFile(file);
+				entries = zipFile.entries();
+				while (entries.hasMoreElements()) {
+					strEntry = entries.nextElement().toString();
+					if (strEntry.endsWith(".class")) {
+						listClasses.add(fixClassName(strEntry));
+					}
+				}
+			}
+	}
+	/************************************************************
+	
+	 *  Description of the Method
+	
+	 *
+	
+	 *@param  listPaths        Description of Parameter
+	
+	 *@param  listClasses      Description of Parameter
+	
+	 *@exception  IOException  Description of Exception
+	
+	 ***********************************************************/
+	private static void findClassesInPaths(List listPaths, List listClasses)
+		throws IOException {
+		Iterator iterPaths = listPaths.iterator();
+		while (iterPaths.hasNext()) {
+			findClassesInOnePath((String) iterPaths.next(), listClasses);
+		}
+	}
+	/************************************************************
+	
+	 *  Description of the Method
+	
+	 *
+	
+	 *@param  strPathElement   Description of Parameter
+	
+	 *@param  dir              Description of Parameter
+	
+	 *@param  listClasses      Description of Parameter
+	
+	 *@exception  IOException  Description of Exception
+	
+	 ***********************************************************/
+	private static void findClassesInPathsDir(
+		String strPathElement,
+		File dir,
+		List listClasses)
+		throws IOException {
+		File file = null;
+		String[] list = dir.list();
+		for (int i = 0; i < list.length; i++) {
+			file = new File(dir, list[i]);
+			if (file.isDirectory()) {
+				findClassesInPathsDir(strPathElement, file, listClasses);
+			} else
+				if (file.exists() && (file.length() != 0) && list[i].endsWith(".class")) {
+					listClasses.add(
+						file
+							.getPath()
+							.substring(strPathElement.length() + 1, file.getPath().lastIndexOf("."))
+							.replace(File.separator.charAt(0), '.'));
+				}
+		}
+	}
+	/************************************************************
+	
+	 *  !ToDo (Class description)
+	
+	 *
+	
+	 *@author     $Author: mstover1 $
+	
+	 *@created    $Date: 2002/08/11 23:19:53 $
+	
+	 *@version    $Revision: 1.2 $
+	
+	 ***********************************************************/
+	public static class Test extends TestCase {
+		/************************************************************
+		
+		 *  !ToDo (Constructor description)
+		
+		 *
+		
+		 *@param  name  !ToDo (Parameter description)
+		
+		 ***********************************************************/
+		public Test(String name) {
+			super(name);
+		}
+		// For a given testPath, get the name of the classes in the path and its
+		// subpaths. Append the first class name found to the testPath to ensure
+		// that the file is found.
+		/************************************************************
+		
+		 *  !ToDo
+		
+		 ***********************************************************/
+		public void testFindClassesInPaths() {
+			String testPath = JMeterUtils.getJMeterHome() + "/build";
+			List listPaths = new ArrayList();
+			ArrayList listClasses = new ArrayList();
+			// listPaths will contain the path/jars where all classes will be listed
+			listPaths.add(testPath);
+			try {
+				findClassesInPaths(listPaths, listClasses);
+			} catch (IOException e) {
+				fail("IOException thrown");
+			}
+			Iterator iter = listClasses.iterator();
+			if (iter.hasNext()) {
+				String fullname = null;
+				// check if file exist
+				String fileSeparator = System.getProperty("file.separator");
+				String filename = (String) iter.next();
+				filename = filename.replace('.', fileSeparator.charAt(0));
+				if (testPath.endsWith(fileSeparator)) {
+					fullname = testPath + filename + ".class";
+				} else {
+					fullname = testPath + fileSeparator + filename + ".class";
+				}
+				File file = new File(fullname);
+				this.assertTrue(fullname + " is not a file", file.isFile());
+			} else {
+				// if testPath is empty, fail the test
+				fail(testPath + " is empty. Please choose a path which has at least one file");
+			}
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/ColorHelper.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/ColorHelper.java
new file mode 100644
index 0000000..42833c2
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/ColorHelper.java
@@ -0,0 +1,105 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.util;
+
+import java.awt.*;
+import java.math.*;
+
+/**
+ * This class contains the static utility methods to manipulate colors.
+ *
+ * @author     Khor Soon Hin
+ * @created    2001/08/13
+ * @version    $Revision: 1.1 $ $Date: 2002/08/11 19:24:49 $
+ */
+
+public class ColorHelper
+{
+  /**
+   * Given the <code>Color</code>, get the red, green and blue components.
+   * Increment the lowest of the components by the indicated increment value.
+   * If all the components are the same value increment in the order of
+   * red, green and blue.
+   *
+   * @param inc		value to increment the color components
+   * @return		the color after change
+   */
+  public static Color changeColorCyclicIncrement(Color col, int inc)
+  {
+    int red = col.getRed();
+    int green = col.getGreen();
+    int blue = col.getBlue();
+    int temp1 = Math.min(red, green);
+    int temp2 = Math.min(temp1, blue);
+    // now temp2 has the lowest of the three components
+    if(red == temp2)
+    {
+      red += inc;
+      red %= 256;
+    }
+    else if(green == temp2)
+    {
+      green += inc;
+      green %= 256;
+    }
+    else if(blue == temp2)
+    {
+      blue += inc;
+      blue %= 256;
+    }
+    return new Color(red, green, blue);
+  }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/Data.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/Data.java
new file mode 100644
index 0000000..a443ed4
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/Data.java
@@ -0,0 +1,640 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.util;
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.List;
+import java.util.Map;
+
+
+/****************************************************************
+ Use this class to store database-like data.  This class uses rows
+ and columns to organize its data.  It has some convenience methods
+ that allow fast loading and retrieval of the data into and out of
+ string arrays.  It also can work closely with the DataTree class to
+ sort string data.
+@author Michael Stover
+@version 1.0 10/14/1998
+ ******************************************************************/
+public class Data
+{
+  Map data;
+  Map iterators = new HashMap();
+ // Hashtable dataLine;
+  ArrayList header;
+  // saves current position in data Vector
+  int currentPos,size;
+
+/*******************************************************************
+ Constructor - takes no arguments.
+*****************************************************************/
+  public Data()
+  {
+  	header = new ArrayList();
+	 data=new HashMap();
+	 currentPos=-1;
+	 size = currentPos+1;
+  }
+
+/***************************************************************
+  Replaces the given header name with a new header name.
+@param oldHeader Old header name.
+@param newHeader New header name.
+**************************************************************/
+  public void replaceHeader(String oldHeader,String newHeader)
+  {
+	 List tempList;
+	 int index=header.indexOf(oldHeader);
+	 header.set(index,newHeader);
+	 tempList = (List)data.remove(oldHeader);
+	 data.put(newHeader,tempList);
+  }
+/*************************************************************
+Adds the rows of the given Data object to this Data object.
+@param d data object to be appended to this one.
+**************************************************************/
+  public void append(Data d)
+  {
+	 boolean valid=true;
+	 String[] headers=getHeaders();
+	 String[] dHeaders=d.getHeaders();
+	 if(headers.length!=dHeaders.length)
+		valid=false;
+	 else
+		for(int count = 0;count<headers.length && count<dHeaders.length;count++)
+		  if(JMeterUtils.findInArray(headers,dHeaders[count])<0)
+			 valid=false;
+	 if(valid)
+	 {
+		currentPos=size;
+		d.reset();
+		while(d.next())
+		{
+		  for(int count = 0;count<headers.length;count++)
+			 addColumnValue(headers[count],d.getColumnValue(headers[count]));
+		}
+	 }
+  }
+
+  /***********************************
+	Get the number of the current row.
+@return  Integer representing the current row.
+  *************************************/
+  public int getCurrentPos()
+  {
+	 return currentPos;
+  }// end method
+
+  /******************************************************
+  Removes the current row.
+  ******************************************************/
+  public void removeRow()
+  {
+	 List tempList;
+	 Iterator it = data.keySet().iterator();
+	 if(currentPos>-1 && currentPos<size)
+	 {
+		while(it.hasNext())
+		{
+		  tempList = (List)data.get(it.next());
+		  tempList.remove(currentPos);
+		}
+		if(currentPos > 0)
+		{
+			currentPos--;
+		}
+		size--;
+	 }
+  } // End Method
+  
+  public void removeRow(int index)
+  {
+  	if(index < size)
+  	{
+  		setCurrentPos(index);
+  		removeRow();
+  	}
+  }
+  
+  public void addRow()
+  {
+  	String[] headers = getHeaders();
+  	List tempList = new ArrayList();
+  	for(int i = 0;i < headers.length;i++)
+  	{
+  		if((tempList = (ArrayList)data.get(header.get(i))) == null)
+	 	{
+			tempList = new ArrayList();
+			data.put(headers[i],tempList);
+	 	}
+	 	tempList.add("");
+  	}
+  	size = tempList.size();
+  	setCurrentPos(size - 1);
+  }
+
+  /******************************************************
+  Sets the current pos. If value sent to method is not a valid number,
+  the current position is set to one higher than the maximum.
+@param  r position to set to.
+  ******************************************************/
+  public void setCurrentPos(int r)
+  {
+	 currentPos=r;
+  } // End Method
+
+  /******************************************************
+  Sorts the data using a given row as the sorting criteria.  A boolean
+	value indicates whether to sort ascending or descending.
+@param column Name of column to use as sorting criteria.
+@param asc boolean value indicating whether to sort ascending or descending.  True for
+	asc, false for desc.  Currently this feature is not enabled and all sorts are asc.
+  ******************************************************/
+  public void sort(String column,boolean asc)
+  {
+	 sortData(column,0,size);
+  } // End Method
+
+  private void swapRows(int row1,int row2)
+  {
+	 List temp;
+	 Object o;
+	 Iterator it = data.keySet().iterator();
+	 while(it.hasNext())
+	 {
+		temp = (List)data.get(it.next());
+		o = temp.get(row1);
+		temp.set(row1,temp.get(row2));
+		temp.set(row2,o);
+	 }
+  }
+
+	 /************************************************************
+	Private method that implements the quicksort algorithm to sort the rows of the Data object.
+@param column Name of column to use as sorting criteria.
+@param starting index (for quicksort algorithm).
+@param ending index (for quicksort algorithm).
+	***********************************************************/
+  private void sortData(String column,int start,int end)
+  {
+	 int x=start,y=end-1;
+	 String basis=((List)data.get(column)).get((int)((x+y)/2)).toString();
+	 Object temp;
+	 if(x==y)
+		return;
+	 while(x<=y)
+	 {
+		while(x<end && ((List)data.get(column)).get(x).toString().compareTo(basis)<0)
+		  x++;
+		while(y>=(start-1) && ((List)data.get(column)).get(y).toString().compareTo(basis)>0)
+		  y--;
+		if(x<=y)
+		{
+		  swapRows(x,y);
+		  x++;
+		  y--;
+		}
+	 }
+	 if(x==y)
+		x++;
+	 y=end-x;
+	 if(x>0)
+		sortData(column,start,x);
+	 if(y>0)
+		sortData(column,x,end);
+  }
+
+  /***********************************
+	Gets the number of rows in the Data object.
+@return   Returns number of rows in Data object.
+  *************************************/
+  public int size()
+  {
+	 return size;
+  }// end method
+
+  /*******************************************************
+	Adds a value into the Data set at the current row, using a column name
+	to find the column in which to insert the new value.
+@param column The name of the column to set.
+@param value Value to set into column.
+  **********************************************************/
+  public void addColumnValue(String column,Object value)
+  {
+	 ArrayList tempList;
+	 if((tempList = (ArrayList)data.get(column)) == null)
+	 {
+		tempList = new ArrayList();
+		data.put(column,tempList);
+	 }
+	 int s = tempList.size();
+	 if(currentPos==-1)
+		currentPos=size;
+	 if(currentPos>=size)
+		  size = currentPos+1;
+	 while(currentPos>s)
+	 {
+		s++;
+		tempList.add(null);
+	 }
+	 if(currentPos == s)
+		tempList.add(value);
+	 else
+		tempList.set(currentPos,value);
+  }// end method
+
+/**************************************************************
+Returns the row number where a certain value is.
+@param column Column to be searched for value.
+@param value object in Search of.
+@return row # where value exists.
+**************************************************************/
+  public int findValue(String column,Object value)
+  {
+	 List list = (List)data.get(column);
+	 int ret=-1;
+	 ret = list.indexOf(value);
+	 return ret;
+  }
+
+  /*******************************************************
+	Sets the value in the Data set at the current row, using a column name
+	to find the column in which to insert the new value.
+@param column The name of the column to set.
+@param value Value to set into column.
+  **********************************************************/
+  public void setColumnValue(String column,Object value)
+  {
+	 List tempList;
+	 if((tempList = (List)data.get(column)) == null)
+	 {
+		tempList = new ArrayList();
+		data.put(column,tempList);
+	 }
+	 if(currentPos==-1)
+		currentPos=0;
+	 if(currentPos>=size)
+	 {
+		  size++;
+		  tempList.add(value);
+	 }
+	 else
+		tempList.set(currentPos,value);
+  }// end method
+
+  /******************************************************
+  Checks to see if a column exists in the Data object.
+@param  column Name of column header to check for.
+@return True or False depending on whether the column exists.
+  ******************************************************/
+  public boolean hasHeader(String column)
+  {
+	 return data.containsKey(column);
+  } // End Method
+
+  /***********************************
+	Sets the current position of the Data set to the next row.
+@return  True if there is another row.  False if there are no more rows.
+  *************************************/
+  public boolean next()
+  {
+	 if(++currentPos>=size)
+		return false;
+	 else return true;
+  }// end method
+
+  /***********************************
+	Sets the current position of the Data set to the previous row.
+@return  True if there is another row.  False if there are no more rows.
+  *************************************/
+  public boolean previous()
+  {
+	 if(--currentPos<0)
+		return false;
+	 else return true;
+  }// end method
+
+  /***********************************
+  Resets the current position of the data set to just before the first element.
+  *************************************/
+  public void reset()
+  {
+	 currentPos=-1;
+  }// end method
+
+  /***********************************
+  Gets the value in the current row of the given column.
+@param column Name of the column.
+@return Returns an Object which holds the value of the column.
+  *************************************/
+  public Object getColumnValue(String column)
+  {
+
+	 try{
+		if(currentPos<size)
+		  return ((List)data.get(column)).get(currentPos);
+		else
+		  return null;
+	 }catch(Exception e){return null;}
+  }// end method
+
+		  /***********************************
+  Gets the value in the current row of the given column.
+@param column index of the column (starts at 0).
+@return Returns an Object which holds the value of the column.
+  *************************************/
+  public Object getColumnValue(int column)
+  {
+	 String columnName = (String)header.get(column);
+	 try{
+		if(currentPos<size)
+		  return ((List)data.get(columnName)).get(currentPos);
+		else
+		  return null;
+	 }catch(Exception e){return null;}
+  }// end method
+  
+  public Object getColumnValue(int column,int row)
+  {
+  	setCurrentPos(row);
+  	return getColumnValue(column);
+  }
+
+
+
+  /*****************************************************************
+	Sets the headers for the data set.  Each header represents a column
+	of data.  Each row's data can be gotten with the column header name,
+	which will always be a string.
+@param h Array of strings representing the column headers.
+	**************************************************************/
+  public void setHeaders(String[] h)
+  {
+	 int x=0;
+	 header=new ArrayList(h.length);
+	 for(x = 0;x<h.length;x++)
+	 {
+		header.add(h[x]);
+		data.put(h[x],new ArrayList());
+	 }
+  }
+
+
+  /*****************************************************************
+	 Returns a String array of the column headers.
+@return Array of strings of the column headers.
+  *****************************************************************/
+  public String[] getHeaders()
+  {
+	 String[] r=new String[header.size()];
+	 if ( r.length>0 )
+	 {
+		r=(String[])header.toArray(r);
+	 }
+	 return r;
+  } //end of Method
+
+  /*****************************************************************
+	 This method will retrieve every entry in a certain column.  It returns an array of Objects
+	from the column.
+@param columnName String value, name of the column.
+@return Array of Objects representing the data.
+  *****************************************************************/
+  public Object[] getColumnAsObjectArray(String columnName)
+  {
+	 Object[] returnValue;
+	 Object o;
+	 List temp=(List)data.get(columnName);
+	 if(temp != null)
+		returnValue = temp.toArray();
+	 else
+		returnValue = new Object[0];
+	 return returnValue;
+  }// end of Method
+
+
+
+  /*****************************************************************
+	 This method will retrieve every entry in a certain column.  It returns an array of strings
+	from the column. Even if the data are not strings, they will be returned as
+	strings in this method.
+@param columnName String value, name of the column.
+@return Array of Strings representing the data.
+  *****************************************************************/
+  public String[] getColumn(String columnName)
+  {
+	 String[] returnValue;
+	 Object o;
+	 List temp=(List)data.get(columnName);
+	 if(temp != null)
+	 {
+		returnValue = new String[temp.size()];
+		Iterator it = temp.iterator();
+		int index = 0;
+		while(it.hasNext())
+		{
+		  o = it.next();
+		  if(o != null)
+		  {
+			 if(o instanceof String)
+				returnValue[index++] = (String)o;
+			 else
+				returnValue[index++] = o.toString();
+		  }
+		}
+	 }
+	 else
+		returnValue = new String[0];
+	 return returnValue;
+  }// end of Method
+
+  /*****************************************************************
+	 Use this method to set the entire data set.  It takes an array of
+	strings.  It uses the first row as the headers, and the next rows
+	as the data elements.  Delimiter represents the delimiting character(s)
+	that separate each item in a data row.
+@param contents Array of strings, the first element is a list of the column
+	headers, the next elements each represent a single row of data.
+@param delimiter The delimiter character that separates columns within
+	the string array.
+	  *****************************************************************/
+  public void setData(String[] contents, String delimiter)
+  {
+		setHeaders(JMeterUtils.split(contents[0],delimiter));
+		int x=1;
+		while(x<contents.length)
+		{
+			setLine(JMeterUtils.split(contents[x++],delimiter));
+		}
+	 } //end of Method
+
+  /*
+	Deletes a header from the Data object.
+	Takes the column name as input.  It will delete the entire
+	column.
+
+  public void deleteHeader(String s)
+  {
+
+  }*/
+
+
+  /***************************************************
+	Adds a header name to the Data object.
+@param s name of header.
+	*************************************************/
+  public void addHeader(String s)
+  {
+	header.add(s);
+	data.put(s,new ArrayList());
+  }
+
+  /************************************************************
+	Sets a row of data using an array of strings as input.  Each
+	value in the array represents a column's value in that row.
+	Assumes the order will be the same order in which the headers
+	were added to the data set.
+@param line array of strings representing column values.
+	*********************************************************/
+  public void setLine(String[] line)
+  {
+	 List tempList;
+	 String[] h = getHeaders();
+	 for(int count = 0;count<h.length;count++)
+	 {
+		tempList = (List)data.get(h[count]);
+		if(count<line.length && line[count].length()>0)
+		  tempList.add(line[count]);
+		else
+		  tempList.add("N/A");
+	 }
+	 size++;
+  }
+
+  /************************************************************
+	Sets a row of data using an array of strings as input.  Each
+	value in the array represents a column's value in that row.
+	Assumes the order will be the same order in which the headers
+	were added to the data set.
+@param line array of strings representing column values.
+@param deflt Default value to be placed in data if line is not as long as headers.
+	*********************************************************/
+  public void setLine(String[] line,String deflt)
+  {
+	 List tempList;
+	 String[] h = getHeaders();
+	 for(int count = 0;count<h.length;count++)
+	 {
+		tempList = (List)data.get(h[count]);
+		if(count<line.length && line[count].length()>0)
+		  tempList.add(line[count]);
+		else
+		  tempList.add(deflt);
+	 }
+	 size++;
+  }
+
+  /******************************************************************
+	Returns all the data in the Data set as an array of strings.  Each
+	array gives a row of data, each column separated by tabs.
+@return array of strings.
+
+	*******************************************************************/
+  public String[] getDataAsText()
+  {
+	 List tempList;
+	 StringBuffer temp=new StringBuffer("");
+	 String[] line=new String[size+1];
+	 String[] elements = getHeaders();
+	 for(int count = 0;count<elements.length;count++)
+	 {
+		temp.append(elements[count]);
+		if(count+1<elements.length)
+		  temp.append("\t");
+	 }
+	 line[0] = temp.toString();
+	 reset();
+	 int index = 1;
+	 while(next())
+	 {
+		temp = new StringBuffer("");
+		for(int count = 0;count<elements.length;count++)
+		{
+		  temp.append(getColumnValue(count));
+		  if(count+1<elements.length)
+			 temp.append("\t");
+		}
+		line[index++] = temp.toString();
+	 }
+	 return line;
+  }
+
+  public String toString()
+  {
+	 String[] contents = getDataAsText();
+	 StringBuffer sb = new StringBuffer();
+	 boolean first = true;
+	 for(int x = 0;x < contents.length;x++)
+	 {
+		if(!first)
+		  sb.append("\n");
+		else first = false;
+		sb.append(contents[x]);
+	 }
+	 return sb.toString();
+  }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/HashTree.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/HashTree.java
new file mode 100644
index 0000000..aa03157
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/HashTree.java
@@ -0,0 +1,832 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+
+
+package org.apache.jmeter.util;
+
+import java.io.*;
+import java.util.*;
+
+/**********************************************************************
+This class is used to create a tree structure of objects.  Each element in the tree
+is also a key to the next node down in the tree.
+***********************************************************************/
+public class HashTree implements Serializable
+{
+
+  public HashTree()
+  {
+	 data = new HashMap();
+  }
+
+  public HashTree(Object key)
+  {
+	 data = new HashMap();
+	 data.put(key,new HashTree());
+  }
+
+  public HashTree(Collection keys)
+  {
+	 data = new HashMap();
+	 Iterator it = keys.iterator();
+	 while(it.hasNext())
+		data.put(it.next(),new HashTree());
+  }
+
+  public HashTree(Object[] keys)
+  {
+	 data = new HashMap();
+	 for(int x = 0;x < keys.length;x++)
+		data.put(keys[x],new HashTree());
+  }
+
+/************************************************************
+  If the HashTree contains the given object as a key at the top level, then a
+  true result is returned, otherwise false.
+@param obj Object to be tested as a key.
+@return True if the HashTree contains the key, false otherwise.
+***************************************************************/
+  public boolean containsKey(Object o)
+  {
+	 return data.containsKey(o);
+  }
+
+/*****************************************************************
+  If the HashTree is empty, true is returned, false otherwise.
+@return True if HashTree is empty, false otherwise.
+***************************************************************/
+  public boolean isEmpty()
+  {
+	 return data.isEmpty();
+  }
+
+/************************************************************************
+  Sets a key and it's value in the HashTree.  It actually sets up a key, and then
+  creates a node for the key and adds the value to the new node, as a key.
+@param key Key to be set up.
+@param value Value to be set up as a key in the secondary node.
+*************************************************************************/
+  public void set(Object key,Object value)
+  {
+	 data.put(key,new HashTree(value));
+  }
+
+/********************************************************************
+ Sets a key and it's values in the HashTree.  It sets up a key in the current node, and
+ then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be set up.
+@param tree HashTree that the key maps to.
+**************************************************************************/
+  public void set(Object key,HashTree t)
+  {
+	 data.put(key,t);
+  }
+
+/************************************************************************
+Sets a key and it's values in the HashTree.  It sets up a key in the current node, and
+then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be set up.
+@param values Array of objects to be added as keys in the secondary node.
+********************************************************************/
+  public void set(Object key,Object[] values)
+  {
+	 data.put(key,new HashTree(values));
+  }
+
+/********************************************************************
+ Sets a key and it's values in the HashTree.  It sets up a key in the current node, and
+ then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be set up.
+@param values Collection of objects to be added as keys in the secondary node.
+**************************************************************************/
+  public void set(Object key,Collection values)
+  {
+	 data.put(key,new HashTree(values));
+  }
+
+/********************************************************************
+  Sets a series of keys into the HashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the second array are added as keys to the bottom-most node.
+@param key Array of keys to put into HashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(Object[] key,Object[] values)
+  {
+	 List keys = new LinkedList();
+	 for(int x = 0;x < key.length;keys.add(key[x++]));
+	 set(keys,values);
+  }
+
+/********************************************************************
+  Sets a series of keys into the HashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the Collection of values are added as keys to the bottom-most node.
+@param key Array of keys to put into HashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(Object[] key,Collection values)
+  {
+	 List keys = new LinkedList();
+	 for(int x = 0;x < key.length;keys.add(key[x++]));
+	 set(keys,values);
+  }
+
+/********************************************************************
+  Sets a series of keys into the HashTree.  It sets up the first object in the
+  key list as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the list.  Continues recursing in this
+  manner until the end of the first list is reached, at which point all the
+  values of the array of values are added as keys to the bottom-most node.
+@param key List of keys to put into HashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(List key,Object[] values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).set(key,values);
+	 }
+  }
+
+/********************************************************************
+  Sets a series of keys into the HashTree.  It sets up the first object in the
+  key list as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the list.  Continues recursing in this
+  manner until the end of the first list is reached, at which point all the
+  values of the Collection of values are added as keys to the bottom-most node.
+@param key List of keys to put into HashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(List key,Collection values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).set(key,values);
+	 }
+  }
+
+/********************************************************************
+  Sets a series of keys into the HashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the array of values are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into HashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(SortedSet key,Object[] values)
+  {
+	 Object temp;
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.first(),values);
+	 else
+	 {
+		temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).set(key,values);
+	 }
+  }
+
+/********************************************************************
+  Sets a series of keys into the HashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the Collection of values are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into HashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(SortedSet key,Collection values)
+  {
+	 Object temp;
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.first(),values);
+	 else
+	 {
+		temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).set(key,values);
+	 }
+  }
+
+/*********************************************************************
+Adds an key into the HashTree at the current level.
+@param key Key to be added to HashTree.
+*****************************************************************/
+  public void add(Object key)
+  {
+	 if(!data.containsKey(key))
+		data.put(key,new HashTree());
+  }
+
+/*******************************************************************
+Adds a bunch of keys into the HashTree at the current level.
+@param keys Array of Keys to be added to HashTree.
+*******************************************************************/
+  public void add(Object[] keys)
+  {
+	 for(int x = 0;x < keys.length;x++)
+		add(keys[x]);
+  }
+
+/*******************************************************************
+Adds a bunch of keys into the HashTree at the current level.
+@param keys Collection of Keys to be added to HashTree.
+*******************************************************************/
+  public void add(Collection keys)
+  {
+	 Iterator it = keys.iterator();
+	 while(it.hasNext())
+		add(it.next());
+  }
+
+/************************************************************************
+  Adds a key and it's value in the HashTree.  It actually adds  a key, and then
+  creates a node for the key and adds the value to the new node, as a key.
+@param key Key to be added.
+@param value Value to be added as a key in the secondary node.
+*************************************************************************/
+  public void add(Object key,Object value)
+  {
+	 if(!data.containsKey(key))
+		set(key,value);
+	 else
+		get(key).add(value);
+  }
+
+/************************************************************************
+Adds a key and it's values in the HashTree.  It Adds a key in the current node, and
+then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be added.
+@param values Array of objects to be added as keys in the secondary node.
+********************************************************************/
+  public void add(Object key,Object[] values)
+  {
+	 if(!data.containsKey(key))
+		set(key,values);
+	 else
+		get(key).add(values);
+  }
+
+/************************************************************************
+Adds a key and it's values in the HashTree.  It adds a key in the current node, and
+then creates a node for that key, and adds all the values in the Collection as keys in
+ the new node.
+@param key Key to be added.
+@param values Collection of objects to be added as keys in the secondary node.
+********************************************************************/
+  public void add(Object key,Collection values)
+  {
+	 if(!data.containsKey(key))
+		set(key,values);
+	 else
+		get(key).add(values);
+  }
+
+/********************************************************************
+  Adds a series of keys into the HashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the second array are added as keys to the bottom-most node.
+@param key Array of keys to put into HashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(Object[] key,Object[] values)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < key.length;list.add(key[x++]));
+	 add(list,values);
+  }
+
+/********************************************************************
+  Adds a series of keys into the HashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key Array of keys to put into HashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(Object[] key,Collection values)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < key.length;list.add(key[x++]));
+	 add(list,values);
+  }
+
+/********************************************************************
+  Adds a series of keys into the HashTree.  It sets up the first object in the
+  key List as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the List.  Continues recursing in this
+  manner until the end of the first List is reached, at which point all the
+  values of the second Array are added as keys to the bottom-most node.
+@param key List of keys to put into HashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(List key,Object[] values)
+  {
+	 if(key == null || key.size() == 0)
+	 {
+		add(values);
+		return;
+	 }
+	 else if(key.size() == 1)
+		add(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).add(key,values);
+	 }
+  }
+
+	 /********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key List as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the List.  Continues recursing in this
+  manner until the end of the first List is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key List of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(List key,Object value)
+  {
+	 if(key == null || key.size() == 0)
+	 {
+		add(value);
+		return;
+	 }
+	 else if(key.size() == 1)
+		  add(key.get(0),value);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).add(key,value);
+	 }
+  }
+
+/********************************************************************
+  Adds a series of keys into the HashTree.  It sets up the first object in the
+  key List as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the List.  Continues recursing in this
+  manner until the end of the first List is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key List of keys to put into HashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(List key,Collection values)
+  {
+	 if(key == null || key.size() == 0)
+	 {
+		add(values);
+		return;
+	 }
+	 else if(key.size() == 1)
+		add(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).add(key,values);
+	 }
+  }
+
+/********************************************************************
+  Adds a series of keys into the HashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the second Array are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into HashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(SortedSet key,Object[] values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		add(key.first(),values);
+	 else
+	 {
+		Object temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).add(key,values);
+	 }
+  }
+
+/********************************************************************
+  Adds a series of keys into the HashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next HashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into HashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(SortedSet key,Collection values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		add(key.first(),values);
+	 else
+	 {
+		Object temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).add(key,values);
+	 }
+  }
+
+/*********************************************************************
+Gets the HashTree object mapped to the given key.
+@param key Key used to find appropriate HashTree()
+********************************************************************/
+  public HashTree get(Object key)
+  {
+	 return (HashTree)data.get(key);
+  }
+
+/*************************************************************
+Gets the HashTree object mapped to the last key in the array by recursing through
+the HashTree structure one key at a time.
+@param keys Array of keys.
+@return HashTree at the end of the recursion.
+**************************************************************/
+  public HashTree get(Object[] keys)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < keys.length;list.add(keys[x++]));
+	 return get(list);
+  }
+
+/*************************************************************
+Gets the HashTree object mapped to the last key in the List by recursing through
+the HashTree structure one key at a time.
+@param keys List of keys.
+@return HashTree at the end of the recursion.
+**************************************************************/
+  public HashTree get(List keys)
+  {
+	 if(keys.size() == 1)
+		return get(keys.get(0));
+	 else if(keys.size() > 1)
+	 {
+		Object temp = keys.remove(0);
+		return get(temp).get(keys);
+	 }
+	 return new HashTree();
+  }
+
+/*************************************************************
+Gets the HashTree object mapped to the last key in the SortedSet by recursing through
+the HashTree structure one key at a time.
+@param keys SortedSet of keys.
+@return HashTree at the end of the recursion.
+**************************************************************/
+  public HashTree get(SortedSet keys)
+  {
+	 if(keys.size() == 1)
+		return get(keys.first());
+	 else if(keys.size() > 1)
+	 {
+		Object temp = keys.first();
+		keys.remove(temp);
+		return get(temp).get(keys);
+	 }
+	 return new HashTree();
+  }
+
+/****************************************************************
+Gets a Set of all keys in the current HashTree node.
+@return Set of all keys in this HashTree.
+*****************************************************************/
+  public Set list()
+  {
+	 return data.keySet();
+  }
+
+/***************************************************************
+  Gets a Set of all keys in the HashTree mapped to the given key of the
+  current HashTree object (in other words, one level down.
+@param key Key used to find HashTree to get list of.
+@return Set of all keys in found HashTree.
+***************************************************************/
+  public Set list(Object key)
+  {
+	 HashTree temp = (HashTree)data.get(key);
+	 if(temp != null)
+		return temp.list();
+	 else
+		return null;
+  }
+
+  public void remove(Object key)
+  {
+	 data.remove(key);
+  }
+
+/*************************************************************
+Recurses down into the HashTree stucture using each subsequent key in the
+array of keys, and returns the Set of keys of the HashTree object at the
+end of the recursion.
+@param keys Array of keys used to recurse into HashTree structure.
+@return Set of all keys found in end HashTree.
+**************************************************************/
+  public Set list(Object[] keys)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < keys.length;list.add(keys[x++]));
+	 return list(list);
+  }
+
+/*************************************************************
+Recurses down into the HashTree stucture using each subsequent key in the
+List of keys, and returns the Set of keys of the HashTree object at the
+end of the recursion.
+@param keys List of keys used to recurse into HashTree structure.
+@return Set of all keys found in end HashTree.
+**************************************************************/
+  public Set list(List keys)
+  {
+	 if(keys.size() == 0)
+		return list();
+	 else if(keys.size() == 1)
+		return get(keys.get(0)).list();
+	 else
+	 {
+		Object temp = keys.remove(0);
+		return get(temp).list(keys);
+	 }
+  }
+
+/*************************************************************
+Recurses down into the HashTree stucture using each subsequent key in the
+SortedSet of keys, and returns the Set of keys of the HashTree object at the
+end of the recursion.
+@param keys SortedSet of keys used to recurse into HashTree structure.
+@return Set of all keys found in end HashTree.
+**************************************************************/
+  public Set list(SortedSet keys)
+  {
+	 if(keys.size() == 0)
+		return list();
+	 else if(keys.size() == 1)
+		return get(keys.first()).list();
+	 else
+	 {
+		Object temp = keys.first();
+		keys.remove(temp);
+		return get(temp).list(keys);
+	 }
+  }
+
+/****************************************************************
+Gets an array of all keys in the current HashTree node.
+@return Array of all keys in this HashTree.
+*****************************************************************/
+  public Object[] getArray()
+  {
+	 return data.keySet().toArray();
+  }
+
+/***************************************************************
+  Gets an array of all keys in the HashTree mapped to the given key of the
+  current HashTree object (in other words, one level down.
+@param key Key used to find HashTree to get list of.
+@return Array of all keys in found HashTree.
+***************************************************************/
+  public Object[] getArray(Object key)
+  {
+	 return get(key).getArray();
+  }
+
+/*************************************************************
+Recurses down into the HashTree stucture using each subsequent key in the
+array of keys, and returns an array of keys of the HashTree object at the
+end of the recursion.
+@param keys Array of keys used to recurse into HashTree structure.
+@return Array of all keys found in end HashTree.
+**************************************************************/
+  public Object[] getArray(Object[] keys)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < keys.length;list.add(keys[x++]));
+	 return getArray(list);
+  }
+
+/*************************************************************
+Recurses down into the HashTree stucture using each subsequent key in the
+List of keys, and returns an array of keys of the HashTree object at the
+end of the recursion.
+@param keys List of keys used to recurse into HashTree structure.
+@return Array of all keys found in end HashTree.
+**************************************************************/
+  public Object[] getArray(List keys)
+  {
+	 if(keys.size() == 0)
+		return getArray();
+	 if(keys.size() == 1)
+		return getArray(keys.get(0));
+	 else
+	 {
+		Object temp = keys.remove(0);
+		return get(temp).getArray(keys);
+	 }
+  }
+
+/*************************************************************
+Recurses down into the HashTree stucture using each subsequent key in the
+SortedSet of keys, and returns an array of keys of the HashTree object at the
+end of the recursion.
+@param keys SortedSet of keys used to recurse into HashTree structure.
+@return Array of all keys found in end HashTree.
+**************************************************************/
+  public Object[] getArray(SortedSet keys)
+  {
+	 if(keys.size() == 0)
+		return getArray();
+	 if(keys.size() == 1)
+		return getArray(keys.first());
+	 else
+	 {
+		Object temp = keys.first();
+		keys.remove(temp);
+		return get(temp).getArray(keys);
+	 }
+  }
+
+  public int hashCode()
+  {
+	 return data.hashCode()*7;
+  }
+
+  public boolean equals(Object o)
+  {
+	 boolean flag = true;
+	 if(o instanceof HashTree)
+	 {
+		HashTree oo = (HashTree)o;
+		Iterator it = data.keySet().iterator();
+		while(it.hasNext())
+		{
+		  if(!oo.containsKey(it.next()))
+		  {
+			 flag = false;
+			 break;
+		  }
+		}
+		if(flag)
+		{
+		  it = data.keySet().iterator();
+		  while(it.hasNext())
+		  {
+			 Object temp = it.next();
+			 flag = get(temp).equals(oo.get(temp));
+			 if(!flag)
+				break;
+		  }
+		}
+	 }
+	 else
+		flag = false;
+	 return flag;
+  }
+
+  public Set keySet()
+  {
+	 return data.keySet();
+  }
+
+/*****************************************************
+Searches the HashTree structure for the given key.  If it finds the key,
+it returns the HashTree mapped to the key.  If it finds nothing, it returns
+null.
+@param key Key to search for.
+@return HashTree mapped to key, if found, otherwise <B>null</B>.
+**********************************************************/
+  public HashTree search(Object key)
+  {
+	 HashTree temp = null;
+	 if(data.containsKey(key))
+		temp = (HashTree)data.get(key);
+	 else
+	 {
+		Iterator it = list().iterator();
+		while(it.hasNext())
+		{
+		  if(temp == null)
+		  {
+			 temp = ((HashTree)it.next()).search(key);
+			 break;
+		  }
+		  else
+			 break;
+		}
+	 }
+	 return temp;
+  }
+
+
+
+
+  void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException
+  {
+	 ois.defaultReadObject();
+  }
+
+  void writeObject(ObjectOutputStream oos) throws IOException
+  {
+	 oos.defaultWriteObject();
+  }
+
+  public int size()
+  {
+	 return data.size();
+  }
+
+  private java.util.Map data;
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/JMeterUtils.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/JMeterUtils.java
new file mode 100644
index 0000000..77c2950
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/JMeterUtils.java
@@ -0,0 +1,998 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+
+
+package org.apache.jmeter.util;
+
+import java.awt.Dimension;
+import java.awt.event.ActionListener;
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.IOException;
+import java.io.InputStreamReader;
+import java.util.Enumeration;
+import java.util.Hashtable;
+import java.util.MissingResourceException;
+import java.util.Properties;
+import java.util.ResourceBundle;
+import java.util.StringTokenizer;
+import java.util.Vector;
+
+import javax.swing.ImageIcon;
+import javax.swing.JButton;
+import javax.swing.JComboBox;
+import javax.swing.JOptionPane;
+import javax.xml.parsers.SAXParserFactory;
+import org.apache.jmeter.gui.GuiPackage;
+import org.xml.sax.XMLReader;
+
+
+/**
+ *  This class contains the static utility methods used by JMeter.
+ *
+ *@author     <a href="mailto://stefano@apache.org">Stefano Mazzocchi</a>
+ *@created    June 28, 2001
+ *@version    $Revision: 1.2 $ $Date: 2002/08/11 23:19:53 $
+ */
+
+public class JMeterUtils
+{
+
+	 private static final SAXParserFactory xmlFactory;
+
+	 static {
+		  SAXParserFactory temp = null;
+		  try {
+				temp = SAXParserFactory.newInstance();
+		  } catch(Exception e) {
+		  e.printStackTrace();
+				temp = null;
+		  }
+
+		  xmlFactory = temp;
+	 }
+
+
+	 private static Properties appProperties;
+	 public static ResourceBundle RESOURCES = ResourceBundle.getBundle("org.apache.jmeter.resources.messages");
+
+
+	 /**
+	  *  This method is used by the init method to load the property file that may
+	  *  even reside in the user space, or in the classpath under
+	  *  org.apache.jmeter.jmeter.properties
+	  *
+	  *@param  file  Description of Parameter
+	  *@return       The Properties value
+	  */
+	 public static Properties getProperties(String file)
+	 {
+		  Properties p = new Properties(System.getProperties());
+		  try
+		  {
+				File f = new File(file);
+				p.load(new FileInputStream(f));
+		  }
+		  catch (Exception e)
+		  {
+				try
+				{
+					 p.load(JMeterUtils.class.getClassLoader().getSystemResourceAsStream("org/apache/jmeter/jmeter.properties"));
+				}
+				catch (IOException ex)
+				{
+					 //JMeter.fail("Could not read internal resource. Archive is broken.");
+				}
+		  }
+		  appProperties = p;
+		  return p;
+	 }
+
+	 /**
+	  *  Gets the resource string for this key.
+	  *  @param key the key in the resource file
+	  *  @return the resource string if the key is found; otherwise, return an empty string
+	  */
+	 public static String getResString(String key)
+	 {
+		if(key == null)
+		{
+			return null;
+		}
+		key = key.replace(' ','_');
+		key = key.toLowerCase();
+		  String resString = null;
+		  try
+		  {
+				resString = RESOURCES.getString(key);
+		  }
+		  catch (MissingResourceException mre)
+		  {
+				System.out.println("ERROR! Resource string not found: [" + key + "]");
+				resString = "";
+		  }
+		  return resString;
+	 }
+
+	 /**
+	  *  This gets the currently defined appProperties. It can only be called after
+	  *  the getProperties(String file) method is called.
+	  *
+	  *@return    The JMeterProperties value
+	  */
+	 public static Properties getJMeterProperties()
+	 {
+		  return appProperties;
+	 }
+
+	 /**
+	  *  This looks for the requested image in the classpath under
+	  *  org.apache.jmeter.images. <name>
+	  *
+	  *@param  name  Description of Parameter
+	  *@return       The Image value
+	  */
+	 public static ImageIcon getImage(String name)
+	 {
+		  try
+		  {
+				return new ImageIcon(JMeterUtils.class.getClassLoader().getResource(
+								  "org/apache/jmeter/images/" + name.trim()));
+		  }
+		  catch(NullPointerException e)
+		  {
+				System.out.println(name);
+				return null;
+		  }
+	 }
+	 
+	 public static String getResourceFileAsText(String name)
+	 {
+	 	try {
+			String lineEnd = System.getProperty("line.separator");
+		 	BufferedReader fileReader = new BufferedReader(new InputStreamReader(JMeterUtils.class.getClassLoader().getResourceAsStream(name)));
+		 	StringBuffer text = new StringBuffer();
+		 	String line = "NOTNULL";
+			while (line != null)
+			{
+				line = fileReader.readLine();
+				if (line != null)
+				{
+					text.append(line);
+					text.append(lineEnd);
+				}
+			}
+			return text.toString();
+		} catch(IOException e) {
+			return "";
+		}
+	 }
+
+	 /**
+	  *  Creates the vector of Timers plugins.
+	  *
+	  *@param  properties  Description of Parameter
+	  *@return             The Timers value
+	  */
+	 public static Vector getTimers(Properties properties)
+	 {
+		  return instantiate(getVector(properties, "timer."), "org.apache.jmeter.timers.Timer");
+	 }
+
+	 /**
+	  *  Creates the vector of visualizer plugins.
+	  *
+	  *@param  properties  Description of Parameter
+	  *@return             The Visualizers value
+	  */
+	 public static Vector getVisualizers(Properties properties)
+	 {
+		  return instantiate(getVector(properties, "visualizer."),
+					 "org.apache.jmeter.visualizers.Visualizer");
+	 }
+
+	 /**
+	  *  Creates a vector of SampleController plugins.
+	  *
+	  *@param  properties  The properties with information about the samplers
+	  *@return             The Controllers value
+	  */
+	 public static Vector getControllers(Properties properties)
+	 {
+		  String name = "controller.";
+		  Vector v = new Vector();
+		  Enumeration names = properties.keys();
+		  while (names.hasMoreElements())
+		  {
+				String prop = (String) names.nextElement();
+				if (prop.startsWith(name))
+				{
+					 Object o = instantiate(properties.getProperty(prop),
+								"org.apache.jmeter.control.SamplerController");
+					 v.addElement(o);
+				}
+		  }
+		  return v;
+	 }
+
+	 /**
+	  *  Create a string of class names for a particular SamplerController
+	  *
+	  *@param  properties  The properties with info about the samples.
+	  *@param  name        The name of the sampler controller.
+	  *@return             The TestSamples value
+	  */
+	 public static String[] getTestSamples(Properties properties, String name)
+	 {
+		  return (String[]) getVector(properties, name + ".testsample").toArray(new String[0]);
+	 }
+
+	 /**
+	  *  Create an instance of an org.xml.sax.Parser
+	  *
+	  * @deprecated use the plain version instead.  We are using JAXP!
+	  *@param  properties  The properties file containing the parser's class name
+	  *@return             The XMLParser value
+	  */
+	 public static XMLReader getXMLParser(Properties properties)
+	 {
+		  return getXMLParser();
+	 }
+
+	 /**
+	  *  Create an instance of an org.xml.sax.Parser based on the default props.
+	  *
+	  *@return    The XMLParser value
+	  */
+	 public static XMLReader getXMLParser()
+	 {
+		  XMLReader reader = null;
+
+		  try {
+		  	reader = (XMLReader) instantiate(getPropDefault("xml.parser", "org.apache.xerces.parsers.SAXParser"), "org.xml.sax.XMLReader");
+				//reader = xmlFactory.newSAXParser().getXMLReader();
+		  } catch (Exception e) {
+				reader = (XMLReader) instantiate(getPropDefault("xml.parser", "org.apache.xerces.parsers.SAXParser"), "org.xml.sax.XMLReader");
+		  }
+
+		  return reader;
+	 }
+
+	 /**
+	  *  Creates the vector of alias strings.
+	  *
+	  *@param  properties  Description of Parameter
+	  *@return             The Alias value
+	  */
+	 public static Hashtable getAlias(Properties properties)
+	 {
+		  return getHashtable(properties, "alias.");
+	 }
+
+	 /**
+	  *  Creates a vector of strings for all the properties that start with a common
+	  *  prefix.
+	  *
+	  *@param  properties  Description of Parameter
+	  *@param  name        Description of Parameter
+	  *@return             The Vector value
+	  */
+	 public static Vector getVector(Properties properties, String name)
+	 {
+		  Vector v = new Vector();
+		  Enumeration names = properties.keys();
+		  while (names.hasMoreElements())
+		  {
+				String prop = (String) names.nextElement();
+				if (prop.startsWith(name))
+				{
+					 v.addElement(properties.getProperty(prop));
+				}
+		  }
+		  return v;
+	 }
+
+	 /**
+	  *  Creates a vector of strings for all the properties that start with a common
+	  *  prefix.
+	  *
+	  *@param  properties  Description of Parameter
+	  *@param  name        Description of Parameter
+	  *@return             The Hashtable value
+	  */
+	 public static Hashtable getHashtable(Properties properties, String name)
+	 {
+		  Hashtable t = new Hashtable();
+		  Enumeration names = properties.keys();
+		  while (names.hasMoreElements())
+		  {
+				String prop = (String) names.nextElement();
+				if (prop.startsWith(name))
+				{
+					 t.put(prop.substring(name.length()), properties.getProperty(prop));
+				}
+		  }
+		  return t;
+	 }
+
+	 /**
+	  *  Get a int value with default if not present.
+	  *
+	  *@param  propName    the name of the property.
+	  *@param  defaultVal  the default value.
+	  *@return             The PropDefault value
+	  */
+	 public static int getPropDefault(String propName, int defaultVal)
+	 {
+		  int ans;
+		  try
+		  {
+				ans = (Integer.valueOf(
+						  appProperties.getProperty(propName, Integer.toString(defaultVal)).trim())).intValue();
+		  }
+		  catch (Exception e)
+		  {
+				ans = defaultVal;
+		  }
+		  return ans;
+	 }
+
+	 /**
+	  *  Get a boolean value with default if not present.
+	  *
+	  *@param  propName    the name of the property.
+	  *@param  defaultVal  the default value.
+	  *@return             The PropDefault value
+	  */
+	 public static boolean getPropDefault(String propName, boolean defaultVal)
+	 {
+		  boolean ans;
+		  try
+		  {
+				String strVal = appProperties.getProperty(propName,
+						  (new Boolean(defaultVal)).toString()).trim();
+				if (strVal.equalsIgnoreCase("true") || strVal.equalsIgnoreCase("t"))
+				{
+					 ans = true;
+				}
+				else if (strVal.equalsIgnoreCase("false") || strVal.equalsIgnoreCase("f"))
+				{
+					 ans = false;
+				}
+				else
+				{
+					 ans = ((Integer.valueOf(strVal)).intValue() == 1);
+				}
+		  }
+		  catch (Exception e)
+		  {
+				ans = defaultVal;
+		  }
+		  return ans;
+	 }
+
+	 /**
+	  *  Get a long value with default if not present.
+	  *
+	  *@param  propName    the name of the property.
+	  *@param  defaultVal  the default value.
+	  *@return             The PropDefault value
+	  */
+	 public static long getPropDefault(String propName, long defaultVal)
+	 {
+		  long ans;
+		  try
+		  {
+				ans = (Long.valueOf(appProperties.getProperty(propName, Long.toString(defaultVal)).trim())).longValue();
+		  }
+		  catch (Exception e)
+		  {
+				ans = defaultVal;
+		  }
+		  return ans;
+	 }
+
+	 /**
+	  *  Get a String value with default if not present.
+	  *
+	  *@param  propName    the name of the property.
+	  *@param  defaultVal  the default value.
+	  *@return             The PropDefault value
+	  */
+	 public static String getPropDefault(String propName, String defaultVal)
+	 {
+		  String ans;
+		  try
+		  {
+				ans = appProperties.getProperty(propName, defaultVal).trim();
+		  }
+		  catch (Exception e)
+		  {
+				ans = defaultVal;
+		  }
+		  return ans;
+	 }
+
+	 /**
+	  *  Sets the selection of the JComboBox to the Object 'name' from the list in
+	  *  namVec.
+	  *
+	  *@param  properties  Description of Parameter
+	  *@param  combo       Description of Parameter
+	  *@param  namVec      Description of Parameter
+	  *@param  name        Description of Parameter
+	  */
+
+	 public static void selJComboBoxItem(Properties properties, JComboBox combo, Vector namVec, String name)
+	 {
+
+		  int idx = namVec.indexOf(name);
+
+
+		  combo.setSelectedIndex(idx);
+
+
+		  // Redisplay.
+
+		  combo.updateUI();
+
+		  return;
+	 }
+
+
+	 /**
+	  *  Instatiate an object and guarantee its class.
+	  *
+	  *@param  className  The name of the class to instantiate.
+	  *@param  impls      The name of the class it subclases.
+	  *@return            Description of the Returned Value
+	  */
+
+	 public static Object instantiate(String className, String impls)
+	 {
+		  if (className != null) className.trim();
+		  if (impls != null) className.trim();
+
+		  try
+		  {
+
+				Class c = Class.forName(impls);
+
+
+				try
+				{
+
+					 Class o = Class.forName(className);
+
+
+					 Object res = o.newInstance();
+
+					 if (c.isInstance(res))
+					 {
+
+						  return res;
+					 }
+
+					 else
+					 {
+
+						  throw new IllegalArgumentException
+									 (className + " is not an instance of " + impls);
+					 }
+
+				}
+
+				catch (ClassNotFoundException e)
+				{
+
+					 System.err.println("Error loading class " +
+								className + ": class is not found");
+
+				}
+
+				catch (IllegalAccessException e)
+				{
+
+					 System.err.println("Error loading class " + className +
+								": does not have access");
+
+				}
+
+				catch (InstantiationException e)
+				{
+
+					 System.err.println("Error loading class " + className +
+								": could not instantiate");
+
+				}
+
+				catch (NoClassDefFoundError e)
+				{
+
+					 System.err.println("Error loading class " + className +
+								": couldn't find class " + e.getMessage());
+
+				}
+
+		  }
+
+		  catch (ClassNotFoundException e)
+		  {
+
+				System.err.println("Error loading class " + impls +
+						  ": was not found.");
+
+		  }
+
+		  return null;
+	 }
+
+
+	 /**
+	  *  Instantiate a vector of classes
+	  *
+	  *@param  v          Description of Parameter
+	  *@param  className  Description of Parameter
+	  *@return            Description of the Returned Value
+	  */
+
+	 public static Vector instantiate(Vector v, String className)
+	 {
+
+		  Vector i = new Vector();
+
+
+		  try
+		  {
+
+				Class c = Class.forName(className);
+
+				Enumeration elements = v.elements();
+
+				while (elements.hasMoreElements())
+				{
+
+					 String name = (String) elements.nextElement();
+
+					 try
+					 {
+
+						  Object o = Class.forName(name).newInstance();
+
+						  if (c.isInstance(o))
+						  {
+
+								i.addElement(o);
+
+						  }
+
+					 }
+
+					 catch (ClassNotFoundException e)
+					 {
+
+						  System.err.println("Error loading class " +
+									 name + ": class is not found");
+
+					 }
+
+					 catch (IllegalAccessException e)
+					 {
+
+						  System.err.println("Error loading class " + name + ": does not have access");
+
+					 }
+
+					 catch (InstantiationException e)
+					 {
+
+						  System.err.println("Error loading class " + name + ": could not instantiate");
+
+					 }
+
+					 catch (NoClassDefFoundError e)
+					 {
+
+						  System.err.println("Error loading class " + name + ": couldn't find class " + e.getMessage());
+
+					 }
+
+
+				}
+
+		  }
+		  catch (ClassNotFoundException e)
+		  {
+
+				System.err.println("Error loading class " + className + ": class is not found");
+
+		  }
+
+
+		  return i;
+	 }
+
+
+	 /**
+	  *  Tokenize a string into a vector of tokens
+	  *
+	  *@param  string     Description of Parameter
+	  *@param  separator  Description of Parameter
+	  *@return            Description of the Returned Value
+	  */
+
+	 public static Vector tokenize(String string, String separator)
+	 {
+
+		  Vector v = new Vector();
+
+		  StringTokenizer s = new StringTokenizer(string, separator);
+
+		  while (s.hasMoreTokens())
+		  {
+
+				v.addElement(s.nextToken());
+
+		  }
+
+		  return v;
+	 }
+
+
+	 /**
+	  *  Create a button with the netscape style
+	  *
+	  *@param  name      Description of Parameter
+	  *@param  listener  Description of Parameter
+	  *@return           Description of the Returned Value
+	  */
+
+	 public static JButton createButton(String name, ActionListener listener)
+	 {
+
+		  JButton button = new JButton(getImage(name + ".on.gif"));
+
+		  button.setDisabledIcon(getImage(name + ".off.gif"));
+
+		  button.setRolloverIcon(getImage(name + ".over.gif"));
+
+		  button.setPressedIcon(getImage(name + ".down.gif"));
+
+		  button.setActionCommand(name);
+
+		  button.addActionListener(listener);
+
+		  button.setRolloverEnabled(true);
+
+		  button.setFocusPainted(false);
+
+		  button.setBorderPainted(false);
+
+		  button.setOpaque(false);
+
+		  button.setPreferredSize(new Dimension(24, 24));
+
+		  return button;
+	 }
+
+
+	 /**
+	  *  Create a button with the netscape style
+	  *
+	  *@param  name      Description of Parameter
+	  *@param  listener  Description of Parameter
+	  *@return           Description of the Returned Value
+	  */
+
+	 public static JButton createSimpleButton(String name, ActionListener listener)
+	 {
+
+		  JButton button = new JButton(getImage(name + ".gif"));
+
+		  button.setActionCommand(name);
+
+		  button.addActionListener(listener);
+
+		  button.setFocusPainted(false);
+
+		  button.setBorderPainted(false);
+
+		  button.setOpaque(false);
+
+		  button.setPreferredSize(new Dimension(25, 25));
+
+		  return button;
+	 }
+
+
+	 /**
+	  *  Takes a String and a tokenizer character, and returns a new array of
+	  *  strings of the string split by the tokenizer character.
+	  *
+	  *@param  splittee   String to be split
+	  *@param  splitChar  Character to split the string on
+	  *@return            Array of all the tokens.
+	  */
+
+	 public static String[] split(String splittee, String splitChar)
+	 {
+		  if (splittee == null || splitChar == null)
+		  {
+				return new String[0];
+		  }
+		  StringTokenizer tokens;
+		  String temp;
+		  int spot;
+		  while ((spot = splittee.indexOf(splitChar + splitChar)) != -1)
+		  {
+				splittee = splittee.substring(0, spot + splitChar.length()) +
+						  splittee.substring(spot + 2 * splitChar.length(),
+						  splittee.length());
+		  }
+		  Vector returns = new Vector();
+		  int start = 0;
+		  int length = splittee.length();
+		  spot = 0;
+		  while (start < length && (spot = splittee.indexOf(splitChar, start)) > -1)
+		  {
+				if (spot > 0)
+				{
+					 returns.addElement(splittee.substring(start, spot));
+				}
+				start = spot + splitChar.length();
+		  }
+		  if (start < length)
+		  {
+				returns.add(splittee.substring(start));
+		  }
+		  String[] values = new String[returns.size()];
+		  returns.copyInto(values);
+		  return values;
+	 }
+	 // End Method
+
+
+	 /**
+	  *  Takes a String and a tokenizer character, and returns a new array of
+	  *  strings of the string split by the tokenizer character.
+	  *
+	  *@param  splittee   String to be split
+	  *@param  splitChar  Character to split the string on
+	  *@param  def        Default value to place between two split chars that have
+	  *      nothing between them
+	  *@return            Array of all the tokens.
+	  */
+
+	 public static String[] split(String splittee, String splitChar, String def)
+	 {
+		  if (splittee == null || splitChar == null)
+		  {
+				return new String[0];
+		  }
+		  StringTokenizer tokens;
+		  String temp;
+		  int spot;
+		  while ((spot = splittee.indexOf(splitChar + splitChar)) != -1)
+		  {
+				splittee = splittee.substring(0, spot + splitChar.length()) + def +
+						  splittee.substring(spot + 1 * splitChar.length(),
+						  splittee.length());
+		  }
+		  Vector returns = new Vector();
+		  int start = 0;
+		  int length = splittee.length();
+		  spot = 0;
+		  while (start < length && (spot = splittee.indexOf(splitChar, start)) > -1)
+		  {
+				if (spot > 0)
+				{
+					 returns.addElement(splittee.substring(start, spot));
+				}
+				start = spot + splitChar.length();
+		  }
+		  if (start < length)
+		  {
+				returns.add(splittee.substring(start));
+		  }
+		  String[] values = new String[returns.size()];
+		  returns.copyInto(values);
+		  return values;
+	 }
+
+	 /**
+	  *  Report an error through a dialog box.
+	  *
+	  *@param  errorMsg  the error message.
+	  */
+	 public static void reportErrorToUser(String errorMsg)
+	 {
+		  JOptionPane.showMessageDialog(GuiPackage.getInstance().getMainFrame(),
+					 errorMsg,"Error",JOptionPane.ERROR_MESSAGE);
+	 }
+
+	 /**
+	  *  Finds a string in an array of strings and returns the
+	  *
+	  *@param  array  Array of strings.
+	  *@param  value  String to compare to array values.
+	  *@return        Index of value in array, or -1 if not in array.
+	  */
+
+	 public static int findInArray(String[] array, String value)
+	 {
+		  int count = -1;
+		  int index = -1;
+		  if (array != null && value != null)
+		  {
+				while (++count < array.length)
+				{
+					 if (array[count] != null && array[count].equals(value))
+					 {
+						  index = count;
+						  break;
+					 }
+				}
+		  }
+		  return index;
+	 }
+
+
+	 /**
+	  *  Takes an array of strings and a tokenizer character, and returns a string
+	  *  of all the strings concatenated with the tokenizer string in between each
+	  *  one.
+	  *
+	  *@param  splittee   Array of Objects to be concatenated.
+	  *@param  splitChar  Object to unsplit the strings with.
+	  *@return            Array of all the tokens.
+	  */
+
+	 public static String unsplit(Object[] splittee, Object splitChar)
+	 {
+
+		  StringBuffer retVal = new StringBuffer("");
+
+		  int count = -1;
+
+		  while (++count < splittee.length)
+		  {
+
+				if (splittee[count] != null)
+				{
+
+					 retVal.append(splittee[count]);
+				}
+
+				if (count + 1 < splittee.length && splittee[count + 1] != null)
+				{
+
+					 retVal.append(splitChar);
+				}
+
+		  }
+
+		  return retVal.toString();
+	 }
+	 // End Method
+
+
+	 /**
+	  *  Takes an array of strings and a tokenizer character, and returns a string
+	  *  of all the strings concatenated with the tokenizer string in between each
+	  *  one.
+	  *
+	  *@param  splittee   Array of Objects to be concatenated.
+	  *@param  splitChar  Object to unsplit the strings with.
+	  *@param  def        Default value to replace null values in array.
+	  *@return            Array of all the tokens.
+	  */
+
+	 public static String unsplit(Object[] splittee, Object splitChar, String def)
+	 {
+
+		  StringBuffer retVal = new StringBuffer("");
+
+		  int count = -1;
+
+		  while (++count < splittee.length)
+		  {
+
+				if (splittee[count] != null)
+				{
+
+					 retVal.append(splittee[count]);
+				}
+
+				else
+				{
+
+					 retVal.append(def);
+				}
+
+				if (count + 1 < splittee.length)
+				{
+
+					 retVal.append(splitChar);
+				}
+
+		  }
+
+		  return retVal.toString();
+	 }
+	 // End Method
+	 
+	 public static String getJMeterHome()
+	 {
+	 	return jmDir;
+	 }
+	 
+	 public static void setJMeterHome(String home)
+	 {
+	 	jmDir = home;
+	 }
+	 private static String jmDir;
+
+
+	 /**
+	  * Gets the JMeter Version.
+	  * @returns the JMeter version.
+	  */
+	 public static String getJMeterVersion()
+	 {
+		  return "@VERSION@";
+	 }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/JsseSSLManager.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/JsseSSLManager.java
new file mode 100644
index 0000000..d45f5ad
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/JsseSSLManager.java
@@ -0,0 +1,445 @@
+/*
+ *  ====================================================================
+ *  The Apache Software License, Version 1.1
+ *
+ *  Copyright (c) 2001 The Apache Software Foundation.  All rights
+ *  reserved.
+ *
+ *  Redistribution and use in source and binary forms, with or without
+ *  modification, are permitted provided that the following conditions
+ *  are met:
+ *
+ *  1. Redistributions of source code must retain the above copyright
+ *  notice, this list of conditions and the following disclaimer.
+ *
+ *  2. Redistributions in binary form must reproduce the above copyright
+ *  notice, this list of conditions and the following disclaimer in
+ *  the documentation and/or other materials provided with the
+ *  distribution.
+ *
+ *  3. The end-user documentation included with the redistribution,
+ *  if any, must include the following acknowledgment:
+ *  "This product includes software developed by the
+ *  Apache Software Foundation (http://www.apache.org/)."
+ *  Alternately, this acknowledgment may appear in the software itself,
+ *  if and wherever such third-party acknowledgments normally appear.
+ *
+ *  4. The names "Apache" and "Apache Software Foundation" and
+ *  "Apache JMeter" must not be used to endorse or promote products
+ *  derived from this software without prior written permission. For
+ *  written permission, please contact apache@apache.org.
+ *
+ *  5. Products derived from this software may not be called "Apache",
+ *  "Apache JMeter", nor may "Apache" appear in their name, without
+ *  prior written permission of the Apache Software Foundation.
+ *
+ *  THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ *  WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ *  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ *  DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ *  ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ *  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ *  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ *  USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ *  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ *  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ *  SUCH DAMAGE.
+ *  ====================================================================
+ *
+ *  This software consists of voluntary contributions made by many
+ *  individuals on behalf of the Apache Software Foundation.  For more
+ *  information on the Apache Software Foundation, please see
+ *  <http://www.apache.org/>.
+ */
+package org.apache.jmeter.util;
+
+import com.sun.net.ssl.*;
+
+import java.io.File;
+import java.io.FileInputStream;
+import java.net.HttpURLConnection;
+import java.security.SecureRandom;
+import java.security.Provider;
+import java.security.Principal;
+import java.security.PrivateKey;
+import java.security.KeyStore;
+import java.security.cert.X509Certificate;
+
+import org.apache.jmeter.util.keystore.JmeterKeyStore;
+
+/**
+ *  The SSLManager handles the KeyStore information for JMeter. Basically, it
+ *  handles all the logic for loading and initializing all the JSSE parameters
+ *  and selecting the alias to authenticate against if it is available.
+ *  SSLManager will try to automatically select the client certificate for you,
+ *  but if it can't make a decision, it will pop open a dialog asking you for
+ *  more information.
+ *
+ *@author     <a href="bloritsch@apache.org">Berin Loritsch</a>
+ *@created    March 21, 2002
+ *@version    CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:49 $
+ */
+public class JsseSSLManager extends SSLManager
+{
+	/**
+	 *  Cache the SecureRandom instance because it takes a long time to create
+	 */
+	private SecureRandom rand;
+	/**
+	 *  Cache the Context so we can retrieve it from other places
+	 */
+	private SSLContext context = null;
+	private Provider pro = null;
+
+
+	/**
+	 *  Private Constructor to remove the possibility of directly instantiating
+	 *  this object. Create the SSLContext, and wrap all the X509KeyManagers with
+	 *  our X509KeyManager so that we can choose our alias.
+	 *
+	 *@param  provider  Description of Parameter
+	 */
+	public JsseSSLManager(Provider provider)
+	{
+		setProvider(provider);
+		try
+		{
+			Class iaikProvider = SSLManager.class.getClassLoader().loadClass("iaik.security.jsse.provider.IAIKJSSEProvider");
+			setProvider((Provider) iaikProvider.newInstance());
+		}
+		catch (Exception e)
+		{}
+		try
+		{
+			Class sunProvider = SSLManager.class.getClassLoader().loadClass("com.sun.net.ssl.internal.ssl.Provider");
+			setProvider((Provider) sunProvider.newInstance());
+		}
+		catch (Exception e)
+		{}
+
+		if (null == this.rand)
+		{
+			this.rand = new SecureRandom();
+		}
+
+		if ("all".equalsIgnoreCase(JMeterUtils.getPropDefault("javax.net.debug", "none")))
+		{
+			System.setProperty("javax.net.debug", "all");
+		}
+
+		this.getContext();
+		System.out.println("JsseSSLManager installed");
+	}
+
+
+	/**
+	 *  Sets the Context attribute of the JsseSSLManager object
+	 *
+	 *@param  conn  The new Context value
+	 */
+	public void setContext(HttpURLConnection conn)
+	{
+		HttpsURLConnection secureConn = (HttpsURLConnection) conn;
+		secureConn.setSSLSocketFactory(this.getContext().getSocketFactory());
+	}
+
+
+	/**
+	 *  Sets the Provider attribute of the JsseSSLManager object
+	 *
+	 *@param  p  The new Provider value
+	 */
+	protected final void setProvider(Provider p)
+	{
+		super.setProvider(p);
+		if (null == this.pro)
+		{
+			this.pro = p;
+		}
+	}
+
+
+	/**
+	 *  Returns the SSLContext we are using. It is useful for obtaining the
+	 *  SSLSocketFactory so that your created sockets are authenticated.
+	 *
+	 *@return    The Context value
+	 */
+	private SSLContext getContext()
+	{
+		if (null == this.context)
+		{
+			try
+			{
+				this.context = SSLContext.getInstance("TLS", this.pro);
+			}
+			catch (Exception e)
+			{
+				try
+				{
+					this.context = SSLContext.getInstance("TLS");
+				}
+				catch (Exception ee)
+				{}
+			}
+
+			try
+			{
+				KeyManagerFactory managerFactory = KeyManagerFactory.getInstance("SunX509");
+				JmeterKeyStore keys = this.getKeyStore();
+				managerFactory.init(null, this.defaultpw.toCharArray());
+				KeyManager[] managers = managerFactory.getKeyManagers();
+				System.out.println(keys.getClass().toString());
+
+				for (int i = 0; i < managers.length; i++)
+				{
+					if (managers[i] instanceof X509KeyManager)
+					{
+						X509KeyManager manager = (X509KeyManager) managers[i];
+						managers[i] = new WrappedX509KeyManager(manager, keys);
+					}
+				}
+
+				TrustManager[] trusts = new TrustManager[]{new AlwaysTrustManager(this.getTrustStore())};
+				context.init(managers, trusts, this.rand);
+				HttpsURLConnection.setDefaultSSLSocketFactory(context.getSocketFactory());
+			}
+			catch (Exception e)
+			{
+			}
+
+			String[] dCiphers = this.context.getSocketFactory().getDefaultCipherSuites();
+			String[] sCiphers = this.context.getSocketFactory().getSupportedCipherSuites();
+			int len = (dCiphers.length > sCiphers.length) ? dCiphers.length : sCiphers.length;
+			for (int i = 0; i < len; i++)
+			{
+				if (i < dCiphers.length)
+				{
+					System.out.println("Default Cipher: " + dCiphers[i]);
+				}
+				if (i < sCiphers.length)
+				{
+					System.out.println("Supported Cipher: " + sCiphers[i]);
+				}
+			}
+		}
+
+		return this.context;
+	}
+
+
+	/**
+	 *  Description of the Class
+	 *
+	 *@author     MStover
+	 *@created    March 21, 2002
+	 */
+	protected static class AlwaysTrustManager implements X509TrustManager
+	{
+		/**
+		 *  Description of the Field
+		 */
+		protected X509Certificate[] certs;
+
+
+		/**
+		 *  Constructor for the AlwaysTrustManager object
+		 *
+		 *@param  store  Description of Parameter
+		 */
+		public AlwaysTrustManager(KeyStore store)
+		{
+			try
+			{
+				java.util.Enumeration enum = store.aliases();
+				java.util.ArrayList list = new java.util.ArrayList(store.size());
+				while (enum.hasMoreElements())
+				{
+					String alias = (String) enum.nextElement();
+					System.out.print("AlwaysTrustManager alias: " + alias);
+
+					if (store.isCertificateEntry(alias))
+					{
+						list.add(store.getCertificate(alias));
+						System.out.println(" INSTALLED");
+					} else
+					{
+						System.out.println(" SKIPPED");
+					}
+				}
+				this.certs = (X509Certificate[]) list.toArray(new X509Certificate[]{});
+			}
+			catch (Exception e)
+			{
+				this.certs = null;
+			}
+		}
+
+
+		/**
+		 *  Gets the AcceptedIssuers attribute of the AlwaysTrustManager object
+		 *
+		 *@return    The AcceptedIssuers value
+		 */
+		public X509Certificate[] getAcceptedIssuers()
+		{
+			System.out.println("Get accepted Issuers");
+			return certs;
+		}
+
+
+		/**
+		 *  Gets the ClientTrusted attribute of the AlwaysTrustManager object
+		 *
+		 *@param  chain  Description of Parameter
+		 *@return        The ClientTrusted value
+		 */
+		public boolean isClientTrusted(X509Certificate[] chain)
+		{
+			System.out.println("Is client trusted ???");
+			return true;
+		}
+
+
+		/**
+		 *  Gets the ServerTrusted attribute of the AlwaysTrustManager object
+		 *
+		 *@param  chain  Description of Parameter
+		 *@return        The ServerTrusted value
+		 */
+		public boolean isServerTrusted(X509Certificate[] chain)
+		{
+			System.out.println("Is server trusted ???");
+			return true;
+		}
+	}
+
+
+	/**
+	 *  This is the X509KeyManager we have defined for the sole purpose of selecing
+	 *  the proper key and certificate based on the keystore available.
+	 *
+	 *@author     MStover
+	 *@created    March 21, 2002
+	 */
+	private static class WrappedX509KeyManager implements X509KeyManager
+	{
+		/**
+		 *  The parent X509KeyManager
+		 */
+		private final X509KeyManager manager;
+		/**
+		 *  The KeyStore this KeyManager uses
+		 */
+		private final JmeterKeyStore store;
+
+
+		/**
+		 *  Instantiate a new WrappedX509KeyManager.
+		 *
+		 *@param  parent  The parent X509KeyManager
+		 *@param  ks      The KeyStore we derive our client certs and keys from
+		 */
+		public WrappedX509KeyManager(X509KeyManager parent, JmeterKeyStore ks)
+		{
+			this.manager = parent;
+			this.store = ks;
+		}
+
+
+		/**
+		 *  Compiles the list of all client aliases with a private key. Currently,
+		 *  keyType and issuers are both ignored.
+		 *
+		 *@param  keyType  The type of private key the server expects (RSA, DSA, etc.)
+		 *@param  issuers  The CA certificates we are narrowing our selection on.
+		 *@return          The ClientAliases value
+		 */
+		public String[] getClientAliases(String keyType, Principal[] issuers)
+		{
+			System.out.println("WrappedX509Manager: getClientAliases: ");
+			System.out.println(new String[]{this.store.getAlias()});
+			return new String[]{this.store.getAlias()};
+		}
+
+
+		/**
+		 *  Get the list of server aliases for the SSLServerSockets. This is not used
+		 *  in JMeter.
+		 *
+		 *@param  keyType  The type of private key the server expects (RSA, DSA, etc.)
+		 *@param  issuers  The CA certificates we are narrowing our selection on.
+		 *@return          The ServerAliases value
+		 */
+		public String[] getServerAliases(String keyType, Principal[] issuers)
+		{
+			System.out.println("WrappedX509Manager: getServerAliases: ");
+			System.out.println(this.manager.getServerAliases(keyType, issuers));
+			return this.manager.getServerAliases(keyType, issuers);
+		}
+
+
+		/**
+		 *  Get the Certificate chain for a particular alias
+		 *
+		 *@param  alias  The client alias
+		 *@return        The CertificateChain value
+		 */
+		public X509Certificate[] getCertificateChain(String alias)
+		{
+			System.out.println("WrappedX509Manager: getCertificateChain(" + alias + ")");
+			System.out.println(this.store.getCertificateChain());
+			return this.store.getCertificateChain();
+		}
+
+
+		/**
+		 *  Get the Private Key for a particular alias
+		 *
+		 *@param  alias  The client alias
+		 *@return        The PrivateKey value
+		 */
+		public PrivateKey getPrivateKey(String alias)
+		{
+			System.out.println("WrappedX509Manager: getPrivateKey: " + this.store.getPrivateKey());
+			return this.store.getPrivateKey();
+		}
+
+
+		/**
+		 *  Select the Alias we will authenticate as if Client authentication is
+		 *  required by the server we are connecting to. We get the list of aliases,
+		 *  and if there is only one alias we automatically select it. If there are
+		 *  more than one alias that has a private key, we prompt the user to choose
+		 *  which alias using a combo box. Otherwise, we simply provide a text box,
+		 *  which may or may not work. The alias does have to match one in the
+		 *  keystore.
+		 *
+		 *@param  keyType  The type of private key the server expects (RSA, DSA, etc.)
+		 *@param  issuers  The CA certificates we are narrowing our selection on.
+		 *@return          Description of the Returned Value
+		 */
+		public String chooseClientAlias(String keyType, Principal[] issuers)
+		{
+			System.out.println("Alias: " + this.store.getAlias());
+			return this.store.getAlias();
+		}
+
+
+		/**
+		 *  Choose the server alias for the SSLServerSockets. This are not used in
+		 *  JMeter.
+		 *
+		 *@param  keyType  The type of private key the server expects (RSA, DSA, etc.)
+		 *@param  issuers  The CA certificates we are narrowing our selection on.
+		 *@return          Description of the Returned Value
+		 */
+		public String chooseServerAlias(String keyType, Principal[] issuers)
+		{
+			System.out.println("WrappedX509Manager: chooseServerAlias: " +
+					this.manager.chooseServerAlias(keyType, issuers));
+			return this.manager.chooseServerAlias(keyType, issuers);
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/ListedHashTree.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/ListedHashTree.java
new file mode 100644
index 0000000..f088ef9
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/ListedHashTree.java
@@ -0,0 +1,1211 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.util;
+import java.io.*;
+import java.util.*;
+
+/****************************************
+ * This class is used to create a tree structure of objects. Each element in the
+ * tree is also a key to the next node down in the tree. In the ListedHashTree,
+ * the order in which values are added is preserved (not to be confused with
+ * SortedHashTree, which sorts the order of the values using the compare()
+ * function).
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:49 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class ListedHashTree implements Serializable,Cloneable
+{
+
+	private java.util.Map data;
+	private List order;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ListedHashTree()
+	{
+		data = new HashMap();
+		order = new LinkedList();
+	}
+	
+	public Object clone()
+	{
+		ListedHashTree newTree = new ListedHashTree();
+		newTree.data = (Map)((HashMap)data).clone();
+		newTree.order = (List)((LinkedList)order).clone();
+		return newTree;
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param key  !ToDo (Parameter description)
+	 ***************************************/
+	public ListedHashTree(Object key)
+	{
+		data = new HashMap();
+		order = new LinkedList();
+		data.put(key, new ListedHashTree());
+		order.add(key);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param keys  !ToDo (Parameter description)
+	 ***************************************/
+	public ListedHashTree(Collection keys)
+	{
+		data = new HashMap();
+		order = new LinkedList();
+		Iterator it = keys.iterator();
+		while(it.hasNext())
+		{
+			Object temp = it.next();
+			data.put(temp, new ListedHashTree());
+			order.add(temp);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param keys  !ToDo (Parameter description)
+	 ***************************************/
+	public ListedHashTree(Object[] keys)
+	{
+		data = new HashMap();
+		order = new LinkedList();
+		for(int x = 0; x < keys.length; x++)
+		{
+			data.put(keys[x], new ListedHashTree());
+			order.add(keys[x]);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param visitor  !ToDo (Parameter description)
+	 ***************************************/
+	public void traverse(ListedHashTreeVisitor visitor)
+	{
+		Iterator iter = list().iterator();
+		while(iter.hasNext())
+		{
+			Object item = iter.next();
+			visitor.addNode(item, get(item));
+			get(item).traverseInto(visitor);
+		}
+	}
+
+	private void traverseInto(ListedHashTreeVisitor visitor)
+	{
+		Iterator iter = list().iterator();
+		while(iter.hasNext())
+		{
+			Object item = iter.next();
+			visitor.addNode(item, get(item));
+			get(item).traverseInto(visitor);
+		}
+		if(list().size() == 0)
+		{
+			visitor.processPath();
+		}
+		visitor.subtractNode();
+	}
+
+	/****************************************
+	 * If the ListedHashTree contains the given object as a key at the top level,
+	 * then a true result is returned, otherwise false.
+	 *
+	 *@param o    !ToDo (Parameter description)
+	 *@return     True if the ListedHashTree contains the key, false otherwise.
+	 ***************************************/
+	public boolean containsKey(Object o)
+	{
+		return data.containsKey(o);
+	}
+
+	/****************************************
+	 * If the ListedHashTree is empty, true is returned, false otherwise.
+	 *
+	 *@return   True if ListedHashTree is empty, false otherwise.
+	 ***************************************/
+	public boolean isEmpty()
+	{
+		return data.isEmpty();
+	}
+
+	/****************************************
+	 * Sets a key and it's value in the ListedHashTree. It actually sets up a key,
+	 * and then creates a node for the key and adds the value to the new node, as a
+	 * key.
+	 *
+	 *@param key    Key to be set up.
+	 *@param value  Value to be set up as a key in the secondary node.
+	 ***************************************/
+	public void set(Object key, Object value)
+	{
+		data.put(key, new ListedHashTree(value));
+		order.add(key);
+	}
+
+	/****************************************
+	 * Sets a key and it's values in the ListedHashTree. It sets up a key in the
+	 * current node, and then creates a node for that key, and adds all the values
+	 * in the array as keys in the new node.
+	 *
+	 *@param key   Key to be set up.
+	 *@param t     !ToDo (Parameter description)
+	 ***************************************/
+	public void set(Object key, ListedHashTree t)
+	{
+		if(!data.containsKey(key))
+		{
+			order.add(key);
+		}
+		data.put(key, t);
+	}
+
+	/****************************************
+	 * Sets a key and it's values in the ListedHashTree. It sets up a key in the
+	 * current node, and then creates a node for that key, and adds all the values
+	 * in the array as keys in the new node.
+	 *
+	 *@param key     Key to be set up.
+	 *@param values  Array of objects to be added as keys in the secondary node.
+	 ***************************************/
+	public void set(Object key, Object[] values)
+	{
+		data.put(key, new ListedHashTree(values));
+		order.add(key);
+	}
+
+	/****************************************
+	 * Sets a key and it's values in the ListedHashTree. It sets up a key in the
+	 * current node, and then creates a node for that key, and adds all the values
+	 * in the array as keys in the new node.
+	 *
+	 *@param key     Key to be set up.
+	 *@param values  Collection of objects to be added as keys in the secondary
+	 *      node.
+	 ***************************************/
+	public void set(Object key, Collection values)
+	{
+		data.put(key, new ListedHashTree(values));
+		order.add(key);
+	}
+
+	/****************************************
+	 * Sets a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key array as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the
+	 * array. Continues recursing in this manner until the end of the first array
+	 * is reached, at which point all the values of the second array are added as
+	 * keys to the bottom-most node.
+	 *
+	 *@param key     Array of keys to put into ListedHashTree.
+	 *@param values  Array of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void set(Object[] key, Object[] values)
+	{
+		List keys = new LinkedList();
+		for(int x = 0; x < key.length; keys.add(key[x++]))
+		{
+			;
+		}
+		set(keys, values);
+	}
+
+	/****************************************
+	 * Sets a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key array as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the
+	 * array. Continues recursing in this manner until the end of the first array
+	 * is reached, at which point all the values of the Collection of values are
+	 * added as keys to the bottom-most node.
+	 *
+	 *@param key     Array of keys to put into ListedHashTree.
+	 *@param values  Collection of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void set(Object[] key, Collection values)
+	{
+		List keys = new LinkedList();
+		for(int x = 0; x < key.length; keys.add(key[x++]))
+		{
+			;
+		}
+		set(keys, values);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param values  !ToDo (Parameter description)
+	 ***************************************/
+	public void set(Collection values)
+	{
+		Iterator iter = this.list().iterator();
+		while(iter.hasNext())
+		{
+			this.remove(iter.next());
+		}
+		this.add(values);
+	}
+
+	/****************************************
+	 * Sets a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key list as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the list.
+	 * Continues recursing in this manner until the end of the first list is
+	 * reached, at which point all the values of the array of values are added as
+	 * keys to the bottom-most node.
+	 *
+	 *@param key     List of keys to put into ListedHashTree.
+	 *@param values  Array of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void set(List key, Object[] values)
+	{
+		if(key.size() == 0)
+		{
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			set(key.get(0), values);
+		}
+		else
+		{
+			Object temp = key.get(0);
+			add(temp, key.get(1));
+			get(temp).set(key.subList(1, key.size()), values);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param currentKey  !ToDo (Parameter description)
+	 *@param newKey      !ToDo (Parameter description)
+	 ***************************************/
+	public void replace(Object currentKey, Object newKey)
+	{
+		ListedHashTree tree = this.get(currentKey);
+		data.remove(currentKey);
+		data.put(newKey, tree);
+		order.set(order.indexOf(currentKey), newKey);
+	}
+
+	/****************************************
+	 * Sets a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key list as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the list.
+	 * Continues recursing in this manner until the end of the first list is
+	 * reached, at which point all the values of the Collection of values are added
+	 * as keys to the bottom-most node.
+	 *
+	 *@param key     List of keys to put into ListedHashTree.
+	 *@param values  Collection of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void set(List key, Collection values)
+	{
+		if(key.size() == 0)
+		{
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			set(key.get(0), values);
+		}
+		else
+		{
+			Object temp = key.get(0);
+			add(temp, key.get(1));
+			get(temp).set(key.subList(1, key.size()), values);
+		}
+	}
+
+	/****************************************
+	 * Adds an key into the ListedHashTree at the current level.
+	 *
+	 *@param key  Key to be added to ListedHashTree.
+	 ***************************************/
+	public void add(Object key)
+	{
+		if(!data.containsKey(key))
+		{
+			data.put(key, new ListedHashTree());
+			order.add(key);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param key      !ToDo (Parameter description)
+	 *@param subTree  !ToDo (Parameter description)
+	 ***************************************/
+	public void add(Object key, ListedHashTree subTree)
+	{
+		Iterator iter = subTree.list().iterator();
+		while(iter.hasNext())
+		{
+			Object item = iter.next();
+			add(key, item);
+			get(key).set(item, subTree.get(item));
+		}
+	}
+
+	/****************************************
+	 * Adds a bunch of keys into the ListedHashTree at the current level.
+	 *
+	 *@param keys  Array of Keys to be added to ListedHashTree.
+	 ***************************************/
+	public void add(Object[] keys)
+	{
+		for(int x = 0; x < keys.length; x++)
+		{
+			add(keys[x]);
+		}
+	}
+
+	/****************************************
+	 * Adds a bunch of keys into the ListedHashTree at the current level.
+	 *
+	 *@param keys  Collection of Keys to be added to ListedHashTree.
+	 ***************************************/
+	public void add(Collection keys)
+	{
+		Iterator it = keys.iterator();
+		while(it.hasNext())
+		{
+			add(it.next());
+		}
+	}
+
+	/****************************************
+	 * Adds a key and it's value in the ListedHashTree. It actually adds a key, and
+	 * then creates a node for the key and adds the value to the new node, as a
+	 * key.
+	 *
+	 *@param key    Key to be added.
+	 *@param value  Value to be added as a key in the secondary node.
+	 ***************************************/
+	public void add(Object key, Object value)
+	{
+		if(!data.containsKey(key))
+		{
+			set(key, value);
+		}
+		else
+		{
+			get(key).add(value);
+		}
+	}
+
+	/****************************************
+	 * Adds a key and it's values in the ListedHashTree. It Adds a key in the
+	 * current node, and then creates a node for that key, and adds all the values
+	 * in the array as keys in the new node.
+	 *
+	 *@param key     Key to be added.
+	 *@param values  Array of objects to be added as keys in the secondary node.
+	 ***************************************/
+	public void add(Object key, Object[] values)
+	{
+		if(!data.containsKey(key))
+		{
+			set(key, values);
+		}
+		else
+		{
+			get(key).add(values);
+		}
+	}
+
+	/****************************************
+	 * Adds a key and it's values in the ListedHashTree. It adds a key in the
+	 * current node, and then creates a node for that key, and adds all the values
+	 * in the Collection as keys in the new node.
+	 *
+	 *@param key     Key to be added.
+	 *@param values  Collection of objects to be added as keys in the secondary
+	 *      node.
+	 ***************************************/
+	public void add(Object key, Collection values)
+	{
+		if(!data.containsKey(key))
+		{
+			set(key, values);
+		}
+		else
+		{
+			get(key).add(values);
+		}
+	}
+
+	/****************************************
+	 * Adds a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key array as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the
+	 * array. Continues recursing in this manner until the end of the first array
+	 * is reached, at which point all the values of the second array are added as
+	 * keys to the bottom-most node.
+	 *
+	 *@param key     Array of keys to put into ListedHashTree.
+	 *@param values  Array of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void add(Object[] key, Object[] values)
+	{
+		List list = new LinkedList();
+		for(int x = 0; x < key.length; list.add(key[x++]))
+		{
+			;
+		}
+		add(list, values);
+	}
+
+	/****************************************
+	 * Adds a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key array as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the
+	 * array. Continues recursing in this manner until the end of the first array
+	 * is reached, at which point all the values of the second Collection are added
+	 * as keys to the bottom-most node.
+	 *
+	 *@param key     Array of keys to put into ListedHashTree.
+	 *@param values  Collection of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void add(Object[] key, Collection values)
+	{
+		List list = new LinkedList();
+		for(int x = 0; x < key.length; list.add(key[x++]))
+		{
+			;
+		}
+		add(list, values);
+	}
+
+	/****************************************
+	 * Adds a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key List as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the List.
+	 * Continues recursing in this manner until the end of the first List is
+	 * reached, at which point all the values of the second Array are added as keys
+	 * to the bottom-most node.
+	 *
+	 *@param key     List of keys to put into ListedHashTree.
+	 *@param values  Array of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void add(List key, Object[] values)
+	{
+		if(key == null || key.size() == 0)
+		{
+			add(values);
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			add(key.get(0), values);
+		}
+		else
+		{
+			Object temp = key.get(0);
+			add(temp, key.get(1));
+			get(temp).add(key.subList(1, key.size()), values);
+		}
+	}
+
+	/****************************************
+	 * Adds a series of keys into the SortedListedHashTree. It sets up the first
+	 * object in the key List as a key in the current node, recurses into the next
+	 * SortedListedHashTree node through that key and adds the second object in the
+	 * List. Continues recursing in this manner until the end of the first List is
+	 * reached, at which point all the values of the second Collection are added as
+	 * keys to the bottom-most node.
+	 *
+	 *@param key     List of keys to put into SortedListedHashTree.
+	 *@param value   !ToDo (Parameter description)
+	 ***************************************/
+	public void add(List key, Object value)
+	{
+		if(key == null || key.size() == 0)
+		{
+			add(value);
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			add(key.get(0), value);
+		}
+		else
+		{
+			Object temp = key.get(0);
+			add(temp, key.get(1));
+			get(temp).add(key.subList(1, key.size()), value);
+		}
+	}
+
+	/****************************************
+	 * Adds a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key List as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the List.
+	 * Continues recursing in this manner until the end of the first List is
+	 * reached, at which point all the values of the second Collection are added as
+	 * keys to the bottom-most node.
+	 *
+	 *@param key     List of keys to put into ListedHashTree.
+	 *@param values  Collection of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void add(List key, Collection values)
+	{
+		if(key == null || key.size() == 0)
+		{
+			add(values);
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			add(key.get(0), values);
+		}
+		else
+		{
+			Object temp = key.get(0);
+			add(temp, key.get(1));
+			get(temp).add(key.subList(1, key.size()), values);
+		}
+	}
+
+	/****************************************
+	 * Adds a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key SortedSet as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the
+	 * SortedSet. Continues recursing in this manner until the end of the first
+	 * SortedSet is reached, at which point all the values of the second Array are
+	 * added as keys to the bottom-most node.
+	 *
+	 *@param key     SortedSet of keys to put into ListedHashTree.
+	 *@param values  Array of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void add(SortedSet key, Object[] values)
+	{
+		if(key.size() == 0)
+		{
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			add(key.first(), values);
+		}
+		else
+		{
+			Iterator iter = key.iterator();
+			Object previous = null;
+			ListedHashTree tree = this;
+			while(iter.hasNext())
+			{
+				Object item = iter.next();
+				if(previous == null)
+				{
+					previous = item;
+				}
+				else
+				{
+					tree.add(previous, item);
+					tree = tree.get(item);
+				}
+			}
+			tree.add(values);
+		}
+	}
+
+	/****************************************
+	 * Adds a series of keys into the ListedHashTree. It sets up the first object
+	 * in the key SortedSet as a key in the current node, recurses into the next
+	 * ListedHashTree node through that key and adds the second object in the
+	 * SortedSet. Continues recursing in this manner until the end of the first
+	 * SortedSet is reached, at which point all the values of the second Collection
+	 * are added as keys to the bottom-most node.
+	 *
+	 *@param key     SortedSet of keys to put into ListedHashTree.
+	 *@param values  Collection of values to be added as keys to bottom-most node.
+	 ***************************************/
+	public void add(SortedSet key, Collection values)
+	{
+		if(key.size() == 0)
+		{
+			return;
+		}
+		else if(key.size() == 1)
+		{
+			add(key.first(), values);
+		}
+		else
+		{
+			Iterator iter = key.iterator();
+			Object previous = null;
+			ListedHashTree tree = this;
+			while(iter.hasNext())
+			{
+				Object item = iter.next();
+				if(previous == null)
+				{
+					previous = item;
+				}
+				else
+				{
+					tree.add(previous, item);
+					tree = tree.get(item);
+				}
+			}
+			tree.add(values);
+		}
+	}
+
+	/****************************************
+	 * Gets the ListedHashTree object mapped to the given key.
+	 *
+	 *@param key  Key used to find appropriate ListedHashTree()
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public ListedHashTree get(Object key)
+	{
+		return (ListedHashTree)data.get(key);
+	}
+
+	/****************************************
+	 * Gets the ListedHashTree object mapped to the last key in the array by
+	 * recursing through the ListedHashTree structure one key at a time.
+	 *
+	 *@param keys  Array of keys.
+	 *@return      ListedHashTree at the end of the recursion.
+	 ***************************************/
+	public ListedHashTree get(Object[] keys)
+	{
+		List list = new LinkedList();
+		for(int x = 0; x < keys.length; list.add(keys[x++]))
+		{
+			;
+		}
+		return get(list);
+	}
+
+	/****************************************
+	 * Gets the ListedHashTree object mapped to the last key in the List by
+	 * recursing through the ListedHashTree structure one key at a time.
+	 *
+	 *@param keys  List of keys.
+	 *@return      ListedHashTree at the end of the recursion.
+	 ***************************************/
+	public ListedHashTree get(List keys)
+	{
+		if(keys.size() == 1)
+		{
+			return get(keys.get(0));
+		}
+		else if(keys.size() > 1)
+		{
+			return get(keys.get(0)).get(keys.subList(1, keys.size()));
+		}
+		return new ListedHashTree();
+	}
+
+	/****************************************
+	 * Gets the ListedHashTree object mapped to the last key in the SortedSet by
+	 * recursing through the ListedHashTree structure one key at a time.
+	 *
+	 *@param keys  SortedSet of keys.
+	 *@return      ListedHashTree at the end of the recursion.
+	 ***************************************/
+	public ListedHashTree get(SortedSet keys)
+	{
+		if(keys.size() == 1)
+		{
+			return get(keys.first());
+		}
+		else if(keys.size() > 1)
+		{
+			Iterator iter = keys.iterator();
+			ListedHashTree tree = this;
+			while(iter.hasNext())
+			{
+				tree = tree.get(iter.next());
+			}
+			return tree;
+		}
+		return new ListedHashTree();
+	}
+
+	/****************************************
+	 * Gets a Set of all keys in the current ListedHashTree node.
+	 *
+	 *@return   Set of all keys in this ListedHashTree.
+	 ***************************************/
+	public List list()
+	{
+		return order;
+	}
+
+	/****************************************
+	 * Gets a Set of all keys in the ListedHashTree mapped to the given key of the
+	 * current ListedHashTree object (in other words, one level down.
+	 *
+	 *@param key  Key used to find ListedHashTree to get list of.
+	 *@return     Set of all keys in found ListedHashTree.
+	 ***************************************/
+	public List list(Object key)
+	{
+		ListedHashTree temp = (ListedHashTree)data.get(key);
+		if(temp != null)
+		{
+			return temp.list();
+		}
+		else
+		{
+			return null;
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param key  !ToDo (Parameter description)
+	 ***************************************/
+	public void remove(Object key)
+	{
+		data.remove(key);
+		order.remove(key);
+	}
+
+	/****************************************
+	 * Recurses down into the ListedHashTree stucture using each subsequent key in
+	 * the array of keys, and returns the Set of keys of the ListedHashTree object
+	 * at the end of the recursion.
+	 *
+	 *@param keys  Array of keys used to recurse into ListedHashTree structure.
+	 *@return      Set of all keys found in end ListedHashTree.
+	 ***************************************/
+	public List list(Object[] keys)
+	{
+		List list = new LinkedList();
+		for(int x = 0; x < keys.length; list.add(keys[x++]))
+		{
+			;
+		}
+		return list(list);
+	}
+
+	/****************************************
+	 * Recurses down into the ListedHashTree stucture using each subsequent key in
+	 * the List of keys, and returns the Set of keys of the ListedHashTree object
+	 * at the end of the recursion.
+	 *
+	 *@param keys  List of keys used to recurse into ListedHashTree structure.
+	 *@return      Set of all keys found in end ListedHashTree.
+	 ***************************************/
+	public List list(List keys)
+	{
+		if(keys.size() == 0)
+		{
+			return list();
+		}
+		else if(keys.size() == 1)
+		{
+			return get(keys.get(0)).list();
+		}
+		else
+		{
+			return get(keys.get(0)).list(keys.subList(1, keys.size()));
+		}
+	}
+
+	/****************************************
+	 * Recurses down into the ListedHashTree stucture using each subsequent key in
+	 * the SortedSet of keys, and returns the Set of keys of the ListedHashTree
+	 * object at the end of the recursion.
+	 *
+	 *@param keys  SortedSet of keys used to recurse into ListedHashTree structure.
+	 *@return      Set of all keys found in end ListedHashTree.
+	 ***************************************/
+	public List list(SortedSet keys)
+	{
+		if(keys.size() == 0)
+		{
+			return list();
+		}
+		else if(keys.size() == 1)
+		{
+			return get(keys.first()).list();
+		}
+		else
+		{
+			Iterator iter = keys.iterator();
+			ListedHashTree tree = this;
+			while(iter.hasNext())
+			{
+				tree = tree.get(iter.next());
+			}
+			return tree.list();
+		}
+	}
+
+	/****************************************
+	 * Gets an array of all keys in the current ListedHashTree node.
+	 *
+	 *@return   Array of all keys in this ListedHashTree.
+	 ***************************************/
+	public Object[] getArray()
+	{
+		return order.toArray();
+	}
+
+	/****************************************
+	 * Gets an array of all keys in the ListedHashTree mapped to the given key of
+	 * the current ListedHashTree object (in other words, one level down.
+	 *
+	 *@param key  Key used to find ListedHashTree to get list of.
+	 *@return     Array of all keys in found ListedHashTree.
+	 ***************************************/
+	public Object[] getArray(Object key)
+	{
+		return get(key).getArray();
+	}
+
+	/****************************************
+	 * Recurses down into the ListedHashTree stucture using each subsequent key in
+	 * the array of keys, and returns an array of keys of the ListedHashTree object
+	 * at the end of the recursion.
+	 *
+	 *@param keys  Array of keys used to recurse into ListedHashTree structure.
+	 *@return      Array of all keys found in end ListedHashTree.
+	 ***************************************/
+	public Object[] getArray(Object[] keys)
+	{
+		List list = new LinkedList();
+		for(int x = 0; x < keys.length; list.add(keys[x++]))
+		{
+			;
+		}
+		return getArray(list);
+	}
+
+	/****************************************
+	 * Recurses down into the ListedHashTree stucture using each subsequent key in
+	 * the List of keys, and returns an array of keys of the ListedHashTree object
+	 * at the end of the recursion.
+	 *
+	 *@param keys  List of keys used to recurse into ListedHashTree structure.
+	 *@return      Array of all keys found in end ListedHashTree.
+	 ***************************************/
+	public Object[] getArray(List keys)
+	{
+		if(keys.size() == 0)
+		{
+			return getArray();
+		}
+		if(keys.size() == 1)
+		{
+			return getArray(keys.get(0));
+		}
+		else
+		{
+			return get(keys.get(0)).getArray(keys.subList(1, keys.size()));
+		}
+	}
+
+	/****************************************
+	 * Recurses down into the ListedHashTree stucture using each subsequent key in
+	 * the SortedSet of keys, and returns an array of keys of the ListedHashTree
+	 * object at the end of the recursion.
+	 *
+	 *@param keys  SortedSet of keys used to recurse into ListedHashTree structure.
+	 *@return      Array of all keys found in end ListedHashTree.
+	 ***************************************/
+	public Object[] getArray(SortedSet keys)
+	{
+		if(keys.size() == 0)
+		{
+			return getArray();
+		}
+		if(keys.size() == 1)
+		{
+			return getArray(keys.first());
+		}
+		else
+		{
+			Iterator iter = keys.iterator();
+			ListedHashTree tree = this;
+			while(iter.hasNext())
+			{
+				tree = tree.get(iter.next());
+			}
+			return tree.getArray();
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int hashCode()
+	{
+		return data.hashCode() * 7 + 3;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param o  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public boolean equals(Object o)
+	{
+		boolean flag = true;
+		if(o instanceof ListedHashTree)
+		{
+			ListedHashTree oo = (ListedHashTree)o;
+			Iterator it = order.iterator();
+			while(it.hasNext())
+			{
+				if(!oo.containsKey(it.next()))
+				{
+					flag = false;
+					break;
+				}
+			}
+			if(flag)
+			{
+				it = order.iterator();
+				while(it.hasNext())
+				{
+					Object temp = it.next();
+					flag = get(temp).equals(oo.get(temp));
+					if(!flag)
+					{
+						break;
+					}
+				}
+			}
+		}
+		else
+		{
+			flag = false;
+		}
+		return flag;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Set keySet()
+	{
+		return data.keySet();
+	}
+
+	/****************************************
+	 * Searches the ListedHashTree structure for the given key. If it finds the
+	 * key, it returns the ListedHashTree mapped to the key. If it finds nothing,
+	 * it returns null.
+	 *
+	 *@param key  Key to search for.
+	 *@return     ListedHashTree mapped to key, if found, otherwise <B>null</B> .
+	 ***************************************/
+	public ListedHashTree search(Object key)
+	{
+		ListedHashTree temp = null;
+		if(data.containsKey(key))
+		{
+			temp = (ListedHashTree)data.get(key);
+		}
+		else
+		{
+			Iterator it = list().iterator();
+			while(it.hasNext())
+			{
+				if(temp == null)
+				{
+					temp = ((ListedHashTree)it.next()).search(key);
+					break;
+				}
+				else
+				{
+					break;
+				}
+			}
+		}
+		return temp;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int size()
+	{
+		return data.size();
+	}
+
+	/****************************************
+	 * The method debugs the entire tree all the way down (recursively)adding a tab
+	 * at each level. The debugging is only supported on the log4j output files.
+	 *
+	 *@param numTabs  The number of tabs (preferably make the first call with a
+	 *      value 0)
+	 **************************************
+	public void debugDeep(int numTabs)
+	{
+		if(!log.isDebugEnabled())
+		{
+			return;
+		}
+		if(numTabs == 0 && order.size() > 0)
+		{
+			log.debug("==============Starting the debugDeep:" + this + "===============");
+		}
+
+		StringBuffer tabBuffer = new StringBuffer(numTabs);
+		for(int i = 0; i < numTabs; i++)
+		{
+			tabBuffer.append("\t");
+		}
+		String tabs = tabBuffer.toString();
+
+		for(Iterator iter = order.iterator(); iter.hasNext(); )
+		{
+			Object obj = iter.next();
+			log.debug(tabs + obj);
+			ListedHashTree tree = get(obj);
+			tree.debugDeep(numTabs + 1);
+		}
+		if(numTabs == 0 && order.size() > 0)
+		{
+			log.debug("==============Ending the debugDeep===============");
+		}
+	}
+
+	/****************************************
+	 * Debugs all the elements in the current ListedHashTree
+	 ***************************************
+	public void debugShallow()
+	{
+		if(!log.isDebugEnabled())
+		{
+			return;
+		}
+		for(Iterator iter = order.iterator(); iter.hasNext(); )
+		{
+			log.debug(iter.next());
+		}
+	}*/
+
+
+
+	void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException
+	{
+		ois.defaultReadObject();
+	}
+
+	void writeObject(ObjectOutputStream oos) throws IOException
+	{
+		oos.defaultWriteObject();
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:49 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	public static class Test extends junit.framework.TestCase
+	{
+		/****************************************
+		 * !ToDo (Constructor description)
+		 *
+		 *@param name  !ToDo (Parameter description)
+		 ***************************************/
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		/****************************************
+		 * !ToDo
+		 *
+		 *@exception Exception  !ToDo (Exception description)
+		 ***************************************/
+		public void testAddObjectAndTree() throws Exception
+		{
+			ListedHashTree tree = new ListedHashTree("key");
+			ListedHashTree newTree = new ListedHashTree("value");
+			tree.add("key", newTree);
+			assertEquals(tree.list().size(), 1);
+			assertEquals(tree.getArray()[0], "key");
+			assertEquals(tree.get("key").list().size(), 1);
+			assertEquals(tree.get("key").get("value").size(), 0);
+			assertEquals(tree.get("key").getArray()[0], "value");
+			this.assertNotNull(tree.get("key").get("value"));
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/ListedHashTreeVisitor.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/ListedHashTreeVisitor.java
new file mode 100644
index 0000000..fe3d8bd
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/ListedHashTreeVisitor.java
@@ -0,0 +1,34 @@
+package org.apache.jmeter.util;
+
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+
+public interface ListedHashTreeVisitor
+{
+
+	/**
+	 * The tree traverses itself depth-first, calling processNode for each object
+	 * it encounters as it goes.
+	 */
+	public void addNode(Object node,ListedHashTree subTree);
+
+	/**
+	 * Indicates traversal has moved up a step, and the visitor should remove the
+	 * top node from it's stack structure.
+	 */
+	public void subtractNode();
+
+	/**
+	 * Process path is called when a leaf is reached.  If a visitor wishes to generate
+	 * Lists of path elements to each leaf, it should keep a Stack data structure of
+	 * nodes passed to it with addNode, and removing top items for every subtractNode()
+	 * call.
+	 */
+	public void processPath();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/NamedObject.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/NamedObject.java
new file mode 100644
index 0000000..a63794c
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/NamedObject.java
@@ -0,0 +1,70 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.util;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface NamedObject
+{
+
+	public String getName();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/SSLManager.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/SSLManager.java
new file mode 100644
index 0000000..d29274b
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/SSLManager.java
@@ -0,0 +1,317 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.util;
+
+import java.lang.reflect.Constructor;
+import java.io.File;
+import java.io.FileInputStream;
+import java.security.Provider;
+import java.security.Security;
+import java.security.KeyStore;
+import java.net.HttpURLConnection;
+import javax.swing.JOptionPane;
+
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.util.keystore.JmeterKeyStore;
+
+/**
+ * The SSLManager handles the KeyStore information for JMeter.  Basically, it
+ * handles all the logic for loading and initializing all the JSSE parameters
+ * and selecting the alias to authenticate against if it is available.  SSLManager
+ * will try to automatically select the client certificate for you, but if it can't
+ * make a decision, it will pop open a dialog asking you for more information.
+ *
+ * @author <a href="bloritsch@apache.org">Berin Loritsch</a>
+ * @version CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:49 $
+ */
+public abstract class SSLManager {
+    /** Singleton instance of the manager */
+    private static SSLManager manager;
+    private static boolean isIAIKProvider = false;
+    private static boolean isSSLSupported = false;
+    private static Provider sslProvider = null;
+
+    /** Cache the KeyStore instance */
+    private JmeterKeyStore keyStore;
+    /** Cache the TrustStore instance */
+    private KeyStore trustStore;
+    /** Have the password available */
+    protected String defaultpw = JMeterUtils.getJMeterProperties().getProperty("javax.net.ssl.keyStorePassword");
+
+    /**
+     * Resets the SSLManager so that we can create a new one with a new keystore
+     */
+    static public void reset() {
+        SSLManager.manager = null;
+    }
+
+    public abstract void setContext(HttpURLConnection conn);
+
+    /**
+     * Default implementation of setting the Provider
+     */
+    protected void setProvider(Provider provider) {
+        if ( null != provider ) {
+            Security.addProvider( provider );
+        }
+    }
+
+
+    /**
+     * Opens and initializes the KeyStore.  If the password for the KeyStore is
+     * not set, this method will prompt you to enter it.  Unfortunately, there is
+     * no PasswordEntryField available from JOptionPane.
+     */
+    protected JmeterKeyStore getKeyStore() {
+        String password = this.defaultpw;
+
+        if (null == this.keyStore) {
+            String defaultName = JMeterUtils.getJMeterProperties().getProperty("user.home") + File.separator +
+                    ".keystore";
+            String fileName = JMeterUtils.getJMeterProperties().getProperty("javax.net.ssl.keyStore", defaultName);
+            System.setProperty("javax.net.ssl.keyStore", fileName);
+
+            try {
+                if (fileName.endsWith(".p12") || fileName.endsWith(".P12")) {
+                    this.keyStore = JmeterKeyStore.getInstance("pkcs12");
+                    System.out.println("KeyStore Type: PKCS 12");
+                    System.setProperty("javax.net.ssl.keyStoreType", "pkcs12");
+                } else {
+                    this.keyStore = JmeterKeyStore.getInstance("JKS");
+                    System.out.println("KeyStore Type: JKS");
+                }
+            } catch (Exception e) {
+                JOptionPane.showMessageDialog(GuiPackage.getInstance().getMainFrame(),
+                        e,
+                        JMeterUtils.getResString("ssl_error_title"),
+                        JOptionPane.ERROR_MESSAGE);
+                this.keyStore = null;
+                throw new RuntimeException("KeyStore Problem");
+            }
+
+            if (null == password) {
+                if (null == defaultpw) {
+                    this.defaultpw = JMeterUtils.getJMeterProperties().getProperty("javax.net.ssl.keyStorePassword");
+
+                    if (null == defaultpw) {
+                        synchronized (this) {
+                            this.defaultpw = JOptionPane.showInputDialog(GuiPackage.getInstance().getMainFrame(),
+                                    JMeterUtils.getResString("ssl_pass_prompt"),
+                                    JMeterUtils.getResString("ssl_pass_title"),
+                                    JOptionPane.QUESTION_MESSAGE);
+                            JMeterUtils.getJMeterProperties().setProperty("javax.net.ssl.keyStorePassword", this.defaultpw);
+                        }
+                    }
+                }
+
+                password = this.defaultpw;
+                System.setProperty("javax.net.ssl.keyStorePassword", password);
+            }
+
+            try {
+                File initStore = new File(fileName);
+
+                if (initStore.exists()) {
+                    try {
+                        this.keyStore.load(new FileInputStream(initStore), password);
+                    } catch (Exception e) {
+                        throw new RuntimeException("Can't load KeyStore!!!  " + e.getMessage());
+                    }
+                } else {
+                    this.keyStore.load(null, password);
+                }
+            } catch (Exception e) {
+            }
+
+        System.out.println("JmeterKeyStore Location: " + fileName);
+        System.out.println("JmeterKeyStore type: " + this.keyStore.getClass().toString());
+        }
+
+        return this.keyStore;
+    }
+
+    /**
+     * Opens and initializes the TrustStore.
+     */
+    protected KeyStore getTrustStore() {
+        if (null == this.trustStore) {
+            String fileName = JMeterUtils.getPropDefault("javax.net.ssl.trustStore", "");
+            System.setProperty("javax.net.ssl.trustStore", fileName);
+
+            try {
+                if (fileName.endsWith(".iaik")) {
+                    this.trustStore = KeyStore.getInstance("IAIKKeyStore", "IAIK");
+                }  else {
+                    this.trustStore = KeyStore.getInstance("JKS");
+                    System.out.println("KeyStore Type: JKS");
+                }
+            } catch (Exception e) {
+                JOptionPane.showMessageDialog(GuiPackage.getInstance().getMainFrame(),
+                        e,
+                        JMeterUtils.getResString("ssl_error_title"),
+                        JOptionPane.ERROR_MESSAGE);
+                this.trustStore = null;
+                throw new RuntimeException("TrustStore Problem");
+            }
+
+            try {
+                File initStore = new File(fileName);
+
+                if (initStore.exists()) {
+                    try {
+                        this.trustStore.load(new FileInputStream(initStore), null);
+                    } catch (Exception e) {
+                        throw new RuntimeException("Can't load KeyStore!!!  " + e.getMessage());
+                    }
+                } else {
+                    this.trustStore.load(null, null);
+                }
+            } catch (Exception e) {
+            }
+
+            System.out.println("TrustStore Location: " + fileName);
+            System.out.println("TrustStore type: " + this.keyStore.getClass().toString());
+        }
+
+        return this.trustStore;
+    }
+
+    /**
+     * Protected Constructor to remove the possibility of directly instantiating
+     * this object.  Create the SSLContext, and wrap all the X509KeyManagers with
+     * our X509KeyManager so that we can choose our alias.
+     */
+    protected SSLManager() {}
+
+    /**
+     * Static accessor for the SSLManager object.  The SSLManager is a singleton.
+     */
+    public static final SSLManager getInstance() {
+        if (null == SSLManager.manager) {
+            if (SSLManager.isSSLSupported) {
+                String classname = null;
+                if (SSLManager.isIAIKProvider) {
+                    classname = "org.apache.jmeter.util.IaikSSLManager";
+                } else {
+                    classname = "org.apache.jmeter.util.JsseSSLManager";
+                }
+
+                try {
+                    Class clazz = Class.forName(classname);
+                    Constructor con = clazz.getConstructor(new Class[] {Provider.class});
+                    SSLManager.manager = (SSLManager) con.newInstance(new Object[] {SSLManager.sslProvider});
+                } catch (Exception e) {
+                    e.printStackTrace(System.err);
+                    SSLManager.isSSLSupported = false;
+                    return null;
+                }
+            }
+        }
+
+        return SSLManager.manager;
+    }
+
+    /**
+     * Test wether SSL is supported or not.
+     */
+    public static final boolean isSSLSupported() {
+        return SSLManager.isSSLSupported;
+    }
+
+    // moved from SSLStaticProvider so all SSL specific management is done in one place.
+    static
+    {
+
+        SSLManager.isSSLSupported = false;
+        SSLManager.sslProvider = null;
+
+        try {
+            // Class.forName() was choking if the property wasn't set on the line below..
+            String strSSLProvider = JMeterUtils.getPropDefault("ssl.provider",null);
+            if(strSSLProvider != null) {
+                SSLManager.sslProvider = (Provider)Class.forName(strSSLProvider).newInstance();
+                SSLManager.isSSLSupported = true;
+            }
+        } catch (Exception noSSL) {
+            noSSL.printStackTrace(System.err);
+        }
+
+        try {
+            if(SSLManager.sslProvider != null) {
+                System.out.println("SSL Provider is: " + SSLManager.sslProvider);
+                Security.addProvider(SSLManager.sslProvider);
+                // register jsse provider
+            }
+        } catch (Exception ssl) {
+            // ignore
+        }
+
+        String protocol = JMeterUtils.getPropDefault("ssl.pkgs", JMeterUtils.getPropDefault("java.protocol.handler.pkgs", null));
+
+        // register https protocol handler.  JSSE needs a provider--but iSaSiLk does not.
+        if (null != protocol) {
+            System.setProperty("java.protocol.handler.pkgs", protocol);
+            if ("iaik.protocol".equals(protocol)) {
+                SSLManager.isSSLSupported = true;
+                SSLManager.isIAIKProvider = true;
+            } else if (SSLManager.sslProvider != null) {
+                // This is the case where a provider is set and java.protocol.handler.pkgs is set
+                SSLManager.isSSLSupported = true;
+            }
+        } else {
+            SSLManager.isSSLSupported = false;
+        }
+    }
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/SearchByClass.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/SearchByClass.java
new file mode 100644
index 0000000..aa75d13
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/SearchByClass.java
@@ -0,0 +1,51 @@
+package org.apache.jmeter.util;
+import java.util.*;
+/**
+ * <p>Title: </p>
+ * <p>Description: </p>
+ * <p>Copyright: Copyright (c) 2001</p>
+ * <p>Company: </p>
+ * @author unascribed
+ * @version 1.0
+ */
+public class SearchByClass implements ListedHashTreeVisitor {
+	List objectsOfClass = new LinkedList();
+	Map subTrees = new HashMap();
+	Class searchClass = null;
+	public SearchByClass() {}
+	public SearchByClass(Class searchClass) {
+		this.searchClass = searchClass;
+	}
+	public Collection getSearchResults() {
+		return objectsOfClass;
+	}
+	public ListedHashTree getSubTree(Object root) {
+		return (ListedHashTree) subTrees.get(root);
+	}
+	public void addNode(Object node, ListedHashTree subTree) {
+		if (searchClass.isAssignableFrom(node.getClass())) {
+			objectsOfClass.add(node);
+			ListedHashTree tree = new ListedHashTree(node);
+			tree.set(node, subTree);
+			subTrees.put(node, tree);
+		}
+	}
+	public static class Test extends junit.framework.TestCase {
+		public Test(String name) {
+			super(name);
+		}
+		public void testSearch() throws Exception {
+			ListedHashTree tree = new ListedHashTree();
+			SearchByClass searcher = new SearchByClass(Integer.class);
+			String one = "one";
+			String two = "two";
+			Integer o = new Integer(1);
+			tree.add(one, o);
+			tree.get(one).add(o, two);
+			tree.traverse(searcher);
+			assertEquals(1, searcher.getSearchResults().size());
+		}
+	}
+	public void subtractNode() {}
+	public void processPath() {}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/SortedHashTree.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/SortedHashTree.java
new file mode 100644
index 0000000..5f17c12
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/SortedHashTree.java
@@ -0,0 +1,821 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.util;
+
+import java.io.*;
+import java.util.*;
+
+/**********************************************************************
+This class is used to create a tree structure of objects.  Each element in the tree
+is also a key to the next node down in the tree.
+***********************************************************************/
+public class SortedHashTree implements Serializable
+{
+
+  public SortedHashTree()
+  {
+	 data = new TreeMap();
+  }
+
+  public SortedHashTree(Object key)
+  {
+	 data = new TreeMap();
+	 data.put(key,new SortedHashTree());
+  }
+
+  public SortedHashTree(Collection keys)
+  {
+	 data = new TreeMap();
+	 Iterator it = keys.iterator();
+	 while(it.hasNext())
+		data.put(it.next(),new SortedHashTree());
+  }
+
+  public SortedHashTree(Object[] keys)
+  {
+	 data = new TreeMap();
+	 for(int x = 0;x < keys.length;x++)
+		data.put(keys[x],new SortedHashTree());
+  }
+
+/************************************************************
+  If the SortedHashTree contains the given object as a key at the top level, then a
+  true result is returned, otherwise false.
+@param obj Object to be tested as a key.
+@return True if the SortedHashTree contains the key, false otherwise.
+***************************************************************/
+  public boolean containsKey(Object o)
+  {
+	 return data.containsKey(o);
+  }
+
+/*****************************************************************
+  If the SortedHashTree is empty, true is returned, false otherwise.
+@return True if SortedHashTree is empty, false otherwise.
+***************************************************************/
+  public boolean isEmpty()
+  {
+	 return data.isEmpty();
+  }
+
+/************************************************************************
+  Sets a key and it's value in the SortedHashTree.  It actually sets up a key, and then
+  creates a node for the key and adds the value to the new node, as a key.
+@param key Key to be set up.
+@param value Value to be set up as a key in the secondary node.
+*************************************************************************/
+  public void set(Object key,Object value)
+  {
+	 data.put(key,new SortedHashTree(value));
+  }
+
+/************************************************************************
+Sets a key and it's values in the SortedHashTree.  It sets up a key in the current node, and
+then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be set up.
+@param values Array of objects to be added as keys in the secondary node.
+********************************************************************/
+  public void set(Object key,Object[] values)
+  {
+	 data.put(key,new SortedHashTree(values));
+  }
+
+/********************************************************************
+ Sets a key and it's values in the SortedHashTree.  It sets up a key in the current node, and
+ then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be set up.
+@param values Collection of objects to be added as keys in the secondary node.
+**************************************************************************/
+  public void set(Object key,Collection values)
+  {
+	 data.put(key,new SortedHashTree(values));
+  }
+
+/********************************************************************
+ Sets a key and it's values in the SortedHashTree.  It sets up a key in the current node, and
+ then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be set up.
+@param tree SortedHashTree that the key maps to.
+**************************************************************************/
+  public void set(Object key,SortedHashTree t)
+  {
+	 data.put(key,t);
+  }
+
+/********************************************************************
+  Sets a series of keys into the SortedHashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the second array are added as keys to the bottom-most node.
+@param key Array of keys to put into SortedHashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(Object[] key,Object[] values)
+  {
+	 List keys = new LinkedList();
+	 for(int x = 0;x < key.length;keys.add(key[x++]));
+	 set(keys,values);
+  }
+
+/********************************************************************
+  Sets a series of keys into the SortedHashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the Collection of values are added as keys to the bottom-most node.
+@param key Array of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(Object[] key,Collection values)
+  {
+	 List keys = new LinkedList();
+	 for(int x = 0;x < key.length;keys.add(key[x++]));
+	 set(keys,values);
+  }
+
+/********************************************************************
+  Sets a series of keys into the SortedHashTree.  It sets up the first object in the
+  key list as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the list.  Continues recursing in this
+  manner until the end of the first list is reached, at which point all the
+  values of the array of values are added as keys to the bottom-most node.
+@param key List of keys to put into SortedHashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(List key,Object[] values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).set(key,values);
+	 }
+  }
+
+/********************************************************************
+  Sets a series of keys into the SortedHashTree.  It sets up the first object in the
+  key list as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the list.  Continues recursing in this
+  manner until the end of the first list is reached, at which point all the
+  values of the Collection of values are added as keys to the bottom-most node.
+@param key List of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(List key,Collection values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).set(key,values);
+	 }
+  }
+
+/********************************************************************
+  Sets a series of keys into the SortedHashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the array of values are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into SortedHashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(SortedSet key,Object[] values)
+  {
+	 Object temp;
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.first(),values);
+	 else
+	 {
+		temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).set(key,values);
+	 }
+  }
+
+/********************************************************************
+  Sets a series of keys into the SortedHashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the Collection of values are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void set(SortedSet key,Collection values)
+  {
+	 Object temp;
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		set(key.first(),values);
+	 else
+	 {
+		temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).set(key,values);
+	 }
+  }
+
+/*********************************************************************
+Adds an key into the SortedHashTree at the current level.
+@param key Key to be added to SortedHashTree.
+*****************************************************************/
+  public void add(Object key)
+  {
+	 if(!data.containsKey(key))
+		data.put(key,new SortedHashTree());
+  }
+
+/*******************************************************************
+Adds a bunch of keys into the SortedHashTree at the current level.
+@param keys Array of Keys to be added to SortedHashTree.
+*******************************************************************/
+  public void add(Object[] keys)
+  {
+	 for(int x = 0;x < keys.length;x++)
+		add(keys[x]);
+  }
+
+/*******************************************************************
+Adds a bunch of keys into the SortedHashTree at the current level.
+@param keys Collection of Keys to be added to SortedHashTree.
+*******************************************************************/
+  public void add(Collection keys)
+  {
+	 Iterator it = keys.iterator();
+	 while(it.hasNext())
+		add(it.next());
+  }
+
+/************************************************************************
+  Adds a key and it's value in the SortedHashTree.  It actually adds  a key, and then
+  creates a node for the key and adds the value to the new node, as a key.
+@param key Key to be added.
+@param value Value to be added as a key in the secondary node.
+*************************************************************************/
+  public void add(Object key,Object value)
+  {
+	 if(!data.containsKey(key))
+		set(key,value);
+	 else
+		get(key).add(value);
+  }
+
+/************************************************************************
+Adds a key and it's values in the SortedHashTree.  It Adds a key in the current node, and
+then creates a node for that key, and adds all the values in the array as keys in
+ the new node.
+@param key Key to be added.
+@param values Array of objects to be added as keys in the secondary node.
+********************************************************************/
+  public void add(Object key,Object[] values)
+  {
+	 if(!data.containsKey(key))
+		set(key,values);
+	 else
+		get(key).add(values);
+  }
+
+/************************************************************************
+Adds a key and it's values in the SortedHashTree.  It adds a key in the current node, and
+then creates a node for that key, and adds all the values in the Collection as keys in
+ the new node.
+@param key Key to be added.
+@param values Collection of objects to be added as keys in the secondary node.
+********************************************************************/
+  public void add(Object key,Collection values)
+  {
+	 if(!data.containsKey(key))
+		set(key,values);
+	 else
+		get(key).add(values);
+  }
+
+/********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the second array are added as keys to the bottom-most node.
+@param key Array of keys to put into SortedHashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(Object[] key,Object[] values)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < key.length;list.add(key[x++]));
+	 add(list,values);
+  }
+
+/********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key array as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the array.  Continues recursing in this
+  manner until the end of the first array is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key Array of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(Object[] key,Collection values)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < key.length;list.add(key[x++]));
+	 add(list,values);
+  }
+
+/********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key List as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the List.  Continues recursing in this
+  manner until the end of the first List is reached, at which point all the
+  values of the second Array are added as keys to the bottom-most node.
+@param key List of keys to put into SortedHashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(List key,Object[] values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		add(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).add(key,values);
+	 }
+  }
+
+/********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key List as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the List.  Continues recursing in this
+  manner until the end of the first List is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key List of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(List key,Collection values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		add(key.get(0),values);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).add(key,values);
+	 }
+  }
+
+  /********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key List as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the List.  Continues recursing in this
+  manner until the end of the first List is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key List of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(List key,Object value)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		  add(key.get(0),value);
+	 else
+	 {
+		Object temp = key.remove(0);
+		add(temp,key.get(0));
+		get(temp).add(key,value);
+	 }
+  }
+
+/********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the second Array are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into SortedHashTree.
+@param values Array of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(SortedSet key,Object[] values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		add(key.first(),values);
+	 else
+	 {
+		Object temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).add(key,values);
+	 }
+  }
+
+/********************************************************************
+  Adds a series of keys into the SortedHashTree.  It sets up the first object in the
+  key SortedSet as a key in the current node, recurses into the next SortedHashTree node through
+  that key and adds the second object in the SortedSet.  Continues recursing in this
+  manner until the end of the first SortedSet is reached, at which point all the
+  values of the second Collection are added as keys to the bottom-most node.
+@param key SortedSet of keys to put into SortedHashTree.
+@param values Collection of values to be added as keys to bottom-most node.
+********************************************************************/
+  public void add(SortedSet key,Collection values)
+  {
+	 if(key.size() == 0)
+		return;
+	 else if(key.size() == 1)
+		add(key.first(),values);
+	 else
+	 {
+		Object temp = key.first();
+		key.remove(temp);
+		add(temp,key.first());
+		get(temp).add(key,values);
+	 }
+  }
+
+/*********************************************************************
+Gets the SortedHashTree object mapped to the given key.
+@param key Key used to find appropriate SortedHashTree()
+********************************************************************/
+  public SortedHashTree get(Object key)
+  {
+	 return (SortedHashTree)data.get(key);
+  }
+
+/*************************************************************
+Gets the SortedHashTree object mapped to the last key in the array by recursing through
+the SortedHashTree structure one key at a time.
+@param keys Array of keys.
+@return SortedHashTree at the end of the recursion.
+**************************************************************/
+  public SortedHashTree get(Object[] keys)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < keys.length;list.add(keys[x++]));
+	 return get(list);
+  }
+
+/*************************************************************
+Gets the SortedHashTree object mapped to the last key in the List by recursing through
+the SortedHashTree structure one key at a time.
+@param keys List of keys.
+@return SortedHashTree at the end of the recursion.
+**************************************************************/
+  public SortedHashTree get(List keys)
+  {
+	 if(keys.size() == 1)
+		return get(keys.get(0));
+	 else if(keys.size() > 1)
+	 {
+		Object temp = keys.remove(0);
+		return get(temp).get(keys);
+	 }
+	 return new SortedHashTree();
+  }
+
+/*************************************************************
+Gets the SortedHashTree object mapped to the last key in the SortedSet by recursing through
+the SortedHashTree structure one key at a time.
+@param keys SortedSet of keys.
+@return SortedHashTree at the end of the recursion.
+**************************************************************/
+  public SortedHashTree get(SortedSet keys)
+  {
+	 if(keys.size() == 1)
+		return get(keys.first());
+	 else if(keys.size() > 1)
+	 {
+		Object temp = keys.first();
+		keys.remove(temp);
+		return get(temp).get(keys);
+	 }
+	 return new SortedHashTree();
+  }
+
+/****************************************************************
+Gets a Set of all keys in the current SortedHashTree node.
+@return Set of all keys in this SortedHashTree.
+*****************************************************************/
+  public Set list()
+  {
+	 return data.keySet();
+  }
+
+/***************************************************************
+  Gets a Set of all keys in the SortedHashTree mapped to the given key of the
+  current SortedHashTree object (in other words, one level down.
+@param key Key used to find SortedHashTree to get list of.
+@return Set of all keys in found SortedHashTree.
+***************************************************************/
+  public Set list(Object key)
+  {
+	 SortedHashTree temp = (SortedHashTree)data.get(key);
+	 if(temp != null)
+		return temp.list();
+	 else
+		return null;
+  }
+
+  public void remove(Object key)
+  {
+	 data.remove(key);
+  }
+
+/*************************************************************
+Recurses down into the SortedHashTree stucture using each subsequent key in the
+array of keys, and returns the Set of keys of the SortedHashTree object at the
+end of the recursion.
+@param keys Array of keys used to recurse into SortedHashTree structure.
+@return Set of all keys found in end SortedHashTree.
+**************************************************************/
+  public Set list(Object[] keys)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < keys.length;list.add(keys[x++]));
+	 return list(list);
+  }
+
+/*************************************************************
+Recurses down into the SortedHashTree stucture using each subsequent key in the
+List of keys, and returns the Set of keys of the SortedHashTree object at the
+end of the recursion.
+@param keys List of keys used to recurse into SortedHashTree structure.
+@return Set of all keys found in end SortedHashTree.
+**************************************************************/
+  public Set list(List keys)
+  {
+	 if(keys.size() == 0)
+		return list();
+	 else if(keys.size() == 1)
+		return get(keys.get(0)).list();
+	 else
+	 {
+		Object temp = keys.remove(0);
+		return get(temp).list(keys);
+	 }
+  }
+
+/*************************************************************
+Recurses down into the SortedHashTree stucture using each subsequent key in the
+SortedSet of keys, and returns the Set of keys of the SortedHashTree object at the
+end of the recursion.
+@param keys SortedSet of keys used to recurse into SortedHashTree structure.
+@return Set of all keys found in end SortedHashTree.
+**************************************************************/
+  public Set list(SortedSet keys)
+  {
+	 if(keys.size() == 0)
+		return list();
+	 else if(keys.size() == 1)
+		return get(keys.first()).list();
+	 else
+	 {
+		Object temp = keys.first();
+		keys.remove(temp);
+		return get(temp).list(keys);
+	 }
+  }
+
+/****************************************************************
+Gets an array of all keys in the current SortedHashTree node.
+@return Array of all keys in this SortedHashTree.
+*****************************************************************/
+  public Object[] getArray()
+  {
+	 return data.keySet().toArray();
+  }
+
+/***************************************************************
+  Gets an array of all keys in the SortedHashTree mapped to the given key of the
+  current SortedHashTree object (in other words, one level down.
+@param key Key used to find SortedHashTree to get list of.
+@return Array of all keys in found SortedHashTree.
+***************************************************************/
+  public Object[] getArray(Object key)
+  {
+	 return get(key).getArray();
+  }
+
+/*************************************************************
+Recurses down into the SortedHashTree stucture using each subsequent key in the
+array of keys, and returns an array of keys of the SortedHashTree object at the
+end of the recursion.
+@param keys Array of keys used to recurse into SortedHashTree structure.
+@return Array of all keys found in end SortedHashTree.
+**************************************************************/
+  public Object[] getArray(Object[] keys)
+  {
+	 List list = new LinkedList();
+	 for(int x = 0;x < keys.length;list.add(keys[x++]));
+	 return getArray(list);
+  }
+
+/*************************************************************
+Recurses down into the SortedHashTree stucture using each subsequent key in the
+List of keys, and returns an array of keys of the SortedHashTree object at the
+end of the recursion.
+@param keys List of keys used to recurse into SortedHashTree structure.
+@return Array of all keys found in end SortedHashTree.
+**************************************************************/
+  public Object[] getArray(List keys)
+  {
+	 if(keys.size() == 0)
+		return getArray();
+	 if(keys.size() == 1)
+		return getArray(keys.get(0));
+	 else
+	 {
+		Object temp = keys.remove(0);
+		return get(temp).getArray(keys);
+	 }
+  }
+
+/*************************************************************
+Recurses down into the SortedHashTree stucture using each subsequent key in the
+SortedSet of keys, and returns an array of keys of the SortedHashTree object at the
+end of the recursion.
+@param keys SortedSet of keys used to recurse into SortedHashTree structure.
+@return Array of all keys found in end SortedHashTree.
+**************************************************************/
+  public Object[] getArray(SortedSet keys)
+  {
+	 if(keys.size() == 0)
+		return getArray();
+	 if(keys.size() == 1)
+		return getArray(keys.first());
+	 else
+	 {
+		Object temp = keys.first();
+		keys.remove(temp);
+		return get(temp).getArray(keys);
+	 }
+  }
+
+  public int hashCode()
+  {
+	 return data.hashCode()*7;
+  }
+
+  public boolean equals(Object o)
+  {
+	 boolean flag = true;
+	 if(o instanceof SortedHashTree)
+	 {
+		SortedHashTree oo = (SortedHashTree)o;
+		Iterator it = data.keySet().iterator();
+		while(it.hasNext())
+		{
+		  if(!oo.containsKey(it.next()))
+		  {
+			 flag = false;
+			 break;
+		  }
+		}
+		if(flag)
+		{
+		  it = data.keySet().iterator();
+		  while(it.hasNext())
+		  {
+			 Object temp = it.next();
+			 flag = get(temp).equals(oo.get(temp));
+			 if(!flag)
+				break;
+		  }
+		}
+	 }
+	 else
+		flag = false;
+	 return flag;
+  }
+
+  public Set keySet()
+  {
+	 return data.keySet();
+  }
+
+/*****************************************************
+Searches the SortedHashTree structure for the given key.  If it finds the key,
+it returns the SortedHashTree mapped to the key.  If it finds nothing, it returns
+null.
+@param key Key to search for.
+@return SortedHashTree mapped to key, if found, otherwise <B>null</B>.
+**********************************************************/
+  public SortedHashTree search(Object key)
+  {
+	 SortedHashTree temp = null;
+	 if(data.containsKey(key))
+		temp = (SortedHashTree)data.get(key);
+	 else
+	 {
+		Iterator it = list().iterator();
+		while(it.hasNext())
+		{
+		  if(temp == null)
+		  {
+			 temp = ((SortedHashTree)it.next()).search(key);
+			 break;
+		  }
+		  else
+			 break;
+		}
+	 }
+	 return temp;
+  }
+
+
+
+
+  void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException
+  {
+	 ois.defaultReadObject();
+  }
+
+  void writeObject(ObjectOutputStream oos) throws IOException
+  {
+	 oos.defaultWriteObject();
+  }
+
+  public int size()
+  {
+	 return data.size();
+  }
+
+  private java.util.SortedMap data;
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/TextFile.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/TextFile.java
new file mode 100644
index 0000000..cb02953
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/TextFile.java
@@ -0,0 +1,82 @@
+package org.apache.jmeter.util;
+
+import java.io.*;
+
+/************************************************************
+ *  !ToDo (Class description)
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:49 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+public class TextFile extends File
+{
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  filename  !ToDo (Parameter description)
+	 ***********************************************************/
+	public TextFile(File filename)
+	{
+		super(filename.toString());
+	}
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 *
+	 *@param  filename  !ToDo (Parameter description)
+	 ***********************************************************/
+	public TextFile(String filename)
+	{
+		super(filename);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  body  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setText(String body)
+	{
+		try
+		{
+			Writer writer = new FileWriter(this);
+			writer.write(body);
+			writer.flush();
+			writer.close();
+		}
+		catch (IOException ioe)
+		{
+			System.err.println(ioe.getMessage());
+		}
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getText()
+	{
+		String lineEnd = System.getProperty("line.separator");
+		StringBuffer sb = new StringBuffer();
+		try
+		{
+			BufferedReader br = new BufferedReader(new FileReader(this));
+			String line = "NOTNULL";
+			while (line != null)
+			{
+				line = br.readLine();
+				if (line != null)
+				{
+					sb.append(line + lineEnd);
+				}
+			}
+		}
+		catch (IOException ioe)
+		{
+			System.err.println(ioe.getMessage());
+		}
+		return sb.toString();
+	}
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Entries
new file mode 100644
index 0000000..8a9475f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Entries
@@ -0,0 +1,4 @@
+/DefaultKeyStore.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/JmeterKeyStore.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/PKCS12KeyStore.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Repository
new file mode 100644
index 0000000..737dd62
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/util/keystore
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/DefaultKeyStore.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/DefaultKeyStore.java
new file mode 100644
index 0000000..8170384
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/DefaultKeyStore.java
@@ -0,0 +1,125 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.util.keystore;
+
+import java.security.cert.Certificate;
+import java.security.cert.X509Certificate;
+import java.security.cert.CertificateException;
+import java.security.NoSuchAlgorithmException;
+import java.security.PrivateKey;
+import java.security.KeyStore;
+import java.security.KeyStoreException;
+import java.io.InputStream;
+import java.io.IOException;
+import java.util.Enumeration;
+
+/**
+ * Use this Keystore to wrap the normal KeyStore implementation.
+ *
+ * @author <a href="bloritsch@apache.org">Berin Loritsch</a>
+ * @version CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:50 $
+ */
+public class DefaultKeyStore extends JmeterKeyStore {
+    private X509Certificate[] certChain;
+    private PrivateKey key;
+    private String alias;
+    private final KeyStore store;
+
+    public DefaultKeyStore(String type)
+    throws Exception {
+        this.store = KeyStore.getInstance(type);
+    }
+
+    public void load(InputStream is, String pword)
+    throws Exception {
+        store.load(is, pword.toCharArray());
+        PrivateKey key = null;
+        X509Certificate[] certChain = null;
+
+        Enumeration aliases = store.aliases();
+        while (aliases.hasMoreElements()) {
+            if (store.isKeyEntry(alias)) {
+                key = (PrivateKey) store.getKey(alias, pword.toCharArray());
+                Certificate[] chain = store.getCertificateChain(alias);
+                certChain = new X509Certificate[chain.length];
+                this.alias = (String) aliases.nextElement();
+
+                for (int i = 0; i < chain.length; i++) {
+                    certChain[i] = (X509Certificate) chain[i];
+                }
+
+                break;
+            }
+        }
+
+        if (null == key) throw new Exception("No key found");
+        if (null == certChain) throw new Exception("No certificate chain found");
+
+        this.key = key;
+        this.certChain = certChain;
+    }
+
+    public final X509Certificate[] getCertificateChain() {
+        return this.certChain;
+    }
+
+    public final PrivateKey getPrivateKey() {
+        return this.key;
+    }
+
+    public final String getAlias() {
+        return this.alias;
+    }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/JmeterKeyStore.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/JmeterKeyStore.java
new file mode 100644
index 0000000..53a10e2
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/JmeterKeyStore.java
@@ -0,0 +1,107 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.util.keystore;
+
+import java.lang.reflect.Constructor;
+import java.io.InputStream;
+import java.security.PrivateKey;
+import java.security.cert.X509Certificate;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * Use this Keystore for JMeter specific KeyStores.
+ *
+ * @author <a href="bloritsch@apache.org">Berin Loritsch</a>
+ * @version CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:50 $
+ */
+public abstract class JmeterKeyStore {
+
+    /**
+     * Process the input stream
+     */
+    public abstract void load(InputStream is, String password)
+    throws Exception;
+
+    /**
+     * Get the ordered certificate chain.
+     */
+    public abstract X509Certificate[] getCertificateChain();
+
+    public abstract String getAlias();
+
+    /**
+     * Return the private Key
+     */
+    public abstract PrivateKey getPrivateKey();
+
+    public static final JmeterKeyStore getInstance(String type)
+    throws Exception {
+        if ("PKCS12".equalsIgnoreCase(type)) {
+            try {
+                Class PKCS12 = Class.forName
+                    ("org.apache.jmeter.util.keystore.PKCS12KeyStore");
+                Constructor con = PKCS12.getConstructor(
+                    new Class[] {String.class});
+                return (JmeterKeyStore) con.newInstance(new Object[] {type});
+            } catch (Exception e) {}
+        }
+
+        Class keyStore = Class.forName
+            ("org.apache.jmeter.util.keystore.DefaultKeyStore");
+        Constructor con = keyStore.getConstructor(
+            new Class[] {String.class});
+        return (JmeterKeyStore) con.newInstance(new Object[] {type});
+    }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/PKCS12KeyStore.java b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/PKCS12KeyStore.java
new file mode 100644
index 0000000..1bc0eca
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/util/keystore/PKCS12KeyStore.java
@@ -0,0 +1,158 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.util.keystore;
+
+import iaik.pkcs.pkcs12.PKCS12;
+import iaik.pkcs.pkcs12.KeyBag;
+import iaik.pkcs.pkcs12.CertificateBag;
+import iaik.pkcs.PKCSParsingException;
+import iaik.pkcs.PKCSException;
+import iaik.x509.ChainVerifier;
+import iaik.utils.Util;
+
+import java.security.cert.X509Certificate;
+import java.security.cert.CertificateException;
+import java.security.PrivateKey;
+import java.io.InputStream;
+import java.io.IOException;
+import java.util.Arrays;
+
+/**
+ * Use this Keystore for iSaSiLk SSL Managers.
+ *
+ * @author <a href="bloritsch@apache.org">Berin Loritsch</a>
+ * @version CVS $Revision: 1.1 $ $Date: 2002/08/11 19:24:50 $
+ */
+public class PKCS12KeyStore extends JmeterKeyStore {
+    /** The Certificate chain */
+    private X509Certificate[] certChain;
+
+    /** The private key */
+    private PrivateKey key;
+
+    /** The alias */
+    private String alias;
+
+    public PKCS12KeyStore(String type)
+    throws Exception {
+        if ( !"PKCS12".equalsIgnoreCase(type) ) {
+            throw new Exception("Invalid keystore type");
+        }
+    }
+
+    public final String getAlias() {
+        return this.alias;
+    }
+
+    /**
+     * Process PKCS12 input stream into the private key and certificate chain.
+     */
+    public void load(InputStream is, String pword)
+    throws IOException, PKCSException, CertificateException {
+        PKCS12 p12 = new PKCS12(is);
+        is.close();
+
+        p12.decrypt(pword.toCharArray());
+
+        KeyBag keyBag = p12.getKeyBag();
+
+        if (null == keyBag) {
+            throw new PKCSException("No private key found");
+        }
+
+        byte[] keyBagLocalKeyId = keyBag.getLocalKeyID();
+
+        this.key = keyBag.getPrivateKey();
+
+        CertificateBag[] certBags = p12.getCertificateBags();
+        if ((null == certBags) || (certBags.length == 0)) {
+            throw new PKCSException("No certificates found");
+        }
+
+        this.alias = new String(keyBagLocalKeyId);
+        X509Certificate myCert = null;
+
+        for( int i=0; i < certBags.length; i++) {
+            byte[] certBagLocalKeyId = certBags[i].getLocalKeyID();
+            if ((null != keyBagLocalKeyId) && (null != certBagLocalKeyId)) {
+                if (Arrays.equals(certBagLocalKeyId, keyBagLocalKeyId)) {
+                    myCert = certBags[i].getCertificate();
+                    break;
+                }
+            }
+        }
+
+        if (null == myCert) {
+            throw new PKCSException("No owner certificate found");
+        }
+
+        iaik.x509.X509Certificate[] certChain = CertificateBag.getCertificates(certBags);
+        this.certChain = Util.arrangeCertificateChain(certChain, false);
+    }
+
+    /**
+     * Get the ordered certificate chain.
+     */
+    public final X509Certificate[] getCertificateChain() {
+        return this.certChain;
+    }
+
+    /**
+     * Return the private Key
+     */
+    public final PrivateKey getPrivateKey() {
+        return this.key;
+    }
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Entries
new file mode 100644
index 0000000..02442bb
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Entries
@@ -0,0 +1,5 @@
+/GraphAccumListener.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/GraphListener.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/ImageVisualizer.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/Visualizer.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Repository
new file mode 100644
index 0000000..8b76ace
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/visualizers
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/GraphAccumListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/GraphAccumListener.java
new file mode 100644
index 0000000..d6811cd
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/GraphAccumListener.java
@@ -0,0 +1,73 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.visualizers;
+
+import org.apache.jmeter.samplers.SampleResult;
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Khor Soon Hin
+ * @created 2001/08/12
+ * @version 1.0
+ */
+
+
+public interface GraphAccumListener
+{
+	public void updateGui(SampleResult s);
+	public void updateGui();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/GraphListener.java b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/GraphListener.java
new file mode 100644
index 0000000..bfc0a46
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/GraphListener.java
@@ -0,0 +1,70 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.visualizers;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public interface GraphListener
+{
+	public void updateGui(Sample s);
+	public void updateGui();
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/ImageVisualizer.java b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/ImageVisualizer.java
new file mode 100644
index 0000000..74885b5
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/ImageVisualizer.java
@@ -0,0 +1,59 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.visualizers;
+
+public interface ImageVisualizer {
+	public java.awt.Image getImage();
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/Visualizer.java b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/Visualizer.java
new file mode 100644
index 0000000..0b7d47e
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/Visualizer.java
@@ -0,0 +1,78 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.visualizers;
+import javax.swing.JPanel;
+
+import org.apache.jmeter.samplers.SampleResult;
+
+/**
+ * This interface defines those methods needed by a visualizer
+ * to be run and accessed.
+ *
+ * All visualizer pluging must implement this inteface in order
+ * to be plugged into JMeter.
+ *
+ * @author  <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:50 $
+ */
+public interface Visualizer {
+
+	 /**
+	  * This method is called by sampling thread to inform
+	  * the visualizer about the arrival of a new sample.
+	  */
+	 public void add(SampleResult sample);
+}
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/AbstractVisualizer.java b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/AbstractVisualizer.java
new file mode 100644
index 0000000..4d017bf
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/AbstractVisualizer.java
@@ -0,0 +1,119 @@
+package org.apache.jmeter.visualizers.gui;
+import java.io.IOException;
+import java.util.Arrays;
+import java.util.Collection;
+
+import javax.swing.JPopupMenu;
+import javax.swing.event.ChangeEvent;
+import javax.swing.event.ChangeListener;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.gui.AbstractJMeterGuiComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.FilePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.reporters.AbstractListenerElement;
+import org.apache.jmeter.reporters.ResultCollector;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.visualizers.Visualizer;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:50 $
+ *@version   1.0
+ ***************************************/
+
+public abstract class AbstractVisualizer extends AbstractJMeterGuiComponent
+	implements Visualizer, ChangeListener {
+
+		private FilePanel filePanel;
+	ResultCollector collector;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public AbstractVisualizer() {
+		super();
+		filePanel = new FilePanel(this);
+	}
+
+
+	protected ResultCollector getModel() {
+		return collector;
+	}
+
+	protected FilePanel getFilePanel() {
+		return filePanel;
+	}
+
+	public void setFile(String filename) {
+		filePanel.setFilename(filename);
+	}
+
+	public String getFile() {
+		return filePanel.getFilename();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPopupMenu createPopupMenu() {
+		return MenuFactory.getDefaultVisualizerMenu();
+	}
+
+	public void stateChanged(ChangeEvent e) {
+		System.out.println("getting new collector");
+		collector = (ResultCollector) createTestElement();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getMenuCategories() {
+		return Arrays.asList(new String[] { MenuFactory.LISTENERS });
+	}
+
+	public TestElement createTestElement() {
+		if (collector == null) {
+			collector = new ResultCollector();
+		}
+		configureTestElement(collector);
+		try {
+			if (!getFile().equals("")) {
+				try {
+					collector.setFilename(getFile());
+				}
+				catch (IllegalUserActionException e) {
+					JMeterUtils.reportErrorToUser(e.getMessage());
+					setFile("");
+				}
+			}
+		}
+		catch (IOException e) {
+			e.printStackTrace();
+		}
+		return (TestElement)collector.clone();
+	}
+	
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		setFile(el.getPropertyAsString(ResultCollector.FILENAME));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param mc  !ToDo (Parameter description)
+	 ***************************************/
+	protected void configureTestElement(AbstractListenerElement mc) {
+		super.configureTestElement(mc);
+		mc.setListener(this);
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Entries b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Entries
new file mode 100644
index 0000000..ecb97cd
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/AbstractVisualizer.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Repository b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Repository
new file mode 100644
index 0000000..925f77f
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Root b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Tag b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/core/org/apache/jmeter/visualizers/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/functions/CVS/Entries b/jakarta-jmeter/src/functions/CVS/Entries
new file mode 100644
index 0000000..381094d
--- /dev/null
+++ b/jakarta-jmeter/src/functions/CVS/Entries
@@ -0,0 +1 @@
+D/org////
diff --git a/jakarta-jmeter/src/functions/CVS/Repository b/jakarta-jmeter/src/functions/CVS/Repository
new file mode 100644
index 0000000..45e539f
--- /dev/null
+++ b/jakarta-jmeter/src/functions/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/functions
diff --git a/jakarta-jmeter/src/functions/CVS/Root b/jakarta-jmeter/src/functions/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/functions/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/functions/CVS/Tag b/jakarta-jmeter/src/functions/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/functions/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/functions/org/CVS/Entries b/jakarta-jmeter/src/functions/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/functions/org/CVS/Repository b/jakarta-jmeter/src/functions/org/CVS/Repository
new file mode 100644
index 0000000..95a9615
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/functions/org
diff --git a/jakarta-jmeter/src/functions/org/CVS/Root b/jakarta-jmeter/src/functions/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/functions/org/CVS/Tag b/jakarta-jmeter/src/functions/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/functions/org/apache/CVS/Entries b/jakarta-jmeter/src/functions/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/functions/org/apache/CVS/Repository b/jakarta-jmeter/src/functions/org/apache/CVS/Repository
new file mode 100644
index 0000000..224ea37
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/functions/org/apache
diff --git a/jakarta-jmeter/src/functions/org/apache/CVS/Root b/jakarta-jmeter/src/functions/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/functions/org/apache/CVS/Tag b/jakarta-jmeter/src/functions/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..4942696
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Entries
@@ -0,0 +1 @@
+D/functions////
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..007d309
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/functions/org/apache/jmeter
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Entries b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Entries
new file mode 100644
index 0000000..ad67efe
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Entries
@@ -0,0 +1,4 @@
+/IterationCounter.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/RegexFunction.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/ThreadNumber.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Repository b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Repository
new file mode 100644
index 0000000..3788413
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/functions/org/apache/jmeter/functions
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Root b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Tag b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/IterationCounter.java b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/IterationCounter.java
new file mode 100644
index 0000000..54fa11e
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/IterationCounter.java
@@ -0,0 +1,95 @@
+package org.apache.jmeter.functions;
+
+import java.util.Collection;
+import java.util.LinkedList;
+import java.util.List;
+
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.testelement.PerThreadClonable;
+import org.apache.jmeter.threads.JMeterVariables;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * @author default
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ * To enable and disable the creation of type comments go to
+ * Window>Preferences>Java>Code Generation.
+ */
+public class IterationCounter extends AbstractFunction
+{
+	private JMeterVariables vars;
+	private static int counter;
+	private static final List desc = new LinkedList();
+	private boolean perThread = true;
+	
+	static
+	{
+		desc.add(JMeterUtils.getResString("iteration_counter_arg_1"));
+	}
+	
+	private static final String KEY = "__counter";
+	
+	public IterationCounter()
+	{
+		counter = 1;
+	}
+	
+	public Object clone()
+	{
+		IterationCounter newCounter = new IterationCounter();
+		return newCounter;
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#execute(SampleResult, Sampler)
+	 */
+	public String execute(SampleResult previousResult, Sampler currentSampler)
+		throws InvalidVariableException {
+		if(perThread)
+		{
+			return Integer.toString(vars.getIteration());
+		}
+		else
+		{
+			return Integer.toString(counter++);
+		}
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#setParameters(String)
+	 */
+	public void setParameters(String parameters)
+		throws InvalidVariableException {
+			Collection params = this.parseArguments(parameters);
+			String[] values = (String[])params.toArray(new String[0]);
+			perThread = new Boolean(values[0]).booleanValue();
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#getReferenceKey()
+	 */
+	public String getReferenceKey() {
+		return KEY;
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#getArgumentDesc()
+	 */
+	public List getArgumentDesc() {
+		return desc;
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#setJMeterVariables(JMeterVariables)
+	 */
+	public void setJMeterVariables(JMeterVariables jmv) {
+		if(vars == null)
+		{
+			vars = jmv;
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/RegexFunction.java b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/RegexFunction.java
new file mode 100644
index 0000000..503b380
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/RegexFunction.java
@@ -0,0 +1,314 @@
+package org.apache.jmeter.functions;
+
+import java.net.URLDecoder;
+import java.net.URLEncoder;
+import java.util.ArrayList;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Random;
+
+import junit.framework.TestCase;
+
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.threads.JMeterVariables;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.oro.text.regex.MalformedPatternException;
+import org.apache.oro.text.regex.MatchResult;
+import org.apache.oro.text.regex.Pattern;
+import org.apache.oro.text.regex.PatternCompiler;
+import org.apache.oro.text.regex.PatternMatcher;
+import org.apache.oro.text.regex.PatternMatcherInput;
+import org.apache.oro.text.regex.Perl5Compiler;
+import org.apache.oro.text.regex.Perl5Matcher;
+import org.apache.oro.text.regex.Util;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class RegexFunction extends AbstractFunction {
+	
+	public static final String ALL = "ALL";
+	public static final String RAND = "RAND";
+	public static final String KEY = "__regexFunction";	
+	
+	private static Random rand = new Random();
+	private static List desc = new LinkedList();
+	Pattern searchPattern;
+	Object[] template;
+	String valueIndex,defaultValue,between;
+	PatternCompiler compiler = new Perl5Compiler();
+	Pattern templatePattern;
+	
+	static
+	{
+		desc.add(JMeterUtils.getResString("regexfunc_param_1"));
+		desc.add(JMeterUtils.getResString("regexfunc_param_2"));
+		desc.add(JMeterUtils.getResString("regexfunc_param_3"));
+		desc.add(JMeterUtils.getResString("regexfunc_param_4"));
+		desc.add(JMeterUtils.getResString("regexfunc_param_5"));
+	}
+	
+	public RegexFunction()
+	{
+		try {
+			templatePattern = compiler.compile("\\$(\\d+)\\$");
+		} catch(MalformedPatternException e) {
+			e.printStackTrace();
+		}
+	}
+	
+
+	/**
+	 * @see Variable#getValue(SampleResult, Sampler)
+	 */
+	public String execute(SampleResult previousResult,Sampler currentSampler) 
+	{
+		if(previousResult == null || previousResult.getResponseData() == null)
+		{
+			return defaultValue;
+		}
+		List collectAllMatches = new ArrayList();
+		try {
+			PatternMatcher matcher = new Perl5Matcher();
+			String responseText = new String(previousResult.getResponseData());
+			PatternMatcherInput input = new PatternMatcherInput(responseText);
+			while(matcher.contains(input,searchPattern))
+			{
+				MatchResult match = matcher.getMatch();
+				collectAllMatches.add(match);
+			}
+		} catch(NumberFormatException e) {
+			e.printStackTrace();
+		}
+		if(collectAllMatches.size() == 0)
+		{
+			return defaultValue;
+		}
+		if(valueIndex.equals(ALL))
+		{
+			StringBuffer value = new StringBuffer();
+			Iterator it = collectAllMatches.iterator();
+			boolean first = true;
+			while(it.hasNext())
+			{
+				if(!first)
+				{
+					value.append(between);
+					first = false;
+				}
+				value.append(generateResult((MatchResult)it.next()));
+			}
+			return value.toString();
+		}
+		else if(valueIndex.equals(RAND))
+		{
+			return generateResult((MatchResult)collectAllMatches.get(
+					rand.nextInt(collectAllMatches.size())));
+		}
+		else
+		{
+			try {
+				int index = Integer.parseInt(valueIndex) - 1;
+				return generateResult((MatchResult)collectAllMatches.get(index));
+			} catch(NumberFormatException e) {
+				float ratio = Float.parseFloat(valueIndex);
+				return generateResult((MatchResult)collectAllMatches.get(
+						(int)(collectAllMatches.size() * ratio + .5) - 1));
+			}
+		}			
+	}
+	
+	public List getArgumentDesc()
+	{
+		return desc;
+	}
+	
+	private String generateResult(MatchResult match)
+	{
+		StringBuffer result = new StringBuffer();
+		for(int a = 0;a < template.length;a++)
+		{
+			if(template[a] instanceof String)
+			{
+				result.append(template[a]);
+			}
+			else
+			{
+				result.append(match.group(((Integer)template[a]).intValue()));
+			}
+		}
+		return result.toString();
+	}
+	
+	public String getReferenceKey()
+	{
+		return KEY;
+	}
+	
+	public void setJMeterVariables(JMeterVariables xxx)
+	{
+	}
+	
+	public void setParameters(String params) throws InvalidVariableException
+	{
+		try
+		{
+			Iterator tk = parseArguments(params).iterator();
+			valueIndex = "1";
+			between = "";
+			defaultValue = URLDecoder.decode(params);
+			searchPattern = compiler.compile((String)tk.next());			
+			generateTemplate((String)tk.next());
+			if(tk.hasNext())
+			{
+				valueIndex = (String)tk.next();
+			}
+			if(tk.hasNext())
+			{
+				between = (String)tk.next();
+			}
+			if(tk.hasNext())
+			{
+				defaultValue = (String)tk.next();
+			}
+		} catch(MalformedPatternException e) {
+				e.printStackTrace();
+				throw new InvalidVariableException("Bad regex pattern");
+		}
+		catch(Exception e)
+		{
+			throw new InvalidVariableException(e.getMessage());
+		}
+	}
+	
+	private void generateTemplate(String rawTemplate)
+	{
+		List pieces = new ArrayList();
+		List combined = new LinkedList();
+		PatternMatcher matcher = new Perl5Matcher();
+		Util.split(pieces,new Perl5Matcher(),templatePattern,rawTemplate);		
+		PatternMatcherInput input = new PatternMatcherInput(rawTemplate);
+		int count = 0;
+		Iterator iter = pieces.iterator();
+		boolean startsWith = isFirstElementGroup(rawTemplate);
+		while(iter.hasNext())
+		{
+			boolean matchExists = matcher.contains(input,templatePattern);
+			if(startsWith)
+			{
+				if(matchExists)
+				{
+					combined.add(new Integer(matcher.getMatch().group(1)));
+				}
+				combined.add(iter.next());
+			}
+			else
+			{
+				combined.add(iter.next());
+				if(matchExists)
+				{
+					combined.add(new Integer(matcher.getMatch().group(1)));
+				}
+			}
+		}
+		if(matcher.contains(input,templatePattern))
+		{
+			combined.add(new Integer(matcher.getMatch().group(1)));
+		}	
+		template = combined.toArray();	
+	}
+	
+	private boolean isFirstElementGroup(String rawData)
+	{
+		try {
+			Pattern pattern = compiler.compile("^\\$\\d+\\$");
+			return new Perl5Matcher().contains(rawData,pattern);
+		} catch(MalformedPatternException e) {
+			e.printStackTrace();
+			return false;
+		}
+	}
+	
+	public static class Test extends TestCase
+	{
+		RegexFunction variable;
+		SampleResult result;
+		
+		public Test(String name)
+		{
+			super(name);
+		}
+		
+		public void setUp()
+		{
+			variable = new RegexFunction();		
+			result = new SampleResult();
+			String data = "<company-xmlext-query-ret><row><value field=\"RetCode\">LIS_OK</value><value"+
+			" field=\"RetCodeExtension\"></value><value field=\"alias\"></value><value"+
+			" field=\"positioncount\"></value><value field=\"invalidpincount\">0</value><value"+
+			" field=\"pinposition1\">1</value><value"+
+			" field=\"pinpositionvalue1\"></value><value"+
+			" field=\"pinposition2\">5</value><value"+
+			" field=\"pinpositionvalue2\"></value><value"+
+			" field=\"pinposition3\">6</value><value"+
+			" field=\"pinpositionvalue3\"></value></row></company-xmlext-query-ret>";
+			result.setResponseData(data.getBytes());
+		}
+		
+		public void testVariableExtraction() throws Exception
+		{
+			variable.setParameters(URLEncoder.encode("<value field=\"(pinposition\\d+)\">(\\d+)</value>")+",$2$,2");
+			
+			String match = variable.execute(result,null);
+			assertEquals("5",match);			
+		}
+		
+		public void testVariableExtraction2() throws Exception
+		{
+			variable.setParameters(URLEncoder.encode("<value field=\"(pinposition\\d+)\">(\\d+)</value>")+",$1$,3");
+			String match = variable.execute(result,null);
+			assertEquals("pinposition3",match);			
+		}
+		
+		public void testComma() throws Exception
+		{
+			variable.setParameters(URLEncoder.encode("<value,? field=\"(pinposition\\d+)\">(\\d+)</value>")+",$1$,3");
+			String match = variable.execute(result,null);
+			assertEquals("pinposition3",match);			
+		}
+		
+		public void testVariableExtraction3() throws Exception
+		{
+			variable.setParameters(URLEncoder.encode("<value field=\"(pinposition\\d+)\">(\\d+)</value>")+
+					",_$1$,.5");
+			String match = variable.execute(result,null);
+			assertEquals("_pinposition2",match);			
+		}
+		
+		public void testVariableExtraction4() throws Exception
+		{
+			variable.setParameters(URLEncoder.encode(
+					"<value field=\"(pinposition\\d+)\">(\\d+)</value>")+","+URLEncoder.encode("$2$, ")+
+					",.333");
+			
+			String match = variable.execute(result,null);
+			assertEquals("1, ",match);			
+		}
+		
+		public void testDefaultValue() throws Exception
+		{
+			variable.setParameters(URLEncoder.encode(
+					"<value,, field=\"(pinposition\\d+)\">(\\d+)</value>")+","+URLEncoder.encode("$2$, ")+
+					",.333,,No Value Found");
+			
+			String match = variable.execute(result,null);
+			assertEquals("No Value Found",match);			
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/functions/org/apache/jmeter/functions/ThreadNumber.java b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/ThreadNumber.java
new file mode 100644
index 0000000..cf6af1e
--- /dev/null
+++ b/jakarta-jmeter/src/functions/org/apache/jmeter/functions/ThreadNumber.java
@@ -0,0 +1,60 @@
+package org.apache.jmeter.functions;
+
+import java.util.LinkedList;
+import java.util.List;
+
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.threads.JMeterVariables;
+
+/**
+ * @author default
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ * To enable and disable the creation of type comments go to
+ * Window>Preferences>Java>Code Generation.
+ */
+public class ThreadNumber implements Function {
+	
+	private JMeterVariables vars;
+	private static final String KEY = "__threadNum";
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#execute(SampleResult, Sampler)
+	 */
+	public String execute(SampleResult previousResult, Sampler currentSampler)
+		throws InvalidVariableException {
+		return vars.getThreadName().substring(
+				vars.getThreadName().indexOf("-")+1);
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#setParameters(String)
+	 */
+	public void setParameters(String parameters)
+		throws InvalidVariableException {
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#getReferenceKey()
+	 */
+	public String getReferenceKey() {
+		return KEY;
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#getArgumentDesc()
+	 */
+	public List getArgumentDesc() {
+		return new LinkedList();
+	}
+
+	/**
+	 * @see org.apache.jmeter.functions.Function#setJMeterVariables(JMeterVariables)
+	 */
+	public void setJMeterVariables(JMeterVariables jmv) {
+		vars = jmv;
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/CVS/Entries b/jakarta-jmeter/src/protocol/CVS/Entries
new file mode 100644
index 0000000..088277f
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/CVS/Entries
@@ -0,0 +1,5 @@
+D/ftp////
+D/http////
+D/java////
+D/jdbc////
+D/jndi////
diff --git a/jakarta-jmeter/src/protocol/CVS/Repository b/jakarta-jmeter/src/protocol/CVS/Repository
new file mode 100644
index 0000000..d34bcab
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol
diff --git a/jakarta-jmeter/src/protocol/CVS/Root b/jakarta-jmeter/src/protocol/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/CVS/Tag b/jakarta-jmeter/src/protocol/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/CVS/Entries
new file mode 100644
index 0000000..381094d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/CVS/Entries
@@ -0,0 +1 @@
+D/org////
diff --git a/jakarta-jmeter/src/protocol/ftp/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/CVS/Repository
new file mode 100644
index 0000000..d8f1acf
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp
diff --git a/jakarta-jmeter/src/protocol/ftp/CVS/Root b/jakarta-jmeter/src/protocol/ftp/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/CVS/Repository
new file mode 100644
index 0000000..d26585d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org
diff --git a/jakarta-jmeter/src/protocol/ftp/org/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Repository
new file mode 100644
index 0000000..3188ec2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..6961abb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Entries
@@ -0,0 +1 @@
+D/protocol////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..2689982
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Entries
new file mode 100644
index 0000000..2242682
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Entries
@@ -0,0 +1 @@
+D/ftp////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Repository
new file mode 100644
index 0000000..2b6379b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Entries
new file mode 100644
index 0000000..0771fb7
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Entries
@@ -0,0 +1,3 @@
+D/config////
+D/control////
+D/sampler////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Repository
new file mode 100644
index 0000000..3db58aa
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Entries
new file mode 100644
index 0000000..fb351b2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Entries
@@ -0,0 +1,2 @@
+/FtpConfig.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Repository
new file mode 100644
index 0000000..3ec78b2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/FtpConfig.java b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/FtpConfig.java
new file mode 100644
index 0000000..65ddb67
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/FtpConfig.java
@@ -0,0 +1,118 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.ftp.config;
+
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.protocol.ftp.sampler.FTPSampler;
+import org.apache.jmeter.util.JMeterUtils;
+import java.util.Collection;
+import java.io.*;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class FtpConfig extends ConfigTestElement implements Serializable
+{
+
+	public FtpConfig()
+	{
+	}
+
+	public boolean isComplete()
+	{
+		if ((getServer()   != null)   &&
+			 (getFilename() != null)   &&
+			 (!getServer().equals("")) &&
+			 (!getFilename().equals("")))
+		{
+			return true;
+		}
+		else return false;
+	}
+
+	public void setServer(String newServer)
+	{
+		this.setProperty(FTPSampler.SERVER,newServer);
+	}
+	public String getServer()
+	{
+		return (String)this.getProperty(FTPSampler.SERVER);
+	}
+	public void setFilename(String newFilename)
+	{
+		this.setProperty(FTPSampler.FILENAME,newFilename);
+	}
+	public String getFilename()
+	{
+		return (String)this.getProperty(FTPSampler.FILENAME);
+	}
+
+	 /**
+	  * Returns a formatted string label describing this sampler
+	  * Example output:
+	  *      ftp://ftp.nowhere.com/pub/README.txt
+	  *
+	  * @return a formatted string label describing this sampler
+	  */
+	 public String getLabel() {
+		  return ("ftp://" + this.getServer() + "/" + this.getFilename());
+	 }
+}
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Entries
new file mode 100644
index 0000000..dea1b54
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/FtpConfigGui.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Repository
new file mode 100644
index 0000000..45bc040
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/FtpConfigGui.java b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/FtpConfigGui.java
new file mode 100644
index 0000000..7dc94ed
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/config/gui/FtpConfigGui.java
@@ -0,0 +1,183 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.ftp.config.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.ftp.config.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.ftp.sampler.FTPSampler;
+import org.apache.jmeter.config.ConfigTestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:50 $
+ *@version   1.0
+ ***************************************/
+
+public class FtpConfigGui extends AbstractConfigGui
+{
+	private final static String SERVER = "server";
+	private final static String FILENAME = "filename";
+
+	private JTextField server = new JTextField(20);
+	private JTextField filename = new JTextField(20);
+
+	private boolean displayName = true;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public FtpConfigGui()
+	{
+		this(true);
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("ftp_sample_title");
+	}
+
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		server.setText((String)element.getProperty(FTPSampler.SERVER));
+		filename.setText((String)element.getProperty(FTPSampler.FILENAME));
+	}
+
+	public TestElement createTestElement()
+	{
+		ConfigTestElement element = new ConfigTestElement();
+		configureTestElement(element);
+		element.setProperty(FTPSampler.SERVER,server.getText());
+		element.setProperty(FTPSampler.FILENAME,filename.getText());
+		return element;
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param displayName  !ToDo (Parameter description)
+	 ***************************************/
+	public FtpConfigGui(boolean displayName)
+	{
+		this.displayName = displayName;
+		init();
+	}
+
+	private JPanel createServerPanel()
+	{
+		JPanel serverPanel = new JPanel();
+		serverPanel.add(new JLabel(JMeterUtils.getResString("server")));
+		server.setName(SERVER);
+		serverPanel.add(server);
+
+		return serverPanel;
+	}
+
+	private JPanel createFilenamePanel()
+	{
+		JPanel filenamePanel = new JPanel();
+		filenamePanel.add(new JLabel(JMeterUtils.getResString("file_to_retrieve")));
+		filename.setName(FILENAME);
+		filenamePanel.add(filename);
+
+		return filenamePanel;
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(1, VerticalLayout.LEFT));
+		if(displayName)
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("ftp_sample_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+
+			// LOOP
+			mainPanel.add(createServerPanel());
+			mainPanel.add(createFilenamePanel());
+
+			this.add(mainPanel);
+		}
+		else
+		{
+			this.add(createServerPanel());
+			this.add(createFilenamePanel());
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Entries
new file mode 100644
index 0000000..a9ac73a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Entries
@@ -0,0 +1 @@
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Repository
new file mode 100644
index 0000000..363518d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Entries
new file mode 100644
index 0000000..36f8101
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/FtpTestSamplerGui.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Repository
new file mode 100644
index 0000000..bd30ceb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/FtpTestSamplerGui.java b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/FtpTestSamplerGui.java
new file mode 100644
index 0000000..3b16cb3
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/control/gui/FtpTestSamplerGui.java
@@ -0,0 +1,145 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.ftp.control.gui;
+import java.awt.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.config.gui.LoginConfigGui;
+import org.apache.jmeter.config.gui.LoginConfigGui;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.ftp.config.gui.FtpConfigGui;
+import org.apache.jmeter.protocol.ftp.control.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.samplers.gui.AbstractSamplerGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.ftp.sampler.FTPSampler;
+
+/****************************************
+ * Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ * Apache Foundation
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:50 $
+ *@version   1.0
+ ***************************************/
+
+public class FtpTestSamplerGui extends AbstractSamplerGui
+{
+	private LoginConfigGui loginPanel;
+	private FtpConfigGui ftpDefaultPanel;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public FtpTestSamplerGui()
+	{
+		init();
+	}
+
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		loginPanel.configure(element);
+		ftpDefaultPanel.configure(element);
+	}
+
+
+	public TestElement createTestElement()
+	{
+		FTPSampler sampler = new FTPSampler();
+		sampler.addTestElement(ftpDefaultPanel.createTestElement());
+		sampler.addTestElement(loginPanel.createTestElement());
+		this.configureTestElement(sampler);
+		return sampler;
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("ftp_testing_title");
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("ftp_testing_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		loginPanel = new LoginConfigGui(false);
+		ftpDefaultPanel = new FtpConfigGui(false);
+		//ftpDefaultPanel.setBorder(BorderFactory.createTitledBorder("Default Values"));
+		loginPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("login_config")));
+
+		mainPanel.add(getNamePanel());
+		mainPanel.add(ftpDefaultPanel);
+		mainPanel.add(loginPanel);
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Entries b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Entries
new file mode 100644
index 0000000..5af43ed
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Entries
@@ -0,0 +1,3 @@
+/FTPSampler.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/FtpClient.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Repository b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Repository
new file mode 100644
index 0000000..07e42dd
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Root b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Tag b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/FTPSampler.java b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/FTPSampler.java
new file mode 100644
index 0000000..8c2d7a8
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/FTPSampler.java
@@ -0,0 +1,184 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.ftp.sampler;
+
+import java.sql.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.protocol.ftp.config.*;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.AbstractSampler;
+import org.apache.jmeter.testelement.TestElement;
+
+/************************************************************
+ *  A sampler which understands FTP file requests
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:50 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+
+public class FTPSampler extends AbstractSampler
+{
+	public final static String SERVER = "FTPSampler.server";
+	public final static String FILENAME = "FTPSampler.filename";
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public FTPSampler()
+	{
+	}
+
+	public void addCustomTestElement(TestElement element)
+	{
+		if(element instanceof FtpConfig || element instanceof LoginConfig)
+		{
+			mergeIn(element);
+		}
+	}
+	
+	public String getUsername()
+	{
+		return getPropertyAsString(ConfigTestElement.USERNAME);
+	}
+	
+	public String getPassword()
+	{
+		return getPropertyAsString(ConfigTestElement.PASSWORD);
+	}
+	
+	public void setServer(String newServer)
+	{
+		this.setProperty(SERVER,newServer);
+	}
+	public String getServer()
+	{
+		return (String)this.getProperty(SERVER);
+	}
+	public void setFilename(String newFilename)
+	{
+		this.setProperty(FILENAME,newFilename);
+	}
+	public String getFilename()
+	{
+		return (String)this.getProperty(FILENAME);
+	}
+	
+	/**
+	  * Returns a formatted string label describing this sampler
+	  * Example output:
+	  *      ftp://ftp.nowhere.com/pub/README.txt
+	  *
+	  * @return a formatted string label describing this sampler
+	  */
+	 public String getLabel() {
+		  return ("ftp://" + this.getServer() + "/" + this.getFilename());
+	 }
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public SampleResult sample(Entry e)
+	{
+		SampleResult res = new SampleResult();
+		Connection con = null;
+		ResultSet rs = null;
+		Statement stmt = null;
+		  boolean isSuccessful = false;
+		//FtpConfig ftpConfig = (FtpConfig)e.getConfigElement(FtpConfig.class);
+		  res.setSampleLabel(getLabel());
+		  //LoginConfig loginConfig = (LoginConfig)e.getConfigElement(LoginConfig.class);
+		long start = System.currentTimeMillis();
+		try
+		{
+			FtpClient ftp = new FtpClient();
+			ftp.connect(getServer(), getUsername(),getPassword());
+			ftp.setPassive(true); // this should probably come from the setup dialog
+			String s = ftp.get(getFilename());
+			res.setResponseData(s.getBytes());
+				// set the response code here somewhere
+			ftp.disconnect();
+				isSuccessful = true;
+			//System.out.println(s);
+		}
+		catch (java.net.ConnectException cex)
+		{
+				// java.net.ConnectException -- 502 error code?
+				// in the future, possibly define and place error codes into the
+				// result so we know exactly what happened.
+				res.setResponseData(cex.toString().getBytes());
+		}
+		  catch (Exception ex) {
+				// general exception
+				res.setResponseData(ex.toString().getBytes());
+		  }
+
+		  // Calculate response time
+		long end = System.currentTimeMillis();
+		  res.setTime(end - start);
+
+		  // Set if we were successful or not
+		  res.setSuccessful(isSuccessful);
+
+		return res;
+	}
+}
+
diff --git a/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/FtpClient.java b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/FtpClient.java
new file mode 100644
index 0000000..04ab9dd
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/ftp/org/apache/jmeter/protocol/ftp/sampler/FtpClient.java
@@ -0,0 +1,401 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.ftp.sampler;
+
+import java.io.*;
+import java.net.*;
+
+/*
+ * Simple FTP client (non-passive transfers don't work yet)
+ * kind of a hack, lots of room for optimizations
+ */
+
+/**
+ *  Description of the Class
+ *
+ *@author     mike
+ *@created    August 31, 2001
+ */
+public class FtpClient
+{
+	File f = new File("e:\\");
+	BufferedWriter out;
+	BufferedReader in;
+	Socket s;
+	boolean passive = false;
+	static int port = 21;
+	static int dataPort = 4096;
+
+	/**
+	 *  Constructor for the FtpClient object
+	 */
+	public FtpClient()
+	{
+	}
+
+	/**
+	 *  set passive mode
+	 *
+	 *@param  flag  The new Passive value
+	 */
+	public void setPassive(boolean flag)
+	{
+		passive = flag;
+	}
+
+	/**
+	 *  get a file from the server
+	 *
+	 *@return                  The Response value
+	 *@exception  IOException  Description of Exception
+	 */
+	public String getResponse() throws IOException
+	{
+		StringBuffer response = new StringBuffer();
+		String line = in.readLine();
+		response.append(line);
+		//System.out.println("#" + line + "#");
+		while (line.charAt(3) == '-')
+		{
+			line = in.readLine();
+			response.append("\n");
+			response.append(line);
+			//System.out.println("#" + line + "#");
+		}
+		//System.out.println("return response");
+		return response.toString();
+	}
+
+	/**
+	 *  get a file from the server
+	 *
+	 *@param  file           Description of Parameter
+	 *@return                Description of the Returned Value
+	 *@exception  Exception  Description of Exception
+	 */
+	public String get(String file) throws Exception
+	{
+		send("SYST");
+		getResponse();
+		send("PWD");
+		getResponse();
+		send("TYPE I");
+		getResponse();
+		String data = "";
+		if (!passive)
+		{
+			dataPort++;
+			int upper = getUpper(dataPort);
+			int lower = getLower(dataPort);
+			String ip = InetAddress.getLocalHost().getHostAddress().replace('.', ',');
+			String port = ip + "," + upper + "," + lower;
+			System.out.println("port:" + port);
+			send("PORT " + port);
+			getResponse();
+			dataGrabber grab = new dataGrabber(ip, dataPort);
+			while (!grab.isPortCreated())
+			{
+			}
+			send("RETR " + file);
+			String response = in.readLine();
+			System.out.println(response);
+			System.out.println(dataPort);
+			data = "FTP client - File Not Found";
+			if (!response.startsWith("5"))
+			{
+				while (!grab.isDone())
+				{
+				}
+				data = grab.getData();
+			}
+		}
+		else
+		{
+			send("PASV");
+			String port = getResponse();
+			while (!port.startsWith("227"))
+			{
+				port = getResponse();
+			}
+			int start = port.indexOf('(');
+			int end = port.indexOf(')');
+			port = port.substring(start + 1, end);
+			int a = port.indexOf(',');
+			int b = port.indexOf(',', a + 1);
+			int c = port.indexOf(',', b + 1);
+			int d = port.indexOf(',', c + 1);
+			int e = port.indexOf(',', d + 1);
+			String ip = port.substring(0, a) + "." + port.substring(a + 1, b) + "." + port.substring(b + 1, c) + "." + port.substring(c + 1, d);
+			int upper = Integer.parseInt(port.substring(d + 1, e));
+			int lower = Integer.parseInt(port.substring(e + 1));
+			int dataPort = getPort(upper, lower);
+			send("RETR " + file);
+			dataGrabber grab = new dataGrabber(ip, dataPort);
+			getResponse();
+			while (!grab.isDone())
+			{
+			}
+			data = grab.getData();
+		}
+		return data;
+	}
+
+	/**
+	 *  connect to server
+	 *
+	 *@param  host           Description of Parameter
+	 *@param  username       Description of Parameter
+	 *@param  password       Description of Parameter
+	 *@exception  Exception  Description of Exception
+	 */
+	public void connect(String host, String username, String password) throws Exception
+	{
+		InetAddress addr = InetAddress.getByName(host);
+		s = new Socket(addr, port);
+		out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
+		
+		InputStreamReader isr = new InputStreamReader(s.getInputStream());
+		in = new BufferedReader(isr);
+		//System.out.println(in.readLine());
+		send("USER " + username);
+		//System.out.println(getResponse());
+		send("PASS " + password);
+		//System.out.println(getResponse());
+		//System.out.println("Done connecting");
+	}
+
+	/**
+	 *  disconnect from the server
+	 */
+	public void disconnect()
+	{
+		try
+		{
+			send("QUIT");
+			getResponse();
+		}
+		catch (Exception e)
+		{
+			System.out.println("FTP client - " + e.toString());
+		}
+		try
+		{
+			in.close();
+			out.close();
+			s.close();
+		}
+		catch (Exception e)
+		{
+			System.out.println("FTP client - " + e.toString());
+		}
+	}
+
+	/**
+	 *  send a command to the server
+	 *
+	 *@param  command          Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 */
+	public void send(String command) throws IOException
+	{
+		//System.out.println("#" + command + "#");
+		for (int i = 0; i < command.length(); i++)
+		{
+			out.write(command.charAt(i));
+		}
+		out.write('\r');
+		out.write('\n');
+		out.flush();
+	}
+
+	/**
+	 *  Gets the Port attribute of the FtpClient class
+	 *
+	 *@param  upper  Description of Parameter
+	 *@param  lower  Description of Parameter
+	 *@return        The Port value
+	 */
+	public static int getPort(int upper, int lower)
+	{
+		return upper * 256 + lower;
+	}
+
+	/**
+	 *  Gets the Upper attribute of the FtpClient class
+	 *
+	 *@param  port  Description of Parameter
+	 *@return       The Upper value
+	 */
+	public static int getUpper(int port)
+	{
+		return port / 256;
+	}
+
+	/**
+	 *  Gets the Lower attribute of the FtpClient class
+	 *
+	 *@param  port  Description of Parameter
+	 *@return       The Lower value
+	 */
+	public static int getLower(int port)
+	{
+		return port % 256;
+	}
+
+	/**
+	 *  grabs the data from the dataport
+	 *
+	 *@author     mike
+	 *@created    August 31, 2001
+	 */
+	public class dataGrabber implements Runnable
+	{
+		StringBuffer buffer = new StringBuffer();
+		Socket s;
+		boolean done = false;
+		boolean portCreated = false;
+		String host = "";
+		int port = 22;
+
+		/**
+		 *  Constructor for the dataGrabber object
+		 *
+		 *@param  host           Description of Parameter
+		 *@param  port           Description of Parameter
+		 *@exception  Exception  Description of Exception
+		 */
+		public dataGrabber(String host, int port) throws Exception
+		{
+			this.host = host;
+			this.port = port;
+			new Thread((Runnable) this).start();
+		}
+
+		/**
+		 *  Gets the Done attribute of the dataGrabber object
+		 *
+		 *@return    The Done value
+		 */
+		public boolean isDone()
+		{
+			return done;
+		}
+
+		/**
+		 *  Gets the Data attribute of the dataGrabber object
+		 *
+		 *@return    The Data value
+		 */
+		public String getData()
+		{
+			return buffer.toString();
+		}
+
+		/**
+		 *  Gets the PortCreated attribute of the dataGrabber object
+		 *
+		 *@return    The PortCreated value
+		 */
+		public boolean isPortCreated()
+		{
+			return portCreated;
+		}
+
+		/**
+		 *  Main processing method for the dataGrabber object
+		 */
+		public void run()
+		{
+			try
+			{
+				if (passive)
+				{
+					s = new Socket(host, port);
+				}
+				else
+				{
+					System.out.println("creating socket on " + port);
+					ServerSocket server = new ServerSocket(port);
+					System.out.println("accepting...");
+					portCreated = true;
+					s = server.accept();
+					System.out.println("accepted");
+				}
+			}
+			catch (Exception e)
+			{
+			}
+			try
+			{
+				InputStream in = s.getInputStream();
+				BufferedInputStream dataIn = new BufferedInputStream(in);
+				int bufferSize = 4096;
+				byte[] inputBuffer = new byte[bufferSize];
+				int i = 0;
+				while ((i = dataIn.read(inputBuffer, 0, bufferSize)) != -1)
+				{
+					buffer.append((char) i);
+				}
+				dataIn.close();
+				s.close();
+			}
+			catch (Exception e)
+			{
+				System.out.println("FTP client: dataGrabber - " + e.toString());
+			}
+			done = true;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/CVS/Entries b/jakarta-jmeter/src/protocol/http/CVS/Entries
new file mode 100644
index 0000000..381094d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/CVS/Entries
@@ -0,0 +1 @@
+D/org////
diff --git a/jakarta-jmeter/src/protocol/http/CVS/Repository b/jakarta-jmeter/src/protocol/http/CVS/Repository
new file mode 100644
index 0000000..0a6ae94
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http
diff --git a/jakarta-jmeter/src/protocol/http/CVS/Root b/jakarta-jmeter/src/protocol/http/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/CVS/Tag b/jakarta-jmeter/src/protocol/http/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/protocol/http/org/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/CVS/Repository
new file mode 100644
index 0000000..0c646c6
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org
diff --git a/jakarta-jmeter/src/protocol/http/org/CVS/Root b/jakarta-jmeter/src/protocol/http/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Repository
new file mode 100644
index 0000000..9529f37
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..ff10e14
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Entries
@@ -0,0 +1,2 @@
+D/junit////
+D/protocol////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..451cb62
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Entries
new file mode 100644
index 0000000..6961abb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Entries
@@ -0,0 +1 @@
+D/protocol////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Repository
new file mode 100644
index 0000000..29d1824
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Entries
new file mode 100644
index 0000000..f5abe5b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Entries
@@ -0,0 +1 @@
+D/http////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Repository
new file mode 100644
index 0000000..cc3523d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Entries
new file mode 100644
index 0000000..63077ae
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Entries
@@ -0,0 +1,2 @@
+D/config////
+D/parser////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Repository
new file mode 100644
index 0000000..93c4404
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Entries
new file mode 100644
index 0000000..2e6fb15
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Entries
@@ -0,0 +1,3 @@
+/HttpConfigSuite.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/UrlConfigTest.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Repository
new file mode 100644
index 0000000..df129c5
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/HttpConfigSuite.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/HttpConfigSuite.java
new file mode 100644
index 0000000..caee174
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/HttpConfigSuite.java
@@ -0,0 +1,75 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.junit.protocol.http.config;
+
+import junit.framework.*;
+/**
+ * Title:        Apache JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache Foundation
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class HttpConfigSuite
+{
+
+	public static TestSuite suite()
+	{
+		TestSuite test = new TestSuite(UrlConfigTest.class);
+		return test;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/UrlConfigTest.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/UrlConfigTest.java
new file mode 100644
index 0000000..c6aef99
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/config/UrlConfigTest.java
@@ -0,0 +1,239 @@
+/*
+
+ * ====================================================================
+
+ * The Apache Software License, Version 1.1
+
+ *
+
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+
+ * reserved.
+
+ *
+
+ * Redistribution and use in source and binary forms, with or without
+
+ * modification, are permitted provided that the following conditions
+
+ * are met:
+
+ *
+
+ * 1. Redistributions of source code must retain the above copyright
+
+ * notice, this list of conditions and the following disclaimer.
+
+ *
+
+ * 2. Redistributions in binary form must reproduce the above copyright
+
+ * notice, this list of conditions and the following disclaimer in
+
+ * the documentation and/or other materials provided with the
+
+ * distribution.
+
+ *
+
+ * 3. The end-user documentation included with the redistribution,
+
+ * if any, must include the following acknowledgment:
+
+ * "This product includes software developed by the
+
+ * Apache Software Foundation (http://www.apache.org/)."
+
+ * Alternately, this acknowledgment may appear in the software itself,
+
+ * if and wherever such third-party acknowledgments normally appear.
+
+ *
+
+ * 4. The names "Apache" and "Apache Software Foundation" and
+
+ * "Apache JMeter" must not be used to endorse or promote products
+
+ * derived from this software without prior written permission. For
+
+ * written permission, please contact apache@apache.org.
+
+ *
+
+ * 5. Products derived from this software may not be called "Apache",
+
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+
+ * prior written permission of the Apache Software Foundation.
+
+ *
+
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+
+ * SUCH DAMAGE.
+
+ * ====================================================================
+
+ *
+
+ * This software consists of voluntary contributions made by many
+
+ * individuals on behalf of the Apache Software Foundation.  For more
+
+ * information on the Apache Software Foundation, please see
+
+ * <http://www.apache.org/>.
+
+ */
+
+ package org.apache.jmeter.junit.protocol.http.config;
+
+
+
+import junit.framework.TestCase;
+
+
+
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+
+
+
+/**
+
+ * Title:        Apache JMeter
+
+ * Description:
+
+ * Copyright:    Copyright (c) 2000
+
+ * Company:      Apache Foundation
+
+ * @author Michael Stover
+
+ * @version 1.0
+
+ */
+
+
+
+public class UrlConfigTest extends TestCase
+
+{
+
+	HTTPSampler config;
+
+	HTTPSampler defaultConfig;
+
+	HTTPSampler partialConfig;
+
+
+
+	public UrlConfigTest(String name)
+
+	{
+
+		super(name);
+
+	}
+
+
+
+	protected void setUp()
+
+	{
+
+		Arguments args = new Arguments();
+
+		args.addArgument("username","mstover");
+
+		args.addArgument("password","pass");
+
+		args.addArgument("action","login");
+
+		config = new HTTPSampler();
+
+		config.setName("Full Config");
+
+		config.setProperty(HTTPSampler.DOMAIN,"www.lazer.com");
+
+		config.setProperty(HTTPSampler.PATH,"login.jsp");
+
+		config.setProperty(HTTPSampler.METHOD,HTTPSampler.POST);
+
+		config.setProperty(HTTPSampler.ARGUMENTS,args);
+
+
+
+		defaultConfig = new HTTPSampler();
+
+		defaultConfig.setName("default");
+
+		defaultConfig.setProperty(HTTPSampler.DOMAIN,"www.xerox.com");
+
+		defaultConfig.setProperty(HTTPSampler.PATH,"default.html");
+
+
+
+		partialConfig = new HTTPSampler();
+
+		partialConfig.setProperty(HTTPSampler.PATH,"main.jsp");
+
+		partialConfig.setProperty(HTTPSampler.METHOD,HTTPSampler.GET);
+
+	}
+
+
+
+	public void testSimpleConfig()
+
+	{
+
+		assertTrue(config.getName().equals("Full Config"));
+
+		assertEquals(config.getDomain(),"www.lazer.com");
+
+	}
+
+
+
+	public void testOverRide()
+	{
+		this.assertNull(partialConfig.getProperty(HTTPSampler.DOMAIN));
+		partialConfig.addTestElement(defaultConfig);
+		assertEquals(partialConfig.getProperty(HTTPSampler.DOMAIN),"www.xerox.com");
+		assertEquals(partialConfig.getProperty(HTTPSampler.PATH),"main.jsp");
+	}
+
+
+
+
+
+	public static void main(String[] args)
+
+	{
+
+	}
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Entries
new file mode 100644
index 0000000..7ccb799
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Entries
@@ -0,0 +1,2 @@
+/HtmlParserTester.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Repository
new file mode 100644
index 0000000..287c120
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/HtmlParserTester.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/HtmlParserTester.java
new file mode 100644
index 0000000..c299668
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/junit/protocol/http/parser/HtmlParserTester.java
@@ -0,0 +1,234 @@
+package org.apache.jmeter.junit.protocol.http.parser;
+
+import java.net.*;
+
+import org.apache.jmeter.protocol.http.modifier.AnchorModifier;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.samplers.SampleResult;
+
+import junit.framework.TestCase;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author
+ *@created    June 14, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public class HtmlParserTester extends TestCase
+{
+
+	AnchorModifier parser = new AnchorModifier();
+
+	/************************************************************
+	 *  Constructor for the HtmlParserTester object
+	 *
+	 *@param  name  Description of Parameter
+	 ***********************************************************/
+	public HtmlParserTester(String name)
+	{
+		super(name);
+	}
+
+	/************************************************************
+	 *  A unit test for JUnit
+	 *
+	 *@exception  Exception  Description of Exception
+	 ***********************************************************/
+	public void testSimpleParse() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig(".*/index\\.html");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"index.html\">Goto index page</a></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		assertEquals("http://www.apache.org:80/subdir/index.html",
+				config.getUrl().toString());
+	}
+
+	public void testSimpleParse2() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig("/index\\.html");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"/index.html\">Goto index page</a>hfdfjiudfjdfjkjfkdjf"+
+				"<b>bold text</b><a href=lowerdir/index.html>lower</a></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		String newUrl = config.getUrl().toString();
+		assertTrue("http://www.apache.org:80/index.html".equals(newUrl)
+				|| "http://www.apache.org:80/subdir/lowerdir/index.html".equals(newUrl));
+
+	}
+
+	public void testSimpleParse3() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig(".*index.*");
+		config.getArguments().addArgument("param1","value1");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"/home/index.html?param1=value1\">Goto index page</a></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		String newUrl = config.getUrl().toString();
+		assertEquals("http://www.apache.org:80/home/index.html?param1=value1",newUrl);
+	}
+
+	public void testSimpleParse4() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig("/subdir/index\\..*");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<A HREF=\"index.html\">Goto index page</A></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		String newUrl = config.getUrl().toString();
+		assertEquals("http://www.apache.org:80/subdir/index.html",newUrl);
+	}
+
+	public void testSimpleParse5() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig("/subdir/index\\.h.*");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/one/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"../index.html\">Goto index page</a></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		String newUrl = config.getUrl().toString();
+		assertEquals("http://www.apache.org:80/subdir/index.html",newUrl);
+	}
+
+	public void testFailSimpleParse1() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig(".*index.*?param2=.+1");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"/home/index.html?param1=value1\">Goto index page</a></body></html>";
+		SampleResult result = new SampleResult();
+		String newUrl = config.getUrl().toString();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		assertEquals(newUrl,config.getUrl().toString());
+	}
+	
+	public void testFailSimpleParse3() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig("/home/index.html");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"/home/index.html?param1=value1\">Goto index page</a></body></html>";
+		SampleResult result = new SampleResult();
+		String newUrl = config.getUrl().toString();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		assertEquals(newUrl+"?param1=value1",config.getUrl().toString());
+	}
+
+	public void testFailSimpleParse2() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig(".*login\\.html");
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<a href=\"/home/index.html?param1=value1\">Goto index page</a></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		String newUrl = config.getUrl().toString();
+		this.assertTrue(!"http://www.apache.org:80/home/index.html?param1=value1".equals(newUrl));
+		assertEquals(config.getUrl().toString(),newUrl);
+	}
+
+	/************************************************************
+	 *  A unit test for JUnit
+	 *
+	 *@exception  Exception  Description of Exception
+	 ***********************************************************/
+	public void testSimpleFormParse() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig(".*index.html");
+		config.addArgument("test","g.*");
+		config.setMethod(HTTPSampler.POST);
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<form action=\"index.html\" method=\"POST\"><input type=\"checkbox\" name=\"test\""+
+				" value=\"goto\">Goto index page</form></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		assertEquals("http://www.apache.org:80/subdir/index.html",
+				config.getUrl().toString());
+		assertEquals("test=goto",config.getQueryString());
+	}
+	
+	/************************************************************
+	 *  A unit test for JUnit
+	 *
+	 *@exception  Exception  Description of Exception
+	 ***********************************************************/
+	public void testBadCharParse() throws Exception
+	{
+		HTTPSampler config = makeUrlConfig(".*index.html");
+		config.addArgument("te$st","g.*");
+		config.setMethod(HTTPSampler.POST);
+		HTTPSampler context = makeContext("http://www.apache.org/subdir/previous.html");
+		String responseText = "<html><head><title>Test page</title></head><body>" +
+				"<form action=\"index.html\" method=\"POST\"><input type=\"checkbox\" name=\"te$st\""+
+				" value=\"goto\">Goto index page</form></body></html>";
+		SampleResult result = new SampleResult();
+		result.setResponseData(responseText.getBytes());
+		result.setSampleLabel(context.toString());
+		result.setSamplerData(context);
+		parser.modifyEntry(config, result);
+		assertEquals("http://www.apache.org:80/subdir/index.html",
+				config.getUrl().toString());
+		assertEquals("te%24st=goto",config.getQueryString());
+	}
+	
+	private HTTPSampler makeContext(String url) throws MalformedURLException
+	{
+		URL u = new URL(url);
+		HTTPSampler context = new HTTPSampler();
+		context.setDomain(u.getHost());
+		context.setPath(u.getPath());
+		context.setPort(u.getPort());
+		context.setProtocol(u.getProtocol());
+		context.parseArguments(u.getQuery());
+		return context;
+	}
+
+	private HTTPSampler makeUrlConfig(String path)
+	{
+		HTTPSampler config = new HTTPSampler();
+		config.setDomain("www.apache.org");
+		config.setMethod(config.GET);
+		config.setPath(path);
+		config.setPort(80);
+		config.setProtocol("http");
+		return config;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Entries
new file mode 100644
index 0000000..f5abe5b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Entries
@@ -0,0 +1 @@
+D/http////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Repository
new file mode 100644
index 0000000..6876370
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Entries
new file mode 100644
index 0000000..7dfd41a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Entries
@@ -0,0 +1,8 @@
+D/config////
+D/control////
+D/gui////
+D/modifier////
+D/parser////
+D/proxy////
+D/sampler////
+D/util////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Repository
new file mode 100644
index 0000000..36261f0
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Entries
new file mode 100644
index 0000000..513d426
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Entries
@@ -0,0 +1,2 @@
+/MultipartUrlConfig.java/1.3/Wed Aug 14 02:52:19 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Repository
new file mode 100644
index 0000000..5f81b4d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/MultipartUrlConfig.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/MultipartUrlConfig.java
new file mode 100644
index 0000000..9e97b94
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/MultipartUrlConfig.java
@@ -0,0 +1,192 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.http.config;
+
+import java.io.Serializable;
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class MultipartUrlConfig implements Serializable
+{
+
+	public static String MULTIPART_FORM = "multipart/form-data";
+	private static String BOUNDARY = "boundary";
+	private String boundary,filename,fileField,mimetype;
+	private Arguments args;
+
+	public MultipartUrlConfig()
+	{
+		args = new Arguments();
+	}
+
+	public MultipartUrlConfig(String boundary)
+	{
+		this();
+		this.boundary = boundary;
+	}
+
+	public void setBoundary(String boundary)
+	{
+		this.boundary = boundary;
+	}
+
+	public String getBoundary()
+	{
+		return boundary;
+	}
+
+	public void setFilename(String filename)
+	{
+		this.filename = filename;
+	}
+
+	public String getFilename()
+	{
+		return filename;
+	}
+	
+	public Arguments getArguments()
+	{
+		return args;
+	}
+
+	public void setFileFieldName(String name)
+	{
+		this.fileField = name;
+	}
+
+	public String getFileFieldName()
+	{
+		return fileField;
+	}
+
+	public void setMimeType(String type)
+	{
+		mimetype = type;
+	}
+
+	public String getMimeType()
+	{
+		return mimetype;
+	}
+	
+	public void addArgument(String name,String value)
+	{
+		Arguments args = this.getArguments();
+		args.addArgument(new HTTPArgument(name,value));
+	}
+
+	public void addArgument(String name,String value,String metadata)
+	{
+		Arguments args = this.getArguments();
+		args.addArgument(new HTTPArgument(name,value,metadata));
+	}
+	
+	public void addEncodedArgument(String name,String value)
+	{
+		Arguments args = getArguments();
+		HTTPArgument arg = new HTTPArgument(name,value,true);
+		if(arg.getName().equals(arg.getEncodedName()) && arg.getValue().equals(arg.getEncodedValue()))
+		{
+			arg.setAlwaysEncode(false);
+		}
+		args.addArgument(new HTTPArgument(name,value,true));
+	}
+
+		/**
+	 * This method allows a proxy server to send over the raw text from a browser's
+	 * output stream to be parsed and stored correctly into the UrlConfig object.
+	 */
+	public void parseArguments(String queryString)
+	{
+		String[] parts = JMeterUtils.split(queryString,"--"+getBoundary());
+		for (int i = 0; i < parts.length; i++)
+		{
+			if(parts[i].indexOf("filename=") > -1)
+			{
+				int index = parts[i].indexOf("name=\"")+6;
+				String name = parts[i].substring(index,parts[i].indexOf("\"",index));
+				index = parts[i].indexOf("filename=\"")+10;
+				String filename = parts[i].substring(index,parts[i].indexOf("\"",index));
+				index = parts[i].indexOf("\n",index);
+				index = parts[i].indexOf(":",index)+1;
+				String mimetype = parts[i].substring(index,parts[i].indexOf("\n",index)).trim();
+				this.setFileFieldName(name);
+				this.setFilename(filename);
+				this.setMimeType(mimetype);
+			}
+			else if(parts[i].indexOf("name=") > -1)
+			{
+				int index = parts[i].indexOf("name=\"")+6;
+				String name = parts[i].substring(index,parts[i].indexOf("\"",index));
+				index = parts[i].indexOf("\n",index)+2;
+				String value = parts[i].substring(index).trim();
+				this.addEncodedArgument(name,value);
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Entries
new file mode 100644
index 0000000..4d95beb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Entries
@@ -0,0 +1,3 @@
+/MultipartUrlConfigGui.java/1.1/Sun Aug 11 19:24:50 2002//Tv1_7_3
+/UrlConfigGui.java/1.2/Wed Aug 14 02:52:19 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Repository
new file mode 100644
index 0000000..9f9bb96
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/MultipartUrlConfigGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/MultipartUrlConfigGui.java
new file mode 100644
index 0000000..ea16fba
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/MultipartUrlConfigGui.java
@@ -0,0 +1,335 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.config.gui;
+import java.awt.BorderLayout;
+import java.awt.Font;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.BorderLayout;
+import java.io.File;
+import java.util.Collection;
+
+import javax.swing.BorderFactory;
+import javax.swing.JButton;
+import javax.swing.JFileChooser;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JTextField;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:50 $
+ *@version   1.0
+ ***************************************/
+
+public class MultipartUrlConfigGui extends UrlConfigGui implements ActionListener
+{
+
+	JTextField filenameField;
+	JTextField paramNameField;
+	JTextField mimetypeField;
+	JLabel filenameLabel;
+	JLabel paramNameLabel;
+	JLabel mimetypeLabel;
+	JButton browseFileButton;
+	private static String FILENAME = "filename";
+	private static String BROWSE = "browse";
+	private static String PARAMNAME = "paramname";
+	private static String MIMETYPE = "mimetype";
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public MultipartUrlConfigGui()
+	{
+		this(true);
+	}
+
+	public Collection getMenuCategories()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param displayName  !ToDo (Parameter description)
+	 ***************************************/
+	public MultipartUrlConfigGui(boolean displayName)
+	{
+		super(displayName);
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		TestElement ce = super.createTestElement();
+		configureTestElement(ce);
+		ce.setProperty(HTTPSampler.MIMETYPE, mimetypeField.getText());
+		ce.setProperty(HTTPSampler.FILE_NAME, filenameField.getText());
+		ce.setProperty(HTTPSampler.FILE_FIELD, paramNameField.getText());
+		return ce;
+	}
+
+	public void configureSampler(HTTPSampler sampler)
+	{
+		sampler.setMimetype(mimetypeField.getText());
+		sampler.setFileField(paramNameField.getText());
+		sampler.setFilename(filenameField.getText());
+		super.configureSampler(sampler);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		mimetypeField.setText((String)el.getProperty(HTTPSampler.MIMETYPE));
+		filenameField.setText((String)el.getProperty(HTTPSampler.FILE_NAME));
+		paramNameField.setText((String)el.getProperty(HTTPSampler.FILE_FIELD));
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("url_multipart_config_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void updateGui() { }
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void actionPerformed(ActionEvent e)
+	{
+		String name = e.getActionCommand();
+		if(name.equals(BROWSE))
+		{
+			JFileChooser chooser = FileDialoger.promptToOpenFile();
+			if(chooser == null)
+			{
+				return;
+			}
+			File file = chooser.getSelectedFile();
+			if(file != null)
+			{
+				filenameField.setText(file.getPath());
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	protected void init()
+	{
+		this.setLayout(new BorderLayout());
+
+		// WEB SERVER PANEL
+		JPanel webServerPanel = new JPanel();
+		webServerPanel.setLayout(new BorderLayout());
+		webServerPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("web_server")));
+		webServerPanel.add(getDomainPanel(),BorderLayout.NORTH);
+		webServerPanel.add(getPortPanel(),BorderLayout.SOUTH);
+
+		// WEB REQUEST PANEL
+		JPanel webRequestPanel = new JPanel(new BorderLayout());
+		JPanel northPanel = new JPanel(new BorderLayout());
+		webRequestPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("web_request")));
+		northPanel.add(getProtocolAndMethodPanel(),BorderLayout.NORTH);
+		northPanel.add(getPathPanel(),BorderLayout.SOUTH);
+		webRequestPanel.add(northPanel,BorderLayout.NORTH);
+		webRequestPanel.add(getParameterPanel(),BorderLayout.CENTER);
+		webRequestPanel.add(getFilePanel(),BorderLayout.SOUTH);
+
+		// If displayName is TRUE, then this GUI is not embedded in another GUI.
+		if(displayName)
+		{
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new BorderLayout());
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("url_full_config_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+
+			mainPanel.add(webServerPanel);
+			mainPanel.add(webRequestPanel);
+
+			this.add(mainPanel);
+		}
+		else
+		{// Embed this GUI in the parent GUI
+
+			this.add(webServerPanel,BorderLayout.NORTH);
+			this.add(webRequestPanel,BorderLayout.CENTER);
+		}
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	protected JPanel getFilePanel()
+	{
+		// FILE PANEL (all main components are add to this panel)
+		JPanel filePanel = new JPanel();
+		filePanel.setLayout(new VerticalLayout(1, VerticalLayout.LEFT));
+		filePanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
+
+		// SEND FILE LABEL
+		JLabel sendFileLabel = new JLabel(JMeterUtils.getResString("send_file"));
+		filePanel.add(sendFileLabel);
+
+		// FILENAME PANEL (contains filename label and text field and Browse button)
+		JPanel filenamePanel = new JPanel();
+		filenamePanel.setBorder(BorderFactory.createEmptyBorder(0, 25, 0, 0));
+
+		// --- FILENAME LABEL
+		filenameLabel = new JLabel(JMeterUtils.getResString("send_file_filename_label"));
+		filenameLabel.setEnabled(true);
+
+		// --- FILENAME TEXT FIELD
+		filenameField = new JTextField(15);
+		filenameField.setEnabled(true);
+		filenameField.setName(FILENAME);
+
+		// --- BROWSE BUTTON
+		browseFileButton = new JButton(JMeterUtils.getResString("send_file_browse"));
+		browseFileButton.setEnabled(true);
+		browseFileButton.setActionCommand(BROWSE);
+		browseFileButton.addActionListener(this);
+
+		filenamePanel.add(filenameLabel);
+		filenamePanel.add(filenameField);
+		filenamePanel.add(browseFileButton);
+
+		// PARAM NAME PANEL (contains param name label and text field)
+		JPanel paramNamePanel = new JPanel();
+		paramNamePanel.setBorder(BorderFactory.createEmptyBorder(0, 25, 0, 0));
+
+		// --- PARAM NAME LABEL
+		paramNameLabel = new JLabel(JMeterUtils.getResString("send_file_param_name_label"));
+		paramNameLabel.setEnabled(true);
+
+		// --- PARAM NAME TEXT FIELD
+		paramNameField = new JTextField(15);
+		paramNameField.setName(PARAMNAME);
+		paramNameField.setEnabled(true);
+
+		paramNamePanel.add(paramNameLabel);
+		paramNamePanel.add(paramNameField);
+
+		// MIME TYPE PANEL (contains mime type label and text field)
+		JPanel mimePanel = new JPanel();
+		mimePanel.setBorder(BorderFactory.createEmptyBorder(0, 25, 0, 0));
+
+		// --- MIME TYPE LABEL
+		mimetypeLabel = new JLabel(JMeterUtils.getResString("send_file_mime_label"));
+		mimetypeLabel.setEnabled(true);
+
+		// --- MIME TYPE TEXT FIELD
+		mimetypeField = new JTextField(15);
+		mimetypeField.setEnabled(true);
+		mimetypeField.setName(MIMETYPE);
+
+		mimePanel.add(mimetypeLabel);
+		mimePanel.add(mimetypeField);
+
+		filePanel.add(filenamePanel);
+		filePanel.add(paramNamePanel);
+		filePanel.add(mimePanel);
+
+		return filePanel;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/UrlConfigGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/UrlConfigGui.java
new file mode 100644
index 0000000..6324950
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/config/gui/UrlConfigGui.java
@@ -0,0 +1,414 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.config.gui;
+import java.awt.BorderLayout;
+import java.awt.Dimension;
+import java.awt.FlowLayout;
+import java.awt.Font;
+
+import javax.swing.BorderFactory;
+import javax.swing.Box;
+import javax.swing.BoxLayout;
+import javax.swing.ButtonGroup;
+import javax.swing.JCheckBox;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JRadioButton;
+import javax.swing.JTextField;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.gui.HTTPArgumentsPanel;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/14 02:52:19 $
+ *@version   1.0
+ ***************************************/
+
+public class UrlConfigGui extends AbstractConfigGui
+{
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected boolean displayName = true;
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected HTTPArgumentsPanel argsPanel;
+	private static String DOMAIN = "domain";
+	private static String PORT = "port";
+	private static String PATH = "path";
+	private static String FOLLOW_REDIRECTS = "follow_redirects";
+	private static String USE_KEEPALIVE = "use_keepalive";
+	private static String POST = "post";
+	private static String GET = "get";
+	private static String HTTP = "http";
+	private static String HTTPS = "https";
+	private static String SEND_PARAM = "sendparam";
+
+	private JTextField domain;
+	private JTextField port;
+	private JTextField path;
+	private JCheckBox followRedirects;
+	private JCheckBox useKeepAlive;
+	private JRadioButton post;
+	private JRadioButton get;
+	private JRadioButton http;
+	private JRadioButton https;
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public UrlConfigGui()
+	{
+		this(true);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param display  !ToDo (Parameter description)
+	 ***************************************/
+	public UrlConfigGui(boolean display)
+	{
+		displayName = display;
+		init();
+		setName(getStaticLabel());
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("url_config_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		ConfigTestElement element = new ConfigTestElement();
+		this.configureTestElement(element);
+		Arguments args = (Arguments)argsPanel.createTestElement();
+		HTTPArgument.convertArgumentsToHTTP(args);
+		element.setProperty(HTTPSampler.ARGUMENTS, args);
+		element.setProperty(HTTPSampler.DOMAIN, domain.getText());
+		element.setProperty(HTTPSampler.PORT, port.getText());
+		element.setProperty(HTTPSampler.METHOD, (post.isSelected() ? "POST" : "GET"));
+		element.setProperty(HTTPSampler.PATH, path.getText());
+		element.setProperty(HTTPSampler.FOLLOW_REDIRECTS, new Boolean(followRedirects.isSelected()));
+		element.setProperty(HTTPSampler.USE_KEEPALIVE, new Boolean(useKeepAlive.isSelected()));
+		element.setProperty(HTTPSampler.PROTOCOL, (http.isSelected() ? "http" : "https"));
+		return element;
+	}
+
+	public void configureSampler(HTTPSampler sampler)
+	{
+		sampler.setArguments((Arguments)argsPanel.createTestElement());
+		sampler.setDomain(domain.getText());
+		sampler.setPath(path.getText());
+		sampler.setFollowRedirects(followRedirects.isSelected());
+		sampler.setUseKeepAlive(useKeepAlive.isSelected());
+		if(port.getText().length() > 0)
+		{
+			sampler.setPort(Integer.parseInt(port.getText()));
+		}
+		sampler.setMethod((post.isSelected() ? "POST" : "GET"));
+		sampler.setProtocol((http.isSelected() ? "http" : "https"));
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		setName((String)el.getProperty(TestElement.NAME));
+		argsPanel.configure((TestElement)el.getProperty(HTTPSampler.ARGUMENTS));
+		domain.setText((String)el.getProperty(HTTPSampler.DOMAIN));
+		port.setText((String)el.getPropertyAsString(HTTPSampler.PORT));
+		if("POST".equals(el.getProperty(HTTPSampler.METHOD)))
+		{
+			post.setSelected(true);
+			get.setSelected(false);
+		}
+		else
+		{
+			get.setSelected(true);
+			post.setSelected(false);
+		}
+		path.setText((String)el.getProperty(HTTPSampler.PATH));
+		followRedirects.setSelected(((AbstractTestElement)el).getPropertyAsBoolean(HTTPSampler.FOLLOW_REDIRECTS));
+		useKeepAlive.setSelected(((AbstractTestElement)el).getPropertyAsBoolean(HTTPSampler.USE_KEEPALIVE));
+		if("http".equals(el.getProperty(HTTPSampler.PROTOCOL)))
+		{
+			http.setSelected(true);
+			https.setSelected(false);
+		}
+		else
+		{
+			https.setSelected(true);
+			http.setSelected(false);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	protected void init()
+	{
+		this.setLayout(new BorderLayout());
+
+		JPanel webServerPanel = new JPanel();
+		webServerPanel.setLayout(new BorderLayout());
+		webServerPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("web_server")));
+		webServerPanel.add(getDomainPanel(),BorderLayout.NORTH);
+		webServerPanel.add(getPortPanel(),BorderLayout.SOUTH);
+
+		JPanel webRequestPanel = new JPanel();
+		webRequestPanel.setLayout(new BorderLayout());
+		webRequestPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("web_request")));
+		JPanel northPanel = new JPanel(new BorderLayout());
+		northPanel.add(getProtocolAndMethodPanel(),BorderLayout.NORTH);
+		northPanel.add(getPathPanel(),BorderLayout.SOUTH);
+		webRequestPanel.add(northPanel,BorderLayout.NORTH);
+		webRequestPanel.add(getParameterPanel(),BorderLayout.CENTER);
+
+		if(displayName)
+		{
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new BorderLayout());
+			JPanel normalPanel = new JPanel(new VerticalLayout(5,VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("url_config_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			normalPanel.add(panelTitleLabel);
+
+			// NAME
+			if(displayName)
+			{
+				normalPanel.add(getNamePanel());
+			}
+
+			normalPanel.add(webServerPanel);
+			mainPanel.add(normalPanel,BorderLayout.NORTH);
+			mainPanel.add(webRequestPanel,BorderLayout.CENTER);
+
+			this.add(mainPanel,BorderLayout.CENTER);
+		}
+		else
+		{
+			this.add(webServerPanel,BorderLayout.NORTH);
+			this.add(webRequestPanel,BorderLayout.CENTER);
+		}
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	protected JPanel getPortPanel()
+	{
+		JPanel portP = new JPanel(new FlowLayout(FlowLayout.LEFT));
+		portP.setBorder(BorderFactory.createEmptyBorder(0, 5, 0, 10));
+		portP.add(new JLabel(JMeterUtils.getResString("web_server_port")));
+
+		port = new JTextField(6);
+
+		port.setName(PORT);
+		portP.add(port);
+
+		return portP;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	protected JPanel getDomainPanel()
+	{
+		JPanel domainP = new JPanel(new FlowLayout(FlowLayout.LEFT));
+		domainP.setBorder(BorderFactory.createEmptyBorder(0, 5, 0, 10));
+		domainP.add(new JLabel(JMeterUtils.getResString("web_server_domain")));
+
+		domain = new JTextField(20);
+		domain.setName(DOMAIN);
+		domainP.add(domain);
+
+		return domainP;
+	}
+
+	/****************************************
+	 * This method defines the Panel for the 
+	 * HTTP path, 'Follow Redirects' and
+	 * 'Use KeepAlive' elements.
+	 *
+	 *@return JPanel The Panel for the path,
+	 * 'Follow Redirects' and 'Use KeepAlive' elements.
+	 ***************************************/
+	protected JPanel getPathPanel()
+	{
+		JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEFT));
+		panel.setBorder(BorderFactory.createEmptyBorder(0, 5, 0, 10));
+		panel.add(new JLabel(JMeterUtils.getResString("path")));
+
+		path = new JTextField(15);
+		path.setName(PATH);
+		panel.add(path);
+
+		followRedirects= new JCheckBox(JMeterUtils.getResString("follow_redirects"));
+		followRedirects.setName(FOLLOW_REDIRECTS);
+		// Set this by default so as to stay compliant with the old
+		// behaviour:
+		followRedirects.setSelected(true);
+		panel.add(followRedirects);
+
+		useKeepAlive = new JCheckBox(JMeterUtils.getResString("use_keepalive"));
+		useKeepAlive.setName(USE_KEEPALIVE);
+		useKeepAlive.setSelected(true);
+		panel.add(useKeepAlive);
+
+		return panel;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	protected JPanel getProtocolAndMethodPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));
+		panel.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
+
+		panel.add(new JLabel(JMeterUtils.getResString("protocol")));
+		panel.add(Box.createRigidArea(new Dimension(5, 0)));
+
+		// PROTOCOL
+		http = new JRadioButton(JMeterUtils.getResString("url_config_http"));
+		https = new JRadioButton(JMeterUtils.getResString("url_config_https"));
+		ButtonGroup protocolButtonGroup = new ButtonGroup();
+		protocolButtonGroup.add(http);
+		protocolButtonGroup.add(https);
+
+		http.setSelected(true);
+
+		panel.add(http);
+		panel.add(https);
+
+		panel.add(Box.createRigidArea(new Dimension(20, 0)));
+
+		// METHOD
+		post = new JRadioButton(JMeterUtils.getResString("url_config_post"));
+		get = new JRadioButton(JMeterUtils.getResString("url_config_get"));
+		ButtonGroup methodButtonGroup = new ButtonGroup();
+		methodButtonGroup.add(post);
+		methodButtonGroup.add(get);
+
+		panel.add(new JLabel(JMeterUtils.getResString("method")));
+		panel.add(Box.createRigidArea(new Dimension(5, 0)));
+
+		post.setSelected(true);
+
+		panel.add(get);
+		panel.add(post);
+
+		return panel;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	protected JPanel getParameterPanel()
+	{
+		argsPanel = new HTTPArgumentsPanel();
+
+		return argsPanel;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/AuthManager.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/AuthManager.java
new file mode 100644
index 0000000..9109e94
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/AuthManager.java
@@ -0,0 +1,441 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.control;
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.FileReader;
+import java.io.FileWriter;
+import java.io.IOException;
+import java.io.PrintWriter;
+import java.io.Serializable;
+import java.net.URL;
+import java.util.ArrayList;
+import java.util.Collection;
+import java.util.Iterator;
+import java.util.List;
+import java.util.StringTokenizer;
+
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.protocol.http.util.Base64Encoder;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * This class provides a way to provide Authorization in jmeter requests. The
+ * format of the authorization file is: URL user pass where URL is an HTTP URL,
+ * user a username to use and pass the appropriate password.
+ *
+ *@author    <a href="mailto:luta.raphael@networks.vivendi.com">Raphaël Luta
+ *      </a>
+ *@created   $Date: 2002/08/11 19:24:51 $
+ *@version   0.9
+ ***************************************/
+public class AuthManager extends AbstractTestElement implements ConfigElement,
+		Serializable
+{
+	private final static String AUTH_LIST = "AuthManager.auth_list";
+
+	private final static int columnCount = 3;
+	private final static String[] columnNames = {
+			JMeterUtils.getResString("auth_base_url"),
+			JMeterUtils.getResString("username"),
+			JMeterUtils.getResString("password")
+			};
+
+	/****************************************
+	 * Default Constructor
+	 ***************************************/
+	public AuthManager()
+	{
+		setProperty(AUTH_LIST, new ArrayList());
+	}
+
+	/****************************************
+	 * update an authentication record
+	 *
+	 *@param index  !ToDo (Parameter description)
+	 *@param url    !ToDo (Parameter description)
+	 *@param user   !ToDo (Parameter description)
+	 *@param pass   !ToDo (Parameter description)
+	 ***************************************/
+	public void set(int index, String url, String user, String pass)
+	{
+		Authorization auth = new Authorization(url, user, pass);
+		if(index >= 0)
+		{
+			getAuthObjects().set(index, auth);
+		}
+		else
+		{
+			getAuthObjects().add(auth);
+		}
+	}
+	
+	public void addTestElement(TestElement el)
+	{
+		if(el.getProperty("password") != null &&
+				el.getProperty("username") != null &&
+				el.getProperty("url") != null)
+		{
+			addAuth(new Authorization(el.getPropertyAsString("url"),
+					el.getPropertyAsString("username"),
+					el.getPropertyAsString("password")));
+		}
+		else
+		{
+			super.addTestElement(el);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param newName  !ToDo (Parameter description)
+	 ***************************************/
+	public void setName(String newName)
+	{
+		setProperty(TestElement.NAME, newName);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public List getAuthObjects()
+	{
+		return (List)getProperty(AUTH_LIST);
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int getColumnCount()
+	{
+		return columnCount;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param column  !ToDo (Parameter description)
+	 *@return        !ToDo (Return description)
+	 ***************************************/
+	public String getColumnName(int column)
+	{
+		return columnNames[column];
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param column  !ToDo (Parameter description)
+	 *@return        !ToDo (Return description)
+	 ***************************************/
+	public Class getColumnClass(int column)
+	{
+		return columnNames[column].getClass();
+	}
+
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param row  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public Authorization getAuthObjectAt(int row)
+	{
+		return (Authorization)getAuthObjects().get(row);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public boolean isEditable()
+	{
+		return true;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getClassLabel()
+	{
+		return JMeterUtils.getResString("auth_manager_title");
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Class getGuiClass()
+	{
+		return org.apache.jmeter.protocol.http.gui.AuthPanel.class;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Collection getAddList()
+	{
+		return null;
+	}
+
+	/****************************************
+	 * return the record at index i
+	 *
+	 *@param i  !ToDo (Parameter description)
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public Authorization get(int i)
+	{
+		return (Authorization)getAuthObjects().get(i);
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param url  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***************************************/
+	public String getAuthHeaderForURL(URL url)
+	{
+		if(isSupportedProtocol(url))
+		{
+			return null;
+		}
+
+		StringBuffer header = new StringBuffer();
+		for(Iterator enum = getAuthObjects().iterator(); enum.hasNext(); )
+		{
+			Authorization auth = (Authorization)enum.next();
+			if(url.toString().startsWith(auth.getURL()))
+			{
+				header.append("Basic " + Base64Encoder.encode(auth.getUser() + ":" + auth.getPass()));
+				break;
+			}
+		}
+
+		if(header.length() != 0)
+		{
+			return header.toString();
+		}
+		else
+		{
+			return null;
+		}
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getName()
+	{
+		return (String)getProperty(TestElement.NAME);
+	}
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param config  !ToDo
+	 ***************************************/
+	public void addConfigElement(ConfigElement config) { }
+
+	/****************************************
+	 * !ToDo
+	 *
+	 *@param auth  !ToDo
+	 ***************************************/
+	public void addAuth(Authorization auth)
+	{
+		getAuthObjects().add(auth);
+	}
+
+	/****************************************
+	 * !ToDo
+	 ***************************************/
+	public void addAuth()
+	{
+		getAuthObjects().add(new Authorization());
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public boolean expectsModification()
+	{
+		return false;
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	public void uncompile() { }
+
+	/****************************************
+	 * save the authentication data to a file
+	 *
+	 *@param authFile         !ToDo (Parameter description)
+	 *@exception IOException  !ToDo (Exception description)
+	 ***************************************/
+	public void save(String authFile) throws IOException
+	{
+		File file = new File(authFile);
+		if(!file.isAbsolute())
+		{
+			file = new File(System.getProperty("user.dir") + File.separator + authFile);
+		}
+		PrintWriter writer = new PrintWriter(new FileWriter(file));
+		writer.println("# JMeter generated Authorization file");
+		for(int i = 0; i < getAuthObjects().size(); i++)
+		{
+			Authorization auth = (Authorization)getAuthObjects().get(i);
+			writer.println(auth.toString());
+		}
+		writer.flush();
+		writer.close();
+	}
+
+	/****************************************
+	 * add authentication data from a file
+	 *
+	 *@param authFile         !ToDo
+	 *@exception IOException  !ToDo (Exception description)
+	 ***************************************/
+	public void addFile(String authFile) throws IOException
+	{
+		File file = new File(authFile);
+		if(!file.isAbsolute())
+		{
+			file = new File(System.getProperty("user.dir") + File.separator + authFile);
+		}
+		BufferedReader reader = null;
+		if(file.canRead())
+		{
+			reader = new BufferedReader(new FileReader(file));
+		}
+		else
+		{
+			throw new IOException("The file you specified cannot be read.");
+		}
+
+		String line;
+		while((line = reader.readLine()) != null)
+		{
+			try
+			{
+				if(line.startsWith("#") || line.trim().length() == 0)
+				{
+					continue;
+				}
+				StringTokenizer st = new StringTokenizer(line, "\t");
+				String url = st.nextToken();
+				String user = st.nextToken();
+				String pass = st.nextToken();
+				Authorization auth = new Authorization(url, user, pass);
+				getAuthObjects().add(auth);
+			}
+			catch(Exception e)
+			{
+				throw new IOException("Error parsing auth line\n\t'" + line + "'\n\t" + e);
+			}
+		}
+		reader.close();
+	}
+
+	/****************************************
+	 * remove an authentication record
+	 *
+	 *@param index  !ToDo (Parameter description)
+	 ***************************************/
+	public void remove(int index)
+	{
+		getAuthObjects().remove(index);
+	}
+
+	/****************************************
+	 * return the number of records
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public int size()
+	{
+		return getAuthObjects().size();
+	}
+
+	private boolean isSupportedProtocol(URL url)
+	{
+		return !url.getProtocol().toUpperCase().equals("HTTP") &&
+				!url.getProtocol().toUpperCase().equals("HTTPS");
+	}
+}
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Authorization.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Authorization.java
new file mode 100644
index 0000000..7d80b9e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Authorization.java
@@ -0,0 +1,123 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.http.control;
+
+import org.apache.jmeter.config.*;
+import java.io.*;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+/**
+ * This class is an Authorization encapsulator.
+ *
+ * @author  <a href="mailto:luta.raphael@networks.vivendi.net">Raphaël Luta</a>
+ */
+public class Authorization extends AbstractTestElement implements Serializable
+{
+	 private static String URL = "Authorization.url";
+	 private static String USERNAME = "Authorization.username";
+	 private static String PASSWORD = "Authorization.password";
+	 /**
+	  * create the authorization
+	  */
+	 Authorization(String url, String user, String pass) {
+		  setURL(url);
+		  setUser(user);
+		  setPass(pass);
+	 }
+
+	 public boolean expectsModification()
+	{
+		return false;
+	}
+
+	 public Authorization()
+	 {
+		  setURL("");
+		  setUser("");
+		  setPass("");
+	 }
+
+	 public String getClassLabel()
+	 {
+		return "Authorization";
+	 }
+
+	 public void addConfigElement(ConfigElement config)
+	 {
+	 }
+
+	 public String getURL() {
+		  return (String)getProperty(URL);
+	 }
+	 public synchronized void setURL(String url) {
+		  setProperty(URL,url);
+	 }
+	 public String getUser() {
+		  return (String)getProperty(USERNAME);
+	 }
+	 public synchronized void setUser(String user) {
+		  setProperty(USERNAME,user);
+	 }
+	 public String getPass() {
+		  return (String)getProperty(PASSWORD);
+	 }
+	 public synchronized void setPass(String pass) {
+		  setProperty(PASSWORD,pass);
+	 }
+	 public String toString() {
+		  return getURL() + "\t" + getUser() + "\t" + getPass();
+	 }
+}
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Entries
new file mode 100644
index 0000000..bdcc436
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Entries
@@ -0,0 +1,7 @@
+/AuthManager.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/Authorization.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/Cookie.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/CookieManager.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/Header.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/HeaderManager.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Repository
new file mode 100644
index 0000000..2b6301d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Cookie.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Cookie.java
new file mode 100644
index 0000000..3034d8a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Cookie.java
@@ -0,0 +1,224 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.http.control;
+
+import java.io.*;
+import java.net.URL;
+import java.text.DateFormat;
+import java.text.ParseException;
+import java.text.SimpleDateFormat;
+import java.util.Date;
+import java.util.Enumeration;
+import java.util.Hashtable;
+import java.util.Properties;
+import java.util.StringTokenizer;
+import java.util.Vector;
+
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/**
+ * This class is a Cookie encapsulator.
+ *
+ * @author  <a href="mailto:sdowd@arcmail.com">Sean Dowd</a>
+ */
+public class Cookie extends AbstractTestElement implements Serializable
+{
+
+	 private static String NAME = "Cookie.name";
+	 private static String VALUE = "Cookie.value";
+	 private static String DOMAIN = "Cookie.domain";
+	 private static String EXPIRES = "Cookie.expires";
+	 private static String SECURE = "Cookie.secure";
+	 private static String PATH = "Cookie.path";
+
+	 /**
+	  * create the coookie
+	  */
+	 public Cookie() {
+		  this.setName("");
+		  this.setValue("");
+		  this.setDomain("");
+		  this.setPath("");
+		  this.setSecure(false);
+		  this.setExpires(0);
+	 }
+
+	 /**
+	  * create the coookie
+	  */
+	 public Cookie(String name, String value, String domain, String path, boolean secure, long expires) {
+		  this.setName(name);
+		  this.setValue(value);
+		  this.setDomain(domain);
+		  this.setPath(path);
+		  this.setSecure(secure);
+		  this.setExpires(expires);
+	 }
+
+	public void addConfigElement(ConfigElement config)
+	{
+	}
+
+	public boolean expectsModification()
+	{
+		return false;
+	}
+
+	 public String getClassLabel()
+	 {
+		return "Cookie";
+	 }
+
+	 /**
+	  * get the value for this object.
+	  */
+	 public String getValue() {
+		  return (String)this.getProperty(VALUE);
+	 }
+
+	 /**
+	  * set the value for this object.
+	  */
+	 public synchronized void setValue(String value) {
+		  this.setProperty(VALUE,value);
+	 }
+
+	 /**
+	  * get the domain for this object.
+	  */
+	 public String getDomain() {
+		  return (String)getProperty(DOMAIN);
+	 }
+
+	 /**
+	  * set the domain for this object.
+	  */
+	 public synchronized void setDomain(String domain) {
+		  setProperty(DOMAIN,domain);
+	 }
+
+	 /**
+	  * get the expires for this object.
+	  */
+	 public long getExpires() {
+		Object ret = getProperty(EXPIRES);
+		if(ret == null)
+		{
+			return 0;
+		}
+		else if(ret instanceof Long)
+		{
+			return ((Long)ret).longValue();
+		}
+		else if(ret instanceof String)
+		{
+			try
+			{
+				return Long.parseLong((String)ret);
+			}
+			catch (Exception ex)
+			{
+			}
+		}
+		return 0;
+	 }
+
+	 /**
+	  * set the expires for this object.
+	  */
+	 public synchronized void setExpires(long expires) {
+		  setProperty(EXPIRES,new Long(expires));
+	 }
+
+	 /**
+	  * get the secure for this object.
+	  */
+	 public boolean getSecure() {
+	 	System.out.println("Secure = "+getProperty(SECURE));
+		return this.getPropertyAsBoolean(SECURE);
+	 }
+
+	 /**
+	  * set the secure for this object.
+	  */
+	 public synchronized void setSecure(boolean secure) {
+		  setProperty(SECURE,new Boolean(secure));
+	 }
+
+	 /**
+	  * get the path for this object.
+	  */
+	 public String getPath() {
+		  return (String)getProperty(PATH);
+	 }
+
+	 /**
+	  * set the path for this object.
+	  */
+	 public synchronized void setPath(String path) {
+		  setProperty(PATH,path);
+	 }
+
+	 /**
+	  * creates a string representation of this cookie
+	  */
+	 public String toString() {
+	return getDomain() + "\tTRUE\t" + getPath() + "\t" +
+							 new Boolean(getSecure()).toString().toUpperCase() + "\t" +
+							 getExpires() + "\t" + getName() + "\t" + getValue();
+	 }
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java
new file mode 100644
index 0000000..8c325b0
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java
@@ -0,0 +1,391 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.http.control;
+
+
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.FileReader;
+import java.io.FileWriter;
+import java.io.IOException;
+import java.io.PrintWriter;
+import java.io.Serializable;
+import java.net.URL;
+import java.text.ParseException;
+import java.text.SimpleDateFormat;
+import java.util.ArrayList;
+import java.util.Date;
+import java.util.Enumeration;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.StringTokenizer;
+import java.util.TimeZone;
+import java.util.Vector;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.testelement.PerThreadClonable;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * This class provides an interface to the netscape cookies file to
+ * pass cookies along with a request.
+ *
+ * @author  <a href="mailto:sdowd@arcmail.com">Sean Dowd</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:51 $
+ */
+public class CookieManager extends AbstractTestElement implements
+		  Serializable,PerThreadClonable
+{
+
+	 public static final String COOKIES = "CookieManager.cookies";
+	  /**
+		* A vector of Cookies managed by this class.
+		* @associates <{org.apache.jmeter.controllers.Cookie}>
+		*/
+	  private static SimpleDateFormat dateFormat = new SimpleDateFormat("EEEE, dd-MMM-yyyy HH:mm:ss zzz");
+
+	  private static List addableList = new LinkedList();
+
+	 static
+	 {
+		  // The cookie specification requires that the timezone be GMT.
+		  // See http://developer.netscape.com/docs/manuals/communicator/jsguide4/cookies.htm
+		  // See http://www.cookiecentral.com/faq/
+		  dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
+	 }
+
+	  public CookieManager () {
+		setProperty(COOKIES,new ArrayList());
+	  }
+
+	 public List getCookies()
+	 {
+		  return (List)getProperty(COOKIES);
+	 }
+
+	 public int getCookieCount()
+	 {
+		  return getCookies().size();
+	 }
+
+
+	 // Incorrect method. Always returns String. I changed CookiePanel code to perform
+	 // this lookup.
+	 //public Class getColumnClass(int column)
+	 //{
+	 //	return columnNames[column].getClass();
+	 //}
+
+	 public Cookie getCookie(int row)
+	 {
+		  return (Cookie)getCookies().get(row);
+	 }
+
+	  /** save the cookie data to a file */
+	  public void save(String authFile) throws IOException {
+			File file = new File(authFile);
+			 if (!file.isAbsolute()) file = new File(System.getProperty("user.dir") + File.separator + authFile);
+			 PrintWriter writer = new PrintWriter(new FileWriter(file));
+	 writer.println("# JMeter generated Cookie file");
+	 List cookies = getCookies();
+	 for (int i = 0; i < cookies.size(); i++) {
+		  Cookie cook = (Cookie) cookies.get(i);
+		  writer.println(cook.toString());
+	 }
+	 writer.flush();
+	 writer.close();
+	  }
+
+	  /** add cookie data from a file */
+	  public void addFile (String cookieFile) throws IOException {
+	 File file = new File(cookieFile);
+			 if (!file.isAbsolute()) file = new File(System.getProperty("user.dir") + File.separator + cookieFile);
+	 BufferedReader reader = null;
+	 if( file.canRead() ) {
+				reader = new BufferedReader(new FileReader(file));
+	 } else {
+		  throw new IOException("The file you specified cannot be read.");
+	 }
+
+			 String line;
+			 while ((line = reader.readLine()) != null) {
+					 try {
+							if (line.startsWith("#") || line.trim().length() == 0) continue;
+							String[] st = split(line, "\t"," ");
+							int domain = 0;
+							int foo = 1;
+							int path = 2;
+							if(st[path].equals(" "))
+								st[path] = "/";
+							boolean secure = new Boolean(st[3]).booleanValue();
+							long expires = new Long(st[4]).longValue();
+							int name = 5;
+							int value = 6;
+							Cookie cookie = new Cookie(st[name], st[value], st[domain],
+										  st[path], secure, expires);
+							getCookies().add(cookie);
+					 } catch (Exception e) {
+							throw new IOException("Error parsing cookie line\n\t'" + line + "'\n\t" + e);
+					 }
+			 }
+			 reader.close();
+	  }
+
+	  /** add a cookie */
+	  public void add(Cookie c) {
+			 getCookies().add(c);
+	  }
+
+	  /** add an empty cookie */
+	  public void add() {
+		  getCookies().add(new Cookie());
+	  }
+
+	  /** remove a cookie */
+	  public void remove(int index) {
+			 getCookies().remove(index);
+	  }
+
+	 /** return the number cookies */
+	 public int size() {
+			return getCookies().size();
+	 }
+
+	 /** return the cookie at index i */
+	 public Cookie get(int i) {
+			return (Cookie) getCookies().get(i);
+	 }
+
+	 public String convertLongToDateFormatStr(long dateLong)
+	 {
+		  return dateFormat.format(new Date(dateLong));
+	 }
+
+	 public long convertDateFormatStrToLong(String dateStr)
+	 {
+		  long time = 0;
+
+		  try
+		  {
+				Date date = dateFormat.parse(dateStr);
+				time = date.getTime();
+		  }
+		  catch (ParseException e)
+		  {
+				// ERROR!!!
+				// Later, display error dialog?  For now, we have
+				// to specify a number that can be converted to
+				// a Date. So, I chose 0. The Date will appear as
+				// the beginning of the Epoch (Jan 1, 1970 00:00:00 GMT)
+				time = 0;
+				System.out.println("DateFormat.ParseException: " + e.getMessage());
+		  }
+
+		  return time;
+	 }
+
+	 public String getCookieHeaderForURL(URL url) {
+	 if (! url.getProtocol().toUpperCase().trim().equals("HTTP")
+			&&
+			! url.getProtocol().toUpperCase().trim().equals("HTTPS")) return null;
+
+			 StringBuffer header = new StringBuffer();
+			 for (Iterator enum = getCookies().iterator(); enum.hasNext();) {
+					 Cookie cookie = (Cookie) enum.next();
+					 if (url.getHost().endsWith(cookie.getDomain()) &&
+								  url.getFile().startsWith(cookie.getPath()) &&
+								  (System.currentTimeMillis() / 1000) <= cookie.getExpires()) {
+							if (header.length() > 0) {
+								  header.append("; ");
+							}
+							header.append(cookie.getName()).append("=").append(cookie.getValue());
+					 }
+			 }
+
+			 if (header.length() != 0) {
+					 return header.toString();
+			 } else {
+					 return null;
+			 }
+	  }
+
+	  public void addCookieFromHeader(String cookieHeader, URL url) {
+		  //System.out.println("inside addCookieFromHeader: " + cookieHeader + " " + url);
+			 StringTokenizer st = new StringTokenizer(cookieHeader, ";");
+			 String nvp;
+
+			 // first n=v is name=value
+			 nvp = st.nextToken();
+			 int index = nvp.indexOf("=");
+			 String name = nvp.substring(0,index);
+			 String value = nvp.substring(index+1);
+			 String domain = url.getHost();
+			 String path = url.getFile();
+
+		  //System.out.println(name);
+		  //System.out.println(value);
+		  //System.out.println(domain);
+		  //System.out.println(path);
+
+			 Cookie newCookie = new Cookie(name, value, domain, path, false,
+							System.currentTimeMillis() + 1000 * 60 * 60 * 24);
+			 // check the rest of the headers
+			 while (st.hasMoreTokens()) {
+					 nvp = st.nextToken();
+					 nvp = nvp.trim();
+					 index = nvp.indexOf("=");
+					 if(index == -1)
+					 {
+						  index = nvp.length();
+					 }
+					 String key = nvp.substring(0,index);
+					 if (key.equalsIgnoreCase("expires")) {
+							try {
+								  String expires = nvp.substring(index+1);
+								  Date date = dateFormat.parse(expires);
+								  newCookie.setExpires(date.getTime());
+								//System.out.println("set expires to " + date.getTime());
+								//System.out.println("current time: " + (System.currentTimeMillis());
+							} catch (ParseException pe) {}
+					 } else if (key.equalsIgnoreCase("domain")) {
+							newCookie.setDomain(nvp.substring(index+1));
+					 } else if (key.equalsIgnoreCase("path")) {
+							newCookie.setPath(nvp.substring(index+1));
+					 } else if (key.equalsIgnoreCase("secure")) {
+							newCookie.setSecure(true);
+					 }
+			 }
+
+			 Vector removeIndices = new Vector();
+			 for (int i = getCookies().size() - 1; i >= 0; i--) {
+					 Cookie cookie = (Cookie) getCookies().get(i);
+					 if (cookie == null)
+							continue;
+					 if (cookie.getPath().equals(newCookie.getPath()) &&
+								  cookie.getDomain().equals(newCookie.getDomain()) &&
+								  cookie.getName().equals(newCookie.getName())) {
+						  //System.out.println("remove cookie #" + i);
+							removeIndices.addElement(new Integer(i));
+					 }
+			 }
+
+			 for (Enumeration e = removeIndices.elements(); e.hasMoreElements();) {
+					 index = ((Integer) e.nextElement()).intValue();
+					 //System.out.println("remove cookie index " + index);
+					 getCookies().remove(index);
+			 }
+
+			 if (newCookie.getExpires() >= System.currentTimeMillis())
+			 {
+				//System.out.println("cookie expiration is future so add it");
+					 getCookies().add(newCookie);
+			 }
+	  }
+
+	  public void removeCookieNamed(String name) {
+			 Vector removeIndices = new Vector();
+			 for (int i = getCookies().size() - 1; i > 0; i--) {
+					 Cookie cookie = (Cookie) getCookies().get(i);
+					 if (cookie == null)
+							continue;
+					 if (cookie.getName().equals(name))
+							removeIndices.addElement(new Integer(i));
+			 }
+
+			 for (Enumeration e = removeIndices.elements(); e.hasMoreElements();) {
+					 getCookies().remove(((Integer) e.nextElement()).intValue());
+			 }
+
+	  }
+
+	  /******************************************************
+		* Takes a String and a tokenizer character, and returns
+		a new array of strings of the string split by the tokenizer
+		character.
+		@param splittee String to be split
+		@param splitChar Character to split the string on
+		@param def Default value to place between two split chars that have
+		nothing between them
+		@return Array of all the tokens.
+	  ******************************************************/
+	  public String[] split(String splittee,String splitChar,String def)
+	  {
+	 if(splittee == null || splitChar == null)
+			return new String[0];
+	 StringTokenizer tokens;
+	 String temp;
+	 int spot;
+	 while((spot=splittee.indexOf(splitChar+splitChar))!=-1)
+			splittee=splittee.substring(0,spot+splitChar.length())+def+
+		  splittee.substring(spot+1*splitChar.length(),
+						  splittee.length());
+	 Vector returns=new Vector();
+	 tokens=new StringTokenizer(splittee,splitChar);
+	 while(tokens.hasMoreTokens()) {
+			temp=(String)tokens.nextToken();
+			returns.addElement(temp);
+	 }
+	 String[] values=new String[returns.size()];
+	 returns.copyInto(values);
+	 return values;
+	  }
+
+	  public String getClassLabel()
+	  {
+	return JMeterUtils.getResString("cookie_manager_title");
+	  }
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Header.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Header.java
new file mode 100644
index 0000000..cfb9f77
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/Header.java
@@ -0,0 +1,120 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.http.control;
+
+import org.apache.jmeter.config.*;
+import java.io.*;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/**
+ * This class is an HTTP Header encapsulator.
+ *
+ * @author  <a href="mailto:giacomo@apache.org">Giacomo Pati</a>
+ */
+public class Header extends AbstractTestElement implements Serializable
+{
+	 private static String NAME = "Header.name";
+	 private static String VALUE = "Header.value";
+
+	 /**
+	  * create the headeer
+	  */
+	 public Header() {
+		  this.setName("");
+		  this.setValue("");
+	 }
+
+	 /**
+	  * create the coookie
+	  */
+	 public Header(String name, String value) {
+		  this.setName(name);
+		  this.setValue(value);
+	 }
+
+	 public void addConfigElement(ConfigElement config){
+	 }
+
+	 public boolean expectsModification() {
+		  return false;
+	 }
+
+	 public String getClassLabel() {
+		  return "Header";
+	 }
+
+	 /**
+	  * get the value for this object.
+	  */
+	 public String getValue() {
+		  return (String)this.getProperty(VALUE);
+	 }
+
+	 /**
+	  * set the value for this object.
+	  */
+	 public synchronized void setValue(String value) {
+		  this.setProperty(VALUE,value);
+	 }
+
+	 /**
+	  * creates a string representation of this header
+	  */
+	 public String toString() {
+		  return getName() + "\t" + getValue();
+	 }
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/HeaderManager.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/HeaderManager.java
new file mode 100644
index 0000000..cbdb534
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/HeaderManager.java
@@ -0,0 +1,319 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.control;
+
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.FileReader;
+import java.io.FileWriter;
+import java.net.URL;
+import java.text.DateFormat;
+import java.text.ParseException;
+import java.text.SimpleDateFormat;
+import java.util.*;
+import java.io.*;
+import javax.swing.table.AbstractTableModel;
+
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/**
+ * This class provides an interface to headers file to
+ * pass HTTP headers along with a request.
+ *
+ * @author  <a href="mailto:giacomo@apache.org">Giacomo Pati</a>
+ * @version $Revision: 1.1 $ $Date: 2002/08/11 19:24:51 $
+ */
+public class HeaderManager extends AbstractTestElement implements
+		Serializable
+{
+
+	 public static final String HEADERS = "HeaderManager.headers";
+	 /**
+	  * A vector of Headers managed by this class.
+	  * @associates <{org.apache.jmeter.controllers.Header}>
+	  */
+
+
+	 private final static int columnCount = 2;
+	 private final static String[] columnNames = {
+		JMeterUtils.getResString("name"),
+		JMeterUtils.getResString("value")
+	 };
+
+	 private static List addableList = new LinkedList();
+
+	 public HeaderManager () {
+		setProperty(HEADERS,new ArrayList());
+	 }
+
+
+	 public List getHeaders() {
+		  return (List)getProperty(HEADERS);
+	 }
+
+	 public int getColumnCount() {
+			  return columnCount;
+		 }
+
+	public String getColumnName(int column) {
+			  return columnNames[column];
+		 }
+
+	public Class getColumnClass(int column) {
+			  return columnNames[column].getClass();
+		 }
+
+	public Header getHeader(int row)
+	{
+		return (Header)getHeaders().get(row);
+	}
+
+	 /** save the header data to a file */
+	 public void save(String headFile) throws IOException {
+		  File file = new File(headFile);
+		  if (!file.isAbsolute()) {
+				file = new File(System.getProperty("user.dir") + File.separator + headFile);
+		  }
+		  PrintWriter writer = new PrintWriter(new FileWriter(file));
+		  writer.println("# JMeter generated Header file");
+		  for (int i = 0; i < getHeaders().size(); i++) {
+				Header head = (Header) getHeaders().get(i);
+				writer.println(head.toString());
+		  }
+		  writer.flush();
+		  writer.close();
+	 }
+
+	 /** add header data from a file */
+	 public void addFile (String headerFile) throws IOException {
+		  File file = new File(headerFile);
+		  if (!file.isAbsolute()) {
+				file = new File(System.getProperty("user.dir") + File.separator + headerFile);
+		  }
+		  BufferedReader reader = null;
+		  if (file.canRead()) {
+				reader = new BufferedReader(new FileReader(file));
+		  } else {
+				throw new IOException("The file you specified cannot be read.");
+		  }
+
+		  String line;
+		  while ((line = reader.readLine()) != null) {
+				try {
+					 if (line.startsWith("#") || line.trim().length() == 0) {
+						  continue;
+					 }
+					 String[] st = split(line, "\t"," ");
+					 int name = 0;
+					 int value = 1;
+					 Header header = new Header(st[name], st[value]);
+					 getHeaders().add(header);
+				} catch (Exception e) {
+					 throw new IOException("Error parsing header line\n\t'" + line + "'\n\t" + e);
+				}
+		  }
+		  reader.close();
+	 }
+
+	 /** add a header */
+	 public void add(Header h) {
+		  getHeaders().add(h);
+	 }
+
+	 /** add an empty header */
+	 public void add() {
+		getHeaders().add(new Header());
+	 }
+
+	 /** remove a header */
+	 public void remove(int index) {
+		  getHeaders().remove(index);
+	 }
+
+	 /** return the number headers */
+	 public int size() {
+		  return getHeaders().size();
+	 }
+
+	 /** return the header at index i */
+	 public Header get(int i) {
+		  return (Header) getHeaders().get(i);
+	 }
+
+	 /*
+	 public String getHeaderHeaderForURL(URL url) {
+		  if (!url.getProtocol().toUpperCase().trim().equals("HTTP") &&
+					 ! url.getProtocol().toUpperCase().trim().equals("HTTPS")) {
+				return null;
+		  }
+
+		  StringBuffer sbHeader = new StringBuffer();
+		  for (Iterator enum = headers.iterator(); enum.hasNext();) {
+				Header header = (Header) enum.next();
+				if (url.getHost().endsWith(header.getDomain()) &&
+						  url.getFile().startsWith(header.getPath()) &&
+						  (System.currentTimeMillis() / 1000) <= header.getExpires()) {
+					 if (sbHeader.length() > 0) {
+						  sbHeader.append("; ");
+					 }
+					 sbHeader.append(header.getName()).append("=").append(header.getValue());
+				}
+		  }
+
+		  if (sbHeader.length() != 0) {
+				return sbHeader.toString();
+		  } else {
+				return null;
+		  }
+	 }
+	 */
+
+	 /*
+	 public void addHeaderFromHeader(String headerHeader, URL url) {
+		  StringTokenizer st = new StringTokenizer(headerHeader, ";");
+		  String nvp;
+
+		  // first n=v is name=value
+		  nvp = st.nextToken();
+		  int index = nvp.indexOf("=");
+		  String name = nvp.substring(0,index);
+		  String value = nvp.substring(index+1);
+		  String domain = url.getHost();
+
+		  Header newHeader = new Header(name, value);
+		  // check the rest of the headers
+		  while (st.hasMoreTokens()) {
+				nvp = st.nextToken();
+				nvp = nvp.trim();
+				index = nvp.indexOf("=");
+				if(index == -1) {
+					 index = nvp.length();
+				}
+				String key = nvp.substring(0,index);
+
+				Vector removeIndices = new Vector();
+				for (int i = headers.size() - 1; i >= 0; i--) {
+				Header header = (Header) headers.get(i);
+				if (header == null) {
+					 continue;
+				}
+				if (header.getName().equals(newHeader.getName())) {
+					 removeIndices.addElement(new Integer(i));
+				}
+		  }
+
+		  for (Enumeration e = removeIndices.elements(); e.hasMoreElements();) {
+				index = ((Integer) e.nextElement()).intValue();
+				headers.remove(index);
+		  }
+
+	 }
+	 */
+
+	 public void removeHeaderNamed(String name) {
+		  Vector removeIndices = new Vector();
+		  for (int i = getHeaders().size() - 1; i > 0; i--) {
+				Header header = (Header) getHeaders().get(i);
+				if (header == null) {
+					 continue;
+				}
+				if (header.getName().equalsIgnoreCase(name)) {
+					 removeIndices.addElement(new Integer(i));
+				}
+		  }
+
+		  for (Enumeration e = removeIndices.elements(); e.hasMoreElements();) {
+				getHeaders().remove(((Integer) e.nextElement()).intValue());
+		  }
+	 }
+
+	 /******************************************************
+	  * Takes a String and a tokenizer character, and returns
+		 a new array of strings of the string split by the tokenizer
+		 character.
+		 @param splittee String to be split
+		 @param splitChar Character to split the string on
+		 @param def Default value to place between two split chars that have
+		 nothing between them
+		 @return Array of all the tokens.
+	  ******************************************************/
+	 public String[] split(String splittee, String splitChar, String def) {
+		  if(splittee == null || splitChar == null) {
+				return new String[0];
+		  }
+		  StringTokenizer tokens;
+		  String temp;
+		  int spot;
+		  while((spot=splittee.indexOf(splitChar + splitChar))!=-1) {
+				splittee=splittee.substring(0, spot + splitChar.length()) + def +
+					 splittee.substring(spot + (1*splitChar.length()), splittee.length());
+		  }
+		  Vector returns=new Vector();
+		  tokens = new StringTokenizer(splittee, splitChar);
+		  while(tokens.hasMoreTokens()) {
+				temp = (String)tokens.nextToken();
+				returns.addElement(temp);
+		  }
+		  String[] values=new String[returns.size()];
+		  returns.copyInto(values);
+		  return values;
+	 }
+
+	 public String getClassLabel() {
+		return JMeterUtils.getResString("header_manager_title");
+	 }
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Entries
new file mode 100644
index 0000000..2fce733
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Entries
@@ -0,0 +1,3 @@
+/HttpTestSampleGui.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/SoapSamplerGui.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Repository
new file mode 100644
index 0000000..a5497b2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/HttpTestSampleGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/HttpTestSampleGui.java
new file mode 100644
index 0000000..136fc51
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/HttpTestSampleGui.java
@@ -0,0 +1,194 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.control.gui;
+import java.awt.*;
+import java.awt.event.*;
+import java.util.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.config.gui.MultipartUrlConfigGui;
+import org.apache.jmeter.protocol.http.config.gui.UrlConfigGui;
+import org.apache.jmeter.protocol.http.sampler.*;
+import org.apache.jmeter.samplers.gui.AbstractSamplerGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:51 $
+ *@version   1.0
+ ***************************************/
+
+public class HttpTestSampleGui extends AbstractSamplerGui
+{
+	private UrlConfigGui urlConfigGui;
+	private JCheckBox getImages;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public HttpTestSampleGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param element  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		urlConfigGui.configure(element);
+		String testClass = (String)element.getProperty(TestElement.TEST_CLASS);
+		if(testClass != null && testClass.endsWith("Full"))
+		{
+			getImages.setSelected(true);
+		}
+		else
+		{
+			getImages.setSelected(false);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		HTTPSampler sampler;
+		TestElement el = urlConfigGui.createTestElement();
+		if(getImages.isSelected())
+		{
+			sampler = new HTTPSamplerFull();
+		}
+		else
+		{
+			sampler = new HTTPSampler();
+		}
+		sampler.addTestElement(el);
+		this.configureTestElement(sampler);
+		return sampler;
+	}
+
+	/****************************************
+	 * Gets the ClassLabel attribute of the HttpTestSample object
+	 *
+	 *@return   The ClassLabel value
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("web_testing_title");
+	}
+
+	private void init()
+	{
+		this.setLayout(new GridLayout(1,1));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new BorderLayout());
+		JPanel titlePanel = new JPanel(new BorderLayout());
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("web_testing_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		titlePanel.add(panelTitleLabel,BorderLayout.NORTH);
+
+		// NAME
+		titlePanel.add(getNamePanel(),BorderLayout.SOUTH);
+		mainPanel.add(titlePanel,BorderLayout.NORTH);
+
+		// URL CONFIG
+		urlConfigGui = new MultipartUrlConfigGui(false);
+		mainPanel.add(urlConfigGui,BorderLayout.CENTER);
+
+		// OPTIONAL TASKS
+		mainPanel.add(createOptionalTasksPanel(),BorderLayout.SOUTH);
+
+		this.add(mainPanel);
+	}
+
+	private JPanel createOptionalTasksPanel()
+	{
+		// OPTIONAL TASKS
+		JPanel optionalTasksPanel = new JPanel();
+		optionalTasksPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+		optionalTasksPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("optional_tasks")));
+
+		// RETRIEVE IMAGES
+		JPanel retrieveImagesPanel = new JPanel();
+		retrieveImagesPanel.setLayout(new BoxLayout(retrieveImagesPanel, BoxLayout.X_AXIS));
+		retrieveImagesPanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
+		getImages = new JCheckBox(JMeterUtils.getResString("web_testing_retrieve_images"));
+		retrieveImagesPanel.add(getImages);
+
+		optionalTasksPanel.add(retrieveImagesPanel);
+
+		return optionalTasksPanel;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/SoapSamplerGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/SoapSamplerGui.java
new file mode 100644
index 0000000..126503d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/SoapSamplerGui.java
@@ -0,0 +1,101 @@
+package org.apache.jmeter.protocol.http.control.gui;
+
+import java.awt.Font;
+import java.net.MalformedURLException;
+import java.net.URL;
+
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.gui.util.JLabeledTextArea;
+import org.apache.jmeter.gui.util.JLabeledTextField;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.sampler.SoapSampler;
+import org.apache.jmeter.samplers.gui.AbstractSamplerGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class SoapSamplerGui extends AbstractSamplerGui {
+	private static final String label = JMeterUtils.getResString("soap_sampler_title");
+	JLabeledTextField urlField = new JLabeledTextField(JMeterUtils.getResString("url"));
+	JLabeledTextArea soapXml = new JLabeledTextArea(JMeterUtils.getResString("soap_data_title"),
+			null);
+
+	public SoapSamplerGui()
+	{
+		init();
+	}
+	
+	/**
+	 * @see JMeterGUIComponent#getStaticLabel()
+	 */
+	public String getStaticLabel() {
+		return label;
+	}
+
+	/**
+	 * @see JMeterGUIComponent#createTestElement()
+	 */
+	public TestElement createTestElement() {
+		SoapSampler sampler = new SoapSampler();
+		this.configureTestElement(sampler);
+		try {
+			URL url = new URL(urlField.getText());
+			sampler.setDomain(url.getHost());
+			sampler.setPort(url.getPort());
+			sampler.setProtocol(url.getProtocol());
+			sampler.setMethod(SoapSampler.POST);
+			sampler.setPath(url.getPath());
+			sampler.setXmlData(soapXml.getText());
+		} catch(MalformedURLException e) {
+		}
+		return sampler;
+	}
+	
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(label);
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		mainPanel.add(urlField);
+
+		// OPTIONAL TASKS
+		mainPanel.add(soapXml);
+
+		this.add(mainPanel);
+	}
+	
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		SoapSampler sampler = (SoapSampler)el;
+		try {
+			urlField.setText(sampler.getUrl().toString());
+		} catch(MalformedURLException e) {
+		}
+		soapXml.setText(sampler.getXmlData());
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/AuthPanel.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/AuthPanel.java
new file mode 100644
index 0000000..00046e3
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/AuthPanel.java
@@ -0,0 +1,577 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.gui;
+import java.awt.*;
+import java.awt.event.*;
+import java.io.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.control.*;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Handles input for determining if authentication services are required for a
+ * Sampler. It also understands how to get AuthManagers for the files that the
+ * user selects.
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:51 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class AuthPanel extends AbstractConfigGui implements ActionListener
+{
+
+	InnerTableModel tableModel;
+
+	/****************************************
+	 * A table to show the authentication information
+	 ***************************************/
+	JTable authTable;
+	JButton addButton;
+	JButton deleteButton;
+	JButton loadButton;
+	JButton saveButton;
+	JPanel authManagerPanel;
+
+	/****************************************
+	 * Default Constructor
+	 ***************************************/
+	public AuthPanel()
+	{
+		tableModel = new InnerTableModel();
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		AuthManager authMan = tableModel.manager;
+		configureTestElement(authMan);
+		return (TestElement)authMan.clone();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		tableModel.manager = (AuthManager)el;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("auth_manager_title");
+	}
+
+	/****************************************
+	 * Shows the main authentication panel for this object
+	 ***************************************/
+	public void init()
+	{
+		// set the layout of the control panel
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		authManagerPanel = new JPanel();
+
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		authManagerPanel.setBorder(margin);
+
+		authManagerPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("auth_manager_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		authManagerPanel.add(panelTitleLabel);
+
+		authManagerPanel.add(getNamePanel());
+
+		JPanel authTablePanel = createAuthTablePanel();
+		authManagerPanel.add(authTablePanel);
+
+		this.add(authManagerPanel);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void actionPerformed(ActionEvent e)
+	{
+		String action = e.getActionCommand();
+
+		if(action.equals("Delete"))
+		{
+			if(tableModel.getRowCount() > 0)
+			{
+				// If a table cell is being edited, we must cancel the editing before
+				// deleting the row
+				if(authTable.isEditing())
+				{
+					TableCellEditor cellEditor = authTable.getCellEditor(authTable.getEditingRow(), authTable.getEditingColumn());
+					cellEditor.cancelCellEditing();
+				}
+
+				int rowSelected = authTable.getSelectedRow();
+
+				if(rowSelected != -1)
+				{
+					tableModel.removeRow(rowSelected);
+					tableModel.fireTableDataChanged();
+
+					// Disable the DELETE and SAVE buttons if no rows remaining after delete
+					if(tableModel.getRowCount() == 0)
+					{
+						deleteButton.setEnabled(false);
+						saveButton.setEnabled(false);
+					}
+
+					// Table still contains one or more rows, so highlight (select)
+					// the appropriate one.
+					else
+					{
+						int rowToSelect = rowSelected;
+
+						if(rowSelected >= tableModel.getRowCount())
+						{
+							rowToSelect = rowSelected - 1;
+						}
+
+						authTable.setRowSelectionInterval(rowToSelect, rowToSelect);
+					}
+				}
+			}
+		}
+		else if(action.equals("Add"))
+		{
+			// If a table cell is being edited, we should accept the current value
+			// and stop the editing before adding a new row.
+			if(authTable.isEditing())
+			{
+				TableCellEditor cellEditor = authTable.getCellEditor(authTable.getEditingRow(), authTable.getEditingColumn());
+				cellEditor.stopCellEditing();
+			}
+
+			tableModel.addNewRow();
+			tableModel.fireTableDataChanged();
+
+			// Enable the DELETE and SAVE buttons if they are currently disabled.
+			if(!deleteButton.isEnabled())
+			{
+				deleteButton.setEnabled(true);
+			}
+			if(!saveButton.isEnabled())
+			{
+				saveButton.setEnabled(true);
+			}
+
+			// Highlight (select) the appropriate row.
+			int rowToSelect = tableModel.getRowCount() - 1;
+			authTable.setRowSelectionInterval(rowToSelect, rowToSelect);
+		}
+		else if(action.equals("Load"))
+		{
+			try
+			{
+				File tmp = FileDialoger.promptToOpenFile().getSelectedFile();
+				if(tmp != null)
+				{
+					tableModel.manager.addFile(tmp.getAbsolutePath());
+					tableModel.fireTableDataChanged();
+
+					if(tableModel.getRowCount() > 0)
+					{
+						deleteButton.setEnabled(true);
+						saveButton.setEnabled(true);
+					}
+				}
+			}
+			catch(IOException ex)
+			{
+				ex.printStackTrace();
+			}
+			catch(NullPointerException err){}
+		}
+		else if(action.equals("Save"))
+		{
+			try
+			{
+				File tmp = FileDialoger.promptToSaveFile(null).getSelectedFile();
+				if(tmp != null)
+				{
+					tableModel.manager.save(tmp.getAbsolutePath());
+				}
+			}
+			catch(IOException ex)
+			{
+				ex.printStackTrace();
+			}
+			catch(NullPointerException err){}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPanel createAuthTablePanel()
+	{
+		Border margin = new EmptyBorder(5, 10, 10, 10);
+
+		JPanel tempPanel = new JPanel();
+		tempPanel.setLayout(new VerticalLayout(0, VerticalLayout.CENTER));
+		tempPanel.setBorder(new CompoundBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("auths_stored")), margin));
+
+		// create the JTable that holds auth per row
+		authTable = new JTable(tableModel);
+		authTable.setCellSelectionEnabled(true);
+		authTable.setRowSelectionAllowed(true);
+		authTable.setColumnSelectionAllowed(false);
+		authTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+
+		TableColumn passwordColumn = authTable.getColumnModel().getColumn(2);
+		passwordColumn.setCellEditor(new DefaultCellEditor(new JPasswordField()));
+		passwordColumn.setCellRenderer(new PasswordCellRenderer());
+
+		// create a JScrollPane and place the auth JTable inside it
+		JScrollPane scroller = new JScrollPane(authTable);
+		authTable.setPreferredScrollableViewportSize(new Dimension(520, 150));
+		JTableHeader tableHeader = authTable.getTableHeader();
+		scroller.setColumnHeaderView(tableHeader);
+
+		tempPanel.add(scroller);
+
+		// ADD button
+		addButton = new JButton(JMeterUtils.getResString("add"));
+		addButton.setMnemonic('A');
+		addButton.setActionCommand("Add");
+		addButton.addActionListener(this);
+
+		// DELETE button
+		deleteButton = new JButton(JMeterUtils.getResString("delete"));
+
+		if(tableModel.getRowCount() == 0)
+		{
+			deleteButton.setEnabled(false);
+		}
+		else
+		{
+			deleteButton.setEnabled(true);
+		}
+
+		deleteButton.setMnemonic('D');
+		deleteButton.setActionCommand("Delete");
+		deleteButton.addActionListener(this);
+
+		// LOAD button
+		loadButton = new JButton(JMeterUtils.getResString("load"));
+		loadButton.setMnemonic('L');
+		loadButton.setActionCommand("Load");
+		loadButton.addActionListener(this);
+
+		// SAVE button
+		saveButton = new JButton(JMeterUtils.getResString("save"));
+
+		if(tableModel.getRowCount() == 0)
+		{
+			saveButton.setEnabled(false);
+		}
+		else
+		{
+			saveButton.setEnabled(true);
+		}
+
+		saveButton.setMnemonic('S');
+		saveButton.setActionCommand("Save");
+		saveButton.addActionListener(this);
+
+		// Button Panel
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.add(addButton);
+		buttonPanel.add(deleteButton);
+		buttonPanel.add(loadButton);
+		buttonPanel.add(saveButton);
+
+		tempPanel.add(Box.createRigidArea(new Dimension(0, 10)));
+		tempPanel.add(buttonPanel);
+
+		return tempPanel;
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:51 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class InnerTableModel extends AbstractTableModel
+	{
+		AuthManager manager;
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 *
+		 *@param man  !ToDo (Parameter description)
+		 ***************************************/
+		public InnerTableModel(AuthManager man)
+		{
+			manager = man;
+		}
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 ***************************************/
+		public InnerTableModel()
+		{
+			manager = new AuthManager();
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param row  !ToDo (Parameter description)
+		 ***************************************/
+		public void removeRow(int row)
+		{
+			manager.remove(row);
+		}
+
+		/****************************************
+		 * !ToDo
+		 ***************************************/
+		public void addNewRow()
+		{
+			manager.addAuth();
+		}
+
+		/****************************************
+		 * !ToDoo (Method description)
+		 *
+		 *@param row     !ToDo (Parameter description)
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public boolean isCellEditable(int row, int column)
+		{
+			// all table cells are editable
+			return true;
+		}
+
+		/****************************************
+		 * !ToDoo (Method description)
+		 *
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public Class getColumnClass(int column)
+		{
+			return getValueAt(0, column).getClass();
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public int getRowCount()
+		{
+			return manager.getAuthObjects().size();
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public int getColumnCount()
+		{
+			return manager.getColumnCount();
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public String getColumnName(int column)
+		{
+			return manager.getColumnName(column);
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@param row     !ToDo (Parameter description)
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public Object getValueAt(int row, int column)
+		{
+			Authorization auth = manager.getAuthObjectAt(row);
+
+			if(column == 0)
+			{
+				return auth.getURL();
+			}
+			else if(column == 1)
+			{
+				return auth.getUser();
+			}
+			else if(column == 2)
+			{
+				return auth.getPass();
+			}
+			return null;
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param value   !ToDo (Parameter description)
+		 *@param row     !ToDo (Parameter description)
+		 *@param column  !ToDo (Parameter description)
+		 ***************************************/
+		public void setValueAt(Object value, int row, int column)
+		{
+			Authorization auth = manager.getAuthObjectAt(row);
+
+			if(column == 0)
+			{
+				auth.setURL((String)value);
+			}
+			else if(column == 1)
+			{
+				auth.setUser((String)value);
+			}
+			else if(column == 2)
+			{
+				auth.setPass((String)value);
+			}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:51 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	private class PasswordCellRenderer extends JPasswordField implements TableCellRenderer
+	{
+		private Border myBorder;
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 ***************************************/
+		public PasswordCellRenderer()
+		{
+			super();
+			myBorder = new EmptyBorder(1, 2, 1, 2);
+			setOpaque(true);
+			setBorder(myBorder);
+		}
+
+		/****************************************
+		 * !ToDoo (Method description)
+		 *
+		 *@param table       !ToDo (Parameter description)
+		 *@param value       !ToDo (Parameter description)
+		 *@param isSelected  !ToDo (Parameter description)
+		 *@param hasFocus    !ToDo (Parameter description)
+		 *@param row         !ToDo (Parameter description)
+		 *@param column      !ToDo (Parameter description)
+		 *@return            !ToDo (Return description)
+		 ***************************************/
+		public Component getTableCellRendererComponent(JTable table,
+				Object value, boolean isSelected, boolean hasFocus,
+				int row, int column)
+		{
+			setText((String)value);
+
+			setBackground(isSelected && !hasFocus ?
+					table.getSelectionBackground() : table.getBackground());
+			setForeground(isSelected && !hasFocus ?
+					table.getSelectionForeground() : table.getForeground());
+
+			setFont(table.getFont());
+
+			return this;
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Entries
new file mode 100644
index 0000000..f9514e1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Entries
@@ -0,0 +1,5 @@
+/AuthPanel.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/CookiePanel.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/HTTPArgumentsPanel.java/1.3/Fri Aug 16 12:58:52 2002//Tv1_7_3
+/HeaderPanel.java/1.2/Wed Aug 14 16:38:04 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Repository
new file mode 100644
index 0000000..4e49ea1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CookiePanel.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CookiePanel.java
new file mode 100644
index 0000000..8fd3063
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/CookiePanel.java
@@ -0,0 +1,438 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.gui;
+import java.awt.Dimension;
+import java.awt.Font;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.io.File;
+import java.io.IOException;
+import java.util.Iterator;
+
+import javax.swing.BorderFactory;
+import javax.swing.Box;
+import javax.swing.JButton;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JScrollPane;
+import javax.swing.JTable;
+import javax.swing.JTextArea;
+import javax.swing.JTextField;
+import javax.swing.JTextPane;
+import javax.swing.ListSelectionModel;
+import javax.swing.border.Border;
+import javax.swing.border.CompoundBorder;
+import javax.swing.border.EmptyBorder;
+import javax.swing.table.JTableHeader;
+import javax.swing.table.TableCellEditor;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.gui.util.PowerTableModel;
+import org.apache.jmeter.gui.util.TextAreaTableCellEditor;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.control.Cookie;
+import org.apache.jmeter.protocol.http.control.CookieManager;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Allows the user to specify if she needs cookie services, and give parameters
+ * for this service.
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/11 19:24:51 $
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class CookiePanel extends AbstractConfigGui implements ActionListener
+{
+	private final static int columnCount = 6;
+	private final static String[] columnNames = {
+		 JMeterUtils.getResString("name"),
+		 JMeterUtils.getResString("value"),
+		 JMeterUtils.getResString("domain"),
+		 JMeterUtils.getResString("path"),
+		 JMeterUtils.getResString("secure"),
+		 JMeterUtils.getResString("expiration"),
+	};
+	
+	JTable cookieTable;
+	JTextField nicknameField;
+	JButton addButton;
+	JButton deleteButton;
+	JButton loadButton;
+	JButton saveButton;
+	JPanel cookieManagerPanel;
+	JTextPane nicknameTextPane;
+	JTextArea nicknameText;
+	PowerTableModel tableModel;
+
+	/****************************************
+	 * Default constructor
+	 ***************************************/
+	public CookiePanel()
+	{
+		tableModel = new PowerTableModel(columnNames,new Class[]{String.class,
+				String.class,String.class,String.class,Boolean.class,Long.class});
+		init();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("cookie_manager_title");
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void actionPerformed(ActionEvent e)
+	{
+		String action = e.getActionCommand();
+
+		if(action.equals("Delete"))
+		{
+			if(tableModel.getRowCount() > 0)
+			{
+				// If a table cell is being edited, we must cancel the editing before
+				// deleting the row
+				if(cookieTable.isEditing())
+				{
+					TableCellEditor cellEditor = cookieTable.getCellEditor(cookieTable.getEditingRow(), cookieTable.getEditingColumn());
+					cellEditor.cancelCellEditing();
+				}
+
+				int rowSelected = cookieTable.getSelectedRow();
+
+				if(rowSelected != -1)
+				{
+					tableModel.removeRow(rowSelected);
+					tableModel.fireTableDataChanged();
+
+					// Disable the DELETE and SAVE buttons if no rows remaining after delete
+					if(tableModel.getRowCount() == 0)
+					{
+						deleteButton.setEnabled(false);
+						saveButton.setEnabled(false);
+					}
+
+					// Table still contains one or more rows, so highlight (select)
+					// the appropriate one.
+					else
+					{
+						int rowToSelect = rowSelected;
+
+						if(rowSelected >= tableModel.getRowCount())
+						{
+							rowToSelect = rowSelected - 1;
+						}
+
+						cookieTable.setRowSelectionInterval(rowToSelect, rowToSelect);
+					}
+				}
+			}
+		}
+		else if(action.equals("Add"))
+		{
+			// If a table cell is being edited, we should accept the current value
+			// and stop the editing before adding a new row.
+			if(cookieTable.isEditing())
+			{
+				TableCellEditor cellEditor = cookieTable.getCellEditor(cookieTable.getEditingRow(), cookieTable.getEditingColumn());
+				cellEditor.stopCellEditing();
+			}
+
+			tableModel.addNewRow();
+			tableModel.fireTableDataChanged();
+
+			// Enable the DELETE and SAVE buttons if they are currently disabled.
+			if(!deleteButton.isEnabled())
+			{
+				deleteButton.setEnabled(true);
+			}
+			if(!saveButton.isEnabled())
+			{
+				saveButton.setEnabled(true);
+			}
+
+			// Highlight (select) the appropriate row.
+			int rowToSelect = tableModel.getRowCount() - 1;
+			cookieTable.setRowSelectionInterval(rowToSelect, rowToSelect);
+		}
+		else if(action.equals("Load"))
+		{
+			try
+			{
+				File tmp = FileDialoger.promptToOpenFile().getSelectedFile();
+				if(tmp != null)
+				{
+					CookieManager manager = new CookieManager();
+					manager.addFile(tmp.getAbsolutePath());
+					Cookie cookie = manager.get(0);
+					addCookieToTable(cookie);
+					tableModel.fireTableDataChanged();
+
+					if(tableModel.getRowCount() > 0)
+					{
+						deleteButton.setEnabled(true);
+						saveButton.setEnabled(true);
+					}
+				}
+			}
+			catch(IOException ex)
+			{
+				ex.printStackTrace();
+			}
+			catch(NullPointerException err){}
+		}
+		else if(action.equals("Save"))
+		{
+			try
+			{
+				File tmp = FileDialoger.promptToSaveFile(null).getSelectedFile();
+				if(tmp != null)
+				{
+					createCookieManager().save(tmp.getAbsolutePath());
+				}
+			}
+			catch(IOException ex)
+			{
+				ex.printStackTrace();
+			}
+			catch(NullPointerException err){}
+		}
+	}
+
+	private void addCookieToTable(Cookie cookie) {
+		tableModel.addRow(new Object[]{cookie.getName(),cookie.getValue(),
+				cookie.getDomain(),cookie.getPath(),
+				new Boolean(cookie.getSecure()),
+				new Long(cookie.getExpires())});
+	}
+	
+	private CookieManager createCookieManager()
+	{
+		CookieManager cookieManager = new CookieManager();
+		for(int i = 0;i < tableModel.getRowCount();i++)
+		{
+			Cookie cookie = createCookie(tableModel.getRowData(i));
+			cookieManager.add(cookie);
+		}
+		return cookieManager;
+	}
+	
+	private Cookie createCookie(Object[] rowData)
+	{
+		Cookie cookie = new Cookie((String)rowData[0],(String)rowData[1],(String)rowData[2],
+				(String)rowData[3],((Boolean)rowData[4]).booleanValue(),
+				((Long)rowData[5]).longValue());
+		return cookie;
+	}
+	
+	private void populateTable(CookieManager manager)
+	{
+		Iterator iter = manager.getCookies().iterator();
+		while(iter.hasNext())
+		{
+			addCookieToTable((Cookie)iter.next());
+		}
+	}
+	
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		CookieManager cookieManager = createCookieManager();
+		configureTestElement(cookieManager);
+		return cookieManager;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		populateTable((CookieManager)el);
+	}
+
+	/****************************************
+	 * Shows the main cookie configuration panel
+	 ***************************************/
+	public void init()
+	{
+		// set the layout of the control panel
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		cookieManagerPanel = new JPanel();
+
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		cookieManagerPanel.setBorder(margin);
+
+		cookieManagerPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("cookie_manager_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		cookieManagerPanel.add(panelTitleLabel);
+
+		cookieManagerPanel.add(getNamePanel());
+
+		JPanel cookieTablePanel = createCookieTablePanel();
+		cookieManagerPanel.add(cookieTablePanel);
+
+		this.add(cookieManagerPanel);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPanel createCookieTablePanel()
+	{
+		Border margin = new EmptyBorder(5, 10, 10, 10);
+
+		JPanel tempPanel = new JPanel();
+		tempPanel.setLayout(new VerticalLayout(0, VerticalLayout.CENTER));
+		tempPanel.setBorder(new CompoundBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("cookies_stored")), margin));
+
+		// create the JTable that holds one cookie per row
+		cookieTable = new JTable(tableModel);
+		cookieTable.setCellSelectionEnabled(true);
+		cookieTable.setRowSelectionAllowed(true);
+		cookieTable.setColumnSelectionAllowed(false);
+		cookieTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+
+		// create a JScrollPane and place the cookie JTable inside it
+		JScrollPane scroller = new JScrollPane(cookieTable);
+		cookieTable.setPreferredScrollableViewportSize(new Dimension(520, 150));
+		JTableHeader tableHeader = cookieTable.getTableHeader();
+		scroller.setColumnHeaderView(tableHeader);
+
+		tempPanel.add(scroller);
+
+		// ADD button
+		addButton = new JButton(JMeterUtils.getResString("add"));
+		addButton.setMnemonic('A');
+		addButton.setActionCommand("Add");
+		addButton.addActionListener(this);
+
+		// DELETE button
+		deleteButton = new JButton(JMeterUtils.getResString("delete"));
+
+		if(tableModel.getRowCount() == 0)
+		{
+			deleteButton.setEnabled(false);
+		}
+		else
+		{
+			deleteButton.setEnabled(true);
+		}
+
+		deleteButton.setMnemonic('D');
+		deleteButton.setActionCommand("Delete");
+		deleteButton.addActionListener(this);
+
+		// LOAD button
+		loadButton = new JButton(JMeterUtils.getResString("load"));
+		loadButton.setMnemonic('L');
+		loadButton.setActionCommand("Load");
+		loadButton.addActionListener(this);
+
+		// SAVE button
+		saveButton = new JButton(JMeterUtils.getResString("save"));
+
+		if(tableModel.getRowCount() == 0)
+		{
+			saveButton.setEnabled(false);
+		}
+		else
+		{
+			saveButton.setEnabled(true);
+		}
+
+		saveButton.setMnemonic('S');
+		saveButton.setActionCommand("Save");
+		saveButton.addActionListener(this);
+
+		// Button Panel
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.add(addButton);
+		buttonPanel.add(deleteButton);
+		buttonPanel.add(loadButton);
+		buttonPanel.add(saveButton);
+
+		tempPanel.add(Box.createRigidArea(new Dimension(0, 10)));
+		tempPanel.add(buttonPanel);
+
+		return tempPanel;
+	}
+
+	
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/HTTPArgumentsPanel.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/HTTPArgumentsPanel.java
new file mode 100644
index 0000000..79a6969
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/HTTPArgumentsPanel.java
@@ -0,0 +1,93 @@
+package org.apache.jmeter.protocol.http.gui;
+
+import java.awt.event.FocusEvent;
+import java.net.URLEncoder;
+import java.util.Iterator;
+
+import javax.swing.event.ChangeEvent;
+import javax.swing.table.TableCellEditor;
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.gui.util.PowerTableModel;
+import org.apache.jmeter.gui.util.TextAreaTableCellEditor;
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.Data;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class HTTPArgumentsPanel extends ArgumentsPanel {
+	
+	private static final String ENCODED_VALUE = JMeterUtils.getResString("encoded_value");
+	private static final String ENCODE_OR_NOT = JMeterUtils.getResString("encode?");
+	
+	
+	protected void initializeTableModel() {
+		tableModel = new PowerTableModel(new String[]{Arguments.COLUMN_NAMES[0],Arguments.COLUMN_NAMES[1],
+				ENCODE_OR_NOT},
+				new Class[]{String.class,String.class,Boolean.class});
+	}
+	
+	public HTTPArgumentsPanel()
+	{
+		super(JMeterUtils.getResString("paramtable"));
+	}		
+	
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		Data model = tableModel.getData();
+		Arguments args = new Arguments();
+		model.reset();
+		while(model.next())
+		{
+			if(((Boolean)model.getColumnValue(ENCODE_OR_NOT)).booleanValue())
+			{
+				args.addArgument(new HTTPArgument((String)model.getColumnValue(Arguments.COLUMN_NAMES[0]),
+						model.getColumnValue(Arguments.COLUMN_NAMES[1])));
+			}
+			else
+			{
+				HTTPArgument arg = new HTTPArgument((String)model.getColumnValue(Arguments.COLUMN_NAMES[0]),
+						model.getColumnValue(Arguments.COLUMN_NAMES[1]),true);
+				arg.setAlwaysEncode(false);
+				args.addArgument(arg);
+			}
+		}
+		this.configureTestElement(args);
+		return (TestElement)args.clone();
+	}
+	
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		if(el instanceof Arguments)
+		{
+			tableModel.clearData();
+			HTTPArgument.convertArgumentsToHTTP((Arguments)el);
+			Iterator iter = ((Arguments)el).getArguments().iterator();
+			while(iter.hasNext())
+			{
+				HTTPArgument arg = (HTTPArgument)iter.next();
+				tableModel.addRow(new Object[]{arg.getName(),arg.getValue(),
+						new Boolean(arg.getAlwaysEncode())});
+			}
+		}
+		checkDeleteStatus();
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/HeaderPanel.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/HeaderPanel.java
new file mode 100644
index 0000000..37f33eb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/gui/HeaderPanel.java
@@ -0,0 +1,716 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.gui;
+import java.awt.Dimension;
+import java.awt.Font;
+import java.awt.GridBagConstraints;
+import java.awt.GridBagLayout;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.io.File;
+import java.io.IOException;
+
+import javax.swing.BorderFactory;
+import javax.swing.Box;
+import javax.swing.JButton;
+import javax.swing.JDialog;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.JScrollPane;
+import javax.swing.JTable;
+import javax.swing.JTextField;
+import javax.swing.ListSelectionModel;
+import javax.swing.border.Border;
+import javax.swing.border.CompoundBorder;
+import javax.swing.border.EmptyBorder;
+import javax.swing.table.AbstractTableModel;
+import javax.swing.table.JTableHeader;
+import javax.swing.table.TableCellEditor;
+
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.gui.util.FileDialoger;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.control.Header;
+import org.apache.jmeter.protocol.http.control.HeaderManager;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Allows the user to specify if she needs HTTP header services, and give
+ * parameters for this service.
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/14 16:38:04 $
+ *@version   $Revision: 1.2 $
+ ***************************************/
+public class HeaderPanel extends AbstractConfigGui implements ActionListener,FocusListener
+{
+
+	InnerTableModel tableModel;
+
+	/****************************************
+	 * A table to show the authentication information
+	 ***************************************/
+	JTable headerTable;
+
+	JButton addButton;
+	JButton deleteButton;
+	JButton loadButton;
+	JButton saveButton;
+	JPanel headerManagerPanel;
+
+	/****************************************
+	 * Default constructor
+	 ***************************************/
+	public HeaderPanel()
+	{
+		tableModel = new InnerTableModel();
+		init();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		HeaderManager headerManager = tableModel.manager;
+		configureTestElement(headerManager);
+		return (TestElement)headerManager.clone();
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		tableModel.manager = (HeaderManager)el;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("header_manager_title");
+	}
+
+	/****************************************
+	 * Gets a HeaderManager to manage the file that is currently selected. Null is
+	 * returned if no file is currently selected. Null will also be returned if
+	 * there is a problem reading the file while getting the HeaderManager.
+	 *
+	 *@returns   A HeaderManager for the current file, or null public HeaderManager
+	 *      getHeaderMgr() { return manager; }
+	 ***************************************/
+
+	/****************************************
+	 * Shows the main header configuration panel
+	 ***************************************/
+	public void init()
+	{
+		// set the layout of the control panel
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		headerManagerPanel = new JPanel();
+
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		headerManagerPanel.setBorder(margin);
+
+		headerManagerPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("header_manager_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		headerManagerPanel.add(panelTitleLabel);
+
+		headerManagerPanel.add(getNamePanel());
+
+		JPanel headerTablePanel = createHeaderTablePanel();
+		headerManagerPanel.add(headerTablePanel);
+
+		this.add(headerManagerPanel);
+	}
+
+	/****************************************
+	 * Description of the Method
+	 *
+	 *@param e  Description of Parameter
+	 ***************************************/
+	public void actionPerformed(ActionEvent e)
+	{
+		String action = e.getActionCommand();
+
+		if(action.equals("Delete"))
+		{
+			if(tableModel.getRowCount() > 0)
+			{
+				// If a table cell is being edited, we must cancel the editing before
+				// deleting the row
+				if(headerTable.isEditing())
+				{
+					TableCellEditor cellEditor = headerTable.getCellEditor(headerTable.getEditingRow(), headerTable.getEditingColumn());
+					cellEditor.cancelCellEditing();
+				}
+
+				int rowSelected = headerTable.getSelectedRow();
+
+				if(rowSelected != -1)
+				{
+					tableModel.removeRow(rowSelected);
+					tableModel.fireTableDataChanged();
+
+					// Disable the DELETE and SAVE buttons if no rows remaining after delete
+					if(tableModel.getRowCount() == 0)
+					{
+						deleteButton.setEnabled(false);
+						saveButton.setEnabled(false);
+					}
+
+					// Table still contains one or more rows, so highlight (select)
+					// the appropriate one.
+					else
+					{
+						int rowToSelect = rowSelected;
+
+						if(rowSelected >= tableModel.getRowCount())
+						{
+							rowToSelect = rowSelected - 1;
+						}
+
+						headerTable.setRowSelectionInterval(rowToSelect, rowToSelect);
+					}
+				}
+			}
+		}
+		else if(action.equals("Add"))
+		{
+			// If a table cell is being edited, we should accept the current value
+			// and stop the editing before adding a new row.
+			if(headerTable.isEditing())
+			{
+				TableCellEditor cellEditor = headerTable.getCellEditor(headerTable.getEditingRow(), headerTable.getEditingColumn());
+				cellEditor.stopCellEditing();
+			}
+
+			tableModel.addNewRow();
+			tableModel.fireTableDataChanged();
+
+			// Enable the DELETE and SAVE buttons if they are currently disabled.
+			if(!deleteButton.isEnabled())
+			{
+				deleteButton.setEnabled(true);
+			}
+			if(!saveButton.isEnabled())
+			{
+				saveButton.setEnabled(true);
+			}
+
+			// Highlight (select) the appropriate row.
+			int rowToSelect = tableModel.getRowCount() - 1;
+			headerTable.setRowSelectionInterval(rowToSelect, rowToSelect);
+		}
+		else if(action.equals("Load"))
+		{
+			try
+			{
+				File tmp = FileDialoger.promptToOpenFile().getSelectedFile();
+				if(tmp != null)
+				{
+					tableModel.manager.addFile(tmp.getAbsolutePath());
+					tableModel.fireTableDataChanged();
+
+					if(tableModel.getRowCount() > 0)
+					{
+						deleteButton.setEnabled(true);
+						saveButton.setEnabled(true);
+					}
+				}
+			}
+			catch(IOException ex)
+			{
+				ex.printStackTrace();
+			}
+			catch(NullPointerException err){}
+		}
+		else if(action.equals("Save"))
+		{
+			try
+			{
+				File tmp = FileDialoger.promptToSaveFile(null).getSelectedFile();
+				if(tmp != null)
+				{
+					tableModel.manager.save(tmp.getAbsolutePath());
+				}
+			}
+			catch(IOException ex)
+			{
+				ex.printStackTrace();
+			}
+			catch(NullPointerException err){}
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public JPanel createHeaderTablePanel()
+	{
+		Border margin = new EmptyBorder(5, 10, 10, 10);
+
+		JPanel tempPanel = new JPanel();
+		tempPanel.setLayout(new VerticalLayout(0, VerticalLayout.CENTER));
+		tempPanel.setBorder(new CompoundBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("headers_stored")), margin));
+
+		// create the JTable that holds header per row
+		headerTable = new JTable(tableModel);
+		headerTable.addFocusListener(this);
+		headerTable.setCellSelectionEnabled(true);
+		headerTable.setRowSelectionAllowed(true);
+		headerTable.setColumnSelectionAllowed(false);
+		headerTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+
+		// create a JScrollPane and place the header JTable inside it
+		JScrollPane scroller = new JScrollPane(headerTable);
+		headerTable.setPreferredScrollableViewportSize(new Dimension(520, 150));
+		JTableHeader tableHeader = headerTable.getTableHeader();
+		scroller.setColumnHeaderView(tableHeader);
+
+		tempPanel.add(scroller);
+
+		// ADD button
+		addButton = new JButton(JMeterUtils.getResString("add"));
+		addButton.setMnemonic('A');
+		addButton.setActionCommand("Add");
+		addButton.addActionListener(this);
+
+		// DELETE button
+		deleteButton = new JButton(JMeterUtils.getResString("delete"));
+
+		if(tableModel.getRowCount() == 0)
+		{
+			deleteButton.setEnabled(false);
+		}
+		else
+		{
+			deleteButton.setEnabled(true);
+		}
+
+		deleteButton.setMnemonic('D');
+		deleteButton.setActionCommand("Delete");
+		deleteButton.addActionListener(this);
+
+		// LOAD button
+		loadButton = new JButton(JMeterUtils.getResString("load"));
+		loadButton.setMnemonic('L');
+		loadButton.setActionCommand("Load");
+		loadButton.addActionListener(this);
+
+		// SAVE button
+		saveButton = new JButton(JMeterUtils.getResString("save"));
+
+		if(tableModel.getRowCount() == 0)
+		{
+			saveButton.setEnabled(false);
+		}
+		else
+		{
+			saveButton.setEnabled(true);
+		}
+
+		saveButton.setMnemonic('S');
+		saveButton.setActionCommand("Save");
+		saveButton.addActionListener(this);
+
+		// Button Panel
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.add(addButton);
+		buttonPanel.add(deleteButton);
+		buttonPanel.add(loadButton);
+		buttonPanel.add(saveButton);
+
+		tempPanel.add(Box.createRigidArea(new Dimension(0, 10)));
+		tempPanel.add(buttonPanel);
+
+		return tempPanel;
+	}
+
+	/****************************************
+	 * Updates a header record
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/14 16:38:04 $
+	 *@version   $Revision: 1.2 $
+	 ***************************************/
+	class HeaderUpdater implements ActionListener
+	{
+		JTextField nameField = new JTextField(20);
+		JTextField valueField = new JTextField(20);
+		JButton ok = new JButton("Ok");
+		JButton cancel = new JButton("Cancel");
+		int index;
+
+		JDialog updateDialog;
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 ***************************************/
+		public HeaderUpdater() { }
+
+		/****************************************
+		 * returns the contructed panel containing the header record
+		 *
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public JPanel getPanel()
+		{
+			JPanel main = new JPanel();
+			GridBagLayout g = new GridBagLayout();
+
+			main.setLayout(g);
+			GridBagConstraints c = new GridBagConstraints();
+			c.fill = c.BOTH;
+			c.gridwidth = 1;
+			c.gridheight = 1;
+			JLabel nameLabel = new JLabel(JMeterUtils.getResString("name") + ":");
+			c.gridx = 1;
+			c.gridy = 1;
+			g.setConstraints(nameLabel, c);
+			main.add(nameLabel);
+			JLabel valueLabel = new JLabel(JMeterUtils.getResString("value") + ":");
+			c.gridx = 1;
+			c.gridy = 2;
+			g.setConstraints(valueLabel, c);
+			main.add(valueLabel);
+
+			c.gridx = 2;
+			c.gridy = 1;
+			g.setConstraints(nameField, c);
+			main.add(nameField);
+			c.gridx = 2;
+			c.gridy = 2;
+			g.setConstraints(valueField, c);
+			main.add(valueField);
+
+			JPanel buttons = new JPanel();
+			ok.setPreferredSize(cancel.getPreferredSize());
+			buttons.add(ok);
+			buttons.add(cancel);
+			c.gridwidth = 2;
+			c.gridx = 1;
+			c.gridy = 7;
+			g.setConstraints(buttons, c);
+			main.add(buttons);
+
+			return main;
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param e  !ToDo (Parameter description)
+		 ***************************************/
+		public void actionPerformed(ActionEvent e)
+		{
+			String command = e.getActionCommand();
+			boolean valid = true;
+			index = -1;
+			if(command.equals("Edit"))
+			{
+				index = headerTable.getSelectedRow();
+				if(index < 0)
+				{
+					valid = false;
+				}
+				else
+				{
+					Header c = tableModel.manager.get(index);
+					nameField = new JTextField(c.getName(), 20);
+					valueField = new JTextField(c.getValue(), 20);
+					ok = new JButton("Ok");
+					cancel = new JButton("Cancel");
+				}
+			}
+			else if(command.equals("Add"))
+			{
+				nameField = new JTextField(20);
+				valueField = new JTextField(20);
+				ok = new JButton("Ok");
+				cancel = new JButton("Cancel");
+			}
+			if(valid)
+			{
+				if(updateDialog != null)
+				{
+					updateDialog.dispose();
+				}
+				updateDialog = new JDialog();
+				updateDialog.setSize(350, 300);
+
+				ok.addActionListener(
+					new ActionListener()
+					{
+						/****************************************
+						 * !ToDo (Method description)
+						 *
+						 *@param ev  !ToDo (Parameter description)
+						 ***************************************/
+						public void actionPerformed(ActionEvent ev)
+						{
+							int i = index;
+							Header c = new Header();
+							if(i >= 0)
+							{
+								c = tableModel.manager.get(index);
+							}
+							c.setName(nameField.getText());
+							c.setValue(valueField.getText());
+							if(i < 0)
+							{
+								tableModel.manager.add(c);
+							}
+							tableModel.fireTableDataChanged();
+							updateDialog.dispose();
+						}
+					});
+				cancel.addActionListener(
+					new ActionListener()
+					{
+						/****************************************
+						 * !ToDo (Method description)
+						 *
+						 *@param ev  !ToDo (Parameter description)
+						 ***************************************/
+						public void actionPerformed(ActionEvent ev)
+						{
+							updateDialog.dispose();
+						}
+					});
+				updateDialog.getContentPane().add(getPanel());
+				updateDialog.show();
+			}
+		}
+	}
+	
+	public void focusGained(FocusEvent e)
+	{
+	}
+	
+	public void focusLost(FocusEvent e)
+	{
+		try {
+			headerTable.getCellEditor().stopCellEditing();
+		} catch (RuntimeException err) {
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/14 16:38:04 $
+	 *@version   $Revision: 1.2 $
+	 ***************************************/
+	private class InnerTableModel extends AbstractTableModel
+	{
+		HeaderManager manager;
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 *
+		 *@param man  !ToDo (Parameter description)
+		 ***************************************/
+		public InnerTableModel(HeaderManager man)
+		{
+			manager = man;
+		}
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 ***************************************/
+		public InnerTableModel()
+		{
+			manager = new HeaderManager();
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param row  !ToDo (Parameter description)
+		 ***************************************/
+		public void removeRow(int row)
+		{
+			manager.remove(row);
+		}
+
+		/****************************************
+		 * !ToDo
+		 ***************************************/
+		public void addNewRow()
+		{
+			manager.add();
+		}
+
+		/****************************************
+		 * !ToDoo (Method description)
+		 *
+		 *@param row     !ToDo (Parameter description)
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public boolean isCellEditable(int row, int column)
+		{
+			// all table cells are editable
+			return true;
+		}
+
+		/****************************************
+		 * !ToDoo (Method description)
+		 *
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public Class getColumnClass(int column)
+		{
+			return getValueAt(0, column).getClass();
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public int getRowCount()
+		{
+			return manager.getHeaders().size();
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@return   !ToDo (Return description)
+		 ***************************************/
+		public int getColumnCount()
+		{
+			return manager.getColumnCount();
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public String getColumnName(int column)
+		{
+			return manager.getColumnName(column);
+		}
+
+		/****************************************
+		 * required by table model interface
+		 *
+		 *@param row     !ToDo (Parameter description)
+		 *@param column  !ToDo (Parameter description)
+		 *@return        !ToDo (Return description)
+		 ***************************************/
+		public Object getValueAt(int row, int column)
+		{
+			Header head = manager.getHeader(row);
+			if(column == 0)
+			{
+				return head.getName();
+			}
+			else if(column == 1)
+			{
+				return head.getValue();
+			}
+			return null;
+		}
+
+		/****************************************
+		 * !ToDo (Method description)
+		 *
+		 *@param value   !ToDo (Parameter description)
+		 *@param row     !ToDo (Parameter description)
+		 *@param column  !ToDo (Parameter description)
+		 ***************************************/
+		public void setValueAt(Object value, int row, int column)
+		{
+			Header header = manager.getHeader(row);
+
+			if(column == 0)
+			{
+				header.setName((String)value);
+			}
+			else if(column == 1)
+			{
+				header.setValue((String)value);
+			}
+		}
+
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/AnchorModifier.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/AnchorModifier.java
new file mode 100644
index 0000000..4110276
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/AnchorModifier.java
@@ -0,0 +1,260 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier;
+
+import org.apache.jmeter.config.ResponseBasedModifier;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.protocol.http.parser.HtmlParser;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.util.JMeterUtils;
+
+import java.util.*;
+import java.io.*;
+import org.w3c.dom.*;
+import org.xml.sax.SAXException;
+import java.net.*;
+import org.apache.jmeter.testelement.AbstractTestElement;
+
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/11 19:24:51 $
+ *@version    1.0
+ ***********************************************************/
+
+public class AnchorModifier extends AbstractTestElement implements ResponseBasedModifier,
+		Serializable
+{
+
+	private static Random rand = new Random();
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public AnchorModifier()
+	{
+	}
+
+	/************************************************************
+	 *  Modifies an Entry object based on HTML response text.
+	 *
+	 *@param  entry   !ToDo (Parameter description)
+	 *@param  result  !ToDo (Parameter description)
+	 *@return         !ToDo (Return description)
+	 ***********************************************************/
+	public boolean modifyEntry(Sampler sam, SampleResult result)
+	{
+		HTTPSampler sampler = null;
+		if(result == null || !(sam instanceof HTTPSampler))
+		{
+			return false;
+		}
+		else
+		{
+			sampler = (HTTPSampler)sam;
+		}
+		List potentialLinks = new ArrayList();
+		String responseText = "";
+		try {
+			responseText = new String(result.getResponseData(),"8859_1");
+		} catch(UnsupportedEncodingException e) {
+		}
+		Document html;
+		try
+		{
+			int index = responseText.indexOf("<");
+			if(index == -1)
+			{
+				index = 0;
+			}
+			html = (Document)HtmlParser.getDOM(responseText.substring(index));
+		}
+		catch (SAXException e)
+		{
+			return false;
+		}
+		addAnchorUrls(html, result, sampler, potentialLinks);
+		addFormUrls(html,result,sampler,potentialLinks);
+		if (potentialLinks.size() > 0)
+		{
+			HTTPSampler url = (HTTPSampler)potentialLinks.get(rand.nextInt(potentialLinks.size()));
+			sampler.setDomain(url.getDomain());
+			sampler.setPath(url.getPath());
+			if(url.getMethod().equals(HTTPSampler.POST))
+			{
+				Iterator iter = sampler.getArguments().iterator();
+				while(iter.hasNext())
+				{
+					Argument arg = (Argument)iter.next();
+					modifyArgument(arg,url.getArguments());
+				}
+			}
+			else
+			{
+				sampler.setArguments(url.getArguments());
+				//config.parseArguments(url.getQueryString());
+			}
+			sampler.setProtocol(url.getProtocol());
+			return true;
+		}
+		return false;
+	}
+
+	private void modifyArgument(Argument arg,Arguments args)
+	{
+		List possibleReplacements = new ArrayList();
+		Iterator iter = args.iterator();
+		Argument replacementArg;
+		while (iter.hasNext())
+		{
+			replacementArg = (Argument)iter.next();
+			try
+			{
+				if(HtmlParser.isArgumentMatched(replacementArg,arg))
+				{
+					possibleReplacements.add(replacementArg);
+				}
+			}
+			catch (Exception ex) {
+				ex.printStackTrace();
+			}
+		}
+		if(possibleReplacements.size() > 0)
+		{
+			replacementArg = (Argument)possibleReplacements.get(rand.nextInt(possibleReplacements.size()));
+			arg.setName(replacementArg.getName());
+			arg.setValue(replacementArg.getValue());
+			args.removeArgument(replacementArg);
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo
+	 *
+	 *@param  config  !ToDo
+	 ***********************************************************/
+	public void addConfigElement(ConfigElement config)
+	{
+	}
+
+	private void addFormUrls(Document html,SampleResult result,HTTPSampler config,
+			List potentialLinks)
+	{
+		NodeList rootList = html.getChildNodes();
+		List urls = new LinkedList();
+		for(int x = 0;x < rootList.getLength();x++)
+		{
+			urls.addAll(HtmlParser.createURLFromForm(rootList.item(x),
+					(HTTPSampler)result.getSamplerData()));
+		}
+		Iterator iter = urls.iterator();
+		while (iter.hasNext())
+		{
+			HTTPSampler newUrl = (HTTPSampler)iter.next();
+			try
+			{
+				newUrl.setMethod(HTTPSampler.POST);
+				if(HtmlParser.isAnchorMatched(newUrl,config))
+				{
+					potentialLinks.add(newUrl);
+				}
+			}
+			catch (org.apache.oro.text.regex.MalformedPatternException e)
+			{
+				System.out.println("Bad pattern");
+			}
+		}
+	}
+
+	private void addAnchorUrls(Document html, SampleResult result, HTTPSampler config, List potentialLinks)
+	{
+		NodeList nodeList = html.getElementsByTagName("a");
+		for (int i = 0; i < nodeList.getLength(); i++)
+		{
+			Node tempNode = nodeList.item(i);
+			NamedNodeMap nnm = tempNode.getAttributes();
+			Node namedItem = nnm.getNamedItem("href");
+			if(namedItem == null)
+			{
+				continue;
+			}
+			String hrefStr = namedItem.getNodeValue();
+			try
+			{
+				HTTPSampler newUrl = HtmlParser.createUrlFromAnchor(hrefStr, (HTTPSampler)result.getSamplerData());
+				newUrl.setMethod(HTTPSampler.GET);
+				if (HtmlParser.isAnchorMatched(newUrl, config))
+				{
+					potentialLinks.add(newUrl);
+				}
+			}
+			catch (MalformedURLException e)
+			{
+			}
+			catch (org.apache.oro.text.regex.MalformedPatternException e)
+			{
+				System.out.println("Bad pattern");
+			}
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Entries
new file mode 100644
index 0000000..b320874
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Entries
@@ -0,0 +1,10 @@
+/AnchorModifier.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/ParamMask.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/ParamModifier.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/URLRewritingModifier.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/UserParameterModifier.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/UserParameterXMLContentHandler.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/UserParameterXMLErrorHandler.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/UserParameterXMLParser.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/UserSequence.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Repository
new file mode 100644
index 0000000..1209bda
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/ParamMask.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/ParamMask.java
new file mode 100644
index 0000000..598d6b3
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/ParamMask.java
@@ -0,0 +1,272 @@
+package org.apache.jmeter.protocol.http.modifier;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+import java.io.Serializable;
+
+/**
+ *  This object defines with what a parameter has its value replaced, and the
+ *  policies for how that value changes. Used in {@link ParamModifier}.
+ *
+ *@author     David La France
+ *@author     <a href="mailto:seade@backstagetech.com.au">Scott Eade</a>
+ *@created    Jan 18, 2002
+ */
+public class ParamMask extends AbstractTestElement implements Serializable
+{
+	private String PREFIX = "ParamModifier.prefix";
+	private String FIELD_NAME = "ParamModifier.field_name";
+	private String UPPER_BOUND = "ParamModifier.upper_bound";
+	private String LOWER_BOUND = "ParamModifier.lower_bound";
+	private String INCREMENT = "ParamModifier.increment";
+	private String SUFFIX = "ParamModifier.suffix";
+
+	private long _value = 0;
+
+	/**
+	 *  Default constructor
+	 */
+	public ParamMask()
+	{
+		setFieldName("");
+		setPrefix("");
+		setLowerBound(0);
+		setUpperBound(0);
+		setIncrement(0);
+		setSuffix("");
+	}
+
+
+	/**
+	 *  Sets the prefix for the <code>long</code> value. The prefix, the value
+	 *  and the suffix are concatenated to give the parameter value. This allows
+	 *  a wider range of posibilities for the parameter values.
+	 *
+	 *@param  prefix  A string to prefix to the parameter value
+	 */
+	public void setPrefix(String prefix)
+	{
+		setProperty(PREFIX, prefix);
+	}
+
+
+	/**
+	 *  Set the current value of the <code>long<code> portion of the parameter value to replace.
+	 * This is usually not used, as the method {@link #resetValue} is used to define a policy for
+	 * the starting value.
+	 *
+	 *@param  val  The new parameter value
+	 */
+	public void setValue(long val)
+	{
+		_value = val;
+	}
+
+	public void setFieldName(String fieldName)
+	{
+		setProperty(FIELD_NAME,fieldName);
+	}
+
+
+	/**
+	 *  Sets the lowest possible value that the <code>long</code> portion of the
+	 *  parameter value may be.
+	 *
+	 *@param  val  The new lowest possible parameter value
+	 */
+	public void setLowerBound(long val)
+	{
+		setProperty(LOWER_BOUND, new Long(val));
+	}
+
+
+	/**
+	 *  Sets the highest possible value that the <code>long</code> portion of the
+	 *  parameter value may be.
+	 *
+	 *@param  val  The new highest possible parameter value
+	 */
+	public void setUpperBound(long val)
+	{
+		setProperty(UPPER_BOUND,new Long(val));
+	}
+
+
+	/**
+	 *  Sets the number by which the parameter value is incremented between loops.
+	 *
+	 *@param  incr  The new increment for the parameter value
+	 */
+	public void setIncrement(long incr)
+	{
+		setProperty(INCREMENT,new Long(incr));
+	}
+
+
+	/**
+	 *  Sets the suffix for the <code>long</code> value. The prefix, the value
+	 *  and the suffix are concatenated to give the parameter value. This allows
+	 *  a wider range of posibilities for the parameter values.
+	 *
+	 *@param  suffix  A string to suffix to the parameter value
+	 */
+	public void setSuffix(String suffix)
+	{
+		setProperty(SUFFIX, suffix);
+	}
+
+
+	/**
+	 *  Acessor method to return the <code>String</code> that will be prefixed to
+	 *  the <code>long</code> value.
+	 *
+	 *@return    The parameter value prefix
+	 */
+	public String getPrefix()
+	{
+		return (String) getProperty(PREFIX);
+	}
+
+
+	/**
+	 *  Acessor method, returns the lowest possible value that the <code>long</code>
+	 *  portion of the parameter value may be.
+	 *
+	 *@return    The lower bound of the possible values
+	 */
+	public long getLowerBound()
+	{
+		Object lowerBound = getProperty(LOWER_BOUND);
+		return getLongValue(lowerBound);
+	}
+
+
+	/**
+	 *  Acessor method, returns the highest possible value that the <code>long</code>
+	 *  portion of the parameter value may be.
+	 *
+	 *@return    The higher bound of the possible values
+	 */
+	public long getUpperBound()
+	{
+		Object bound = getProperty(UPPER_BOUND);
+		return getLongValue(bound);
+	}
+
+
+	/**
+	 *  Acessor method, returns the number by which the parameter value is
+	 *  incremented between loops.
+	 *
+	 *@return    The increment
+	 */
+	public long getIncrement()
+	{
+		Object inc = getProperty(INCREMENT);
+		return getLongValue(inc);
+	}
+
+
+	/**
+	 *  Acessor method to return the <code>String</code> that will be suffixed to
+	 *  the <code>long</code> value.
+	 *
+	 *@return    The parameter value suffix
+	 */
+	public String getSuffix()
+	{
+		return (String) getProperty(SUFFIX);
+	}
+
+
+	/*
+	 *  ----------------------------------------------------------------------------------------------
+	 *  Methods
+	 *  --------------------------------------------------------------------------------------------
+	 */
+	/**
+	 *  <P>
+	 *
+	 *  Returns the current value, prefixed and suffixed, as a string, then
+	 *  increments it. If the incremented value is above the upper bound, the
+	 *  value is reset to the lower bound. <BR>
+	 *  <P>
+	 *
+	 *  This method determines the policy of what happens when an upper bound is
+	 *  reached/surpassed.
+	 *
+	 *@return    A <code>String</code> representing the current <code>long</code>
+	 *      value
+	 */
+	public String getNextValue()
+	{
+		// return the current value (don't forget the prefix!)
+		String retval = getPrefix() + Long.toString(_value) + getSuffix();
+
+		// increment the value
+		_value += getIncrement();
+		if (_value > getUpperBound())
+		{
+			_value = getLowerBound();
+		}
+
+		return retval;
+	}
+
+
+	/**
+	 *  This method determines the policy of what value to start (and re-start) at
+	 */
+	public void resetValue()
+	{
+		_value = getLowerBound();
+	}
+
+	public String getFieldName()
+	{
+		return (String)getProperty(FIELD_NAME);
+	}
+
+
+	/**
+	 *  For debugging purposes
+	 *
+	 *@return    A <code>String</code> representing the object
+	 */
+	public String toString()
+	{
+		StringBuffer sb = new StringBuffer();
+		sb.append("-------------------------------\n");
+		sb.append("Dumping ParamMask Object\n");
+		sb.append("-------------------------------\n");
+		sb.append("Name          = " + getFieldName() + "\n");
+		sb.append("Prefix        = " + getPrefix() + "\n");
+		sb.append("Current Value = " + _value + "\n");
+		sb.append("Lower Bound   = " + getLowerBound() + "\n");
+		sb.append("Upper Bound   = " + getUpperBound() + "\n");
+		sb.append("Increment     = " + getIncrement() + "\n");
+		sb.append("Suffix        = " + getSuffix() + "\n");
+		sb.append("-------------------------------\n");
+
+		return sb.toString();
+	}
+
+
+	/**
+	 *  Gets the LongValue attribute of the ParamMask object
+	 *
+	 *@param  bound  Description of Parameter
+	 */
+	private long getLongValue(Object bound)
+	{
+		if (bound == null)
+		{
+			return (long)0;
+		} else if (bound instanceof Long)
+		{
+			return ((Long) bound).longValue();
+		} else
+		{
+			return Long.parseLong((String) bound);
+		}
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/ParamModifier.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/ParamModifier.java
new file mode 100644
index 0000000..1f9d448
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/ParamModifier.java
@@ -0,0 +1,133 @@
+package org.apache.jmeter.protocol.http.modifier;
+
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.config.Modifier;
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+
+import java.io.Serializable;
+import java.util.*;
+
+/**
+ *  <P>
+ *
+ *  This modifier will replace any single http sampler's url parameter value
+ *  with a value from a given range - thereby "masking" the value set in the
+ *  http sampler. The parameter names must match exactly, and the parameter
+ *  value must be preset to "*" to diferentiate between duplicate parameter
+ *  names. <BR>
+ *  <P>
+ *
+ *  For example, if you set up the modifier with a lower bound of 1, an upper
+ *  bound of 10, and an increment of 2, and run the loop 12 times, the parameter
+ *  will have the following values (one per loop): 1, 3, 5, 7, 9, 1, 3, 5, 7, 9,
+ *  1, 3 <BR>
+ *  <P>
+ *
+ *  The {@link ParamMask} object contains most of the logic for stepping through
+ *  this loop. You can make large modifications to this modifier's behaviour by
+ *  changing one or two method implementations there.
+ *
+ *@author     David La France
+ *@created    Jan 18, 2002
+ *@see        ParamMask
+ */
+public class ParamModifier extends AbstractTestElement implements Modifier, Serializable
+{
+
+	/*
+	 *  ----------------------------------------------------------------------------------------------
+	 *  Fields
+	 *  --------------------------------------------------------------------------------------------
+	 */
+	/**
+	 *  The key used to find the ParamMask object in the HashMap
+	 */
+	private final static String MASK = "ParamModifier.mask";
+
+
+	/*
+	 *  ----------------------------------------------------------------------------------------------
+	 *  Constructors
+	 *  --------------------------------------------------------------------------------------------
+	 */
+	/**
+	 *  Default constructor
+	 */
+	public ParamModifier()
+	{
+		setProperty(MASK,new ParamMask());
+	}
+
+	public ParamMask getMask()
+	{
+		return (ParamMask)getProperty(MASK);
+	}
+
+	/*
+	 *  ----------------------------------------------------------------------------------------------
+	 *  Methods implemented from interface org.apache.jmeter.config.Modifier
+	 *  --------------------------------------------------------------------------------------------
+	 */
+	/**
+	 *  Modifies an entry object to replace the value of any url parameter that
+	 *  matches a defined mask.
+	 *
+	 *@param  entry  Entry object containing information about the current test
+	 *@return        <code>True</code> if modified, else <code>false</code>
+	 */
+	public boolean modifyEntry(Sampler sam)
+	{
+		HTTPSampler sampler = null;
+		if(!(sam instanceof HTTPSampler))
+		{
+			return false;
+		}
+		else
+		{
+			sampler = (HTTPSampler)sam;
+		}
+		boolean modified = false;
+		Iterator iter = sampler.getArguments().iterator();
+		while (iter.hasNext())
+		{
+			Argument arg = (Argument) iter.next();
+			modified = modifyArgument(arg);
+			if (modified)
+			{
+				break;
+			}
+		}
+		return modified;
+	}
+
+
+	/*
+	 *  ----------------------------------------------------------------------------------------------
+	 *  Methods
+	 *  --------------------------------------------------------------------------------------------
+	 */
+	/**
+	 *  Helper method for {@link #modifyEntry} Replaces a parameter's value if the
+	 *  parameter name matches the mask name and the value is a "*"
+	 *
+	 *@param  arg  An {@link Argument} representing a http parameter
+	 *@return      <code>true</code>if the value was replaced
+	 */
+	private boolean modifyArgument(Argument arg)
+	{
+		// if a mask for this argument exists
+		if (arg.getName().equals(getMask().getFieldName()))
+		{
+			// values to be masked must be set in the WebApp to "*"
+			if ("*".equals(arg.getValue()))
+			{
+				arg.setValue(getMask().getNextValue());
+				return true;
+			}
+		}
+		return false;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/URLRewritingModifier.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/URLRewritingModifier.java
new file mode 100644
index 0000000..4f83a4e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/URLRewritingModifier.java
@@ -0,0 +1,158 @@
+package org.apache.jmeter.protocol.http.modifier;
+
+import java.io.Serializable;
+
+import junit.framework.TestCase;
+
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.ResponseBasedModifier;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.oro.text.regex.MalformedPatternException;
+import org.apache.oro.text.regex.MatchResult;
+import org.apache.oro.text.regex.Pattern;
+import org.apache.oro.text.regex.Perl5Compiler;
+import org.apache.oro.text.regex.Perl5Matcher;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class URLRewritingModifier
+	extends AbstractTestElement
+	implements Serializable, ResponseBasedModifier {
+		
+		private Pattern case1,case2,case3;
+		Perl5Compiler compiler = new Perl5Compiler();
+
+	private final static String ARGUMENT_NAME = "argument_name";
+	private final static String PATH_EXTENSION = "path_extension";
+	
+	/**
+	 * @see ResponseBasedModifier#modifyEntry(Sampler, SampleResult)
+	 */
+	public boolean modifyEntry(Sampler sampler, SampleResult responseText) {
+		String text = new String(responseText.getResponseData());
+		
+		Perl5Matcher matcher = new Perl5Matcher();
+		String value = "";
+		if(matcher.contains(text,case1))
+		{
+			MatchResult result = matcher.getMatch();
+			value = result.group(1);
+		}
+		else if(matcher.contains(text,case2))
+		{
+			MatchResult result = matcher.getMatch();
+			value = result.group(1);
+		}
+		else if(matcher.contains(text,case3))
+		{
+			MatchResult result = matcher.getMatch();
+			value = result.group(1);
+		}
+		modify((HTTPSampler)sampler,value);		
+		if(value.length() > 0)
+		{
+			return true;
+		}
+		return false;
+	}
+	
+	private void modify(HTTPSampler sampler,String value)
+	{
+		if(isPathExtension())
+		{
+			sampler.setPath(sampler.getPath()+";"+getArgumentName()+"="+value);
+		}
+		else
+		{
+			sampler.getArguments().removeArgument(getArgumentName());
+			sampler.getArguments().addArgument(new HTTPArgument(getArgumentName(),value,true));
+		}
+	}
+	
+	public void setArgumentName(String argName)
+	{
+		setProperty(ARGUMENT_NAME,argName);
+		try {
+			case1 = compiler.compile(argName+"=([^\">& \n\r]*)[& \\n\\r\">]?$?");
+			case2 = compiler.compile("[Nn][Aa][Mm][Ee]=\""+argName+"\"[^>]+[vV][Aa][Ll][Uu][Ee]=\"(.*)\"");
+			case3 = compiler.compile("[vV][Aa][Ll][Uu][Ee]=\"(.*)\"[^>]+[Nn][Aa][Mm][Ee]=\""+argName+"\"");
+		} catch(MalformedPatternException e) {
+			e.printStackTrace();
+		}
+	}
+	
+	public String getArgumentName()
+	{
+		return getPropertyAsString(ARGUMENT_NAME);
+	}
+	
+	public void setPathExtension(boolean pathExt)
+	{
+		setProperty(PATH_EXTENSION,new Boolean(pathExt));
+	}
+	
+	public boolean isPathExtension()
+	{
+		return getPropertyAsBoolean(PATH_EXTENSION);
+	}
+	
+	public static class Test extends TestCase
+	{
+		SampleResult response;
+		public Test(String name)
+		{
+			super(name);
+		}
+		
+		public void setUp()
+		{
+			
+		}
+		
+		public void testGrabSessionId() throws Exception
+		{
+			String html = "location: http://server.com/index.html?session_id=jfdkjdkf%jddkfdfjkdjfdf";
+			response = new SampleResult();
+			response.setResponseData(html.getBytes());
+			URLRewritingModifier mod = new URLRewritingModifier();
+			mod.setArgumentName("session_id");
+			HTTPSampler sampler = new HTTPSampler();
+			sampler.setDomain("server.com");
+			sampler.setPath("index.html");
+			sampler.setMethod(HTTPSampler.GET);
+			sampler.setProtocol("http");
+			sampler.addArgument("session_id","adfasdfdsafasdfasd");
+			mod.modifyEntry(sampler,response);
+			Arguments args = sampler.getArguments();
+			assertEquals("jfdkjdkf%jddkfdfjkdjfdf",((Argument)args.getArguments().get(0)).getValue());
+			assertEquals("http://server.com:80/index.html?session_id=jfdkjdkf%jddkfdfjkdjfdf",sampler.toString());
+		}
+		
+		public void testGrabSessionId2() throws Exception
+		{
+			String html = "<a href=\"http://server.com/index.html?session_id=jfdkjdkfjddkfdfjkdjfdf\">";
+			response = new SampleResult();
+			response.setResponseData(html.getBytes());
+			URLRewritingModifier mod = new URLRewritingModifier();
+			mod.setArgumentName("session_id");
+			HTTPSampler sampler = new HTTPSampler();
+			sampler.setDomain("server.com");
+			sampler.setPath("index.html");
+			sampler.setMethod(HTTPSampler.GET);
+			sampler.setProtocol("http");
+			mod.modifyEntry(sampler,response);
+			Arguments args = sampler.getArguments();
+			assertEquals("jfdkjdkfjddkfdfjkdjfdf",((Argument)args.getArguments().get(0)).getValue());
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterModifier.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterModifier.java
new file mode 100644
index 0000000..137cd37
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterModifier.java
@@ -0,0 +1,191 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier;
+import org.apache.jmeter.config.Modifier;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.protocol.http.parser.HtmlParser;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.util.JMeterUtils;
+import java.util.*;
+import java.io.*;
+import org.w3c.dom.*;
+import org.xml.sax.SAXException;
+import java.net.*;
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ *
+ *<P>This modifier will replace any http sampler's url parameter values with
+ * parameter values defined in a XML file for each simulated user
+ *<BR>
+ *<P>For example if userid and password are defined in the XML parameter file
+ * for each user (ie thread), then simulated multiple user activity can occur
+ *@author     Mark Walsh
+ *@created    $Date: 2002/08/11 19:24:51 $
+ *@version    1.0
+ ***********************************************************/
+public class UserParameterModifier
+	extends ConfigTestElement
+	implements Modifier, Serializable, TestListener {
+	private static final String XMLURI = "UserParameterModifier.xmluri";
+	//-------------------------------------------
+	// Constants and Data Members
+	//-------------------------------------------
+	private UserSequence allAvailableUsers;
+	//-------------------------------------------
+	// Constructors
+	//-------------------------------------------
+	/**
+	 * Default constructor
+	 */
+	public UserParameterModifier() {} //end constructor
+	//-------------------------------------------
+	// Methods
+	//-------------------------------------------
+	/*----------------------------------------------------------------------------------------------
+	 * Methods overriden/implemented from org.apache.jmeter.config.AbstractConfigElement
+	 *--------------------------------------------------------------------------------------------*/
+	/**
+	 * Runs before the start of every test. Reload the Sequencer with the
+	 * latest parameter data for each user
+	 */
+	public void testStarted() {
+		// try to populate allUsers, if fail, leave as any empty set
+		List allUsers = new LinkedList();
+		try {
+			UserParameterXMLParser readXMLParameters = new UserParameterXMLParser();
+			allUsers = readXMLParameters.getXMLParameters(getXmlUri());
+		}
+		catch (Exception e) {
+			e.printStackTrace();
+			// do nothing, now object allUsers contains an empty set
+			System.err.println("Unable to read parameters from xml file " + getXmlUri());
+			System.err.println(
+				"No unique values for http requests will be substituted for each thread");
+		}
+		allAvailableUsers = new UserSequence(allUsers);
+	}
+	
+	public void testEnded()
+	{
+	}
+	
+	public void testStarted(String host)
+	{
+		testStarted();
+	}
+	
+	public void testEnded(String host)
+	{
+	}
+	
+	/*----------------------------------------------------------------------------------------------
+	 * Methods implemented from interface org.apache.jmeter.config.Modifier
+	 *--------------------------------------------------------------------------------------------*/
+	/**
+	 * Modifies an entry object to replace the value of any url parameter that matches a parameter
+	 * name in the XML file.
+	 *
+	 * @param entry Entry object containing information about the current test
+	 * @return <code>True</code> if modified, else <code>false</code>
+	 */
+	public boolean modifyEntry(Sampler entry) {
+		if(!(entry instanceof HTTPSampler))
+		{
+			return false;
+		}
+		HTTPSampler config = (HTTPSampler)entry;
+		Map currentUser = allAvailableUsers.getNextUserMods();
+		boolean changeValue = false;
+		Iterator iter = config.getArguments().iterator();
+		while (iter.hasNext()) {
+			Argument arg = (Argument) iter.next();
+			// if parameter name exists in http request
+			// then change its value
+			// (Note: each jmeter thread (ie user) gets to have unique values)			
+			if (currentUser.containsKey(arg.getName())) {
+				arg.setValue(currentUser.get(arg.getName()));
+			}
+		}
+		return changeValue;
+	}
+	/*----------------------------------------------------------------------------------------------
+	 * Methods (used by UserParameterModifierGui to get/set the name of XML parameter file)
+	 *--------------------------------------------------------------------------------------------*/
+	/**
+	 * return the current XML file name to be read to obtain the parameter data for all users
+	 * @return the name of the XML file containing parameter data for each user
+	 */
+	public String getXmlUri() {
+		return this.getPropertyAsString(XMLURI);
+	}
+	/**
+	 * From the GUI screen, set file name of XML to read
+	 * @param the name of the XML file containing the HTTP name value pair parameters per user
+	 */
+	public void setXmlUri(String xmlURI) {
+		setProperty(XMLURI,xmlURI);
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLContentHandler.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLContentHandler.java
new file mode 100644
index 0000000..8b43eb4
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLContentHandler.java
@@ -0,0 +1,194 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier;
+
+import org.xml.sax.*;
+import java.util.*;
+import java.io.*;
+
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ * <P>The handler used to read in XML parameter data
+ *@author     Mark Walsh
+ *@created    $Date: 2002/08/11 19:24:51 $
+ *@version    1.0
+ ***********************************************************/
+   
+public class UserParameterXMLContentHandler implements ContentHandler {
+
+    //-------------------------------------------
+    // Constants and Data Members
+    //-------------------------------------------
+
+    // Note UserParameterXML access this variable
+    // to obtain the Set data via method getParsedParameters()
+    private List userThreads = new LinkedList();
+
+    private String paramname = "";
+    private String paramvalue = "";
+    private Map nameValuePair = new HashMap();
+
+    // buffers for collecting data from the 
+    // "characters" SAX event
+    private CharArrayWriter contents = new CharArrayWriter();
+
+
+    //-------------------------------------------
+    // Constructors
+    //-------------------------------------------
+
+    //-------------------------------------------
+    // Methods
+    //-------------------------------------------
+
+    /*----------------------------------------------------------------------------------------------
+     * Methods implemented from org.xml.sax.ContentHandler
+     *--------------------------------------------------------------------------------------------*/
+    public void setDocumentLocator(Locator locator) {
+    }
+
+    public void startDocument()
+	throws SAXException {
+    }
+
+    public void endDocument()
+	throws SAXException {
+    }
+
+    public void startPrefixMapping(String prefix,
+				   String uri)
+	throws SAXException {
+    }
+
+    public void endPrefixMapping(String prefix)
+	throws SAXException {
+    }
+
+    public void startElement(String namespaceURL,
+			     String localName,
+			     String qName,
+			     Attributes atts)
+	throws SAXException {
+
+	contents.reset();
+
+	// haven't got to reset paramname & paramvalue
+	// but did it to keep the code looking correct
+	if (qName.equals("parameter")) {
+	    paramname="";
+	    paramvalue="";
+	}
+
+	// must create a new object,
+	// or else end up with a set full of the same Map object
+	  if (qName.equals("thread")) {
+	      nameValuePair = new HashMap();
+	  }
+
+    }
+
+    public void endElement(String namespaceURI,
+			   String localName,
+			   String qName)
+	throws SAXException {
+	if (qName.equals("paramname")) {
+	    paramname = contents.toString();
+	}
+	if (qName.equals("paramvalue")) {
+	    paramvalue = contents.toString();
+	}
+	if (qName.equals("parameter")) {
+	    nameValuePair.put(paramname,paramvalue);
+	}
+	if (qName.equals("thread")) {
+	    userThreads.add(nameValuePair);
+	}
+    }
+
+    public void characters(char ch[],
+			   int start,
+			   int length)
+	throws SAXException {
+	contents.write(ch, start, length);
+    }
+
+    public void ignorableWhitespace(char ch[],
+				    int start,
+				    int length)
+	throws SAXException {
+    }
+
+    public void processingInstruction(String target,
+				      String date)
+	throws SAXException {
+    }
+
+    public void skippedEntity(String name)
+	throws SAXException {
+    }
+
+    /*----------------------------------------------------------------------------------------------
+     * Methods (used by UserParameterXML to get XML parameters from XML file)
+     *--------------------------------------------------------------------------------------------*/
+
+    /**
+     * results of parsing all user parameter data defined in XML file.
+     * @return all users name value pairs obtained from XML file
+     */
+    public List getParsedParameters() {
+	return userThreads;
+    }
+} // end class
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLErrorHandler.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLErrorHandler.java
new file mode 100644
index 0000000..4e47b20
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLErrorHandler.java
@@ -0,0 +1,117 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier;
+
+import org.xml.sax.*;
+import java.util.*;
+import java.io.*;
+
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ * <P> XML Parseing errors for XML parameters file are handled here 
+ *@author     Mark Walsh
+ *@created    $Date: 2002/08/11 19:24:51 $
+ *@version    1.0
+ ***********************************************************/
+   
+public class UserParameterXMLErrorHandler implements ErrorHandler {
+
+    //-------------------------------------------
+    // Constants and Data Members
+    //-------------------------------------------
+
+
+
+    //-------------------------------------------
+    // Constructors
+    //-------------------------------------------
+
+    //-------------------------------------------
+    // Methods
+    //-------------------------------------------
+
+    public void warning(SAXParseException exception)
+	throws SAXException {
+	
+	System.err.println("**Parsing Warning**\n" +
+			   "  line:    " + exception.getLineNumber() + "\n" +
+			   "  URI:    :" + exception.getSystemId() + "\n" +
+			   "  Message: " + exception.getMessage() );
+	throw new SAXException("Warning encountered");
+    }
+
+    public void error(SAXParseException exception)
+	throws SAXException {
+	
+	System.err.println("**Parsing Warning**\n" +
+			   "  line:    " + exception.getLineNumber() + "\n" +
+			   "  URI:    :" + exception.getSystemId() + "\n" +
+			   "  Message: " + exception.getMessage() );
+	throw new SAXException("Error encountered");
+    }
+
+    public void fatalError(SAXParseException exception)
+	throws SAXException {
+	
+	System.err.println("**Parsing Warning**\n" +
+			   "  line:    " + exception.getLineNumber() + "\n" +
+			   "  URI:    :" + exception.getSystemId() + "\n" +
+			   "  Message: " + exception.getMessage() );
+	throw new SAXException("Fatal Error encountered");
+    }
+
+
+} // end class
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLParser.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLParser.java
new file mode 100644
index 0000000..2819229
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserParameterXMLParser.java
@@ -0,0 +1,120 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier;
+
+import org.xml.sax.*;
+import org.xml.sax.helpers.*;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.util.JMeterUtils;
+
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ * <P>Parse a XML file to obtain parameter name and value information
+ * for all users defined in the XML file.
+ *
+ *@author     Mark Walsh
+ *@created    $Date: 2002/08/11 19:24:51 $
+ *@version    1.0
+ ***********************************************************/
+public class UserParameterXMLParser {
+
+    //-------------------------------------------
+    // Constants and Data Members
+    //-------------------------------------------
+    private  String vendorParseClass = "org.apache.xerces.parsers.SAXParser";
+
+    //-------------------------------------------
+    // Constructors
+    //-------------------------------------------
+
+    //-------------------------------------------
+    // Methods
+    //-------------------------------------------
+
+    /**
+     * parse all user parameter data defined in XML file.
+     * @param Name of the XML to load users parameter data
+     * @return all users name value pairs obtained from XML file
+     */
+    public List getXMLParameters(String xmlURI)
+	throws SAXException, IOException {
+
+	
+	//create instances needed for parsing
+	XMLReader reader = JMeterUtils.getXMLParser();//XMLReaderFactory.createXMLReader(vendorParseClass);
+	UserParameterXMLContentHandler threadParametersContentHandler = new UserParameterXMLContentHandler();
+	UserParameterXMLErrorHandler parameterErrorHandler = new UserParameterXMLErrorHandler();
+
+	//register content handler
+	reader.setContentHandler(threadParametersContentHandler);
+
+	// register error handler
+	reader.setErrorHandler(parameterErrorHandler);
+
+	// Request validation
+	reader.setFeature("http://xml.org/sax/features/validation",true);
+
+	//parse
+	InputSource inputSource = new InputSource(xmlURI);
+	reader.parse(inputSource);
+
+
+	return threadParametersContentHandler.getParsedParameters();
+
+    } // end main
+
+} // end class
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserSequence.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserSequence.java
new file mode 100644
index 0000000..0c2802e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/UserSequence.java
@@ -0,0 +1,130 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier;
+ 
+import java.util.*;
+import java.io.Serializable;
+
+/************************************************************
+ *  Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ *  Apache
+ * <P> This module controls the Sequence in which user details are returned.
+ * <BR>
+ * <P> This module uses round robin allocation of users.
+ *@author     Mark Walsh
+ *@created    $Date: 2002/08/11 19:24:51 $
+ *@version    1.0
+ ***********************************************************/
+
+public class UserSequence implements Serializable {
+
+
+    //-------------------------------------------
+    // Constants and Data Members
+    //-------------------------------------------
+    private List allUsers; 
+    private Iterator indexOfUsers;
+
+    //-------------------------------------------
+    // Constructors
+    //-------------------------------------------
+    
+    public UserSequence()
+    {
+    }
+
+    /**
+     * Load all user and parameter data into the sequence module
+     * <BR>
+     * ie a Set of Mapped "parameter names and parameter values" for each user to be loader into the sequencer
+     */
+
+    public UserSequence(List allUsers) {
+	this.allUsers = allUsers;
+
+	// initalise pointer to first user
+	indexOfUsers = allUsers.iterator();
+    }
+
+    //-------------------------------------------
+    // Methods
+    //-------------------------------------------
+    /**
+     * Returns the parameter data for the next user in the sequence
+     * @param Returns a Map object of parameter names and matching parameter values for the next user
+     */
+    public synchronized Map getNextUserMods() {
+	
+	// Use round robin allocation of user details
+	  if (!indexOfUsers.hasNext()) {
+	      indexOfUsers = allUsers.iterator();
+	  }
+
+
+	Map user;
+	if (indexOfUsers.hasNext() ) {
+	    user = (Map)indexOfUsers.next();
+	    //debug
+	    //System.out.println("current parameters will be changed to: " + user);
+	} else {
+	    // no entries in all users, therefore create an empty Map object
+	    user = new HashMap();
+	}
+
+	return user;
+
+    } // end method getNextUserMods
+
+} // end class
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/AnchorModifierGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/AnchorModifierGui.java
new file mode 100644
index 0000000..58296fc
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/AnchorModifierGui.java
@@ -0,0 +1,123 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import javax.swing.text.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.modifier.AnchorModifier;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.config.gui.AbstractResponseBasedModifierGui;
+import org.apache.jmeter.testelement.TestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Kevin Hammond
+ *@created   $Date: 2002/08/11 19:24:51 $
+ *@version   1.0
+ ***************************************/
+
+public class AnchorModifierGui extends AbstractResponseBasedModifierGui
+{
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public AnchorModifierGui()
+	{
+		init();
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("anchor_modifier_title");
+	}
+
+	public TestElement createTestElement()
+	{
+		AnchorModifier modifier = new AnchorModifier();
+		configureTestElement(modifier);
+		return modifier;
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("anchor_modifier_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Entries
new file mode 100644
index 0000000..8835f8d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Entries
@@ -0,0 +1,5 @@
+/AnchorModifierGui.java/1.1/Sun Aug 11 19:24:51 2002//Tv1_7_3
+/ParamModifierGui.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/URLRewritingModifierGui.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/UserParameterModifierGui.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Repository
new file mode 100644
index 0000000..e83db7a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/ParamModifierGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/ParamModifierGui.java
new file mode 100644
index 0000000..3da945e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/ParamModifierGui.java
@@ -0,0 +1,312 @@
+package org.apache.jmeter.protocol.http.modifier.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.config.gui.AbstractModifierGui;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.modifier.ParamMask;
+import org.apache.jmeter.protocol.http.modifier.ParamModifier;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * A swing panel to allow UI with the ParamModifier class.
+ *
+ *@author    David La France
+ *@author     <a href="mailto:seade@backstagetech.com.au">Scott Eade</a>
+ *@created   Jan 18, 2002
+ *@version   $Revision: 1.1 $
+ ***************************************/
+public class ParamModifierGui extends AbstractModifierGui implements FocusListener
+{
+
+	private final String NAME = "name";
+	private final String PREFIX = "prefix";
+	private final String LOWERBOUND = "lowerBound";
+	private final String UPPERBOUND = "upperBound";
+	private final String INCREMENT = "increment";
+	private final String SUFFIX = "suffix";
+
+	private JTextField _fieldName;
+	private JTextField _prefix;
+	private JTextField _lowerBound;
+	private JTextField _upperBound;
+	private JTextField _increment;
+	private JTextField _suffix;
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ParamModifierGui()
+	{
+		init();
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("HTML Parameter Mask");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param el  !ToDo (Parameter description)
+	 ***************************************/
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		ParamModifier model = (ParamModifier)el;
+		updateGui(model);
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public TestElement createTestElement()
+	{
+		ParamModifier modifier = new ParamModifier();
+		configureTestElement(modifier);
+		ParamMask mask = modifier.getMask();
+		mask.setFieldName(_fieldName.getText());
+		mask.setPrefix(_prefix.getText());
+		mask.setLowerBound(Long.parseLong(_lowerBound.getText()));
+		mask.setIncrement(Long.parseLong(_increment.getText()));
+		mask.setUpperBound(Long.parseLong(_upperBound.getText()));
+		mask.setSuffix(_suffix.getText());
+		mask.resetValue();
+		return modifier;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param evt  !ToDo (Parameter description)
+	 ***************************************/
+	public void focusGained(FocusEvent evt) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param evt  !ToDo (Parameter description)
+	 ***************************************/
+	public void focusLost(FocusEvent evt)
+	{
+		String name = ((Component)evt.getSource()).getName();
+		if(evt.isTemporary())
+		{
+			return;
+		}
+		else if(name.equals(LOWERBOUND))
+		{
+			checkTextField(evt, "0");
+		}
+		else if(name.equals(UPPERBOUND))
+		{
+			checkTextField(evt, "0");
+		}
+		else if(name.equals(INCREMENT))
+		{
+			checkTextField(evt, "0");
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 ***************************************/
+	protected void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		//JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("url_config_title"));
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("HTML Parameter Mask"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// PARAMETER MASK
+		mainPanel.add(getParameterMaskPanel());
+
+		this.add(mainPanel);
+		this.updateUI();
+	}
+
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param model  !ToDo (Parameter description)
+	 ***************************************/
+	private void updateGui(ParamModifier model)
+	{
+		_fieldName.setText(model.getMask().getFieldName());
+		_prefix.setText(model.getMask().getPrefix());
+		_lowerBound.setText(Long.toString(model.getMask().getLowerBound()));
+		_upperBound.setText(Long.toString(model.getMask().getUpperBound()));
+		_increment.setText(Long.toString(model.getMask().getIncrement()));
+		_suffix.setText(model.getMask().getSuffix());
+	}
+
+	private JPanel getParameterMaskPanel()
+	{
+		JPanel paramMaskPanel = new JPanel();
+		paramMaskPanel.setLayout(new GridBagLayout());
+		//paramMaskPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("web_request")));
+		paramMaskPanel.setBorder(BorderFactory.createTitledBorder(
+				BorderFactory.createEtchedBorder(), JMeterUtils.getResString("HTML Parameter Mask")));
+
+		GridBagConstraints gridBagConstraints;
+
+		JLabel name = new JLabel(JMeterUtils.getResString("Name"));
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.ipadx = 40;
+		gridBagConstraints.insets = new Insets(5, 15, 0, 0);
+		paramMaskPanel.add(name, gridBagConstraints);
+
+		JLabel prefix = new JLabel(JMeterUtils.getResString("ID Prefix"));
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.ipadx = 40;
+		gridBagConstraints.insets = new Insets(5, 15, 0, 0);
+		paramMaskPanel.add(prefix, gridBagConstraints);
+
+		JLabel start = new JLabel(JMeterUtils.getResString("Lower Bound"));
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(5, 15, 0, 0);
+		paramMaskPanel.add(start, gridBagConstraints);
+
+		JLabel stop = new JLabel(JMeterUtils.getResString("Upper Bound"));
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(5, 15, 0, 0);
+		paramMaskPanel.add(stop, gridBagConstraints);
+
+		JLabel increment = new JLabel(JMeterUtils.getResString("Increment"));
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(5, 15, 0, 0);
+		paramMaskPanel.add(increment, gridBagConstraints);
+
+		JLabel suffix = new JLabel(JMeterUtils.getResString("ID Suffix"));
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.ipadx = 40;
+		gridBagConstraints.insets = new Insets(5, 15, 0, 0);
+		paramMaskPanel.add(suffix, gridBagConstraints);
+
+		_fieldName = new JTextField("", 10);
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.gridx = 0;
+		gridBagConstraints.gridy = 1;
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(10, 15, 0, 0);
+		_fieldName.setName(NAME);
+		paramMaskPanel.add(_fieldName, gridBagConstraints);
+
+		_prefix = new JTextField("", 5);
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.gridx = 1;
+		gridBagConstraints.gridy = 1;
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(10, 15, 0, 0);
+		_prefix.setName(PREFIX);
+		paramMaskPanel.add(_prefix, gridBagConstraints);
+
+		_lowerBound = new JTextField("0", 5);
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.gridx = 2;
+		gridBagConstraints.gridy = 1;
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(10, 15, 0, 0);
+		_lowerBound.addFocusListener(this);
+		_lowerBound.setName(LOWERBOUND);
+		paramMaskPanel.add(_lowerBound, gridBagConstraints);
+
+		_upperBound = new JTextField("10", 5);
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.gridx = 3;
+		gridBagConstraints.gridy = 1;
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(10, 15, 0, 0);
+		_upperBound.addFocusListener(this);
+		_upperBound.setName(UPPERBOUND);
+		paramMaskPanel.add(_upperBound, gridBagConstraints);
+
+		_increment = new JTextField("1", 3);
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.gridx = 4;
+		gridBagConstraints.gridy = 1;
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(10, 15, 0, 0);
+		_increment.addFocusListener(this);
+		_increment.setName(INCREMENT);
+		paramMaskPanel.add(_increment, gridBagConstraints);
+
+		_suffix = new JTextField("", 5);
+		gridBagConstraints = new GridBagConstraints();
+		gridBagConstraints.gridx = 5;
+		gridBagConstraints.gridy = 1;
+		gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
+		gridBagConstraints.insets = new Insets(10, 15, 0, 0);
+		_suffix.setName(SUFFIX);
+		paramMaskPanel.add(_suffix, gridBagConstraints);
+
+		return paramMaskPanel;
+	}
+
+	/****************************************
+	 * Used to validate a text field that requires a <code>long</code> input.
+	 * Returns the <code>long</code> if valid, else creates a pop-up error message
+	 * and throws a NumberFormatException.
+	 *
+	 *@param evt                        !ToDo (Parameter description)
+	 *@param defaultValue               !ToDo (Parameter description)
+	 *@return                           The number entered in the text field
+	 ***************************************/
+	private long checkTextField(FocusEvent evt, String defaultValue)
+	{
+		JTextField temp = (JTextField)evt.getSource();
+		boolean pass = true;
+		long longVal = 0;
+
+		try
+		{
+			longVal = Long.parseLong(temp.getText());
+		}
+		catch(NumberFormatException err)
+		{
+			JOptionPane.showMessageDialog(this,
+					"This field must have a long value!",
+					"Value Required",
+					JOptionPane.ERROR_MESSAGE);
+			temp.setText(defaultValue);
+			temp.requestFocus();
+		}
+		return longVal;
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/URLRewritingModifierGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/URLRewritingModifierGui.java
new file mode 100644
index 0000000..cccc990
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/URLRewritingModifierGui.java
@@ -0,0 +1,88 @@
+package org.apache.jmeter.protocol.http.modifier.gui;
+
+import java.awt.Font;
+
+import javax.swing.JCheckBox;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.config.gui.AbstractResponseBasedModifierGui;
+import org.apache.jmeter.gui.util.JLabeledTextField;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.http.modifier.URLRewritingModifier;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * @author mstover
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class URLRewritingModifierGui extends AbstractResponseBasedModifierGui {
+	
+	JLabeledTextField argumentName;
+	JCheckBox pathExt;
+	private final static String title = JMeterUtils.getResString("http_url_rewriting_modifier_title");
+
+	/**
+	 * @see JMeterGUIComponent#getStaticLabel()
+	 */
+	public String getStaticLabel() {
+		return title;
+	}
+	
+	public URLRewritingModifierGui()
+	{
+		init();
+	}
+	
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(title);
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+		argumentName = new JLabeledTextField(JMeterUtils.getResString("session_argument_name"));
+		mainPanel.add(argumentName);
+		pathExt = new JCheckBox(JMeterUtils.getResString("Path_Extension_choice"));
+		
+		mainPanel.add(pathExt);	
+
+		this.add(mainPanel);
+	}
+
+	/**
+	 * @see JMeterGUIComponent#createTestElement()
+	 */
+	public TestElement createTestElement() {
+		URLRewritingModifier modifier = new URLRewritingModifier();
+		this.configureTestElement(modifier);
+		modifier.setArgumentName(argumentName.getText());
+		modifier.setPathExtension(pathExt.isSelected());
+		return modifier;
+	}
+	
+	public void configure(TestElement el)
+	{
+		argumentName.setText(((URLRewritingModifier)el).getArgumentName());
+		pathExt.setSelected(((URLRewritingModifier)el).isPathExtension());
+		super.configure(el);
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/UserParameterModifierGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/UserParameterModifierGui.java
new file mode 100644
index 0000000..c17bbf8
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/modifier/gui/UserParameterModifierGui.java
@@ -0,0 +1,146 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.modifier.gui;
+import javax.swing.*;
+import java.awt.event.*;
+import javax.swing.border.*;
+import javax.swing.table.*;
+import java.awt.*;
+import javax.swing.text.*;
+import org.apache.jmeter.gui.util.*;
+import org.apache.jmeter.config.gui.AbstractModifierGui;
+import org.apache.jmeter.protocol.http.modifier.UserParameterModifier;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.testelement.TestElement;
+/************************************************************
+ *  Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ * A swing panel to allow UI with the UserParameterModifier class.
+ *
+ *@author     Mark Walsh
+ *@created    $Date: 2002/08/11 19:24:52 $
+ *@version    1.0
+ ***********************************************************/
+public class UserParameterModifierGui extends AbstractModifierGui {
+	//-------------------------------------------
+	// Constants and Data Members
+	//-------------------------------------------
+	private JTextField fileNameField;
+	//-------------------------------------------
+	// Constructors
+	//-------------------------------------------
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public UserParameterModifierGui() {
+		super();
+		init();
+	}
+	public TestElement createTestElement() {
+		UserParameterModifier mod = new UserParameterModifier();
+		this.configureTestElement(mod);
+		mod.setXmlUri(fileNameField.getText());
+		return mod;
+	}
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void updateGui() {}
+	public String getStaticLabel() {
+		return JMeterUtils.getResString("HTTP User Parameter Modifier");
+	}
+	
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		fileNameField.setText(((UserParameterModifier)el).getXmlUri());
+	}
+	
+	/*----------------------------------------------------------------------------------------------
+	 * Methods Private
+	 *--------------------------------------------------------------------------------------------*/
+	private void init() {
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+		// TITLE
+		//JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("user_parameter_modifier_title"));
+		JLabel panelTitleLabel =
+			new JLabel(JMeterUtils.getResString("HTTP User Parameter Modifier"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(
+			new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+		// NAME
+		mainPanel.add(getNamePanel());
+		// FILE LOCATOR
+		mainPanel.add(getFileLocator());
+		mainPanel.add(new JLabel(JMeterUtils.getResString("user_param_mod_help_note")));
+		this.add(mainPanel);
+	}
+	private JPanel getFileLocator() {
+		JPanel fileLocator = new JPanel();
+		JLabel fileName = new JLabel(JMeterUtils.getResString("filename"));
+		fileLocator.add(fileName);
+		fileNameField = new JTextField("users.xml", 15);
+		fileLocator.add(fileNameField);
+		return fileLocator;
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Entries
new file mode 100644
index 0000000..aa8e8a1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Entries
@@ -0,0 +1,4 @@
+/FormElement.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/HtmlForm.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/HtmlParser.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Repository
new file mode 100644
index 0000000..ae02377
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/FormElement.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/FormElement.java
new file mode 100644
index 0000000..718fd0f
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/FormElement.java
@@ -0,0 +1,105 @@
+package org.apache.jmeter.protocol.http.parser;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author
+ *@created    June 16, 2001
+ *@version    1.0
+ ***********************************************************/
+
+public class FormElement
+{
+	private boolean multipleAllowed;
+	private String name;
+	private java.util.List possibleValues;
+	private java.util.List defaultValues;
+
+	/************************************************************
+	 *  Constructor for the FormElement object
+	 ***********************************************************/
+	public FormElement()
+	{
+	}
+
+	/************************************************************
+	 *  Sets the MultipleAllowed attribute of the FormElement object
+	 *
+	 *@param  newMultipleAllowed  The new MultipleAllowed value
+	 ***********************************************************/
+	public void setMultipleAllowed(boolean newMultipleAllowed)
+	{
+		multipleAllowed = newMultipleAllowed;
+	}
+
+	/************************************************************
+	 *  Sets the Name attribute of the FormElement object
+	 *
+	 *@param  newName  The new Name value
+	 ***********************************************************/
+	public void setName(String newName)
+	{
+		name = newName;
+	}
+
+	/************************************************************
+	 *  Sets the PossibleValues attribute of the FormElement object
+	 *
+	 *@param  newPossibleValues  The new PossibleValues value
+	 ***********************************************************/
+	public void setPossibleValues(java.util.List newPossibleValues)
+	{
+		possibleValues = newPossibleValues;
+	}
+
+	/************************************************************
+	 *  Sets the DefaultValues attribute of the FormElement object
+	 *
+	 *@param  newDefaultValues  The new DefaultValues value
+	 ***********************************************************/
+	public void setDefaultValues(java.util.List newDefaultValues)
+	{
+		defaultValues = newDefaultValues;
+	}
+
+	/************************************************************
+	 *  Gets the MultipleAllowed attribute of the FormElement object
+	 *
+	 *@return    The MultipleAllowed value
+	 ***********************************************************/
+	public boolean isMultipleAllowed()
+	{
+		return multipleAllowed;
+	}
+
+	/************************************************************
+	 *  Gets the Name attribute of the FormElement object
+	 *
+	 *@return    The Name value
+	 ***********************************************************/
+	public String getName()
+	{
+		return name;
+	}
+
+	/************************************************************
+	 *  Gets the PossibleValues attribute of the FormElement object
+	 *
+	 *@return    The PossibleValues value
+	 ***********************************************************/
+	public java.util.List getPossibleValues()
+	{
+		return possibleValues;
+	}
+
+	/************************************************************
+	 *  Gets the DefaultValues attribute of the FormElement object
+	 *
+	 *@return    The DefaultValues value
+	 ***********************************************************/
+	public java.util.List getDefaultValues()
+	{
+		return defaultValues;
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlForm.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlForm.java
new file mode 100644
index 0000000..ef0fd39
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlForm.java
@@ -0,0 +1,38 @@
+package org.apache.jmeter.protocol.http.parser;
+
+import java.util.*;
+
+/************************************************************
+ *  Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author
+ *@created    June 29, 2001
+ *@version    1.0
+ ***********************************************************/
+
+class HtmlForm
+{
+
+	/************************************************************
+	 *  Constructor for the HtmlForm object
+	 ***********************************************************/
+	public HtmlForm()
+	{
+	}
+
+	/************************************************************
+	 *  Give the action string and a list of FormElement objects to create
+	 *  the new HtmlForm, to be used by the HtmlParser.
+	 *
+	 *@param  action        Description of Parameter
+	 *@param  formElements  Description of Parameter
+	 ***********************************************************/
+	public HtmlForm(String action, Collection formElements)
+	{
+	}
+
+	public static Collection extractFormElements(String formString)
+	{
+		return Collections.EMPTY_LIST;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlParser.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlParser.java
new file mode 100644
index 0000000..4cdbf3a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlParser.java
@@ -0,0 +1,553 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.parser;
+import java.io.*;
+import java.net.*;
+import java.util.*;
+import org.w3c.dom.*;
+import org.w3c.tidy.Tidy;
+import org.xml.sax.SAXException;
+import junit.framework.TestCase;
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.log4j.*;
+import org.apache.oro.text.regex.*;
+
+/****************************************
+ * Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author    Michael Stover
+ *@created   June 14, 2001
+ *@version   1.0
+ ***************************************/
+
+public class HtmlParser implements Serializable
+{
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected static Category catClass =
+			Category.getInstance(HtmlParser.class.getName());
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected static String utfEncodingName;
+	private int compilerOptions = Perl5Compiler.CASE_INSENSITIVE_MASK |
+			Perl5Compiler.MULTILINE_MASK | Perl5Compiler.READ_ONLY_MASK;
+
+	private static transient Perl5Compiler compiler = new Perl5Compiler();
+
+	private static transient Perl5Matcher matcher = new Perl5Matcher();
+
+	/****************************************
+	 * Constructor for the HtmlParser object
+	 ***************************************/
+
+	public HtmlParser()
+	{
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param newLink                        !ToDo (Parameter description)
+	 *@param config                         !ToDo (Parameter description)
+	 *@return                               !ToDo (Return description)
+	 *@exception MalformedPatternException  !ToDo (Exception description)
+	 ***************************************/
+	public static synchronized boolean isAnchorMatched(HTTPSampler newLink, 
+			HTTPSampler config) throws MalformedPatternException
+	{
+		boolean ok = true;
+
+		Iterator iter = config.getArguments().iterator();
+
+		// In JDK1.2, URLDecoder.decode has Exception in its throws clause. However, it
+		// was removed in JDK1.3. Since JMeter is JDK1.2-compatible, we need to catch
+		// Exception.
+		String query = null;
+		try
+		{
+			query = URLDecoder.decode(newLink.getQueryString());
+		}
+		catch (Exception e)
+		{
+			// do nothing. query will remain null.
+		}
+
+		if(query == null && config.getArguments().getArgumentCount() > 0)
+			return false;
+
+		while(iter.hasNext())
+		{
+			Argument item = (Argument)iter.next();
+			if(query.indexOf(item.getName()+"=") == -1)
+			{
+				if(!(ok = ok && matcher.contains(query, compiler.compile(item.getName()))))
+				{
+					return false;
+				}
+			}
+		}
+
+		if(config.getDomain() != null && config.getDomain().length() > 0 &&
+				!newLink.getDomain().equals(config.getDomain()))
+		{
+			if(!(ok = ok && matcher.matches(newLink.getDomain(),
+					compiler.compile(config.getDomain()))))
+				return false;
+		}
+
+		if(!newLink.getPath().equals(config.getPath()) && !matcher.matches(newLink.getPath(), 
+				compiler.compile("[/]*" + config.getPath())))
+			return false;
+
+		if(!(ok = ok && matcher.matches(newLink.getProtocol(), compiler.compile(config.getProtocol()))))
+			return false;
+
+		return ok;
+	}
+
+	/****************************************
+	 * !ToDoo (Method description)
+	 *
+	 *@param arg                            !ToDo (Parameter description)
+	 *@param patternArg                     !ToDo (Parameter description)
+	 *@return                               !ToDo (Return description)
+	 *@exception MalformedPatternException  !ToDo (Exception description)
+	 ***************************************/
+	public static synchronized boolean isArgumentMatched(Argument arg, Argument patternArg) throws MalformedPatternException
+	{
+		return (arg.getName().equals(patternArg.getName()) || 
+				matcher.matches(arg.getName(), compiler.compile(patternArg.getName()))) &&
+				(arg.getValue().equals(patternArg.getValue()) || 
+				matcher.matches((String)arg.getValue(), compiler.compile((String)patternArg.getValue())));
+	}
+
+	/****************************************
+	 * Returns <code>tidy</code> as HTML parser
+	 *
+	 *@return   a <code>tidy</code> HTML parser
+	 ***************************************/
+	public static Tidy getParser()
+	{
+		catClass.debug("Start : getParser1");
+		Tidy tidy = new Tidy();
+		tidy.setCharEncoding(org.w3c.tidy.Configuration.UTF8);
+		tidy.setQuiet(true);
+		tidy.setShowWarnings(false);
+
+		if(catClass.isDebugEnabled())
+			catClass.debug("getParser1 : tidy parser created - " + tidy);
+
+		catClass.debug("End : getParser1");
+
+		return tidy;
+	}
+
+	/****************************************
+	 * Returns a node representing a whole xml given an xml document
+	 *
+	 *@param text              an xml document
+	 *@return                  a node representing a whole xml
+	 *@exception SAXException  !ToDo (Exception description)
+	 ***************************************/
+	public static Node getDOM(String text) throws SAXException
+	{
+		catClass.debug("Start : getDOM1");
+
+		try
+		{
+			Node node = getParser().parseDOM(new
+					ByteArrayInputStream(text.getBytes(getUTFEncodingName())), null);
+
+			if(catClass.isDebugEnabled())
+				catClass.debug("node : " + node);
+
+			catClass.debug("End : getDOM1");
+
+			return node;
+		}
+		catch(UnsupportedEncodingException e)
+		{
+			catClass.error("getDOM1 : Unsupported encoding exception - " + e);
+			catClass.debug("End : getDOM1");
+			throw new RuntimeException("UTF-8 encoding failed");
+		}
+	}
+
+	/****************************************
+	 * Returns the encoding type which is different for different jdks even though
+	 * the mean the same thing i.e. UTF8 or UTF-8
+	 *
+	 *@return   either UTF8 or UTF-8 depending on the jdk version
+	 ***************************************/
+	public static String getUTFEncodingName()
+	{
+		catClass.debug("Start : getUTFEncodingName1");
+
+		if(utfEncodingName == null)
+		{
+			String versionNum = System.getProperty("java.version");
+
+			if(catClass.isDebugEnabled())
+				catClass.debug("getUTFEncodingName1 : versionNum - " + versionNum);
+
+			if(versionNum.startsWith("1.1"))
+				utfEncodingName = "UTF8";
+
+			else
+				utfEncodingName = "UTF-8";
+
+		}
+
+		if(catClass.isDebugEnabled())
+			catClass.debug("getUTFEncodingName1 : Returning utfEncodingName - " +
+					utfEncodingName);
+
+		catClass.debug("End : getUTFEncodingName1");
+
+		return utfEncodingName;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@return   !ToDo (Return description)
+	 ***************************************/
+	public static Document createEmptyDoc()
+	{
+		return new Tidy().createEmptyDocument();
+	}
+
+	/****************************************
+	 * Create a new URL based on an HREF string plus a contextual URL object. Given
+	 * that an HREF string might be of three possible forms, some processing is
+	 * required.
+	 *
+	 *@param parsedUrlString            !ToDo (Parameter description)
+	 *@param context                    !ToDo (Parameter description)
+	 *@return                           !ToDo (Return description)
+	 *@exception MalformedURLException  !ToDo (Exception description)
+	 ***************************************/
+	public static HTTPSampler createUrlFromAnchor(String parsedUrlString, HTTPSampler context) throws MalformedURLException
+	{
+		HTTPSampler url = new HTTPSampler();
+		url.setDomain(context.getDomain());
+		url.setProtocol(context.getProtocol());
+		url.setPort(context.getPort());
+
+		// In JDK1.3, we can get the path using getPath(). However, in JDK1.2, we have to parse
+		// the file to obtain the path. In the source for JDK1.3.1, they determine the path to
+		// be from the start of the file up to the LAST question mark (if any).
+		String contextPath = null;
+		String contextFile = context.getPath();
+		int indexContextQuery = contextFile.lastIndexOf('?');
+		if(indexContextQuery != -1)
+			contextPath = contextFile.substring(0, indexContextQuery);
+
+		else
+			contextPath = contextFile;
+
+		int queryStarts = parsedUrlString.indexOf("?");
+
+		if(queryStarts == -1)
+			queryStarts = parsedUrlString.length();
+
+		if(parsedUrlString.startsWith("/"))
+			url.setPath(parsedUrlString.substring(0, queryStarts));
+
+		else if(parsedUrlString.startsWith(".."))
+			url.setPath(contextPath.substring(0, contextPath.substring(0,
+					contextPath.lastIndexOf("/")).lastIndexOf("/")) +
+					parsedUrlString.substring(2, queryStarts));
+
+		else if(!parsedUrlString.toLowerCase().startsWith("http"))
+			url.setPath(contextPath.substring(0, contextPath.lastIndexOf("/")) +
+					"/" + parsedUrlString.substring(0, queryStarts));
+
+		else
+		{
+			URL u = new URL(parsedUrlString);
+
+			// Determine the path. (See JDK1.2/1.3 comment above.)
+			String uPath = null;
+			String uFile = u.getFile();
+			int indexUQuery = uFile.lastIndexOf('?');
+			if(indexUQuery != -1)
+				uPath = uFile.substring(0, indexUQuery);
+
+			else
+				uPath = uFile;
+
+			url.setPath(uPath);
+			url.setDomain(u.getHost());
+			url.setProtocol(u.getProtocol());
+			url.setPort(u.getPort());
+		}
+
+		if(queryStarts < parsedUrlString.length())
+			url.parseArguments(parsedUrlString.substring(queryStarts + 1));
+
+		return url;
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param context                    !ToDo (Parameter description)
+	 *@param doc                        !ToDo (Parameter description)
+	 *@return                           !ToDo (Return description)
+	 ***************************************/
+
+	public static List createURLFromForm(Node doc, HTTPSampler context)
+	{
+		String selectName = null;
+		LinkedList urlConfigs = new LinkedList();
+		recurseForm(doc, urlConfigs, context, selectName, false);
+		/*
+		 * NamedNodeMap atts = formNode.getAttributes();
+		 * if(atts.getNamedItem("action") == null)
+		 * {
+		 * throw new MalformedURLException();
+		 * }
+		 * String action = atts.getNamedItem("action").getNodeValue();
+		 * UrlConfig url = createUrlFromAnchor(action, context);
+		 * recurseForm(doc, url, selectName,true,formStart);
+		 */
+		return urlConfigs;
+	}
+
+	private static boolean recurseForm(Node tempNode, LinkedList urlConfigs, HTTPSampler context,
+			String selectName, boolean inForm)
+	{
+		NamedNodeMap nodeAtts = tempNode.getAttributes();
+		String tag = tempNode.getNodeName();
+		try
+		{
+			if(inForm)
+			{
+				HTTPSampler url = (HTTPSampler)urlConfigs.getLast();
+				if(tag.equalsIgnoreCase("form"))
+				{
+					try
+					{
+						urlConfigs.add(createFormUrlConfig(tempNode, context));
+					}
+					catch(MalformedURLException e)
+					{
+						inForm = false;
+					}
+				}
+				else if(tag.equalsIgnoreCase("input"))
+				{
+					url.addArgument(getAttributeValue(nodeAtts, "name"),
+							getAttributeValue(nodeAtts, "value"));
+				}
+
+				else if(tag.equalsIgnoreCase("textarea"))
+					try
+					{
+						url.addArgument(getAttributeValue(nodeAtts, "name"),
+								tempNode.getFirstChild().getNodeValue());
+					}
+					catch(NullPointerException e)
+					{
+						url.addArgument(getAttributeValue(nodeAtts, "name"), "");
+					}
+
+				else if(tag.equalsIgnoreCase("select"))
+					selectName = getAttributeValue(nodeAtts, "name");
+
+				else if(tag.equalsIgnoreCase("option"))
+				{
+					String value = getAttributeValue(nodeAtts, "value");
+					if(value == null)
+					{
+						try
+						{
+							value = tempNode.getFirstChild().getNodeValue();
+						}
+						catch(NullPointerException e)
+						{
+							value = "";
+						}
+					}
+					url.addArgument(selectName, value);
+				}
+			}
+			else if(tag.equalsIgnoreCase("form"))
+			{
+				try
+				{
+					urlConfigs.add(createFormUrlConfig(tempNode, context));
+					inForm = true;
+				}
+				catch(MalformedURLException e)
+				{
+					inForm = false;
+				}
+				try{Thread.sleep(5000);}catch(Exception e){}
+			}
+		}
+		catch(Exception ex)
+		{
+			System.out.println("Some bad HTML " + printNode(tempNode));
+		}
+		NodeList childNodes = tempNode.getChildNodes();
+		for(int x = 0; x < childNodes.getLength(); x++)
+		{
+			inForm = recurseForm(childNodes.item(x), urlConfigs, context, selectName, inForm);
+		}
+		return inForm;
+	}
+
+	private static String getAttributeValue(NamedNodeMap att, String attName)
+	{
+		try
+		{
+			return att.getNamedItem(attName).getNodeValue();
+		}
+		catch(Exception ex)
+		{
+			return "";
+		}
+	}
+
+	private static String printNode(Node node)
+	{
+		StringBuffer buf = new StringBuffer();
+		buf.append("<");
+		buf.append(node.getNodeName());
+		NamedNodeMap atts = node.getAttributes();
+		for(int x = 0; x < atts.getLength(); x++)
+		{
+			buf.append(" ");
+			buf.append(atts.item(x).getNodeName());
+			buf.append("=\"");
+			buf.append(atts.item(x).getNodeValue());
+			buf.append("\"");
+		}
+
+		buf.append(">");
+
+		return buf.toString();
+	}
+
+	/****************************************
+	 * !ToDo (Class description)
+	 *
+	 *@author    $Author: mstover1 $
+	 *@created   $Date: 2002/08/11 19:24:52 $
+	 *@version   $Revision: 1.1 $
+	 ***************************************/
+	public static class Test extends TestCase
+	{
+		private static Category catClass =
+				Category.getInstance(Test.class.getName());
+
+		/****************************************
+		 * !ToDo (Constructor description)
+		 *
+		 *@param name  !ToDo (Parameter description)
+		 ***************************************/
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		/****************************************
+		 * !ToDo
+		 ***************************************/
+		public void testGetUTFEncodingName()
+		{
+			catClass.debug("Start : testGetUTFEncodingName1");
+			String javaVersion = System.getProperty("java.version");
+			utfEncodingName = null;
+			System.setProperty("java.version", "1.1");
+			assertEquals("UTF8", HtmlParser.getUTFEncodingName());
+			// need to clear utfEncodingName variable first 'cos
+			// getUTFEncodingName checks to see if it's null
+			utfEncodingName = null;
+			System.setProperty("java.version", "1.2");
+			assertEquals("UTF-8", HtmlParser.getUTFEncodingName());
+			System.setProperty("java.version", javaVersion);
+			catClass.debug("End : testGetUTFEncodingName1");
+		}
+
+		/****************************************
+		 * !ToDo
+		 ***************************************/
+		protected void setUp()
+		{
+		}
+	}
+
+	private static HTTPSampler createFormUrlConfig(Node tempNode, HTTPSampler context) throws
+			MalformedURLException
+	{
+		NamedNodeMap atts = tempNode.getAttributes();
+		if(atts.getNamedItem("action") == null)
+			throw new MalformedURLException();
+		String action = atts.getNamedItem("action").getNodeValue();
+		HTTPSampler url = createUrlFromAnchor(action, context);
+		return url;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Admin.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Admin.java
new file mode 100644
index 0000000..32b72e5
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Admin.java
@@ -0,0 +1,128 @@
+package org.apache.jmeter.protocol.http.proxy;
+/******************************************************************
+*** File Admin.java
+***
+***/
+
+import java.net.*;
+import java.io.*;
+
+//
+// Class:     Admin
+// Abstract:  The admin thread listens on admin socket and handle all
+//            communications with the remote administrator.
+//
+
+public class Admin extends Thread
+{
+    //
+    // Member variables
+    //
+
+    ServerSocket adminSocket = null;
+    Socket appletSocket = null;
+    String passwordCandidate = null;
+    BufferedReader in = null;
+    DataOutputStream out = null;
+    Config config = null;
+    Cache cache;
+
+
+    //
+    // Public methods
+    //
+
+    //
+    // Constructor
+    //
+    Admin(Config configObject, Cache cacheManager)
+    {
+        try
+        {
+            config = configObject;
+            cache = cacheManager;
+            adminSocket = new ServerSocket(0);
+            config.setAdminPort(adminSocket.getLocalPort());
+        }
+        catch (IOException e)
+        {
+            System.out.println("Error opening admin socket");
+        }
+    }
+
+
+    //
+    // Handle communications with remote administrator
+    //
+    public void run()
+    {
+        while(true)
+        {
+            try
+            {
+                appletSocket = adminSocket.accept();
+                in = new BufferedReader(new InputStreamReader(new DataInputStream(appletSocket.getInputStream())));
+                out = new DataOutputStream(appletSocket.getOutputStream());
+
+                do
+                {
+                    // Read password candidate sent by applet
+                    String passwordCandidate = in.readLine();
+
+                    // Send applet ack/nack on password
+                    if (config.getPassword().equals(passwordCandidate))
+                    {
+                        out.writeBytes("ACCEPT\n");
+                        break;
+                    }
+                    else
+                    {
+                        out.writeBytes("REJECT\n");
+                    }
+                    out.flush();
+                }
+                while (true);
+
+                //
+                // Password is OK, so let's send the administrator the
+                // parameters values and read his new values
+                //
+                while(true)
+                {
+                    out.writeBytes(config.toString());
+                    out.flush();
+
+                    config.parse(in.readLine());
+                    System.out.println("Configuration changed by administrator.");
+
+                    // Administrator wants to clean the cache
+                    if (config.getCleanCache())
+                    {
+                        cache.clean();
+                        config.setCleanCache(false); //no need to clean again
+                    }
+                }
+            }
+            catch (Exception e)
+            {
+                //
+                // This line was reached because the administrator closed
+                // the connection with the proxy. That's fine, we are now
+                // available for another administrator to log in.
+                //
+                System.out.println("Connection with administrator closed.");
+            }
+            finally
+            {
+                try
+                {
+                    out.close();
+                    in.close();
+                }
+                catch(Exception exc)
+                {}
+            }
+        }//while
+    }
+}
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Entries
new file mode 100644
index 0000000..6b5f04d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Entries
@@ -0,0 +1,9 @@
+/Admin.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/Cache.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/Config.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/Daemon.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/HttpReplyHdr.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/HttpRequestHdr.java/1.3/Wed Aug 14 17:49:04 2002//Tv1_7_3
+/Proxy.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/ProxyControl.java/1.2/Wed Aug 14 17:49:04 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Repository
new file mode 100644
index 0000000..8650442
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Cache.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Cache.java
new file mode 100644
index 0000000..e611df2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Cache.java
@@ -0,0 +1,297 @@
+package org.apache.jmeter.protocol.http.proxy;
+/******************************************************************
+*** File Cache.java
+***
+***/
+
+import java.io.*;
+import java.util.*;
+import java.net.*;
+
+//
+// Class:     Cache
+// Abstract:  manages all caching activities.
+//
+
+public class Cache
+{
+	//
+	// Members variables
+	//
+
+	String basePath = null;
+	long MinFreeSpace;// in bytes
+	Hashtable htable;
+	Config config;
+
+
+	//
+	// Public methods
+	//
+
+	//
+	// Constructor
+	//
+	public Cache(Config configObject)
+	{
+		//
+		// Initialize variables
+		//
+		config = configObject;
+		MinFreeSpace = 15000;
+		htable = new Hashtable();
+
+		//
+		// Create directory for caching
+		//
+
+		File cacheDir = new File("Cache");
+		cacheDir.mkdirs();
+		basePath = cacheDir.getAbsolutePath();
+
+		//
+		// Delete all files in cache directory
+		//
+		int i;
+		File file = new File(basePath);;
+		String filename;
+
+		// Get list of files in cache direcotry
+		String files[] = file.list();
+
+		// Delete each file found
+		for (i=0; i<files.length; i++)
+		{
+			file = new File(basePath + File.separatorChar + files[i]);
+			file.delete();
+		}
+		config.setFilesCached(0);
+		config.setBytesCached(0);
+		config.setHits(0);
+		config.setMisses(0);
+	}
+
+
+	//
+	// isCachable - check if URL reply should be cached
+	//
+	public boolean IsCachable(String rawUrl)
+	{
+		return (getFileName(rawUrl) != null);
+	}
+
+
+	//
+	// IsCached - Check if we have in cache what the client wants.
+	//
+	public boolean IsCached(String rawUrl)
+	{
+		// Generate filename from URL
+		String filename = getFileName(rawUrl);
+		if (filename == null)
+			return false;
+
+		// Search in hash table
+		if (htable.get(filename) != null)
+			return true;
+
+		return false;
+	}
+
+
+	//
+	// getFileInputStream - When this method is called, it means a cache hit.
+	//   We update the date field in the hash table entry and return a
+	//   FileInputStream object corresponding to the file caching the info.
+	//
+	 public FileInputStream getFileInputStream(String rawUrl)
+	{
+		FileInputStream in = null;
+		try
+		{
+			 String filename = getFileName(rawUrl);
+
+			// Update the hash table entry with current date as value
+			htable.put(filename,new Date());
+
+			in = new FileInputStream(filename);
+		}
+		catch (FileNotFoundException fnf)
+		{
+			try
+
+			{
+				System.out.println("File Not Found:"+getFileName(rawUrl)+" "+fnf);
+			}
+			catch (Exception e)
+			{}
+		}
+		finally
+		{
+			return in;
+		}
+	}
+
+
+	//
+	// getFileoutputStream - When this method is called, it means we're about
+	//   to cache a new object. We generate a file name, and return
+	//   a corresponding FileOutputStream object.
+	//
+	 public FileOutputStream getFileOutputStream(String rawUrl)
+	{
+		FileOutputStream out = null;
+		String filename;
+		try
+		{
+			 filename = getFileName(rawUrl);
+
+			out = new FileOutputStream(filename);
+		}
+		catch (IOException e)
+		{}
+		finally
+		{
+			return out;
+		}
+	}
+
+
+	//
+	// Decrement Cache Free Space (In Bytes)
+	//
+	public synchronized void DecrementFreeSpace(int nbytes, String rawUrl)
+	{
+		config.setBytesCached(config.getBytesCached() + nbytes);
+		if (config.getBytesFree() <= MinFreeSpace)
+			MakeFreeSpace(rawUrl);
+	}
+
+
+	//
+	// Add new entry to hash table
+	//
+	public synchronized void AddToTable(String rawUrl)
+	{
+		String filename = getFileName(rawUrl);
+
+		// Add filename to hash table with the current date as its value
+		htable.put(filename,new Date());
+		config.increaseFilesCached();
+	}
+
+	//
+	// clean - delete the cached files
+	//
+	 public synchronized void clean()
+	{
+		System.out.println("Cleaning the cache...");
+
+		// Enumerate the hash table
+		for (Enumeration keys = htable.keys(); keys.hasMoreElements() ;)
+		{
+			String filename = (String)keys.nextElement();
+			File file = new File(filename);
+			long nbytes = file.length();
+			boolean result = file.delete();
+			if (result == true)
+			{
+				// Delete entry in hash table
+				htable.remove(filename);
+				config.decreaseFilesCached();
+
+				// Increment free space
+				config.setBytesCached(config.getBytesCached() - nbytes);
+			}
+			else
+			{
+				// Another thread holds this file open for writing
+			}
+		}
+		config.setHits(0);
+		config.setMisses(0);
+		System.out.println("Cache is clean.");
+	}
+
+
+	//
+	// Private methods
+	//
+
+	//
+	// MakeFreeSpace - throw LRU file until free space is above min level
+	//
+	private synchronized void MakeFreeSpace(String rawUrl)
+	{
+		String filename,
+				LRUfilename;
+		Date   date,
+				minDate;
+
+		minDate = new Date();
+		while (config.getBytesFree() < MinFreeSpace)
+		{
+			filename = LRUfilename = null;
+			date = null;
+
+			if (htable.isEmpty())
+			{
+				System.out.println("Could not make free space: Hash table empty...");
+				return;
+			}
+
+			//
+			// Enumerate the hash table entries to find the LRU file
+			//
+			for (Enumeration keys = htable.keys(); keys.hasMoreElements() ;)
+			{
+				filename = (String)keys.nextElement();
+				date = (Date)htable.get(filename);
+				if (date.before(minDate))
+					LRUfilename = filename;
+			}
+
+			//
+			// Delete the LRU file
+			//
+			File LRUfile = new File(LRUfilename);
+			long nbytes = LRUfile.length();
+			boolean result = LRUfile.delete();
+			if (result == true)
+			{
+				// Delete entry in hash table
+				htable.remove(LRUfilename);
+				config.decreaseFilesCached();
+
+				// Increment free space
+				config.setBytesCached(config.getBytesCached() - nbytes);
+			}
+			else
+			{
+				// Another thread holds this file open for writing
+				System.out.println("File "+LRUfilename+" could not be deleted...");
+				return;
+			}
+		}
+	}
+
+
+	//
+	// Convert the URL to filename - this method parses the URL and
+	//   generate filename only if the URL is to be cached.
+	//   We do not cache URLs containing '?', "cgi-bin" and
+	//   a list of not-to-cached-URLs as instructed by the proxy administrator.
+	//
+	private String getFileName(String rawUrl)
+	{
+		String filename = basePath + File.separatorChar + rawUrl.substring(7).replace('/','@');
+
+		if (filename.indexOf('?') != -1 || filename.indexOf("cgi-bin") != -1)
+		{
+			return null;
+		}
+
+		return filename;
+	}
+}
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Config.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Config.java
new file mode 100644
index 0000000..4e6c446
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Config.java
@@ -0,0 +1,930 @@
+package org.apache.jmeter.protocol.http.proxy;
+
+import java.io.*;
+
+import java.net.*;
+
+/************************************************************
+ *  File Config.java
+ ***********************************************************/
+
+
+import java.util.*;
+
+
+
+//
+
+// Class:     Config
+
+// Abstract:  Configurable parameters of the proxy. This class is
+
+//            used by both the applet and the proxy.
+
+//
+
+
+/************************************************************
+ *  Description of the Class
+ *
+ *@author     default
+ *@created    June 29, 2001
+ ***********************************************************/
+class Config
+{
+
+	//
+
+	// Member variables
+
+	//
+
+	String jmxScriptDir;
+
+	private boolean isFatherProxy;
+
+	private String fatherProxyHost;
+
+	private int fatherProxyPort;
+
+	private String[] deniedHosts;
+
+	private String password;
+
+	private boolean isCaching;
+	// enable/disable caching
+
+	private long cacheSize;
+	// cache size in bytes
+
+	private boolean cleanCache;
+
+	private String[] cacheMasks;
+
+
+	private long filesCached;
+
+	private long bytesCached;
+
+	private long bytesFree;
+
+	private long hits;
+
+	private long misses;
+
+
+	private final int defaultProxyPort = 8080;
+
+	private final String defaultPassword = "admin";
+
+	private final long defaultCacheSize = 1000000;
+
+
+	private String adminPath;
+
+	private int adminPort;
+
+
+	private String localHost;
+
+	private String localIP;
+
+
+	private boolean isAppletContext;
+
+	private String separator = " ";
+
+	private String proxyMachineNameAndPort;
+
+
+
+	//
+
+	// Member methods
+
+	//
+
+
+	//
+
+	// Constructor
+
+	//
+
+	Config()
+	{
+
+		filesCached = 0;
+
+		bytesCached = 0;
+
+		bytesFree = cacheSize;
+
+		hits = 0;
+
+		misses = 0;
+
+
+		reset();
+
+	}
+
+
+	/************************************************************
+	 *  Sets the JmxScriptDir attribute of the Config object
+	 *
+	 *@param  filename  The new JmxScriptDir value
+	 ***********************************************************/
+	public void setJmxScriptDir(String filename)
+	{
+
+		jmxScriptDir = filename;
+
+		File file = new File(System.getProperty("user.dir") + File.separator + jmxScriptDir);
+
+		file.mkdirs();
+
+	}
+
+
+
+	//
+
+	// Set/get methods
+
+	//
+
+
+	// Set if we are in the applet or in the proxy
+
+	/************************************************************
+	 *  Sets the IsAppletContext attribute of the Config object
+	 *
+	 *@param  b  The new IsAppletContext value
+	 ***********************************************************/
+	public void setIsAppletContext(boolean b)
+	{
+
+		isAppletContext = b;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the ProxyMachineNameAndPort attribute of the Config object
+	 *
+	 *@param  s  The new ProxyMachineNameAndPort value
+	 ***********************************************************/
+	public void setProxyMachineNameAndPort(String s)
+	{
+
+		proxyMachineNameAndPort = s;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the AdminPort attribute of the Config object
+	 *
+	 *@param  port  The new AdminPort value
+	 ***********************************************************/
+	public void setAdminPort(int port)
+	{
+
+		adminPort = port;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the AdminPath attribute of the Config object
+	 *
+	 *@param  path  The new AdminPath value
+	 ***********************************************************/
+	public void setAdminPath(String path)
+	{
+
+		adminPath = path;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the LocalHost attribute of the Config object
+	 *
+	 *@param  host  The new LocalHost value
+	 ***********************************************************/
+	public void setLocalHost(String host)
+	{
+
+		localHost = host;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the LocalIP attribute of the Config object
+	 *
+	 *@param  ip  The new LocalIP value
+	 ***********************************************************/
+	public void setLocalIP(String ip)
+	{
+
+		localIP = ip;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the IsCaching attribute of the Config object
+	 *
+	 *@param  caching  The new IsCaching value
+	 ***********************************************************/
+	public synchronized void setIsCaching(boolean caching)
+	{
+
+		isCaching = caching;
+
+	}
+
+	/************************************************************
+	 *  Sets the CacheSize attribute of the Config object
+	 *
+	 *@param  size  The new CacheSize value
+	 ***********************************************************/
+	public synchronized void setCacheSize(long size)
+	{
+
+		cacheSize = size;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the IsFatherProxy attribute of the Config object
+	 *
+	 *@param  fatherProxy  The new IsFatherProxy value
+	 ***********************************************************/
+	public synchronized void setIsFatherProxy(boolean fatherProxy)
+	{
+
+		isFatherProxy = fatherProxy;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the FatherProxyHost attribute of the Config object
+	 *
+	 *@param  host  The new FatherProxyHost value
+	 ***********************************************************/
+	public synchronized void setFatherProxyHost(String host)
+	{
+
+		fatherProxyHost = host;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the FatherProxyPort attribute of the Config object
+	 *
+	 *@param  port  The new FatherProxyPort value
+	 ***********************************************************/
+	public synchronized void setFatherProxyPort(int port)
+	{
+
+		fatherProxyPort = port;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the DeniedHosts attribute of the Config object
+	 *
+	 *@param  hosts  The new DeniedHosts value
+	 ***********************************************************/
+	public synchronized void setDeniedHosts(String[] hosts)
+	{
+
+		deniedHosts = hosts;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the Password attribute of the Config object
+	 *
+	 *@param  newPassword  The new Password value
+	 ***********************************************************/
+	public synchronized void setPassword(String newPassword)
+	{
+
+		password = newPassword;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the CleanCache attribute of the Config object
+	 *
+	 *@param  clean  The new CleanCache value
+	 ***********************************************************/
+	public synchronized void setCleanCache(boolean clean)
+	{
+
+		cleanCache = clean;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the CacheMasks attribute of the Config object
+	 *
+	 *@param  masks  The new CacheMasks value
+	 ***********************************************************/
+	public synchronized void setCacheMasks(String[] masks)
+	{
+
+		cacheMasks = masks;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the FilesCached attribute of the Config object
+	 *
+	 *@param  number  The new FilesCached value
+	 ***********************************************************/
+	public synchronized void setFilesCached(long number)
+	{
+
+		filesCached = number;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the BytesCached attribute of the Config object
+	 *
+	 *@param  number  The new BytesCached value
+	 ***********************************************************/
+	public synchronized void setBytesCached(long number)
+	{
+
+		bytesCached = number;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the Hits attribute of the Config object
+	 *
+	 *@param  number  The new Hits value
+	 ***********************************************************/
+	public synchronized void setHits(long number)
+	{
+
+		hits = number;
+
+	}
+
+
+	/************************************************************
+	 *  Sets the Misses attribute of the Config object
+	 *
+	 *@param  number  The new Misses value
+	 ***********************************************************/
+	public synchronized void setMisses(long number)
+	{
+
+		misses = number;
+
+	}
+
+
+	/************************************************************
+	 *  Gets the JmxScriptDir attribute of the Config object
+	 *
+	 *@return    The JmxScriptDir value
+	 ***********************************************************/
+	public String getJmxScriptDir()
+	{
+
+		return jmxScriptDir;
+	}
+
+
+	/************************************************************
+	 *  Gets the ProxyMachineNameAndPort attribute of the Config object
+	 *
+	 *@return    The ProxyMachineNameAndPort value
+	 ***********************************************************/
+	public String getProxyMachineNameAndPort()
+	{
+
+		return proxyMachineNameAndPort;
+	}
+
+
+	/************************************************************
+	 *  Gets the AdminPort attribute of the Config object
+	 *
+	 *@return    The AdminPort value
+	 ***********************************************************/
+	public int getAdminPort()
+	{
+
+		return adminPort;
+	}
+
+
+	/************************************************************
+	 *  Gets the AdminPath attribute of the Config object
+	 *
+	 *@return    The AdminPath value
+	 ***********************************************************/
+	public String getAdminPath()
+	{
+
+		return adminPath;
+	}
+
+
+	/************************************************************
+	 *  Gets the LocalHost attribute of the Config object
+	 *
+	 *@return    The LocalHost value
+	 ***********************************************************/
+	public String getLocalHost()
+	{
+
+		return localHost;
+	}
+
+
+	/************************************************************
+	 *  Gets the LocalIP attribute of the Config object
+	 *
+	 *@return    The LocalIP value
+	 ***********************************************************/
+	public String getLocalIP()
+	{
+
+		return localIP;
+	}
+
+
+	/************************************************************
+	 *  Gets the CacheSize attribute of the Config object
+	 *
+	 *@return    The CacheSize value
+	 ***********************************************************/
+	public synchronized long getCacheSize()
+	{
+
+		return cacheSize;
+	}
+
+
+	/************************************************************
+	 *  Gets the IsFatherProxy attribute of the Config object
+	 *
+	 *@return    The IsFatherProxy value
+	 ***********************************************************/
+	public boolean getIsFatherProxy()
+	{
+
+		return isFatherProxy;
+	}
+
+
+	/************************************************************
+	 *  Gets the FatherProxyHost attribute of the Config object
+	 *
+	 *@return    The FatherProxyHost value
+	 ***********************************************************/
+	public String getFatherProxyHost()
+	{
+
+		return fatherProxyHost;
+	}
+
+
+	/************************************************************
+	 *  Gets the FatherProxyPort attribute of the Config object
+	 *
+	 *@return    The FatherProxyPort value
+	 ***********************************************************/
+	public int getFatherProxyPort()
+	{
+
+		return fatherProxyPort;
+	}
+
+
+	/************************************************************
+	 *  Gets the DeniedHosts attribute of the Config object
+	 *
+	 *@return    The DeniedHosts value
+	 ***********************************************************/
+	public String[] getDeniedHosts()
+	{
+
+		return deniedHosts;
+	}
+
+
+	/************************************************************
+	 *  Gets the Password attribute of the Config object
+	 *
+	 *@return    The Password value
+	 ***********************************************************/
+	public String getPassword()
+	{
+
+		return password;
+	}
+
+
+	/************************************************************
+	 *  Gets the CleanCache attribute of the Config object
+	 *
+	 *@return    The CleanCache value
+	 ***********************************************************/
+	public boolean getCleanCache()
+	{
+
+		return cleanCache;
+	}
+
+
+	/************************************************************
+	 *  Gets the CacheMasks attribute of the Config object
+	 *
+	 *@return    The CacheMasks value
+	 ***********************************************************/
+	public String[] getCacheMasks()
+	{
+
+		return cacheMasks;
+	}
+
+
+	/************************************************************
+	 *  Gets the FilesCached attribute of the Config object
+	 *
+	 *@return    The FilesCached value
+	 ***********************************************************/
+	public long getFilesCached()
+	{
+
+		return filesCached;
+	}
+
+
+	/************************************************************
+	 *  Gets the BytesCached attribute of the Config object
+	 *
+	 *@return    The BytesCached value
+	 ***********************************************************/
+	public long getBytesCached()
+	{
+
+		return bytesCached;
+	}
+
+
+	/************************************************************
+	 *  Gets the BytesFree attribute of the Config object
+	 *
+	 *@return    The BytesFree value
+	 ***********************************************************/
+	public long getBytesFree()
+	{
+
+		return cacheSize - bytesCached;
+	}
+
+
+	/************************************************************
+	 *  Gets the Hits attribute of the Config object
+	 *
+	 *@return    The Hits value
+	 ***********************************************************/
+	public long getHits()
+	{
+
+		return hits;
+	}
+
+
+	/************************************************************
+	 *  Gets the Misses attribute of the Config object
+	 *
+	 *@return    The Misses value
+	 ***********************************************************/
+	public long getMisses()
+	{
+
+		return misses;
+	}
+
+
+	/************************************************************
+	 *  Gets the HitRatio attribute of the Config object
+	 *
+	 *@return    The HitRatio value
+	 ***********************************************************/
+	public double getHitRatio()
+	{
+
+		if((hits + misses) == 0)
+		{
+
+			return 0;
+		}
+
+		else
+		{
+
+			return 100 * hits / (hits + misses);
+		}
+
+	}
+
+
+	//
+
+	// Re-initialize
+
+	//
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public void reset()
+	{
+
+		isFatherProxy = false;
+
+		fatherProxyHost = "wwwproxy.ac.il";
+
+		fatherProxyPort = defaultProxyPort;
+
+		password = defaultPassword;
+
+		isCaching = true;
+
+		cacheSize = defaultCacheSize;
+
+		cleanCache = false;
+
+
+		deniedHosts = new String[0];
+
+		cacheMasks = new String[0];
+
+	}
+
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public synchronized void increaseFilesCached()
+	{
+
+		filesCached++;
+
+	}
+
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public synchronized void decreaseFilesCached()
+	{
+
+		filesCached--;
+
+	}
+
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public synchronized void increaseHits()
+	{
+
+		hits++;
+
+	}
+
+
+	/************************************************************
+	 *  Description of the Method
+	 ***********************************************************/
+	public synchronized void increaseMisses()
+	{
+
+		misses++;
+
+	}
+
+
+
+	//
+
+	// Construct a string with all parameters
+
+	//
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@return    Description of the Returned Value
+	 ***********************************************************/
+	public synchronized String toString()
+	{
+
+		int i;
+
+		String s = "";
+
+		s += isFatherProxy + separator;
+
+		s += fatherProxyHost.equals("") ? "NULL" : fatherProxyHost;
+
+		s += separator +
+				fatherProxyPort + separator;
+
+
+		s += deniedHosts.length + separator;
+
+		for(i = 0; i < deniedHosts.length; i++)
+		{
+
+			s += deniedHosts[i] + separator;
+		}
+
+
+		s +=
+				password + separator +
+				isCaching + separator +
+				cacheSize + separator +
+				cleanCache + separator;
+
+
+		s += cacheMasks.length + separator;
+
+		for(i = 0; i < cacheMasks.length; i++)
+		{
+
+			s += cacheMasks[i] + separator;
+		}
+
+
+		s += proxyMachineNameAndPort + separator;
+
+
+		s +=
+				filesCached + separator +
+				bytesCached + separator +
+				bytesFree + separator +
+				hits + separator +
+				misses + separator +
+				"\n";
+
+		return s;
+	}
+
+
+	//
+
+	// Set parameters according to a string (that was sent by applet)
+
+	//
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  config  Description of Parameter
+	 ***********************************************************/
+	public synchronized void parse(String config)
+	{
+
+		System.out.println("Parsing administrator request...");
+
+		int size;
+
+		int i;
+
+		StringTokenizer s = new StringTokenizer(config, separator);
+
+
+		isFatherProxy = s.nextToken().equals("true");
+
+		System.out.println("Use father proxy = " + isFatherProxy);
+
+		fatherProxyHost = s.nextToken();
+
+		if(fatherProxyHost.equals("NULL"))
+		{
+
+			fatherProxyHost = "";
+		}
+
+		System.out.println("Father proxy name = " + fatherProxyHost);
+
+
+		fatherProxyPort = Integer.parseInt(s.nextToken());
+
+		System.out.println("Father proxy port = " + fatherProxyPort);
+
+
+		size = Integer.parseInt(s.nextToken());
+
+		deniedHosts = new String[size];
+
+		for(i = 0; i < size; i++)
+		{
+
+			deniedHosts[i] = s.nextToken();
+
+			System.out.println("Deny access to " + deniedHosts[i]);
+
+		}
+
+
+		password = s.nextToken();
+
+		System.out.println("password = " + password);
+
+		isCaching = s.nextToken().equals("true");
+
+		System.out.println("Caching = " + isCaching);
+
+		cacheSize = Long.parseLong(s.nextToken());
+
+		System.out.println("Cache size = " + cacheSize);
+
+		cleanCache = s.nextToken().equals("true");
+
+		System.out.println("Do cache clean up = " + cleanCache);
+
+
+		size = Integer.parseInt(s.nextToken());
+
+		cacheMasks = new String[size];
+
+		for(i = 0; i < size; i++)
+		{
+
+			cacheMasks[i] = s.nextToken();
+
+			System.out.println("Don't cache " + cacheMasks[i]);
+
+		}
+
+
+		proxyMachineNameAndPort = s.nextToken();
+
+
+		if(isAppletContext)
+		{
+
+			filesCached = Long.parseLong(s.nextToken());
+
+			bytesCached = Long.parseLong(s.nextToken());
+
+			bytesFree = Long.parseLong(s.nextToken());
+
+			hits = Long.parseLong(s.nextToken());
+
+			misses = Long.parseLong(s.nextToken());
+
+		}
+
+
+		//
+
+		// Update bytesFree to reflect the change in cache size.
+
+		// Note that free bytes can be below min free level now.
+
+		//
+
+		bytesFree = cacheSize - bytesCached;
+
+	}
+
+
+	boolean getIsCaching()
+	{
+
+		return isCaching;
+	}
+
+}
+
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Daemon.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Daemon.java
new file mode 100644
index 0000000..7ee301b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Daemon.java
@@ -0,0 +1,187 @@
+package org.apache.jmeter.protocol.http.proxy;
+
+import java.io.*;
+import org.apache.jmeter.protocol.http.control.CookieManager;
+
+/************************************************************
+ *  File Daemon.java
+ ***********************************************************/
+import java.net.*;
+//
+// Class:     Daemon
+// Abstract:  Web daemon thread. creates main socket on port 8080
+//            and listens on it forever. For each client request,
+//            creates proxy thread to handle the request.
+//
+/************************************************************
+ *  Description of the Class
+ *
+ *@author     default
+ *@created    June 29, 2001
+ ***********************************************************/
+public class Daemon extends Thread
+{
+	//
+	// Member variables
+	//
+	static ServerSocket MainSocket = null;
+	static Cache cache = null;
+	static Config config;
+	static String adminPath;
+	final static int defaultDaemonPort = 8080;
+	final static int maxDaemonPort = 65536;
+	private int daemonPort;
+	private boolean running;
+	ProxyControl target;
+	private Socket ClientSocket;
+
+	public Daemon()
+	{
+	}
+
+	public Daemon(int port,ProxyControl target) throws UnknownHostException
+	{
+		this.target = target;
+		configureProxy(port);
+	}
+
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  daemonPort  Description of Parameter
+	 ***********************************************************/
+	public void configureProxy(int daemonPort) throws UnknownHostException
+	{
+		this.daemonPort = daemonPort;
+		// Create the Cache Manager and Configuration objects
+		System.out.println("Initializing...");
+		System.out.print("Creating Config Object...");
+		config = new Config();
+		config.setIsAppletContext(false);
+		config.setLocalHost(InetAddress.getLocalHost().getHostName());
+		String tmp = InetAddress.getLocalHost().toString();
+		config.setLocalIP(tmp.substring(tmp.indexOf('/') + 1));
+		config.setProxyMachineNameAndPort(InetAddress.getLocalHost().getHostName() + ":" + daemonPort);
+		config.setJmxScriptDir("proxy_script");
+		File adminDir = new File("Applet");
+		config.setAdminPath(adminDir.getAbsolutePath());
+		System.out.println("OK");
+		System.out.print("Creating Cache Manager...");
+		cache = new Cache(config);
+		System.out.println("OK");
+	}
+
+	//
+	// Member methods
+	//
+
+	// Application starts here
+	/************************************************************
+	 *  Description of the Method
+	 *
+	 *@param  args  Description of Parameter
+	 ***********************************************************/
+	public static void main(String args[])
+	{
+		int daemonPort;
+		// Parse command line
+		switch (args.length)
+		{
+			case 0:
+				daemonPort = defaultDaemonPort;
+				break;
+			case 1:
+				try
+				{
+					daemonPort = Integer.parseInt(args[0]);
+				}
+				catch(NumberFormatException e)
+				{
+					System.out.println("Error: Invalid daemon port");
+					return;
+				}
+				if(daemonPort > maxDaemonPort)
+				{
+					System.out.println("Error: Invalid daemon port");
+					return;
+				}
+				break;
+			default:
+				System.out.println("Usage: Proxy [daemon port]");
+				return;
+		}
+		Daemon demon = new Daemon();
+		try
+		{
+			demon.configureProxy(daemonPort);
+		}
+		catch(UnknownHostException e)
+		{
+			System.out.println("Unknown host");
+			System.exit(-1);
+		}
+		demon.start();
+	}
+
+	/************************************************************
+	 *  Main processing method for the Daemon object
+	 ***********************************************************/
+	public void run()
+	{
+		CookieManager cookieManager = new CookieManager();
+		running = true;
+		try
+		{
+			System.out.print("Creating Daemon Socket...");
+			MainSocket = new ServerSocket(daemonPort);
+			System.out.println(" port " + daemonPort + " OK");
+			System.out.println("Proxy up and running!");
+			while(running)
+			{
+				// Listen on main socket
+				Socket ClientSocket = MainSocket.accept();
+				// Pass request to new proxy thread
+				Proxy thd = new Proxy(ClientSocket, cache, config,target,cookieManager);
+				thd.start();
+			}
+			System.out.println("Proxy Server stopped");
+		}
+		catch(Exception e)
+		{
+			System.out.println("Proxy Server stopped");
+		}
+		finally
+		{
+			try
+			{
+				MainSocket.close();
+			}
+			catch(Exception exc)
+			{
+			}
+		}
+	}
+	public void stopServer() {
+		this.running = false;
+		Socket endIt = null;
+		try
+		{
+			endIt = new Socket(InetAddress.getLocalHost().getHostName(),daemonPort);
+			endIt.getOutputStream().write(5);
+		}
+		catch(IOException e)
+		{
+		}
+		finally
+		{
+			try
+			{
+				endIt.close();
+			}
+			catch(Exception e)
+			{
+			}
+		}
+	}
+}
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/HttpReplyHdr.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/HttpReplyHdr.java
new file mode 100644
index 0000000..c51a363
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/HttpReplyHdr.java
@@ -0,0 +1,319 @@
+package org.apache.jmeter.protocol.http.proxy;
+/******************************************************************
+*** File HttpReplyHdr.java
+***
+***/
+
+import java.net.*;
+import java.io.*;
+
+//
+// Class:     HttpReplyHdr
+// Abstract:  The headers of the server HTTP reply.
+//
+
+public class HttpReplyHdr
+{
+
+	static String CR="\r\n";
+	static String HTTP_PROTOCOL="HTTP/1.0";
+	static String HTTP_SERVER="Java Proxy Server";
+
+	String lastModified ="";
+	long   contentLength=0;
+	String extraErrorString ="";
+
+/**
+ * Sets the last modified date for a header;
+ *
+ * @param date  A string holding an interner date
+ * @return      true
+ */
+public boolean setModifiedDate(String date)
+	{
+		lastModified = date;
+		return true;
+	}
+
+/**
+ * Adds an extra explanation. This extra information is
+ * Added to the http headers failure explanation.
+ *
+ * @param str  Description to add.
+ * @return     true.
+ */
+public boolean addErrorDescription(String str)
+	{
+		extraErrorString = str;
+		return true;
+	}
+
+/**
+ * Forms a http ok reply header
+ *
+ * @param ContentType The mime-type of the content
+ * @return            A string with the header in it
+ */
+public String formOk(String ContentType,long  ContentLength)
+	{
+
+		 contentLength = ContentLength;
+
+		 String out =new String();
+
+		 out += HTTP_PROTOCOL + " 200 Ok" + CR;
+		 out += "Server: " + HTTP_SERVER  + CR;
+		 out += "MIME-version: 1.0"       + CR;
+
+		 if (0 < ContentType.length())
+			  out += "Content-type: " + ContentType + CR;
+		 else
+			  out += "Content-Type: text/html" + CR;
+
+		 if (0 != contentLength)
+			  out += "Content-Length: " + Long.toString(contentLength) + CR;
+
+		 if (0 < lastModified.length())
+			  out +="Last-Modified: " + lastModified + CR;
+
+		 out +=CR;
+
+		 return out;
+	}
+
+
+/**
+ * private! builds an http document describing a headers reason.
+ *
+ * @param Error        Error name.
+ * @param Description  Errors description.
+ * @return             A string with the HTML description body
+ */
+private String formErrorBody(String Error,String Description)
+	{
+	String out;
+	//Generate Error Body
+	out  ="<HTML><HEAD><TITLE>";
+	out += Error ;
+	out +="</TITLE></HEAD>";
+	out +="<BODY><H2>" + Error +"</H2>\n";
+	out +="</P></H3>";
+	out += Description;
+	out +="</BODY></HTML>";
+	return out;
+	}
+
+
+
+/**
+ * builds an http document describing an error.
+ *
+ * @param Error        Error name.
+ * @param Description  Errors description.
+ * @return             A string with the HTML description body
+ */
+private String formError(String Error, String Description)
+	{
+	/* A HTTP RESPONCE HEADER LOOKS ALOT LIKE:
+	 *
+	 * HTTP/1.0 200 OK
+	 * Date: Wednesday, 02-Feb-94 23:04:12 GMT
+	 * Server: NCSA/1.1
+	 * MIME-version: 1.0
+	 * Last-modified: Monday, 15-Nov-93 23:33:16 GMT
+	 * Content-type: text/html
+	 * Content-length: 2345
+	 * \r\n
+	 */
+
+	String body=formErrorBody(Error,Description);
+	String header =new String();
+
+	header +=HTTP_PROTOCOL +" " + Error + CR;
+	header +="Server: " + HTTP_SERVER   + CR;
+	header +="MIME-version: 1.0"        + CR;
+	header +="Content-type: text/html"  + CR;
+
+	if (0 < lastModified.length())
+		 header +="Last-Modified: " + lastModified +CR;
+
+	header +="Content-Length: " + String.valueOf(body.length())+ CR;
+
+	header += CR;
+	header += body;
+
+	return header;
+	}
+
+
+/**
+ * Indicates a new file was created.
+ *
+ * @return    The header in a string;
+ */
+public String formCreated()
+	{
+	return formError("201 Created","Object was created");
+	}
+
+/**
+ * Indicates the document was accepted.
+ *
+ * @return    The header in a string;
+ */
+public String formAccepted()
+	{
+	return formError("202 Accepted","Object checked in");
+	}
+
+/**
+ * Indicates only a partial responce was sent.
+ *
+ * @return    The header in a string;
+ */
+public String  formPartial()
+	{
+	return formError("203 Partial","Only partail document available");
+	}
+
+/**
+ * Indicates a requested URL has moved to a new address or name.
+ *
+ * @return    The header in a string;
+ */
+public String formMoved()
+	{
+	//300 codes tell client to do actions
+	return formError("301 Moved","File has moved");
+	}
+
+/**
+ * Never seen this used.
+ *
+ * @return    The header in a string;
+ */
+public String formFound()
+	{
+	return formError("302 Found","Object was found");
+	}
+
+/**
+ * The requested method is not implemented by the server.
+ *
+ * @return    The header in a string;
+ */
+public String formMethod()
+	{
+	return formError("303 Method unseported","Method unseported");
+	}
+
+/**
+ * Indicates remote copy of the requested object is current.
+ *
+ * @return    The header in a string;
+ */
+public String formNotModified()
+	{
+	return formError("304 Not modified","Use local copy");
+	}
+
+/**
+ * Client not otherized for the request.
+ *
+ * @return    The header in a string;
+ */
+public String formUnautorized()
+	{
+	return formError("401 Unathorized","Unathorized use of this service");
+	}
+
+/**
+ * Payment is required for service.
+ *
+ * @return    The header in a string;
+ */
+public String formPaymentNeeded()
+	{
+	return formError("402 Payment required","Payment is required");
+	}
+
+/**
+ * Client if forbidden to get the request service.
+ *
+ * @return    The header in a string;
+ */
+public String formForbidden()
+	{
+	return formError("403 Forbidden","You need permission for this service");
+	}
+
+/**
+ * The requested object was not found.
+ *
+ * @return    The header in a string;
+ */
+public String formNotFound()
+	{
+	return formError("404 Not_found","Requested object was not found");
+	}
+
+/**
+ * The server had a problem and could not fulfill the request.
+ *
+ * @return    The header in a string;
+ */
+public String formInternalError()
+	{
+	return formError("500 Internal server error","Server broke");
+	}
+
+/**
+ * Server does not do the requested feature.
+ *
+ * @return    The header in a string;
+ */
+public String formNotImplemented()
+	{
+	return formError("501 Method not implemented","Service not implemented, programer was lazy");
+	}
+
+/**
+ * Server is overloaded, client should try again latter.
+ *
+ * @return    The header in a string;
+ */
+public String formOverloaded()
+	{
+	return formError("502 Server overloaded","Try again latter");
+	}
+
+/**
+ * Indicates the request took to long.
+ *
+ * @return    The header in a string;
+ */
+public String formTimeout()
+	{
+	return formError("503 Gateway timeout","The connection timed out");
+	}
+
+/**
+ * Indicates the client's proxies could not locate a server.
+ *
+ * @return    The header in a string;
+ */
+public String formServerNotFound()
+	{
+	return formError("503 Gateway timeout","The requested server was not found");
+	}
+
+/**
+ * Indicates the client is not allowed to access the object.
+ *
+ * @return    The header in a string;
+ */
+public String formNotAllowed()
+	{
+	return formError("403 Access Denied","Access is not allowed");
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/HttpRequestHdr.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/HttpRequestHdr.java
new file mode 100644
index 0000000..59038e1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/HttpRequestHdr.java
@@ -0,0 +1,358 @@
+package org.apache.jmeter.protocol.http.proxy;
+/****************************************
+ * File HttpRequestHdr.java
+ ***************************************/
+import java.io.ByteArrayOutputStream;
+import java.io.IOException;
+import java.io.InputStream;
+import java.net.MalformedURLException;
+import java.net.ProtocolException;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.Map;
+import java.util.StringTokenizer;
+
+import org.apache.jmeter.protocol.http.config.MultipartUrlConfig;
+import org.apache.jmeter.protocol.http.control.Header;
+import org.apache.jmeter.protocol.http.control.HeaderManager;
+import org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui;
+import org.apache.jmeter.protocol.http.gui.HeaderPanel;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.testelement.TestElement;
+
+//
+// Class:     HttpRequestHdr
+// Abstract:  The headers of the client HTTP request.
+//
+
+/****************************************
+ * !ToDo (Class description)
+ *
+ *@author    $Author: mstover1 $
+ *@created   $Date: 2002/08/14 17:49:04 $
+ *@version   $Revision: 1.3 $
+ ***************************************/
+public class HttpRequestHdr
+{
+
+	/****************************************
+	 * Http Request method. Such as get or post.
+	 ***************************************/
+	public String method = new String();
+
+	/****************************************
+	 * The requested url. The universal resource locator that hopefully uniquely
+	 * describes the object or service the client is requesting.
+	 ***************************************/
+	public String url = new String();
+
+	/****************************************
+	 * Version of http being used. Such as HTTP/1.0
+	 ***************************************/
+	public String version = new String();
+
+
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	public String postData = "";
+
+	static String CR = "\r\n";
+
+	private Map headers = new HashMap();
+
+
+	/****************************************
+	 * Parses a http header from a stream.
+	 *
+	 *@param in  The stream to parse.
+	 *@return    Array of bytes from client.
+	 ***************************************/
+	public byte[] parse(InputStream in) throws IOException
+	{
+		boolean inHeaders = true;
+		int readLength = 0;
+		int dataLength = 0;
+		String CR = "\r\n";
+		boolean first = true;
+		ByteArrayOutputStream clientRequest = new ByteArrayOutputStream();
+		ByteArrayOutputStream line = new ByteArrayOutputStream();
+		int x;
+		while((inHeaders || readLength < dataLength) && ((x = in.read()) != -1))
+		{
+			line.write(x);
+			clientRequest.write(x);
+			if(inHeaders && (byte)x == (byte)'\n')
+			{
+				if(line.size() < 3)
+				{
+					inHeaders = false;
+				}
+				if(first)
+				{
+					parseFirstLine(line.toString());
+					first = false;
+				}
+				else
+				{
+					dataLength = Math.max(parseLine(line.toString()),dataLength);
+				}
+				line.reset();
+			}
+			else if(!inHeaders)
+			{
+				readLength++;
+			}
+		}
+		postData = line.toString().trim();
+		return clientRequest.toByteArray();
+	}
+
+	public void parseFirstLine(String firstLine)
+	{
+		StringTokenizer tz = new StringTokenizer(firstLine);
+		method = getToken(tz).toUpperCase();
+		url = getToken(tz);
+		version = getToken(tz);
+	}
+
+	public int parseLine(String nextLine)
+	{
+		StringTokenizer tz;
+		tz = new StringTokenizer(nextLine);
+		String token = getToken(tz);
+		// look for termination of HTTP command
+		if(0 == token.length())
+		{
+			return 0;
+		}
+		else
+		{
+			String name = token.trim().substring(0,token.trim().length()-1);
+			String value = getRemainder(tz);
+			headers.put(name.toLowerCase(),new Header(name,value));
+			if(name.equalsIgnoreCase("content-length"))
+			{
+				return Integer.parseInt(value);
+			}
+		}
+		return 0;
+	}
+	
+	public HeaderManager getHeaderManager()
+	{
+		HeaderManager manager = new HeaderManager();
+		Iterator keys = headers.keySet().iterator();
+		while(keys.hasNext())
+		{
+			String key = (String)keys.next();
+			if(!key.equals("proxy-connection") && !key.equals("content-length"))
+			{
+				manager.add((Header)headers.get(key));
+			}
+		}
+		manager.setName("Browser-derived headers");
+		manager.setProperty(TestElement.TEST_CLASS,HeaderManager.class.getName());
+		manager.setProperty(TestElement.GUI_CLASS,HeaderPanel.class.getName());
+		return  manager;
+	}
+
+	public HTTPSampler getSampler() throws MalformedURLException,IOException,ProtocolException
+	{
+		HttpTestSampleGui tempGui = new HttpTestSampleGui();
+		tempGui.configure(createSampler());
+		HTTPSampler result = (HTTPSampler)tempGui.createTestElement();
+		result.setFollowRedirects(false);
+		result.setUseKeepAlive(true);
+		return result;
+	}
+
+	public String getContentType()
+	{
+		Header contentTypeHeader = (Header)headers.get("content-type");
+		if(contentTypeHeader != null)
+		{
+			return contentTypeHeader.getValue();
+		}
+		return "";
+	}
+	
+	public static MultipartUrlConfig isMultipart(String contentType)
+	{
+		if(contentType != null && contentType.startsWith(MultipartUrlConfig.MULTIPART_FORM))
+		{
+			return new MultipartUrlConfig(contentType.substring(contentType.indexOf("oundary=")+8));
+		}
+		else
+		{
+			return null;
+		}
+	}
+
+	private HTTPSampler createSampler()
+	{
+		MultipartUrlConfig urlConfig = null;
+		HTTPSampler sampler = new HTTPSampler();
+		sampler.setDomain(serverName());
+		sampler.setMethod(method);
+		sampler.setPath(serverUrl());
+		sampler.setName(sampler.getPath());
+		if(url.indexOf(":") > -1)
+		{
+			sampler.setProtocol(url.substring(0, url.indexOf(":")));
+		}
+		else
+		{
+			sampler.setProtocol("http");
+		}
+		sampler.setPort(serverPort());
+		if((urlConfig = isMultipart(getContentType())) != null)
+		{
+			urlConfig.parseArguments(postData);
+			sampler.setArguments(urlConfig.getArguments());
+			sampler.setFileField(urlConfig.getFileFieldName());
+			sampler.setFilename(urlConfig.getFilename());
+			sampler.setMimetype(urlConfig.getMimeType());
+		}
+		else
+		{
+			sampler.parseArguments(postData);
+		}
+		return sampler;
+	 }
+
+	//
+	// Parsing Methods
+	//
+
+	/****************************************
+	 * Find the //server.name from an url.
+	 *
+	 *@return   Servers internet name
+	 ***************************************/
+	public String serverName()
+	{
+		// chop to "server.name:x/thing"
+		String str = url;
+		int i = str.indexOf("//");
+		if(i < 0)
+		{
+			return "";
+		}
+		str = str.substring(i + 2);
+
+		// chop to  server.name:xx
+		i = str.indexOf("/");
+		if(0 < i)
+		{
+			str = str.substring(0, i);
+		}
+
+		// chop to server.name
+		i = str.indexOf(":");
+		if(0 < i)
+		{
+			str = str.substring(0, i);
+		}
+
+		return str;
+	}
+
+	/****************************************
+	 * Find the :PORT form http://server.ect:PORT/some/file.xxx
+	 *
+	 *@return   Servers internet name
+	 ***************************************/
+	public int serverPort()
+	{
+		String str = url;
+		// chop to "server.name:x/thing"
+		int i = str.indexOf("//");
+		if(i < 0)
+		{
+			return 80;
+		}
+		str = str.substring(i + 2);
+
+		// chop to  server.name:xx
+		i = str.indexOf("/");
+		if(0 < i)
+		{
+			str = str.substring(0, i);
+		}
+
+		// chop XX
+		i = str.indexOf(":");
+		if(0 < i)
+		{
+			return Integer.parseInt(str.substring(i + 1).trim());
+		}
+
+		return 80;
+	}
+
+	/****************************************
+	 * Find the /some/file.xxxx form http://server.ect:PORT/some/file.xxx
+	 *
+	 *@return   the deproxied url
+	 ***************************************/
+	public String serverUrl()
+	{
+		String str = url;
+		int i = str.indexOf("//");
+		if(i < 0)
+		{
+			return str;
+		}
+
+		str = str.substring(i + 2);
+		i = str.indexOf("/");
+		if(i < 0)
+		{
+			return str;
+		}
+
+		return str.substring(i);
+	}
+
+	/****************************************
+	 * Returns the next token in a string
+	 *
+	 *@param tk  String that is partially tokenized.
+	 *@return    !ToDo (Return description)
+	 *@returns   The remainder
+	 ***************************************/
+	String getToken(StringTokenizer tk)
+	{
+		String str = "";
+		if(tk.hasMoreTokens())
+		{
+			str = tk.nextToken();
+		}
+		return str;
+	}
+
+	/****************************************
+	 * Returns the remainder of a tokenized string
+	 *
+	 *@param tk  String that is partially tokenized.
+	 *@return    !ToDo (Return description)
+	 *@returns   The remainder
+	 ***************************************/
+	String getRemainder(StringTokenizer tk)
+	{
+		String str = "";
+		if(tk.hasMoreTokens())
+		{
+			str = tk.nextToken();
+		}
+		while(tk.hasMoreTokens())
+		{
+			str += " " + tk.nextToken();
+		}
+
+		return str;
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Proxy.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Proxy.java
new file mode 100644
index 0000000..c4f2eed
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Proxy.java
@@ -0,0 +1,251 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.proxy;
+import java.net.*;
+import java.io.*;
+import java.util.*;
+import org.apache.jmeter.protocol.http.control.CookieManager;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.http.control.HeaderManager;
+//
+// Class:     Proxy
+// Abstract:  Thread to handle one client request. get the requested
+//            object from the web server or from the cache, and delivers
+//            the bits to client.
+//
+/**
+ *  Description of the Class
+ *
+ *@author     mike
+ *@created    June 8, 2001
+ */
+public class Proxy extends Thread {
+	//
+	// Member variables
+	//
+	Socket ClientSocket = null;
+	// Socket to client
+	Socket SrvrSocket = null;
+	// Socket to web server
+	Cache cache = null;
+	// Static cache manager object
+	String localHostName = null;
+	// Local machine name
+	String localHostIP = null;
+	// Local machine IP address
+	String adminPath = null;
+	// Path of admin applet
+	Config config = null;
+	// UrlConfig object for saving test cases
+	ProxyControl target;
+	CookieManager cookieManager;
+	//
+	// Public member methods
+	//
+	//
+	// Constructor
+	//
+	Proxy(
+		Socket clientSocket,
+		Cache CacheManager,
+		Config configObject,
+		ProxyControl target,
+		CookieManager cookieManager) {
+		//
+		// Initialize member variables
+		//
+		this.cookieManager = cookieManager;
+		this.target = target;
+		config = configObject;
+		ClientSocket = clientSocket;
+		cache = CacheManager;
+		localHostName = config.getLocalHost();
+		localHostIP = config.getLocalIP();
+		adminPath = config.getAdminPath();
+	}
+	//
+	// run - Main work is done here:
+	//
+	/**
+	 *  Main processing method for the Proxy object
+	 */
+	public void run() {
+		String serverName = "";
+		HttpURLConnection url;
+		byte line[];
+		HttpRequestHdr request = new HttpRequestHdr();
+		HttpReplyHdr reply = new HttpReplyHdr();
+		FileInputStream fileInputStream = null;
+		FileOutputStream fileOutputStream = null;
+		boolean TakenFromCache = false;
+		boolean isCachable = false;
+		try {
+			byte[] clientRequest = request.parse(new BufferedInputStream(
+				ClientSocket.getInputStream()));
+			HTTPSampler sampler = request.getSampler();
+			HeaderManager headers = request.getHeaderManager();
+			sampler.setHeaderManager(headers);
+			byte[] serverResponse = sampler.sample().getResponseData();
+			writeToClient(serverResponse,
+				new BufferedOutputStream(ClientSocket.getOutputStream()));
+			headers.removeHeaderNamed("cookie");
+			target.deliverSampler(sampler,new TestElement[]{headers});
+		} catch (UnknownHostException uhe) {
+			System.out.println("Server Not Found.");
+			try {
+				DataOutputStream out = new DataOutputStream(ClientSocket.getOutputStream());
+				out.writeBytes(reply.formServerNotFound());
+				out.flush();
+			} catch (Exception uhe2) {}
+		} catch (Exception e) {
+			e.printStackTrace();
+			try {
+				if (TakenFromCache) {
+					fileInputStream.close();
+				} else
+					if (isCachable) {
+						fileOutputStream.close();
+					}
+				DataOutputStream out = new DataOutputStream(ClientSocket.getOutputStream());
+				out.writeBytes(reply.formTimeout());
+				out.flush();
+			} catch (Exception uhe2) {}
+		} finally {
+			try {
+				ClientSocket.close();
+			} catch (Exception e) {
+				e.printStackTrace();
+			}
+		}
+	}
+	public byte[] sampleServer(HTTPSampler sampler)
+		throws IllegalAccessException, InstantiationException {
+		SampleResult result = sampler.sample();
+		return result.getResponseData();
+	}
+	//
+	// Private methods
+	//
+	//
+	// Send to administrator web page containing reference to applet
+	//
+	private void sendAppletWebPage() {
+		System.out.println("Sending the applet...");
+		String page = "";
+		try {
+			File appletHtmlPage =
+				new File(config.getAdminPath() + File.separator + "Admin.html");
+			BufferedReader in =
+				new BufferedReader(new InputStreamReader(new FileInputStream(appletHtmlPage)));
+			String s = null;
+			while ((s = in.readLine()) != null) {
+				page += s;
+			}
+			page =
+				page.substring(0, page.indexOf("PORT"))
+					+ config.getAdminPort()
+					+ page.substring(page.indexOf("PORT") + 4);
+			in.close();
+			DataOutputStream out = new DataOutputStream(ClientSocket.getOutputStream());
+			out.writeBytes(page);
+			out.flush();
+			out.close();
+		} catch (Exception e) {
+			System.out.println("Error: can't open applet html page");
+		}
+	}
+	//
+	// Send the applet to administrator
+	//
+	private void sendAppletClass(String className) {
+		try {
+			byte data[] = new byte[2000];
+			int count;
+			HttpReplyHdr reply = new HttpReplyHdr();
+			File appletFile = new File(adminPath + File.separatorChar + className);
+			long length = appletFile.length();
+			FileInputStream in = new FileInputStream(appletFile);
+			DataOutputStream out = new DataOutputStream(ClientSocket.getOutputStream());
+			out.writeBytes(reply.formOk("application/octet-stream", length));
+			while (-1 < (count = in.read(data))) {
+				out.write(data, 0, count);
+			}
+			out.flush();
+			in.close();
+			out.close();
+		} catch (Exception e) {}
+	}
+	private void writeToClient(
+		byte[] inBytes,
+		OutputStream out)
+		throws IOException {
+		try {
+			
+			out.write(inBytes);
+			out.flush();
+			System.out.println("Done writing to client");
+		} catch (IOException e) {
+			e.printStackTrace();
+		} finally {
+			try {
+				out.close();
+			} catch (Exception ex) {}
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/ProxyControl.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/ProxyControl.java
new file mode 100644
index 0000000..2cf3e23
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/ProxyControl.java
@@ -0,0 +1,477 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.http.proxy;
+
+import java.net.UnknownHostException;
+import java.util.*;
+import java.io.*;
+
+import junit.framework.TestCase;
+
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.protocol.http.config.gui.UrlConfigGui;
+import org.apache.oro.text.regex.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.tree.*;
+import org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui;
+import org.apache.jmeter.exceptions.IllegalUserActionException;
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.http.control.HeaderManager;
+import org.apache.jmeter.protocol.http.gui.HeaderPanel;
+import org.apache.jmeter.control.gui.LogicControllerGui;
+import org.apache.jmeter.threads.gui.ThreadGroupGui;
+
+/************************************************************
+ *  Title: Apache JMeter Description: Copyright: Copyright (c) 2000 Company:
+ *  Apache Foundation
+ *
+ *@author     Michael Stover
+ *@created    $Date: 2002/08/14 17:49:04 $
+ *@version    1.0
+ ***********************************************************/
+
+public class ProxyControl extends ConfigTestElement implements Serializable
+{
+	Daemon server;
+	private final int DEFAULT_PORT = 8080;
+	transient Perl5Compiler compiler;
+	transient Perl5Matcher matcher;
+	public final static String PORT = "ProxyControlGui.port";
+	public final static String EXCLUDE_LIST = "ProxyControlGui.exclude_list";
+	public final static String INCLUDE_LIST = "ProxyControlGui.include_list";
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public ProxyControl()
+	{
+		matcher = new Perl5Matcher();
+		compiler = new Perl5Compiler();
+		setPort(DEFAULT_PORT);
+		setExcludeList(new LinkedList());
+		setIncludeList(new LinkedList());
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  port  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void setPort(int port)
+	{
+		this.setProperty(PORT, new Integer(port));
+	}
+
+	public void setIncludeList(List list)
+	{
+		setProperty(INCLUDE_LIST,list);
+	}
+
+	public void setExcludeList(List list)
+	{
+		setProperty(EXCLUDE_LIST,list);
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public String getClassLabel()
+	{
+		return JMeterUtils.getResString("proxy_title");
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public int getPort()
+	{
+		if (this.getProperty(PORT) instanceof String)
+		{
+			setPort(Integer.parseInt((String)getProperty(PORT)));
+			return ((Integer)this.getProperty(PORT)).intValue();
+		}
+		else
+		{
+			return ((Integer)this.getProperty(PORT)).intValue();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDoo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public int getDefaultPort()
+	{
+		return DEFAULT_PORT;
+	}
+
+	public Class getGuiClass()
+	{
+		return org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui.class;
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public Object clone()
+	{
+		ProxyControl clone = new ProxyControl();
+		configureClone(clone);
+		return clone;
+	}
+
+	/************************************************************
+	 *  !ToDo
+	 *
+	 *@param  config  !ToDo
+	 ***********************************************************/
+	public void addConfigElement(ConfigElement config)
+	{
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void startProxy()
+	{
+		try
+		{
+			server = new Daemon(getPort(), this);
+			server.start();
+		}
+		catch (UnknownHostException e)
+		{
+			e.printStackTrace();
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo
+	 *
+	 *@param  pattern  !ToDo
+	 ***********************************************************/
+	public void addExcludedPattern(String pattern)
+	{
+		getExcludePatterns().add(pattern);
+	}
+
+	public List getExcludePatterns()
+	{
+		return (List)getProperty(EXCLUDE_LIST);
+	}
+
+	/************************************************************
+	 *  !ToDo
+	 *
+	 *@param  pattern  !ToDo
+	 ***********************************************************/
+	public void addIncludedPattern(String pattern)
+	{
+		getIncludePatterns().add(pattern);
+	}
+
+	public List getIncludePatterns()
+	{
+		return (List)getProperty(INCLUDE_LIST);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void clearExcludedPatterns()
+	{
+		getExcludePatterns().clear();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void clearIncludedPatterns()
+	{
+		getIncludePatterns().clear();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  config  !ToDo (Parameter description)
+	 ***********************************************************/
+	public void deliverSampler(HTTPSampler sampler,TestElement[] subConfigs)
+	{
+		if (filterUrl(sampler))
+		{
+			placeConfigElement(sampler,subConfigs);
+		}
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 ***********************************************************/
+	public void stopProxy()
+	{
+		if (server != null)
+		{
+			server.stopServer();
+		}
+	}
+
+	private boolean filterUrl(HTTPSampler sampler)
+	{
+		boolean ok = false;
+		if(sampler.getDomain() == null || sampler.getDomain().equals(""))
+		{
+			return false;
+		}
+		if (getIncludePatterns().size() == 0)
+		{
+			ok = true;
+		}
+		else
+		{
+			ok = checkIncludes(sampler);
+		}
+		if (!ok)
+		{
+			return ok;
+		}
+		else
+		{
+			if (getExcludePatterns().size() == 0)
+			{
+				return ok;
+			}
+			else
+			{
+				ok = checkExcludes(sampler);
+			}
+		}
+		return ok;
+	}
+
+	private void placeConfigElement(HTTPSampler sampler,TestElement[] subConfigs)
+	{
+		TestElement urlConfig = null;
+		JMeterTreeModel treeModel = GuiPackage.getInstance().getTreeModel();
+		List nodes = treeModel.getNodesOfType(LogicControllerGui.class);
+		if(nodes.size() == 0)
+		{
+			nodes = treeModel.getNodesOfType(ThreadGroupGui.class);
+		}
+		Iterator iter = nodes.iterator();
+		if (iter.hasNext())
+		{
+			JMeterTreeNode node = (JMeterTreeNode)iter.next();
+			Enumeration enum = node.children();
+			while(enum.hasMoreElements())
+			{
+				JMeterTreeNode subNode = (JMeterTreeNode)enum.nextElement();
+				JMeterGUIComponent sample = (JMeterGUIComponent)subNode.getUserObject();
+				if(sample instanceof UrlConfigGui)
+				{
+					urlConfig = sample.createTestElement();
+					break;
+				}
+			}
+			if(areMatched(sampler, urlConfig))
+			{
+				removeValuesFromSampler(sampler, urlConfig);
+				HttpTestSampleGui test = new HttpTestSampleGui();
+				test.configure(sampler);
+				try
+				{
+					JMeterTreeNode newNode = treeModel.addComponent(test,node);
+					for(int i = 0;subConfigs != null && i < subConfigs.length;
+							i++)
+					{
+						if(subConfigs[i] instanceof HeaderManager)
+						{
+							HeaderPanel comp = new HeaderPanel();
+							comp.configure(subConfigs[i]);
+							treeModel.addComponent(comp,newNode);
+						}
+					}
+				}
+				catch(IllegalUserActionException e)
+				{
+					JMeterUtils.reportErrorToUser(e.getMessage());
+				}
+			}
+		}
+	}
+
+	private void removeValuesFromSampler(
+		HTTPSampler sampler,
+		TestElement urlConfig) {
+		if(urlConfig != null && sampler.getDomain().equals(urlConfig.getProperty(HTTPSampler.DOMAIN)))
+		{
+			sampler.setDomain("");
+		}
+		if(urlConfig != null && sampler.getPath().equals(urlConfig.getProperty(HTTPSampler.PATH)))
+		{
+			sampler.setPath("");
+		}
+	}
+
+	private boolean areMatched(HTTPSampler sampler, TestElement urlConfig) {
+		return urlConfig == null || (urlConfig.getProperty(HTTPSampler.DOMAIN) == null ||
+				urlConfig.getProperty(HTTPSampler.DOMAIN).equals("") ||
+				urlConfig.getProperty(HTTPSampler.DOMAIN).equals(sampler.getDomain())) &&
+				(urlConfig.getProperty(HTTPSampler.PATH) == null ||
+				urlConfig.getProperty(HTTPSampler.PATH).equals("") ||
+				urlConfig.getProperty(HTTPSampler.PATH).equals(sampler.getPath()));
+	}
+
+	private boolean checkIncludes(HTTPSampler sampler)
+	{
+		boolean ok = false;
+		Iterator iter = getIncludePatterns().iterator();
+		while (iter.hasNext())
+		{
+			String item = (String)iter.next();
+			try
+			{
+				Pattern pattern = compiler.compile(item);
+				StringBuffer url = new StringBuffer(sampler.getDomain());
+				url.append(":");
+				url.append(sampler.getPort());
+				url.append(sampler.getPath());
+				if(sampler.getQueryString().length() > 0)
+				{
+					url.append("?");
+					url.append(sampler.getQueryString());
+				}
+				ok = matcher.matches(url.toString(), pattern);
+			}
+			catch (MalformedPatternException e)
+			{
+				JMeterUtils.reportErrorToUser("Bad Regular expression: " + item);
+			}
+			if (ok)
+			{
+				break;
+			}
+		}
+		return ok;
+	}
+
+	private boolean checkExcludes(HTTPSampler sampler)
+	{
+		boolean ok = true;
+		Iterator iter = getExcludePatterns().iterator();
+		while (iter.hasNext())
+		{
+			String item = (String)iter.next();
+			try
+			{
+				Pattern pattern = compiler.compile(item);
+				StringBuffer url = new StringBuffer(sampler.getDomain());
+				url.append(":");
+				url.append(sampler.getPort());
+				url.append(sampler.getPath());
+				if(sampler.getQueryString().length() > 0)
+				{
+					url.append("?");
+					url.append(sampler.getQueryString());
+				}
+				ok = ok && !matcher.matches(url.toString(), pattern);
+			}
+			catch (MalformedPatternException e)
+			{
+				JMeterUtils.reportErrorToUser("Bad Regular expression: " + item);
+			}
+			if (!ok)
+			{
+				return ok;
+			}
+		}
+		return ok;
+	}
+
+	public static class Test extends TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testFiltering() throws Exception
+		{
+			ProxyControl control = new ProxyControl();
+			control.addIncludedPattern(".*\\.jsp");
+			control.addExcludedPattern(".*apache.org.*");
+			HTTPSampler sampler = new HTTPSampler();
+			sampler.setDomain("jakarta.org");
+			sampler.setPath("index.jsp");
+			assertTrue(control.filterUrl(sampler));
+			sampler.setDomain("www.apache.org");
+			assertTrue(!control.filterUrl(sampler));
+			sampler.setPath("header.gif");
+			sampler.setDomain("jakarta.org");
+			assertTrue(!control.filterUrl(sampler));
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Entries
new file mode 100644
index 0000000..00b9663
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/ProxyControlGui.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Repository
new file mode 100644
index 0000000..6303e10
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/ProxyControlGui.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/ProxyControlGui.java
new file mode 100644
index 0000000..575ca99
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/proxy/gui/ProxyControlGui.java
@@ -0,0 +1,485 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.proxy.gui;
+import java.awt.BorderLayout;
+import java.awt.FlowLayout;
+import java.awt.Font;
+import java.awt.GridBagConstraints;
+import java.awt.GridBagLayout;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.awt.event.KeyEvent;
+import java.awt.event.KeyListener;
+import java.util.Arrays;
+import java.util.Collection;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+
+import javax.swing.BorderFactory;
+import javax.swing.JButton;
+import javax.swing.JLabel;
+import javax.swing.JOptionPane;
+import javax.swing.JPanel;
+import javax.swing.JPopupMenu;
+import javax.swing.JScrollPane;
+import javax.swing.JTable;
+import javax.swing.JTextField;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.gui.JMeterGUIComponent;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.util.MenuFactory;
+import org.apache.jmeter.gui.util.PowerTableModel;
+import org.apache.jmeter.protocol.http.proxy.ProxyControl;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+/****************************************
+ * Title: Jakarta-JMeter Description: Copyright: Copyright (c) 2001 Company:
+ * Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:52 $
+ *@version   1.0
+ ***************************************/
+
+public class ProxyControlGui extends JPanel implements JMeterGUIComponent, ActionListener,
+		KeyListener,FocusListener
+{
+
+	NamePanel namePanel;
+	JTextField portField;
+
+	ProxyControl model;
+
+	JTable excludeTable;
+	PowerTableModel excludeModel;
+	JTable includeTable;
+	PowerTableModel includeModel;
+	JButton addExclude,deleteExclude,addInclude,deleteInclude;
+
+	JButton stop, start,restart;
+	private final static String STOP = "stop";
+	private final static String START = "start";
+	private final static String RESTART = "restart";
+	private final static String ADD_INCLUDE = "add_include";
+	private final static String ADD_EXCLUDE = "add_exclude";
+	private final static String DELETE_INCLUDE = "delete_include";
+	private final static String DELETE_EXCLUDE = "delete_exclude";
+	
+	private final static String INCLUDE_COL = JMeterUtils.getResString("patterns_to_include");
+	private final static String EXCLUDE_COL = JMeterUtils.getResString("patterns_to_exclude");
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public ProxyControlGui()
+	{
+		namePanel = new NamePanel();
+		setName(getStaticLabel());
+		init();
+	}
+
+	public JPopupMenu createPopupMenu()
+	{
+		return MenuFactory.getDefaultTimerMenu();
+	}
+
+	public TestElement createTestElement()
+	{
+		ProxyControl element = new ProxyControl();
+		element.setProperty(TestElement.NAME,getName());
+		element.setPort(Integer.parseInt(portField.getText()));
+		setIncludeListInProxyControl(element);
+		setExcludeListInProxyControl(element);
+		element.setProperty(TestElement.GUI_CLASS, this.getClass().getName());
+		element.setProperty(TestElement.TEST_CLASS, element.getClass().getName());
+		return element;
+	}
+
+	private void setIncludeListInProxyControl(ProxyControl element) {
+		List includeList = getDataList(includeModel,INCLUDE_COL);
+		element.setIncludeList(includeList);
+	}
+	
+	private void setExcludeListInProxyControl(ProxyControl element)
+	{
+		List excludeList = getDataList(excludeModel,EXCLUDE_COL);
+		element.setExcludeList(excludeList);
+	}
+
+	private List getDataList(PowerTableModel model,String colName) {
+		String[] dataArray = model.getData().getColumn(colName);
+		List list = new LinkedList();
+		for(int i = 0;i < dataArray.length;i++)
+		{
+			list.add(dataArray[i]);
+		}
+		return list;
+	}
+	
+	
+
+	public void setName(String name)
+	{
+		super.setName(name);
+		namePanel.setName(name);
+	}
+
+	public String getName()
+	{
+		return namePanel.getName();
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("proxy_title");
+	}
+
+	public Collection getMenuCategories()
+	{
+		return Arrays.asList(new String[]{MenuFactory.NON_TEST_ELEMENTS});
+	}
+
+	public void configure(TestElement element)
+	{
+		ProxyControl el = (ProxyControl)element;
+		setName(element.getProperty(TestElement.NAME).toString());
+		portField.setText(element.getProperty(ProxyControl.PORT).toString());
+		populateTable(includeModel,el.getIncludePatterns().iterator());
+		populateTable(excludeModel,el.getExcludePatterns().iterator());
+	}
+
+	private void populateTable(PowerTableModel model,Iterator iter) {
+		while(iter.hasNext())
+		{
+			model.addRow(new Object[]{iter.next()});
+		}
+	}
+	
+	public void focusLost(FocusEvent e)
+	{
+		try
+		{
+			((JTable)e.getSource()).getCellEditor().stopCellEditing();
+		}
+		catch(Exception err)
+		{
+		}
+	}
+	
+	public void focusGained(FocusEvent e)
+	{
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param action  !ToDo (Parameter description)
+	 ***************************************/
+	public void actionPerformed(ActionEvent action)
+	{
+		String command = action.getActionCommand();
+
+		if(command.equals(STOP))
+		{
+			model.stopProxy();
+			stop.setEnabled(false);
+			start.setEnabled(true);
+			model = null;
+		}
+		else if(command.equals(START))
+		{
+			model = (ProxyControl)createTestElement();
+			model.startProxy();
+			start.setEnabled(false);
+			stop.setEnabled(true);
+		}
+		else if(command.equals(RESTART))
+		{
+			model.stopProxy();
+			model = (ProxyControl)createTestElement();
+			model.startProxy();
+			restart.setEnabled(false);
+		}
+		else if(command.equals(this.ADD_EXCLUDE))
+		{
+			excludeModel.addNewRow();
+			excludeModel.fireTableDataChanged();
+			if(model != null)
+			enableRestart();
+		}
+		else if(command.equals(this.ADD_INCLUDE))
+		{
+			includeModel.addNewRow();
+			includeModel.fireTableDataChanged();
+			enableRestart();
+		}
+		else if(command.equals(this.DELETE_EXCLUDE))
+		{
+			excludeModel.removeRow(excludeTable.getSelectedRow());
+			excludeModel.fireTableDataChanged();
+			enableRestart();
+		}
+		else if(command.equals(this.DELETE_INCLUDE))
+		{
+			includeModel.removeRow(includeTable.getSelectedRow());
+			includeModel.fireTableDataChanged();
+			enableRestart();
+		}
+	}
+	
+	private void enableRestart()
+	{
+		if(model != null)
+		{
+			restart.setEnabled(true);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyPressed(KeyEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyTyped(KeyEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void keyReleased(KeyEvent e)
+	{
+		String fieldName = e.getComponent().getName();
+
+		if(fieldName.equals(ProxyControl.PORT))
+		{
+			try
+			{
+				Integer.parseInt(portField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(portField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+
+					// Right now, the cleanest thing to do is simply clear the
+					// entire text field. We do not want to set the text to
+					// the default because that would be confusing to the user.
+					// For example, the user typed "5t" instead of "56". After
+					// the user closes the error dialog, the text would change
+					// from "5t" to "1".  A litle confusing. If anything, it
+					// should display just "5". Future enhancement...
+					portField.setText("");
+				}
+			}
+		}
+	}
+
+	private void init()
+	{
+		this.setLayout(new GridBagLayout());
+		GridBagConstraints gbc = new GridBagConstraints();
+		gbc.anchor = gbc.WEST;
+		gbc.fill = gbc.BOTH;
+		gbc.gridheight = 1;
+		gbc.gridwidth = 1;
+		gbc.gridx = 0;
+		gbc.gridy = 0;
+		gbc.weightx = 1;
+		gbc.weighty = 1;
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		add(mainPanel,gbc.clone());
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new GridBagLayout());
+		//gbc.fill = gbc.NONE;
+		gbc.weighty = 0;
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("proxy_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel,gbc.clone());
+		gbc.gridy++;
+
+		// NAME
+		mainPanel.add(namePanel,gbc.clone());
+		gbc.gridy++;
+
+		mainPanel.add(createPortPanel(),gbc.clone());
+		gbc.gridy++;
+		gbc.fill = gbc.BOTH;
+		gbc.weighty = .5;
+		mainPanel.add(createIncludePanel(),gbc.clone());
+		gbc.gridy++;
+		mainPanel.add(createExcludePanel(),gbc.clone());
+		gbc.gridy++;
+		gbc.fill = gbc.NONE;
+		gbc.weighty = 0;
+		mainPanel.add(createControls(),gbc.clone());
+
+	}
+
+	private JPanel createControls()
+	{
+		JPanel panel = new JPanel();
+
+		start = new JButton(JMeterUtils.getResString("start"));
+		start.addActionListener(this);
+		start.setActionCommand(START);
+
+		stop = new JButton(JMeterUtils.getResString("stop"));
+		stop.addActionListener(this);
+		stop.setActionCommand(STOP);
+		
+		restart = new JButton(JMeterUtils.getResString("restart"));
+		restart.addActionListener(this);
+		restart.setActionCommand(RESTART);
+
+		panel.add(start);
+		panel.add(stop);
+		panel.add(restart);
+		start.setEnabled(true);
+		stop.setEnabled(false);
+		restart.setEnabled(false);
+
+		return panel;
+	}
+
+	private JPanel createPortPanel()
+	{
+		JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEFT));
+
+		panel.add(new JLabel(JMeterUtils.getResString("port")));
+
+		portField = new JTextField(8);
+		portField.setName(ProxyControl.PORT);
+		portField.addKeyListener(this);
+		portField.setText("8080");
+		panel.add(portField);
+		panel.revalidate();
+		return panel;
+	}
+
+	private JPanel createIncludePanel()
+	{
+		JPanel panel = new JPanel(new BorderLayout());
+		panel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),
+				JMeterUtils.getResString("patterns_to_include")));
+		includeTable = new JTable();
+		includeModel = new PowerTableModel(new String[]{INCLUDE_COL},
+					new Class[]{String.class});
+		JScrollPane scroller = new JScrollPane(includeTable);
+		scroller.setBackground(panel.getBackground());
+		includeTable.setModel(includeModel);
+		addInclude = new JButton(JMeterUtils.getResString("add"));
+		deleteInclude = new JButton(JMeterUtils.getResString("delete"));
+		addInclude.setActionCommand(ADD_INCLUDE);
+		deleteInclude.setActionCommand(DELETE_INCLUDE);
+		addInclude.addActionListener(this);
+		deleteInclude.addActionListener(this);
+		panel.add(scroller,BorderLayout.CENTER);
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.add(addInclude);
+		buttonPanel.add(deleteInclude);
+		panel.add(buttonPanel,BorderLayout.SOUTH);
+		includeTable.addFocusListener(this);
+		return panel;
+	}
+
+	private JPanel createExcludePanel()
+	{
+		JPanel panel = new JPanel(new BorderLayout());
+		panel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(),
+				JMeterUtils.getResString("patterns_to_exclude")));
+		excludeTable = new JTable();
+		excludeModel = new PowerTableModel(new String[]{EXCLUDE_COL},
+					new Class[]{String.class});
+		JScrollPane scroller = new JScrollPane(excludeTable);
+		scroller.setBackground(panel.getBackground());
+		excludeTable.setModel(excludeModel);
+		addExclude = new JButton(JMeterUtils.getResString("add"));
+		deleteExclude = new JButton(JMeterUtils.getResString("delete"));
+		addExclude.setActionCommand(ADD_EXCLUDE);
+		deleteExclude.setActionCommand(DELETE_EXCLUDE);
+		addExclude.addActionListener(this);
+		deleteExclude.addActionListener(this);
+		panel.add(scroller,BorderLayout.CENTER);
+		JPanel buttonPanel = new JPanel();
+		buttonPanel.add(addExclude);
+		buttonPanel.add(deleteExclude);
+		panel.add(buttonPanel,BorderLayout.SOUTH);
+		excludeTable.addFocusListener(this);
+		return panel;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Entries
new file mode 100644
index 0000000..1f4074e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Entries
@@ -0,0 +1,5 @@
+/HTTPSampler.java/1.4/Wed Aug 14 02:52:19 2002//Tv1_7_3
+/HTTPSamplerFull.java/1.2/Mon Aug 12 18:12:37 2002//Tv1_7_3
+/PostWriter.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/SoapSampler.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Repository
new file mode 100644
index 0000000..7bd2313
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler.java
new file mode 100644
index 0000000..1e7dc7b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler.java
@@ -0,0 +1,1121 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.sampler;
+import java.io.BufferedInputStream;
+import java.io.ByteArrayOutputStream;
+import java.io.FileNotFoundException;
+import java.io.IOException;
+import java.net.HttpURLConnection;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.net.URLConnection;
+import java.net.URLDecoder;
+import java.util.ArrayList;
+import java.util.Collection;
+import java.util.Iterator;
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.protocol.http.control.AuthManager;
+import org.apache.jmeter.protocol.http.control.CookieManager;
+import org.apache.jmeter.protocol.http.control.Header;
+import org.apache.jmeter.protocol.http.control.HeaderManager;
+import org.apache.jmeter.protocol.http.util.HTTPArgument;
+import org.apache.jmeter.samplers.AbstractSampler;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.util.SSLManager;
+import org.apache.log4j.Category;
+
+/****************************************
+ * A sampler which understands all the parts necessary to read statistics about
+ * HTTP requests, including cookies and authentication.
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/14 02:52:19 $
+ *@version   $Revision: 1.4 $
+ ***************************************/
+public class HTTPSampler extends AbstractSampler
+{
+	public final static String HEADERS = "headers";
+	public final static String HEADER = "header";
+
+	public final static String ARGUMENTS = "HTTPsampler.Arguments";
+	public final static String AUTH_MANAGER = "HTTPSampler.auth_manager";
+	public final static String COOKIE_MANAGER = "HTTPSampler.cookie_manager";
+	public final static String HEADER_MANAGER = "HTTPSampler.header_manager";
+	public final static String MIMETYPE = "HTTPSampler.mimetype";
+	public final static String DOMAIN = "HTTPSampler.domain";
+	public final static String PORT = "HTTPSampler.port";
+	public final static String METHOD = "HTTPSampler.method";
+	public final static String PATH = "HTTPSampler.path";
+	public final static String FOLLOW_REDIRECTS = "HTTPSampler.follow_redirects";
+	public final static String PROTOCOL = "HTTPSampler.protocol";
+	public final static String URL = "HTTPSampler.URL";
+	public final static String POST = "POST";
+	public final static String GET = "GET";
+	public final static String USE_KEEPALIVE = "HTTPSampler.use_keepalive";
+	public final static String FILE_NAME = "HTTPSampler.FILE_NAME";
+	public final static String FILE_FIELD = "HTTPSampler.FILE_FIELD";
+	public final static String FILE_DATA = "HTTPSampler.FILE_DATA";
+	public final static String FILE_MIMETYPE = "HTTPSampler.FILE_MIMETYPE";
+	public final static String CONTENT_TYPE = "HTTPSampler.CONTENT_TYPE";
+	public final static String NORMAL_FORM = "normal_form";
+	public final static String MULTIPART_FORM = "multipart_form";
+	protected static String encoding = "iso-8859-1";
+	
+	private static final PostWriter postWriter = new PostWriter();
+
+	public void setFileField(String value)
+	{
+		setProperty(FILE_FIELD,value);
+	}
+
+	public String getFileField()
+	{
+		return getPropertyAsString(FILE_FIELD);
+	}
+
+	public void setFilename(String value)
+	{
+		setProperty(FILE_NAME,value);
+	}
+
+	public String getFilename()
+	{
+		return getPropertyAsString(FILE_NAME);
+	}
+
+	public void setProtocol(String value)
+	{
+		setProperty(PROTOCOL,value);
+	}
+
+	public String getProtocol()
+	{
+		return getPropertyAsString(PROTOCOL);
+	}
+
+	/**
+	 *  Sets the Path attribute of the UrlConfig object
+	 *
+	 *@param  path  The new Path value
+	 */
+	public void setPath(String path)
+	{
+		if(GET.equals(getMethod()))
+		{
+			int index = path.indexOf("?");
+			if(index > -1)
+			{
+				setProperty(PATH,path.substring(0,index));
+				parseArguments(path.substring(index+1));
+			}
+			else
+			{
+				setProperty(PATH, path);
+			}
+		}
+		else
+		{
+			setProperty(PATH, path);
+		}	
+	}
+
+	public String getPath()
+	{
+		return getPropertyAsString(PATH);
+	}
+
+	public void setFollowRedirects(boolean value)
+	{
+		setProperty(FOLLOW_REDIRECTS, new Boolean(value));
+	}
+
+	public boolean getFollowRedirects()
+	{
+		return getPropertyAsBoolean(FOLLOW_REDIRECTS);
+	}
+
+	public void setMethod(String value)
+	{
+		setProperty(METHOD,value);
+	}
+
+	public String getMethod()
+	{
+		return getPropertyAsString(METHOD);
+	}
+
+	public void setUseKeepAlive(boolean value)
+	{
+		setProperty(USE_KEEPALIVE, new Boolean(value));
+	}
+
+	public boolean getUseKeepAlive()
+	{
+		return getPropertyAsBoolean(USE_KEEPALIVE);
+	}
+	
+	public void addEncodedArgument(String name,String value,String metaData)
+	{
+		Arguments args = getArguments();
+		HTTPArgument arg = new HTTPArgument(name,value,metaData,true);
+		if(arg.getName().equals(arg.getEncodedName()) && arg.getValue().equals(arg.getEncodedValue()))
+		{
+			arg.setAlwaysEncode(false);
+		}
+		args.addArgument(arg);
+	}
+	
+	public void addArgument(String name,String value)
+	{
+		Arguments args = this.getArguments();
+		args.addArgument(new HTTPArgument(name,value));
+	}
+
+	public void addArgument(String name,String value,String metadata)
+	{
+		Arguments args = this.getArguments();
+		args.addArgument(new HTTPArgument(name,value,metadata));
+	}
+
+	public void setPort(int value)
+	{
+		setProperty(PORT,new Integer(value));
+	}
+
+	public int getPort()
+	{
+		int port = getPropertyAsInt(PORT);
+		if(port == 0)
+		{
+			port = 80;
+			setPort(port);
+		}
+		return port;
+	}
+
+	public void setDomain(String value)
+	{
+		setProperty(DOMAIN,value);
+	}
+
+	public String getDomain()
+	{
+		return (String)getProperty(DOMAIN);
+	}
+
+	public void setArguments(Arguments value)
+	{
+		setProperty(ARGUMENTS,value);
+	}
+
+	public Arguments getArguments()
+	{
+		return (Arguments)getProperty(ARGUMENTS);
+	}
+
+	public void setAuthManager(AuthManager value)
+	{
+		setProperty(AUTH_MANAGER,value);
+	}
+
+	public AuthManager getAuthManager()
+	{
+		return (AuthManager)getProperty(AUTH_MANAGER);
+	}
+
+	public void setHeaderManager(HeaderManager value)
+	{
+		setProperty(HEADER_MANAGER,value);
+	}
+
+	public HeaderManager getHeaderManager()
+	{
+		return (HeaderManager)getProperty(HEADER_MANAGER);
+	}
+
+	public void setCookieManager(CookieManager value)
+	{
+		setProperty(COOKIE_MANAGER,value);
+	}
+
+	public CookieManager getCookieManager()
+	{
+		return (CookieManager)getProperty(COOKIE_MANAGER);
+	}
+
+	public void setMimetype(String value)
+	{
+		setProperty(MIMETYPE,value);
+	}
+
+	public String getMimetype()
+	{
+		return (String)getProperty(MIMETYPE);
+	}
+
+	protected void addCustomTestElement(TestElement element)
+	{
+		if(element instanceof Arguments)
+		{
+			if(getProperty(ARGUMENTS) != null)
+			{
+				((Arguments)getProperty(ARGUMENTS)).addTestElement(element);
+			}
+			else
+			{
+				setProperty(ARGUMENTS,element);
+			}
+		}
+		else if(element instanceof AuthManager)
+		{
+			if(getProperty(AUTH_MANAGER) != null)
+			{
+				((TestElement)getProperty(AUTH_MANAGER)).addTestElement(element);
+			}
+			else
+			{
+				setProperty(AUTH_MANAGER,element);
+			}
+		}
+		else if(element instanceof CookieManager)
+		{
+			if(getProperty(COOKIE_MANAGER) != null)
+			{
+				((TestElement)getProperty(COOKIE_MANAGER)).addTestElement(element);
+			}
+			else
+			{
+				setProperty(COOKIE_MANAGER,element);
+			}
+		}
+		else if(element instanceof HeaderManager)
+		{
+			if(getProperty(HEADER_MANAGER) != null)
+			{
+				((TestElement)getProperty(HEADER_MANAGER)).addTestElement(element);
+			}
+			else
+			{
+				setProperty(HEADER_MANAGER,element);
+			}
+		}
+		else if(element instanceof HTTPSampler ||
+				element instanceof ConfigTestElement)
+		{
+			this.mergeIn(element);
+		}
+	}
+
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final static String NON_HTTP_RESPONSE_CODE =
+			"Non HTTP response code";
+	/****************************************
+	 * !ToDo (Field description)
+	 ***************************************/
+	protected final static String NON_HTTP_RESPONSE_MESSAGE =
+			"Non HTTP response message";
+
+	private static Category catClass = Category.getInstance(
+			HTTPSampler.class.getName());
+
+	/****************************************
+	 * Holds a list of URLs sampled - so we're not flooding stdout with debug
+	 * information
+	 ***************************************/
+	private ArrayList m_sampledURLs = new ArrayList();
+
+	/****************************************
+	 * Constructor for the HTTPSampler object
+	 ***************************************/
+	public HTTPSampler() {
+		setArguments(new Arguments());
+	}
+	
+	public HTTPSampler(URL u)
+	{
+		setMethod(GET);
+		setDomain(u.getHost());
+		setPath(u.getPath());
+		setPort(u.getPort());
+		setProtocol(u.getProtocol());
+		parseArguments(u.getQuery());
+		setFollowRedirects(true);
+		setUseKeepAlive(true);
+		setArguments(new Arguments());
+	}
+
+	/****************************************
+	 * Do a sampling and return its results.
+	 *
+	 *@param e  <code>Entry</code> to be sampled
+	 *@return   results of the sampling
+	 *@see      org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample(org.apache.jmeter.samplers.Entry,
+	 *      boolean)
+	 ***************************************/
+	public SampleResult sample(Entry e)
+	{
+		return sample(false);
+	}
+
+	public SampleResult sample()
+	{
+		return sample(false);
+	}
+
+	/**
+	 *  !ToDoo (Method description)
+	 *
+	 *@return                            !ToDo (Return description)
+	 *@exception  MalformedURLException  !ToDo (Exception description)
+	 */
+	public URL getUrl() throws MalformedURLException
+	{
+		String pathAndQuery = null;
+
+		if (this.getMethod().equals(HTTPSampler.GET) && getQueryString().length() > 0)
+		{
+			if(this.getPath().indexOf("?") > -1)
+			{
+				pathAndQuery = this.getPath() + "&" + getQueryString();
+			}
+			else
+			{
+				pathAndQuery = this.getPath() + "?" + getQueryString();
+			}
+		}
+		else
+		{
+			pathAndQuery = this.getPath();
+		}
+
+		if (!pathAndQuery.startsWith("/"))
+		{
+			pathAndQuery = "/" + pathAndQuery;
+		}
+
+		if (getPort() == 0)
+		{
+			return new URL(getProtocol(), getDomain(), pathAndQuery);
+		}
+		else
+		{
+			return new URL(getProtocol(), (String) getProperty(HTTPSampler.DOMAIN), getPort(),
+					pathAndQuery);
+		}
+	}
+
+	/**
+	 *  Gets the QueryString attribute of the UrlConfig object
+	 *
+	 *@return    The QueryString value
+	 */
+	public String getQueryString()
+	{
+		StringBuffer buf = new StringBuffer();
+		Iterator iter = getArguments().iterator();
+		boolean first = true;
+		while (iter.hasNext())
+		{
+			HTTPArgument item = (HTTPArgument) iter.next();
+			if (!first)
+			{
+				buf.append("&");
+			}
+			else
+			{
+				first = false;
+			}
+			buf.append(item.getEncodedName());
+			if ( item.getMetaData() == null) {
+			    buf.append("=");
+			} 
+			else 
+			{
+				buf.append(item.getMetaData());
+			}
+			buf.append(item.getEncodedValue());
+		}
+		return buf.toString();
+	}
+
+	/****************************************
+	 * Send POST data from <code>Entry</code> to the open connection.
+	 *
+	 *@param connection       <code>URLConnection</code> of where POST data should
+	 *      be sent
+	 *@param url              contains the query string for POST
+	 *@exception IOException  if an I/O exception occurs
+	 ***************************************/
+	public void sendPostData(URLConnection connection)
+			 throws IOException
+	{
+		postWriter.sendPostData(connection,this);
+	}
+
+	/****************************************
+	 * Returns a <code>HttpURLConnection</code> with request method(GET or POST),
+	 * headers, cookies, authorization properly set for the URL request
+	 *
+	 *@param u                <code>URL</code> of the URL request
+	 *@param url              <code>UrlConfig</code> of the URL request
+	 *@return                 <code>HttpURLConnection</code> of the URL request
+	 *@exception IOException  if an I/O Exception occurs
+	 ***************************************/
+	protected HttpURLConnection setupConnection(URL u,String method) throws IOException
+	{
+		HttpURLConnection conn;
+		conn = (HttpURLConnection)u.openConnection();
+		// delegate SSL specific stuff to SSLManager so that compilation still works otherwise.
+		if("https".equals(u.getProtocol()))
+		{
+			SSLManager.getInstance().setContext(conn);
+		}
+		// [Jordi <jsalvata@atg.com>]
+		// I've not been able to find out why we're not using this
+		// feature of HttpURLConnections and we're doing redirection
+		// by hand instead. Everything would be so much simpler...
+		// [/Jordi]
+		// Mike: answer - it didn't work.  Maybe in JDK1.4 it works, but honestly,
+		// it doesn't seem like they're working on this.
+		// My longer term plan is to use Apache's home grown HTTP Client, or
+		// maybe even HTTPUnit's classes.  I'm sure both would be better than Sun's
+		conn.setFollowRedirects(false);
+		// a well-bahaved browser is supposed to send 'Connection: close'
+		// with the last request to an HTTP server. Instead, most browsers
+		// leave it to the server to close the connection after their
+		// timeout period. Leave it to the JMeter user to decide.
+		if (getUseKeepAlive())
+		{
+			conn.setRequestProperty("Connection", "keep-alive");
+		}
+		else
+		{
+			conn.setRequestProperty("Connection", "close");
+		}
+		conn.setRequestMethod(method);
+		setConnectionHeaders(conn, u, getHeaderManager());
+		setConnectionCookie(conn, u, getCookieManager());
+		setConnectionAuthorization(conn, u, getAuthManager());
+		return conn;
+	}
+	
+	     //Mark Walsh 2002-08-03, modified to also parse a parameter name value
+        //string, where string contains only the parameter name and no equal sign.
+	/**
+	 * This method allows a proxy server to send over the raw text from a browser's
+	 * output stream to be parsed and stored correctly into the UrlConfig object.
+	 */
+	public void 	parseArguments(String queryString)
+	{
+		String[] args = JMeterUtils.split(queryString, "&");
+		for (int i = 0; i < args.length; i++)
+		{
+			// need to handle four cases:   string contains name=value
+			//                              string contains name=
+			//                              string contains name 
+			//                              empty string
+			// find end of parameter name 
+			int endOfNameIndex=0; 
+			String metaData = ""; // records the existance of an equal sign
+			if (args[i].indexOf("=") != -1) 
+			{
+				endOfNameIndex = args[i].indexOf("="); // case of name=value, name=
+				metaData="=";
+		   } 
+		   else 
+		   {
+				metaData="";
+				if (args[i].length() > 0) 
+				{
+					endOfNameIndex = args[i].length() ; // case name
+				} 
+				else 
+				{
+					endOfNameIndex=0; //case where name value string is empty
+				}
+			}
+		    // parse name
+		    String name="";  // for empty string
+		    if (args[i].length() >0) {
+			name = args[i].substring(0,endOfNameIndex); //for non empty string
+		    }
+
+                    // parse value
+		    String value="";
+		    if ((endOfNameIndex+1) < args[i].length()) {
+			value = args[i].substring(endOfNameIndex+1,args[i].length());
+		    }
+
+                    if (name.length() > 0)
+			{
+				// In JDK 1.2, the decode() method has a throws clause:
+				// "throws Exception". In JDK 1.3, the method does not have
+				// a throws clause. So, in order to be JDK 1.2 compliant,
+				// we need to add a try/catch around the method call.
+				try
+				{
+					addEncodedArgument(name,value, metaData);
+				}
+				catch (Exception e)
+				{
+					System.out.println("UrlConfig:parseArguments(): Unable to parse argument=[" + value + "]");
+					System.out.println("UrlConfig:parseArguments(): queryString=[" + queryString + "]");
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * Reads the response from the URL connection
+	 *
+	 *@param conn             URL from which to read response
+	 *@return                 response in <code>String</code>
+	 *@exception IOException  if an I/O exception occurs
+	 ***************************************/
+	protected byte[] readResponse(HttpURLConnection conn) throws IOException
+	{
+		byte[] buffer = new byte[4096];
+		BufferedInputStream in = new BufferedInputStream(conn.getInputStream());
+		java.io.ByteArrayOutputStream w = new ByteArrayOutputStream();
+		int x = 0;
+		while((x = in.read(buffer)) > -1)
+		{
+			w.write(buffer, 0, x);
+		}
+		in.close();
+		w.flush();
+		w.close();
+		return w.toByteArray();
+	}
+
+	/****************************************
+	 * Gets the ResponseHeaders from the URLConnection, save them to the
+	 * SampleResults object.
+	 *
+	 *@param conn  connection from which the headers are read
+	 *@param res   where the headers read are stored
+	 ***************************************/
+	protected byte[] getResponseHeaders(HttpURLConnection conn, SampleResult res) throws IOException
+	{
+		StringBuffer headerBuf = new StringBuffer();
+		//PrintWriter headerBytes = new PrintWriter(output);
+
+		// either 'HTTP/1.0' or 'HTTP/1.1'
+		headerBuf.append(conn.getHeaderField(0).substring(0, 8));
+		headerBuf.append(" ");
+		headerBuf.append(conn.getResponseCode());
+		headerBuf.append(" ");
+		headerBuf.append(conn.getResponseMessage());
+		headerBuf.append("\n");
+		for(int i = 1; conn.getHeaderFieldKey(i) != null; i++)
+		{
+			if(!conn.getHeaderFieldKey(i).equalsIgnoreCase("transfer-encoding"))
+			{
+				headerBuf.append(conn.getHeaderFieldKey(i));
+				headerBuf.append(": ");
+				headerBuf.append(conn.getHeaderField(i));
+				headerBuf.append("\n");
+			}
+		}
+		headerBuf.append("\n");
+		return headerBuf.toString().getBytes("8859_1");
+	}
+
+	/*
+	 * Uploading a file - put in separate sampler
+	 * else if (contentType.equals(MULTIPART_FORM))
+	 * {
+	 *
+	 * }
+	 * }
+	 */
+	/****************************************
+	 * Extracts all the required cookies for that particular URL request and set
+	 * them in the <code>HttpURLConnection</code> passed in
+	 *
+	 *@param conn           <code>HttpUrlConnection</code> which represents the URL
+	 *      request
+	 *@param u              <code>URL</code> of the URL request
+	 *@param cookieManager  the <code>CookieManager</code> containing all the
+	 *      cookies for this <code>UrlConfig</code>
+	 ***************************************/
+	private void setConnectionCookie(HttpURLConnection conn, URL u, CookieManager cookieManager)
+	{
+		if(cookieManager != null)
+		{
+			String cookieHeader = cookieManager.getCookieHeaderForURL(u);
+			if(cookieHeader != null)
+			{
+				conn.setRequestProperty("Cookie", cookieHeader);
+			}
+		}
+	}
+
+	/****************************************
+	 * Extracts all the required headers for that particular URL request and set
+	 * them in the <code>HttpURLConnection</code> passed in
+	 *
+	 *@param conn           <code>HttpUrlConnection</code> which represents the URL
+	 *      request
+	 *@param u              <code>URL</code> of the URL request
+	 *@param headerManager  the <code>HeaderManager</code> containing all the
+	 *      cookies for this <code>UrlConfig</code>
+	 ***************************************/
+	private void setConnectionHeaders(HttpURLConnection conn, URL u, HeaderManager headerManager)
+	{
+		if(headerManager != null)
+		{
+			Collection headers = headerManager.getHeaders();
+			if(headers != null)
+			{
+				Iterator i = headers.iterator();
+				while(i.hasNext())
+				{
+					Header header = (Header)i.next();
+					conn.setRequestProperty(header.getName(), header.getValue());
+				}
+			}
+		}
+	}
+
+	/****************************************
+	 * Extracts all the required authorization for that particular URL request and
+	 * set them in the <code>HttpURLConnection</code> passed in
+	 *
+	 *@param conn         <code>HttpUrlConnection</code> which represents the URL
+	 *      request
+	 *@param u            <code>URL</code> of the URL request
+	 *@param authManager  the <code>AuthManager</code> containing all the cookies
+	 *      for this <code>UrlConfig</code>
+	 ***************************************/
+	private void setConnectionAuthorization(HttpURLConnection conn, URL u, AuthManager authManager)
+	{
+		if(authManager != null)
+		{
+			String authHeader = authManager.getAuthHeaderForURL(u);
+			if(authHeader != null)
+			{
+				conn.setRequestProperty("Authorization", authHeader);
+			}
+		}
+	}
+
+	/****************************************
+	 * Get the response code of the URL connection and divide it by 100 thus
+	 * returning 2(for 2xx response codes), 3(for 3xx reponse codes), etc
+	 *
+	 *@param conn  <code>HttpURLConnection</code> of URL request
+	 *@param res   where all results of sampling will be stored
+	 *@param time  time when the URL request was first started
+	 *@return      HTTP response code divided by 100
+	 ***************************************/
+	private int getErrorLevel(HttpURLConnection conn, SampleResult res, long time) throws IOException
+	{
+		int errorLevel = 200;
+		String message = null;
+		errorLevel = ((HttpURLConnection)conn).getResponseCode();
+		message = ((HttpURLConnection)conn).getResponseMessage();
+		res.setResponseCode(String.valueOf(errorLevel));
+		res.setResponseMessage(message);
+		return errorLevel;
+	}
+	
+	public void removeArguments()
+	{
+		setProperty(HTTPSampler.ARGUMENTS,new Arguments());
+	}
+
+	/****************************************
+	 * Follow redirection manually. Normally if the web server does a redirection
+	 * the intermediate page is not returned. Only the resultant page and the
+	 * response code for the page will be returned. With redirection turned off,
+	 * the response code of 3xx will be returned together with a "Location"
+	 * header-value pair to indicate that the "Location" value needs to be followed
+	 * to get the resultant page.
+	 *
+	 *@param conn                       connection
+	 *@param u
+	 *@param urlConfig                  !ToDo (Parameter description)
+	 *@exception MalformedURLException  if URL is not understood
+	 ***************************************/
+	private void redirectUrl(HttpURLConnection conn, URL u) throws MalformedURLException
+	{
+		String loc = conn.getHeaderField("Location");
+		if(loc != null)
+		{
+			if(loc.indexOf("http") == -1)
+			{
+				String tempURL = u.toString();
+				if(loc.startsWith("/"))
+				{
+					int ind = tempURL.indexOf("//") + 2;
+					loc = tempURL.substring(0, tempURL.indexOf("/", ind) + 1) + loc.substring(1);
+				}
+				else
+				{
+					loc = u.toString().substring(0,
+							u.toString().lastIndexOf('/') + 1) + loc;
+				}
+			}
+		}
+		URL newUrl = new URL(loc);
+		setMethod(GET);
+		setDomain(newUrl.getHost());
+		setPath(newUrl.getFile());
+		removeArguments();
+		parseArguments(newUrl.getQuery());
+	}
+
+	/****************************************
+	 * Samples <code>Entry</code> passed in and stores the result in <code>SampleResult</code>
+	 *
+	 *@param e           <code>Entry</code> to be sampled
+	 *@param redirected  whether we're processing a redirect
+	 *@return            results of the sampling
+	 ***************************************/
+	private SampleResult sample(boolean redirected)
+	{
+		catClass.debug("Start : sample2");
+		long time = 0L;
+		SampleResult res = new SampleResult();
+		if(redirected)
+		{
+			//url.removeArguments();
+			// [Jordi <jsalvata@atg.com>
+			// TO-DO: I need to investigate why this is necessary.
+			// ...although it won't do any harm...
+			// [/Jordi]
+			// Mike: arguments will be sent otherwise, which is not the way a browser
+			// behaves.  That's not to say it's perfect as is...
+		}
+		URL u = null;
+		HttpURLConnection conn = null;
+		try
+		{
+			u = getUrl();
+			res.setSampleLabel(getName());
+			// specify the data to the result.
+			res.setSamplerData(this);
+
+			/****************************************
+			 * END - cached logging hack
+			 ***************************************/
+
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("sample2 : sampling url - " + u);
+			}
+			conn = setupConnection(u,getMethod());
+			// [Jordi <jsalvata@atg.com>]
+			// There's some illegality here... see my comment in sendPostData.
+			// Also, we don't seem to be including the time needed to send the POST
+			// data in the count... should we? - mike: good point, I changed it
+			// TO-DO: Is there something I'm missing here?
+			// [/Jordi]			
+			time = System.currentTimeMillis();
+			if(!redirected &&
+			    getProperty(HTTPSampler.METHOD).equals(HTTPSampler.POST))
+			{
+				sendPostData(conn);
+			}
+			conn.connect();
+			saveConnectionCookies(conn, u, getCookieManager());
+
+			int errorLevel = 0;
+			try
+			{
+				errorLevel = getErrorLevel(conn, res, time);
+			}
+			catch(IOException e)
+			{
+				res.setSuccessful(false);
+				time = bundleResponseInResult(time,res,conn);
+				return res;
+			}				
+			if(errorLevel/100 == 2 || errorLevel == 304)
+			{
+				time = bundleResponseInResult(time, res, conn);
+			}
+			else if(errorLevel/100 == 3)
+			{
+				if(redirected || !getFollowRedirects())
+				{
+					time = bundleResponseInResult(time,res,conn);
+				}
+				else
+				{
+					redirectUrl(conn, u);
+	
+					time = System.currentTimeMillis() - time;
+					res = sample(true);
+					time += res.getTime();	
+				}
+			}
+			else
+			{
+				// Could not sample the URL								
+				time = bundleResponseInResult(time,res,conn);
+				res.setSuccessful(false);
+			}
+			res.setTime(time);
+			catClass.debug("End : sample2");
+			return res;
+		}
+		catch(IOException ex)
+		{
+			//ex.printStackTrace();
+			res.setResponseData(ex.toString().getBytes());
+			res.setResponseCode(NON_HTTP_RESPONSE_CODE);
+			res.setResponseMessage(NON_HTTP_RESPONSE_MESSAGE);
+			res.setTime(System.currentTimeMillis() - time);
+			res.setSuccessful(false);
+		}
+		finally
+		{
+			try
+			{
+				// the server can request that the connection be closed,
+				// but if we requested that the server close the connection
+				// the server should echo back our 'close' request.
+				// Otherwise, let the server disconnect the connection
+				// when its timout period is reached.
+				String connection  = conn.getHeaderField("Connection");
+				if (connection == null || connection.equalsIgnoreCase("close"))
+					conn.disconnect();
+			}
+			catch(Exception e){}
+		}
+		catClass.debug("End : sample2");
+		return res;
+	}
+
+	private long bundleResponseInResult(long time, SampleResult 
+			res, HttpURLConnection conn) throws IOException, 
+			FileNotFoundException {
+		byte[] ret = readResponse(conn);
+		byte[] head = getResponseHeaders(conn, res);
+		time = System.currentTimeMillis() - time;
+		byte[] complete = new byte[ret.length+head.length];
+		System.arraycopy(head,0,complete,0,head.length);
+		System.arraycopy(ret,0,complete,head.length,ret.length);
+		res.setResponseData(complete);
+		res.setSuccessful(true);
+		res.setDataType(res.TEXT);
+		return time;
+	}
+
+	/****************************************
+	 * From the <code>HttpURLConnection</code>, store all the "set-cookie" key-pair
+	 * values in the cookieManager of the <code>UrlConfig</code>
+	 *
+	 *@param conn           <code>HttpUrlConnection</code> which represents the URL
+	 *      request
+	 *@param u              <code>URL</code> of the URL request
+	 *@param cookieManager  the <code>CookieManager</code> containing all the
+	 *      cookies for this <code>UrlConfig</code>
+	 ***************************************/
+	private void saveConnectionCookies(HttpURLConnection conn, URL u, CookieManager cookieManager)
+	{
+		if(cookieManager != null)
+		{
+			for(int i = 1; conn.getHeaderFieldKey(i) != null; i++)
+			{
+				if(conn.getHeaderFieldKey(i).equalsIgnoreCase("set-cookie"))
+				{
+					cookieManager.addCookieFromHeader(conn.getHeaderField(i), u);
+				}
+			}
+		}
+	}
+	
+	public String toString()
+	{
+		try {
+			return this.getUrl().toString()+((POST.equals(getMethod())) ?
+					"\nQuery Data: "+getQueryString() : "");
+		} catch(MalformedURLException e) {
+			return "";
+		}
+	}
+	
+	public static class Test extends junit.framework.TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+
+		public void testMakingUrl() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config.addArgument("param1","value1");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1=value1",config.getUrl().toString());
+		}
+		
+		public void testMakingUrl2() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config.addArgument("param1","value1");
+			config.setPath("/index.html?p1=p2");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1=value1&p1=p2",config.getUrl().toString());
+		}
+		
+		public void testMakingUrl3() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.POST);
+			config.addArgument("param1","value1");
+			config.setPath("/index.html?p1=p2");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?p1=p2",config.getUrl().toString());
+		}
+
+	        // test cases for making Url, and exercise method addArgument(String name,String value,String metadata)
+		public void testMakingUrl4() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config.addArgument("param1","value1","=");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1=value1",config.getUrl().toString());
+		}
+
+		public void testMakingUrl5() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config.addArgument("param1","","=");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1=",config.getUrl().toString());
+		}
+
+		public void testMakingUrl6() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config.addArgument("param1","","");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1",config.getUrl().toString());
+		}
+
+	        // test cases for making Url, and exercise method parseArguments(String queryString)
+		public void testMakingUrl7() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config. parseArguments("param1=value1");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1=value1",config.getUrl().toString());
+		}
+
+		public void testMakingUrl8() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config. parseArguments("param1=");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1=",config.getUrl().toString());
+		}
+
+		public void testMakingUrl9() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config. parseArguments("param1");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html?param1",config.getUrl().toString());
+		}
+
+		public void testMakingUrl10() throws Exception
+		{
+			HTTPSampler config = new HTTPSampler();
+			config.setProtocol("http");
+			config.setMethod(HTTPSampler.GET);
+			config. parseArguments("");
+			config.setPath("/index.html");
+			config.setDomain("www.apache.org");
+			assertEquals("http://www.apache.org:80/index.html",config.getUrl().toString());
+		}
+
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFull.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFull.java
new file mode 100644
index 0000000..6b45869
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFull.java
@@ -0,0 +1,702 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.http.sampler;
+
+import org.apache.jmeter.protocol.http.sampler.HTTPSampler;
+import org.apache.jmeter.protocol.http.config.*;
+import org.apache.jmeter.samplers.*;
+
+import java.util.*;
+import java.net.*;
+
+import javax.swing.ImageIcon;
+
+import org.apache.log4j.*;
+
+import junit.framework.TestCase;
+import junit.framework.TestSuite;
+import junit.framework.TestResult;
+
+import java.io.*;
+import org.w3c.dom.*;
+import org.w3c.tidy.Tidy;
+import org.xml.sax.SAXException;
+
+/**
+ * A sampler that downloads downloadable components such as images, applets, etc.
+ * <p>
+ * For HTML files, this class will download binary files specified in the
+ * following ways (where <b>url</b> represents the binary file to be downloaded):
+ * <ul>
+ *	<li>&lt;img src=<b>url</b> ... &gt;
+ *	<li>&lt;applet code=<b>url</b> ... &gt;
+ *	<li>&lt;input type=image src=<b>url</b> ... &gt;
+ *	<li>&lt;body background=<b>url</b> ... &gt;
+ * </ul>
+ *
+ * Note that files that are duplicated within the enclosing document will
+ * only be downloaded once. Also, the processing does not take account of the
+ * following parameters:
+ * <ul>
+ *	<li>&lt;base href=<b>url</b>&gt;
+ *	<li>&lt; ... codebase=<b>url</b> ... &gt;
+ * </ul>
+ *
+ * The following parameters are not accounted for either (as the textbooks
+ * say, they are left as an exercise for the interested reader):
+ * <ul>
+ *	<li>&lt;applet ... codebase=<b>url</b> ... &gt;
+ *	<li>&lt;area href=<b>url</b> ... &gt;
+ *	<li>&lt;embed src=<b>url</b> ... &gt;
+ *	<li>&lt;embed codebase=<b>url</b> ... &gt;
+ *	<li>&lt;object codebase=<b>url</b> ... &gt;
+ *	<li>&lt;table background=<b>url</b> ... &gt;
+ *	<li>&lt;td background=<b>url</b> ... &gt;
+ *	<li>&lt;tr background=<b>url</b> ... &gt;
+ * </ul>
+ *
+ * Due to the recent refactoring of this class, these might not be as difficult
+ * as they once might have been.
+ * <p>
+ * Finally, this class does not process <b>Style Sheets</b> either.
+ *
+ * @author	Khor Soon Hin,
+ *		<a href="mailto:mramshaw@alumni.concordia.ca">Martin Ramshaw</a>
+ * @version	1.1
+ * @created	$Date: 2002/08/12 18:12:37 $
+ */
+public class HTTPSamplerFull extends HTTPSampler
+{
+	/** Used to store the Logger (used for debug and error messages). */
+	protected static Category catClass =
+		Category.getInstance(HTTPSamplerFull.class.getName());
+
+	/**
+	 * Used to store the UTF encoding name (which is version dependent).
+	 * @see #getUTFEncodingName
+	 */
+	protected static String utfEncodingName;
+
+	/**
+	 * Used to store the base URL. It should probably be updated to
+	 * respect the following parameter:
+	 * <pre>
+	 *     &lt;base href=<b>url</b>&gt;
+	 * </pre>
+	 */
+	protected URL baseUrl;
+
+	/**
+	 * This is the only Constructor.
+	 */
+	public HTTPSamplerFull()
+	{
+		super();
+		catClass.debug("Start : HTTPSamplerFull");
+		catClass.debug("End   : HTTPSamplerFull");
+	}
+
+	/**
+	 * Samples the <code>Entry</code> passed in and stores the result in
+	 * <code>SampleResult</code>. The original file (which is assumed to be
+	 * an HTML file) is parsed into a DOM tree and examined for embedded binary
+	 * files.
+	 * <p>
+	 * Note that files that are duplicated within the enclosing document will
+	 * only be downloaded once.
+	 *
+	 * @param entry	an entry to be sampled
+	 * @return	results of the sampling
+	 */
+	public SampleResult sample(Entry e)
+	{
+		// Sample the container page.
+		catClass.debug("Start : HTTPSamplerFull sample");
+		SampleResult res = super.sample(e);
+		if(catClass.isDebugEnabled())
+		{
+			catClass.debug("Main page loading time - " + res.getTime());
+		}
+
+		// Now parse the HTML page
+		String displayName = res.getSampleLabel();
+		Document html = null;
+		try
+		{
+			baseUrl = getUrl();
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("baseUrl - " + baseUrl.toString());
+			}
+			html = (Document)getDOM(new String(res.getResponseData()));
+		}
+		catch(SAXException se)
+		{
+			catClass.error("Error parsing document - " + se);
+			res.setResponseData(se.toString().getBytes());
+			res.setResponseCode(NON_HTTP_RESPONSE_CODE);
+			res.setResponseMessage(NON_HTTP_RESPONSE_MESSAGE);
+			res.setSuccessful(false);
+			return res;
+		}
+		catch(MalformedURLException mfue)
+		{
+			catClass.error("Error creating URL '" + displayName + "'");
+			catClass.error("MalformedURLException - " + mfue);
+			res.setResponseData(mfue.toString().getBytes());
+			res.setResponseCode(NON_HTTP_RESPONSE_CODE);
+			res.setResponseMessage(NON_HTTP_RESPONSE_MESSAGE);
+			res.setSuccessful(false);
+			return res;
+		}
+
+		// Now parse the DOM tree
+
+		// This is used to ignore duplicated binary files.
+		Set uniqueURLs = new HashSet();
+
+		// look for images
+		parseNodes(html, "img", false, "src", uniqueURLs, res);
+		// look for applets
+
+		// This will only work with an Applet .class file.
+		// Ideally, this should be upgraded to work with Objects (IE)
+		//	and archives (.jar and .zip) files as well.
+
+		parseNodes(html, "applet", false, "code", uniqueURLs, res);
+		// look for input tags with image types
+		parseNodes(html, "input", true, "src", uniqueURLs, res);
+		// look for background images
+		parseNodes(html, "body", false, "background", uniqueURLs, res);
+
+		// Okay, we're all done now
+		if(catClass.isDebugEnabled())
+		{
+			catClass.debug("Total time - " + res.getTime());
+		}
+		catClass.debug("End   : HTTPSamplerFull sample");
+		return res;
+	}
+
+	/**
+	 * Parse the DOM tree looking for the specified HTML source tags,
+	 * and download the appropriate binary files matching these tags.
+	 *
+	 * @param html		the HTML document to parse
+	 * @param htmlTag	the HTML tag to parse for
+	 * @param type		indicates that we require 'type=image'
+	 * @param srcTag	the HTML tag that indicates the source URL
+	 * @param uniques	used to ensure that binary files are only downloaded once
+	 * @param res		<code>SampleResult</code> to store sampling results
+	 */
+	protected void parseNodes(Document html, String htmlTag, boolean type, String srcTag,
+					Set uniques, SampleResult res)
+	{
+		catClass.debug("Start : HTTPSamplerFull parseNodes");
+		NodeList nodeList = html.getElementsByTagName(htmlTag);
+		boolean uniqueBinary;
+		SampleResult binRes = null;
+		for(int i = 0; i < nodeList.getLength(); i++)
+		{
+			uniqueBinary = true;
+			Node tempNode = nodeList.item(i);
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("'" + htmlTag + "' tag: " + tempNode);
+			}
+
+			// get the url of the Binary
+			NamedNodeMap nnm = tempNode.getAttributes();
+			Node namedItem = null;
+
+			if(type)
+			{
+				// if type is set, we need 'type=image'
+				namedItem = nnm.getNamedItem("type");
+				if(namedItem == null)
+				{
+					catClass.debug("namedItem 'null' - ignoring");
+					break;
+				}
+				String inputType = namedItem.getNodeValue();
+				if(catClass.isDebugEnabled())
+				{
+					catClass.debug("Input type - " + inputType);
+				}
+				if(inputType != null && inputType.equalsIgnoreCase("image"))
+				{
+					// then we need to download the binary
+				}
+				else
+				{
+					catClass.debug("type != 'image' - ignoring");
+					break;
+				}
+			}
+
+			binRes = new SampleResult();
+			namedItem = nnm.getNamedItem(srcTag);
+			if(namedItem == null)
+			{
+				continue;
+			}
+			String binUrlStr = namedItem.getNodeValue();
+			// set the baseUrl and binUrl so that if error occurs
+			// due to MalformedException then at least the values will be
+			// visible to the user to aid correction
+			binRes.setSampleLabel(baseUrl + "," + binUrlStr);
+			// download the binary
+			URL binUrl = null;
+			try
+			{
+				binUrl = new URL(baseUrl, binUrlStr);
+			}
+			catch(MalformedURLException mfue)
+			{
+				catClass.error("Error creating URL '" + baseUrl +
+						" , " + binUrlStr + "'");
+				catClass.error("MalformedURLException - " + mfue);
+				binRes.setResponseData(mfue.toString().getBytes());
+				binRes.setResponseCode(NON_HTTP_RESPONSE_CODE);
+				binRes.setResponseMessage(NON_HTTP_RESPONSE_MESSAGE);
+				binRes.setSuccessful(false);
+				res.addSubResult(binRes);
+				break;
+			}
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("Binary url - " + binUrlStr);
+				catClass.debug("Full Binary url - " + binUrl);
+			}
+			binRes.setSampleLabel(binUrl.toString());
+			uniqueBinary = uniques.add(binUrl.toString());
+			if (uniqueBinary)
+			{
+				// a browser should be smart enough to *not* download
+				//   a binary file that it already has in its cache.
+				try
+				{
+					loadBinary(binUrl, binRes);
+				}
+				catch(IOException ioe)
+				{
+					catClass.error("Error reading from URL - " + ioe);
+					binRes.setResponseData(ioe.toString().getBytes());
+					binRes.setResponseCode(NON_HTTP_RESPONSE_CODE);
+					binRes.setResponseMessage(NON_HTTP_RESPONSE_MESSAGE);
+					binRes.setSuccessful(false);
+				}
+			}
+			else
+			{
+				  if(catClass.isDebugEnabled())
+				  {
+				 	 catClass.debug("Skipping duplicate - " + binUrl);
+				  }
+				  break;
+			}
+			catClass.debug("Adding result");
+			// Note that this only happens for unique binaries
+			res.addSubResult(binRes);
+			res.setTime(res.getTime() + binRes.getTime());
+		}
+		catClass.debug("End   : HTTPSamplerFull parseNodes");
+	}
+
+	/**
+	 * Download the binary file from the given <code>URL</code>.
+	 *
+	 * @param url	<code>URL</code> from where binary is to be downloaded
+	 * @param res	<code>SampleResult</code> to store sampling results
+	 * @return	binary downloaded
+	 *
+	 * @throws IOException indicates a problem reading from the URL
+	 */
+	protected byte[] loadBinary(URL url, SampleResult res) throws IOException
+	{
+		catClass.debug("Start : loadBinary");
+		byte[] ret = new byte[0];
+		res.setSamplerData(new HTTPSampler(url));
+		HttpURLConnection conn = null;
+		try
+		{
+			conn = setupConnection(url, GET);
+			conn.connect();
+		}
+		catch(IOException ioe)
+		{
+			// don't do anything 'cos presumably the connection will return the
+			// correct http response codes
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("loadBinary : error in setupConnection " + ioe);
+			}
+			throw ioe;
+		 }
+
+		 try
+		 {
+			long time = System.currentTimeMillis();
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("loadBinary : start time - " + time);
+			}
+			int errorLevel = getErrorLevel(conn, res);
+			if (errorLevel == 2)
+			{
+				ret = readResponse(conn);
+				res.setSuccessful(true);
+				long endTime = System.currentTimeMillis();
+				if(catClass.isDebugEnabled())
+				{
+					catClass.debug("loadBinary : end   time - " + endTime);
+				}
+				res.setTime(endTime - time);
+			 }
+			 else
+			 {
+				res.setSuccessful(false);
+				int responseCode =
+					((HttpURLConnection)conn).getResponseCode();
+				String responseMsg =
+					((HttpURLConnection)conn).getResponseMessage();
+				catClass.error("loadBinary : failed code - " + responseCode);
+				catClass.error("loadBinary : failed message - " + responseMsg);
+			}
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("loadBinary : binary - " + ret[0]+ret[1]);
+				catClass.debug("loadBinary : loadTime - " + res.getTime());
+			}
+			catClass.debug("End   : loadBinary");
+			res.setResponseData(ret);
+			res.setDataType(SampleResult.BINARY);
+			return ret;
+		}
+		finally
+		{
+	 		try
+	 		{
+				// the server can request that the connection be closed,
+				// but if we requested that the server close the connection
+				// the server should echo back our 'close' request.
+				// Otherwise, let the server disconnect the connection
+				// when its timeout period is reached.
+				String connection  = conn.getHeaderField("Connection");
+				if (connection == null || connection.equalsIgnoreCase("close"))
+					conn.disconnect();
+		 	}
+	 		catch(Exception e){}
+		}
+	}
+
+	/**
+	 * Get the response code of the URL connection and divide it by 100 thus
+	 * returning 2 (for 2xx response codes), 3 (for 3xx reponse codes), etc.
+	 *
+	 * @param conn          <code>HttpURLConnection</code> of URL request
+	 * @param res           where all results of sampling will be stored
+	 * @return              HTTP response code divided by 100
+	 */
+	protected int getErrorLevel(HttpURLConnection conn, SampleResult res)
+	{
+		catClass.debug("Start : getErrorLevel");
+		int errorLevel = 2;
+		try
+		{
+			int responseCode =
+				((HttpURLConnection) conn).getResponseCode();
+			String responseMessage =
+				((HttpURLConnection) conn).getResponseMessage();
+			errorLevel = responseCode/100;
+			res.setResponseCode(String.valueOf(responseCode));
+			res.setResponseMessage(responseMessage);
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("getErrorLevel : responseCode - " +
+					responseCode);
+				catClass.debug("getErrorLevel : responseMessage - " +
+					responseMessage);
+			}
+		}
+		catch (Exception e2)
+		{
+			System.out.println("getErrorLevel : " + conn.getHeaderField(0));
+			System.out.println("getErrorLevel : " + conn.getHeaderFieldKey(0));
+			catClass.error("getErrorLevel : " +
+				"Error getting response code for HttpUrlConnection - " + e2);
+			res.setResponseData(e2.toString().getBytes());
+			res.setResponseCode(NON_HTTP_RESPONSE_CODE);
+			res.setResponseMessage(NON_HTTP_RESPONSE_MESSAGE);
+			res.setSuccessful(false);
+		}
+		catClass.debug("End   : getErrorLevel");
+		return errorLevel;
+	}
+
+	public Object clone()
+	{
+		HTTPSamplerFull newSampler = new HTTPSamplerFull();
+		this.configureClone(newSampler);
+		return newSampler;
+	}
+
+	/**
+	 * Returns <code>tidy</code> as HTML parser.
+	 *
+	 * @return	a <code>tidy</code> HTML parser
+	 */
+	protected static Tidy getParser()
+	{
+		catClass.debug("Start : getParser");
+		Tidy tidy = new Tidy();
+		tidy.setCharEncoding(org.w3c.tidy.Configuration.UTF8);
+		tidy.setQuiet(true);
+		tidy.setShowWarnings(false);
+		if(catClass.isDebugEnabled())
+		{
+			catClass.debug("getParser : tidy parser created - " + tidy);
+		}
+		catClass.debug("End   : getParser");
+		return tidy;
+	}
+
+	/**
+	 * Returns a node representing a whole xml given an xml document.
+	 *
+	 * @param text	an xml document
+	 * @return	a node representing a whole xml
+	 *
+	 * @throws SAXException indicates an error parsing the xml document
+	 */
+	protected static Node getDOM(String text) throws SAXException
+	{
+		catClass.debug("Start : getDOM");
+		try
+		{
+			Node node = getParser().parseDOM(new
+			  ByteArrayInputStream(text.getBytes(getUTFEncodingName())), null);
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("node : " + node);
+			}
+			catClass.debug("End   : getDOM");
+			return node;
+		 }
+		 catch(UnsupportedEncodingException e)
+		 {
+			catClass.error("getDOM1 : Unsupported encoding exception - " + e);
+			catClass.debug("End   : getDOM");
+			throw new RuntimeException("UTF-8 encoding failed - " + e);
+		}
+	}
+
+	/**
+	 * Returns the encoding type which is different for different jdks
+	 * even though they mean the same thing (for example, UTF8 or UTF-8).
+	 *
+	 * @return	either UTF8 or UTF-8 depending on the jdk version
+	 * @see		#utfEncodingName
+	 */
+	protected static String getUTFEncodingName()
+	{
+		catClass.debug("Start : getUTFEncodingName");
+		if (utfEncodingName == null)
+		{
+			String versionNum = System.getProperty( "java.version" );
+			if(catClass.isDebugEnabled())
+			{
+				catClass.debug("getUTFEncodingName : version = " + versionNum);
+			}
+			if (versionNum.startsWith( "1.1" ))
+			{
+				utfEncodingName = "UTF8";
+			}
+			else
+			{
+				utfEncodingName = "UTF-8";
+			}
+		}
+		if(catClass.isDebugEnabled())
+		{
+			catClass.debug("getUTFEncodingName : Encoding = " + utfEncodingName);
+		}
+		catClass.debug("End   : getUTFEncodingName");
+		return utfEncodingName;
+	}
+
+public static class Test extends TestCase
+{
+	private HTTPSamplerFull hsf;
+
+	private static Category catClass =
+		Category.getInstance(Test.class.getName());
+
+	public Test(String name)
+	{
+		super(name);
+	}
+
+	protected void setUp()
+	{
+		catClass.debug("Start : setUp1");
+		hsf = new HTTPSamplerFull();
+		hsf.setMethod(HTTPSampler.GET);
+		hsf.setProtocol("file");
+	//      urlConfigFull.setPort(8080);
+	//      urlConfigFull.setDomain("jakarta.apache.org");
+		hsf.setPath("HTTPSamplerFullTestFile.txt");
+		catClass.debug("End   : setUp1");
+	 }
+
+	 public void testGetUTFEncodingName()
+	 {
+		catClass.debug("Start : testGetUTFEncodingName");
+		String javaVersion = System.getProperty("java.version");
+		System.setProperty("java.version", "1.1");
+		assertEquals("UTF8", HTTPSamplerFull.getUTFEncodingName());
+		// need to clear utfEncodingName variable first 'cos
+		// getUTFEncodingName checks to see if it's null
+		utfEncodingName = null;
+		System.setProperty("java.version", "1.2");
+		assertEquals("UTF-8", HTTPSamplerFull.getUTFEncodingName());
+		System.setProperty("java.version", javaVersion);
+		catClass.debug("End   : testGetUTFEncodingName");
+	 }
+
+	 public void testGetUrlConfig()
+	 {
+		catClass.debug("Start : testGetUrlConfig");
+		assertEquals(HTTPSampler.GET, hsf.getMethod());
+		assertEquals("file", hsf.getProtocol());
+	//      assertEquals(8080, urlConfig.getPort());
+	//      assertEquals("jakarta.apache.org", urlConfig.getDomain());
+		assertEquals("HTTPSamplerFullTestFile.txt", hsf.getPath());
+		catClass.debug("End   : testGetUrlConfig");
+	 }
+
+	 // Can't think of a self-contained way to test this 'cos it requires
+	 // http server.  Tried to use file:// but HTTPSampler's sample
+	 // specifically requires http.
+	 public void testSampleMain()
+	 {
+		catClass.debug("Start : testSampleMain");
+		// !ToDo : Have to wait till the day SampleResult is extended to
+		// store results of all downloaded stuff e.g. images, applets etc
+		String fileInput = "<html>\n\n" +
+			"<title>\n" +
+			"  A simple applet\n" +
+			"</title>\n" +
+			"<body background=\"back.jpg\" vlink=\"#dd0000\" link=\"#0000ff\">\n" +
+			"<center>\n" +
+			"<h2>   A simple applet\n" +
+			"</h2>\n" +
+			"<br>\n" +
+			"<br>\n" +
+			"<table>\n" +
+			"<td width = 20>\n" +
+			"<td width = 500 align = left>\n" +
+			"<img src=\"/tomcat.gif\">\n" +
+			"<img src=\"/tomcat.gif\">\n" +
+			"<a href=\"NervousText.java\"> Read my code <a>\n" +
+			"<p><applet code=NervousText.class width=400 height=200>\n" +
+			"</applet>\n" +
+			"<p><applet code=NervousText.class width=400 height=200>\n" +
+			"</applet>\n" +
+			"</table>\n" +
+			"<form>\n" +
+			"  <input type=\"image\" src=\"/tomcat-power.gif\">\n" +
+			"</form>\n" +
+			"<form>\n" +
+			"  <input type=\"image\" src=\"/tomcat-power.gif\">\n" +
+			"</form>\n" +
+			"</body>\n" +
+			"</html>\n";
+		byte[] bytes = fileInput.getBytes();
+		try
+		{
+			FileOutputStream fos =
+				new FileOutputStream("HTTPSamplerFullTestFile.txt");
+			fos.write(bytes);
+			fos.close();
+		}
+		catch(IOException ioe)
+		{
+			fail("Cannot create HTTPSamplerFullTestFile.txt in current directory " +
+				"for testing - " + ioe);
+		}
+		// !ToDo
+		// hsf.sample(entry);
+		assertNull("Cannot think of way to test sample", null);
+		catClass.debug("End   : testSampleMain");
+	}
+
+	protected void tearDown()
+	{
+		catClass.debug("Start : tearDown");
+		hsf = null;
+		catClass.debug("End   : tearDown");
+	}
+
+	public static void main(String[] args)
+	{
+		BasicConfigurator.configure();
+		TestSuite suite = new TestSuite(Test.class);
+		junit.textui.TestRunner runner = new junit.textui.TestRunner();
+		runner.run(suite);
+	}
+}
+}
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/PostWriter.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/PostWriter.java
new file mode 100644
index 0000000..11ad68e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/PostWriter.java
@@ -0,0 +1,234 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.http.sampler;
+
+import java.io.*;
+import java.net.*;
+import java.util.*;
+
+import org.apache.jmeter.protocol.http.config.MultipartUrlConfig;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.config.Argument;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class PostWriter
+{
+
+	protected final static String BOUNDARY = "---------------------------7d159c1302d0y0";
+	protected final static byte[] CRLF = {0x0d,0x0A};
+	protected static int fudge = -20;
+	protected static String encoding = "iso-8859-1";
+
+
+	/************************************************************
+	 *  Send POST data from Entry to the open connection.
+	 *
+	 *@param  connection       Description of Parameter
+	 *@param  url              !ToDo (Parameter description)
+	 *@exception  IOException  Description of Exception
+	 ***********************************************************/
+	public void sendPostData(URLConnection connection, HTTPSampler sampler)
+			 throws IOException
+	{
+		((HttpURLConnection)connection).setRequestMethod("POST");
+
+		// If filename was specified then send the post using multipart syntax
+		String filename = sampler.getFilename();
+		if ((filename != null) && (filename.trim().length() > 0))
+		{
+			connection.setRequestProperty("Content-type", "multipart/form-data; boundary=" + BOUNDARY);
+			connection.setDoOutput(true);
+			connection.setDoInput(true);
+			OutputStream out = connection.getOutputStream();//new FileOutputStream("c:\\data\\experiment.txt");//new ByteArrayOutputStream();//
+			writeln(out,"--"+BOUNDARY);
+			Iterator args = sampler.getArguments().iterator();
+			while (args.hasNext())
+			{
+				Argument arg = (Argument)args.next();
+				writeFormMultipartStyle(out, arg.getName(), (String)arg.getValue());
+				writeln(out,"--" + BOUNDARY);
+			}
+			writeFileToURL(out, filename, sampler.getFileField(),
+					 getFileStream(filename),sampler.getMimetype());
+
+			writeln(out,"--" + BOUNDARY+"--");
+			out.flush();
+			out.close();
+		}
+
+		// No filename specified, so send the post using normal syntax
+		else
+		{
+			String postData = sampler.getQueryString();
+			connection.setRequestProperty("Content-length", "" + postData.length());
+			connection.setRequestProperty("Content-type", "application/x-www-form-urlencoded");
+			connection.setDoOutput(true);
+
+			PrintWriter out = new PrintWriter(connection.getOutputStream());
+			out.print(postData);
+			out.close();
+		}
+	}
+	
+	private InputStream getFileStream(String filename) throws IOException
+	{
+		return new BufferedInputStream(new FileInputStream(filename));
+	}
+
+	private String getContentLength(MultipartUrlConfig config)
+	{
+		long size = 0;
+		size += BOUNDARY.length()+2;
+		Iterator iter = config.getArguments().iterator();
+		while (iter.hasNext())
+		{
+			Argument item = (Argument)iter.next();
+			size += item.getName().length() + item.getValue().toString().length();
+			size += CRLF.length * 4;
+			size += BOUNDARY.length()+2;
+			size += 39;
+		}
+		size += new File(config.getFilename()).length();
+		size += CRLF.length * 5;
+		size += BOUNDARY.length()+2;
+		size += encode(config.getFileFieldName()).length();
+		size += encode(config.getFilename()).length();
+		size += config.getMimeType().length();
+		size += 66;
+		size += 2+(CRLF.length*1);
+		return Long.toString(size);
+	}
+
+	/************************************************************
+	 *  Writes out the contents of a file in correct multipart format.
+	 *
+	 *@param  o                Description of Parameter
+	 *@param  filename         Description of Parameter
+	 *@param  fieldname        Description of Parameter
+	 *@param  in               Description of Parameter
+	 *@param  mimetype         Description of Parameter
+	 *@exception  IOException  Description of Exception
+	 ***********************************************************/
+	private void writeFileToURL(OutputStream out, String filename, String fieldname,
+			InputStream in, String mimetype) throws IOException
+	{
+		writeln(out,"Content-Disposition: form-data; name=\"" + encode(fieldname) + "\"; filename=\"" +
+				encode(filename) + "\"");
+		writeln(out,"Content-Type: " + mimetype);
+		out.write(CRLF);
+
+		byte[] buf = new byte[1024 * 100];
+		//100k
+		int read;
+		while ((read = in.read(buf)) > 0)
+		{
+			out.write(buf, 0, read);
+		}
+		out.write(CRLF);
+		in.close();
+	}
+
+		/************************************************************
+	 *  Writes form data in multipart format.
+	 *
+	 *@param  out    Description of Parameter
+	 *@param  name   Description of Parameter
+	 *@param  value  Description of Parameter
+	 ***********************************************************/
+	private void writeFormMultipartStyle(OutputStream out, String name, String value) throws IOException
+	{
+		writeln(out,"Content-Disposition: form-data; name=\"" + name + "\"");
+		out.write(CRLF);
+		writeln(out,value);
+	}
+
+	private String encode(String value)
+	{
+		StringBuffer newValue = new StringBuffer();
+		char[] chars = value.toCharArray();
+		for(int i = 0;i < chars.length;i++)
+		{
+			if(chars[i] == '\\')
+			{
+				newValue.append("\\\\");
+			}
+			else
+			{
+				newValue.append(chars[i]);
+			}
+		}
+		return newValue.toString();
+	}
+
+	private void write(OutputStream out,String value) throws UnsupportedEncodingException,IOException
+	{
+		out.write(value.getBytes(encoding));
+	}
+
+	private void writeln(OutputStream out,String value) throws UnsupportedEncodingException, IOException
+	{
+		out.write(value.getBytes(encoding));
+		out.write(CRLF);
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java
new file mode 100644
index 0000000..deb7a89
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java
@@ -0,0 +1,48 @@
+package org.apache.jmeter.protocol.http.sampler;
+
+import java.io.IOException;
+import java.io.PrintWriter;
+import java.net.HttpURLConnection;
+import java.net.URLConnection;
+
+
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class SoapSampler extends HTTPSampler 
+{
+	public static final String XML_DATA = "HTTPSamper.xml_data";
+	
+	public void setXmlData(String data)
+	{
+		setProperty(XML_DATA,data);
+	}
+	
+	public String getXmlData()
+	{
+		return getPropertyAsString(XML_DATA);
+	}
+
+		/****************************************
+	 * Send POST data from <code>Entry</code> to the open connection.
+	 *
+	 *@param connection       <code>URLConnection</code> of where POST data should
+	 *      be sent
+	 *@param url              contains the query string for POST
+	 *@exception IOException  if an I/O exception occurs
+	 ***************************************/
+	public void sendPostData(URLConnection connection)
+			 throws IOException
+	{
+		((HttpURLConnection)connection).setRequestMethod("POST");
+		connection.setRequestProperty("Content-length", "" + getXmlData().length());
+		connection.setRequestProperty("Content-type", "text/xml");
+		connection.setDoOutput(true);
+		PrintWriter out = new PrintWriter(connection.getOutputStream());
+		out.print(getXmlData());
+		out.close();
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/Base64Encoder.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/Base64Encoder.java
new file mode 100644
index 0000000..b96cef5
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/Base64Encoder.java
@@ -0,0 +1,157 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.http.util;
+
+/************************************************************
+ *  This class provides an implementation of Base64 encoding without relying on
+ *  the the sun.* packages.
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:52 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+
+public class Base64Encoder
+{
+
+	private final static char[] pem_array = {65, 66, 67, 68, 69, 70, 71, 72, 73, 74,
+			75, 76, 77, 78, 79, 80, 81, 82, 83, 84,
+			85, 86, 87, 88, 89, 90, 97, 98, 99, 100,
+			101, 102, 103, 104, 105, 106, 107, 108,
+			109, 110, 111, 112, 113, 114, 115, 116,
+			117, 118, 119, 120, 121, 122, 48, 49, 50,
+			51, 52, 53, 54, 55, 56, 57, 43, 47};
+	private final static char eq = 61;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public Base64Encoder()
+	{
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  s  !ToDo (Parameter description)
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public final static String encode(String s)
+	{
+		return encode(s.getBytes());
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  bs  !ToDo (Parameter description)
+	 *@return     !ToDo (Return description)
+	 ***********************************************************/
+	public final static String encode(byte[] bs)
+	{
+		StringBuffer out = new StringBuffer("");
+		int bl = bs.length;
+		for (int i = 0; i < bl; i += 3)
+		{
+			out.append(encodeAtom(bs, i, (bl - i)));
+		}
+		return out.toString();
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  b     !ToDo (Parameter description)
+	 *@param  strt  !ToDo (Parameter description)
+	 *@param  left  !ToDo (Parameter description)
+	 *@return       !ToDo (Return description)
+	 ***********************************************************/
+	public final static String encodeAtom(byte[] b, int strt, int left)
+	{
+		StringBuffer out = new StringBuffer("");
+		if (left == 1)
+		{
+			byte b1 = b[strt];
+			int k = 0;
+			out.append(String.valueOf(pem_array[b1 >>> 2 & 63]));
+			out.append(String.valueOf(pem_array[(b1 << 4 & 48) + (k >>> 4 & 15)]));
+			out.append(String.valueOf(eq));
+			out.append(String.valueOf(eq));
+			return out.toString();
+		}
+		if (left == 2)
+		{
+			byte b2 = b[strt];
+			byte b4 = b[strt + 1];
+			int l = 0;
+			out.append(String.valueOf(pem_array[b2 >>> 2 & 63]));
+			out.append(String.valueOf(pem_array[(b2 << 4 & 48) + (b4 >>> 4 & 15)]));
+			out.append(String.valueOf(pem_array[(b4 << 2 & 60) + (l >>> 6 & 3)]));
+			out.append(String.valueOf(eq));
+			return out.toString();
+		}
+		byte b3 = b[strt];
+		byte b5 = b[strt + 1];
+		byte b6 = b[strt + 2];
+		out.append(String.valueOf(pem_array[b3 >>> 2 & 63]));
+		out.append(String.valueOf(pem_array[(b3 << 4 & 48) + (b5 >>> 4 & 15)]));
+		out.append(String.valueOf(pem_array[(b5 << 2 & 60) + (b6 >>> 6 & 3)]));
+		out.append(String.valueOf(pem_array[b6 & 63]));
+		return out.toString();
+	}
+
+}
+
+
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Entries b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Entries
new file mode 100644
index 0000000..fb93df0
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Entries
@@ -0,0 +1,3 @@
+/Base64Encoder.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+/HTTPArgument.java/1.4/Wed Aug 14 02:52:19 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Repository b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Repository
new file mode 100644
index 0000000..d4a51a9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Root b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Tag b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/HTTPArgument.java b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/HTTPArgument.java
new file mode 100644
index 0000000..897975e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/http/org/apache/jmeter/protocol/http/util/HTTPArgument.java
@@ -0,0 +1,241 @@
+package org.apache.jmeter.protocol.http.util;
+
+import junit.framework.TestCase;
+import java.net.URLEncoder;
+import java.net.URLDecoder;
+
+import java.util.List;
+import java.util.LinkedList;
+import java.util.Iterator;
+import java.io.Serializable;
+
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+
+/**
+ * @author Administrator
+ *
+ * To change this generated comment edit the template variable "typecomment":
+ * Window>Preferences>Java>Templates.
+ */
+public class HTTPArgument extends Argument  implements Serializable {
+	
+	private static final String ENCODED_NAME = "HTTPArgument.encoded_name";
+	private static final String ENCODED_VALUE = "HTTPArgument.encoded_value";
+	private static final String ALWAYS_ENCODE = "HTTPArgument.always_encode";
+	
+	
+	/****************************************
+	 * Constructor for the Argument object
+	 *
+	 *@param name   Description of Parameter
+	 *@param value  Description of Parameter
+	 *@param metadata Description of Parameter
+	 ***************************************/
+	public HTTPArgument(String name, Object value, Object metadata)
+	{
+		this(name,value,false);
+		this.setMetaData(metadata);
+	}
+	
+	private void encodeName(String name)
+	{
+		if(getAlwaysEncode())
+		{
+			name = URLEncoder.encode(name);
+		}
+		setProperty(ENCODED_NAME,name);
+	}
+	
+	public void setAlwaysEncode(boolean ae)
+	{
+		setProperty(ALWAYS_ENCODE,new Boolean(ae));
+	}
+	
+	public boolean getAlwaysEncode()
+	{
+		return getPropertyAsBoolean(ALWAYS_ENCODE);
+	}
+	
+	private void encodeValue(Object value)
+	{
+		if(value != null)
+		{
+			if(getAlwaysEncode())
+			{
+				value = URLEncoder.encode(value.toString());
+			}
+			setProperty(ENCODED_VALUE,value.toString());
+		}
+	}
+	/****************************************
+	 * Constructor for the Argument object
+	 *
+	 *@param name   Description of Parameter
+	 *@param value  Description of Parameter
+	 ***************************************/
+	public HTTPArgument(String name, Object value)
+	{
+		this(name,value,false);
+	}
+	
+	public HTTPArgument(String name, Object value, boolean alreadyEncoded)
+	{
+		setAlwaysEncode(true);
+		if(alreadyEncoded)
+		{
+			try
+			{
+				setName(URLDecoder.decode(name));
+			}
+			catch(IllegalArgumentException e)
+			{
+				setName(name);
+			}
+			try
+			{
+				setValue(URLDecoder.decode(value.toString()));
+			}
+			catch(IllegalArgumentException e)
+			{
+				setValue(value.toString());
+			}
+			setProperty(ENCODED_NAME,name);
+			setProperty(ENCODED_VALUE,value.toString());
+		}
+		else
+		{
+			setName(name);
+			setValue(value);
+		}
+	}
+	
+	public void setProperty(String key,Object value)
+	{
+		if(value == null || !value.equals(getProperty(key)))
+		{
+			if(Argument.NAME.equals(key))
+			{
+				if(value == null)
+				{
+					encodeName("");
+				}
+				else
+				{
+					encodeName(value.toString());
+				}
+			}
+			else if(Argument.VALUE.equals(key))
+			{
+				encodeValue(value);
+			}
+			super.setProperty(key,value);
+		}
+	}
+	
+	public HTTPArgument(String name,Object value,Object metaData,boolean alreadyEncoded)
+	{
+		this(name,value,alreadyEncoded);
+		setMetaData(metaData);
+	}
+	
+	public HTTPArgument(Argument arg)
+	{
+		this(arg.getName(),arg.getValue(),arg.getMetaData());
+	}
+
+	/****************************************
+	 * Constructor for the Argument object
+	 ***************************************/
+	public HTTPArgument() { }
+	
+	/****************************************
+	 * Sets the Name attribute of the Argument object
+	 *
+	 *@param newName  The new Name value
+	 ***************************************/
+	public void setName(String newName)
+	{
+		if(newName == null || !newName.equals(getName()))
+		{
+			super.setName(newName);
+		}
+	}
+	
+	public String getEncodedValue()
+	{
+		return getPropertyAsString(ENCODED_VALUE);
+	}
+	
+	public String getEncodedName()
+	{
+		return getPropertyAsString(ENCODED_NAME);
+	}
+
+	/****************************************
+	 * Sets the Value attribute of the Argument object
+	 *
+	 *@param newValue  The new Value value
+	 ***************************************/
+	public void setValue(Object newValue)
+	{
+		if(newValue == null || !newValue.equals(getValue()))
+		{
+			super.setValue(newValue);
+		}
+	}
+	
+	public static void convertArgumentsToHTTP(Arguments args)
+	{
+		List newArguments = new LinkedList();
+		Iterator iter = args.getArguments().iterator();
+		while(iter.hasNext())
+		{
+			Argument arg = (Argument)iter.next();
+			if(!(arg instanceof HTTPArgument))
+			{
+				newArguments.add(new HTTPArgument(arg));
+			}
+			else
+			{
+				newArguments.add(arg);
+			}
+		}
+		args.removeAllArguments();
+		args.setArguments(newArguments);
+	}
+	
+	public static class Test extends TestCase
+	{
+		public Test(String name)
+		{
+			super(name);
+		}
+		
+		public void testCloning() throws Exception
+		{
+			HTTPArgument arg = new HTTPArgument("name.?","value_ here");
+			assertEquals("name.%3F",arg.getEncodedName());
+			assertEquals("value_+here",arg.getEncodedValue());
+			HTTPArgument clone = (HTTPArgument)arg.clone();
+			assertEquals("name.%3F",clone.getEncodedName());
+			assertEquals("value_+here",clone.getEncodedValue());
+		}
+		
+		public void testConversion() throws Exception
+		{
+			Arguments args = new Arguments();
+			args.addArgument("name.?","value_ here");
+			args.addArgument("name$of property","value_.+");
+			HTTPArgument.convertArgumentsToHTTP(args);
+			List argList = args.getArguments();
+			HTTPArgument httpArg = (HTTPArgument)argList.get(0);
+			assertEquals("name.%3F",httpArg.getEncodedName());
+			assertEquals("value_+here",httpArg.getEncodedValue());
+			httpArg = (HTTPArgument)argList.get(1);
+			assertEquals("name%24of+property",httpArg.getEncodedName());
+			assertEquals("value_.%2B",httpArg.getEncodedValue());				
+		}
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/java/CVS/Entries b/jakarta-jmeter/src/protocol/java/CVS/Entries
new file mode 100644
index 0000000..381094d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/CVS/Entries
@@ -0,0 +1 @@
+D/org////
diff --git a/jakarta-jmeter/src/protocol/java/CVS/Repository b/jakarta-jmeter/src/protocol/java/CVS/Repository
new file mode 100644
index 0000000..ad99d64
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java
diff --git a/jakarta-jmeter/src/protocol/java/CVS/Root b/jakarta-jmeter/src/protocol/java/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/CVS/Tag b/jakarta-jmeter/src/protocol/java/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/protocol/java/org/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/CVS/Repository
new file mode 100644
index 0000000..a535a22
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org
diff --git a/jakarta-jmeter/src/protocol/java/org/CVS/Root b/jakarta-jmeter/src/protocol/java/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Repository
new file mode 100644
index 0000000..f725d33
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..6961abb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Entries
@@ -0,0 +1 @@
+D/protocol////
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..cf82d95
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Entries
new file mode 100644
index 0000000..de7ed0d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Entries
@@ -0,0 +1 @@
+D/java////
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Repository
new file mode 100644
index 0000000..af1d8f6
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Entries
new file mode 100644
index 0000000..1e024a5
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Entries
@@ -0,0 +1,4 @@
+D/config////
+D/control////
+D/sampler////
+D/test////
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Repository
new file mode 100644
index 0000000..437e70c
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Entries
new file mode 100644
index 0000000..f4cf798
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Entries
@@ -0,0 +1,2 @@
+/JavaConfig.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Repository
new file mode 100644
index 0000000..46092c0
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/JavaConfig.java b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/JavaConfig.java
new file mode 100644
index 0000000..1f1e9a9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/JavaConfig.java
@@ -0,0 +1,141 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2002 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.java.config;
+
+import java.io.Serializable;
+
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.protocol.java.sampler.JavaSampler;
+import org.apache.jmeter.protocol.java.sampler.JavaSamplerClient;
+import org.apache.jmeter.testelement.AbstractTestElement;
+import org.apache.log4j.Category;
+
+
+/**
+ *
+ * The <code>JavaConfig</code> class contains the configuration data
+ * necessary for the Java protocol.
+ *
+ *@author     Brad Kiewel
+ *@created    $Date: 2002/08/11 19:24:52 $
+ *@version    $Revision: 1.1 $
+ */
+
+public class JavaConfig extends AbstractTestElement implements Serializable
+{
+
+	/** Logging  */
+	private static Category cat = Category.getInstance(JavaConfig.class);
+	
+	private transient JavaSamplerClient javaClient = null;
+
+	/**
+	 *  Constructor for the JavaConfig object
+	 */
+	public JavaConfig()
+	{
+		setArguments(new Arguments());
+	}
+
+	/**
+	 *  Sets the Classname attribute of the JavaConfig object
+	 *
+	 *@param  classname  The new Classname value
+	 */
+	public void setClassname(String classname)
+	{
+		setProperty(JavaSampler.CLASSNAME, classname);
+	}
+
+
+
+	/**
+	 *  Gets the Classname attribute of the JavaConfig object
+	 *
+	 *@return    The Classname value
+	 */
+	public String getClassname()
+	{
+		return (String) getPropertyAsString(JavaSampler.CLASSNAME);
+	}
+
+	public void addArgument(String name,String value)
+	{
+		Arguments args = this.getArguments();
+		args.addArgument(name,value);
+	}
+
+	public void removeArguments()
+	{
+		this.setProperty(JavaSampler.ARGUMENTS,new Arguments());
+	}
+	
+	public void setArguments(Arguments args)
+	{
+		setProperty(JavaSampler.ARGUMENTS,args);
+	}
+
+	/**
+	 *  Gets the Arguments attribute of the JavaConfig object
+	 *
+	 *@return    The Arguments value
+	 */
+	public Arguments getArguments()
+	{
+		return (Arguments) getProperty(JavaSampler.ARGUMENTS);
+	}
+}
+
+
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Entries
new file mode 100644
index 0000000..c18491b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/JavaConfigGui.java/1.1/Sun Aug 11 19:24:52 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Repository
new file mode 100644
index 0000000..ec6d8f1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/JavaConfigGui.java b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/JavaConfigGui.java
new file mode 100644
index 0000000..f3ac8f3
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/config/gui/JavaConfigGui.java
@@ -0,0 +1,205 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2002 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.java.config.gui;
+
+import java.awt.Font;
+import java.util.List;
+
+import javax.swing.BorderFactory;
+import javax.swing.JComboBox;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.java.config.JavaConfig;
+import org.apache.jmeter.protocol.java.sampler.JavaSampler;
+import org.apache.jmeter.protocol.java.sampler.JavaSamplerClient;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.ClassFinder;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.log4j.Category;
+
+
+/**
+ * The <code>JavaConfigGui</code> class provides the user interface for
+ * the JavaConfig object.
+ * @author Brad Kiewel
+ * @version $Revision: 1.1 $
+ */
+
+public class JavaConfigGui extends AbstractConfigGui
+{
+	private static Category cat = Category.getInstance(JavaConfigGui.class);
+	private static String CLASSNAMECOMBO = "classnamecombo";
+
+	private JComboBox classnameCombo;
+	protected boolean displayName = true;
+	private ArgumentsPanel argsPanel;
+
+	public JavaConfigGui()
+	{
+		this(true);
+	}
+	
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("Java Request Defaults");
+	}
+
+	public JavaConfigGui(boolean displayNameField)
+	{
+		this.displayName = displayNameField;
+		init();
+	}
+
+	protected void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		JPanel classnameRequestPanel = new JPanel();
+		classnameRequestPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+		classnameRequestPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), JMeterUtils.getResString("protocol_java_border")));
+		classnameRequestPanel.add(getClassnamePanel());
+		classnameRequestPanel.add(getParameterPanel());
+
+		if (displayName)
+		{
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("protocol_java_config_tile"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+			
+			mainPanel.add(classnameRequestPanel);
+
+			this.add(mainPanel);
+		}
+		else
+		{
+			this.add(classnameRequestPanel);
+		}
+	}
+
+
+	protected JPanel getClassnamePanel()
+	{
+		JPanel panel = new JPanel();
+		panel.setBorder(BorderFactory.createEmptyBorder(0, 5, 0, 10));
+		panel.add(new JLabel(JMeterUtils.getResString("protocol_java_classname")));
+		
+		List possibleClasses = null;
+		
+		try {
+			
+			// Find all the classes which implement the JavaSamplerClient interface
+		
+			possibleClasses = ClassFinder.findClassesThatExtend(new Class[]{JavaSamplerClient.class});
+			
+			// Remove the JavaConfig class from the list since it only implements the interface for
+			// error conditions.
+			
+			possibleClasses.remove("org.apache.jmeter.protocol.java.sampler.JavaSampler");
+		
+		} catch (Exception e) {
+			cat.debug("Exception getting interfaces.",e);
+		}
+		
+		classnameCombo = new JComboBox(possibleClasses.toArray());
+		classnameCombo.setName(CLASSNAMECOMBO);
+		classnameCombo.setEditable(false);
+		panel.add(classnameCombo);
+		
+
+		return panel;
+	}
+
+	protected JPanel getParameterPanel()
+	{
+		argsPanel = new ArgumentsPanel();
+		return argsPanel;
+	}
+	
+	public void configure(TestElement config)
+	{
+		super.configure(config);
+		argsPanel.configure((Arguments)config.getProperty(JavaSampler.ARGUMENTS));
+		classnameCombo.setSelectedItem(config.getPropertyAsString(JavaSampler.CLASSNAME));
+	}
+	
+	public TestElement createTestElement()
+	{
+		JavaConfig config = new JavaConfig();
+		this.configureTestElement(config);
+		config.setArguments((Arguments)argsPanel.createTestElement());
+		config.setClassname(classnameCombo.getSelectedItem().toString());
+		return config;
+	}		
+
+}
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Entries
new file mode 100644
index 0000000..a9ac73a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Entries
@@ -0,0 +1 @@
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Repository
new file mode 100644
index 0000000..3095a26
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Entries
new file mode 100644
index 0000000..a423778
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/JavaTestSamplerGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Repository
new file mode 100644
index 0000000..698eda9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/JavaTestSamplerGui.java b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/JavaTestSamplerGui.java
new file mode 100644
index 0000000..019700b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/control/gui/JavaTestSamplerGui.java
@@ -0,0 +1,160 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2002 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.java.control.gui;
+
+import java.awt.Font;
+
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.java.config.JavaConfig;
+import org.apache.jmeter.protocol.java.config.gui.JavaConfigGui;
+import org.apache.jmeter.protocol.java.sampler.JavaSampler;
+import org.apache.jmeter.samplers.gui.AbstractSamplerGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.util.JMeterUtils;
+
+
+/**
+ * The <code>JavaTestSamplerGui</code> class provides the user interface 
+ * for the JavaTestSampler.
+ * 
+ * @author Brad Kiewel
+ * @version $Revision: 1.1 $
+ */
+
+public class JavaTestSamplerGui extends AbstractSamplerGui {
+	
+	private JavaConfigGui javaPanel = null;
+
+	/**
+	 * Constructor for JavaTestSamplerGui
+	 *
+	public JavaTestSamplerGui(LayoutManager arg0, boolean arg1) {
+		super(arg0, arg1);
+	}
+
+	/**
+	 * Constructor for JavaTestSamplerGui
+	 *
+	public JavaTestSamplerGui(LayoutManager arg0) {
+		super(arg0);
+	}
+
+	/**
+	 * Constructor for JavaTestSamplerGui
+	 *
+	public JavaTestSamplerGui(boolean arg0) {
+		super(arg0);
+	}
+
+	/**
+	 * Constructor for JavaTestSamplerGui
+	 */
+	public JavaTestSamplerGui() {
+		super();
+		init();
+	}
+	
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("Java Request");
+	}
+
+	private void init() {
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("protocol_java_test_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+		
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		javaPanel = new JavaConfigGui(false);
+		
+		mainPanel.add(javaPanel);
+
+		this.add(mainPanel);
+	}
+	
+	public TestElement createTestElement()
+	{
+		JavaConfig config = (JavaConfig)javaPanel.createTestElement();
+		JavaSampler sampler = new JavaSampler();
+		this.configureTestElement(sampler);
+		sampler.addTestElement(config);
+		return sampler;
+	}
+	
+	public void configure(TestElement el)
+	{
+		super.configure(el);
+		javaPanel.configure(el);
+	}
+}
+
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Entries
new file mode 100644
index 0000000..4c2383a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Entries
@@ -0,0 +1,3 @@
+/JavaSampler.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/JavaSamplerClient.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Repository
new file mode 100644
index 0000000..5f967cd
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JavaSampler.java b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JavaSampler.java
new file mode 100644
index 0000000..e093325
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JavaSampler.java
@@ -0,0 +1,266 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2002 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.java.sampler;
+
+import java.util.HashMap;
+import java.util.Iterator;
+
+import org.apache.jmeter.config.Argument;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.protocol.java.config.JavaConfig;
+import org.apache.jmeter.samplers.AbstractSampler;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.log4j.Category;
+
+/**
+ * 
+ */
+
+
+public class JavaSampler extends AbstractSampler implements JavaSamplerClient {
+
+	/** Handle to Java client. **/
+	
+	public final static String CLASSNAME = "classname";
+	
+	public final static String ARGUMENTS = "arguments";
+
+	private JavaSamplerClient javaClient = null;
+
+	/** Logging  */
+	private static Category cat = Category.getInstance(JavaSampler.class);
+
+	public JavaSampler() {
+		setArguments(new Arguments());
+	}
+	
+	public void setArguments(Arguments args)
+	{
+		this.setProperty(ARGUMENTS,args);
+	}
+	
+	public Arguments getArguments()
+	{
+		return (Arguments)getProperty(ARGUMENTS);
+	}
+	
+	public void addCustomTestElement(TestElement el)
+	{
+		if(el instanceof JavaConfig)
+		{
+			mergeIn(el);
+		}
+	}
+	
+	/**
+	 * Releases Java Client.
+	 */
+
+	public void releaseJavaClient () {
+		if (javaClient != null) {
+			javaClient.teardownTest(createArgumentsHashMap(getArguments()));
+		}
+		javaClient = null;
+	}
+	
+	/**
+	 *  Sets the Classname attribute of the JavaConfig object
+	 *
+	 *@param  classname  The new Classname value
+	 */
+	public void setClassname(String classname)
+	{
+		this.setProperty(CLASSNAME, classname);
+	}
+
+
+
+	/**
+	 *  Gets the Classname attribute of the JavaConfig object
+	 *
+	 *@return    The Classname value
+	 */
+	public String getClassname()
+	{
+		return this.getPropertyAsString(CLASSNAME);
+	}
+	
+	/**
+	 * Performs a test sample.
+	 * 
+	 * The <code>sample()</code> method retrieves the reference to the
+	 * Java client and calls its <code>runTest()</code> method.
+	 * @see Sampler#sample()
+	 * @see JavaSamplerClient#runTest()
+	 * 
+	 * @return test SampleResult
+	 */
+	
+
+	public SampleResult sample(Entry entry) {
+		return createJavaClient().runTest(createArgumentsHashMap(getArguments()));
+	}
+	
+	public HashMap createArgumentsHashMap(Arguments args)
+	{
+		HashMap newArgs = new HashMap();
+		Iterator iter = args.iterator();
+		while (iter.hasNext())
+		{
+			Argument item = (Argument)iter.next();
+			newArgs.put(item.getName(),item.getValue());
+		}
+
+		return newArgs;
+	}
+	
+		/**
+	 * Returns reference to <code>JavaSamplerClient</code>.
+	 * 
+	 * The <code>createJavaClient()</code> method uses reflection
+	 * to create an instance of the specified Java protocol client.
+	 * If the class can not be found, the method returns a reference
+	 * to <code>this</code> object.
+	 * 
+	 * @return JavaSamplerClient reference.
+	 */
+
+	public JavaSamplerClient createJavaClient() {
+		if (javaClient == null) {
+			try {
+				Class javaClass = Class.forName(getClassname().trim(),
+						false,Thread.currentThread().getContextClassLoader());
+				java.lang.reflect.Constructor[] constructors = javaClass.getConstructors();
+
+				for (int i = 0; i < constructors.length; i++) {
+					Class[] params = constructors[i].getParameterTypes();
+					if (params.length == 0) {
+						Object[] args = {};
+						javaClient = (JavaSamplerClient)constructors[i].newInstance(args);
+						javaClient.setupTest(createArgumentsHashMap(getArguments()));
+						if (cat.isDebugEnabled()) {
+							cat.debug(whoAmI() + "\tCreated:\t"+ getClassname()+ "@" + Integer.toHexString(javaClient.hashCode()));
+						}
+						break;
+					}
+				}
+
+			} catch (Exception e) {
+				cat.error(whoAmI() + "\tException creating: " + getClassname(),e);
+				javaClient = this;
+			}
+		}
+		
+		return javaClient;
+			
+	}
+	
+	/**
+	 * Retrieves reference to JavaSamplerClient.
+	 * 
+	 * Convience method used to check for null reference without
+	 * actually creating a JavaSamplerClient
+	 * 
+	 * @return reference to JavaSamplerClient
+	 */
+	
+	public JavaSamplerClient retrieveJavaClient() {
+		return javaClient;
+	}
+	
+	/**
+	 * Provide default setupTest() implementation for error conditions.
+	 * @see JavaSamplerClient#setupTest()
+	 */
+	public void setupTest(HashMap arguments) {
+		cat.debug(whoAmI() + "\tsetupTest");
+	}
+
+	/**
+	 * Provide default teardownTest() implementation for error conditions.
+	 * @see JavaSamplerClient#teardownTest()
+	 */
+	public void teardownTest(HashMap arguments) {
+		cat.debug(whoAmI() + "\tteardownTest");
+		javaClient = null;
+	}
+
+	/**
+	 * Return SampleResult with data on error.
+	 * @see JavaSamplerClient#runTest()
+	 */
+	public SampleResult runTest(HashMap arguments) {
+		cat.debug(whoAmI() + "\trunTest");
+		Thread.yield();
+		SampleResult results = new SampleResult();
+		results.setTime(0);
+		results.setSuccessful(false);
+		results.setResponseData(new String("Class not found: " + getClassname()).getBytes());
+		results.setSampleLabel("ERROR: " + getClassname());
+		return results;
+	}
+	
+	private String whoAmI() {
+		StringBuffer sb = new StringBuffer();
+		sb.append(Thread.currentThread().getName());
+		sb.append("@");
+		sb.append(Integer.toHexString(hashCode()));
+		return sb.toString();
+	}
+
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JavaSamplerClient.java b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JavaSamplerClient.java
new file mode 100644
index 0000000..d845513
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JavaSamplerClient.java
@@ -0,0 +1,94 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2002 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.java.sampler;
+
+import java.util.HashMap;
+
+import org.apache.jmeter.samplers.SampleResult;
+/**
+ *<code>JavaSamplerClient</code> provides a standard
+ * interface to execute external Java programs within JMeter.
+ * 
+ * @author Brad Kiewel
+ * @version $Revision: 1.1 $
+ */
+
+public interface JavaSamplerClient {
+	
+	/**
+	 * Setup any resources need for each test run.
+	 */
+
+	public void setupTest(HashMap arguments);
+	
+	/**
+	 * Perform any clean up at the end of a test run.
+	 */
+
+	public void teardownTest(HashMap arguments);
+	
+	/**
+	 * Performs test for each iteration.
+	 * 
+	 * The <code>runTest()</code> method performs one test interation 
+	 * each time it is called.  The method returns a SampleResult object.
+	 * The method should, has a minimum, place the response time in 
+	 * the SampleResult object.
+	 * 
+	 * @return SampleResult object with results of the test run.
+	 */
+
+	public SampleResult runTest(HashMap arguments);
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Entries b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Entries
new file mode 100644
index 0000000..7d774f7
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Entries
@@ -0,0 +1,2 @@
+/SleepTest.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Repository b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Repository
new file mode 100644
index 0000000..8c448f5
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Root b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Tag b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/SleepTest.java b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/SleepTest.java
new file mode 100644
index 0000000..440f523
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/java/org/apache/jmeter/protocol/java/test/SleepTest.java
@@ -0,0 +1,200 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.java.test;
+
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.Map.Entry;
+
+import org.apache.jmeter.protocol.java.sampler.JavaSamplerClient;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.log4j.Category;
+
+/**
+ * The <code>SleepTest</code> class is a simple example class for a
+ * JMeter Java protocol client.  The class implements the
+ * <code>JavaSamplerClient</code> interface.
+ */
+
+public class SleepTest implements JavaSamplerClient {
+	/** Define category for logging  */
+	private static Category cat = Category.getInstance(SleepTest.class);
+	/** */
+	private long sleepTime = 1000;
+	/** */
+	private long sleepMask = 0x3ff;
+	/**
+	 * Default constructor for <code>SleepTest</code>.
+	 *
+	 * {@link org.apache.jmeter.protocol.java.config.JavaConfig JavaConfig}
+	 * uses the default constructor to instantiate an instance of
+	 * the client class.
+	 */
+	public SleepTest() {
+		cat.debug(whoAmI() + "\tConstruct");
+	}
+
+	/**
+	 * @see JavaSamplerClient#setupTest()
+	 *
+	 * setupTest() provides a way to do any initialization that may be required.
+	 */
+	public void setupTest(HashMap arguments) {
+		cat.debug(whoAmI() + "\tsetupTest()");
+		Iterator argsIt = arguments.entrySet().iterator();
+		while (argsIt.hasNext()) {
+			Entry entry = (Entry)argsIt.next();
+			cat.debug(entry.getKey().toString() + "=" + entry.getValue().toString());
+		}
+
+		if (arguments.containsKey("SleepTime")) {
+			setSleepTime(arguments.get("SleepTime"));
+		}
+
+		if (arguments.containsKey("SleepMask")) {
+			setSleepMask(arguments.get("SleepMask"));
+		}
+	}
+
+	/**
+	 * @see JavaSamplerClient#teardownTest()
+	 *
+	 * teardownTest() provides a way to do any clean-up that may be required.
+	 */
+	public void teardownTest(HashMap arguments) {
+		cat.debug(whoAmI() + "\tteardownTest()");
+		Iterator argsIt = arguments.entrySet().iterator();
+		while (argsIt.hasNext()) {
+			Entry entry = (Entry)argsIt.next();
+			cat.debug(entry.getKey().toString() + "=" + entry.getValue().toString());
+		}
+	}
+
+	/**
+	 * @see JavaSamplerClient#runTest()
+	 *
+	 * runTest() is called for each sample.  The method returns a
+	 * <code>SampleResult</code> object.  The method must calculate
+	 * how long the sample took to execute.
+	 */
+	public SampleResult runTest(HashMap arguments) {
+
+		SampleResult results = new SampleResult();
+		try {
+			//
+			// Generate a random value using the current time.
+			//
+			long ct = System.currentTimeMillis();
+			ct %= getSleepMask();
+			//
+			// Record sample start time.
+			//
+			long start = System.currentTimeMillis();
+			//
+			// Execute the sample.  In this case sleep for the
+			// specified time.
+			//
+			Thread.sleep(getSleepTime() + ct);
+			//
+			// Record end time and populate the results.
+			//
+			long end = System.currentTimeMillis();
+			results.setTime(end - start);
+			results.setSuccessful(true);
+			results.setSampleLabel("Sleep Test: time = "+getSleepTime() + ct);
+		} catch (Exception e) {
+		}
+
+		if (cat.isDebugEnabled()) {
+			cat.debug(whoAmI() + "\trunTest()" + "\tTime:\t" + results.getTime());
+			Iterator argsIt = arguments.entrySet().iterator();
+			while (argsIt.hasNext()) {
+				Entry entry = (Entry)argsIt.next();
+				cat.debug(entry.getKey().toString() + "=" + entry.getValue().toString());
+			}
+		}
+
+		return results;
+
+	}
+
+	private String whoAmI() {
+		StringBuffer sb = new StringBuffer();
+		sb.append(Thread.currentThread().toString());
+		sb.append("@");
+		sb.append(Integer.toHexString(hashCode()));
+		return sb.toString();
+	}
+
+	private long getSleepTime() {return sleepTime;}
+	private long getSleepMask() {return sleepMask;}
+	private void setSleepTime(Object arg) {
+		try {
+			sleepTime = Long.parseLong((String)arg);
+		} catch (Exception e) {
+			cat.debug("Exception getting sleepTime:\t",e);
+			sleepTime = 1000l;
+		}
+	}
+	private void setSleepMask(Object arg) {
+		try {
+			sleepMask = Long.parseLong((String)arg);
+		} catch (Exception e) {
+			cat.debug("Exception getting sleepMask:\t",e);
+			sleepMask = 0x3ff;
+		}
+	}
+}
\ No newline at end of file
diff --git a/jakarta-jmeter/src/protocol/jdbc/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/CVS/Entries
new file mode 100644
index 0000000..381094d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/CVS/Entries
@@ -0,0 +1 @@
+D/org////
diff --git a/jakarta-jmeter/src/protocol/jdbc/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/CVS/Repository
new file mode 100644
index 0000000..a1f0c2b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc
diff --git a/jakarta-jmeter/src/protocol/jdbc/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Entries
new file mode 100644
index 0000000..a0bd27a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Entries
@@ -0,0 +1 @@
+D/apache////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Repository
new file mode 100644
index 0000000..88886c4
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Entries
new file mode 100644
index 0000000..615cbc9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Entries
@@ -0,0 +1 @@
+D/jmeter////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Repository
new file mode 100644
index 0000000..431b91d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Entries
new file mode 100644
index 0000000..6961abb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Entries
@@ -0,0 +1 @@
+D/protocol////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Repository
new file mode 100644
index 0000000..770b00d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Entries
new file mode 100644
index 0000000..ad558b0
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Entries
@@ -0,0 +1 @@
+D/jdbc////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Repository
new file mode 100644
index 0000000..0ea02e1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Entries
new file mode 100644
index 0000000..46d1208
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Entries
@@ -0,0 +1,4 @@
+D/config////
+D/control////
+D/sampler////
+D/util////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Repository
new file mode 100644
index 0000000..606713f
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Entries
new file mode 100644
index 0000000..6b2d7f1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Entries
@@ -0,0 +1,4 @@
+/DbConfig.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/PoolConfig.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/SqlConfig.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Repository
new file mode 100644
index 0000000..1734455
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/DbConfig.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/DbConfig.java
new file mode 100644
index 0000000..daa713c
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/DbConfig.java
@@ -0,0 +1,96 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.jdbc.config;
+
+import org.apache.jmeter.config.LoginConfig;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+import java.io.*;
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class DbConfig extends LoginConfig implements Serializable
+{
+
+	public DbConfig()
+	{
+	}
+	public String getUrl()
+	{
+		return (String)this.getProperty(JDBCSampler.URL);
+	}
+
+	public void setUrl(String url)
+	{
+		setProperty(JDBCSampler.URL,url);
+	}
+
+	public String getDriver()
+	{
+		return (String)this.getProperty(JDBCSampler.DRIVER);
+	}
+
+	public void setDriver(String driver)
+	{
+		setProperty(JDBCSampler.DRIVER,driver);
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/PoolConfig.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/PoolConfig.java
new file mode 100644
index 0000000..6a83a82
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/PoolConfig.java
@@ -0,0 +1,116 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.jdbc.config;
+
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+import java.io.*;
+
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class PoolConfig extends ConfigTestElement implements Serializable
+{
+
+	public PoolConfig()
+	{
+	}
+
+	public int getMaxUse()
+	{
+		Object max = this.getProperty(JDBCSampler.MAXUSE);
+		if(max instanceof Integer)
+		{
+			return ((Integer)max).intValue();
+		}
+		else if(max instanceof String)
+		{
+			return Integer.parseInt((String)max);
+		}
+		return 50;
+	}
+
+	public void setMaxUse(int use)
+	{
+		this.setProperty(JDBCSampler.MAXUSE,new Integer(use));
+	}
+
+	public int getNumConnections()
+	{
+		Object numConn = this.getProperty(JDBCSampler.CONNECTIONS);
+		if(numConn instanceof Integer)
+		{
+			return ((Integer)numConn).intValue();
+		}
+		else if(numConn instanceof String)
+		{
+			return Integer.parseInt((String)numConn);
+		}
+		return 1;
+	}
+
+	public void setNumConnections(int conns)
+	{
+		this.setProperty(JDBCSampler.CONNECTIONS,new Integer(conns));
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/SqlConfig.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/SqlConfig.java
new file mode 100644
index 0000000..3acf372
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/SqlConfig.java
@@ -0,0 +1,88 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.jdbc.config;
+
+import org.apache.jmeter.config.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+import java.io.*;
+
+
+/**
+ * Title:        JMeter
+ * Description:
+ * Copyright:    Copyright (c) 2000
+ * Company:      Apache
+ * @author Michael Stover
+ * @version 1.0
+ */
+
+public class SqlConfig extends ConfigTestElement implements Serializable
+{
+
+
+	public SqlConfig()
+	{
+	}
+	public void setQuery(String newQuery)
+	{
+		this.setProperty(JDBCSampler.QUERY,newQuery);
+	}
+	public String getQuery()
+	{
+		return (String)this.getProperty(JDBCSampler.QUERY);
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Entries
new file mode 100644
index 0000000..9e5f847
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Entries
@@ -0,0 +1,4 @@
+/DbConfigGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/PoolConfigGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/SqlConfigGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Repository
new file mode 100644
index 0000000..23541ad
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/DbConfigGui.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/DbConfigGui.java
new file mode 100644
index 0000000..7eb8092
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/DbConfigGui.java
@@ -0,0 +1,220 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.jdbc.config.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.config.gui.LoginConfigGui;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.jdbc.config.DbConfig;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+import org.apache.jmeter.config.ConfigTestElement;
+
+/****************************************
+ * Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:53 $
+ *@version   1.0
+ ***************************************/
+
+public class DbConfigGui extends AbstractConfigGui
+{
+	private final static String LOGIN_ELEMENT = "DbConfigGui.login_element";
+	private static String PROTOCOL = "protocol";
+	private static String URL = "url";
+	private static String DRIVER = "driver";
+	private JTextField urlField = new JTextField(20);
+	private JTextField driverField = new JTextField(20);
+
+	private boolean displayName;
+	private LoginConfigGui loginGui;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public DbConfigGui()
+	{
+		this(true);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param displayName  !ToDo (Parameter description)
+	 ***************************************/
+	public DbConfigGui(boolean displayName)
+	{
+		this.displayName = displayName;
+		init();
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("database_login_title");
+	}
+
+	public TestElement createTestElement()
+	{
+		ConfigTestElement element = new ConfigTestElement();
+		configureTestElement(element);
+		element.setProperty(JDBCSampler.URL,urlField.getText());
+		element.setProperty(JDBCSampler.DRIVER,driverField.getText());
+		element.addTestElement(loginGui.createTestElement());
+		return element;
+	}
+
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		urlField.setText((String)element.getProperty(JDBCSampler.URL));
+		driverField.setText((String)element.getProperty(JDBCSampler.DRIVER));
+		loginGui.configure(element);
+	}
+
+	private void init()
+	{
+		if(displayName)
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("database_login_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+
+			// URL and JDBC PROPS
+			JPanel urlJDBCPanel = new JPanel();
+			urlJDBCPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+			urlJDBCPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("database_url_jdbc_props")));
+
+			// URL
+			urlJDBCPanel.add(getUrlPanel());
+
+			// DRIVER
+			urlJDBCPanel.add(getDriverPanel());
+
+			mainPanel.add(urlJDBCPanel);
+
+			// LOGIN
+			loginGui = new LoginConfigGui(false);
+			JPanel loginPanel = new JPanel();
+			loginPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("login_config")));
+			loginPanel.add(loginGui);
+			mainPanel.add(loginPanel);
+
+			this.add(mainPanel);
+		}
+		else
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// URL and JDBC PROPS
+			JPanel urlJDBCPanel = new JPanel();
+			urlJDBCPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+			urlJDBCPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("database_url_jdbc_props")));
+
+			// URL
+			urlJDBCPanel.add(getUrlPanel());
+
+			// DRIVER
+			urlJDBCPanel.add(getDriverPanel());
+
+			this.add(urlJDBCPanel);
+
+			// LOGIN
+			loginGui = new LoginConfigGui(false);
+			JPanel loginPanel = new JPanel();
+			loginPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("login_config")));
+			loginPanel.add(loginGui);
+			this.add(loginPanel);
+		}
+	}
+
+	private JPanel getDriverPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("database_driver_class")));
+		driverField.setName(DRIVER);
+		panel.add(driverField);
+		return panel;
+	}
+
+	private JPanel getUrlPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("database_url")));
+		urlField.setName(URL);
+		panel.add(urlField);
+		return panel;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/PoolConfigGui.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/PoolConfigGui.java
new file mode 100644
index 0000000..bc742d1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/PoolConfigGui.java
@@ -0,0 +1,256 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.jdbc.config.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.jdbc.config.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+import org.apache.jmeter.config.ConfigTestElement;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:53 $
+ *@version   1.0
+ ***************************************/
+
+public class PoolConfigGui extends AbstractConfigGui implements FocusListener
+{
+	private static String CONNECTIONS = "connections";
+	private static String MAXUSE = "maxuse";
+	private static String DEFAULT_MAX_USE = "50";
+	private static String DEFAULT_NUM_CONNECTIONS = "1";
+	private JTextField connField = new JTextField(5);
+	private JTextField maxUseField = new JTextField(5);
+
+	private boolean displayName;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public PoolConfigGui()
+	{
+		this(true);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param displayName  !ToDo (Parameter description)
+	 ***************************************/
+	public PoolConfigGui(boolean displayName)
+	{
+		this.displayName = displayName;
+		init();
+	}
+
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		connField.setText(element.getProperty(JDBCSampler.CONNECTIONS).toString());
+		maxUseField.setText(element.getProperty(JDBCSampler.MAXUSE).toString());
+	}
+
+	public TestElement createTestElement()
+	{
+		ConfigTestElement element = new ConfigTestElement();
+		configureTestElement(element);
+		element.setProperty(JDBCSampler.CONNECTIONS,connField.getText());
+		element.setProperty(JDBCSampler.MAXUSE,maxUseField.getText());
+		return element;
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("database_conn_pool_title");
+	}
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void focusGained(FocusEvent e) { }
+
+	/****************************************
+	 * !ToDo (Method description)
+	 *
+	 *@param e  !ToDo (Parameter description)
+	 ***************************************/
+	public void focusLost(FocusEvent e)
+	{
+		String name = e.getComponent().getName();
+
+		if(name.equals(CONNECTIONS))
+		{
+			try
+			{
+				Integer.parseInt(connField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(connField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+				}
+				connField.setText(DEFAULT_NUM_CONNECTIONS);
+			}
+		}
+		else if(name.equals(MAXUSE))
+		{
+			try
+			{
+				Integer.parseInt(maxUseField.getText());
+			}
+			catch(NumberFormatException nfe)
+			{
+				if(maxUseField.getText().length() > 0)
+				{
+					JOptionPane.showMessageDialog(this, "You must enter a valid number",
+							"Invalid data", JOptionPane.WARNING_MESSAGE);
+				}
+				maxUseField.setText(DEFAULT_NUM_CONNECTIONS);
+			}
+		}
+	}
+
+	private void init()
+	{
+		if(displayName)
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("database_conn_pool_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+
+			// CONNECTION POOL
+			JPanel connPoolPanel = new JPanel();
+			connPoolPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+			connPoolPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("database_conn_pool_props")));
+
+			// NUMBER OF CONNECTIONS
+			connPoolPanel.add(createConnPanel());
+
+			// MAX USAGE
+			connPoolPanel.add(createMaxUsePanel());
+
+			mainPanel.add(connPoolPanel);
+
+			this.add(mainPanel);
+		}
+		else
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// CONNECTION POOL
+			JPanel connPoolPanel = new JPanel();
+			connPoolPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+			connPoolPanel.setBorder(BorderFactory.createTitledBorder(JMeterUtils.getResString("database_conn_pool_props")));
+
+			// NUMBER OF CONNECTIONS
+			connPoolPanel.add(createConnPanel());
+
+			// MAX USAGE
+			connPoolPanel.add(createMaxUsePanel());
+
+			this.add(connPoolPanel);
+		}
+	}
+
+	private JPanel createConnPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("database_conn_pool_size")));
+		connField.setText(DEFAULT_NUM_CONNECTIONS);
+		connField.setName(CONNECTIONS);
+		connField.addFocusListener(this);
+		panel.add(connField);
+		return panel;
+	}
+
+	private JPanel createMaxUsePanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("database_conn_pool_max_usage")));
+		maxUseField.setText(DEFAULT_MAX_USE);
+		maxUseField.setName(MAXUSE);
+		maxUseField.addFocusListener(this);
+		panel.add(maxUseField);
+		return panel;
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/SqlConfigGui.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/SqlConfigGui.java
new file mode 100644
index 0000000..570fc93
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/config/gui/SqlConfigGui.java
@@ -0,0 +1,163 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.jdbc.config.gui;
+import java.awt.*;
+import java.awt.event.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.jdbc.config.SqlConfig;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.config.gui.AbstractConfigGui;
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+
+/****************************************
+ * Title: JMeter Description: Copyright: Copyright (c) 2000 Company: Apache
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:53 $
+ *@version   1.0
+ ***************************************/
+
+public class SqlConfigGui extends AbstractConfigGui
+{
+	private JTextField sqlField = new JTextField(30);
+	private boolean displayName;
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public SqlConfigGui()
+	{
+		this(true);
+	}
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 *
+	 *@param displayName  !ToDo (Parameter description)
+	 ***************************************/
+	public SqlConfigGui(boolean displayName)
+	{
+		this.displayName = displayName;
+		init();
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("database_sql_query_title");
+	}
+
+	public void configure(TestElement element)
+	{
+		sqlField.setText(element.getProperty(JDBCSampler.QUERY).toString());
+		super.configure(element);
+	}
+
+	public TestElement createTestElement()
+	{
+		ConfigTestElement element = new ConfigTestElement();
+		configureTestElement(element);
+		element.setProperty(JDBCSampler.QUERY,sqlField.getText());
+		return element;
+	}
+
+	private void init()
+	{
+		if(displayName)
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+			// MAIN PANEL
+			JPanel mainPanel = new JPanel();
+			Border margin = new EmptyBorder(10, 10, 5, 10);
+			mainPanel.setBorder(margin);
+			mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+			// TITLE
+			JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("database_sql_query_title"));
+			Font curFont = panelTitleLabel.getFont();
+			int curFontSize = curFont.getSize();
+			curFontSize += 4;
+			panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+			mainPanel.add(panelTitleLabel);
+
+			// NAME
+			mainPanel.add(getNamePanel());
+
+			// SQL
+			mainPanel.add(createSqlPanel());
+
+			this.add(mainPanel);
+		}
+		else
+		{
+			this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+			this.add(createSqlPanel());
+		}
+	}
+
+	private JPanel createSqlPanel()
+	{
+		JPanel panel = new JPanel();
+		panel.add(new JLabel(JMeterUtils.getResString("database_sql_query_string")));
+		panel.add(sqlField);
+		return panel;
+	}
+
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Entries
new file mode 100644
index 0000000..a9ac73a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Entries
@@ -0,0 +1 @@
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Repository
new file mode 100644
index 0000000..8b63ac1
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Entries
new file mode 100644
index 0000000..9ff6a1e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/JdbcTestSampleGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Repository
new file mode 100644
index 0000000..5011690
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/JdbcTestSampleGui.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/JdbcTestSampleGui.java
new file mode 100644
index 0000000..d86213d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/control/gui/JdbcTestSampleGui.java
@@ -0,0 +1,150 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.protocol.jdbc.control.gui;
+import java.awt.*;
+import javax.swing.*;
+import javax.swing.border.*;
+import org.apache.jmeter.gui.*;
+import org.apache.jmeter.gui.util.VerticalLayout;
+import org.apache.jmeter.protocol.jdbc.config.*;
+import org.apache.jmeter.protocol.jdbc.config.gui.*;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.samplers.gui.AbstractSamplerGui;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler;
+
+/****************************************
+ * Title: Description: Copyright: Copyright (c) 2001 Company:
+ *
+ *@author    Michael Stover
+ *@created   $Date: 2002/08/11 19:24:53 $
+ *@version   1.0
+ ***************************************/
+
+public class JdbcTestSampleGui extends AbstractSamplerGui
+{
+
+	PoolConfigGui poolGui;
+	DbConfigGui dbGui;
+	SqlConfigGui sqlGui;
+
+
+	/****************************************
+	 * !ToDo (Constructor description)
+	 ***************************************/
+	public JdbcTestSampleGui()
+	{
+		init();
+	}
+
+	public void configure(TestElement element)
+	{
+		super.configure(element);
+		dbGui.configure(element);
+		poolGui.configure(element);
+		sqlGui.configure(element);
+	}
+
+	public String getStaticLabel()
+	{
+		return JMeterUtils.getResString("database_testing_title");
+	}
+
+	public TestElement createTestElement()
+	{
+		JDBCSampler sampler = new JDBCSampler();
+		sampler.addTestElement(dbGui.createTestElement());
+		sampler.addTestElement(poolGui.createTestElement());
+		sampler.addTestElement(sqlGui.createTestElement());
+		configureTestElement(sampler);
+		return sampler;
+	}
+
+	private void init()
+	{
+		this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, VerticalLayout.TOP));
+
+		// MAIN PANEL
+		JPanel mainPanel = new JPanel();
+		Border margin = new EmptyBorder(10, 10, 5, 10);
+		mainPanel.setBorder(margin);
+		mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+		// TITLE
+		JLabel panelTitleLabel = new JLabel(JMeterUtils.getResString("database_testing_title"));
+		Font curFont = panelTitleLabel.getFont();
+		int curFontSize = curFont.getSize();
+		curFontSize += 4;
+		panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+		mainPanel.add(panelTitleLabel);
+
+		// NAME
+		mainPanel.add(getNamePanel());
+
+		// DATABASE
+		dbGui = new DbConfigGui(false);
+		mainPanel.add(dbGui);
+
+		// CONNECTION POOL
+		poolGui = new PoolConfigGui(false);
+		mainPanel.add(poolGui);
+
+		// SQL
+		sqlGui = new SqlConfigGui(false);
+		mainPanel.add(sqlGui);
+
+		this.add(mainPanel);
+	}
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Entries
new file mode 100644
index 0000000..e653cdf
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Entries
@@ -0,0 +1,2 @@
+/JDBCSampler.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Repository
new file mode 100644
index 0000000..5b7100a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/JDBCSampler.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/JDBCSampler.java
new file mode 100644
index 0000000..1a1bd72
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/JDBCSampler.java
@@ -0,0 +1,319 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+ package org.apache.jmeter.protocol.jdbc.sampler;
+
+import java.net.URL;
+import java.sql.Connection;
+import java.sql.ResultSet;
+import java.sql.ResultSetMetaData;
+import java.sql.SQLException;
+import java.sql.Statement;
+import java.util.HashMap;
+import java.util.Map;
+
+import org.apache.jmeter.config.ConfigTestElement;
+import org.apache.jmeter.protocol.jdbc.config.DbConfig;
+import org.apache.jmeter.protocol.jdbc.config.PoolConfig;
+import org.apache.jmeter.protocol.jdbc.config.SqlConfig;
+import org.apache.jmeter.protocol.jdbc.util.DBConnectionManager;
+import org.apache.jmeter.protocol.jdbc.util.DBKey;
+import org.apache.jmeter.samplers.AbstractSampler;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.jmeter.testelement.TestElement;
+import org.apache.jmeter.testelement.TestListener;
+import org.apache.jmeter.util.Data;
+
+/************************************************************
+ *  A sampler which understands JDBC database requests
+ *
+ *@author     $Author: mstover1 $
+ *@created    $Date: 2002/08/11 19:24:53 $
+ *@version    $Revision: 1.1 $
+ ***********************************************************/
+
+public class JDBCSampler extends AbstractSampler implements TestListener
+{
+
+	public final static String URL = "JDBCSampler.url";
+	public final static String DRIVER = "JDBCSampler.driver";
+	public static String CONNECTIONS = "JDBCSampler.connections";
+	public static String MAXUSE = "JDBCSampler.maxuse";
+	//database connection pool manager
+	DBConnectionManager manager = DBConnectionManager.getManager();
+	// end method
+
+	public final static String QUERY = "JDBCSampler.query";
+	private static Map keyMap = new HashMap();
+	private static boolean running = false;
+
+	/************************************************************
+	 *  !ToDo (Constructor description)
+	 ***********************************************************/
+	public JDBCSampler()
+	{
+
+	}
+
+	public void addCustomTestElement(TestElement element)
+	{
+		if(element instanceof SqlConfig || element instanceof PoolConfig ||
+				element instanceof DbConfig)
+		{
+			this.mergeIn(element);
+		}
+	}
+	
+	public void testStarted(String host)
+	{
+	}
+	
+	public void testEnded(String host)
+	{
+	}
+	
+	public synchronized void testStarted()
+	{
+		if(!running)
+		{
+			running = true;
+		}
+	}
+	
+	public synchronized void testEnded()
+	{
+		if(running)
+		{
+			manager.shutdown();
+			keyMap.clear();
+			running = false;
+		}
+	}
+	
+	public String getQuery()
+	{
+		return this.getPropertyAsString(QUERY);
+	}
+
+	/************************************************************
+	 *  !ToDo (Method description)
+	 *
+	 *@param  e  !ToDo (Parameter description)
+	 *@return    !ToDo (Return description)
+	 ***********************************************************/
+	public SampleResult sample(Entry e)
+	{
+		DBKey key = getKey();
+		long start;
+		long end;
+		long time;
+		time = start = end = 0;
+		SampleResult res = new SampleResult();
+		Connection con = null;
+		ResultSet rs = null;
+		Statement stmt = null;
+		Data data = new Data();
+		res.setSampleLabel(getQuery());
+		start = System.currentTimeMillis();
+		try
+		{
+			int count = 0;
+			while (count < 20 && (con = manager.getConnection(key)) == null)
+			{
+				try
+				{
+					Thread.sleep(10);
+				}
+				catch (Exception err)
+				{
+					count++;
+				}
+			}
+			stmt = con.createStatement();
+			// Execute database query
+			boolean retVal = stmt.execute(getQuery());
+			// Based on query return value, get results
+			if (retVal)
+			{
+				rs = stmt.getResultSet();
+				data = getDataFromResultSet(rs);
+				rs.close();
+			}
+			else
+			{
+				int updateCount = stmt.getUpdateCount();
+			}
+			stmt.close();
+			manager.releaseConnection(con);
+		}
+		catch (Exception ex)
+		{
+			if (rs != null)
+			{
+				try
+				{
+					rs.close();
+				}
+				catch (SQLException err)
+				{
+					rs = null;
+				}
+			}
+			if (stmt != null)
+			{
+				try
+				{
+					stmt.close();
+				}
+				catch (SQLException err)
+				{
+					stmt = null;
+				}
+			}
+			manager.releaseConnection(con);
+			ex.printStackTrace();
+		}
+		// Calculate response time
+		end = System.currentTimeMillis();
+		time += end - start;
+		res.setTime(time);
+		res.setResponseData(data.toString().getBytes());
+		res.setSamplerData(this);
+		res.setSuccessful(true);
+		return res;
+	}
+	
+	public String getUrl()
+	{
+		return getPropertyAsString(URL);
+	}
+	
+	public String getUsername()
+	{
+		return getPropertyAsString(ConfigTestElement.USERNAME);
+	}
+	
+	public String getPassword()
+	{
+		return getPropertyAsString(ConfigTestElement.PASSWORD);
+	}
+	
+	public String getDriver()
+	{
+		return getPropertyAsString(DRIVER);
+	}
+	
+	public int getMaxUse()
+	{
+		return getPropertyAsInt(this.MAXUSE);
+	}
+	
+	public int getNumConnections()
+	{
+		return getPropertyAsInt(CONNECTIONS);
+	}
+
+	private DBKey getKey()
+	{
+		DBKey key = (DBKey)keyMap.get(getUrl());
+		if (key == null)
+		{
+			key = manager.getKey(getUrl(), getUsername(),getPassword(),
+					getDriver(), getMaxUse(), getNumConnections());
+			keyMap.put(getUrl(), key);
+		}
+		return key;
+	}
+
+	/************************************************************
+	 *  Gets a Data object from a ResultSet.
+	 *
+	 *@param  rs                      ResultSet passed in from a database query
+	 *@return                         A Data object (com.stover.utils)
+	 *@exception  SQLException        !ToDo (Exception description)
+	 *@throws  java.sql.SQLException
+	 ***********************************************************/
+	private Data getDataFromResultSet(ResultSet rs) throws SQLException
+	{
+		ResultSetMetaData meta;
+		Data data = new Data();
+		meta = rs.getMetaData();
+		int numColumns = meta.getColumnCount();
+		String[] dbCols = new String[numColumns];
+		for (int count = 1; count <= numColumns; count++)
+		{
+			dbCols[count - 1] = meta.getColumnName(count);
+			data.addHeader(dbCols[count - 1]);
+		}
+		while (rs.next())
+		{
+			data.next();
+			for (int count = 0; count < numColumns; count++)
+			{
+				Object o = rs.getObject(count + 1);
+				if(o == null)
+				{
+				}
+				else if(o instanceof byte[])
+				{
+					o = new String((byte[])o);
+				}
+				data.addColumnValue(dbCols[count], o);
+			}
+		}
+		return data;
+	}
+}
+
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Entries b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Entries
new file mode 100644
index 0000000..c52135f
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Entries
@@ -0,0 +1,4 @@
+/ConnectionObject.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/DBConnectionManager.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/DBKey.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Repository b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Repository
new file mode 100644
index 0000000..d1cc501
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Root b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Tag b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/ConnectionObject.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/ConnectionObject.java
new file mode 100644
index 0000000..5d6697a
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/ConnectionObject.java
@@ -0,0 +1,306 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.jdbc.util;
+import java.sql.*;
+
+
+/*********************************************************
+ A wrapper class for a database Connection object.  This class holds
+ information about the state of the connection object in a pool managed by
+ a DBConnectionManager object.  It keeps track of how many times the
+ connection object has been used, the time of its last usage, and whether it
+ is currently in use.
+@author Michael Stover
+@version 1.0 10/13/1998
+ *****************************************************************/
+public class ConnectionObject  implements Runnable
+{
+  Connection con;
+  DBKey key;
+  int useCount,maxUsage;
+  long lastAccessed;
+  boolean inUse,inMaintenance;
+  DBConnectionManager manager;
+  Thread reset;
+  static long accessInterval=180000;
+
+  /******************************************************
+  Constructor - takes a connection object.
+@param man DBConnectionManager object.
+@param k DBKey object.
+  ******************************************************/
+  public ConnectionObject(DBConnectionManager man,DBKey k)
+  {
+	 key=k;
+	 manager=man;
+	 reset=new Thread(this);
+	 useCount=0;
+	 lastAccessed=System.currentTimeMillis();
+	 inMaintenance=true;
+	 inUse=false;
+	 con=null;
+	 maxUsage=key.getMaxUsage();
+	 reset.start();
+	/* try{
+		reset();
+	 }catch(SQLException e){e.printStackTrace();}*/
+  } // End Method
+
+/*************************************************************
+Gets whether the Connection Object is being maintained.
+@return true if the ConnectionObject is being maintained, false otherwise.
+****************************************************************/
+  public boolean getInMaintenance()
+  {
+	 return inMaintenance;
+  }
+
+/*************************************************************
+Sets whether the Connection Object is being maintained.
+@param b true if the ConnectionObject is being maintained, false otherwise.
+****************************************************************/
+  public void setInMaintenance(boolean b)
+  {
+	 inMaintenance=b;
+  }
+
+  /******************************************************
+  Gets the last time this object was accessed.
+@return Time (in milliseconds) the connection object was last used
+  ******************************************************/
+  public long getLastAccessed()
+  {
+	 return lastAccessed;
+  } // End Method
+
+/*************************************************************
+Closes out this object and returns resources to the system.
+*************************************************************/
+  public void close()
+  {
+	 if(con!=null)
+	 {
+		try{
+		  con.close();
+		}catch(SQLException e){}
+	 }
+	 con=null;
+  }
+
+  /******************************************************
+ Updates the last accessed time for the connection object.
+  ******************************************************/
+  public void update()
+  {
+	 lastAccessed=System.currentTimeMillis();
+  } // End Method
+
+  /******************************************************
+  Gets whether the connection object is currently in use.
+@return True if it is in use, false otherwise.
+  ******************************************************/
+  public boolean getInUse()
+  {
+	 return inUse;
+  } // End Method
+
+  /******************************************************
+  Grabs the connection and sets the inUse value to true.
+@return connection object
+  ******************************************************/
+  public synchronized Connection grab()
+  {
+	 Connection c=null;
+	 if(!inUse && !inMaintenance)
+	 {
+		if(con!=null)
+		{
+		  try{
+			 if(con.isClosed())
+			 {
+				inMaintenance=true;
+		 //   reset=new Thread(this);
+				reset.start();
+			 }
+			 else if(System.currentTimeMillis()-lastAccessed>accessInterval)
+			 {
+				inMaintenance=true;
+		 //   reset=new Thread(this);
+				reset.start();
+			 }
+			 else
+			 {
+				inUse=true;
+				c=con;
+			 }
+		  }catch(SQLException e){}
+		}
+		else
+		{
+		  inMaintenance=true;
+		 // reset=new Thread(this);
+		  reset.start();
+		}
+	 }
+	 return c;
+  }
+
+  /******************************************************
+  Gets the number of times this connection object has been used.
+@return Number of times the connection object has been used.
+  ******************************************************/
+  public int getUseCount()
+  {
+	 return useCount;
+  } // End Method
+
+/***************************************************
+Method to run in separate thread that resets the connection object
+*******************************************************/
+  public void run()
+  {
+	// Functions.javaLog("ConnectionObject: Got to here - 1");
+	 boolean set=true;
+	 while(set)
+	 {
+		try{
+		  reset();
+		  set=false;
+		 // Functions.javaLog("ConnectionObject: Got to here - 2");
+		}catch(SQLException e){System.out.println("ConnectionObject: e="+e.toString()+
+				  "url = "+key.getUrl());}
+	 }
+	// Functions.javaLog("ConnectionObject: Got to here - 3");
+	 reset=new Thread(this);
+  }
+
+  /******************************************************
+  Resets the use count, the last accessed time, and the in Use values
+	And replaces the old connection object with the new one.
+@param c new connection object to set to
+  ******************************************************/
+  public void reset()  throws SQLException
+  {
+	 if(con!=null)
+	 {
+	  // try{
+	  //   con.commit();
+	  // }catch(SQLException e){}
+		try{
+		  con.close();
+		}catch(Exception e){}
+		con=null;
+	 }
+	 con=manager.newConnection(key);
+	 useCount=0;
+	 lastAccessed=System.currentTimeMillis();
+	 inUse=false;
+	 inMaintenance=false;
+  } // End Method
+
+  /******************************************************
+  Releases the connection object.  Increments its usage count, updates
+	the last accessed time, and returns it for use in the pool.
+  ******************************************************/
+  public void release()
+  {
+	 useCount++;
+	 try{
+		if(con!=null)
+		{
+		  //con.commit();
+		  if(System.currentTimeMillis()-lastAccessed>accessInterval)
+		  {
+			 inMaintenance=true;
+		 //   reset=new Thread(this);
+			 reset.start();
+		  }
+		  else if(useCount>=maxUsage)
+		  {
+			 inMaintenance=true;
+			// reset=new Thread(this);
+			 reset.start();
+		  }
+		  else if(con.isClosed())
+		  {
+			 inMaintenance=true;
+		 //   reset=new Thread(this);
+			 reset.start();
+		  }
+		}
+		else
+		{
+		  inMaintenance=true;
+		 // reset=new Thread(this);
+		  reset.start();
+		}
+	 }catch(SQLException e){
+		inMaintenance=true;
+		reset.start();
+	 }
+	 inUse=false;
+	 lastAccessed=System.currentTimeMillis();
+  } // End Method
+
+  /******************************************************
+  Returns the connection held by this connection object.
+@return Connection object
+  ******************************************************/
+  public Connection getCon()
+  {
+	 return con;
+  } // End Method
+}
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/DBConnectionManager.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/DBConnectionManager.java
new file mode 100644
index 0000000..12df61d
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/DBConnectionManager.java
@@ -0,0 +1,291 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.jdbc.util;
+import java.sql.*;
+import java.util.*;
+
+/*****************************************************************
+ This class manages a pool of Connection objects (ConnectionObject).  This
+ pool is constantly checked for old, over-used, or dead connections in a
+ separated thread.  Connections are rented out and then given back by the
+ DBConnect object and its subclasses.  This class is not directly accessed
+ by the end-user objects.  It is accessed by the DBConnect object and its
+ subclasses.
+@author Michael Stover
+@version 1.0 10/13/1998
+ *****************************************************************/
+public class DBConnectionManager
+{
+  int absoluteMaxConnections=100;
+  long accessInterval=1800000;
+  Hashtable connections;
+  Hashtable rentedConnections;
+
+  static DBConnectionManager manager;
+
+/******************************************************************
+Constructor.
+*****************************************************************/
+  private DBConnectionManager()
+  {
+	 if(connections==null)
+		connections=new Hashtable();
+	 if(rentedConnections == null)
+		rentedConnections=new Hashtable();
+  }
+
+  public static DBConnectionManager getManager()
+  {
+		if(manager == null)
+		{
+			manager = new DBConnectionManager();
+		}
+		return manager;
+  }
+
+/*********************************************************************
+  Starts the connection manager going for a given database connection, and
+  returns the DBKey object required to get a Connection object for this
+  database.
+@param url URL of database to be connected to.
+@param username Username to use to connect to database.
+@param password Password to use to connect to database.
+@param driver Driver to use for the database.
+@param maxUsage Sets the maxUsage parameter for connections to this database.
+@param maxConnections Tells the DBConnectionManager how many connections to keep active.
+@return DBKey object. Returns null if connection fails.
+**********************************************************************/
+  public DBKey getKey(String url,String username,String password,
+			 String driver,int maxUsage,int maxConnections)
+  {
+	 DBKey key=new DBKey();
+	 if(registerDriver(driver))
+	 {
+		key.setDriver(driver);
+		key.setMaxConnections(maxConnections);
+		key.setMaxUsage(maxUsage);
+		key.setPassword(password);
+		key.setUrl(url);
+		key.setUsername(username);
+		if(!connections.containsKey(key))
+		  setup(key);
+	 }
+	 else
+		key=null;
+	 return key;
+  }
+
+  /******************************************************
+ Constructor.
+@param key DBKey that holds all information needed to set up a set of
+		  connections.
+  ******************************************************/
+  public void setup(DBKey key)
+  {
+	 /* Code used to create a JDBC log for debuggin purposes
+	 try{
+	 java.io.PrintWriter jdbcLog=new java.io.PrintWriter(new java.io.FileWriter(jdbcLogFile));
+	 DriverManager.setLogWriter(jdbcLog);
+	 }catch(Exception e){}*/
+	 String url=key.getUrl();
+	 String username=key.getUsername();
+	 String password=key.getPassword();
+	 int maxConnections=key.getMaxConnections();
+	 int maxUsage=key.getMaxUsage();
+	 ConnectionObject[] connectionArray;
+	 int dbMax;
+	 try{
+		DriverManager.registerDriver((java.sql.Driver)Class.forName(key.getDriver()).newInstance());
+		DatabaseMetaData md=DriverManager.getConnection(url,username,password).getMetaData();
+		dbMax=md.getMaxConnections();
+		if(dbMax>0 && maxConnections>dbMax)
+		{
+		  maxConnections=dbMax;
+		  key.setMaxConnections(maxConnections);
+		}
+		else if(maxConnections>absoluteMaxConnections)
+		{
+		  maxConnections=absoluteMaxConnections;
+		  key.setMaxConnections(maxConnections);
+		}
+	 }catch(Exception e){e.printStackTrace();
+		maxConnections=1;}
+	 connectionArray=new ConnectionObject[maxConnections];
+	 int count=-1;
+	 while(++count<maxConnections)
+		connectionArray[count]=new ConnectionObject(this,key);
+	 connections.put(key,connectionArray);
+	 System.gc();
+  } // End Method
+
+	public void shutdown()
+	{
+		Iterator iter = connections.keySet().iterator();
+		while (iter.hasNext()) {
+			close((DBKey)iter.next());
+		}
+	}
+
+
+
+  /******************************************************
+  Rents out a database connection object.
+@return Connection object.
+  ******************************************************/
+  public Connection getConnection(DBKey key)      //deleted synchronized
+  {
+	 ConnectionObject[] connectionArray=(ConnectionObject[])connections.get(key);
+	 int maxConnections=key.getMaxConnections();
+	 Connection c=null;
+	 int index=(int)(100*Math.random());
+	 int count=-1;
+	 while(++count<maxConnections && c==null)
+	 {
+		index++;
+		c=connectionArray[index%maxConnections].grab();
+	 }
+	 if(c!=null)
+		rentedConnections.put(c,connectionArray[index%maxConnections]);
+	 return c;
+  } // End Method
+
+  /******************************************************
+  Releases a connection back to the pool
+@param c Connection object being returned
+  ******************************************************/
+  public void releaseConnection(Connection c)         // deleted synchronized
+  {
+  	if(c == null)
+  	{
+  		return;
+  	}
+	 ConnectionObject connOb=(ConnectionObject)rentedConnections.get(c);
+	 if(connOb!=null)
+	 {
+		rentedConnections.remove(c);
+		connOb.release();
+	 }
+	 else
+	 {
+		System.out.println("DBConnectionManager: Lost a connection connection='"+c+"'\r\n");
+		c=null;
+	 }
+  } // End Method
+
+
+ /*********************************************************
+  Returns a new java.sql.Connection object.
+@throws java.sql.SQLException
+ *********************************************************/
+  public Connection newConnection(DBKey key) throws SQLException       //deleted synchronized
+  {
+	 Connection c;
+	 c=DriverManager.getConnection(key.getUrl(),key.getUsername(),key.getPassword());
+	 return c;
+  }
+
+/*************************************************************
+Closes out this object and returns resources to the system.
+*************************************************************/
+  public void close(DBKey key)
+  {
+	 ConnectionObject[] connectionArray=(ConnectionObject[])connections.get(key);
+	 int count=-1;
+	 while(++count<connectionArray.length)
+	 {
+		connectionArray[count].close();
+		connectionArray[count]=null;
+	 }
+	 connections.remove(key);
+  }
+
+
+
+/*********************************************************************
+Registers a driver for a database.
+@param driver full classname for the driver.
+@return True if successful, false otherwise.
+***********************************************************************/
+  public boolean registerDriver(String driver)
+  {
+	 try{
+		DriverManager.registerDriver((Driver)Class.forName(driver).newInstance());
+	 }catch(Exception e){e.printStackTrace(); return false;}
+	 return true;
+  }
+
+
+/*******************************************************************
+ Private method to check if database exists.
+@return True if database exists, false otherwise
+ ******************************************************************
+  private synchronized boolean checkForDatabase()
+  {
+	 boolean connected=true;
+	 try
+	 {
+		DatabaseMetaData dmd=connection[counter].getCon().getMetaData();
+		int cons=dmd.getMaxConnections();
+	 }catch(SQLException e){connected=false;e.printStackTrace();}
+
+	 return connected;
+  }  //end of method      */
+}
+
+
+
+
+
diff --git a/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/DBKey.java b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/DBKey.java
new file mode 100644
index 0000000..e457599
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/util/DBKey.java
@@ -0,0 +1,175 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+
+package org.apache.jmeter.protocol.jdbc.util;
+
+import java.io.*;
+
+public class DBKey implements Serializable{
+
+
+  public DBKey()
+  {
+  }
+
+  void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException
+  {
+	 ois.defaultReadObject();
+  }
+
+  void writeObject(ObjectOutputStream oos) throws IOException
+  {
+	 oos.defaultWriteObject();
+  }
+
+  public void setUrl(String newUrl)
+  {
+	 url = newUrl;
+  }
+
+  public String getUrl()
+  {
+	 return url;
+  }
+
+  public void setUsername(String newUsername)
+  {
+	 username = newUsername;
+  }
+
+  public String getUsername()
+  {
+	 return username;
+  }
+
+  public void setPassword(String newPassword)
+  {
+	 password = newPassword;
+  }
+
+  public String getPassword()
+  {
+	 return password;
+  }
+
+  public void setDriver(String newDriver)
+  {
+	 driver = newDriver;
+  }
+
+  public String getDriver()
+  {
+	 return driver;
+  }
+
+  public void setMaxUsage(int newMaxUsage)
+  {
+	 maxUsage = newMaxUsage;
+  }
+
+  public int getMaxUsage()
+  {
+	 return maxUsage;
+  }
+
+  public void setMaxConnections(int newMaxConnections)
+  {
+	 maxConnections = newMaxConnections;
+  }
+
+  public int getMaxConnections()
+  {
+	 return maxConnections;
+  }
+
+/**************************************************************
+  Determines if the two DBKey objects have the same property values.
+@param key DBKey to compare with this one.
+@return bool True if equal, false otherwise.
+****************************************************************/
+  public boolean equals(Object key)
+  {
+	 if(key instanceof DBKey)
+		return url.equals(((DBKey)key).getUrl());
+	 else
+		return false;
+  }
+
+  public int hashCode()
+  {
+	 return url.hashCode()*11;
+  }
+
+  public String toString()
+  {
+	 StringBuffer ret = new StringBuffer();
+	 ret.append("Class=DBKey("+"\n");
+	 ret.append("driver="+driver+"\n");
+	 ret.append("url="+url+"\n");
+	 ret.append("username="+username+"\n");
+	 ret.append("Number of connections="+maxConnections+"\n");
+	 ret.append("Max times each connection used before renewing="+maxUsage+"\n");
+	 ret.append(")");
+	 return ret.toString();
+  }
+
+  private String url;
+  private String username;
+  private String password;
+  private String driver;
+  private int maxUsage;
+  private int maxConnections;
+}
+
diff --git a/jakarta-jmeter/src/protocol/jndi/CVS/Entries b/jakarta-jmeter/src/protocol/jndi/CVS/Entries
new file mode 100644
index 0000000..0771fb7
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/CVS/Entries
@@ -0,0 +1,3 @@
+D/config////
+D/control////
+D/sampler////
diff --git a/jakarta-jmeter/src/protocol/jndi/CVS/Repository b/jakarta-jmeter/src/protocol/jndi/CVS/Repository
new file mode 100644
index 0000000..4ba88e5
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jndi
diff --git a/jakarta-jmeter/src/protocol/jndi/CVS/Root b/jakarta-jmeter/src/protocol/jndi/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jndi/CVS/Tag b/jakarta-jmeter/src/protocol/jndi/CVS/Tag
new file mode 100644
index 0000000..f4b6a59
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/CVS/Tag
@@ -0,0 +1 @@
+Tv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jndi/config/CVS/Entries b/jakarta-jmeter/src/protocol/jndi/config/CVS/Entries
new file mode 100644
index 0000000..98d3d6c
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/CVS/Entries
@@ -0,0 +1,6 @@
+/JndiConfig.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/LookupConfig.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/MethodConfig.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/MethodConfigUserObject.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/MethodConfigUserObjectException.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/jndi/config/CVS/Repository b/jakarta-jmeter/src/protocol/jndi/config/CVS/Repository
new file mode 100644
index 0000000..b6c6beb
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jndi/config
diff --git a/jakarta-jmeter/src/protocol/jndi/config/CVS/Root b/jakarta-jmeter/src/protocol/jndi/config/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jndi/config/CVS/Tag b/jakarta-jmeter/src/protocol/jndi/config/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jndi/config/JndiConfig.java b/jakarta-jmeter/src/protocol/jndi/config/JndiConfig.java
new file mode 100644
index 0000000..2ab12e9
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/JndiConfig.java
@@ -0,0 +1,176 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config;
+
+import java.io.Serializable;
+
+import javax.naming.InitialContext;
+
+import org.apache.jmeter.config.AbstractConfigElement;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.ejb.jndi.config.LookupConfig;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.log4j.Category;
+
+/**
+ * Stores the configuration for JNDI sampling
+ *
+ * @author	Khor Soon Hin
+ * @created	2001 Dec 17
+ * @modified	2001 Dec 17
+ */
+public class JndiConfig extends AbstractConfigElement implements Serializable
+{
+  private static Category catClass = Category.getInstance(
+	JndiConfig.class.getName());
+
+  public static final int JNDI_INITIAL_CONTEXT_FACTORY = 0;
+  public static final int JNDI_OBJECT_FACTORIES = 1;
+  public static final int JNDI_STATE_FACTORIES = 2;
+  public static final int JNDI_URL_PKG_PREFIXES = 3;
+  public static final int JNDI_PROVIDER_URL = 4;
+  public static final int JNDI_DNS_URL = 5;
+  public static final int JNDI_AUTHORITATIVE = 6;
+  public static final int JNDI_BATCHSIZE = 7;
+  public static final int JNDI_REFERRAL = 8;
+  public static final int JNDI_SECURITY_PROTOCOL = 9;
+  public static final int JNDI_SECURITY_AUTHENTICATION = 10;
+  public static final int JNDI_SECURITY_PRINCIPAL = 11;
+  public static final int JNDI_SECURITY_CREDENTIALS = 12;
+  public static final int JNDI_LANGUAGE = 13;
+  public static final int JNDI_APPLET = 14;
+
+  public static final String[] JNDI_PROPS = {
+	InitialContext.INITIAL_CONTEXT_FACTORY,
+	InitialContext.OBJECT_FACTORIES,
+	InitialContext.STATE_FACTORIES,
+	InitialContext.URL_PKG_PREFIXES,
+	InitialContext.PROVIDER_URL,
+	InitialContext.DNS_URL,
+	InitialContext.AUTHORITATIVE,
+	InitialContext.BATCHSIZE,
+	InitialContext.REFERRAL,
+	InitialContext.SECURITY_PROTOCOL,
+	InitialContext.SECURITY_AUTHENTICATION,
+	InitialContext.SECURITY_PRINCIPAL,
+	InitialContext.SECURITY_CREDENTIALS,
+	InitialContext.LANGUAGE,
+	InitialContext.APPLET
+	};
+
+  protected InitialContext initCtx = null;
+
+  public JndiConfig()
+  {
+  }
+
+  public Class getGuiClass()
+  {
+    return org.apache.jmeter.ejb.jndi.config.gui.JndiConfigGui.class;
+  }
+
+  public Object clone()
+  {
+    JndiConfig newConfig = new JndiConfig();
+    configureClone(newConfig);
+    return newConfig;
+  }
+
+  public String getValue(int i)
+  {
+    String string = (String)this.getProperty(JNDI_PROPS[i]);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getValue1 : int - " + i);
+      catClass.debug("getValue1 : name - " + JNDI_PROPS[i]);
+      catClass.debug("getValue1 : value - " + string);
+    }
+    return string;
+  }
+
+  public void setValue(int i, String string)
+  {
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("setValue1 : int - " + i);
+      catClass.debug("setValue1 : name - " + JNDI_PROPS[i]);
+      catClass.debug("setValue1 : value - " + string);
+    }
+    this.putProperty(JNDI_PROPS[i], string);
+  }
+
+  public String getClassLabel()
+  {
+    return JMeterUtils.getResString("jndi_config_title");
+  }
+
+  public void addConfigElement(ConfigElement config)
+  {
+    if(config instanceof JndiConfig)
+    {
+      updatePropertyIfAbsent((JndiConfig)config);
+    }
+  }
+
+  public void setInitialContext(InitialContext initCtx)
+  {
+    this.initCtx = initCtx;
+  }
+
+  public InitialContext getInitialContext()
+  { 
+    return initCtx;
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/LookupConfig.java b/jakarta-jmeter/src/protocol/jndi/config/LookupConfig.java
new file mode 100644
index 0000000..5fc23d2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/LookupConfig.java
@@ -0,0 +1,122 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config;
+
+import java.io.Serializable;
+
+import org.apache.jmeter.config.AbstractConfigElement;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.ejb.jndi.config.gui.LookupConfigGui;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.log4j.Category;
+
+/**
+ * Stores the configuration for JNDI lookup
+ *
+ * @author	Khor Soon Hin
+ * @created	2001 Dec 19
+ * @modified	2001 Dec 19
+ */
+public class LookupConfig extends AbstractConfigElement implements Serializable
+{
+  private static Category catClass = Category.getInstance(
+	LookupConfig.class.getName());
+
+  protected static final String LOOKUP_NAME = "lookup_name";
+
+  public LookupConfig()
+  {
+  }
+
+  public Class getGuiClass()
+  {
+    return org.apache.jmeter.ejb.jndi.config.gui.LookupConfigGui.class;
+  }
+
+  public Object clone()
+  {
+    LookupConfig newConfig = new LookupConfig();
+    configureClone(newConfig);
+    return newConfig;
+  }
+
+  public String getLookupName()
+  {
+    String string = (String)this.getProperty(LOOKUP_NAME);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getLookupName1 : lookup name - " + string);
+    }
+    return string;
+  }
+
+  public void setLookupName(String string)
+  {
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("setLookupName1 : lookup name  - " + string);
+    }
+    this.putProperty(LOOKUP_NAME, string);
+  }
+
+  public String getClassLabel()
+  {
+    return JMeterUtils.getResString("jndi_lookup_title");
+  }
+
+  public void addConfigElement(ConfigElement config)
+  {
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/MethodConfig.java b/jakarta-jmeter/src/protocol/jndi/config/MethodConfig.java
new file mode 100644
index 0000000..aeea499
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/MethodConfig.java
@@ -0,0 +1,331 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config;
+
+import java.io.Serializable;
+import java.lang.reflect.Method;
+import java.util.ArrayList;
+
+import org.apache.jmeter.config.AbstractConfigElement;
+import org.apache.jmeter.config.ConfigElement;
+import org.apache.jmeter.ejb.jndi.config.gui.MethodConfigGui;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.log4j.Category;
+
+/**
+ * Stores the configuration for remote method execution
+ *
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2001 Dec 24
+ * @modified	2001 Dec 24
+ */
+public class MethodConfig extends AbstractConfigElement implements Serializable
+{
+  private static Category catClass = Category.getInstance(
+	MethodConfig.class.getName());
+
+  protected static final String METHOD_HOME_NAME = 
+	"MethodConfig.method_home_name";
+  protected static final String METHOD_HOME_LIST = 
+	"MethodConfig.method_home_list";
+  protected static final String METHOD_HOME_PARMS = 
+	"MethodConfig.method_home_parms";
+  protected static final String METHOD_REMOTE_INTERFACE_LIST = 
+	"MethodConfig.method_remote_name_list";
+  protected static final String METHOD_REMOTE_NAME =
+	"MethodConfig.method_remote_name";
+  protected static final String METHOD_REMOTE_LIST =
+	"MethodConfig.method_remote_list";
+  protected static final String METHOD_REMOTE_PARMS =
+	"MethodConfig.method_remote_parms";
+  protected static final String METHOD_CONFIG_GUI =
+	"MethodConfig.method_config_gui";
+	// Attach the gui to the model.  This enables us to get the gui
+	// instance given the model.  This is important for MethodConfig
+	// class since sampling this class generates Method names
+	// and parameters (through reflection) which will be used in the
+	// MethodConfigGui
+  protected static final String METHOD_REMOTE_INTERFACE_TYPE = 
+	"MethodConfig.method_remote_interface_type";
+
+  // Below are the states the MethodConfig can be in. Depending on the state
+  // which MethodConfig is in, when 'Run' is executed, the sampler
+  // will perform different things.  See explanation of each state below.
+  public static final int METHOD_GET_HOME_NAMES = 0;
+	// reflect on all the method names of the Home interface
+  public static final int METHOD_GET_HOME_PARMS = 1;
+	// with a Home method selected reflect on all parms of the method
+  public static final int METHOD_INVOKE_HOME = 2;
+	// with all parms of the selected method filled, invoke the method
+  public static final int METHOD_SELECT_REMOTE_INTERFACE = 3;
+  public static final int METHOD_GET_REMOTE_NAMES = 4;
+	// reflect on all the method names of the Remote interface
+  public static final int METHOD_GET_REMOTE_PARMS = 5;
+	// with a Remote method selected reflect on all parms of the method
+  public static final int METHOD_INVOKE_REMOTE = 6;
+  public static final int METHOD_COMPLETE = 7;
+
+  protected Method homeMethod;
+  protected Method remoteMethod;
+  protected int state;
+  // This variable is always false until the 'Reflect' button on the
+  // ejb method config panel is clicked.  This allows the JNDISampler
+  // to differentiate between sampling and relfection since it does both.
+  // When it does reflection, it will only run one reflection step at each time
+  // e.g. the first reflection will expose all methods of the home object
+  // returned by the lookup, the second the parms of the selected home object
+  // method etc.  For sampling all the steps will be run.
+  protected boolean reflectionStatus = false;
+	
+  public MethodConfig()
+  {
+  }
+
+  public Class getGuiClass()
+  {
+    return org.apache.jmeter.ejb.jndi.config.gui.MethodConfigGui.class;
+  }
+
+  public Object clone()
+  {
+    MethodConfig newConfig = new MethodConfig();
+    configureClone(newConfig);
+    return newConfig;
+  }
+
+  public String getMethodHomeName()
+  {
+    String string = (String)this.getProperty(METHOD_HOME_NAME);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getMethodHomeName1 : method home name - " + string);
+    }
+    return string;
+  }
+
+  public void setMethodHomeName(String string)
+  {
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("setMethodHomeName1 : method home name  - " + string);
+    }
+    this.putProperty(METHOD_HOME_NAME, string);
+  }
+
+  public String getMethodRemoteName()
+  {
+    String string = (String)this.getProperty(METHOD_REMOTE_NAME);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getMethodRemoteName1 : method remote name - " + string);
+    }
+    return string;
+  }
+
+  public void setMethodRemoteName(Object ref)
+  {
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("setMethodRemoteName1 : method remote name  - " + ref);
+    }
+    this.putProperty(METHOD_REMOTE_NAME, ref);
+  }
+
+  public Object getRemoteInterfaceType()
+  {
+    Object ref  = this.getProperty(METHOD_REMOTE_INTERFACE_TYPE);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getRemoteInterfaceType1 : remote interface - " + 
+	ref);
+    }
+    return ref;
+  }
+
+  public void setRemoteInterfaceType(Object ref)
+  {
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("setRemoteInterfaceType1 : remote interface - " +
+	ref);
+    }
+    this.putProperty(METHOD_REMOTE_INTERFACE_TYPE, ref);
+  }
+
+  public Object getRemoteInterfaceList()
+  {
+    Object ref = this.getProperty(METHOD_REMOTE_INTERFACE_LIST);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getRemoteInterfaceList1 : remote interface list - " + 
+	ref);
+    }
+    return ref;
+  }
+
+  public void setRemoteInterfaceList(Object ref)
+  {
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("setRemoteInterfaceList1 : remote interface list - " +
+	ref);
+    }
+    this.putProperty(METHOD_REMOTE_INTERFACE_LIST, ref);
+  }
+
+  public String[] getMethodHomeList()
+  {
+    String[] strings = (String[])this.getProperty(METHOD_HOME_LIST);
+    return strings;
+  }
+
+  public void setMethodHomeList(String[] list)
+  {
+    this.putProperty(METHOD_HOME_LIST, list);
+  }
+
+  public String[] getMethodRemoteList()
+  {
+    String[] strings = (String[])this.getProperty(METHOD_REMOTE_LIST);
+    return strings;
+  }
+
+  public void setMethodRemoteList(String[] list)
+  {
+    this.putProperty(METHOD_REMOTE_LIST, list);
+  }
+
+  public Class[] getMethodHomeParms()
+  {
+    Class[] classes= (Class[])this.getProperty(METHOD_HOME_PARMS);
+    return classes;
+  }
+
+  public void setMethodHomeParms(Class[] list)
+  {
+    this.putProperty(METHOD_HOME_PARMS, list);
+  }
+
+  public  Class[] getMethodRemoteParms()
+  {
+    Class[] classes= (Class[])this.getProperty(METHOD_REMOTE_PARMS);
+    return classes;
+  }
+
+  public void setMethodRemoteParms(Class[] list)
+  {
+    this.putProperty(METHOD_REMOTE_PARMS, list);
+  }
+
+  public int getState()
+  {
+    return state;
+  }
+
+  public void setState(int current)
+  {
+    state = current;
+  }
+
+  public String getClassLabel()
+  {
+    return JMeterUtils.getResString("jndi_method_title");
+  }
+
+  public void addConfigElement(ConfigElement config)
+  {
+  }
+
+  public void setGui(MethodConfigGui gui)
+  {
+    this.putProperty(METHOD_CONFIG_GUI, gui);
+  }
+
+  public MethodConfigGui getGui()
+  {
+    return (MethodConfigGui)this.getProperty(METHOD_CONFIG_GUI);
+  }
+
+  public void setHomeMethod(Method aMethod)
+  {
+    homeMethod = aMethod;
+  }
+
+  public Method getHomeMethod()
+  {
+    return homeMethod;
+  }
+
+  public void setRemoteMethod(Method aMethod)
+  {
+    remoteMethod = aMethod;
+  }
+
+  public Method getRemoteMethod()
+  {
+    return remoteMethod;
+  }
+
+  public void setReflectionStatus(boolean status)
+  { 
+    reflectionStatus = status;
+  }
+
+  public boolean getReflectionStatus()
+  {
+    return reflectionStatus;
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/MethodConfigUserObject.java b/jakarta-jmeter/src/protocol/jndi/config/MethodConfigUserObject.java
new file mode 100644
index 0000000..c8ee9db
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/MethodConfigUserObject.java
@@ -0,0 +1,172 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config;
+
+import java.lang.Character;
+
+import org.apache.jmeter.ejb.jndi.config.MethodConfigUserObjectException;
+import org.apache.log4j.Category;
+/**
+ * Given the class of the parameter and its string value this class will
+ * attempt to create an appropriate object to represent it e.g. if given
+ * a class of int and value 8, a Integer object with the 8 value will be
+ * created.  Failing which a MethodConfigUserObjectException will be thrown.
+ *
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2001 Jan 08
+ * @modified	2001 Jan 08
+ */
+public class MethodConfigUserObject 
+{
+  private static Category catClass = Category.getInstance(
+	MethodConfigUserObject.class.getName());
+
+  protected static final String INTEGER = "int";
+  protected static final String LONG = "long";
+  protected static final String FLOAT = "float";
+  protected static final String DOUBLE = "double";
+  protected static final String BOOLEAN = "boolean";
+  protected static final String CHAR = "char";
+  protected static final String BYTE = "byte";
+  protected static final String SHORT = "short";
+  protected static final String STRING_CLASS = "java.lang.String";
+
+  protected Object object = null;
+  protected Class type = null;
+
+  public MethodConfigUserObject(Class type, String value)
+	throws MethodConfigUserObjectException
+  {
+    if(type == null || value == null)
+    {
+      throw new MethodConfigUserObjectException(
+	"Parameters of MethodConfigUserObject constructor cannot be null");
+    }
+    this.type = type;
+    // ensure that the class type is one of the 8 primitives
+    try
+    { 
+      if(type.getName().equals(INTEGER))
+      {
+        object = new Integer(value);
+      }
+      else if(type.getName().equals(LONG))
+      {
+        object = new Long(value);
+      }
+      else if(type.getName().equals(FLOAT))
+      {
+        object = new Float(value);
+      }
+      else if(type.getName().equals(DOUBLE))
+      {
+        object = new Double(value);
+      }
+      else if(type.getName().equals(BOOLEAN))
+      {
+        object = new Boolean(value);
+      }
+      else if(type.getName().equals(CHAR))
+      {
+        if(value.length() == 1)
+        {
+          object = new Character(value.charAt(0));
+        }
+        else
+        {
+          throw new MethodConfigUserObjectException(
+		"Value format not compatible with class");
+        }
+      }
+      else if(type.getName().equals(BYTE))
+      {
+        object = new Byte(value);
+      }
+      else if(type.getName().equals(SHORT))
+      {
+        object = new Short(value);
+      }
+      else if(type.getName().equals(STRING_CLASS))
+      {
+        object = new String(value);
+      }
+    }
+    catch(NumberFormatException e)
+    { 
+      throw new MethodConfigUserObjectException(
+	"Value format not compatible with class");
+    }
+  }
+
+  public Object getObject()
+  {
+    return object;
+  }
+
+  public Class getType()
+  {
+    return type;
+  }
+
+  public String toString()
+  {
+    StringBuffer strbuff = new StringBuffer();
+    strbuff.append(type.getName());
+    strbuff.append(" : ");
+    strbuff.append(object);
+    return strbuff.toString();
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/MethodConfigUserObjectException.java b/jakarta-jmeter/src/protocol/jndi/config/MethodConfigUserObjectException.java
new file mode 100644
index 0000000..4daf1d8
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/MethodConfigUserObjectException.java
@@ -0,0 +1,78 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config;
+
+import java.lang.Exception;
+
+import org.apache.log4j.Category;
+/**
+ * Exception thrown when creating MethodConfigUserObject if the value
+ * is not compatible for the class.
+ *
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2002 Jan 08
+ * @modified	2002 Jan 11
+ */
+public class MethodConfigUserObjectException extends Exception
+{
+  private static Category catClass = Category.getInstance(
+	MethodConfigUserObjectException.class.getName());
+
+  public MethodConfigUserObjectException(String string)
+  {
+    super(string);
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Entries b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Entries
new file mode 100644
index 0000000..65939a6
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Entries
@@ -0,0 +1,5 @@
+/JndiConfigGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/LookupConfigGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/MethodConfigDialog.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+/MethodConfigGui.java/1.1/Sun Aug 11 19:24:53 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Repository b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Repository
new file mode 100644
index 0000000..fd9b7bf
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jndi/config/gui
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Root b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Tag b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/JndiConfigGui.java b/jakarta-jmeter/src/protocol/jndi/config/gui/JndiConfigGui.java
new file mode 100644
index 0000000..4da7b53
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/JndiConfigGui.java
@@ -0,0 +1,222 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config.gui;
+
+import javax.swing.*;
+import javax.swing.border.*;
+import java.awt.event.*;
+import javax.naming.InitialContext;
+import java.awt.*;
+import java.util.*;
+
+import org.apache.jmeter.gui.ModelSupported;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.VerticalLayout;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.ejb.jndi.config.JndiConfig;
+import org.apache.log4j.Category;
+
+/**
+ * Provides the gui interface to configure JNDI sampling
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2001 Dec 17
+ * @modified	2001 Dec 17
+ */
+public class JndiConfigGui extends JPanel implements ModelSupported,
+	KeyListener
+{
+  private static Category catClass = Category.getInstance(
+	JndiConfigGui.class.getName());
+
+  protected JTextField[] jndi_fields = new JTextField[JndiConfig.JNDI_PROPS.length];
+
+  protected NamePanel namePanel;
+  protected boolean displayName;
+  protected JndiConfig model;
+
+  public JndiConfigGui()
+  {
+    displayName = true;
+  }
+
+  public JndiConfigGui(boolean displayName)
+  {
+    this.displayName = displayName;
+  }
+
+  public void setModel(Object model)
+  {
+    this.model = (JndiConfig)model;
+    init();
+  }
+
+  public void updateGui()
+  {
+    for(int i = 0; i < JndiConfig.JNDI_PROPS.length; i++)
+    {
+      jndi_fields[i].setText(model.getValue(i)); 
+    }
+  }
+
+  protected void init()
+  {
+    for(int i = 0; i < JndiConfig.JNDI_PROPS.length; i++)
+    {
+      jndi_fields[i] = new JTextField(20);
+    }
+    if(displayName)
+    {
+      this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, 
+	VerticalLayout.TOP));
+      // main panel
+      JPanel mainPanel = new JPanel();
+      Border margin = new EmptyBorder(10, 10, 5, 10);
+      mainPanel.setBorder(margin);
+      mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+      // title
+      JLabel panelTitleLabel = new JLabel(
+	JMeterUtils.getResString("jndi_config_title"));
+      Font curFont = panelTitleLabel.getFont();
+      int curFontSize = curFont.getSize();
+      curFontSize += 4;
+      panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+      mainPanel.add(panelTitleLabel);
+
+      // name
+      namePanel = new NamePanel(model);
+      mainPanel.add(namePanel);
+
+      // jndi properties
+      JPanel urlJNDIPanel = new JPanel();
+      urlJNDIPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+      urlJNDIPanel.setBorder(BorderFactory.createTitledBorder(
+	JMeterUtils.getResString("jndi_url_jndi_props")));
+
+      for(int i = 0; i < JndiConfig.JNDI_PROPS.length; i++)
+      {
+        urlJNDIPanel.add(getPanel(i));
+      }
+
+      mainPanel.add(urlJNDIPanel);
+      this.add(mainPanel);
+    }
+    else
+    {
+      this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+      // url and driver class
+      JPanel urlJNDIPanel = new JPanel();
+      urlJNDIPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+      urlJNDIPanel.setBorder(BorderFactory.createTitledBorder(
+	JMeterUtils.getResString("jndi_url_jndi_props")));
+
+      for(int i = 0; i < JndiConfig.JNDI_PROPS.length; i++)
+      {
+        urlJNDIPanel.add(getPanel(i));
+      }
+
+      this.add(urlJNDIPanel);
+    }
+  }
+
+  protected JPanel getPanel(int i)
+  {
+    catClass.info("Start : getPanel1");
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("getPanel1 : Panel no. - " + i);
+      catClass.debug("getPanel1 : Panel name - " + JndiConfig.JNDI_PROPS[i]);
+      catClass.debug("getPanel1 : Panel value - " + model.getValue(i));
+    }
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JndiConfig.JNDI_PROPS[i]));
+    jndi_fields[i].setText(model.getValue(i));
+    jndi_fields[i].setName(JndiConfig.JNDI_PROPS[i]);
+    jndi_fields[i].addKeyListener(this);
+    panel.add(jndi_fields[i]);
+    catClass.info("End : getPanel1");
+    return panel;
+  }
+
+  public void keyPressed(KeyEvent e)
+  {
+  }
+
+  public void keyTyped(KeyEvent e)
+  {
+  }
+
+  public void keyReleased(KeyEvent e)
+  {
+    String name = e.getComponent().getName();
+    int i = 0;
+    while(i < JndiConfig.JNDI_PROPS.length) 
+    {
+      if(name.equals(JndiConfig.JNDI_PROPS[i]))
+      {
+        break;
+      }
+      i++;
+    }
+    if(i < JndiConfig.JNDI_PROPS.length)
+    {
+      model.setValue(i, jndi_fields[i].getText());
+    }
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/LookupConfigGui.java b/jakarta-jmeter/src/protocol/jndi/config/gui/LookupConfigGui.java
new file mode 100644
index 0000000..b739be2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/LookupConfigGui.java
@@ -0,0 +1,199 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config.gui;
+
+import javax.swing.*;
+import javax.swing.border.*;
+import java.awt.event.*;
+import javax.naming.InitialContext;
+import java.awt.*;
+import java.util.*;
+
+import org.apache.jmeter.gui.ModelSupported;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.VerticalLayout;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.ejb.jndi.config.LookupConfig;
+import org.apache.log4j.Category;
+
+/**
+ * Provides the gui interface to configure JNDI lookup
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2001 Dec 18
+ * @modified	2001 Dec 18
+ */
+public class LookupConfigGui extends JPanel implements ModelSupported,
+	KeyListener
+{
+  private static Category catClass = Category.getInstance(
+	LookupConfigGui.class.getName());
+
+  protected JTextField lookupField;
+
+  protected NamePanel namePanel;
+  protected boolean displayName;
+  protected LookupConfig model;
+
+  public LookupConfigGui()
+  {
+    displayName = true;
+  }
+
+  public LookupConfigGui(boolean displayName)
+  {
+    this.displayName = displayName;
+  }
+
+  public void setModel(Object model)
+  {
+    this.model = (LookupConfig)model;
+    init();
+  }
+
+  public void updateGui()
+  {
+    lookupField.setText(model.getLookupName());
+    if(displayName)
+    {
+      namePanel.updateGui();
+    }
+  }
+
+  protected void init()
+  {
+    lookupField = new JTextField(20);
+    if(displayName)
+    {
+      this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, 
+	VerticalLayout.TOP));
+      // main panel
+      JPanel mainPanel = new JPanel();
+      Border margin = new EmptyBorder(10, 10, 5, 10);
+      mainPanel.setBorder(margin);
+      mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+      // title
+      JLabel panelTitleLabel = new JLabel(
+	JMeterUtils.getResString("jndi_lookup_title"));
+      Font curFont = panelTitleLabel.getFont();
+      int curFontSize = curFont.getSize();
+      curFontSize += 4;
+      panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(), curFontSize));
+      mainPanel.add(panelTitleLabel);
+
+      // name
+      namePanel = new NamePanel(model);
+      mainPanel.add(namePanel);
+
+      // jndi properties
+      JPanel jndiPanel = new JPanel();
+      jndiPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+      jndiPanel.setBorder(BorderFactory.createTitledBorder(
+	JMeterUtils.getResString("jndi_lookup_name")));
+
+      jndiPanel.add(getLookupNamePanel());
+
+      mainPanel.add(jndiPanel);
+      this.add(mainPanel);
+    }
+    else
+    {
+      this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+      // url and driver class
+      JPanel jndiPanel = new JPanel();
+      jndiPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+      jndiPanel.setBorder(BorderFactory.createTitledBorder(
+	JMeterUtils.getResString("jndi_lookup_name")));
+
+      jndiPanel.add(getLookupNamePanel());
+
+      this.add(jndiPanel);
+    }
+  }
+
+  protected JPanel getLookupNamePanel()
+  {
+    catClass.info("Start : getLookupNamePanel1");
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JMeterUtils.getResString("jndi_lookup_name")));
+    lookupField.setText(model.getLookupName());
+    lookupField.setName(JMeterUtils.getResString("jndi_lookup_name"));
+    lookupField.addKeyListener(this);
+    panel.add(lookupField);
+    catClass.info("End : getLookupNamePanel1");
+    return panel;
+  }
+
+  public void keyPressed(KeyEvent e)
+  {
+  }
+
+  public void keyTyped(KeyEvent e)
+  {
+  }
+
+  public void keyReleased(KeyEvent e)
+  {
+    String name = e.getComponent().getName();
+    if(name.equals(JMeterUtils.getResString("jndi_lookup_name")))
+    {
+      model.setLookupName(lookupField.getText());
+    }
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/MethodConfigDialog.java b/jakarta-jmeter/src/protocol/jndi/config/gui/MethodConfigDialog.java
new file mode 100644
index 0000000..15bd03f
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/MethodConfigDialog.java
@@ -0,0 +1,191 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config.gui;
+
+import java.awt.*;
+import java.awt.event.*;
+import java.beans.*;
+import javax.swing.*;
+import javax.swing.event.*;
+
+import org.apache.jmeter.ejb.jndi.config.MethodConfigUserObject;
+import org.apache.jmeter.ejb.jndi.config.MethodConfigUserObjectException;
+import org.apache.log4j.Category;
+
+/**
+ * Dialog to allow user to key in value for their method parameters
+ *
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2002 Jan 08
+ * @modified	2002 Jan 08
+ */
+public class MethodConfigDialog extends JDialog
+{
+  private static Category catClass = Category.getInstance(
+	MethodConfigDialog.class.getName());
+
+  protected JOptionPane optionPane;
+  protected JTextField textField;
+  protected JLabel classLabel;
+  protected MethodConfigUserObject userObject;
+
+  public MethodConfigDialog(Frame aFrame, final Class type)
+  {
+    super(aFrame, true);
+    classLabel = new JLabel(type.getName());
+    textField = new JTextField(10);
+    Object[] array = {classLabel, textField};
+
+    final String btnString1 = "Ok";
+    final String btnString2 = "Cancel";
+    Object[] options = {btnString1, btnString2};
+
+    optionPane = new JOptionPane(
+			array,
+			JOptionPane.QUESTION_MESSAGE,
+			JOptionPane.OK_CANCEL_OPTION,
+			null,
+			options,
+			options[0]);
+    setContentPane(optionPane);
+    setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
+    addWindowListener(new WindowAdapter()
+	{
+	}
+	);
+    textField.addActionListener(new ActionListener()
+	{
+          public void actionPerformed(ActionEvent e)
+	  {
+	    optionPane.setValue(btnString1);
+	  }
+	}
+	);
+    optionPane.addPropertyChangeListener(new PropertyChangeListener()
+	{
+	  public void propertyChange(PropertyChangeEvent e)
+	  {
+	    catClass.debug("Start : propertyChange1");
+	    String prop = e.getPropertyName();
+	    if(catClass.isDebugEnabled())
+	    {
+	      catClass.debug("propertyChange1 : property name - " + prop);
+	    }
+catClass.debug("JOptionPane.INPUT_VALUE_PROPERTY - " + JOptionPane.INPUT_VALUE_PROPERTY);
+catClass.debug("optionPane.getValue() - " + optionPane.getValue());
+catClass.debug("optionPane.getInputValue() - " + optionPane.getInputValue());
+	    Object value = null;
+	    if(isVisible()
+		&& (e.getSource() == optionPane)
+		&& prop.equals(JOptionPane.VALUE_PROPERTY))
+            {
+              value = optionPane.getValue();
+	      if(catClass.isDebugEnabled())
+	      {
+	        catClass.debug("propertyChange1 : optionPane value - " + value);
+	      }
+
+              // reset the JOptionPane's value
+	      // If you don't don this then the next time the user
+	      // presses ths same button no event will be fired
+              optionPane.setValue(JOptionPane.UNINITIALIZED_VALUE);
+
+	      String input = null;
+              if(value.equals(btnString1))
+	      {
+	        try
+	        {
+	          input = textField.getText();
+	          if(catClass.isDebugEnabled())
+	          {
+	            catClass.debug("MethodConfigDialog1 : input - " + input);
+	          }
+	          userObject = new MethodConfigUserObject(type, input);
+	          setVisible(false);
+	        }
+	        catch(MethodConfigUserObjectException ex)
+	        {
+	          // the input is not compatible with the class
+		  catClass.debug(
+			"propertyChange1 : input incompatible with class");
+	          textField.selectAll();
+	          JOptionPane.showMessageDialog(
+  			MethodConfigDialog.this,
+  			"Sorry, \"" + input + "\" "
+  			+ "is not valid for Class "
+  			+ type,
+  			"Try again",
+  			JOptionPane.ERROR_MESSAGE);
+  		  input = null;
+  		  userObject = null;
+	        }
+  	      }
+              else
+              {
+                setVisible(false);
+              }
+	    }
+	    catClass.debug("End - propertyChange1");
+	  }
+	}
+	);
+  }
+
+  public MethodConfigUserObject getValidatedInput()
+  {
+    return userObject;
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/config/gui/MethodConfigGui.java b/jakarta-jmeter/src/protocol/jndi/config/gui/MethodConfigGui.java
new file mode 100644
index 0000000..f93cf9b
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/config/gui/MethodConfigGui.java
@@ -0,0 +1,937 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.config.gui;
+
+import javax.swing.*;
+import javax.swing.event.*;
+import javax.swing.tree.*;
+import javax.swing.border.*;
+import java.awt.event.*;
+import javax.naming.InitialContext;
+import java.awt.*;
+import java.util.*;
+
+import java.lang.reflect.Field;
+
+import org.apache.jmeter.control.TestPlan;
+import org.apache.jmeter.engine.ReflectionJMeterEngine;
+import org.apache.jmeter.gui.GuiPackage;
+import org.apache.jmeter.gui.ModelSupported;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.VerticalLayout;
+import org.apache.jmeter.config.gui.ArgumentsPanel;
+import org.apache.jmeter.config.Arguments;
+import org.apache.jmeter.threads.ThreadGroup;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.jmeter.ejb.jndi.config.MethodConfig;
+import org.apache.jmeter.ejb.jndi.config.MethodConfigUserObject;
+import org.apache.jmeter.ejb.jndi.config.MethodConfigUserObjectException;
+import org.apache.log4j.Category;
+
+/**
+ * Provides the gui interface to configure remote method execution
+ * @author	Khor Soon Hin
+ * @version	1.0
+ * @created	2001 Dec 24
+ * @modified	2001 Dec 30
+ */
+public class MethodConfigGui extends JPanel implements ModelSupported,
+	ActionListener, TreeSelectionListener
+{
+  private static Category catClass = Category.getInstance(
+	MethodConfigGui.class.getName());
+
+  protected static final String REFLECT = "MethodConfigGui.reflect";
+  protected static final String INVOKE = "MethodConfigGui.invoke";
+  protected static final String STRING_CLASS = "java.lang.String";
+
+  protected JComboBox methodHomeNameBox;
+  protected JComboBox methodRemoteNameBox;
+  protected JComboBox remoteInterfaceBox;
+
+  protected DefaultMutableTreeNode rootHome;
+  protected DefaultMutableTreeNode rootRemote;
+  protected DefaultTreeModel treeModelHome;
+  protected DefaultTreeModel treeModelRemote;
+  protected NamePanel namePanel;
+  protected JPanel methodHomeNamePanel;
+  protected JPanel methodHomeParmsPanel;
+  protected JPanel remoteInterfaceListPanel;
+  protected JPanel methodRemoteNamePanel;
+  protected JPanel methodRemoteParmsPanel;
+  protected JPanel controlPanel;
+  protected JButton actionButton;
+  protected JTree jTreeHome;
+  protected JTree jTreeRemote;
+  protected boolean displayName;
+  protected MethodConfig model;
+  protected Frame frame;
+	// The frame is required because the JDialog we create must be modal
+	// and to be modal it must be modal relative to a frame.  We want
+	// the dialog boxes to be modal so that user must fill them up before
+	// they can do anything with jmeter
+
+  public MethodConfigGui()
+  {
+    displayName = true;
+  }
+
+  public MethodConfigGui(boolean displayName)
+  {
+    this.displayName = displayName;
+  }
+
+  //----- ModelSupported interface : start -----
+
+  public void setModel(Object model)
+  {
+    this.model = (MethodConfig)model;
+    init();
+  }
+
+  public void updateGui()
+  {
+    catClass.debug("Start : updateGui1");
+System.out.println("updateGui1");
+    // the method name box will always be displayed regardless of the state
+    // of the MethodConfig of this gui
+    String methodName = model.getMethodHomeName();
+    catClass.debug("updateGui1 : home method name - " + methodName);
+    String[] strings = model.getMethodHomeList();
+    setupPullDown(methodHomeNameBox, methodName, strings);
+    // if methodName is null set the home method to be the first entry
+    // as setup in the home method name JComboBox by setupPullDown
+    // This is to ensure that if the user does not change the JComboBox
+    // the first value is set anyway.
+    if(methodName == null && strings != null)
+    {
+      model.setMethodHomeName(strings[0]);
+    }
+    // if the state of the MethodConfig of this gui after 
+    // MethodConfig.METHOD_GET_HOME_NAMES, display panel to get
+    // parms of the selected method
+    int childCount = treeModelHome.getChildCount(rootHome);
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("updateGui1 : state - " + model.getState());
+      catClass.debug("updateGui1 : METHOD_GET_HOME_NAMES");
+      catClass.debug("updateGui1 : rootHome child count - " + childCount);
+    }
+    // if model is in state after getting home method name AND
+    // rootHome(method) has no child(parms set) yet then get them
+    if(model.getState() > MethodConfig.METHOD_GET_HOME_PARMS  && 
+        childCount == 0)
+    {
+      catClass.debug("updateGui1 : METHOD_GET_HOME_PARMS");
+      rootHome.setUserObject(model.getMethodHomeName());
+//      methodParmsPanel.setVisible(true);
+      // get all the parms
+      Class[] parmTypes = model.getMethodHomeParms();
+      // add all the parms into a JTree
+      for(int i = 0 ;i < parmTypes.length; i++)
+      {
+        catClass.debug("updateGui1 : parmType #" + i + " - " + parmTypes[i]);
+        recurseParm(parmTypes[i], rootHome, i, treeModelHome);
+      }
+      // if the chosen method has no parms then updating the value of
+      // root node with the method name doesn't seem to trigger a redraw of
+      // the tree so call treeDidChange()
+      if(parmTypes.length == 0)
+      {
+        jTreeHome.treeDidChange();
+      }
+    }
+    // if model is in state after getting home method name and
+    // all home method parms gave been obtained then get list of
+    // remote interfaces
+    if(model.getState() > MethodConfig.METHOD_SELECT_REMOTE_INTERFACE)
+    {
+      catClass.debug("METHOD_SELECT_REMOTE_INTERFACE");
+      // remoteInterfaceType is the remote interface selected by the user
+      // remoteInterfaces contains the list of remote interfaces returned
+      // by home method
+      Object remoteInterfaceType = model.getRemoteInterfaceType();
+      String interfaceName = null;
+      if(remoteInterfaceType != null)
+      {
+        interfaceName = remoteInterfaceType.toString();
+      }
+      ArrayList remoteInterfaces = (ArrayList)model.getRemoteInterfaceList();
+      if(catClass.isDebugEnabled())
+      {
+        catClass.debug("updateGui1 : remote interfaces - " + remoteInterfaces);
+        catClass.debug("updateGui1 : remoteInterfacesType - " + 
+		remoteInterfaces.getClass());
+      }
+      // prepare variable strings to contain a list of all the names of
+      // the remote interfaces
+      Object[] remoteInterfacesArray = remoteInterfaces.toArray();
+      strings = new String[remoteInterfacesArray.length];
+      for(int i = 0; i < remoteInterfacesArray.length; i++)
+      {
+        strings[i] = remoteInterfacesArray[i].toString();
+      }
+      setupPullDown(remoteInterfaceBox, interfaceName, 
+		strings);
+      // if interfaceName is null set the remote interface to be the first 
+      // entry as setup in the remote interface name JComboBox by setupPullDown.
+      // This is to ensure that if the user does not change the JComboBox
+      // the first value is set anyway.
+      if(interfaceName == null && remoteInterfacesArray != null)
+      {
+        model.setRemoteInterfaceType(remoteInterfacesArray[0]);
+      }
+    }
+    // if model is in state after user selects the list of remote interface
+    // then get a list of remote method names
+    if(model.getState() > MethodConfig.METHOD_GET_REMOTE_NAMES)
+    {
+      catClass.debug("METHOD_GET_REMOTE_NAMES");
+      methodName = model.getMethodRemoteName();
+      catClass.debug("updateGui1 : remote method name - " + methodName);
+      strings = model.getMethodRemoteList();
+      setupPullDown(methodRemoteNameBox, methodName, strings);
+      childCount = treeModelRemote.getChildCount(rootRemote);
+      if(catClass.isDebugEnabled())
+      {
+        catClass.debug("updateGui1 : rootRemote child count - " + childCount);
+      }
+    }
+    // if model is in state after getting remote interface AND
+    // rootRemote(method) has no child(parms set) yet then get them
+    if(model.getState() > MethodConfig.METHOD_GET_REMOTE_PARMS && 
+        childCount == 0)
+    {
+      catClass.debug("METHOD_GET_REMOTE_PARMS");
+      rootRemote.setUserObject(model.getMethodRemoteName());
+//      methodParmsPanel.setVisible(true);
+      // get all the parms
+      Class[] parmTypes = model.getMethodRemoteParms();
+      // add all the parms into a JTree
+      for(int i = 0 ;i < parmTypes.length; i++)
+      {
+        catClass.debug("updateGui1 : parmType #" + i + " - " + parmTypes[i]);
+        recurseParm(parmTypes[i], rootHome, i, treeModelHome);
+      }
+      // if the chosen method has no parms then updating the value of
+      // root node with the method name doesn't seem to trigger a redraw of
+      // the tree so call treeDidChange()
+      if(parmTypes.length == 0)
+      {
+        jTreeRemote.treeDidChange();
+      }
+    }
+    // if the state of the MethodConfig of this gui is
+    // MethodConfig.METHOD_GET_HOME_PARMS, display panel
+    if(displayName)
+    {
+      namePanel.updateGui();
+    }
+    catClass.debug("End : updateGui1");
+  }
+
+  //----- ModelSupported interface : end -----
+
+  protected void init()
+  {
+    catClass.info("Start : init1");
+    // The frame is required because the JDialog we create must be modal
+    // and to be modal it must be modal relative to a frame.  We want
+    // the dialog boxes to be modal so that user must fill them up before
+    // they can do anything with jmeter
+    GuiPackage guiPkg = GuiPackage.getInstance();
+    frame = guiPkg.getMainFrame();
+
+    model.setState(MethodConfig.METHOD_GET_HOME_NAMES);
+    model.setGui(this);
+    methodHomeNameBox = new JComboBox();
+    methodHomeNameBox.setEditable(false);
+    methodHomeNameBox.setAlignmentX(Component.LEFT_ALIGNMENT);
+    methodHomeNameBox.addActionListener(new ActionListener()
+        {
+          public void actionPerformed(ActionEvent e)
+          {
+	    catClass.debug(
+		"actionPerformed1 : Home name method JComboBox changed");
+            // change in method name so do the following
+            JComboBox comboBox = (JComboBox)e.getSource();
+            String method = (String)methodHomeNameBox.getSelectedItem();
+            model.setMethodHomeName(method);
+            model.setState(MethodConfig.METHOD_GET_HOME_PARMS);
+	    resetHomeMethodParms();
+	    resetRemoteInterfaceList();
+	    resetRemoteMethodName();
+	    resetRemoteMethodParms();
+//            methodParmsPanel.setVisible(false);
+            actionButton.setText(
+                JMeterUtils.getResString("jndi_method_button_reflect"));
+            updateGui();
+          }
+        });
+    remoteInterfaceBox = new JComboBox();
+    remoteInterfaceBox.setEditable(false);
+    remoteInterfaceBox.setAlignmentX(Component.LEFT_ALIGNMENT);
+    remoteInterfaceBox.addActionListener(new ActionListener()
+	{
+          public void actionPerformed(ActionEvent e)
+	  {
+	    catClass.debug(
+		"actionPerformed1 : Remote Interface JComboBox changed");
+            JComboBox comboBox = (JComboBox)e.getSource();
+            String interfaceName = (String)remoteInterfaceBox.getSelectedItem();
+	    // compare interface selected with the ones in the remote interface
+	    // list and store the corresponding object in MethodConfig
+            ArrayList remoteInterfaceList = 
+		(ArrayList)model.getRemoteInterfaceList();
+	    if(remoteInterfaceList != null)
+	    {
+              Object[] remoteInterfaceListArray = remoteInterfaceList.toArray();
+              int i = 0;
+              boolean found = false;
+              String remoteInterfaceListName = null;
+              Object selectedInterface = null;
+              while(i < remoteInterfaceListArray.length && !found)
+              {
+                remoteInterfaceListName = remoteInterfaceListArray[i].toString();
+                if(remoteInterfaceListName.equals(interfaceName))
+                {
+                  found = true;
+                  selectedInterface = remoteInterfaceListArray[i];
+                }
+                i++;
+              }
+              model.setRemoteInterfaceType(selectedInterface);
+              model.setState(MethodConfig.METHOD_GET_REMOTE_NAMES);
+	    }
+	    resetRemoteMethodName();
+	    resetRemoteMethodParms();
+//            methodParmsPanel.setVisible(false);
+            actionButton.setText(
+                JMeterUtils.getResString("jndi_method_button_reflect"));
+            updateGui();
+	  }
+	});
+    methodRemoteNameBox = new JComboBox();
+    methodRemoteNameBox.setEditable(false);
+    methodRemoteNameBox.setAlignmentX(Component.LEFT_ALIGNMENT);
+    methodRemoteNameBox.addActionListener(new ActionListener()
+        {
+          public void actionPerformed(ActionEvent e)
+          {
+	    catClass.debug(
+		"actionPerformed1 : Remote method name JComboBox changed");
+            // change in method name so do the following
+            JComboBox comboBox = (JComboBox)e.getSource();
+            String method = (String)methodRemoteNameBox.getSelectedItem();
+            model.setMethodRemoteName(method);
+            model.setState(MethodConfig.METHOD_GET_REMOTE_PARMS);
+	    resetRemoteMethodParms();
+//            methodParmsPanel.setVisible(false);
+            actionButton.setText(
+                JMeterUtils.getResString("jndi_method_button_reflect"));
+            updateGui();
+          }
+        });
+
+
+//rootHome = new DefaultMutableTreeNode("Root");
+//treeModelHome = new DefaultTreeModel(rootHome);
+    this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, 
+	VerticalLayout.TOP));
+    JPanel mainPanel = new JPanel();
+    Border margin = new EmptyBorder(10, 10, 5, 10);
+    mainPanel.setBorder(margin);
+    mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+    // title
+    JLabel panelTitleLabel = new JLabel(
+	JMeterUtils.getResString("jndi_method_title"));
+    Font curFont = panelTitleLabel.getFont();
+    int curFontSize = curFont.getSize();
+    curFontSize += 4;
+    panelTitleLabel.setFont(new Font(curFont.getFontName(), 
+	curFont.getStyle(), curFontSize));
+    mainPanel.add(panelTitleLabel);
+    
+    // name
+    namePanel = new NamePanel(model);
+    mainPanel.add(namePanel);
+
+    // method properties
+    JPanel jndiPanel = new JPanel();
+    jndiPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+    jndiPanel.setBorder(BorderFactory.createTitledBorder(
+	JMeterUtils.getResString("jndi_method_name")));
+
+    methodHomeNamePanel = getMethodHomeNamePanel();
+    methodHomeParmsPanel = getMethodHomeParmsPanel();
+    remoteInterfaceListPanel = getRemoteInterfaceListPanel();
+    methodRemoteNamePanel= getMethodRemoteNamePanel();
+    methodRemoteParmsPanel = getMethodRemoteParmsPanel();
+
+    jndiPanel.add(methodHomeNamePanel);
+    jndiPanel.add(methodHomeParmsPanel);
+    jndiPanel.add(remoteInterfaceListPanel);
+    jndiPanel.add(methodRemoteNamePanel);
+    jndiPanel.add(methodRemoteParmsPanel);
+    controlPanel = new JPanel();
+    actionButton = new JButton(
+	JMeterUtils.getResString("jndi_method_button_reflect"));
+    actionButton.addActionListener(this);
+    actionButton.setActionCommand(REFLECT);
+    controlPanel.add(actionButton);
+   jndiPanel.add(controlPanel);
+
+    mainPanel.add(jndiPanel);
+
+    this.add(mainPanel);
+
+//methodHomeParmsPanel.setVisible(false);
+    catClass.info("End : init1");
+  }
+
+  /**
+   * Given a parameter type of a method, this method will find out
+   * if the parm type is a primitive.  If so, it'll just add the parm type
+   * as a node into the tree model (used to store all parm types of the method).
+   * If however, the parm type is not a primitive, then the parm type will be
+   * further recursed i.e. a reflection of all the fields is obtained
+   * and each of which will be examined to determined if they are primitives.
+   * For those which are primitives, they'll be added to the tree model
+   * and those otherwise will be further recursed.
+   *
+   * @param parmType	the parmType of a method which will be examined
+   * @param parentNode	the node under which the parmType will be added to
+   * @param childIndex	the index of the this parmType if it were to be added
+   *			under the parent node
+   */
+
+  protected void recurseParm(Class parmType, DefaultMutableTreeNode parentNode,
+	int childIndex, DefaultTreeModel treeModel)
+  {
+    catClass.debug("Start - recurseParm1");
+    DefaultMutableTreeNode node = new DefaultMutableTreeNode(parmType);
+    treeModel.insertNodeInto(node, parentNode, childIndex);
+System.out.println("recurseParm1 - parent : " + parentNode);
+System.out.println("recurseParm1 - parent : " + treeModel.getChildCount(parentNode));
+System.out.println("recurseParm1 - child : " + treeModel.getChildCount(node));
+    if(parmType.isPrimitive())
+    {
+      // if parmType is primitive then no need to recurse the parm
+    }
+    else if(parmType.getName().equals(STRING_CLASS))
+    {
+      // consider String as a primitive i.e. there is not need to recurse parm
+    }
+    else if(parmType.isArray())
+    {
+      // if parmType is array then need to handle differently
+    }
+    else
+    {
+      // if parmType is NOT primitive then need to recurse the parm since
+      // it's an object.
+      // to recurse the object, use reflections to get all fields
+      Field[] fields = parmType.getFields();
+      for(int i = 0; i < fields.length; i++)
+      {
+        Class fieldClass = fields[i].getType();
+        catClass.debug("recurseParm1 : field #" + i + " - " + fieldClass);
+        recurseParm(fieldClass, node, i, treeModel);
+      }
+    }
+    catClass.debug("End - recurseParm1");
+  }
+
+  protected JPanel getMethodHomeNamePanel()
+  {
+    catClass.info("Start : getMethodHomeNamePanel1");
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JMeterUtils.getResString("jndi_method_home_name")));
+    String methodName = model.getMethodHomeName();
+    if(methodName != null)
+    {
+      methodHomeNameBox.setSelectedItem(methodName);
+    }
+    panel.add(methodHomeNameBox);
+    catClass.info("End : getMethodHomeNamePanel1");
+    return panel;
+  }
+
+  protected JPanel getRemoteInterfaceListPanel()
+  {
+    catClass.info("Start : getRemoteInterfaceListPanel1");
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JMeterUtils.getResString(
+	"jndi_method_remote_interface_list")));
+    Object remoteInterfaceType =  model.getRemoteInterfaceType();
+    if(remoteInterfaceType != null)
+    {
+      remoteInterfaceBox.setSelectedItem(remoteInterfaceType.toString());
+    }
+    panel.add(remoteInterfaceBox);
+    catClass.info("End : getRemoteInterfaceListPanel1");
+    return panel;
+  }
+
+  protected JPanel getMethodRemoteNamePanel()
+  {
+    catClass.info("Start : getMethodRemoteNamePanel1");
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JMeterUtils.getResString("jndi_method_remote_name")));
+    String methodName = model.getMethodRemoteName();
+    if(methodName != null)
+    {
+      methodRemoteNameBox.setSelectedItem(methodName);
+    }
+    panel.add(methodRemoteNameBox);
+    catClass.info("End : getMethodRemoteNamePanel1");
+    return panel;
+  }
+
+  protected JPanel getMethodHomeParmsPanel()
+  {
+    catClass.info("Start : getMethodHomeParmsPanel1");
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JMeterUtils.getResString("jndi_method_home_parms")));
+    rootHome = new DefaultMutableTreeNode("Root");
+    treeModelHome = new DefaultTreeModel(rootHome);
+    jTreeHome = new JTree(treeModelHome);
+    jTreeHome.getSelectionModel().setSelectionMode(
+	TreeSelectionModel.SINGLE_TREE_SELECTION);
+    jTreeHome.addTreeSelectionListener(this);
+    jTreeHome.setPreferredSize(new Dimension(200, 50));
+    JPanel jTreePanel = new JPanel();
+    jTreePanel.add(jTreeHome);
+    panel.add(jTreePanel);
+    // set mouse listener to listen for double clicks
+    MouseListener ml = new MouseAdapter()
+	{
+	  public void mousePressed(MouseEvent e)
+	  {
+	    TreePath selPath = jTreeHome.getPathForLocation(e.getX(), e.getY());
+	    if(e.getClickCount() == 2)
+	    {
+System.out.println("Double clicked on - " + selPath.getLastPathComponent());
+	      DefaultMutableTreeNode node =
+			(DefaultMutableTreeNode)selPath.getLastPathComponent();
+	      int childCount = node.getChildCount();
+	      // if node is a leaf and has a parent (i.e. not root)
+	      // then node is a parm which needs a value so pop out
+	      // dialog for user to fill in
+	      if(childCount == 0 && node.getParent() != null)
+	      {
+System.out.println("Pop!!!");
+                Object userObject = node.getUserObject();
+	        Class type = null;
+                if(userObject instanceof Class)
+                {
+                  type = (Class)userObject;
+	        }
+	        else if(userObject instanceof MethodConfigUserObject)
+	        {
+	          type = (Class)((MethodConfigUserObject)userObject).getType();
+	        }
+	        MethodConfigDialog dialog = new MethodConfigDialog(frame, type);
+	        dialog.pack();
+	        dialog.setVisible(true);
+	        MethodConfigUserObject input = dialog.getValidatedInput();
+System.out.println("input - " + input);
+	        if(input != null)
+	        {
+	          node.setUserObject(input);
+	        }
+	      }
+	    }
+	  }
+	};
+    jTreeHome.addMouseListener(ml);
+    catClass.info("End : getMethodHomeParmsPanel1");
+    return panel;
+  }
+
+  protected JPanel getMethodRemoteParmsPanel()
+  {
+    catClass.info("Start : getMethodRemoteParmsPanel1");
+    JPanel panel = new JPanel();
+    panel.add(new JLabel(JMeterUtils.getResString("jndi_method_remote_parms")));
+    rootRemote = new DefaultMutableTreeNode("Root");
+    treeModelRemote = new DefaultTreeModel(rootRemote);
+    jTreeRemote = new JTree(treeModelRemote);
+    jTreeRemote.getSelectionModel().setSelectionMode(
+	TreeSelectionModel.SINGLE_TREE_SELECTION);
+    jTreeRemote.addTreeSelectionListener(this);
+    jTreeRemote.setPreferredSize(new Dimension(200, 50));
+    JPanel jTreePanel = new JPanel();
+    jTreePanel.add(jTreeRemote);
+    panel.add(jTreePanel);
+    // set mouse listener to listen for double clicks
+    MouseListener ml = new MouseAdapter()
+	{
+	  public void mousePressed(MouseEvent e)
+	  {
+	    TreePath selPath = jTreeRemote.getPathForLocation(e.getX(), e.getY());
+	    if(e.getClickCount() == 2)
+	    {
+System.out.println("Double clicked on - " + selPath.getLastPathComponent());
+	      DefaultMutableTreeNode node =
+			(DefaultMutableTreeNode)selPath.getLastPathComponent();
+	      int childCount = node.getChildCount();
+	      if(childCount == 0)
+	      {
+System.out.println("Pop!!!");
+                Object userObject = node.getUserObject();
+	        Class type = null;
+                if(userObject instanceof Class)
+                {
+                  type = (Class)userObject;
+	        }
+	        else if(userObject instanceof MethodConfigUserObject)
+	        {
+	          type = (Class)((MethodConfigUserObject)userObject).getType();
+	        }
+	        MethodConfigDialog dialog = new MethodConfigDialog(frame, type);
+	        dialog.pack();
+	        dialog.setVisible(true);
+	        MethodConfigUserObject input = dialog.getValidatedInput();
+System.out.println("input - " + input);
+	        if(input != null)
+	        {
+	          node.setUserObject(input);
+	        }
+	      }
+	    }
+	  }
+	};
+    jTreeRemote.addMouseListener(ml);
+    catClass.info("End : getMethodHomeParmsPanel1");
+    return panel;
+  }
+
+  public MethodConfig getModel()
+  {
+    return model;
+  }
+
+  /**
+   * Caller needs to be able to get Method Parms for both the Home Method
+   * and Remote Method.  Based on the state this method will call
+   * <code>getMethodParmsValues</code> witht the appropriate root.  NOTE :
+   * parms for Home and Remote Methods are stored under different roots.
+   */
+  public Object[] getMethodParmsValues(int state)
+	throws MethodConfigUserObjectException
+  {
+    Object[] objects = null;
+    if(state == MethodConfig.METHOD_INVOKE_HOME)
+    {
+      objects = getMethodParmsValues(rootHome);
+    }
+    else if(state == MethodConfig.METHOD_INVOKE_REMOTE)
+    {
+      objects = getMethodParmsValues(rootRemote);
+    }
+    return objects;
+  }
+
+  public Object[] getMethodParmsValues(DefaultMutableTreeNode root)
+	throws MethodConfigUserObjectException
+  {
+    catClass.info("Start : getMethodParmsValues1");
+    // go through jTree to get all arguments
+    int childCount = root.getChildCount();
+    Object[] parmsValues = new Object[childCount];
+    for(int i = 0; i < childCount; i++)
+    {
+      parmsValues[i] = formObject((DefaultMutableTreeNode)
+		treeModelHome.getChild(root, i));
+    }
+    catClass.info("End : getMethodParmsValues1");
+    return parmsValues;
+  }
+
+  protected Object formObject(DefaultMutableTreeNode node)
+	throws MethodConfigUserObjectException
+  {
+    catClass.info("Start : formObject1");
+    Object obj = node.getUserObject();
+    Object returnVal = null;
+    if(obj instanceof MethodConfigUserObject)
+    {
+      // then node contains a primitive so just get the object
+      MethodConfigUserObject userObject = (MethodConfigUserObject)obj;
+      returnVal = userObject.getObject();
+      if(catClass.isDebugEnabled())
+      {
+        catClass.debug("formObject1 : primitive - " + userObject);
+      }
+    }
+    else if(obj instanceof Class)
+    {
+      // there are cases when the tree node will contain only class
+      // and not MethodConfigUserObject -
+      // 1. its value has not been input by the user but it's a primitive
+      // 2. it's not a primitive but an object
+      Class type = (Class)obj;
+      if(type.isPrimitive())
+      {
+        // it's a primitive but the user has not input a value for it
+        String errorStr = type.getName() + 
+		" is a primitive with uninitialized values";
+        catClass.error("formObject1 : " + errorStr);
+        throw new MethodConfigUserObjectException(errorStr);
+      }
+      else
+      {
+        // then node is an object which contains other primitives
+        if(catClass.isDebugEnabled())
+        { 
+          catClass.debug("formObject1 : Creating object - " + type);
+        }
+        int childCount = node.getChildCount();
+        Object[] constituents = new Object[childCount];
+        for(int i = 0; i < childCount; i++)
+        {
+          constituents[i] = formObject((DefaultMutableTreeNode)
+		treeModelHome.getChild(node, i));
+        }
+        // get the fields of the class
+        // gather all constituents to form object
+        Field[] fields = type.getFields();
+        try
+        {
+          for(int i = 0; i < constituents.length; i++)
+          {
+            catClass.debug("formObject1 : setting - " + fields[i].getName());
+            catClass.debug("formObject1 : to value - " + constituents[i]
+		+ " of - " + constituents[i].getClass());
+            returnVal = type.newInstance();
+            fields[i].set(returnVal, constituents[i]);
+          }
+        }
+        catch(IllegalAccessException e)
+        {
+          catClass.error(e);
+          throw new MethodConfigUserObjectException(e.getMessage());
+        }
+        catch(InstantiationException e)
+        {
+          catClass.error(e);
+          throw new MethodConfigUserObjectException(e.getMessage());
+        }
+      }
+    }
+    catClass.info("End : formObject1");
+    return returnVal;
+  }
+
+  /**
+   * Sets up the pull-down menus to contain all the <code>String</code>s
+   * passed in as well as displaying the user's selection.
+   *
+   * @param methodNameBox	the <code>JComboBox</code> to be manipulated
+   * @param methodName		the user's selection
+   * @param strings		the list of <code>String</code>s to be added
+   *				into the <code>JComboBox</code>
+   */
+  protected void setupPullDown(JComboBox methodNameBox, String methodName,
+        String[] strings)
+  {
+    catClass.info("Start : setupPullDown1");
+    // if the list is empty then try to fill it
+    if(methodNameBox.getItemCount() == 0)
+    {
+      if(strings != null)
+      {
+        for(int i = 0; i < strings.length; i++)
+        {
+          catClass.debug("setupPullDown1 :  adding method - " + strings[i]);
+          methodNameBox.addItem(strings[i]);
+        }
+      }
+    }
+    // change the methodBox selected item only if there's a change in the
+    // methodName to avoid triggering actionPerformed each time
+    String methodNameBoxSelected = 
+        (String)methodNameBox.getSelectedItem();
+    if((methodName != null) && !methodName.equals(methodNameBoxSelected))
+    {
+      methodNameBox.setSelectedItem(methodName);
+    }
+    catClass.info("End : setupPullDown1");
+  }
+
+  /**
+   * Resets the home method parms.  This method will be called when the user
+   * makes any changes which requires the resetting the method home parms
+   * e.g. when user decides to call another home method.
+   */
+  protected void resetHomeMethodParms()
+  {
+    catClass.info("Start : resetHomeMethodParms1");
+    // remove all parms of the old method
+    int totalChild = rootHome.getChildCount();
+    for(int i = 0; i < totalChild; i++)
+    {
+      // the child to be removed will always be 0 'cos as the child
+      // is removed the nth node will become (n-1)th
+      treeModelHome.removeNodeFromParent(
+		(DefaultMutableTreeNode)rootHome.getChildAt(0));
+    }
+    rootHome.setUserObject("Root");
+    catClass.info("End : resetHomeMethodParms1");
+  }
+
+  /**
+   * Resets the remote interface list returned by the home method.  This method
+   * will be called when the user makes any changes which requires the 
+   * remote interface list to be modified e.g. when user decides to call 
+   * another home method.
+   */
+  protected void resetRemoteInterfaceList()
+  {
+    catClass.info("Start : resetRemoteInterfaceList1");
+    model.setRemoteInterfaceList(null);
+    model.setRemoteInterfaceType(null);
+    remoteInterfaceBox.removeAllItems();
+    catClass.info("End : resetRemoteInterfaceList1");
+  }
+
+  /**
+   * Resets the selected remote interface.  This method will be called when 
+   * the user makes any changes which requires the resetting the selected
+   * remote interface e.g. when user decides to call another home method,
+   * when the user decides to change the remote interface to be executed.
+   */
+  protected void resetRemoteMethodName()
+  {
+    catClass.info("Start : resetRemoteMethodName1");
+    model.setMethodRemoteName(null);
+    methodRemoteNameBox.removeAllItems();
+    catClass.info("End : resetRemoteMethodName1");
+  }
+
+ /** 
+   * Resets the remote method parms.  This method will be called when the user 
+   * makes any changes which requires the resetting the method remote parms
+   * e.g. when user decides to call another home method, when user changes the
+   * remote interface to be executed, when user changes the remote method
+   * to be run.
+   */
+  protected void resetRemoteMethodParms()
+  {
+    catClass.info("Start : resetRemoteMethodParms1");
+    // remove all parms of the old method
+    int totalChild = rootRemote.getChildCount();
+    for(int i = 0; i < totalChild; i++)
+    {
+      // the child to be removed will always be 0 'cos as the child
+      // is removed the nth node will become (n-1)th
+      treeModelRemote.removeNodeFromParent(
+		(DefaultMutableTreeNode)rootRemote.getChildAt(0));
+    }
+    rootRemote.setUserObject("Root");
+    catClass.info("End : resetRemoteMethodParms1");
+  }
+
+  //----- ActionListener interface : start -----
+
+  public void actionPerformed(ActionEvent e)
+  {
+    String command = e.getActionCommand();
+    ReflectionJMeterEngine engine = null;
+    GuiPackage guiPackage = null;
+    if(catClass.isDebugEnabled())
+    {
+      catClass.debug("actionPerformed1 : command - " + command);
+    }
+    if(command.equals(REFLECT))
+    {
+      guiPackage = GuiPackage.getInstance();
+      Collection groups = TestPlan.createTestPlan(null).compileTestPlan();
+      engine = new ReflectionJMeterEngine();
+      for(Iterator i = groups.iterator(); i.hasNext();)
+      {
+        ThreadGroup tg = (ThreadGroup)i.next();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("actionPerformed1 : threadgroup - " + tg);
+        }
+        engine.addThreadGroup(tg);
+      }
+      guiPackage.getMainFrame().setRunning(true);
+      model.setReflectionStatus(true);
+      engine.runTest();
+      guiPackage.getMainFrame().setRunning(false);
+      model.setReflectionStatus(false);
+      updateGui();
+    }
+    if(command.equals(INVOKE))
+    { 
+    }
+  }
+
+  //----- ActionListener interface : end -----
+
+  //----- TreeSelectionListener interface : start -----
+
+  public void valueChanged(TreeSelectionEvent e)
+  {
+    catClass.debug("Start : valueChanged1");
+    catClass.debug("End : valueChanged1");
+  }
+
+  //----- TreeSelectionListener interface : end -----
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/control/CVS/Entries b/jakarta-jmeter/src/protocol/jndi/control/CVS/Entries
new file mode 100644
index 0000000..2c4bbe7
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/CVS/Entries
@@ -0,0 +1,2 @@
+/JndiTestSample.java/1.1/Sun Aug 11 19:24:54 2002//Tv1_7_3
+D/gui////
diff --git a/jakarta-jmeter/src/protocol/jndi/control/CVS/Repository b/jakarta-jmeter/src/protocol/jndi/control/CVS/Repository
new file mode 100644
index 0000000..3a1444e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jndi/control
diff --git a/jakarta-jmeter/src/protocol/jndi/control/CVS/Root b/jakarta-jmeter/src/protocol/jndi/control/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jndi/control/CVS/Tag b/jakarta-jmeter/src/protocol/jndi/control/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jndi/control/JndiTestSample.java b/jakarta-jmeter/src/protocol/jndi/control/JndiTestSample.java
new file mode 100644
index 0000000..74084b2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/JndiTestSample.java
@@ -0,0 +1,160 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.control;
+
+import java.io.Serializable;
+import java.util.Collection;
+import java.util.HashSet;
+import java.util.LinkedList;
+import java.util.Set;
+
+import org.apache.jmeter.control.AbstractGenerativeController;
+import org.apache.jmeter.ejb.jndi.config.JndiConfig;
+import org.apache.jmeter.ejb.jndi.config.LookupConfig;
+import org.apache.jmeter.ejb.jndi.config.MethodConfig;
+import org.apache.jmeter.ejb.jndi.control.gui.JndiTestSampleGui;
+import org.apache.jmeter.ejb.jndi.sampler.JNDISampler;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.util.JMeterUtils;
+import org.apache.log4j.Category;
+/**
+ * Controls how the sampling is done
+ *
+ * @author	Khor Soon Hin
+ * @created	20 Dec 2001
+ * @modified	20 Dec 2001
+ */
+public class JndiTestSample extends AbstractGenerativeController 
+	implements Serializable
+{
+  private static Category catClass = Category.getInstance(
+	JndiTestSample.class.getName());
+
+  protected JndiConfig defaultJndiConfig;
+
+  protected static Set addableList;
+
+  public JndiTestSample()
+  {
+    defaultJndiConfig = new JndiConfig();
+  }
+
+  public JndiConfig getDefaultJndiConfig()
+  {
+    return defaultJndiConfig;
+  }
+
+  public void setDefaultJndiConfig(JndiConfig config)
+  {
+    defaultJndiConfig = config;
+  }
+
+  public void uncompile()
+  {
+    super.uncompile();
+  }
+
+  public String getClassLabel()
+  {
+    return JMeterUtils.getResString("jndi_testing_title");
+  }
+
+  public Class getGuiClass()
+  {
+    return org.apache.jmeter.ejb.jndi.control.gui.JndiTestSampleGui.class;
+  }
+
+  public Class getTagHandlerClass()
+  {
+    return org.apache.jmeter.ejb.jndi.save.JndiTestSampleHandler.class;
+  }
+
+  /**
+   * Returns a <code>Collaction</code> containing a list of all 
+   * elements which can be added to this element
+   *
+   * @return	a collection of elements
+   */
+  public Collection getAddList()
+  {
+    if(addableList == null)
+    {
+      addableList = new HashSet();
+      addableList.add(new LookupConfig().getClassLabel());
+      addableList.add(new MethodConfig().getClassLabel());
+    }
+    return addableList;
+  }
+
+  public Object clone()
+  {
+    catClass.info("Start : clone1");
+    JndiTestSample control = new JndiTestSample();
+    control.setDefaultJndiConfig(defaultJndiConfig);
+    this.standardCloneProc(control);
+    catClass.info("End : clone1");
+    return control;
+  }
+
+  protected Entry createEntry()
+  {
+    catClass.info("Start : createEntry1");
+    Entry entry = new Entry();
+    entry.setSamplerClass(JNDISampler.class);
+    entry.addConfigElement(defaultJndiConfig);
+    catClass.info("End : createEntry1");
+    return entry;
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Entries b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Entries
new file mode 100644
index 0000000..c99ba84
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Entries
@@ -0,0 +1,2 @@
+/JndiTestSampleGui.java/1.1/Sun Aug 11 19:24:54 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Repository b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Repository
new file mode 100644
index 0000000..103a2f4
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jndi/control/gui
diff --git a/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Root b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Tag b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/gui/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jndi/control/gui/JndiTestSampleGui.java b/jakarta-jmeter/src/protocol/jndi/control/gui/JndiTestSampleGui.java
new file mode 100644
index 0000000..04b27a2
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/control/gui/JndiTestSampleGui.java
@@ -0,0 +1,133 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.control.gui;
+
+import java.awt.Font;
+import javax.swing.border.Border;
+import javax.swing.border.EmptyBorder;
+import javax.swing.JLabel;
+import javax.swing.JPanel;
+
+import org.apache.jmeter.ejb.jndi.config.JndiConfig;
+import org.apache.jmeter.ejb.jndi.config.gui.JndiConfigGui;
+import org.apache.jmeter.ejb.jndi.control.JndiTestSample;
+import org.apache.jmeter.gui.ModelSupported;
+import org.apache.jmeter.gui.NamePanel;
+import org.apache.jmeter.gui.VerticalLayout;
+import org.apache.jmeter.util.JMeterUtils;
+
+/**
+ * Provides the gui to configure JNDI sampling
+ *
+ * @author	Khor Soon Hin
+ * @created	20 Dec 2001
+ * @modified	20 Dec 2001
+ */
+public class JndiTestSampleGui extends JPanel implements ModelSupported
+{
+  JndiTestSample model;
+  NamePanel namePanel;
+
+  JndiConfigGui jndiConfigGui;
+
+  public JndiTestSampleGui()
+  {
+  }
+
+  public void updateGui()
+  {
+    namePanel.updateGui();
+    jndiConfigGui.updateGui();
+  }
+
+  public void setModel(Object model)
+  {
+    this.model = (JndiTestSample)model;
+    init();
+  }
+
+  protected void init()
+  {
+    this.setLayout(new VerticalLayout(5, VerticalLayout.LEFT, 
+	VerticalLayout.TOP));
+    
+    // main panel
+    JPanel mainPanel = new JPanel();
+    Border margin = new EmptyBorder(10, 10, 5, 10);
+    mainPanel.setBorder(margin);
+    mainPanel.setLayout(new VerticalLayout(5, VerticalLayout.LEFT));
+
+    // title
+    JLabel panelTitleLabel = new JLabel(
+	JMeterUtils.getResString("jndi_testing_title"));
+    Font curFont = panelTitleLabel.getFont();
+    int curFontSize = curFont.getSize();
+    curFontSize += 4;
+    panelTitleLabel.setFont(new Font(curFont.getFontName(), curFont.getStyle(),
+	curFontSize));
+    mainPanel.add(panelTitleLabel);
+
+    // name
+    namePanel = new NamePanel(model);
+    mainPanel.add(namePanel);
+
+    // jndi
+    jndiConfigGui = new JndiConfigGui(false);
+    jndiConfigGui.setModel(model.getDefaultJndiConfig());
+    mainPanel.add(jndiConfigGui);
+
+    this.add(mainPanel);
+  }
+}
diff --git a/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Entries b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Entries
new file mode 100644
index 0000000..f8f447e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Entries
@@ -0,0 +1,2 @@
+/JNDISampler.java/1.1/Sun Aug 11 19:24:54 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Repository b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Repository
new file mode 100644
index 0000000..37b9b3e
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/src/protocol/jndi/sampler
diff --git a/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Root b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Tag b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/sampler/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/src/protocol/jndi/sampler/JNDISampler.java b/jakarta-jmeter/src/protocol/jndi/sampler/JNDISampler.java
new file mode 100644
index 0000000..74369ea
--- /dev/null
+++ b/jakarta-jmeter/src/protocol/jndi/sampler/JNDISampler.java
@@ -0,0 +1,567 @@
+/*
+ * ====================================================================
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 2001 The Apache Software Foundation.  All rights
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ * notice, this list of conditions and the following disclaimer.
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ * notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the
+ * distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ * if any, must include the following acknowledgment:
+ * "This product includes software developed by the
+ * Apache Software Foundation (http://www.apache.org/)."
+ * Alternately, this acknowledgment may appear in the software itself,
+ * if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names "Apache" and "Apache Software Foundation" and
+ * "Apache JMeter" must not be used to endorse or promote products
+ * derived from this software without prior written permission. For
+ * written permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache",
+ * "Apache JMeter", nor may "Apache" appear in their name, without
+ * prior written permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ */
+package org.apache.jmeter.ejb.jndi.sampler;
+
+import java.lang.reflect.Method;
+import java.lang.reflect.InvocationTargetException;
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.Hashtable;
+import java.util.Map;
+import java.util.Vector;
+
+import javax.naming.InitialContext;
+import javax.naming.NamingException;
+
+import org.apache.jmeter.ejb.jndi.config.JndiConfig;
+import org.apache.jmeter.ejb.jndi.config.LookupConfig;
+import org.apache.jmeter.ejb.jndi.config.MethodConfig;
+import org.apache.jmeter.ejb.jndi.config.MethodConfigUserObjectException;
+import org.apache.jmeter.ejb.jndi.config.gui.MethodConfigGui;
+import org.apache.jmeter.samplers.Entry;
+import org.apache.jmeter.samplers.Sampler;
+import org.apache.jmeter.samplers.SampleResult;
+import org.apache.log4j.Category;
+/**
+ * Samples the JNDI performance and records them
+ *
+ * @author	Khor Soon Hin
+ * @created	2001 Dec 18
+ * @modified	2002 Feb 16
+ */
+public class JNDISampler implements Sampler
+{
+  private static Category catClass = Category.getInstance(
+	JNDISampler.class.getName());
+
+  public static final String QUERY = "JNDISampler.query";
+
+  protected static Map keyMap = new HashMap();
+
+  public JNDISampler()
+  {
+  }
+
+  /**
+   * The main method which samples and records the JNDI performance
+   *
+   * @param e	the JNDI sampling configuration
+   * @return	the measurements captured
+   */
+  public SampleResult sample(Entry e)
+  {
+    catClass.info("Start : sample1");
+    boolean reflectionStatus = false;
+    // There is a row of ifs condition which may be executed depending on the
+    // state of the MethodConfig state.  During reflection only one of these
+    // condition should be become true.  However, once one condition becomes
+    // true it will set the MethodConfig state and this will cause the next 
+    // condition to become true and so on.  Thus else-ifs should be used BUT
+    // these same conditions need to be used such that more than one condition
+    // can be true during sampling so ifs and NOT else-ifs must be used.  To 
+    // resolve this conflict, ifs are used with stateJustChange is used to act 
+    // like else-if 
+    boolean stateJustChanged = false;
+    long start = (long)0;
+    long end = (long)0;
+    long ctxTime = (long)0;
+    long lookupTime = (long)0;
+    long homeMethodTime = (long)0;
+    long remoteMethodTime = (long)0;
+
+    Object remoteInterface = null;
+    Object results = null;
+    Object ref = null;
+    
+    SampleResult res = new SampleResult();
+    SampleResult contextLookupRes = new SampleResult();
+    contextLookupRes.putValue(SampleResult.DISPLAY_NAME, "Context Lookup");
+    SampleResult lookupRes = new SampleResult();
+    SampleResult homeMethodRes = null;
+    SampleResult remoteMethodRes = null;
+    Hashtable ht = new Hashtable();
+    JndiConfig jndiConfig = null;
+    InitialContext ctx = null;
+    try
+    {
+      jndiConfig = (JndiConfig)e.getConfigElement(JndiConfig.class);
+      // check if InitialContext is already obtained previously
+      ctx = jndiConfig.getInitialContext();
+      if(ctx == null)
+      {
+        // setup the hashtable
+        for(int i = 0 ; i < JndiConfig.JNDI_PROPS.length; i++)
+        {
+          String value = jndiConfig.getValue(i);
+          if(value != null)
+          {
+            if(catClass.isDebugEnabled())
+            {
+              catClass.debug("sample1 : JNDI env - " + 
+		JndiConfig.JNDI_PROPS[i] + " = " + value);
+            }
+            ht.put(JndiConfig.JNDI_PROPS[i], value);
+          }
+        }
+        // initialize initial context
+        start = System.currentTimeMillis();
+        ctx = new InitialContext(ht);
+        end = System.currentTimeMillis();
+        catClass.info("sample1 : Got initial context");
+        // store the initial context for reuse
+        jndiConfig.setInitialContext(ctx);
+      }
+      // set the initial context lookup time
+      ctxTime = end - start;
+      contextLookupRes.setTime(ctxTime);
+
+      // look up the name
+      LookupConfig lookupConfig = 
+		(LookupConfig)e.getConfigElement(LookupConfig.class);
+      String lookupName = null;
+      if(lookupConfig != null)
+      {
+        lookupName = lookupConfig.getLookupName();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("sample1 : LookupName - " + lookupName);
+        }
+        start = System.currentTimeMillis();
+        ref = ctx.lookup(lookupName);
+        end = System.currentTimeMillis();
+        lookupTime = end - start;
+        catClass.info("Got remote interface");
+        lookupRes.setTime(lookupTime);
+        lookupRes.putValue(SampleResult.DISPLAY_NAME, 
+		"Remote Interface Lookup - " + lookupName);
+      }
+      Class lookupNameClass = ref.getClass();
+ 
+      // lookup method name
+      MethodConfig methodConfig = 
+		(MethodConfig)e.getConfigElement(MethodConfig.class);
+      // store all reflections result in the model of the gui and not the
+      // MethodConfig obtained from getConfigElement() 'cos that's the clone.
+      // To get the model of the MethodConfigGui, get the MethodConfigGui
+      // from the MethodConfig clone first.  All MethodConfig clones cloned
+      // from the same MethodConfig shares the same MethodConfigGui.
+      MethodConfigGui methodConfigGui =  methodConfig.getGui();
+      MethodConfig model = methodConfigGui.getModel();
+      // Make all changes on the model of the gui and not the MethodConfig
+      // obtained from getConfigElement() because that is the clone.
+      int state = model.getState();
+      reflectionStatus = model.getReflectionStatus();
+      String[] strings = null;
+      if(catClass.isDebugEnabled())
+      {
+        catClass.debug("sample1 : state - " + state);
+        catClass.debug("sample1 : reflectionStatus - " + reflectionStatus);
+      }
+      // Perform only if : 
+      // 1. doing a reflection and in this state
+      // 2. sampling does not perform this step
+      if((state == MethodConfig.METHOD_GET_HOME_NAMES && reflectionStatus 
+	&& !stateJustChanged)) 
+//	|| (state >= MethodConfig.METHOD_GET_HOME_NAMES && !reflectionStatus))
+      {
+        // for this state, get the list of all methods in the home
+        // interface
+        Method[] methods = lookupNameClass.getMethods();
+        strings = new String[methods.length];
+        for(int i = 0; i < methods.length; i++)
+        {
+          // create method name which includes method signatures
+          strings[i] = getMethodSignature(methods[i]);
+        }
+        model.setMethodHomeList(strings);
+        model.setState(MethodConfig.METHOD_GET_HOME_PARMS);
+        stateJustChanged = true;
+      }
+      // Perform only if : 
+      // 1. doing a reflection and in this state
+      // 2. sampling does not perform this step
+      if((state == MethodConfig.METHOD_GET_HOME_PARMS && reflectionStatus
+	&& !stateJustChanged)) 
+//	|| (state >= MethodConfig.METHOD_GET_HOME_PARMS && !reflectionStatus))
+      {
+        // for this state, get all the required parms for the selected
+        // method
+        String methodHomeName = methodConfig.getMethodHomeName();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("sample1 : selected methodHomeName - " +
+		methodHomeName);
+        }
+        Vector returnValues = 
+		getMethodParmsTypes(methodHomeName, lookupNameClass);
+        // the first object of returnValues will be the Method while the
+        // the second object will be the parm types of Method
+        Method method = (Method)returnValues.get(0);
+        Class[] methodParmTypes = (Class[])returnValues.get(1);
+        // once the method is obtained store the parms
+        model.setMethodHomeParms(methodParmTypes);
+        model.setHomeMethod(method);
+        model.setState(MethodConfig.METHOD_INVOKE_HOME);
+        stateJustChanged = true;
+      }
+      // Perform only if : 
+      // 1. doing a reflection and in this state
+      // 2. sampling and reflection has been done at least this state
+      //    if reflection has not been done till this state then user is not
+      //    interested in sampling till this state
+      if((state == MethodConfig.METHOD_INVOKE_HOME && reflectionStatus
+	&& !stateJustChanged)
+	|| (state >= MethodConfig.METHOD_INVOKE_HOME && !reflectionStatus))
+      {
+        catClass.debug("sample1 : METHOD_INVOKE_HOME");
+        Method method = model.getHomeMethod();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("sample1 : home method to be invoked - " + method);
+        }
+        // only initialize homeMethodRes if method execution is to be measured
+        homeMethodRes = new SampleResult();
+        // gather all parms from MethodConfigGui
+        Object[] parmsArray = null;
+        try
+        {
+          parmsArray = methodConfigGui.getMethodParmsValues(
+		MethodConfig.METHOD_INVOKE_HOME);
+          if(catClass.isDebugEnabled())
+          {
+            catClass.debug("sample1 : home method parms - " + parmsArray);
+          }
+          // invoke the method
+          start = System.currentTimeMillis();
+          remoteInterface = method.invoke(ref, parmsArray);
+System.out.println("return - " + remoteInterface);
+        }
+        catch(IllegalAccessException err)
+        {
+          catClass.error(err);
+          System.out.println(err);
+        }
+        catch(InvocationTargetException err)
+        {
+          catClass.error(err);
+          System.out.println(err);
+        }
+        catch(MethodConfigUserObjectException err)
+        {
+          catClass.error(err);
+          System.out.println(err);
+        }
+        end = System.currentTimeMillis();
+        if(!reflectionStatus)
+        {
+          // if sampling then get the time lapsed
+          homeMethodTime = end - start;
+          homeMethodRes.setTime(homeMethodTime);
+          homeMethodRes.putValue(SampleResult.DISPLAY_NAME, "Home Method Execution - "
+                + method.getName());
+          homeMethodRes.putValue(SampleResult.SUCCESS, new Boolean(true));
+        }
+        else
+        {
+          // if reflection then get all the info required
+          model.setState(MethodConfig.METHOD_GET_REMOTE_NAMES);
+          stateJustChanged = true;
+          // store list of remote interfaces returned
+          model.setRemoteInterfaceList(remoteInterface);
+        }
+      }
+      // Perform only if : 
+      // 1. doing a reflection and in this state
+      // 2. sampling does NOT perform this step
+      if((state == MethodConfig.METHOD_GET_REMOTE_NAMES && reflectionStatus
+	&& !stateJustChanged))
+//	|| (state >= MethodConfig.METHOD_GET_REMOTE_NAMES && !reflectionStatus))
+      {
+        // for this state, get the list of all methods in the remote
+        // interface
+        remoteInterface = model.getRemoteInterfaceType();
+        Class remoteInterfaceClass = remoteInterface.getClass();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("updateGui1 : remoteInterfaceClass - " +
+		remoteInterfaceClass);
+        }
+        Method[] methods = remoteInterfaceClass.getMethods();
+        strings = new String[methods.length];
+        for(int i = 0; i < methods.length; i++)
+        {
+          strings[i] = getMethodSignature(methods[i]);
+        }
+        model.setMethodRemoteList(strings);
+        model.setState(MethodConfig.METHOD_GET_REMOTE_PARMS);
+        stateJustChanged = true;
+      }
+      // Perform only if : 
+      // 1. doing a reflection and in this state
+      // 2. sampling does NOT perform this step
+      if((state == MethodConfig.METHOD_GET_REMOTE_PARMS && reflectionStatus
+	&& !stateJustChanged))
+//	|| (state >= MethodConfig.METHOD_GET_REMOTE_PARMS && !reflectionStatus))
+      {
+        // for this state, get all the required parms for the selected
+        // method
+        String methodRemoteName = methodConfig.getMethodRemoteName();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("sample1 : selected methodRemoteName - " +
+		methodRemoteName);
+        }
+        Object selectedRemoteInterfaceType = model.getRemoteInterfaceType();
+        Class selectedRemoteInterfaceTypeClass = 
+		selectedRemoteInterfaceType.getClass();
+        Vector returnValues = getMethodParmsTypes(methodRemoteName, 
+		selectedRemoteInterfaceTypeClass);
+        // the first object of returnValues contains the Method while the
+        // the second object the parm types of the Method
+        Method method = (Method)returnValues.get(0);
+        Class[] methodParmTypes = (Class[])returnValues.get(1);
+        // once the method is obtained store the parms
+        model.setMethodRemoteParms(methodParmTypes);
+        model.setRemoteMethod(method);
+        model.setState(MethodConfig.METHOD_INVOKE_REMOTE);
+        stateJustChanged = true;
+      }
+      // Perform only if : 
+      // 1. doing a reflection and in this state
+      // 2. sampling and reflection has been done at least this state
+      //    if reflection has not been done till this state then user is not
+      //    interested in sampling till this state
+      if((state == MethodConfig.METHOD_INVOKE_REMOTE && reflectionStatus
+	&& !stateJustChanged)
+	|| (state >= MethodConfig.METHOD_INVOKE_REMOTE && !reflectionStatus))
+      {
+        catClass.debug("sample1 : METHOD_INVOKE_REMOTE");
+        Method method = model.getRemoteMethod();
+        if(catClass.isDebugEnabled())
+        {
+          catClass.debug("sample1 : remote method to be invoked - " + method);
+        }
+        Object selectedRemoteInterfaceType = model.getRemoteInterfaceType();
+        // only initialize homeMethodRes if method execution is to be measured
+        remoteMethodRes = new SampleResult();
+        // gather all parms from MethodConfigGui
+        Object[] parmsArray = null;
+        try
+        {
+          parmsArray = methodConfigGui.getMethodParmsValues(
+		MethodConfig.METHOD_INVOKE_REMOTE);
+          // invoke the method
+          start = System.currentTimeMillis();
+          results = method.invoke(selectedRemoteInterfaceType, parmsArray);
+System.out.println("return - " + results);
+        }
+        catch(IllegalAccessException err)
+        {
+          catClass.error(err);
+          System.out.println(err);
+        }
+        catch(InvocationTargetException err)
+        {
+          catClass.error(err);
+          System.out.println(err);
+        }
+        catch(MethodConfigUserObjectException err)
+        {
+          catClass.error(err);
+          System.out.println(err);
+        }
+        end = System.currentTimeMillis();
+        if(!reflectionStatus)
+        {
+          // if sampling get the time lapse
+          remoteMethodTime = end - start;
+          remoteMethodRes.setTime(remoteMethodTime);
+          remoteMethodRes.putValue(SampleResult.DISPLAY_NAME, "Remote Method Execution - "
+                + method.getName());
+          String resultsString = results.toString();
+          byte[] resultBytes = null;
+          if(resultsString != null)
+          {
+            resultBytes = resultsString.getBytes();
+          }
+          remoteMethodRes.putValue(SampleResult.TEXT_RESPONSE, resultBytes);
+          remoteMethodRes.putValue(SampleResult.SUCCESS, new Boolean(true));
+        }
+        else
+        {
+          // if reflection the set state
+          model.setState(MethodConfig.METHOD_COMPLETE);
+          stateJustChanged = true;
+        }
+      }
+
+      long totalTime = ctxTime + lookupTime + homeMethodTime + remoteMethodTime;
+      res.setTime(0);
+      res.putValue(SampleResult.DISPLAY_NAME, lookupName);
+      ArrayList resultList = new ArrayList();
+      // don't need to test for null in contextLookupRes and lookupRes
+      // because both cannot be null otherwise error will be thrown
+      resultList.add(contextLookupRes);
+      resultList.add(lookupRes);
+      // test for null in homeMethodRes 'cos a null means that user just want
+      // to get a list of all home methods
+      if(homeMethodRes != null)
+      {
+        resultList.add(homeMethodRes);
+      }
+      // test for null in remoteMethodRes 'cos a null means that user just want
+      // to get a list of all methods of the remote interfaces
+      if(remoteMethodRes != null)
+      {
+        resultList.add(remoteMethodRes);
+      }
+      res.putValue(SampleResult.RESULT_LIST, resultList);
+      res.putValue(SampleResult.TOTAL_TIME, new Long(totalTime));
+
+      System.out.println("!!!!! ctxTime : " + ctxTime);
+      System.out.println("!!!!! lookupTime : " + lookupTime);
+      System.out.println("!!!!! homeMethodTime : " + homeMethodTime);
+    }
+    catch(NamingException err)
+    {
+      catClass.error(err);
+      System.err.println(err);
+    }
+    
+    catClass.info("End : sample1");
+    return res;
+  }
+
+  /**
+   * From the <code>Method</code>, return the method signature i.e.
+   * method name followed by all the parms separated by commas and within
+   * parentheses
+   *
+   * @param method	the method which the method signature is required
+   * @return	method signature of the method
+   */
+  protected String getMethodSignature(Method method)
+  {
+    catClass.debug("Start : getMethodSignature1");
+    StringBuffer strbuff = new StringBuffer();
+    Class[] parameterTypes = method.getParameterTypes();
+    strbuff.append(method.getName());
+    strbuff.append("(");
+    if(parameterTypes.length > 0)
+    {
+      for(int j = 0; j < (parameterTypes.length - 1); j++)
+      {
+        strbuff.append(parameterTypes[j].toString());
+        strbuff.append(", ");
+      }
+      strbuff.append(parameterTypes[parameterTypes.length - 1]);
+    }
+    strbuff.append(")");
+    String returnVal = strbuff.toString();
+    catClass.debug("getMethodSignature1 : method signature - " + returnVal);
+    catClass.debug("End : getMethodSignature1");
+    return returnVal;
+  }
+
+  /**
+   * Given a method name and a class, compares the method name against all
+   * the methods in the class to look for a match.  Once found, return an
+   * array containing all the Class of the parms of the method.
+   */
+  protected Vector getMethodParmsTypes(String methodName, Class objectClass)
+  {
+    catClass.debug("Start : getMethodParms1");
+    Method[] methods = objectClass.getMethods();
+    Method method = null;
+    Class[] methodParmTypes = null;
+    Class[] parameterTypes = null;
+    StringBuffer strbuff = new StringBuffer();
+    for(int i = 0; i < methods.length; i++)
+    {
+      // create method name which includes method signatures
+      parameterTypes = methods[i].getParameterTypes();
+      strbuff.delete(0, strbuff.length());
+      strbuff.append(methods[i].getName());
+      strbuff.append("(");
+      if(parameterTypes.length > 0)
+      {
+        for(int j = 0; j < (parameterTypes.length - 1); j++)
+        {
+          strbuff.append(parameterTypes[j].toString());
+          strbuff.append(", ");
+        }
+        strbuff.append(parameterTypes[parameterTypes.length - 1]);
+      }
+      strbuff.append(")");
+      String name = strbuff.toString();
+      if(catClass.isDebugEnabled())
+      {
+        catClass.debug("getMethodParms1 : current method to be compared - " 
+		+ name);
+      }
+      if(name.equals(methodName))
+      {
+        method = methods[i];
+        methodParmTypes = parameterTypes;
+        break;
+      }
+    }
+    Vector returnValues = new Vector();
+    returnValues.add(method);
+    returnValues.add(methodParmTypes);
+    catClass.debug("End : getMethodParms1");
+    return returnValues;
+  }
+}
diff --git a/jakarta-jmeter/xdocs/CVS/Entries b/jakarta-jmeter/xdocs/CVS/Entries
new file mode 100644
index 0000000..0737dab
--- /dev/null
+++ b/jakarta-jmeter/xdocs/CVS/Entries
@@ -0,0 +1,16 @@
+/bugs.xml/1.3/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/changes.xml/1.10/Sat Aug 10 17:18:33 2002//Tv1_7_3
+/contributing.xml/1.6/Sat Aug 10 17:18:33 2002//Tv1_7_3
+/extending.xml/1.1/Wed Mar  7 06:38:36 2001//Tv1_7_3
+/how_to_use_jmeter.xml/1.1/Wed Mar  7 06:38:36 2001//Tv1_7_3
+/index.xml/1.4/Sat Mar  9 23:47:57 2002//Tv1_7_3
+/installing.xml/1.2/Tue Aug 28 21:28:33 2001//Tv1_7_3
+/license.xml/1.1/Thu Mar 29 23:56:28 2001//Tv1_7_3
+/running.xml/1.3/Thu Aug 30 17:19:03 2001//Tv1_7_3
+/todo.xml/1.5/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/velocity.properties/1.2/Fri Mar  1 00:09:06 2002//Tv1_7_3
+D/demos////
+D/extending////
+D/stylesheets////
+D/user_manual////
+D/usermanual////
diff --git a/jakarta-jmeter/xdocs/CVS/Repository b/jakarta-jmeter/xdocs/CVS/Repository
new file mode 100644
index 0000000..6ba57cd
--- /dev/null
+++ b/jakarta-jmeter/xdocs/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/xdocs
diff --git a/jakarta-jmeter/xdocs/CVS/Root b/jakarta-jmeter/xdocs/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/xdocs/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/xdocs/CVS/Tag b/jakarta-jmeter/xdocs/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/xdocs/bugs.xml b/jakarta-jmeter/xdocs/bugs.xml
new file mode 100644
index 0000000..f973ac2
--- /dev/null
+++ b/jakarta-jmeter/xdocs/bugs.xml
@@ -0,0 +1,14 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Brendan Burns, et al.</author>
+	 <title>Known Bugs</title>
+  </properties>
+<body>
+<section name="Known Bugs">
+<p>
+JMeter 1.6Alpha is just out.  There are no known bugs currently (but plenty of things
+to do still)</p>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/changes.xml b/jakarta-jmeter/xdocs/changes.xml
new file mode 100644
index 0000000..e603692
--- /dev/null
+++ b/jakarta-jmeter/xdocs/changes.xml
@@ -0,0 +1,205 @@
+<?xml version="1.0"?> 
+<document>   
+<properties>     
+	<author email="mstover1@apache.org">Michael Stover, et al.</author>     
+	<title>History of Changes</title>   
+</properties> 
+<body> 
+<section name="History of Changes"> 
+<p><b>Changes are chronologically ordered from top (most recent) to bottom 
+(least recent)</b></p>  
+
+<b>Changes: for more info, contact <a href="mailto:mstover1@apache.org">Michael Stover</a></b>
+<h3>Version 1.7.3</h3>
+<ul>
+<li>New Functions that provide more ability to change requests dynamically during test runs.</li>
+<li>New language translations in Japanese and German.</li>
+<li>Removed annoying Log4J error messages.</li>
+<li>Improved support for loading JMeter 1.7 version test plan files (.jmx files).</li>
+<li>JMeter now supports proxy servers that require username/password authentication.</li>
+<li>Dialog box indicating test stopping doesn't hang JMeter on problems with stopping test.</li>
+<li>GUI can run multiple remote JMeter servers (fixes GUI bug that prevented this).</li>
+<li>Dialog box to help created function calls in GUI.</li>
+<li>New Keep-alive switch in HTTP Requests to indicate JMeter should or should not use Keep-Alive for sockets.</li>
+<li>HTTP Post requests can have GET style arguments in Path field.  Proxy records them correctly now.</li>
+<li>New User-defined test-wide static variables.</li>
+<li>View Results Tree now displays more information, including name of request (matching the name
+in the test tree) and full request and POST data.</li>
+<li>Removed obsolete View Results Visualizer (use View Results Tree instead).</li>
+<li>Performance enhancements.</li>
+<li>Memory use enhancements.</li>
+<li>Graph visualizer GUI improvements.</li>
+<li>Updates and fixes to Mailer Visualizer.</li>
+</ul>
+ 
+<h3>Version 1.7.2</h3>
+<ul>
+<li>JMeter now notifies user when test has stopped running.</li>
+<li>HTTP Proxy server records HTTP Requests with re-direct turned off.</li>
+<li>HTTP Requests can be instructed to either follow redirects or ignore them.</li>
+<li>Various GUI improvements.</li>
+<li>New Random Controller.</li>
+<li>New SOAP/XML-RPC Sampler.</li>
+</ul>
+
+<h3>Version 1.7.1</h3>
+<ul>
+<li>JMeter's architecture revamped for a more complete separation between GUI code and
+test engine code.</li>
+<li>Use of Avalon code to save test plans to XML as Configuration Objects</li>
+<li>All listeners can save data to file and load same data at later date.</li>
+</ul>
+
+<h3>Version 1.7Beta</h3> 
+<ul> 
+	<li>Better XML support for special characters (Tushar Bhatia) </li> 
+	<li>Non-GUI functioning  &amp; Non-GUI test plan execution  (Tushar Bhatia)</li> 
+	<li>Removing Swing dependence from base JMeter classes</li> 
+	<li>Internationalization (Takashi Okamoto)</li> 
+	<li>AllTests bug fix (neth6@atozasia.com)</li> 
+	<li>ClassFinder bug fix (neth6@atozasia.com)</li> 
+	<li>New Loop Controller</li> 
+	<li>Proxy Server records HTTP samples from browser 
+		(and documented in the user manual)</li> <li>Multipart Form support</li> 
+	<li>HTTP Header class for Header customization</li> 
+	<li>Extracting HTTP Header information from responses (Jamie Davidson)</li> 
+	<li>Mailer Visualizer re-added to JMeter</li> 
+	<li>JMeter now url encodes parameter names and values</li> 
+	<li>listeners no longer give exceptions if their gui's haven't been initialized</li> 
+	<li>HTTPS and Authorization working together</li> 
+	<li>New Http sampling that automatically parses HTML response 
+		for images to download, and includes the downloading of these 
+		images in total time for request (Neth neth6@atozasia.com) </li> 
+	<li>HTTP responses from server can be parsed for links and forms, 
+		and dynamic data can be extracted and added to test samples 
+		at run-time (documented)</li>  
+	<li>New Ramp-up feature (Jonathan O'Keefe)</li> 
+	<li>New visualizers (Neth)</li> 
+	<li>New Assertions for functional testing</li> 
+</ul>  
+
+<h3>Version 1.6.1</h3> 
+<ul> 
+	<li>Fixed saving and loading of test scripts (no more extra lines)</li> 
+	<li>Can save and load special characters (such as &quot;&amp;&quot; and &quot;&lt;&quot;).</li> 
+	<li>Can save and load timers and listeners.</li> 
+	<li>Minor bug fix for cookies (if you cookie value 
+		contained an &quot;=&quot;, then it broke).</li> 
+	<li>URL's can sample ports other than 80, and can test HTTPS, 
+		provided you have the necessary jars (JSSE)</li> 
+</ul> 
+
+<h3>Version 1.6 Alpha</h3> 
+<ul> 
+	<li>New UI</li> 
+	<li>Separation of GUI and Logic code</li> 	
+	<li>New Plug-in framework for new modules</li> 
+	<li>Enhanced performance</li> 
+	<li>Layering of test logic for greater flexibility</li> 
+	<li>Added support for saving of test elements</li> 
+	<li>Added support for distributed testing using a single client</li> 
+
+</ul> 
+<h3>Version 1.5.1</h3> 
+<ul> 
+	<li>Fixed bug that caused cookies not to be read if header name case not as expected.</li> 
+	<li>Clone entries before sending to sampler - prevents relocations from messing up 
+		information across threads</li> 
+	<li>Minor bug fix to convenience dialog for adding paramters to test sample.  
+		Bug prevented entries in dialog from appearing in test sample.</li> 
+	<li>Added xerces.jar to distribution</li> 
+	<li>Added junit.jar to distribution and created a few tests.</li> 
+	<li>Started work on new framework.  New files in cvs, but do not effect program yet.</li> 
+	<li>Fixed bug that prevent HTTPJMeterThread from delaying according to chosen timer.</li> 
+</ul>  
+<p> 
+<h3>Version 1.5</h3> 
+<ul>   
+	<li>Abstracted out the concept of the Sampler, SamplerController, and TestSample.   
+		A Sampler represents code that understands a protocol (such as HTTP, 
+		or FTP, RMI,   SMTP, etc..).  It is the code that actually makes the 
+		connection to whatever is   being tested.   A SamplerController 
+		represents code that understands how to organize and run a group   
+		of test samples.  It is what binds together a Sampler and it's test 
+		samples and runs them.   A TestSample represents code that understands 
+		how to gather information from the   user about a particular test.  
+		For a website, it would represent a URL and any   information to be sent 
+		with the URL.</li>   
+	<li>The UI has been updated to make entering test samples more convenient.</li>   
+	<li>Thread groups have been added, allowing a user to setup multiple test to run   
+		concurrently, and to allow sharing of test samples between those tests.</li>   
+	<li>It is now possible to save and load test samples.</li>   
+	<li>....and many more minor changes/improvements...</li> 
+</ul> 
+</p> 
+<p> 
+<b>Apache JMeter 1.4.1-dev</b> (<a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>)  
+<ul>
+   <li>Cleaned up URLSampler code after tons of patches for better readability. (SM)</li>
+   <li>Made JMeter send a special &quot;user-agent&quot; identifier. (SM)</li>
+   <li>Fixed problems with redirection not sending cookies and authentication info and removed
+     a warning with jikes compilation. Thanks to <a href="mailto:wtanaka@yahoo.com">Wesley
+     Tanaka</a> for the patches (SM)</li>
+   <li>Fixed a bug in the URLSampler that caused to skip one URL when testing lists of URLs and
+     a problem with Cookie handling. Thanks to <a
+     href="mailto:gjohnson@investlearning.com">Graham Johnson</a> for the patches (SM)</li>
+   <li>Fixed a problem with POST actions. Thanks to <a href="mailto:sschaub@bju.edu">Stephen
+     Schaub</a> for the patch (SM)</li>
+ </ul>
+ </p>
+ <p>
+ <b>Apache JMeter 1.4</b> - Jul 11 1999 (<a href="mailto:cimjpno@be.ibm.com">Jean-Pierre Norguet</a>,
+ <a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>)
+  <ul>
+   <li>Fixed a problem with POST actions. Thanks to <a href="mailto:bburns@labs.gte.com">Brendan
+     Burns</a> for the patch (SM)</li>
+   <li>Added close button to the About box for those window managers who don't provide it.
+     Thanks to Jan-Henrik Haukeland for pointing it out. (SM)</li>
+   <li>Added the simple Spline sample visualizer (JPN)</li> 
+</ul> </p>
+  <p><b>Apache JMeter 1.3</b> - Apr 16 1999
+  (<a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>,
+ <a href="mailto:luta.raphael@networks.vivendi.net">Raphaël Luta</a>)
+<ul>
+   <li>Run the Garbage Collector and run finalization before starting to sampling to ensure
+     same state every time (SM)</li>
+   <li>Fixed some NullPointerExceptions here and there (SM)</li>
+   <li>Added HTTP authentication capabilities (RL)</li>
+   <li>Added windowed sample visualizer (SM)</li>
+   <li>Fixed stupid bug for command line arguments. Thanks to <a
+     href="mailto:jbracer@infoneers.com">Jorge Bracer</a> for pointing this out (SM)</li> 
+</ul> </p>
+  <p><b>Apache JMeter 1.2</b> - Mar 17 1999 (<a href="mailto:sdowd@arcmail.com">Sean Dowd</a>, 
+<a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>)  
+<ul>
+   <li>Integrated cookie capabilities with JMeter (SM)</li>
+   <li>Added the Cookie manager and Netscape file parser (SD)</li>
+   <li>Fixed compilation error for JDK 1.1 (SD)</li> </ul> </p>  
+<p> <b>Apache JMeter 1.1</b> - Feb 24 1999 (<a href="mailto:sdowd@arcmail.com">Sean Dowd</a>, 
+<a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>)  
+<ul>
+   <li>Created the opportunity to create URL aliasing from the properties file as well as the
+     ability to associate aliases to URL sequences instead of single URLs (SM) Thanks to <a
+     href="mailto:chatfield@evergreen.com">Simon Chatfield</a> for the very nice suggestions
+     and code examples.</li>
+   <li>Removed the TextVisualizer and replaced it with the much more useful FileVisualizer (SM)</li>
+   <li>Added the known bug list (SM)</li>
+   <li>Removed the Java Apache logo (SM)</li>
+   <li>Fixed a couple of typos (SM)</li>
+   <li>Added UNIX makefile (SD)</li> </ul> </p> 
+<p> <b>Apache JMeter 1.0.1</b> - Jan 25 1999 (<a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>)  
+<ul>
+   <li>Removed pending issues doc issues (SM)</li>
+   <li>Fixed the unix script (SM)</li>
+   <li>Added the possibility of running the JAR directly using &quot;java -jar
+     ApacheJMeter.jar&quot; with Java 2 (SM)</li>
+   <li>Some small updates: fixed Swing location after Java 2(tm) release, license update and
+     small cleanups (SM)</li> 
+</ul> </p> 
+<p> <b>Apache JMeter 1.0</b> - Dec 15 1998 (<a href="mailto:stefano@apache.org">Stefano Mazzocchi</a>) 
+<ul>
+   <li>Initial version. (SM)</li> 
+</ul> </p> 
+</section> 
+</body> 
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/contributing.xml b/jakarta-jmeter/xdocs/contributing.xml
new file mode 100644
index 0000000..5858b8d
--- /dev/null
+++ b/jakarta-jmeter/xdocs/contributing.xml
@@ -0,0 +1,43 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+    <author email="bburns@apache.org">Brendan Burns, et al.</author>
+    <title>Contributing to The Jakarta Project</title>
+  </properties>
+<body>
+<section name="Contributors to Apache JMeter">
+<p>Many people have contributed code, documentation and bug reports to the JMeter project.  For this, we are grateful.  </p>
+
+<ul><strong>Contributors (in no particular order):</strong>
+<li>Berin Loritsch (committer)</li>
+<li>Martin Ramshaw</li>
+<li>Kevin Hammond (committer)</li>
+<li>Neth (committer)</li>
+<li>Derek Baum</li>
+<li>Jordi Salvat i Alabart</li>
+<li>William Weber</li>
+<li>Brendan Burns (committer)</li>
+<li>Michael Stover (commiter &amp; release manager)</li>
+<li>Jim Boucher (committer)</li>
+<li>Wolfram Rittmeyer</li>
+<li>Dion McMurtrie</li>
+</ul>
+<p>If your name does not appear here and you feel it should, please 
+send me an email (mstover1@apache.org).</p>
+</section>
+<section name="Contributing To The Jakarta Project">
+<p>
+The Jakarta Project is an open volunteer project. This means that anyone may
+partecipate to the development process even actively (writing, discussing, proposing code)
+or passively (listening and learning). You are more than welcome to join our group of
+developers if you feel you are ready for it and wish to give a hand. 
+</p>
+<p>
+If you want more info about Jakarta development (mailing list, CVS info, code
+style, subprojects, people to ask) check out our web site:
+</p>
+<a HREF="http://jakarta.apache.org">
+<p>http://jakarta.apache.org</p></a>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/demos/AssertionTestPlan.jmx b/jakarta-jmeter/xdocs/demos/AssertionTestPlan.jmx
new file mode 100644
index 0000000..4123205
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/AssertionTestPlan.jmx
@@ -0,0 +1,83 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Thread Group</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">HTTP Request</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.domain">jakarta.apache.org</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.assertions.Assertion">
+<property name="TestElement.test_class">org.apache.jmeter.assertions.Assertion</property>
+<property name="TestElement.name">Assertion</property>
+<property name="Assertion.test_type">2</property>
+<property name="Assertion.test_field">Assertion.response_data</property>
+<collection name="Asserion.test_strings" class="java.util.ArrayList">
+<string>&lt;/html&gt;</string>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.assertions.gui.AssertionGui</property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">assertion.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">Assertion Results</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.AssertionVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/AuthManagerTestPlan.jmx b/jakarta-jmeter/xdocs/demos/AuthManagerTestPlan.jmx
new file mode 100644
index 0000000..6a60c95
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/AuthManagerTestPlan.jmx
@@ -0,0 +1,146 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Thread Group</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.control.AuthManager">
+<property name="TestElement.name">HTTP Authorization Manager</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.control.AuthManager</property>
+<collection name="AuthManager.auth_list" class="java.util.ArrayList">
+<testelement class="org.apache.jmeter.protocol.http.control.Authorization">
+<property name="Authorization.username">kevin</property>
+<property name="Authorization.url">http://localhost/secret</property>
+<property name="Authorization.password">spot</property>
+</testelement>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.gui.AuthPanel</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.config.ConfigTestElement">
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.port"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.ConfigTestElement</property>
+<property name="TestElement.name">HTTP Request Defaults</property>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.LinkedList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">false</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="HTTPSampler.domain">localhost</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.config.gui.UrlConfigGui</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">SecretPage1</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/secret/index.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">SecretPage2</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/secret/index2.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">NoSecretPage</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/index.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">auth-manager.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/CVS/Entries b/jakarta-jmeter/xdocs/demos/CVS/Entries
new file mode 100644
index 0000000..031619a
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/CVS/Entries
@@ -0,0 +1,11 @@
+/AssertionTestPlan.jmx/1.2/Wed Aug  7 18:49:38 2002/-kb/Tv1_7_3
+/AuthManagerTestPlan.jmx/1.3/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/HeaderManagerTestPlan.jmx/1.2/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/InterleaveTestPlan.jmx/1.2/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/InterleaveTestPlan2.jmx/1.2/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/LoopTestPlan.jmx/1.2/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/OnceOnlyTestPlan.jmx/1.2/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/ProxyServerTestPlan.jmx/1.1/Sat Nov 24 00:15:11 2001//Tv1_7_3
+/SimpleTestPlan.jmx/1.2/Wed Aug  7 18:49:38 2002//Tv1_7_3
+/URLRewritingExample.jmx/1.2/Tue Jul 23 18:06:31 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/xdocs/demos/CVS/Repository b/jakarta-jmeter/xdocs/demos/CVS/Repository
new file mode 100644
index 0000000..0797be9
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/xdocs/demos
diff --git a/jakarta-jmeter/xdocs/demos/CVS/Root b/jakarta-jmeter/xdocs/demos/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/xdocs/demos/CVS/Tag b/jakarta-jmeter/xdocs/demos/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/xdocs/demos/HeaderManagerTestPlan.jmx b/jakarta-jmeter/xdocs/demos/HeaderManagerTestPlan.jmx
new file mode 100644
index 0000000..d3bb2f6
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/HeaderManagerTestPlan.jmx
@@ -0,0 +1,77 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Thread Group</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.control.HeaderManager">
+<property name="TestElement.name">HTTP Header Manager</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.control.HeaderManager</property>
+<collection name="HeaderManager.headers" class="java.util.ArrayList">
+<testelement class="org.apache.jmeter.protocol.http.control.Header">
+<property name="TestElement.name">User-Agent</property>
+<property name="Header.value">Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)</property>
+</testelement>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.gui.HeaderPanel</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">HTTP Request</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.domain">jakarta.apache.org</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">header-manager.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/InterleaveTestPlan.jmx b/jakarta-jmeter/xdocs/demos/InterleaveTestPlan.jmx
new file mode 100644
index 0000000..e9b3940
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/InterleaveTestPlan.jmx
@@ -0,0 +1,124 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList">
+<testelement class="org.apache.jmeter.config.Argument">
+<property name="Argument.name">server</property>
+<property name="Argument.value">jakarta.apache.org</property>
+</testelement>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Jakarta Users</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">5</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">2</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.control.InterleaveControl">
+<property name="TestElement.test_class">org.apache.jmeter.control.InterleaveControl</property>
+<property name="TestElement.name">Interleave Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.InterleaveControlGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">News Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/news.html</property>
+<property name="HTTPSampler.domain">${server}</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">FAQ Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/faqs.html</property>
+<property name="HTTPSampler.domain">${server}</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Gump Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/gump</property>
+<property name="HTTPSampler.domain">${server}</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">interleave-test.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/InterleaveTestPlan2.jmx b/jakarta-jmeter/xdocs/demos/InterleaveTestPlan2.jmx
new file mode 100644
index 0000000..5f5bb78
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/InterleaveTestPlan2.jmx
@@ -0,0 +1,184 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Jakarta Users</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">8</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.control.InterleaveControl">
+<property name="TestElement.test_class">org.apache.jmeter.control.InterleaveControl</property>
+<property name="TestElement.name">Interleave Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.InterleaveControlGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.config.ConfigTestElement">
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.port"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.ConfigTestElement</property>
+<property name="TestElement.name">Defaults</property>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.LinkedList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">false</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="HTTPSampler.domain">jakarta.apache.org</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.config.gui.UrlConfigGui</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.control.InterleaveControl">
+<property name="TestElement.test_class">org.apache.jmeter.control.InterleaveControl</property>
+<property name="TestElement.name">Interleave Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.InterleaveControlGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Home Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">CVS Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/cvsindex.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.control.InterleaveControl">
+<property name="TestElement.test_class">org.apache.jmeter.control.InterleaveControl</property>
+<property name="TestElement.name">Interleave Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.InterleaveControlGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Bug Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/bugs.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">FAQ Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/faqs.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">interleave-test2.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">View Results Tree</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.ViewResultsFullVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/LoopTestPlan.jmx b/jakarta-jmeter/xdocs/demos/LoopTestPlan.jmx
new file mode 100644
index 0000000..85ca8f7
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/LoopTestPlan.jmx
@@ -0,0 +1,117 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Jakarta Users</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.config.ConfigTestElement">
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.port"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.ConfigTestElement</property>
+<property name="TestElement.name">Defaults</property>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.LinkedList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">false</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="HTTPSampler.domain">jakarta.apache.org</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.config.gui.UrlConfigGui</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Home Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">true</property>
+<property name="LoopController.loops">5</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">News Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/news.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">loop-test.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/OnceOnlyTestPlan.jmx b/jakarta-jmeter/xdocs/demos/OnceOnlyTestPlan.jmx
new file mode 100644
index 0000000..4e08920
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/OnceOnlyTestPlan.jmx
@@ -0,0 +1,115 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Jakarta Users</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">3</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">2</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.config.ConfigTestElement">
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.port"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.ConfigTestElement</property>
+<property name="TestElement.name">Defaults</property>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.LinkedList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">false</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="HTTPSampler.domain">jakarta.apache.org</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.config.gui.UrlConfigGui</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.control.OnceOnlyController">
+<property name="TestElement.test_class">org.apache.jmeter.control.OnceOnlyController</property>
+<property name="TestElement.name">Once Only Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.OnceOnlyControllerGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Home Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Bug Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/site/bugs.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">once-only-test.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/ProxyServerTestPlan.jmx b/jakarta-jmeter/xdocs/demos/ProxyServerTestPlan.jmx
new file mode 100644
index 0000000..bb68bbe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/ProxyServerTestPlan.jmx
@@ -0,0 +1,33 @@
+<?xml version="1.0"?>
+
+<TestPlan>
+<threadgroups>
+<ThreadGroup name="Thread Group" numThreads="1" rampUp="0">
+<controllers>
+<LoopController type="org.apache.jmeter.control.LoopController" name="Loop Controller" iterations="1">
+<configElements>
+<ProxyControl type="org.apache.jmeter.protocol.http.proxy.ProxyControl">
+<property name="port">8080</property>
+<property name="name">HTTP Proxy Server</property>
+<property name="includes"><Arguments>
+</Arguments>
+</property>
+<property name="excludes"><Arguments>
+</Arguments>
+</property>
+</ProxyControl>
+</configElements>
+<controllers>
+</controllers>
+</LoopController>
+</controllers>
+<timers>
+</timers>
+<listeners>
+</listeners>
+</ThreadGroup>
+
+</threadgroups>
+<configElements>
+</configElements>
+</TestPlan>
diff --git a/jakarta-jmeter/xdocs/demos/SimpleTestPlan.jmx b/jakarta-jmeter/xdocs/demos/SimpleTestPlan.jmx
new file mode 100644
index 0000000..344b7b9
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/SimpleTestPlan.jmx
@@ -0,0 +1,170 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.testelement.TestPlan">
+<property name="TestElement.test_class">org.apache.jmeter.testelement.TestPlan</property>
+<property name="TestElement.name">Test Plan</property>
+<property name="TestPlan.functional_mode">false</property>
+<collection name="TestPlan.thread_groups" class="java.util.LinkedList"/>
+<testelement name="TestPlan.user_defined_variables" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name">Argument List</property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.TestPlanGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">Jakarta Users</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.config.ConfigTestElement">
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.port"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.ConfigTestElement</property>
+<property name="TestElement.name">Defaults</property>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.name"> </property>
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<collection name="Arguments.arguments" class="java.util.LinkedList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">false</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.path">/</property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="HTTPSampler.domain">jakarta.apache.org</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.config.gui.UrlConfigGui</property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.control.GenericController">
+<property name="TestElement.test_class">org.apache.jmeter.control.GenericController</property>
+<property name="TestElement.name">Ant Pages</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LogicControllerGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Home Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/ant/index.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">News Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/ant/antnews.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.control.GenericController">
+<property name="TestElement.test_class">org.apache.jmeter.control.GenericController</property>
+<property name="TestElement.name">Log4J Pages</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LogicControllerGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">Home Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/log4j/index.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.name">History Page</property>
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="HTTPSampler.port"> </property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/log4j/docs/history.html</property>
+<property name="HTTPSampler.domain"> </property>
+<property name="HTTPSampler.use_keepalive">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+</node>
+<node>
+<testelement class="org.apache.jmeter.reporters.ResultCollector">
+<property name="TestElement.name">File Reporter</property>
+<property name="TestElement.test_class">org.apache.jmeter.reporters.ResultCollector</property>
+<property name="filename">simple-test.dat</property>
+<property name="TestElement.gui_class">org.apache.jmeter.visualizers.GraphVisualizer</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/demos/URLRewritingExample.jmx b/jakarta-jmeter/xdocs/demos/URLRewritingExample.jmx
new file mode 100644
index 0000000..c7db276
--- /dev/null
+++ b/jakarta-jmeter/xdocs/demos/URLRewritingExample.jmx
@@ -0,0 +1,112 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<node>
+<testelement class="org.apache.jmeter.threads.ThreadGroup">
+<property name="TestElement.name">URL Re-writing Example</property>
+<property name="TestElement.test_class">org.apache.jmeter.threads.ThreadGroup</property>
+<testelement name="ThreadGroup.main_controller" class="org.apache.jmeter.control.LoopController">
+<property name="TestElement.test_class">org.apache.jmeter.control.LoopController</property>
+<property name="TestElement.name">Loop Controller</property>
+<property name="LoopController.continue_forever">false</property>
+<property name="LoopController.loops">-1</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LoopControlPanel</property>
+</testelement>
+<property name="ThreadGroup.num_threads">1</property>
+<property name="ThreadGroup.ramp_time">0</property>
+<property name="TestElement.gui_class">org.apache.jmeter.threads.gui.ThreadGroupGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.control.GenericController">
+<property name="TestElement.test_class">org.apache.jmeter.control.GenericController</property>
+<property name="TestElement.name">Simple Controller</property>
+<property name="TestElement.gui_class">org.apache.jmeter.control.gui.LogicControllerGui</property>
+</testelement>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="TestElement.name">Login</property>
+<property name="HTTPSampler.method">POST</property>
+<property name="HTTPSampler.port">80</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList">
+<testelement class="org.apache.jmeter.config.Argument">
+<property name="Argument.name">username</property>
+<property name="Argument.value">user</property>
+</testelement>
+<testelement class="org.apache.jmeter.config.Argument">
+<property name="Argument.name">password</property>
+<property name="Argument.value">password</property>
+</testelement>
+</collection>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/main.jsp</property>
+<property name="HTTPSampler.use_keepalive">true</property>
+<property name="HTTPSampler.domain">my.server.com</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="TestElement.name">Do Something interesting</property>
+<property name="HTTPSampler.method">GET</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/something_interesting.jsp</property>
+<property name="HTTPSampler.use_keepalive">true</property>
+<property name="HTTPSampler.domain">my.server.com</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.sampler.HTTPSampler">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.sampler.HTTPSampler</property>
+<property name="TestElement.name">Another Interesting Request</property>
+<property name="HTTPSampler.method">POST</property>
+<property name="HTTPSampler.mimetype"> </property>
+<collection name="AbstractSampler.assertions" class="java.util.ArrayList"/>
+<testelement name="HTTPsampler.Arguments" class="org.apache.jmeter.config.Arguments">
+<property name="TestElement.test_class">org.apache.jmeter.config.Arguments</property>
+<property name="TestElement.name"> </property>
+<collection name="Arguments.arguments" class="java.util.ArrayList"/>
+<property name="TestElement.gui_class">org.apache.jmeter.config.gui.ArgumentsPanel</property>
+</testelement>
+<property name="HTTPSampler.follow_redirects">true</property>
+<property name="HTTPSampler.protocol">http</property>
+<property name="HTTPSampler.FILE_FIELD"> </property>
+<property name="HTTPSampler.path">/another.jsp</property>
+<property name="HTTPSampler.use_keepalive">true</property>
+<property name="HTTPSampler.domain">my.server.com</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</property>
+<property name="HTTPSampler.FILE_NAME"> </property>
+</testelement>
+</node>
+<node>
+<testelement class="org.apache.jmeter.protocol.http.modifier.URLRewritingModifier">
+<property name="TestElement.test_class">org.apache.jmeter.protocol.http.modifier.URLRewritingModifier</property>
+<property name="TestElement.name">HTTP URL-Rewriting Modifier</property>
+<property name="argument_name">SESSION_ID</property>
+<property name="path_extension">false</property>
+<property name="TestElement.gui_class">org.apache.jmeter.protocol.http.modifier.gui.URLRewritingModifierGui</property>
+</testelement>
+</node>
+</node>
+</node>
diff --git a/jakarta-jmeter/xdocs/extending.xml b/jakarta-jmeter/xdocs/extending.xml
new file mode 100644
index 0000000..89846b6
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending.xml
@@ -0,0 +1,137 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+    <author email="bburns@apache.org">Brendan Burns, et al.</author>
+    <title>Extending JMeter</title>
+  </properties>
+<body>
+<section name="Extending JMeter">
+<font color="red"><strong>Note to developers: JMeter is undergoing large changes.  The following
+description of JMeter's architecture will likely change in the near future.  If you
+would like your changes to work with an upcoming JMeter 1.6, please join our mailing
+list, and we will work with you and your modifications.</strong></font>
+<p><b>Customizing JMeter to suit your needs.</b></p>
+<h3>Extensible Interfaces</h3>
+<p>
+There are five basic objects in JMeter which provide extensibility:
+
+<ul>
+<li><a href="#visualizers">Visualizers</a> represent the sampling data which is recorded.</li>
+<li><a href="#timers">Timers</a> specify the delay between samples.</li>
+<li><a href="#samplercontrollers">SamplerControllers</a> hold information about all the test cases to be sampled, 
+and overall information about how the test is conducted.</li>
+<li><a href="#samplers">Samplers</a> are the classes that actually do the sampling of a particular protocol.</li>
+<li><a href="#testsamples">TestSamples</a> hold information about a particular test case to be sampled.</li>
+</ul>
+</p>
+<p>
+<a name="visualizers"></a>
+<h3>Visualizers</h3>
+The <code>Visualizer</code> interface exists in the <code>org.apache.jmeter.visualizers</code> package.
+JMeter maintains an instance of each visualizer it is aware of for each thread group currently available to the user.
+A visualizer provides a method of recording the data which JMeter generates.
+A visualizer may represent the data graphically (GraphVisualizer),
+persistently (FileVisualizer) or both (TBD).
+The visualizer contains three methods:
+<dl>
+<dt><code>add(SampleResult result)</code> adds data to the visualization.</dt>
+<dd>
+JMeter calls the <code>add</code> method to include new data in the visualizer.
+The visualizer should add the data into its data representation.
+</dd>
+<dt><code>clear()</code> clears all data in the visualizer currently</dt>
+<dd>
+JMeter calls <code>clear</code> when the user requests that all visualizers be cleared. When the <code>clear</code> method is called the visualizer should clear all data from its representation and re-initialize itself.
+</dd>
+<dt><code>getControlPanel()</code> obtains the GUI for the visualizer</dt>
+<dd>
+JMeter calls <code>getControlPanel</code> at start up time to prepare the
+visualizer for display.
+</dd>
+</dl>
+<a name="timers"></a>
+</p>
+<p>
+<h3>Timers</h3>
+Timers provide a framework for delaying in between samples.  This is important in order to obtain a true balanced load on a function rather than a calm-STORM-calm-STORM-calm... pattern.  Timers contain two methods:
+<dl>
+<dt><code>delay()</code> wait for a Timer specific amount of time</dt>
+<dd>JMeter calls this function prior to every sample.  The Timer should wait for a period of time and then return.</dd>
+<dt><code>set()</code> prepare for sampling</dt>
+<dd>JMeter calls this function prior to the begining of a test session.  The timer should initialize itself, read any values from its UI and prepare for operation.
+</dd>
+</dl>
+</p>
+<p>
+<a name="samplercontrollers"></a>
+<h3>SamplerControllers</h3>
+The sampler controller is by far the most complicated, but also the most powerful, interface in JMeter.  It allows a user to customize what, where and when JMeter tests.  It provides six methods:
+<dl>
+<dt><code>start()</code></dt>
+<dd>
+JMeter calls this immediatly prior to starting a test.  It is most often use to disable the SamplerController's GUI.
+</dd>
+<dt><code>stop()</code></dt>
+<dd>
+JMeter calls this when a user requests a stop to a test.  It is most often used to re-enable the SamplerController's GUI.
+</dd>
+<dt><code>getControlPanel()</code> Get the GUI for the SamplerController</dt>
+<dd>
+JMeter calls this at start up to create the its GUI.  This is how a user enters
+information into the SamplerController.
+</dd>
+<dt><code>getName()</code> Get the SamplerController's display name.</dt>
+<dd>
+JMeter uses this name in the list of SamplerControllers that it displays.
+</dd>
+<dt><code>getDefaultThreadGroups()</code></dt>
+<dd>Gets the default list of threadgroups.</dd>
+<dt><code>getSampleThreads(String threadGroup,int numThreads)</code></dt>
+<dd>When the user hits start, use this method to get all the JMeterThread objects you want for a threadgroup.  Each JMeterThread
+object implements Runnable and it is used to sample the test entries.
+</dd>
+</dl>
+</p>
+<p>
+<a name="samplers"></a>
+<h3>Samplers</h3>
+  Samplers are simple - they are the objects that know the protocol of that which
+  you wish to sample.  The HTTPSampler knows how to request a URL from a web server, for
+  instance.
+
+  The interface for Sampler is as follows:
+  <dl>
+  <dt><code>public SampleResult sample(Entry e)</code></dt>
+  <dd>JMeterThread implementations will loop through all the test samples given
+  to them, and call the sample method on the Sampler (also given to them) for each
+  test entry.  SampleResult is essentially a Map containing information about
+  the sampling (timing data is included, as well as the test response from the url).
+</dd>
+</dl>
+</p>
+<p>
+<a name="testsamples"></a>
+<h3>TestSample</h3>
+  TestSamples are objects that collect information from users about each test sample
+  the user wants to test.  The TestSample object is also responsible for serving
+  up its test entries.  The interface:
+  <dl>
+  <dt><code>public java.awt.Container getGUI()</code></dt>
+  <dd>Returns the GUI used to collect information from the user.</dd>
+  <dt><code>public Entry[] getEntries()</code></dt>
+  <dd>Gets a list of entries to be sampled from the TestSample object</dd>
+  <dt><code>public String[] getThreadGroups()</code></dt>
+  <dd>Get all the thread groups the user selected for this TestSample</dd>
+  <dt><code>public void setThreadGroups(String[] threadGroups)</code></dt>
+  <dd>Set the thread groups the user may choose from</dd>
+  <dt><code>public String getName()</code></dt>
+  <dd>Get a name for this TestSample</dd>
+  <dt><code>public void setName(String name)</code></dt>
+  <dd>Set the name for this TestSample</dd>
+  <dt><code>public void reset()</code></dt>
+  <dd>inform the test sample that a sampling run is starting</dd>
+  </dl>
+</p>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/extending/CVS/Entries b/jakarta-jmeter/xdocs/extending/CVS/Entries
new file mode 100644
index 0000000..75aca88
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending/CVS/Entries
@@ -0,0 +1,3 @@
+/JMeter Extension Scenario.xml/1.1/Thu Mar  7 23:03:13 2002//Tv1_7_3
+/index.xml/1.4/Thu Mar  7 23:03:13 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/xdocs/extending/CVS/Repository b/jakarta-jmeter/xdocs/extending/CVS/Repository
new file mode 100644
index 0000000..04af484
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/xdocs/extending
diff --git a/jakarta-jmeter/xdocs/extending/CVS/Root b/jakarta-jmeter/xdocs/extending/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/xdocs/extending/CVS/Tag b/jakarta-jmeter/xdocs/extending/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/xdocs/extending/JMeter Extension Scenario.xml b/jakarta-jmeter/xdocs/extending/JMeter Extension Scenario.xml
new file mode 100644
index 0000000..eca7422
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending/JMeter Extension Scenario.xml	
@@ -0,0 +1,188 @@
+<?xml version="1.0"?>
+<document>
+
+  <properties>
+
+	 <author email="mstover1@apache.org">Michael Stover</author>
+
+	 <title>Extending JMeter</title>
+
+  </properties>
+
+<body>
+
+<section name="JMeter Extension Scenario">
+<p>The purpose of this tutorial is to
+describe the general steps involved in a JMeter extension scenerio. The
+<a href="index.html">JMeter documentation</a> describes what must be done on a microscopic level but does
+not provide an overall idea of the process. That is the intent of this brief
+article. The JMeter extension documentation should be consulted for details.</p>
+<P>The high level procedure followed these steps.
+</P>
+<OL>
+  <LI><A href="#planning">Planning</A></LI>
+  <LI><A href="#config">Code the configuration
+  object</A> </LI>
+  <LI><A href="#config-gui">Code the configuration
+  GUI object</A> </LI>
+  <LI><A href="#control">Code the controller
+  object</A> </LI>
+  <LI><A href="#control-gui">Code the controller GUI
+  object</A> </LI>
+  <LI><A href="#sampler">Code the Sampler object</A> </LI>
+
+  <LI><A href="#installation">Install your
+  extension</A> </LI>
+  <LI><A href="#tips">Tips</A> </LI></OL>
+<H2><A name="planning">Planning</A></H2>I've found planning a JMeter extension to
+involve three aspects:
+
+<OL>
+  <LI>What you want the sampler to do </LI>
+  <LI>What information is needed for the sampler to work </LI>
+  <LI>How the information is to be acquired from the user </LI></OL>
+<P>You'll notice that the coding steps are somewhat backwards from the planning
+steps (the sampler is coded last). The coding order was determined by which
+classes could be tested earliest. The config/gui can be tested in isolation. The
+controller can be tested with the config element. Neither of these requires a
+Sampler to be present initially. </P>
+<H2><A name="config">Configuration Object</A></H2>The role of the configuration
+object is to supply parameters to the Sampler that can vary from sample to
+sample. In the case of the <TT>UrlConfig</TT> object, this would be information
+such as the host name, port, GET or PUT and various parameters.
+<P>The configuration object usually inherits from
+<TT>org.apache.jmeter.config.AbstractConfigElement</TT>. It implements many of
+the methods of <TT>org.apache.jmeter.gui.JMeterComponentModel</TT> that are
+needed to effectively interact with JMeter.
+</P>
+<OL>
+  <LI><B>Constructor</B> - In the constructor you should at least define the
+  name of your configuration element. This is best delegated to the base class's
+  <TT>setName</TT> method. </LI>
+  <LI><B>Property Name Strings</B> - You should define a static final string for
+  each property you wish to define. These strings will serve as keys into a hash
+  table maintained by <TT>AbstractConfigElement</TT>. For example: <PRE> public static final HOST_NAME = "hostname";</PRE>would define a property
+  in the hash table for storing a host name. </LI>
+  <LI><B>Getters/Setters</B> - For each property name you define in the previous
+  step, define the appropriate accessor methods. The implementation of these
+  accessors should usually delegate to <TT>AbstractConfigElement</TT>. For
+  example: <PRE>   public void setHostname(String hostname)
+	{ setProperty(HOST_NAME, hostname); }
+
+	public String getHostname()
+	{ return (String)getProperty(HOST_NAME); }
+	</PRE>Some accessor implementations may be more complex. See the
+  <TT>UrlConfig</TT> object for a more involved example.</LI>
+  <LI><B><TT>String getClassLabel()</TT></B> - This is the label that will
+  display in the drop-down menu for adding your configuration element.</LI>
+  <LI><B><TT>clone()</TT></B> - Your configuration element is expected to be
+  cloneable.</LI>
+  <LI><B><TT>addConfigElement(ConfigElement)</TT></B> - A typical implementation
+  of this method looks like <PRE>   public void addConfigElement(ConfigElement config) {
+		if (config instanceof MyConfig)
+			updatePropertyIfAbsent((MyConfig)config);
+	}</PRE>where <TT>updatePropertyIfAbsent</TT> is handled by the super class.</LI>
+  <LI><B><TT>getGuiClass</TT></B> - return the name of the this class's <A
+  href="#config-gui">corresponding GUI class</A>.
+  </LI></OL>
+<P>
+<H2><A name="config-gui">Configuration GUI</A></H2>Each configuration element you
+define can have a companion GUI class. It helps to have a little knowledge of
+Swing for this. Extend Swing's <TT>JPanel</TT> class and implement JMeter's
+<TT>org.apache.jmeter.gui.ModelSupported</TT> interface. Remember that you can
+review the <TT>UrlConfigGui</TT> example for hints if you get stuck.
+</P>
+<OL>
+  <LI><B>Data Members</B> - You should possess at least two data members: a
+  reference to your partner configuration element and a reference to a
+  <TT>org.apache.jmeter.gui.NamePanel</TT>. You will likely have several others
+  depending on how sophisticated your GUI is.</LI>
+  <LI><B>Add Panels</B> - The layout manager used for many of the panels used in
+  JMeter is <TT>org.apache.jmeter.gui.VerticalLayout</TT>. As the name implies,
+  it supports arranging other panels in a vertical fashion. You can define each
+  of your panels in a <TT>get</TT> method and add them to the configuration GUI
+  in a method called <B><TT>init</TT></B>. Once again, refer to
+  <TT>UrlConfigGui</TT> for an example.</LI>
+  <LI><B>Implement Listeners</B> - Implement listeners for your GUI components.
+  The <TT>UrlConfigGui</TT> serves as a satisfactory example.</LI>
+  <LI><B><TT>setModel</TT></B> - Use this method to have the model data member
+  set on your GUI instance. Run <TT>init</TT> from inside this method also.</LI>
+  <LI><B><TT>updateGui</TT></B> - Use this method to set the GUI fields from the
+  model.</LI></OL>
+
+<H2><A name="control">Generative Controller</A></H2>A generative controller is a
+controller that generates an <TT>Entry</TT> object for use by a Sampler.
+
+<OL>
+  <LI><B><TT>createEntry</TT></B> - This method is the raison d'etre of the
+  <TT>org.apache.jmeter.control.SamplerController</TT> interface. The general
+  idea is to construct an <TT>Entry</TT> object and populate it with config
+  objects.</LI>
+  <LI><B><TT>clone</TT></B> - After you perform you cloning duties, be sure to
+  pass the cloned instance to the <TT>standardCloneProc</TT> method so that base
+  class cloning activities can complete.</LI>
+  <LI><B><TT>getClassLabel</TT></B> - This is the label displayed by the
+  drop-down menu for the controller.</LI>
+  <LI><B><TT>getGuiClass</TT></B> - This should return a Class object for the <A
+  href="#control-gui">associated GUI class</A>. </LI></OL>
+<H2><A name="control-gui">Generative Controller GUI</A></H2>A generative
+controller GUI class should extend <TT>JPanel</TT> and implement
+<TT>ModelSupported</TT>. If your controller GUI doesn't involve anything beyond
+the configuration GUI, you might be able to get away with inheriting from the
+configuration gui class you created a couple steps ago. If you do this, you need
+to at least override the <TT>setModel</TT> method to make sure that the correct
+model is set on the class. You'll be passed a controller object but you'll want
+to extract the config element from the controller to be used as the model for
+your base class (the config gui).
+<H2><A name="sampler">Sampler</A></H2>The sampler is responsible for actually
+performing the work using the information provided in the configuration element.
+The method of importance is <PRE>public SampleResult sample(Entry e)</PRE>It is here that you extract
+configuration elements from the entry object you are passed. Then use these
+configuration elements to perform the task you extension is suppose to do.
+<H2><A name="installation">Installation</A></H2>Follow these steps to install your
+extension.
+
+<OL>
+  <LI>Package the class files into a JAR file. </LI>
+  <LI>Place the JAR file into the <TT>ext</TT> subdirectory of the JMeter root
+  install directroy. </LI>
+  <LI>Edit the <TT>bin/jmeter.properties</TT> file of the JMeter installation.
+  Find the <TT>search_paths</TT> entry and add your JAR to the list. It should
+  look like <PRE>search_paths=ApacheJMeter.jar;classes;../ext/YourJar.jar</PRE></LI>
+  <LI>Run JMeter and watch the magic. </LI></OL>
+
+<H2><A names="tips">Tips</A></H2>
+<OL>
+  <LI>You might consider using log4j as your logging utility since that's what
+  JMeter uses. It's helpful for figuring out what's going on. Not all JMeter
+  classes have been fully outfitted with logging statements. If things get
+  nasty, you might have to add your own to JMeter and recompile it to see what
+  is happening.
+  <P>If you do decide to use log4j and you set the priority (or level, as it
+  will soon be called) to debug, you will probably see way more than you need to
+  know. You can filter the JMeter stuff by making the following modifications to
+  <TT>log4j.conf</TT> in the JMeter's <TT>bin</TT> directory. The <B>bold</B>
+  text is added/modified <PRE>	# Set the appenders for the categories
+	log4j.rootCategory=<B>info</B>,Root_Appender
+	<B>log4j.category.com.myfirm.jmeter=debug,</B>
+	log4j.category.org.apache.jmeter.control=debug
+	log4j.category.org.apache.jmeter.gui.tree.NonGuiTree=INFO,File_Appender
+	</PRE>Note that the root (default) debugging has been set to <B>info</B>.
+  This eliminates most log4j output from JMeter. The new line specifies the name
+  of the package containing JMeter extensions. (<TT>com.yourfirm.jmeter</TT>) in
+  this example. Note that it is not necessary to specify a particular class
+  name. Also, note that <B>no</B> appenders are specified - just the trailing
+  comma. If you specify Root_Appender here you'll see your message appear twice
+  (because you specified the same appender twice). All you really want to do is
+  override the priority.</P></LI>
+  <LI>Implement <TT>clone</TT> carefully. This is an often overlooked method for
+  a lot of folks. JMeter makes heavy use of cloning. Check out some of the
+  JMeter coniguration elements and controllers to see how they do it. Notice
+  that in most cases, a special method is usually invoked to perform base class
+  cloning activities. For configuration elements, this is
+  <TT>configureClone</TT>. For controllers, it is <TT>standardCloneProc</TT>.
+  </LI></OL>
+<HR/>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/extending/index.xml b/jakarta-jmeter/xdocs/extending/index.xml
new file mode 100644
index 0000000..fca6e43
--- /dev/null
+++ b/jakarta-jmeter/xdocs/extending/index.xml
@@ -0,0 +1,848 @@
+<?xml version="1.0"?>
+
+<document>
+
+  <properties>
+
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+
+	 <title>Extending JMeter</title>
+
+  </properties>
+
+<body>
+
+<section name="Extending JMeter">
+
+
+
+<h2>Extending JMeter</h2>:
+
+<p>There are several ways to extend JMeter and add functionality.  JMeter is designed
+
+to make this task easier.
+
+</p>
+
+<ul>
+	<li><a href="JMeter Extension Scenario.html">A good overview of the process of extending JMeter</a></li>
+<p/>
+	<li><a href="#timer">Creating your own Timer</a></li>
+
+	<li><a href="#listener">Creating your own SampleListener (such as a visualizer, or reporter)</a></li>
+
+	<li><a href="#config">Creating your own Config Element</a></li>
+
+	<li><a href="#logical">Creating your own logic SamplerController</a></li>
+
+	<li><a href="#testsample">Creating your own test sample SamplerController</a></li>
+
+	<li><a href="#sampler">Creating your own Sampler</a></li>
+
+	<li><a href="#uicomponent">Making your custom elements play nice as a JMeter UI component</a></li>
+
+	<li><a href="#saveable">Making your custom elements saveable and loadable from within JMeter</a></li>
+
+</ul>
+
+<hr/>
+
+<a name="timer"/>
+
+<h3>Creating your own Timer</h3>
+
+<p>The timer interface:</p>
+
+<pre>
+
+	  public long delay();
+
+</pre>
+
+<p>Not too complicated.  Your delay method must, each time it is called, return a
+
+long representing the number of milliseconds to delay.  The constant timer returns the
+
+same number every time it's called.  A random timer returns a different number each time.
+
+</p>
+
+<hr/>
+
+<a name="listener"/>
+
+<h3>Creating your own SampleListener</h3>
+
+<p>The SampleListener interface:</p>
+
+<pre>
+
+	  public void sampleOccurred(SampleEvent e);
+
+	  public void sampleStarted(SampleEvent e);
+
+	  public void sampleStopped(SampleEvent e);
+
+</pre>
+
+<p>sampleOccurred is the method called when a sample is completed, and the data has been
+
+collected.  The SampleEvent object should contain all the information gathered
+
+from the sample.  If your sample listener is primarily concerned with collecting the
+
+data from a test run, you can implement this method - the other two are for other purposes and
+
+can be ignored (though the methods have to be there for your class to compile).
+
+</p>
+
+<p>sampleStarted and sampleStopped are used to indicate the state of the sampling thread.
+
+This is useful for visualizers that show the user the state of all running threads
+
+(ie, they are running and waiting for response, or they're stopped and waiting
+
+to begin again).
+
+</p>
+
+<hr/>
+
+<a name="config"/>
+
+<h3>Creating your own Config Element</h3>
+
+<p>The ConfigElement interface:</p>
+
+<pre>
+
+	  public void addConfigElement(ConfigElement config);
+
+	  public boolean expectsModification();
+
+	  public Object clone();
+
+</pre>
+
+<p>The ConfigElement interface is sparse.  All ConfigElements are expected to implement
+
+a public <b>clone()</b> method.  The reason for this is that config elements will be cloned
+
+for each different sampling thread, and most will be cloned for each sample.  </p>
+
+<p>If your config element expects to be modified in the process of a test run,
+
+and you want those modifications to carry over from sample to sample (as in
+
+a cookie manager - you want to save all cookies that gets set throughout
+
+the test), then return true for the <b>expectsModification()</b> method. Your config element will not be
+
+cloned for each sample. If your config elements are more static in nature,
+
+return false. If in doubt, return false.</p>
+
+<p><b>addConfigElement()</b> is required so that config elements can be layered.  For
+
+instance, let's say a user creates a URL entry that contains default values -
+
+they might use this to specify a server.  Then, all their test samples configure
+
+individual test cases, but leave out the server field.  This information is combined
+
+via the <b>addConfigElement()</b> method.  Your custom config elements should do the right
+
+thing when this method is called.  Normally, this involves ignoring such calls unless
+
+the passed in ConfigElement is of the same type as yours, and then only merging in
+
+values that are not already set in the object receiving the call (ie you probably
+
+don't want to overwrite any values).
+
+</p>
+
+<p>You may have noticed there's no specification on how to get the config information
+
+<b>out</b> of a ConfigElement.  This raises the question, who is going to use it?
+
+At the end of the line, there will be a Sampler that will need the information held
+
+in your config element.  The sampler that uses your config element needs to know more
+
+about the class than the rest of JMeter - that information is not part of this interface.
+
+</p>
+
+<p>If at all possible, extend <b>AbstractConfigElement</b> when creating your own.  By doing so,
+
+and by following some simple rules, you will get cloning and saving to XML of your
+
+config element for free (as in, you don't have to do anything!).  <b>AbstractConfigElement</b>
+
+stores all it's values in a Map, and provides getProperty and putProperty methods.  Your
+
+config element can provide <b>getXXX()</b> and <b>setXXX()</b> methods, but these should delegate
+
+to <b>getProperty()</b> and <b>setProperty()</b>, probably using static Strings as keys in the Map.
+
+<br/>You can store any type of object, provided the objects are clonable and Saveable
+
+(Strings, Integer, Long, Double, Float are all good in this regard).
+
+</p>
+
+<p>One caveat - if your config element has been restored from file, all the values
+
+held in the Map will be String objects (except for elements that implement Saveable
+
+on their own), and you may have to do casting and parsing.  Example: an Integer will
+
+have to be converted from a String to an int, so your getXXX() method should check
+
+for this possibility to avoid exceptions.
+
+</p>
+
+<hr/>
+
+<a name="logical"/>
+
+<h3>Creating your own logic SamplerController</h3>
+
+<p>The SamplerController interface looks as follows:</p>
+
+<pre>
+
+	  Entry nextEntry();
+
+	  Collection getListeners();
+
+	  void addSamplerController(SamplerController controller);
+
+	  void addConfigElement(ConfigElement config);
+
+	  Object clone();
+
+</pre>
+
+<p>Again, <b>clone()</b> is a method that must be implemented to all SamplerControllers to avoid
+
+contamination between sampling threads.</p>
+
+<p>The <b>nextEntry()</b> method is the essential job of a SamplerController - to deliver
+
+Entry objects to be sampled.  An Entry object encapsulates all the information needed
+
+by a Sampler to do its job.  The <b>nextEntry()</b> method should work like an iterator and
+
+continuously return new Entry objects.
+
+</p>
+
+<p>There are two boundary conditions that need to be handled.  If the Controller has no
+
+more Entries to give, for the rest of the test, it should return <b>null</b>.  Therefore,
+
+if your Controller has sub-controllers it is receiving Entries from, it should remove
+
+them from its list of controllers to get Entries from.  The other condition is when
+
+your controller reaches the end of its list of Entries, and it needs to start over
+
+from the beginning.  The parent Controller needs to know this so that it can move
+
+on to its next controller in its list.  Therefore, at the end of each iteration,
+
+your SamplerController needs to return a CycleEntry object instead of a normal Entry.
+
+Conversely, this means that if your Controller receives a CycleEntry object, it should
+
+move on to the next Controller in its list.</p>
+
+<p>A logic controller does not generate Entries on its own, but simply regulates
+
+the flow of Entries from its sub-controllers.  A logic controller might provide
+
+looping logic, or it might modify the Entries that pass through it, or whatever.
+
+GenericController provides an implementation that does absolutely nothing but
+
+pass Entries on from its sub-controllers.  This class is useful both for reference
+
+purposes and to extend, since it provides a lot of methods you're likely to find
+
+useful
+
+</p>
+
+<p><b>getListeners()</b> is an odd member of this Class.  It's there to serve those who
+
+want their controller to receive sample data.  This would be useful for a controller
+
+that modified Entry objects based on previous sample results (like an HTML spider
+
+that dynamically reacted to previously sampled webpages for links and forms).  The
+
+responsibility of the controller implementer is to collect all potential listeners
+
+from the sub-controller list, and add themselves if desired.  Most SamplerControllers
+
+that extend GenericController don't have to do anything.</p>
+
+<p><b>addSamplerController(SamplerController controller)</b> is the method used to
+
+add sub controllers to your SamplerController. </p>
+
+<p><b>addConfigElement(ConfigElement config)</b> Your SamplerController should also
+
+be capable of holding configuration elements and adding them to Entries as they
+
+pass through your controller.  Again, see GenericController for reference.  Essentially,
+
+all Entry objects that get returned by <b>nextEntry()</b> are handed all the ConfigElements
+
+of the controller.
+
+</p>
+
+<hr/>
+
+<a name="testsample"/>
+
+<h3>Creating your own test sample SamplerController</h3>
+
+<p>A SamplerController that generates Entry objects is just like a logic controller
+
+except that it creates its own Entry objects instead of gathering them from
+
+sub-controllers (although, to be fully correct, your test sample SamplerController
+
+should handle both possibilities).  Your test sample SamplerController can also
+
+benefit from extending GenericController.  By doing so, most of your cloning and
+
+saving needs are handled (but probably not entirely).  See HttpTestSample as
+
+reference.</p>
+
+<hr/>
+
+<a name="sampler"/>
+
+<h3>Creating your own Sampler</h3>
+
+<p>The Sampler interface:</p>
+
+<pre>
+
+	  public SampleResult sample(Entry e)
+
+</pre>
+
+<p>Your Sampler has two responsibilities.  Of lesser importance, it should do whatever
+
+it is you want to do, given an Entry object that hopefully contains information
+
+about what is to be sampled.  Of greater importance, your sampler should return
+
+a <b>SampleResult</b> object that holds information about the sampling.  Information such
+
+as how long the sample took, the text response from the sample (if appropriate), and
+
+a string that describes the location of what was sampled.  The SampleResult interface
+
+is essentially a Map with public static Strings as keys. </p>
+
+<hr/>
+
+<a name="uicomponent"/>
+
+<h3>Making your custom elements play nice as a JMeter UI component</h3>
+
+<p>In order to take part in the JMeter UI, your component needs to implement the
+
+JMeterComponentModel interface:</p>
+
+<pre>
+
+	  Class getGuiClass();
+
+	  public String getName();
+
+	  public void setName(String name);
+
+	  public Collection getAddList();
+
+	  public String getClassLabel();
+
+	  public void uncompile();
+
+</pre>
+
+<p>Most of this stuff is easy, boring, and tedious.  <b>getName()</b>, <b>setName()</b> is a simple
+
+String property that is the name of the object.  <b>getClassLabel()</b> should return
+
+a String that describes the class.  This string will be displayed to the user and
+
+so should be short but meaningful.  <b>getGuiClass()</b> should return a Class object for
+
+the class that will be used as a GUI component.  This class should be a subclass
+
+of java.awt.Container, and preferably a subclass of <b>javax.swing.JComponent</b>.</p>
+
+<p><b>getAddList()</b> should return a list of either Strings or JMenus.  These Strings
+
+represent the Classes that can be added to your SamplerController.  Each String
+
+should correspond to the target class's <b>getClassLabel()</b> String.  <b>MenuFactory</b> is
+
+a class that will return some preset menu lists (such as all available SamplerControllers,
+
+all available ConfigElements, etc).</p>
+
+<p><b>uncompile()</b> is a cleanup method used between sampling runs.  When the user
+
+hits "Start", JMeter "compiles" the objects in the tree.  Child nodes are added
+
+to their parent objects recursively until there is one TestPlan object, which is
+
+then submitted for testing.  Afterward, these elements have to un-added from their
+
+parent objects, or uncompiled.  To uncompile your class, simply clear all your
+
+data structures that are holding sub-elements.  For your SamplerController, this
+
+will be the list of sub-controllers and the list of ConfigElements.</p>
+
+<p>That's it, except for your GUI class.  If your SamplerController has no
+
+configuration needs, just return org.apache.jmeter.gui.NamePanel, and the user will
+
+at least be able to change the name of your component.  Otherwise, create a gui class
+
+that implements the <b>ModelSupported</b> interface:</p>
+
+<pre>
+
+	  void setModel(Object model);
+
+	  public void updateGui();
+
+</pre>
+
+<p><b>setModel()</b> is used to hand your JMeterModelComponent class to the GUI class when
+
+it is instantiated.  It is your responsibility for providing the means by which
+
+the Gui class updates the values in the model class.  For updating in the other
+
+direction, there is <b>updateGui()</b>, which the model class can call if necessary.
+
+Note, normally, this call is made for you automatically whenever the Gui is brought
+
+to the screen.  If you are creating a Visualizer, then you may need to use <b>updateGui()</b>.
+
+For reference, refer to UrlConfigGui (in org.apache.jmeter.protocol.http.config.gui).</p>
+
+<p>If you have done all this correctly, there's just one more step.  If you compile
+
+your classes into the ApacheJMeter.jar file, then you're done.  Your classes will
+
+be automatically found and used.  Otherwise, you will need to modify jmeter.properties.
+
+The <i>search_paths</i> property should be modified to include the path where your
+
+classes are.  This does not obviate the need for your classes to be in the JVM's
+
+CLASSPATH - it is an additional requirement.  Otherwise, your classes will not be
+
+detected, and the Gui will not make them available to the user.</p>
+
+<hr/>
+
+<a name="saveable"/>
+
+<h3>Making your custom elements saveable and loadable from within JMeter</h3>
+
+<p>The Saveable interface has just one method:</p>
+
+<pre>
+
+	  public Class getTagHandlerClass()
+
+</pre>
+
+<p>This method simply returns the Class object that represents the Class that handles
+
+the saving and loading of your component.</p>
+
+<p>To write this SaveHandler, make a class that extends <b>TagHandler</b>
+
+(from org.apache.jmeter.save.xml).  Note, if your component extends AbstractConfigElement,
+
+it is already fully Saveable - provided you only have information stored in
+
+the Map from AbstractConfigElement.</p>
+
+<p>To write your own TagHandler, you will have to implement the following methods:</p>
+
+<pre>
+
+	  public abstract void setAtts(Attributes atts) throws Exception
+
+	  public String getPrimaryTagName()
+
+	  public void save(Saveable objectToSave,Writer out) throws IOException
+
+</pre>
+
+<p><b>getPrimaryTagName()</b> should return the String that is the XML tagname that your
+
+class handles.  When you save your object, it should all be contained within an
+
+XML tag of the same name.  This will ensure that when JMeter's parser hits that tag,
+
+your class will be called upon to handle the data.</p>
+
+<p><b>setAtts(Attributes atts)</b> is called when the parser first hits your tag.
+
+If this primary tag has any attributes, this method represents your chance to save
+
+the information.</p>
+
+<p><b>save(Saveable objectToSave,Writer out)</b> - when the user selects "Save",
+
+JMeter will call this method and hand the Saveable object to be saved (it will be
+
+the object that specified your TagHandler as the class responsible for it's saving).
+
+This method should use the given Writer object to print all the XML necessary to
+
+save the current state of the objectToSave.</p>
+
+<p>There's more you have to do to handle creating a new Object when JMeter parses
+
+an XML file.  However, there's no standard interface you need to implement, but rather,
+
+JMeter uses reflection to generate method calls into your class.  When JMeter hits
+
+a tag that corresponds to your PrimaryTagName, an instance of your TagHandler will
+
+be created, and it's <b>setAtts()</b> method will get called.  Thereafter, methods are called
+
+depending on subsequent tags and character data.  For every tag, JMeter calls
+
+<b>&lt;tag-name&gt;TagStart(Attributes atts)</b>, and for every end tag, JMeter calls
+
+<b>&lt;tag-name&gt;TagEnd()</b>.</p>
+
+<p>Additionally, JMeter will call a method that corresponds to all tags that are
+
+current.  So, for instance, if JMeter runs into a tag name "foo", then
+
+<b>foo(Attributes atts)</b> will be called.  If JMeter then parses character data,
+
+then <b>foo(String data)</b> will be called.  If JMeter parses a tag within foo, called
+
+"nestedFoo", then JMeter will call <b>foo_nestedFoo(Attributes atts)</b> and
+
+<b>foo_nestedFoo(String data)</b>.  And so on.
+
+</p>
+
+<p>An annotated example:</p>
+
+<pre>
+
+public class AbstractConfigElementHandler extends TagHandler
+
+{
+
+	private AbstractConfigElement config;
+
+	private String currentProperty;
+
+
+
+	public AbstractConfigElementHandler()
+
+	{
+
+	}
+
+
+
+	<font color="blue">/**
+
+	 * Returns the AbstractConfigElement object parsed from the XML.  This method
+
+	 * is required to fulfill the SaveHandler interface.  It is used by the XML
+
+	 * routines to gather all the saved objects.
+
+	 */</font>
+
+	public Object getModel()
+
+	{
+
+		return config;
+
+	}
+
+
+
+	<font color="blue">/**
+
+	 * This is called when a tag is first encountered for this handler class to handle.
+
+	 * The attributes of the tag are passed, and the SaveHandler object is expected
+
+	 * to instantiate a new object.
+
+	 */</font>
+
+	public void setAtts(Attributes atts) throws Exception
+
+	{
+
+		String className = atts.getValue("type");
+
+		config = (AbstractConfigElement)Class.forName(className).newInstance();
+
+	}
+
+
+
+	<font color="blue">/**
+
+	 * Called by reflection when a &lt;property&gt; tag is encountered.  Again, the
+
+	 * attributes are passed.
+
+	 */</font>
+
+	public void property(Attributes atts)
+
+	{
+
+		currentProperty = atts.getValue("name");
+
+	}
+
+
+
+	<font color="blue">/**
+
+	 * Called by reflection when text between the begin and end &lt;property&gt;
+
+	 * tag is encountered.
+
+	 */</font>
+
+	public void property(String data)
+
+	{
+
+
+
+		if(data != null &amp;&amp; data.trim().length() &gt; 0)
+
+		{
+
+			config.putProperty(currentProperty,data);
+
+			currentProperty = null;
+
+		}
+
+	}
+
+
+
+	<font color="blue">/**
+
+	 * Called by reflection when the &lt;property&gt; tag is ended.
+
+	 */</font>
+
+	public void propertyTagEnd()
+
+	{
+
+		<font color="blue">// Here's a tricky bit.  See below for explanation.</font>
+
+		List children = xmlParent.takeChildObjects(this);
+
+		if(children.size() == 1)
+
+		{
+
+			config.putProperty(currentProperty,((TagHandler)children.get(0)).getModel());
+
+		}
+
+	}
+
+
+
+
+
+	  <font color="blue">/**
+
+	* Gets the tag name that will trigger the use of this object's TagHandler.
+
+	*/</font>
+
+	public String getPrimaryTagName()
+
+	{
+
+		return "ConfigElement";
+
+	}
+
+
+
+  <font color="blue">/**
+
+	* Tells the object to save itself to the given output stream.
+
+	*/</font>
+
+	public void save(Saveable obj,Writer out) throws IOException
+
+	{
+
+		AbstractConfigElement saved = (AbstractConfigElement)obj;
+
+		out.write("&lt;ConfigElement type=\"");
+
+		out.write(saved.getClass().getName());
+
+		out.write("\">\n");
+
+		Iterator iter = saved.getPropertyNames().iterator();
+
+		while (iter.hasNext())
+
+		{
+
+			String key = (String)iter.next();
+
+			Object value = saved.getProperty(key);
+
+			writeProperty(out,key,value);
+
+		}
+
+		out.write(&lt;/ConfigElement&gt;");
+
+	}
+
+
+
+	<font color="blue">/**
+
+	 * Routine to write each property to xml.
+
+	 */</font>
+
+	private void writeProperty(Writer out,String key,Object value) throws IOException
+
+	{
+
+		out.write("&lt;property name=\"");
+
+		out.write(key);
+
+		out.write("\">\n");
+
+		JMeterHandler.writeObject(value,out);
+
+		out.write("\n&lt;/property&gt;\n");
+
+	}
+
+</pre>
+
+<p>
+
+In the <b>propertyTagEnd()</b> method, <b>takeChildObjects()</b> is called on the xmlParent
+
+instance variable.  xmlParent is inherited from TagHandler - the DocumentHandler
+
+object that is running the show.  xmlParent takes an XML file that represents a portion of
+
+the test configuration tree, and recreates a tree-like data structure.  When it is
+
+done, it will convert its tree-like data structure into the test configuration tree
+
+structure.
+
+</p>
+
+<p>However, sometimes, a tree element has sub objects that you do not want represented
+
+in the tree - rather, they are part of your object.  But, they may
+
+be complicated enough to warrant their own SaveHandler class, and thus, the xmlParent
+
+picks them up as part of its tree.  When the tag is done, and you know that there are
+
+child objects you want to grab, you can call the <b>takeChildObjects()</b> method and get a
+
+List object containing them all.  This will remove them from the tree, and you can add
+
+them to your object that you're creating.
+
+</p>
+
+<p>
+
+UrlConfig is good example.  It extends AbstractConfigElement, so it uses exactly the
+
+code above to save and reload itself from XML.  However, one of the pieces of data
+
+that UrlConfig stores is an Arguments object.  Arguments is too complicated to save
+
+to file as a simple string, so it has its own Handler object (ArgumentsHandler).  In
+
+the above code, when the call to <b>JMeterHandler.writeObject(value,out)</b> is made, the
+
+writeObject method detects whether the object implements Saveable, and if so, calls
+
+the object's SaveHandler class to deal with it.  This means, however, that when
+
+reading that XML file, the Argument object will show up as a separate entity in
+
+the data tree, whereas it originally was just part of the data of the UrlConfig
+
+object.  In order to preserve that relationship, it's necessary for the
+
+AbstractConfigElementHandler to check after each property tag is done for child
+
+objects in the tree, and take them for its own use.
+
+</p>
+
+<p>
+
+Study the other SaveHandler objects and the TagHandler class to learn more
+
+about how saving is accomplished.  Once you understand the design, writing your
+
+own SaveHandler is very easy.
+
+</p>
+
+
+
+</section>
+
+</body>
+
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/how_to_use_jmeter.xml b/jakarta-jmeter/xdocs/how_to_use_jmeter.xml
new file mode 100644
index 0000000..3eda16b
--- /dev/null
+++ b/jakarta-jmeter/xdocs/how_to_use_jmeter.xml
@@ -0,0 +1,122 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+    <author email="bburns@apache.org">Brendan Burns, et al.</author>
+    <title>Using JMeter</title>
+  </properties>
+<body>
+<section name="Using JMeter">
+
+<h2>Using JMeter effectively consists of the following activities</h2>:
+<UL>
+	<li><a HREF="#Choosing_a_SamplerController">Choosing a SamplerController</a></li>
+	<li><a HREF="#Creating_Test_Samples">Creating Test Samples</a></li>
+	<li><a HREF="#Choosing_a_delay">Choosing a delay</a></li>
+	<li><a HREF="#Managing_Thread_Groups">Managing Thread Groups</a></li>
+	<li><a HREF="#Choosing_a_Visualizer">Choosing a Visualizer</a></li>
+	<li><a HREF="#Running_the_test script">Running the test script</a></li>
+</UL>
+
+
+<p>
+<a NAME="Choosing_a_SamplerController"></a>
+<H2>Choosing A SamplerController</H2>
+JMeter has two tabs - <b>setup</b> and <b>run</b>.  
+	Within <b>setup</b>, the default SamplerController is initially displayed.  You will find a drop down 
+		select box that allows you to select any SamplerController you wish to use.  When you make this 
+		selection, the appropriate GUI will be displayed.
+</p>
+
+<p>The SamplerController determines the basic kind of sampling you will do.  Choose the &quot;Advanced HTTP tester&quot; for advanced web page sampling, and the &quot;Simple HTTP Tester&quot; for testing single web pages quickly, and choose the &quot;JDBC Base Sampler&quot; to sample your database.
+</p>
+<p>The available SamplerControllers are (Click links for more detailed information):
+<UL>
+	<li><a HREF="simplehttpcontroller.html">Simple HTTP Tester</a></li>
+	<li><a HREF="httpsamplercontroller.html">Advanced HTTP tester</a></li>
+	<li><a href="jdbcsamplercontroller.html">JDBC Base Sampler</a></li>
+</UL>
+</p>
+
+<p>
+<a NAME="Creating_Test_Samples"></a>
+<H2>Creating Test Samples</H2>
+
+A test sample represents an entry to be sampled.  It holds all the information needed about conducting a sample.  For instance,
+an <b>HTTPTestSample</b> might hold information about the <b>URL</b> to be hit, whether <b>POST</b> or <b>GET</b> is to be used, and what argument
+name-value pairs should be passed on.  The Test Sample will present a GUI for the user to enter this information.
+</p>
+<p>
+Creating test samples is dictated by the workings of the SamplerController you chose.  In general, the SamplerController
+will display a list of test samples you've created, and you will be able to create more, and there may be different kinds
+of test samples you can create.  See the link for the SamplerController you are using to find out what test samples are
+available to you and how to use them.
+</p>
+
+<a NAME="Choosing_a_delay"></a>
+<H2>Choosing a delay</H2>
+<p>
+Delay represents the number of milliseconds JMeter pauses between samples in each sampling thread.  There are a number of
+delay modules you can choose from on the <EM>setup</EM> panel, and they should be mostly self-explanatory.
+You may choose a timer for each thread group (actually, you must, or each thread group
+will use the default timer).
+
+</p>
+<p>
+<a NAME="Managing_Thread_Groups"></a>
+<H2>Managing Thread Groups</H2>
+Thread groups are managed in the <EM>run</EM> panel.
+</p>
+<p>
+By default, there is only one thread group to start.  It is called "Group 1".  You may simply use this one group, or you
+can add more groups by typing in the name of the group you wish to add above the list and hitting <code>Enter</code>.  For
+each thread group, you can choose a number of threads from 1 to 20 (this can be changed in jmeter.properties).  There is no limit on the number of thread groups you
+can have, except for the limitations of your machine, and how many threads it can handle.
+</p>
+<p>
+The thread groups you add also become available as choices within your test samples you create.  If you add a thread group (say
+"Group 2"), and then, from the <EM>setup</EM> panel, you create a new test sample, you will notice that both Group 1 and Group 2
+show up in your list of thread groups to choose from.  A particular test sample may be part of one or more thread groups.  This
+allows you to set up two parallel groups of test samples that will execute simultaneously.  The two test groups could, however, share
+a common test sample, such as a one-time login sample.
+</p>
+<p>
+Thread groups are also important to visualizers, since you may choose a different visualizer for each thread group.</p>
+<p><b>Note:</b> if you are not clear on what "threadgroup" is referring to exactly, don't worry - you aren't alone.  JMeter is no less 
+powerful a tool if you only ever use the single default threadgroup.  You may use any number of threads in your default threadgroup
+(by modifying jmeter.properties).  Each thread represents a different "user" hitting your site.  All test samples will be 
+assigned to the single default thread group automatically if you never create an additional thread group.  JMeter 1.6 will 
+hopefull deal with this issue better.
+
+</p>
+<p>
+<a NAME="Choosing_a_Visualizer"></a>
+<H2>Choosing a Visualizer</H2>
+Visualizers are managed in the <EM>run</EM> panel in the section labeled <b>Actions</b>.
+</p>
+<p>
+For each thread group, you may select a different visualizer.  Visualizers show the timing data that JMeter collects during sampling.
+As you select different thread groups, the visualizer display switches to the visualizer you selected for that thread group.  In
+this way, you can keep an eye on all your visualizers while JMeter runs.
+<ul>
+	<li><a href="visualizers.html#file">File Visualizer</a></li>
+	<li><a href="visualizers.html#graph">Graphing Visualizer</a></li>
+	<li><a href="visualizers.html#windowed">Windowed Plotting Visualizer</a></li>
+	<li><a href="visualizers.html#email">E-Mail Notification Visualizer</a></li>
+	<li><a href="visualizers.html#scrolling">Scrolling Bars Visualizer</a></li>
+	<li><a href="visualizers.html#spline">Spline Curve Visualizer</a></li>
+	<li><a href="visualizers.html#text">Text Results Visualizer</a></li>
+</ul>
+
+</p>
+<p>
+<img src="images/jmeter_running.jpg" align="right" />
+<a NAME="Running_the_test script"></a>
+<H2>Running the test script</H2>
+
+Once you have chosen your sampler controller, created all your test samples, selected a delay, added any thread groups, and
+selected your visualizers, you simply choose "start" from the "Run" menu, or hit
+<code>ctrl-s</code>.  To stop, choose "Stop" from the "Run" menu, or hit <code>ctrl-.</code>.  Switch to the <EM>run</EM> panel to watch it run.
+</p>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/index.xml b/jakarta-jmeter/xdocs/index.xml
new file mode 100644
index 0000000..48d25ec
--- /dev/null
+++ b/jakarta-jmeter/xdocs/index.xml
@@ -0,0 +1,50 @@
+<?xml version="1.0"?>
+
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Brendan Burns, et al.</author>
+	 <title>Apache JMeter</title>
+  </properties>
+  <body>
+	<section name="Apache JMeter">
+	<p>
+	  <b>Apache JMeter</b> is a 100% pure Java desktop application designed
+	  to load test functional behavior and measure performance.  It was
+	  originally designed for testing Web Applications but has
+	  since expanded to other test functions.
+	</p>
+	<h2>What can I do with it?</h2>
+	<p>
+	  Apache JMeter may be used to test performance both on static and dynamic
+	  resources (files, Servlets, Perl scripts, Java Objects, Data Bases and
+	  Queries, FTP Servers and more). It can be used to simulate a heavy
+load on a server, network or object to test its strength or to analyze
+overall performance under different load types. You can use it to make a
+graphical analysis of performance or to test your server/script/object
+behavior under heavy concurrent load.
+</p>
+<p><a HREF="usermanual/index.html">Using JMeter</a></p>
+<h2>What does it do?</h2>
+<p>Apache JMeter features include:</p>
+<ul>
+	<li>Can load and performance test HTTP and FTP servers as well as
+		arbitrary database queries (via JDBC)</li>
+	<li>Complete portability and <b>100% Java purity</b>.</li>
+	<li>Full <b>Swing</b> and lightweight component support (precompiled JAR uses packages
+		<code>javax.swing.*</code>).</li>
+	<li>Full <b>multithreading</b> framework allows concurrent sampling by many threads and
+		simultaneous sampling of different functions by seperate thread groups.</li>
+	<li>Careful <b>GUI</b> design allows faster operation and more precise timings.</li>
+	<li>Caching and offline analysis/replaying of test results.</li>
+	<li> Highly Extensible:
+	  <ul>
+		<li>Pluggable Samplers allow unlimited testing capabilities.</li>
+		<li>Several load statistics may be choosen with <b>pluggable timers</b>.</li>
+		<li>Data analysis and <b>visualization plugins</b> allow great extendibility
+		as well as personalization.</li>
+	  </ul>
+	</li>
+</ul>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/installing.xml b/jakarta-jmeter/xdocs/installing.xml
new file mode 100644
index 0000000..e8c6b32
--- /dev/null
+++ b/jakarta-jmeter/xdocs/installing.xml
@@ -0,0 +1,56 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Brendan Burns, et al.</author>
+	 <title>Installing JMeter</title>
+  </properties>
+<body>
+<section name="requirements">
+<a NAME="Requirements"></a>
+  <ul>
+	 <li><b>Java Environment</b><br/>
+		A fully compliant Java 1.2 environment is required for Apache JMeter to execute. Since
+		Apache JMeter uses only standard Java APIs (java.*), please, do not file in a bug report
+		if your JRE fails to execute Apache JMeter because a class implementation is missing, or
+		not fully compliant.</li>
+	 <li><b>Java JFC</b> (Swing components)<br/>
+		Swing GUI extentions are required for Apache JMeter. Due to incompatibility in the package
+		names, the precompiled version works only with Swing placed under the package <b>javax.swing</b>
+		which is its final destination found in the Java 2(tm) platform. </li>
+	 <li><b>Java Compiler</b> [optional]<br/>
+		A Java compiler is not needed since the distribution includes a precompiled java binary
+		archive. Note that a compiler is required if you plan to recompile the source code or if
+		you plan to build your own plugins.</li>
+	<li><b>SAX 1.0 XML Parser</b> [optional]<br/>
+	The SAX 1.0 libraries and a  SAX compliant parser are necassary for
+	restoring of saved HTTPSamples and to compile Apache JMeter.  JMeter ships with Apache's
+	<a href="http://xml.apache.org">Xerces</a> parser.</li>
+	<li>
+	  <a href="http://www.javasoft.com/products/javamail">
+	  <b>Java Mail<sup><font size="-2">tm</font></sup></b></a> &amp;
+	  <a href="http://www.javasoft.com/beans/glasgow/jaf.html">
+		<b>javax.activation</b>
+	  </a>
+	  [optional]<br/>
+	The javax.mail &amp; javax.activation packages are required to receive mail notifications from JMeter. </li>
+	<li><b>JSSE</b> [optional]<BR/>
+		JSSE is used to provide an SSL implementation to enable testing of https protocol.</li>
+  </ul>
+</section>
+<section name="Installing Apache JMeter">
+
+  <p>If your system meets the above requirements, thanks to the beauty of Java you don't
+  have to do anything else: under the directory <tt>/bin </tt>you will find the binary
+  application and the system wrappers you need to run Apache JMeter. You may want to go the <a HREF="running.html">running instructions</a> to continue. </p>
+  <p>If the precompiled binary doesn't match your system (Swing package incompatibility) or
+  you simply want to recompile the source code, you may use Apache's Ant. </p>
+	 <p>To build with ant:
+	 <ul>
+		<li>move to the base of the jmeter distribution</li>
+		<li><b>Linux/Unix</b>: run &quot;build.sh install&quot;</li>
+		<li><b>Windows</b>: run &quot;build install&quot;</li>
+	 </ul>
+  </p>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/license.xml b/jakarta-jmeter/xdocs/license.xml
new file mode 100644
index 0000000..c684beb
--- /dev/null
+++ b/jakarta-jmeter/xdocs/license.xml
@@ -0,0 +1,35 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, Brendan Burns, et al.</author>
+	 <title>License</title>
+  </properties>
+<body>
+<section name="Apache License">
+
+<pre>
+
+The Apache Software License, Version 1.1
+
+ Copyright (c) 2001 The Apache Software Foundation.  All rights reserved.
+
+ Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
+
+ 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
+
+ 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
+
+ 3. The end-user documentation included with the redistribution, if any, must include the following acknowledgment: "This product includes software developed by the Apache Software Foundation (http://www.apache.org/)." Alternately, this acknowledgment may appear in the software itself, if and wherever such third-party acknowledgments normally appear.
+
+ 4. The names "Apache" and "Apache Software Foundation" and "Apache JMeter" must not be used to endorse or promote products derived from this software without prior written permission. For written permission, please contact apache@apache.org.
+
+ 5. Products derived from this software may not be called "Apache", "Apache JMeter", nor may "Apache" appear in their name, without prior written permission of the Apache Software Foundation.
+
+ THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+ =================================================================
+
+ This software consists of voluntary contributions made by many individuals on behalf of the Apache Software Foundation.  For more information on the Apache Software Foundation, please see &lt;http://www.apache.org/&gt;.</pre>
+
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/running.xml b/jakarta-jmeter/xdocs/running.xml
new file mode 100644
index 0000000..981b9f7
--- /dev/null
+++ b/jakarta-jmeter/xdocs/running.xml
@@ -0,0 +1,57 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Brendan Burns, et al.</author>
+	 <title>Running Apache JMeter</title>
+  </properties>
+<body>
+<section name="Running Apache JMeter">
+
+  <p>Apache JMeter comes with startup scripts to help you run the application. They are
+  located in the directory /bin and are called jmeter for UNIX systems and jmeter.bat for
+  Windows systems. Make sure the file <code>ApacheJMeter.jar</code> and <code>jmeter.properties</code> is located in the same
+  directory and type <tt>jmeter</tt> to start.</p>
+
+  <p>These scripts assume you already have a JRE installed, and that the command &quot;java&quot; is in your path.</p>
+
+  <p>In addition to the standard Java libraries that come with the JRE, you may need to download two other API's:</p>
+  <ul>
+	<li><STRONG>Mail</STRONG>: <a HREF="http://java.sun.com/products/javamail/index.html">Java Mail<sup><font
+size="-2">tm</font></sup></a> API as well as the <a
+href="http://www.javasoft.com/beans/glasgow/jaf">javax.activation</a> API 	from <a
+HREF="http://java.sun.com">Sun</a>.<br/> 	To enable the MailVisualizer, add mail.jar and activation.jar from Sun's
+JavaMail download to your classpath or $JAVA_HOME/jre/lib/ext directory, or you can drop the jar files into the /lib directory where JMeter is installed.</li>
+<li><p><strong>JSSE</strong>: <a
+href="http://java.sun.com/products/jsse/">JSSE</a> is available from <a HREF="http://java.sun.com">sun</a>.<br/> 	JSSE
+is an SSL encryption provider that is used to enable JMeter to test websites using the https protocol.</p> 	<p>To turn
+SSL support on, make sure all the jars that come with JSSE are in your classpath (jsse.jar, jnet.jar, jcert.jar), and
+modify <strong>jmeter.properties</strong> to instruct JMeter which SSL Provider you are using.  For JSSE, set the line
+as 	follows:</p> 	<p>ssl.provider=com.sun.net.ssl.internal.ssl.Provider</p></li>
+</ul>
+</section>
+<section name="Modifying Properties">
+
+  <p>If you wish to modify the properties with which JMeter runs you need to
+  either modify the jmeter.properties inside of the /bin directory or create
+  your own copy of the jmeter.properties and specify it in the command line
+  (jmeter [properties file]).
+  </p>
+  <b>Properties to modify</b>
+  <ul>
+  <li><b>search_paths:</b> If you have developed new extensions to JMeter, you can tell JMeter where to find your classes by adding the name of the
+  jar, or the directory where your classes live.</li>
+  <li><b>user.dir:</b> The directory JMeter will first go to for saving and loading test scripts.</li>
+  <li><b>remote_hosts:</b> Comma-delimited list of remote JMeter hosts.  If you are running JMeter in a distributed environment, list the machines where
+  you have JMeter remote servers running.  This will allow you to control those servers from this machine's GUI</li>
+  <li><b>not_in_menu:</b> A list of components you do not want to see in JMeter's menus.  As JMeter has more and more components added, you may wish to
+  customize your JMeter to show only those components you are interested in.  You may list their classname or their class label (the string that appears
+  in JMeter's UI) here, and they will no longer appear in the menu's.</li>
+  </ul>
+
+<p align="center"><font size="-1">Copyright (c) 1998-99 <a href="http://java.apache.org">The Java Apache
+Project</a>.<br/>
+$Id: running.xml,v 1.3 2001/08/30 17:19:03 mstover1 Exp $</font> <br/>
+<font size="-1">All rights reserved.</font></p>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/stylesheets/CVS/Entries b/jakarta-jmeter/xdocs/stylesheets/CVS/Entries
new file mode 100644
index 0000000..703faf4
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/CVS/Entries
@@ -0,0 +1,6 @@
+/printable_project.xml/1.1/Fri Aug 31 12:17:26 2001//Tv1_7_3
+/project.xml/1.10/Tue Jul 16 18:25:24 2002//Tv1_7_3
+/site.vsl/1.12/Fri Aug  9 19:08:55 2002//Tv1_7_3
+/site.xsl/1.2/Sat Feb 23 03:47:56 2002//Tv1_7_3
+/site_printable.vsl/1.2/Mon Mar 11 22:30:23 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/xdocs/stylesheets/CVS/Repository b/jakarta-jmeter/xdocs/stylesheets/CVS/Repository
new file mode 100644
index 0000000..2aee8b5
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/xdocs/stylesheets
diff --git a/jakarta-jmeter/xdocs/stylesheets/CVS/Root b/jakarta-jmeter/xdocs/stylesheets/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/xdocs/stylesheets/CVS/Tag b/jakarta-jmeter/xdocs/stylesheets/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/xdocs/stylesheets/printable_project.xml b/jakarta-jmeter/xdocs/stylesheets/printable_project.xml
new file mode 100644
index 0000000..a17bed2
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/printable_project.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<project name="Velocity"
+		  href="http://jakarta.apache.org/jmeter/">
+
+	 <title>JMeter</title>
+	 <!--
+	 <logo href="/images/logo.gif">JMeter</logo>
+	 -->
+	 <body>
+
+	 </body>
+</project>
diff --git a/jakarta-jmeter/xdocs/stylesheets/project.xml b/jakarta-jmeter/xdocs/stylesheets/project.xml
new file mode 100644
index 0000000..23adb20
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/project.xml
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<project name="Velocity"
+		  href="http://jakarta.apache.org/jmeter/">
+
+	 <title>JMeter</title>
+	 <!--
+	 <logo href="/images/logo.gif">JMeter</logo>
+	 -->
+	 <body>
+	 <menu name="About">
+		  <item name="Overview"               href="/index.html"/>
+		  <item name="Download"               href="http://jakarta.apache.org/builds/jakarta-jmeter/"/>
+		  <item name="Changes"                href="/changes.html"/>
+		  <item name="Known Bugs"             href="http://nagoya.apache.org/bugzilla/buglist.cgi?bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;email1=&amp;emailtype1=substring&amp;emailassigned_to1=1&amp;email2=&amp;emailtype2=substring&amp;emailreporter2=1&amp;bugidtype=include&amp;bug_id=&amp;changedin=&amp;votes=&amp;chfieldfrom=&amp;chfieldto=Now&amp;chfieldvalue=&amp;product=JMeter&amp;short_desc=&amp;short_desc_type=substring&amp;long_desc=&amp;long_desc_type=substring&amp;bug_file_loc=&amp;bug_file_loc_type=substring&amp;keywords=&amp;keywords_type=anywords&amp;field0-0-0=noop&amp;type0-0-0=noop&amp;value0-0-0=&amp;cmdtype=doit&amp;order=Reuse+same+sort+as+last+time"/>
+		  <item name="License"                href="/license.html"/>
+		  <item name="TODO"                   href="/todo.html"/>
+		  <item name="Contributors"			  href="/contributing.html"/>
+	 </menu>
+	 <menu name="Documentation">
+		<item name="User Manual"        href="/usermanual/index.html"/>
+		<item name="Developer Manual"       href="/extending/index.html"/>
+	 </menu>
+	 <menu name="Community">
+		  <item name="Get Involved"           href="/site/getinvolved.html"/>
+		  <item name="Mailing Lists"          href="/site/mail.html"/>
+		  <item name="CVS Repositories"       href="/site/cvsindex.html"/>
+	 </menu>
+	 </body>
+</project>
diff --git a/jakarta-jmeter/xdocs/stylesheets/site.vsl b/jakarta-jmeter/xdocs/stylesheets/site.vsl
new file mode 100644
index 0000000..cf93cd4
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/site.vsl
@@ -0,0 +1,416 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
+
+<!-- Content Stylesheet for Site -->
+
+	 ## Defined variables
+	 #set ($bodybg = "#ffffff")
+	 #set ($bodyfg = "#000000")
+	 #set ($bodylink = "#525D76")
+	 #set ($bannerbg = "#525D76")
+	 #set ($bannerfg = "#ffffff")
+	 #set ($subbannerbg = "#828DA6")
+	 #set ($subbannerfg = "#ffffff")
+	 #set ($tablethbg = "#039acc")
+	 #set ($tabletdbg = "#a0ddf0")
+	 #set ($notebackground = "#bbbb00")
+	 #set ($space = " ")
+	 #set ($space = $space.charAt(0))
+	 #set ($udsc = "_")
+	 #set ($udsc = $udsc.charAt(0))
+
+<!-- start the processing -->
+#document()
+<!-- end the processing -->
+
+## This is where the macro's live
+
+#macro ( table $table)
+<table>
+	 #foreach ( $items in $table.getChildren() )
+		  #if ($items.getName().equals("tr"))
+				#tr ($items)
+		  #end
+	 #end
+</table>
+#end
+
+#macro ( tr $tr)
+<tr>
+	 #foreach ( $items in $tr.getChildren() )
+		  #if ($items.getName().equals("td"))
+				#td ($items)
+		  #elseif ($items.getName().equals("th"))
+				#th ($items)
+		  #end
+	 #end
+</tr>
+#end
+
+#macro ( td $value)
+#if ($value.getAttributeValue("colspan"))
+#set ($colspan = $value.getAttributeValue("colspan"))
+#end
+#if ($value.getAttributeValue("rowspan"))
+#set ($rowspan = $value.getAttributeValue("rowspan"))
+#end
+<td bgcolor="$tabletdbg" colspan="$!colspan" rowspan="$!rowspan" valign="top" align="left">
+	 <font color="#000000" size="-1" face="arial,helvetica,sanserif">
+		  #if ($value.getText().length() != 0 || $value.hasChildren())
+		  $xmlout.outputString($value, true)
+		  #else
+		  &nbsp;
+		  #end
+	 </font>
+</td>
+#end
+
+#macro ( th $value)
+#if ($value.getAttributeValue("colspan"))
+#set ($colspan = $value.getAttributeValue("colspan"))
+#end
+#if ($value.getAttributeValue("rowspan"))
+#set ($rowspan = $value.getAttributeValue("rowspan"))
+#end
+<td bgcolor="$tablethbg" colspan="$!colspan" rowspan="$!rowspan" valign="top" align="left">
+	 <font color="#000000" size="-1" face="arial,helvetica,sanserif">
+		  #if ($value.getText().length() != 0 || $value.hasChildren())
+		  $xmlout.outputString($value, true)
+		  #else
+		  &nbsp;
+		  #end
+	 </font>
+</td>
+#end
+
+#macro ( projectanchor $name $value )
+#if ($value.startsWith("http://"))
+	 <a href="$value">$name</a>
+#elseif ($value.startsWith("/site"))
+	 <a href="http://jakarta.apache.org$value">$name</a>
+#else
+	 <a href="$relativePath$value">$name</a>
+#end
+#end
+
+#macro ( metaauthor $author $email )
+				<meta name="author" value="$author">
+				<meta name="email" value="$email">
+#end
+
+#macro ( image $value )
+#if ($value.getAttributeValue("width"))
+#set ($width=$value.getAttributeValue("width"))
+#end
+#if ($value.getAttributeValue("height"))
+#set ($height=$value.getAttributeValue("height"))
+#end
+#if ($value.getAttributeValue("align"))
+#set ($align=$value.getAttributeValue("align"))
+#end
+<img src="$relativePath$value.getAttributeValue("src")" width="$!width" height="$!height" align="$!align">
+#end
+
+#macro ( source $value)
+	 <div align="left">
+	 <table cellspacing="4" cellpadding="0" border="0">
+	 <tr>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+	 </tr>
+	 <tr>
+		<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#ffffff"><pre>$escape.getText($value.getText())</pre></td>
+		<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+	 </tr>
+	 <tr>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+	 </tr>
+	 </table>
+	 </div>
+#end
+
+#macro (properties $properties)
+<p>
+	<b>Parameters</b>
+	<table border="1" cellspacing="0" cellpadding="2">
+	<tr><th>Attribute</th><th>Description</th><th>Required</th></tr>
+	#foreach ($items in $properties.getChildren("property"))
+		<tr>
+			<td>$items.getAttributeValue("name")</td>
+			<td>#runloop($items)</td>
+			<td>
+					#if($items.getAttributeValue("required") != "")
+						$items.getAttributeValue("required")
+					#else
+						No
+					#end
+			</td>
+		</tr>
+	#end
+	</table>
+	</p>
+#end
+
+#macro (seeAlso $seeAlso)
+	<p><b>See Also:</b>
+	<ul>
+	#foreach ($items in $seeAlso.getChildren())
+		#if($items.getName() == "link")
+			<li><a href="$items.getAttributeValue("href")">$xmlout.outputString($items,true)</a></li>
+		#elseif($items.getName() == "complink")
+			<li>#complink($items)</li>
+		#end
+	#end
+	</ul>
+	</p>
+#end
+
+#macro (figure $figure)
+	<p><table border="0" cellspacing="0" cellpadding="0"><tr><td><img src="$figure.getAttributeValue("image")"><br/>
+	<font size="-1">#runloop($figure)</font></td></tr></table></p>
+#end
+
+#macro (example $example)
+	<a name="$example.getAttributeValue("anchor")"/>
+	<p><b>$example.getAttributeValue("title")</b></p>
+	#runloop($example)
+#end
+
+#macro (note $note)
+	<p><table border="1" bgcolor="$notebackground" width="50%" cellspacing="0" cellpadding="2">
+		<tr><td>#runloop($note)</td></tr>
+	</table></p>
+#end
+
+#macro (unknown $u_node)
+	#if($u_node.getName() == "note")
+		#note($u_node)
+	#elseif($u_node.getName() == "complink")
+		#complink($u_node)
+	#elseif($u_node.getName() == "figure")
+		#figure($u_node)
+	#elseif ($u_node.getName() == "links")
+		 #seeAlso ($u_node)
+	#elseif ($u_node.getName() == "properties")
+		 #properties ($u_node)
+	#elseif ($u_node.getName() == "example")
+		#example ($u_node)
+	#elseif ($u_node.getName().equals("source"))
+		 #source ($u_node)
+	#elseif ($u_node.getName().equals("table"))
+		 #table ($u_node)
+	#elseif ($u_node.getName().equals("component"))
+		#component($u_node)
+	#elseif ($u_node.getName().equals("subsection"))
+		 #subsection ($u_node)
+	#else
+		#outputTag($u_node)
+		#runloop($u_node)
+		#outputEndTag($u_node)
+	#end
+#end
+
+#macro (complink $complink)
+	<a href="$relativePath/usermanual/component_reference.html#$complink.getAttributeValue("name").replace($space,$udsc)">$complink.getAttributeValue("name")</a>
+#end
+
+#macro (outputTag $tag)
+	<$tag.getName()#getAtts($tag)>
+#end
+
+#macro (getAtts $tag)
+	#foreach ($att in $tag.getAttributes()) $att.getName()="$att.getValue()"#end
+#end
+
+#macro (outputEndTag $tag)
+	</$tag.getName()>
+#end
+
+#macro (runloop $itemToLoop)
+	#foreach ($rl_node in $itemToLoop.getContent())
+		#if($rl_node.getClass().getName().indexOf("Element") > -1)
+			#unknown($rl_node)
+		#else
+			$rl_node.getText()
+		#end
+	#end
+#end
+
+#macro ( component $component)
+	#set ($screenshot = "")
+	#set ($screenshot = $component.getAttributeValue("screenshot") )
+	<table border="0" cellspacing="0" cellpadding="2">
+		<tr><td>
+		  <font face="arial,helvetica,sanserif">
+			 <a name="$component.getAttributeValue("name").replace($space,$udsc)"><h3>$!component.getAttributeValue("index") $component.getAttributeValue("name")</h3></a>
+		  </font>
+		</td></tr>
+		<tr><td>
+		  #foreach ( $c_items in $component.getChildren() )
+				#if ($c_items.getName().equals("description"))
+					#runloop($c_items)
+					#if ($screenshot != "")						
+						<p><b>Control Panel</b></p>
+						<div align="center"><img src="$screenshot"></div>
+					#end
+				#else
+					 #unknown($c_items)
+				#end
+		  #end
+		</td></tr>
+		<tr><td><br/></td></tr>
+	 </table>
+	<hr>
+#end
+
+#macro ( subsection $subsection)
+	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
+		<tr><td bgcolor="$subbannerbg">
+		  <font color="$subbannerfg" face="arial,helvetica,sanserif">
+			 <a name="$subsection.getAttributeValue("anchor")"><strong>$subsection.getAttributeValue("name")</strong></a>
+		  </font>
+		</td></tr>
+		<tr><td>
+		  <blockquote>
+		  #foreach ( $su_items in $subsection.getChildren() )
+				#if ($su_items.getName().equals("img"))
+					 #image ($su_items)
+				#else
+					 #unknown($su_items)
+				#end
+		  #end
+		  </blockquote>
+		</td></tr>
+		<tr><td><br/></td></tr>
+	 </table>
+#end
+
+#macro ( section $section)
+	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
+		<tr><td bgcolor="$bannerbg">
+		  <font color="$bannerfg" face="arial,helvetica,sanserif">
+			 <a name="$!section.getAttributeValue("anchor")"><strong>$section.getAttributeValue("name")</strong></a>
+		  </font>
+		</td></tr>
+		<tr><td>
+		  <blockquote>
+		  #foreach ( $s_items in $section.getChildren() )
+				#if ($s_items.getName().equals("img"))
+					 #image ($s_items)
+				#else
+					 #unknown($s_items)
+				#end
+		  #end
+		  </blockquote>
+		  </p>
+		</td></tr>
+		<tr><td><br/></td></tr>
+	 </table>
+#end
+
+#macro ( makeProject )
+	 #set ($menus = $project.getChild("body").getChildren("menu"))
+	 #foreach ( $menu in $menus )
+		  <p><strong>$menu.getAttributeValue("name")</strong></p>
+		  <ul>
+		  #foreach ( $item in $menu.getChildren() )
+				#set ($name = $item.getAttributeValue("name"))
+				<li>#projectanchor($name $item.getAttributeValue("href"))</li>
+		  #end
+		  </ul>
+	 #end
+#end
+
+#macro (makeIndex $subsections)
+	<ul>
+	#foreach ($sect in $subsections)
+		<li><a href="#$sect.getAttributeValue("anchor")">$sect.getAttributeValue("name")</a></li>
+		<ul>
+		#foreach ($comp in $sect.getChildren("component"))
+			<li><a href="#$comp.getAttributeValue("name").replace($space,$udsc)">$comp.getAttributeValue("name")</a></li>
+		#end
+		</ul>
+	#end
+	</ul>
+#end
+
+#macro (getProjectImage)
+#if ($project.getChild("logo"))
+<td align="left">
+<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" border="0"/></a>
+</td>
+<td align="right">
+#set ( $logoString = $project.getChild("logo").getAttributeValue("href") )
+#if ( $logoString.startsWith("/") )
+<a href="$project.getAttributeValue("href")"><img src="$relativePath$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
+#else
+<a href="$project.getAttributeValue("href")"><img src="$relativePath/$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
+#end
+</td>
+#else
+<td colspan="2">
+<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" align="left" border="0"/></a>
+</td>
+#end
+#end
+
+#macro (document)
+	 <!-- ====================================================================== -->
+	 <!-- Main Page Section -->
+	 <!-- ====================================================================== -->
+	 <html>
+		  <head>
+				<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
+
+				#set ($authors = $root.getChild("properties").getChildren("author"))
+				#foreach ( $au in $authors )
+					 #metaauthor ( $au.getText() $au.getAttributeValue("email") )
+				#end
+
+				<title>$project.getChild("title").getText() - $root.getChild("properties").getChild("title").getText()</title>
+		  </head>
+
+		  <body bgcolor="$bodybg" text="$bodyfg" link="$bodylink">
+				<table border="0" cellspacing="0">
+					 <!-- TOP IMAGE -->
+					 <tr>
+						  #getProjectImage()
+					 </tr>
+				</table>
+				<table border="0" width="100%" cellspacing="4">
+					 <tr><td colspan="2">
+						  <hr noshade="" size="1"/>
+					 </td></tr>
+
+					 <tr>
+						  <!-- LEFT SIDE NAVIGATION -->
+						  <td width="20%" valign="top" nowrap="true">
+						  #makeProject()
+						  </td>
+						  <td width="80%" align="left" valign="top">
+						  #if ($root.getAttributeValue("index") == "yes")
+							#makeIndex($root.getChild("body").getChildren("section"))
+						  #end
+						  #set ($allSections = $root.getChild("body").getChildren("section"))
+						  #foreach ( $section in $allSections )
+								#section ($section)
+						  #end
+						  </td>
+					 </tr>
+
+					 <!-- FOOTER -->
+					 <tr><td colspan="2">
+						  <hr noshade="" size="1"/>
+					 </td></tr>
+					 <tr><td colspan="2">
+						  <div align="center"><font color="$bodylink" size="-1"><em>
+						  Copyright &#169; 1999-2001, Apache Software Foundation
+						  </em></font></div>
+					 </td></tr>
+				</table>
+		  </body>
+	 </html>
+#end
diff --git a/jakarta-jmeter/xdocs/stylesheets/site.xsl b/jakarta-jmeter/xdocs/stylesheets/site.xsl
new file mode 100644
index 0000000..7283361
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/site.xsl
@@ -0,0 +1,253 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!-- Content Stylesheet for "jakarta-site2" Documentation -->
+<!-- NOTE:  Changes here should also be reflected in "site.vsl" and vice
+	  versa, so either Anakia or XSLT can be used for document generation.   -->
+
+
+<!-- Outstanding Compatibility Issues (with Anakia-based stylesheets):
+
+* Calculation of the hyperlink for navigation menu items (site.xsl prefixes
+  with relative path unconditionally; needs conditional logic like the
+  "projectanchor" macro).
+
+* Handling of the <image> element to insert relative path prefixes
+
+* Special table formatting of the <table>, <tr>, and <td> tags.  (I don't
+  really like this as an approach for styling things, but it's needed
+  for strict compatibility :-).
+
+* Functional equivalent of "site_printable.vsl" not yet started.
+
+-->
+
+
+<!-- $Id: site.xsl,v 1.2 2002/02/23 03:47:56 mstover1 Exp $ -->
+
+<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
+  version="1.0">
+
+
+  <!-- Output method -->
+  <xsl:output method="html"
+				encoding="iso-8859-1"
+				  indent="no"/>
+
+
+  <!-- Defined parameters (overrideable) -->
+  <xsl:param    name="relative-path" select="'.'"/>
+
+  <!-- Defined variables (non-overrideable) -->
+  <xsl:variable name="body-bg"       select="'#ffffff'"/>
+  <xsl:variable name="body-fg"       select="'#000000'"/>
+  <xsl:variable name="body-link"     select="'#525D76'"/>
+  <xsl:variable name="banner-bg"     select="'#525D76'"/>
+  <xsl:variable name="banner-fg"     select="'#ffffff'"/>
+  <xsl:variable name="sub-banner-bg" select="'#828DA6'"/>
+  <xsl:variable name="sub-banner-fg" select="'#ffffff'"/>
+  <xsl:variable name="table-th-bg"   select="'#039acc'"/>
+  <xsl:variable name="table-td-bg"   select="'#a0ddf0'"/>
+  <xsl:variable name="source-color"  select="'#023264'"/>
+
+
+  <!-- Process an entire document into an HTML page -->
+  <xsl:template match="document">
+	 <xsl:variable name="project"
+					 select="document('project.xml')/project"/>
+
+	 <html>
+	 <head>
+	 <title><xsl:value-of select="$project/title"/> - <xsl:value-of select="properties/title"/></title>
+	 <xsl:for-each select="properties/author">
+		<xsl:variable name="name">
+		  <xsl:value-of select="."/>
+		</xsl:variable>
+		<xsl:variable name="email">
+		  <xsl:value-of select="@email"/>
+		</xsl:variable>
+		<meta name="author" value="{$name}"/>
+		<meta name="email" value="{$email}"/>
+	 </xsl:for-each>
+	 </head>
+
+	 <body bgcolor="{$body-bg}" text="{$body-fg}" link="{$body-link}"
+			 alink="{$body-link}" vlink="{$body-link}">
+
+	 <table border="0" width="100%" cellspacing="4">
+
+		<xsl:comment>PAGE HEADER</xsl:comment>
+		<tr><td colspan="2">
+
+		  <xsl:comment>JAKARTA LOGO</xsl:comment>
+		  <a href="http://jakarta.apache.org/">
+			 <img src="http://jakarta.apache.org/images/jakarta-logo.gif"
+				 align="left" alt="The Jakarta Project" border="0"/>
+		  </a>
+		  <xsl:if test="$project/logo">
+			 <xsl:variable name="alt">
+				<xsl:value-of select="$project/logo"/>
+			 </xsl:variable>
+			 <xsl:variable name="home">
+				<xsl:value-of select="$project/@href"/>
+			 </xsl:variable>
+			 <xsl:variable name="src">
+				<xsl:value-of select="$project/logo/@href"/>
+			 </xsl:variable>
+
+			 <xsl:comment>PROJECT LOGO</xsl:comment>
+			 <a href="{$home}">
+				<img src="{$src}" align="right" alt="{$alt}" border="0"/>
+			 </a>
+		  </xsl:if>
+
+		</td></tr>
+
+		<xsl:comment>HEADER SEPARATOR</xsl:comment>
+		<tr>
+		  <td colspan="2">
+			 <hr noshade="" size="1"/>
+		  </td>
+		</tr>
+
+		<tr>
+
+		  <xsl:comment>LEFT SIDE NAVIGATION</xsl:comment>
+		  <td width="20%" valign="top" nowrap="true">
+			 <xsl:apply-templates select="$project/body/menu"/>
+		  </td>
+
+		  <xsl:comment>RIGHT SIDE MAIN BODY</xsl:comment>
+		  <td width="80%" valign="top" align="left">
+			 <xsl:apply-templates select="body/section"/>
+		  </td>
+
+		</tr>
+
+		<xsl:comment>FOOTER SEPARATOR</xsl:comment>
+		<tr>
+		  <td colspan="2">
+			 <hr noshade="" size="1"/>
+		  </td>
+		</tr>
+
+		<xsl:comment>PAGE FOOTER</xsl:comment>
+		<tr><td colspan="2">
+		  <div align="center"><font color="{$body-link}" size="-1"><em>
+		  Copyright &#169; 1999-2001, Apache Software Foundation
+		  </em></font></div>
+		</td></tr>
+
+	 </table>
+	 </body>
+	 </html>
+
+  </xsl:template>
+
+
+  <!-- Process a menu for the navigation bar -->
+  <xsl:template match="menu">
+	 <p><strong><xsl:value-of select="@name"/></strong></p>
+	 <ul>
+		<xsl:apply-templates select="item"/>
+	 </ul>
+  </xsl:template>
+
+
+  <!-- Process a menu item for the navigation bar -->
+  <xsl:template match="item">
+	 <xsl:variable name="href">
+		<xsl:value-of select="$relative-path"/><xsl:value-of select="@href"/>
+	 </xsl:variable>
+	 <li><a href="{$href}"><xsl:value-of select="@name"/></a></li>
+  </xsl:template>
+
+
+  <!-- Process a documentation section -->
+  <xsl:template match="section">
+	 <xsl:variable name="name">
+		<xsl:value-of select="@anchor"/>
+	 </xsl:variable>
+	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
+		<!-- Section heading -->
+		<tr><td bgcolor="{$banner-bg}">
+			 <font color="{$banner-fg}" face="arial,helvetica.sanserif">
+			 <a name="{$name}">
+			 <strong><xsl:value-of select="@name"/></strong></a></font>
+		</td></tr>
+		<!-- Section body -->
+		<tr><td><blockquote>
+		  <xsl:apply-templates/>
+		</blockquote></td></tr>
+	 </table>
+  </xsl:template>
+
+
+  <!-- Process a documentation subsection -->
+  <xsl:template match="subsection">
+	 <xsl:variable name="anchor">
+		<xsl:value-of select="@anchor"/>
+	 </xsl:variable>
+	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
+		<!-- Subsection heading -->
+		<tr><td bgcolor="{$sub-banner-bg}">
+			 <font color="{$sub-banner-fg}" face="arial,helvetica.sanserif">
+			 <a name="{$anchor}">
+			 <strong><xsl:value-of select="@name"/></strong></a></font>
+		</td></tr>
+		<!-- Subsection body -->
+		<tr><td><blockquote>
+		  <xsl:apply-templates/>
+		</blockquote></td></tr>
+	 </table>
+  </xsl:template>
+
+
+  <!-- Process a source code example -->
+  <xsl:template match="source">
+	 <div align="left">
+		<table cellspacing="4" cellpadding="0" border="0">
+		  <tr>
+			 <td bgcolor="{$source-color}" width="1" height="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+			 <td bgcolor="{$source-color}" height="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+			 <td bgcolor="{$source-color}" width="1" height="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+		  </tr>
+		  <tr>
+			 <td bgcolor="{$source-color}" width="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+			 <td bgcolor="#ffffff" height="1"><pre>
+				<xsl:value-of select="."/>
+			 </pre></td>
+			 <td bgcolor="{$source-color}" width="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+		  </tr>
+		  <tr>
+			 <td bgcolor="{$source-color}" width="1" height="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+			 <td bgcolor="{$source-color}" height="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+			 <td bgcolor="{$source-color}" width="1" height="1">
+				<img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/>
+			 </td>
+		  </tr>
+		</table>
+	 </div>
+  </xsl:template>
+
+
+  <!-- Process everything else by just passing it through -->
+  <xsl:template match="*|@*">
+	 <xsl:copy>
+		<xsl:apply-templates select="@*|*|text()"/>
+	 </xsl:copy>
+  </xsl:template>
+
+</xsl:stylesheet>
diff --git a/jakarta-jmeter/xdocs/stylesheets/site_printable.vsl b/jakarta-jmeter/xdocs/stylesheets/site_printable.vsl
new file mode 100644
index 0000000..d8b2ed0
--- /dev/null
+++ b/jakarta-jmeter/xdocs/stylesheets/site_printable.vsl
@@ -0,0 +1,413 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
+
+<!-- Content Stylesheet for Site -->
+
+	 ## Defined variables
+	 #set ($bodybg = "#ffffff")
+	 #set ($bodyfg = "#000000")
+	 #set ($bodylink = "#525D76")
+	 #set ($bannerbg = "#525D76")
+	 #set ($bannerfg = "#ffffff")
+	 #set ($subbannerbg = "#828DA6")
+	 #set ($subbannerfg = "#ffffff")
+	 #set ($tablethbg = "#039acc")
+	 #set ($tabletdbg = "#a0ddf0")
+	 #set ($notebackground = "#bbbb00")
+	 #set ($space = " ")
+	 #set ($space = $space.charAt(0))
+	 #set ($udsc = "_")
+	 #set ($udsc = $udsc.charAt(0))
+
+<!-- start the processing -->
+#document()
+<!-- end the processing -->
+
+## This is where the macro's live
+
+#macro ( table $table)
+<table>
+	 #foreach ( $items in $table.getChildren() )
+		  #if ($items.getName().equals("tr"))
+				#tr ($items)
+		  #end
+	 #end
+</table>
+#end
+
+#macro ( tr $tr)
+<tr>
+	 #foreach ( $items in $tr.getChildren() )
+		  #if ($items.getName().equals("td"))
+				#td ($items)
+		  #elseif ($items.getName().equals("th"))
+				#th ($items)
+		  #end
+	 #end
+</tr>
+#end
+
+#macro ( td $value)
+#if ($value.getAttributeValue("colspan"))
+#set ($colspan = $value.getAttributeValue("colspan"))
+#end
+#if ($value.getAttributeValue("rowspan"))
+#set ($rowspan = $value.getAttributeValue("rowspan"))
+#end
+<td bgcolor="$tabletdbg" colspan="$!colspan" rowspan="$!rowspan" valign="top" align="left">
+	 <font color="#000000" size="-1" face="arial,helvetica,sanserif">
+		  #if ($value.getText().length() != 0 || $value.hasChildren())
+		  $xmlout.outputString($value, true)
+		  #else
+		  &nbsp;
+		  #end
+	 </font>
+</td>
+#end
+
+#macro ( th $value)
+#if ($value.getAttributeValue("colspan"))
+#set ($colspan = $value.getAttributeValue("colspan"))
+#end
+#if ($value.getAttributeValue("rowspan"))
+#set ($rowspan = $value.getAttributeValue("rowspan"))
+#end
+<td bgcolor="$tablethbg" colspan="$!colspan" rowspan="$!rowspan" valign="top" align="left">
+	 <font color="#000000" size="-1" face="arial,helvetica,sanserif">
+		  #if ($value.getText().length() != 0 || $value.hasChildren())
+		  $xmlout.outputString($value, true)
+		  #else
+		  &nbsp;
+		  #end
+	 </font>
+</td>
+#end
+
+#macro ( projectanchor $name $value )
+#if ($value.startsWith("http://"))
+	 <a href="$value">$name</a>
+#elseif ($value.startsWith("/site"))
+	 <a href="http://jakarta.apache.org$value">$name</a>
+#else
+	 <a href="$relativePath$value">$name</a>
+#end
+#end
+
+#macro ( metaauthor $author $email )
+				<meta name="author" value="$author">
+				<meta name="email" value="$email">
+#end
+
+#macro ( image $value )
+#if ($value.getAttributeValue("width"))
+#set ($width=$value.getAttributeValue("width"))
+#end
+#if ($value.getAttributeValue("height"))
+#set ($height=$value.getAttributeValue("height"))
+#end
+#if ($value.getAttributeValue("align"))
+#set ($align=$value.getAttributeValue("align"))
+#end
+<img src="$relativePath$value.getAttributeValue("src")" width="$!width" height="$!height" align="$!align">
+#end
+
+#macro ( source $value)
+	 <div align="left">
+	 <table cellspacing="4" cellpadding="0" border="0">
+	 <tr>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+	 </tr>
+	 <tr>
+		<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#ffffff"><pre>$escape.getText($value.getText())</pre></td>
+		<td bgcolor="#023264" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+	 </tr>
+	 <tr>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+		<td bgcolor="#023264" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
+	 </tr>
+	 </table>
+	 </div>
+#end
+
+#macro (properties $properties)
+<p>
+	<b>Parameters</b>
+	<table border="1" cellspacing="0" cellpadding="2">
+	<tr><th>Attribute</th><th>Description</th><th>Required</th></tr>
+	#foreach ($items in $properties.getChildren("property"))
+		<tr>
+			<td>$items.getAttributeValue("name")</td>
+			<td>#runloop($items)</td>
+			<td>
+					#if($items.getAttributeValue("required") != "")
+						$items.getAttributeValue("required")
+					#else
+						No
+					#end
+			</td>
+		</tr>
+	#end
+	</table>
+	</p>
+#end
+
+#macro (seeAlso $seeAlso)
+	<p><b>See Also:</b>
+	<ul>
+	#foreach ($items in $seeAlso.getChildren())
+		#if($items.getName() == "link")
+			<li><a href="$items.getAttributeValue("href")">$xmlout.outputString($items,true)</a></li>
+		#elseif($items.getName() == "complink")
+			<li>#complink($items)</li>
+		#end
+	#end
+	</ul>
+	</p>
+#end
+
+#macro (figure $figure)
+	<p><table border="0" cellspacing="0" cellpadding="0"><tr><td><img src="$figure.getAttributeValue("image")"><br/>
+	<font size="-1">#runloop($figure)</font></td></tr></table></p>
+#end
+
+#macro (example $example)
+	<a name="$example.getAttributeValue("anchor")"/>
+	<p><b>$example.getAttributeValue("title")</b></p>
+	#runloop($example)
+#end
+
+#macro (note $note)
+	<p><table border="1" bgcolor="$notebackground" width="50%" cellspacing="0" cellpadding="2">
+		<tr><td>#runloop($note)</td></tr>
+	</table></p>
+#end
+
+#macro (unknown $node)
+	#if($node.getName() == "note")
+		#note($node)
+	#elseif($node.getName() == "complink")
+		#complink($node)
+	#elseif($node.getName() == "figure")
+		#figure($node)
+	#elseif ($node.getName() == "links")
+		 #seeAlso ($node)
+	#elseif ($node.getName() == "properties")
+		 #properties ($node)
+	#elseif ($node.getName() == "example")
+		#example ($node)
+	#elseif ($node.getName().equals("source"))
+		 #source ($node)
+	#elseif ($node.getName().equals("table"))
+		 #table ($node)
+	#elseif ($node.getName().equals("component"))
+		#component($node)
+	#elseif ($node.getName().equals("subsection"))
+		 #subsection ($node)
+	#else
+		#outputTag($node)
+		#runloop($node)
+		#outputEndTag($node)
+	#end
+#end
+
+#macro (complink $complink)
+	<a href="$relativePath/usermanual/component_reference.html#$complink.getAttributeValue("name").replace($space,$udsc)">$complink.getAttributeValue("name")</a>
+#end
+
+#macro (outputTag $tag)
+	<$tag.getName()#getAtts($tag)>
+#end
+
+#macro (getAtts $tag)
+	#foreach ($att in $tag.getAttributes()) $att.getName()="$att.getValue()"#end
+#end
+
+#macro (outputEndTag $tag)
+	</$tag.getName()>
+#end
+
+#macro (runloop $itemToLoop)
+	#foreach ($node in $itemToLoop.getMixedContent())
+		#if($node.getClass().getName().indexOf("Element") > -1)
+			#unknown($node)
+		#else
+			$node
+		#end
+	#end
+#end
+
+#macro ( component $component)
+	#set ($screenshot = "")
+	#set ($screenshot = $component.getAttributeValue("screenshot") )
+	<table border="0" cellspacing="0" cellpadding="2">
+		<tr><td>
+		  <font face="arial,helvetica,sanserif">
+			 <a name="$component.getAttributeValue("name").replace($space,$udsc)"><h3>$!component.getAttributeValue("index") $component.getAttributeValue("name")</h3></a>
+		  </font>
+		</td></tr>
+		<tr><td>
+		  #foreach ( $items in $component.getChildren() )
+				#if ($items.getName().equals("description"))
+					#runloop($items)
+					<p><b>Control Panel</b></p>
+					#if ($screenshot != "")
+						<div align="center"><img src="$screenshot"></div>
+					#end
+				#else
+					 #unknown($items)
+				#end
+		  #end
+		</td></tr>
+		<tr><td><br/></td></tr>
+	 </table>
+	<hr>
+#end
+
+#macro ( subsection $subsection)
+	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
+		<tr><td bgcolor="$subbannerbg">
+		  <font color="$subbannerfg" face="arial,helvetica,sanserif">
+			 <a name="$subsection.getAttributeValue("anchor")"><strong>$subsection.getAttributeValue("name")</strong></a>
+		  </font>
+		</td></tr>
+		<tr><td>
+		  <blockquote>
+		  #foreach ( $items in $subsection.getChildren() )
+				#if ($items.getName().equals("img"))
+					 #image ($items)
+				#else
+					 #unknown($items)
+				#end
+		  #end
+		  </blockquote>
+		</td></tr>
+		<tr><td><br/></td></tr>
+	 </table>
+#end
+
+#macro ( section $section)
+	 <table border="0" cellspacing="0" cellpadding="2" width="100%">
+		<tr><td bgcolor="$bannerbg">
+		  <font color="$bannerfg" face="arial,helvetica,sanserif">
+			 <a name="$!section.getAttributeValue("anchor")"><strong>$section.getAttributeValue("name")</strong></a>
+		  </font>
+		</td></tr>
+		<tr><td>
+		  <blockquote>
+		  #foreach ( $items in $section.getChildren() )
+				#if ($items.getName().equals("img"))
+					 #image ($items)
+				#else
+					 #unknown($items)
+				#end
+		  #end
+		  </blockquote>
+		  </p>
+		</td></tr>
+		<tr><td><br/></td></tr>
+	 </table>
+#end
+
+#macro ( makeProject )
+	 #set ($menus = $project.getChild("body").getChildren("menu"))
+	 #foreach ( $menu in $menus )
+		  <p><strong>$menu.getAttributeValue("name")</strong></p>
+		  <ul>
+		  #foreach ( $item in $menu.getChildren() )
+				#set ($name = $item.getAttributeValue("name"))
+				<li>#projectanchor($name $item.getAttributeValue("href"))</li>
+		  #end
+		  </ul>
+	 #end
+#end
+
+#macro (makeIndex $subsections)
+	<ul>
+	#foreach ($sect in $subsections)
+		<li><a href="#$sect.getAttributeValue("anchor")">$sect.getAttributeValue("name")</a></li>
+		<ul>
+		#foreach ($comp in $sect.getChildren("component"))
+			<li><a href="#$comp.getAttributeValue("name").replace($space,$udsc)">$comp.getAttributeValue("name")</a></li>
+		#end
+		</ul>
+	#end
+	</ul>
+#end
+
+#macro (getProjectImage)
+#if ($project.getChild("logo"))
+<td align="left">
+<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" border="0"/></a>
+</td>
+<td align="right">
+#set ( $logoString = $project.getChild("logo").getAttributeValue("href") )
+#if ( $logoString.startsWith("/") )
+<a href="$project.getAttributeValue("href")"><img src="$relativePath$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
+#else
+<a href="$project.getAttributeValue("href")"><img src="$relativePath/$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
+#end
+</td>
+#else
+<td colspan="2">
+<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" align="left" border="0"/></a>
+</td>
+#end
+#end
+
+#macro (document)
+	 <!-- ====================================================================== -->
+	 <!-- Main Page Section -->
+	 <!-- ====================================================================== -->
+	 <html>
+		  <head>
+				<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
+
+				#set ($authors = $root.getChild("properties").getChildren("author"))
+				#foreach ( $au in $authors )
+					 #metaauthor ( $au.getText() $au.getAttributeValue("email") )
+				#end
+
+				<title>$project.getChild("title").getText() - $root.getChild("properties").getChild("title").getText()</title>
+		  </head>
+
+		  <body bgcolor="$bodybg" text="$bodyfg" link="$bodylink">
+				<table border="0" cellspacing="0">
+					 <!-- TOP IMAGE -->
+					 <tr>
+						  #getProjectImage()
+					 </tr>
+				</table>
+				<table border="0" width="600" cellspacing="4">
+					 <tr><td>
+						  <hr noshade="" size="1"/>
+					 </td></tr>
+
+					 <tr>
+						  <td align="left" valign="top">
+						  #if ($root.getAttributeValue("index") == "yes")
+							#makeIndex($root.getChild("body").getChildren("section"))
+						  #end
+						  #set ($allSections = $root.getChild("body").getChildren("section"))
+						  #foreach ( $section in $allSections )
+								#section ($section)
+						  #end
+						  </td>
+					 </tr>
+
+					 <!-- FOOTER -->
+					 <tr><td>
+						  <hr noshade="" size="1"/>
+					 </td></tr>
+					 <tr><td>
+						  <div align="center"><font color="$bodylink" size="-1"><em>
+						  Copyright &#169; 1999-2001, Apache Software Foundation
+						  </em></font></div>
+					 </td></tr>
+				</table>
+		  </body>
+	 </html>
+#end
+
diff --git a/jakarta-jmeter/xdocs/todo.xml b/jakarta-jmeter/xdocs/todo.xml
new file mode 100644
index 0000000..fa93155
--- /dev/null
+++ b/jakarta-jmeter/xdocs/todo.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Brendan Burns, et al.</author>
+	 <title>JMeter Wish and ToDo List</title>
+  </properties>
+<body>
+<section name="ToDo List">
+<p>
+List of those things yet to do, wishes, dreams, etc.. (in no particular
+order)
+</p>
+<p>This page has been made obsolete by the Jakarta Bugzilla database, where enhancement requests are
+stored.  You may <a href="http://nagoya.apache.org/bugzilla/enter_bug.cgi?product=JMeter">submit
+ your own enhancement request</a> there as well.</p>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/user_manual/CVS/Entries b/jakarta-jmeter/xdocs/user_manual/CVS/Entries
new file mode 100644
index 0000000..b1f3896
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/CVS/Entries
@@ -0,0 +1,21 @@
+/assertions.xml/1.2/Mon Sep 24 13:17:01 2001//Tv1_7_3
+/ftp_test.xml/1.2/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/index.xml/1.9/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/interleave.xml/1.3/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/jdbc_test.xml/1.2/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/logical_controllers.xml/1.3/Tue Aug 28 21:28:34 2001//Tv1_7_3
+/loop_controller.xml/1.3/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/modification_manager.xml/1.2/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/once_only.xml/1.3/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/proxy_server.xml/1.5/Thu Jun 13 00:45:19 2002//Tv1_7_3
+/ready_components.xml/1.2/Tue Aug 28 21:28:34 2001//Tv1_7_3
+/rmi.xml/1.2/Sat Mar 24 20:44:24 2001//Tv1_7_3
+/running.xml/1.2/Thu Aug  2 22:27:33 2001//Tv1_7_3
+/saving.xml/1.2/Thu Aug  2 22:27:33 2001//Tv1_7_3
+/sslmanager.xml/1.1/Wed Sep  5 05:19:25 2001//Tv1_7_3
+/test_samples.xml/1.4/Tue Aug 28 21:28:34 2001//Tv1_7_3
+/threadgroups.xml/1.3/Thu Aug 30 17:19:03 2001//Tv1_7_3
+/timers.xml/1.2/Thu Aug  2 22:27:33 2001//Tv1_7_3
+/visualizers.xml/1.2/Thu Aug  2 22:27:33 2001//Tv1_7_3
+/web_test.xml/1.2/Thu Jun 13 00:45:19 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/xdocs/user_manual/CVS/Repository b/jakarta-jmeter/xdocs/user_manual/CVS/Repository
new file mode 100644
index 0000000..2baf99a
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/xdocs/user_manual
diff --git a/jakarta-jmeter/xdocs/user_manual/CVS/Root b/jakarta-jmeter/xdocs/user_manual/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/xdocs/user_manual/CVS/Tag b/jakarta-jmeter/xdocs/user_manual/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/xdocs/user_manual/assertions.xml b/jakarta-jmeter/xdocs/user_manual/assertions.xml
new file mode 100644
index 0000000..6a7cd7e
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/assertions.xml
@@ -0,0 +1,51 @@
+<?xml version="1.0"?>
+
+<document>
+
+  <properties>
+
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+
+	 <title>Assertions</title>
+
+  </properties>
+
+<body>
+
+<section name="Assertions">
+<p>Assertions allow the ability to assert facts about responses received from the
+server being tested.  Using an assertion, you can essentially "test" your that
+your application is returning the results you expect it to.  </p>
+<p>
+For instance, you can assert that the response to a query will contain some
+particular text.  The text you specify can be a Perl-style regular expression, and
+you can indicate that the response is to contain the text, or that it should match
+the whole response.</p>
+<p>
+Assertions can be added to any controller in a test plan (simply right-click on the controller
+and add an assertion).  As always, these assertions will be attached to any test
+samples that "pass through" that controller.</p>
+<p>
+The assertion control panel let's you add strings to be tested.  These strings can
+be regular expressions.  You can also choose whether the strings will be expected to
+match the entire response, or if the response is only expected to contain the strings.  You
+can attach multiple assertions to any controller for additionaly flexibility.</p>
+</section>
+<section name="Assertion Listener">
+<p>The assertion listener provides a very simple report about the test results.  It
+displays the URL of each test sample as it is returned, and, if the test failed one or
+more assertions, those failures are reported under the sample URL.  If the test succeeded,
+only the sampled URL is shown.  It's very simplistic currently - but this listener
+is useful for watching what URL's JMeter is sampling.  In the future, more powerful
+assertion listeners will be developed.</p>
+</section>
+
+<section name="Example test tree">
+
+<img src="/images/screenshots/assertions.gif" width="942" height="324"/>
+
+</section>
+
+</body>
+
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/ftp_test.xml b/jakarta-jmeter/xdocs/user_manual/ftp_test.xml
new file mode 100644
index 0000000..390765b
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/ftp_test.xml
@@ -0,0 +1,23 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>FTP Test</title>
+  </properties>
+<body>
+<section name="FTP Test Controller">
+<p>
+The FTP Test controller is a Sampler whose function is to create a single test case for FTP applications.
+The FTP Test allows you to configure an FTP sample:</p>
+<ul>
+<li><b>Server</b>: Host name of the server being tested.</li>
+<li><b>Filename</b>: File to be downloaded via FTP</li>
+<li><b>Username</b>: Username to use to connect to server</li>
+<li><b>Password</b>: Password to user to connect to server</li>
+</ul>
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/ftptest.gif" width="658" height="299"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/index.xml b/jakarta-jmeter/xdocs/user_manual/index.xml
new file mode 100644
index 0000000..7668be8
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/index.xml
@@ -0,0 +1,80 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>Using JMeter</title>
+  </properties>
+<body>
+<section name="Overview">
+
+<img src="/images/screenshots/base_ui.gif" width="594" height="402"/>
+<p>
+JMeter 1.6 has a new UI layout.  The window is divided into two sections.  On the left is
+a tree which represents a test configuration.  The tree represents both
+the hierarchical and ordered nature of the test.  A test can be made up of
+one or many subtests and each of these subtests may have a particular
+ordering.
+The main display is on the right side of the window.
+Whenever an element in the tree is selected, its control panel is shown in
+the main display allowing you to enter your test data.
+When a visualizer is selected the main display will contain the
+visualizer's view of the current test.</p>
+
+<img src="/images/screenshots/adding_threadgroup.gif" width="273" height="189" align="right"/>
+<table border="5"><tr><td><b>Most functions in the UI are available from popup menus
+that appear when you right-click on an element in the test tree.</b></td></tr></table>
+<p>
+The test configuration tree begins with two elements - <b>TestPlan</b>
+and <b>WorkBench</b>.  The <b>TestPlan</b> element
+will contain all the elements which make up your test.
+The <b>WorkBench</b> is simply an area to store test elements while you
+are in the process of constructing a test.
+</p>
+<p>
+A <b>TestPlan</b> consists of one or more <b>ThreadGroups</b>. A
+<b>ThreadGroup</b> is a root element (it can not be nested) which may contain <b>timers</b>,
+<b>listeners</b>, <b>controllers</b>, <b>Assertions</b>, and <b>config elements</b>.  A <b>ThreadGroup</b> also
+defines the number of threads available to the threadgroup.
+</p>
+<ul>
+<li>A <b>timer</b> is a simple element that controls how long JMeter should delay between each test
+sample when it runs.  This allows JMeter to simulate human actions more closely.
+Timer element's are leaves in the test tree they can not contain
+sub-elements.
+</li>
+<li>A <b>listener</b> receives information about response data while JMeter runs.  For instance, during testing
+of a website, a listener receives and collects sample data that indicates how many
+milliseconds it took the web server to respond to each request.  Normally, these listeners
+are visualizers (represent the data visually in the main window), or reporters (store the data
+to file).  Listeners are also leaves in a test configuration tree.
+</li>
+<li>A <b>controller</b> is an element that controls the flow of test samples.  It also controls the process by which
+test samples are created.  Controllers implement JMeter's various testing
+protocols. <a href="logical_controllers.html">Logic Controllers</a> may have other controllers and/or config elements as
+sub-elements, and <a href="test_samples.html">Samplers</a> can only have config elements or assertions as sub-elements.
+</li>
+<li>An <b>Assertion</b> states a requirement that the server's response must satisfy.  For instance, an Assertion element
+can be configured to assert that response text from a web server will include a particular string.  If it does
+not, it will be reported as a failed sample by the assertion reporter. </li>
+<li>A <b>Config Element</b> represents a coherent set of information that is
+usually specifically targeted to a particular
+protocol or controller.  For instance, setting up a database test requires three
+config elements - one to configure the basic information about the database (what host,
+what driver, login and password to use), one to configure the SQL query
+to be tested, and one to configure the pool of database connections (how many connections
+to store in pool, etc).
+Config Elements are leaves in the test configuration tree.
+</li>
+</ul>
+
+<p>As a user, you create elements in the tree, and start your test when ready.  When you start the test, JMeter
+"compiles" your test script (note: this doesn't refer to an executable script, as in Python or Perl, but to the
+data in the hierarchical tree).  All elements in the tree are added up - meaning child objects are added to their
+parent objects until a single TestPlan object is created.  A JMeterEngine is then created, and the TestPlan sends
+all of its ThreadGroups to the engine.  The engine creates threads, and each thread
+iterates through the test cases.
+</p>
+
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/user_manual/interleave.xml b/jakarta-jmeter/xdocs/user_manual/interleave.xml
new file mode 100644
index 0000000..618cee9
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/interleave.xml
@@ -0,0 +1,28 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Interleave Controller</title>
+  </properties>
+<body>
+<section name="Interleave Controller">
+<p>
+The Interleave Controller filters test samples through one at a time for each iteration through the test.  This means
+that if the Interleave Controller has a Web Test sub-controller within it, which in turn holds three URL's to be tested,
+rather than serve up all three URL's during each run through the test, the Interleave Controller will instead serve up
+the first URL during the first iteration through the test, the second URL during the second iteration, and the third one
+during the third iteration.  On the fourth iteration, the first URL will again be served, and so on.
+</p>
+<p>An example of the usefulness of interleaving might be helpful.  Let's say you have a search engine test that involves 3 steps.  Step
+one is always the same.  Step two involves a URL request that follows a simple format, but the data can vary (think of a
+search function - the request is always the same, except the actual search string can be different).  Step three is also
+always the same.  If you wanted to test the search engine with, say, 10 different search strings, you could setup these
+three steps and then repeat all three 10 times, modifying the second step in each to have a different search string.  Or,
+you could place the second step under an Interleave Controller, and put all 10 alternatives there.  This would achieve the
+same effect.</p>
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/interleave.gif" width="663" height="399"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/jdbc_test.xml b/jakarta-jmeter/xdocs/user_manual/jdbc_test.xml
new file mode 100644
index 0000000..f2e1a0e
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/jdbc_test.xml
@@ -0,0 +1,28 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>JDBC Test</title>
+  </properties>
+<body>
+<section name="JDBC  Test Controller">
+<p>
+The JDBC  Test controller is a generative controller whose function is to create a single test case for FTP applications.
+The JDBC  Test allows you to configure an FTP sample:</p>
+<ul>
+<li><b>Username</b>: Username to use to connect to server</li>
+<li><b>Password</b>: Password to user to connect to server</li>
+<li><b>Database URL</b>: This includes the host name plus database name.  It should be in the correct format for the database being tested (usually hostname/database name)</li>
+<li><b>Sub Protocol</b>: The sub-protocol to use with your specific database (ie &quot;mysql&quot; for MySQL)</li>
+<li><b>Driver Class</b>: The full class name of your driver (ie org.gjt.mm.mysql.Driver)</li>
+<li><b>Number of Connections in Pool</b>: JMeter will use a pool of connections that you can configure.  Set here how many connections you would like the pool to maintain</li>
+<li><b>Max usage for each connection</b>: JMeter will automatically re-initialize SQL connections that have been used a certain number of times.  You can change the max usage for each connection here.</li>
+<li><b>SQL Query String</b>: Finally, the actual SQL query you want to test.</li>
+</ul>
+<p><b>Note:</b> If you were going to test multiple SQL queries, you would probably want to add a &quot;Database Login&quot; config element to the top of your test tree, and configure the username, password, database URL, sub-protocol, and Driver class in just the one place.  You can similarly add a &quot;Database Connection Pool&quot; config element.</p>
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/jdbctest.gif" width="682" height="391"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/logical_controllers.xml b/jakarta-jmeter/xdocs/user_manual/logical_controllers.xml
new file mode 100644
index 0000000..0613ae9
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/logical_controllers.xml
@@ -0,0 +1,22 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Logical Controllers</title>
+  </properties>
+<body>
+<section name="Logical Controllers">
+
+<p>
+A logical controller is a controller that regulates the iterative behavior of
+it's sub-controllers, and sometimes, it can also affect the behavior of its
+parent controller indirectly.  A logical controller can also modify test samples
+that pass through it. The essential distinction between a logical controller and a
+<a href="test_samples.html">generative controller</a> is that logical controllers create no test samples by
+themselves.  If you add a logical controller to the test tree with no sub-conrollers,
+then it can have no effect on the test.  It's only useful as a parent of other
+<a href="test_samples.html">sample generating controllers</a>.
+</p>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/loop_controller.xml b/jakarta-jmeter/xdocs/user_manual/loop_controller.xml
new file mode 100644
index 0000000..08ea64c
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/loop_controller.xml
@@ -0,0 +1,20 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Loop Controller</title>
+  </properties>
+<body>
+<section name="Loop Controller">
+<p>
+The Loop Controller forces the test to iterate through certain
+sub elements multiple times before going on to other test elements.  All sub elements are
+iterated through the specified number of times each time through the test cycle.
+Users can configure the Loop Controller via its edit screen in the main panel.
+</p>
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/loop_controller.gif" width="644" height="227"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/modification_manager.xml b/jakarta-jmeter/xdocs/user_manual/modification_manager.xml
new file mode 100644
index 0000000..491dbbf
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/modification_manager.xml
@@ -0,0 +1,66 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Modification Manager</title>
+  </properties>
+<body>
+<section name="Modification Manager">
+<p>
+The Modification Manager can be used to introduce dynamic data into a test script.  As test samples pass through the
+Modification Manager, it has the opportunity to modify them.  The Modification Manager holds Modifier elements which it
+ uses to control how it modifies test samples.  If no Modifier elements are added, the Modification Manager has no effect.
+</p>
+<p>
+There are two types of Modifiers.  Regular Modifiers (currently there aren't any implemented Modifiers), and response
+based Modifiers (there is one HTML response based Modifier).
+</p>
+</section>
+<section name="Response Based Modifier: HTML Link/Form Modifier">
+<p>
+This modifier parses HTML response from the server and extracts
+links and forms.  A URL test sample that passes through this modifier will be examined to
+see if it &quot;matches&quot; any of the links or forms extracted
+from the immediately previous response.  It would then replace the values in the URL
+test sample with appropriate values from the matching link or form.  Perl-type regular
+expressions are used to find matches.
+</p>
+<p>
+Consider a simple example: let's say you wanted JMeter to &quot;spider&quot; through your site,
+hitting link after link parsed from the HTML returned from your server (this is not
+actually the most useful thing to do, but it serves as a good example).  You would create
+a Modification Manager, and add the &quot;HTML Link Parser&quot; to it.  Then, create a
+Web Test controller, and set the domain to &quot;.*&quot;, and the path likewise. This will
+cause your test sample to match with any link found on the returned pages.  If you wanted to
+restrict the spidering to a particular domain, then change the domain value
+to the one you want.  Then, only links to that domain will be followed.
+</p>
+<p>
+A more useful example: given a web polling application, you might have a page with
+several poll options as radio buttons for the user to select.  Let's say the values
+of the poll options are very dynamic - maybe user generated.  If you wanted JMeter to
+test the poll, you could either create test samples with hardcoded values chosen, or you
+could let the HTML Link Parser parse the form, and insert a random poll option into
+your URL test sample.  To do this, follow the above example, except, when configuring
+your Web Test controller's URL options, be sure to choose &quot;POST&quot; as the
+method.  Put in hard-coded values for the domain, path, and any additional form parameters.
+Then, for the actual radio button parameter, put in the name (let's say it's called &quot;poll_choice&quot;),
+and then &quot;.*&quot; for the value of that parameter.  When the modifier examines
+this URL test sample, it will find that it &quot;matches&quot; the poll form (and
+it shouldn't match any other form, given that you've specified all the other aspects of
+the URL test sample), and it will replace your form parameters with the matching
+parameters from the form.  Since the regular expression &quot;.*&quot; will match with
+anything, the modifier will probably have a list of radio buttons to choose from.  It
+will choose at random, and replace the value in your URL test sample.  Each time through
+the test, a new random value will be chosen.</p>
+<p>
+One important thing to remember is that you must create a test sample immediately
+prior that will return an HTML page with the links and forms that are relevant to
+your dynamic test sample.
+</p>
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/modification.gif" width="808" height="626"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/once_only.xml b/jakarta-jmeter/xdocs/user_manual/once_only.xml
new file mode 100644
index 0000000..d10c68f
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/once_only.xml
@@ -0,0 +1,23 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Once-Only Controller</title>
+  </properties>
+<body>
+<section name="Once-Only Controller">
+<p>
+The Once Only Controller causes the controllers under it to deliver test cases only
+once during a test run.  Thereafter, those test cases are dropped from the test.
+In other words, those test cases will be sampled only during the first iteration.
+There is no configuration required (or possible) for this controller, so it is
+very simple to use.  One might find this controller useful to create a test plan
+where a login page is sampled only once, and thereafter skipped - which is typical
+user behavior.
+</p>
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/once_only.gif" width="663" height="328"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/proxy_server.xml b/jakarta-jmeter/xdocs/user_manual/proxy_server.xml
new file mode 100644
index 0000000..2095b91
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/proxy_server.xml
@@ -0,0 +1,72 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>HTTP Proxy Server</title>
+  </properties>
+<body>
+<section name="HTTP Proxy Server to record browser requests">
+<p>To use the proxy server, create a Threadgroup in your testplan or workbench.
+In the Threadgroup, <i>add</i> the Proxy Server (it will be an option under Config Elements).</p>
+<p>
+The Proxy Server allows JMeter to watch and record your actions while you browse your web application
+with your normal browser (such as Internet Explorer).  JMeter will create test sample objects and store them
+directly into your test plan as you go (so you can view samples interactively while you make them).</p>
+</section>
+<section name="Configuring the Proxy Server">
+<p>
+There are a few simple options in the Proxy Server's configuration screen that give you some control over the Proxy's
+behavior.  First, you can select the port that the Proxy Server listens to.  8080 is the default, but you can change it
+if that port is already in use on your machine.</p>
+<p>
+The Include and Exclude fields allow you to filter requests.  If, for example, you left both fields blank, then JMeter
+would record every action of your browser.  This can often result in 20+ test samples being recorded for each web page
+(it will record all image requests, CSS files, Javascript files, etc).  This is probably not desirable (there are better
+ways to tell JMeter to download the images from a page).  The Include/Exclude fields give you some say over what gets
+recorded.  </p>
+<p>
+If the Include field is left empty, then all requests will &quot;pass&quot; the include test.  If the Exclude field is
+left empty, then all request will &quot;pass&quot; the exclude test.  Once the Include field has at least one entry,
+then only those requests that match at least one entry will &quot;pass&quot; (&quot;pass&quot; means &quot;be
+recorded&quot;). </p>
+<p>
+If the Exclude field is left empty, then all requests (that have passed the Include field check) will pass.  If there are
+entries in the Exclude field, then any request that matches at least one entry will not be recorded.
+</p>
+<p>
+To add an entry to the Include or Exclude field, type the entry into the text field, and hit &quot;Enter&quot; when done.
+The text will be added to the List box to the right of the text field.  To clear the text field, hit the &quot;clear&quot;
+button.  Currently, there is no way to individually select items and delete them.
+</p>
+<p>
+These entries will be treated as Perl-type regular expressions.  They will be matched against the host name + the path of
+each browser request.  Thus, if the URL you are browsing is http://jakarta.apache.org/jmeter/index.html?username=xxxx,
+then the regular expression will be tested against the string: &quot;jakarta.apache.org/jmeter/index.html&quot;.  Thus,
+if you wanted to include all .html files, you're regular expression might look like: &quot;.*\.html&quot;.  Using a
+combination of includes and excludes, you should be able to record what you are interested in and skip what you are
+not.</p>
+<p>
+When you are ready to begin, hit &quot;start&quot;.</p>
+</section>
+<section name="Where do the samples get recorded to?">
+<p>
+The samples will be recorded as Web Test controllers under any Simple Controller elements in your tree (note, if you have more than one
+Simple Controller, they will all have duplicate Web Test controllers created for them).  If your Simple Controller has a
+Url Sample element with domain or path settings, then your Web Test controllers will be created with blank domain and/or path settings (provided
+they match, of course).  This allows you to simply create test plans with a single top level config element to control which server name is
+being tested.<br/>
+If there are no Simple Controllers in your test plan, then no samples will be recorded.
+</p>
+</section>
+<section name="All Done">
+<p>
+When you are done recording your test samples, stop the proxy server (hit the &quot;stop&quot; button).  Remember to reset
+your browser's proxy settings.  Now, you may want to sort and re-order the test script, add timers, listeners, a
+cookie manager, etc.  </p>
+
+</section>
+<section name="Example test tree">
+<img src="/images/screenshots/proxy_control.gif" width="644" height="303"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/ready_components.xml b/jakarta-jmeter/xdocs/user_manual/ready_components.xml
new file mode 100644
index 0000000..4a154f2
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/ready_components.xml
@@ -0,0 +1,29 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Built-in Components</title>
+  </properties>
+<body>
+<section name="Built-in Components">
+<h3>Logical Controllers</h3>
+Logical controllers change the logical flow of a test run, but typically they create no actual test samples.  Instead,
+they are placed within the test tree at key places for their specific effects.
+<ul>
+<li><a href="once_only.html">Once Only Controller</a></li>
+<li><a href="interleave.html">Interleave Controller</a></li>
+<li><a href="loop_controller.html">Loop Controller</a></li>
+<li><a href="modification_manager.html">Modification Manager</a></li>
+</ul>
+<h3>Sample Generation Controllers</h3>
+Sample generation controllers (test controllers) typically change nothing about the logical flow of a test run, but
+instead, are responsible for generation of the test samples.  So, for instance, the Web Test controller is responsible
+for creating URL objects to be tested.
+<ul>
+<li><a href="web_test.html">Web Test Controller</a></li>
+<li><a href="jdbc_test.html">JDBC Test Controller</a></li>
+<li><a href="ftp_test.html">FTP Test Controller</a></li>
+</ul>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/rmi.xml b/jakarta-jmeter/xdocs/user_manual/rmi.xml
new file mode 100644
index 0000000..3afea17
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/rmi.xml
@@ -0,0 +1,60 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>Using JMeter</title>
+  </properties>
+<body>
+<section name="JMeter over RMI">
+<p>
+In most real world web application environments the machine running the web
+application is not the machine which is sitting on your desk.  However to
+get a true estimate of performance you would like to be measuring the
+true response time of your server, not any (highly variable) network
+bottle-necks that might exist between you and the machine on which your web
+application is running.  At the same time using a GUI especially a Java
+GUI over the network is at best painful (using Un*x and X) and at times not
+possible (using windows).
+</p>
+<p>
+To solve this problem JMeter provides a client-server architecture for load
+and performance testing which allows the JMeterEngine (the tester) to
+reside and run on your application server while the configuration GUI and
+visualization executes on the development machine.  This offers a number
+of features:
+<ul>
+	<li>True performance measurment without network bottlenecks</li>
+	<li>Fast responsive GUI</li>
+	<li>Saving of test samples to a local machine</li>
+	<li>Managment of multiple JMeterEngines from a single machine</li>
+</ul>
+</p>
+</section>
+<section name="Running the JMeter engine on the server">
+<p>
+Follow the <a href="installing.html">instructions</a> for installing
+JMeter.  Once JMeter is sucessfully installed you will need to put the
+<code>.../JMeter1.6/bin/ApacheJMeter.jar</code> into your
+<code>CLASSPATH</code> environment variable and execute
+<code>rmiregistry</code>.  Once the RMI registry is started you will need
+to start the actual JMeterServer.  To do this run the
+<code>jmeter-server</code> (Un*x) or <code>jmeter-server.bat</code>
+script (windows) to start the server.  Your server should now be started,
+to test it follow the instructions for running the JMeter client.
+</p>
+</section>
+<section name="Running the JMeter client">
+<p>
+Once JMeter is sucessfully installed you need to modify the
+<code>jmeter.properties</code> file in the bin directory.  Change the
+<code>remote_hosts</code> property to include the address of your server.
+Next run <code>jmeter</code> (Un*x) or
+<code>jmeter.bat</code> (windows) to connect to the JMeter Engine.
+If everything works as planned you will be connected with the JMeter
+Engine and JMeter will behave exactly as if you were running it all
+locally.  See the <a href="user_manual/index.html">user manual</a> for
+detailed instructions.
+</p>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/running.xml b/jakarta-jmeter/xdocs/user_manual/running.xml
new file mode 100644
index 0000000..cecba49
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/running.xml
@@ -0,0 +1,20 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>Running a TestPlan</title>
+  </properties>
+<body>
+<section name="Running a TestPlan">
+<p>Once you have a TestPlan configured the way you want it, running it is as simple
+as selecting Run->Start from JMeter's menu.  To stop, choose Run->Stop from the menu.
+</p>
+<p>While JMeter is running, you can select any visualizers you've added to watch the
+results while samples are collected.  You can flip between visualizers to get
+different views of the data.  Visualizers can be cleared of all current data via the
+Run->Clear menu option.
+</p>
+
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/saving.xml b/jakarta-jmeter/xdocs/user_manual/saving.xml
new file mode 100644
index 0000000..fc3c2c8
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/saving.xml
@@ -0,0 +1,23 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>Saving Test Elements</title>
+  </properties>
+<body>
+<section name="Saving Test Elements">
+<p>Most test elements can be saved to file in XML format.  To so, right-click on the
+element you wish to save, and select "save".  Choose a file, and you're done.  The
+element you selected, plus all it's child elements will be saved.
+</p>
+<p>To load from file, right-click on the tree element where you wish to the saved
+item to be placed, and choose "open".  Select the file where your test elements are
+stored, and you're done.
+</p>
+<p>Currently, all items are saveable (including the TestPlan itself), except for
+Timers and Visualizers.
+</p>
+
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/sslmanager.xml b/jakarta-jmeter/xdocs/user_manual/sslmanager.xml
new file mode 100644
index 0000000..b95fba0
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/sslmanager.xml
@@ -0,0 +1,64 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bloritsch@apache.org">Berin Loritsch</author>
+	 <title>Using the SSL Manager</title>
+  </properties>
+<body>
+<section name="What is the SSL Manager">
+<p>
+  The SSL Manager is a way to select a client certificate so that you can test
+  applications that use Public Key Infrastructure (PKI).  In order to use it,
+  you must have JSSE 1.0.2 installed.  Unfortunately, there is no standard method
+  for controling who a client is--and that won't be introduced until JDK 1.4 is
+  officially available.  The SSL Manager should still work with JDK 1.4, so this
+  is the best solution we could come up with.
+</p>
+
+</section>
+<section name="Choosing a Client Certificate">
+<p>
+  You may either use a Java Key Store (JKS) format key store, or a Public Key
+  Certificate Standard #12 (PKCS12) file for your client certificates.  There
+  is a bug in the JSSE libraries that require you to have at least a six character
+  password on your key (at least for the keytool utility that comes with your
+  JDK).
+</p>
+<p>
+  To select the client certificate, choose Options-&gt;SSL Manager from the menu bar.
+  You will be presented with a file finder that looks for PKCS12 files by default.
+  Your PKCS12 file must have the extension '.p12' for SSL Manager to recognize it
+  as a PKCS12 file.  Any other file will be treated like an average JKS key store.
+  If JSSE is correctly installed, you will be prompted for the password.  The text
+  box does not hide the characters you type at this point--so make sure no one is
+  looking over your shoulder.  The current implementation assumes that the password
+  for the keystore is also the password for the private key of the client you want
+  to authenticate as.
+</p>
+<p>
+  The next time you run your test, the SSL Manager will examine your key store to
+  see if it has more than one key available to it.  If there is only one key, SSL
+  Manager will select it for you.  If there is more than one key, you will be prompted
+  to select the alias you wish to authenticate as.  If SSL Manager cannot detect
+  any keys in your keystore, it will give you a text box for the off chance you know
+  something it doesn't.  Keep in mind that for the first run, you will be prompted
+  once per thread.  Try to use only one thread for the first run to ensure everything
+  is working properly.
+</p>
+</section>
+<section name="Things to Look Out For">
+<p>
+  You must have your Certificate Authority (CA) certificate installed properly
+  if it is not signed by one of the five CA certificates that ships with your
+  JDK.  One method to install it is to import your CA certificate into a JKS
+  file, and name the JKS file "jssecacerts".  Place the file in your JRE's
+  lib/security folder.  This file will be read before the "cacerts" file in
+  the same directory.  Keep in mind that as long as the "jssecacerts" file
+  exists, the certificates installed in "cacerts" will not be used.  This may
+  cause problems for you.  If you don't mind importing your CA certificate into
+  the "cacerts" file, then you can authenticate against all of the CA certificates
+  installed.
+</p>
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/user_manual/test_samples.xml b/jakarta-jmeter/xdocs/user_manual/test_samples.xml
new file mode 100644
index 0000000..c28f425
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/test_samples.xml
@@ -0,0 +1,32 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>ThreadGroups</title>
+  </properties>
+<body>
+<section name="Generative Controllers">
+<p>
+A Generative Controller is a controller that controls the creation of test cases.
+Generative Controllers do not contain sub-controllers .  Their purpose is to describe a specific test case and to
+provide the logic necessary to create that test case.
+</p>
+
+<p>Generative Controllers can hold config elements that provide default values, or additional information
+about the test.</p>
+
+<p>
+Although one can add cookie managers and authorization managers, it's almost always
+preferable to add such elements at the ThreadGroup level.
+</p>
+</section>
+<section name="Currently supported protocols">
+<ul>
+<li>HTTP</li>
+<li>JDBC</li>
+<li>FTP</li>
+</ul>
+
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/threadgroups.xml b/jakarta-jmeter/xdocs/user_manual/threadgroups.xml
new file mode 100644
index 0000000..0f827af
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/threadgroups.xml
@@ -0,0 +1,86 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>ThreadGroups</title>
+  </properties>
+<body>
+<section name="ThreadGroups">
+<p>A ThreadGroup primarily holds controllers which deliver test cases to be tested.
+During test run, a ThreadGroup will iterate through all its controllers and extract
+test samples to execute.  The order of iteration is determined by the order the controllers
+appear in the tree.
+</p>
+<p>
+Controllers can be nested, so the actual behavior of the iterative process can
+be arbitrarily complex.
+</p>
+<p>
+Additionally, ThreadGroups can have timers added to them.  The timer will be used to
+create a delay between the execution of samples.  Although multiple timers can be
+added to a ThreadGroup, there isn't much point to doing so.  The timers delay values
+will simply be summed.
+</p>
+<p>
+Listeners can also be added to ThreadGroups.  Listeners collect test data and do
+some useful function with the data, such as displaying the data visually (sometimes,
+such listeners are called visualizers).  Other listeners save the data to file.
+Multiple visualizers can be added, allowing one multiple views of the data.
+</p>
+</section>
+<section name="Logic Layering">
+<p>
+Probably the most important concept to understand is the layering of logic that occurs
+when a test script is compiled and run.
+</p>
+<p>
+A ThreadGroup holds Controllers (which you, as the user, have added to the ThreadGroup).  During a test
+run, the ThreadGroup will go to the first Controller in the list, and will request a test sample (which
+it will then execute).  This Controller, in turn, looks up its list of sub-controllers, finds the first one, and
+requests a test sample from it.  This continues until there are no more sub-controllers, and a test sample is actually
+generated (generally by a <a href="test_samples.html">sample generating controller</a>).  This test sample is
+then passed along back up to the ThreadGroup, which made the original request, at which point it is executed.  At
+any time, a Controller in this chain might report that it has reached the end of its test samples.  Two things happen -
+first, the parent controller receiving this report will move on to the next sub-controller in its list, and two, the
+controller reporting this fact will re-initialize itself and be ready to start again if it is called upon again.  Thus,
+when the ThreadGroup finishes with the last controller, it will start the whole process again with the first controller.
+</p>
+<p>
+Logic layering occurs because, as a test sample &quot;bubbles&quot; up through successive controllers on its way
+to the ThreadGroup, each controller it passes through has the opportunity to modify it.  Each controller also has the
+opportunity to change the logical flow by behaving differently than what is described in the paragraph above.  The
+<a href="once_only.html">Once Only Controller</a>, for example, doesn't re-initialize after it has reached the end -
+it goes away, never to be repeated.  The <a href="interleave.html">Interleave Controller</a>, reports that it is
+done after <i>every</i> test sample (which causes its parent controller to &quot;move on&quot;).  And, the <a
+href="modification_manager.html">Modification Manager</a> examines every test sample that passes through it and potentially
+modifies it.
+</p>
+<p>
+Additionally, any config elements attached to a controller will be used to modify test samples that pass through
+that controller.  The default behavior is that only blank fields within the test sample are filled in (in other words,
+data is never overwritten, but empty fields can be filled in).  The value of this is that an entire test script can
+be generated, and the domain name of the server being tested doesn't have to be specified in each and every test sample.
+Instead, the domain name field can be left blank, and a UrlConfig element can be added to a top-level controller, or
+directly to the ThreadGroup itself, with only the domain name field filled in.  Thus, the test script can be used to test
+multiple different servers with only a single change.  Additionally, its always best to put the CookieManager element at
+the ThreadGroup level so that all test samples will share the same cookies.
+</p>
+</section>
+<section name="Ramp-Up">
+<p>
+A ThreadGroup can have a <i>ramp-up</i> period associated with it, to provide a way to gradually increase
+the simulated load.  The default value of the ramp-up parameter is zero.  With this setting, the number of threads
+specified for the ThreadGroup are all started immediately when the test begins.
+</p>
+
+<p>
+If the ramp-up parameter is set to a value greater than zero, the threads are started one at a time, spaced evenly
+over the ramp-up period.  The first thread is started immediately, at time=zero.  After that, another thread is started
+every &lt;rampUp&gt; / &lt;numThreads&gt; seconds.  After &lt;rampUp&gt; seconds have elapsed, all threads will be running.
+</p>
+
+
+
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/timers.xml b/jakarta-jmeter/xdocs/user_manual/timers.xml
new file mode 100644
index 0000000..34df6ec
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/timers.xml
@@ -0,0 +1,20 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>Timers</title>
+  </properties>
+<body>
+<section name="Timers">
+<p>Timers help program flow by controlling how long JMeter's engine delays between
+each sample attempt.  Each sampling thread that runs will pause between every
+sample, depending on which timers have been chosen.
+</p>
+<p>Timers are added to ThreadGroups.  Configuring a timer is generally self
+explanatory.  Multiple timers can be added to a ThreadGroup.  In this case, the
+sampling thread will sum results from each timer, and delay for that period of time.
+</p>
+
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/visualizers.xml b/jakarta-jmeter/xdocs/user_manual/visualizers.xml
new file mode 100644
index 0000000..bc52293
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/visualizers.xml
@@ -0,0 +1,57 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="bburns@apache.org">Michael Stover, brendan Burns, et al.</author>
+	 <title>Visualizers</title>
+  </properties>
+<body>
+<section name="Visualizers">
+<p>
+Visualizers process sample data during a test run - usually for the purpose of
+displaying the data visually.  Adding a visualizer to your threadgroup is as
+simple as right-clicking on the threadgroup, and choosing the visualizer you want to
+add.  Here is a rundown of some of the more popular visualizers.
+</p>
+</section>
+<section name="Graphing Visualizer">
+<p>The simplest and most straightforward, the graphing visualizer simply plots the
+data points on a graph.  Each black dot represents a sample, its vertical height
+represents time in milliseconds that it took that sample to return.  Average (blue)
+and standard deviation (red) are also plotted on the same graph, also in
+milliseconds.
+</p>
+</section>
+<section name="View Results Visualizer">
+<p>This visualizer allows the user to view the text returned from the sample.
+The usefulness of this visualizer depends on what you are testing.  If you are testing
+web pages, you will be able to examine the HTML from each sample.  You can hit
+the "Next" button repeatedly to view each subsequent sample.  Please note that while
+you examine the samples, sampling continues, and all results are stored in memory,
+so you may want to stop the test after a few cycles and then examine the results.
+I typically use this visualizer initially to verify everything is going smoothly,
+and then I remove it and up the thread count for the real test.
+</p>
+</section>
+<section name="File Reporter">
+<p>Sometimes also called the File Visualizer, this visualizer returns no visual data,
+but rather stores the data to file.  This file can later be viewed by choosing
+from the menu (Report->Analyze Data File), and browsing to the generated file.  The
+data stored is very simple - URL and time in milliseconds.
+</p>
+<p>To use the File reporter effectively, be sure to Open the file before starting the
+test, and Close the file after you stop the test.
+</p>
+</section>
+<section name="Spline Visualizer">
+<p>The spline visualizer presents a smooth curve that represents the data from the
+entire test run.  There are 10 points on the curve, each point represents an average
+of some subset of the sample run.  For instance, if your test run has been running
+for some time, and you have 1000 samples, the first "point" on the curve will represent
+an average of the first 100 samples, the next will be for the second 100 samples, etc.
+These points are connected using spline curves, and allow users to see the entire
+history of the test and how the responsiveness of their application has changed over
+time.
+</p>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/user_manual/web_test.xml b/jakarta-jmeter/xdocs/user_manual/web_test.xml
new file mode 100644
index 0000000..69994dc
--- /dev/null
+++ b/jakarta-jmeter/xdocs/user_manual/web_test.xml
@@ -0,0 +1,32 @@
+<?xml version="1.0"?>
+<document>
+  <properties>
+	 <author email="mstover1@apache.org">Michael Stover, et al.</author>
+	 <title>Web Test</title>
+  </properties>
+<body>
+<section name="Web Test Controller">
+<p>
+The Web Test controller is a generative controller whose function is to create a single test case for HTTP applications.
+The Web Test allows you to configure a URL sample:</p>
+<ul>
+<li><b>Protocol</b>: HTTP or HTTPS</li>
+<li><b>Method</b>: GET or POST</li>
+<li><b>Domain</b>: Host name of the server being tested</li>
+<li><b>Port</b>: Port to connect to the server on</li>
+<li><b>Path</b>: File path.  This represent the part of the URL following the domain name, but before any query string that may be involved</li>
+<li><b>Paramter Table</b>: These are the arguments that will make up the query string.  This string will be appended to the URL if Method=GET, and it will be sent in a separate stream if Method=POST.</li>
+</ul>
+<p>Additionally, there are two check selections that allow you to control whether JMeter will also download any images found on
+the page returned by the server, or to tell JMeter that it should upload a file using multipart-form format.  If you are uploading a file, JMeter requires three additional parameters:</p>
+<ul>
+<li><b>File</b>: The path to the file being uploaded</li>
+<li><b>Field Name</b>: The name of the upload field (ie, if it were a web page, there would be an input field with a name - this is that name)</li>
+<li><b>MimeType</b>: The mimetype of the document being uploaded</li>
+</ul>
+</section>
+<section name="Example Web Test">
+<img src="/images/screenshots/webtest.gif" width="789" height="769"/>
+</section>
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/usermanual/CVS/Entries b/jakarta-jmeter/xdocs/usermanual/CVS/Entries
new file mode 100644
index 0000000..9ef2c77
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/CVS/Entries
@@ -0,0 +1,17 @@
+/best-practices.xml/1.4/Thu Mar  7 14:19:09 2002//Tv1_7_3
+/boss.xml/1.5/Wed Jun 26 00:59:49 2002//Tv1_7_3
+/build-adv-web-test-plan.xml/1.4/Tue Jun 18 01:01:15 2002//Tv1_7_3
+/build-db-test-plan.xml/1.3/Wed Jun 26 00:59:49 2002//Tv1_7_3
+/build-ftp-test-plan.xml/1.4/Wed Jun 26 00:59:49 2002//Tv1_7_3
+/build-jndi-test-plan.xml/1.2/Wed Mar  6 03:52:03 2002//Tv1_7_3
+/build-test-plan.xml/1.6/Tue Jun 18 01:01:15 2002//Tv1_7_3
+/build-web-test-plan.xml/1.13/Wed Jun 26 00:59:49 2002//Tv1_7_3
+/component_reference.xml/1.23/Fri Aug 16 12:39:03 2002//Tv1_7_3
+/functions.xml/1.2/Fri Aug  9 19:08:55 2002//Tv1_7_3
+/get-started.xml/1.13/Mon Aug 12 13:26:28 2002//Tv1_7_3
+/glossary.xml/1.4/Sat Jul 13 03:17:49 2002//Tv1_7_3
+/index.xml/1.23/Sat Jul 13 03:17:49 2002//Tv1_7_3
+/intro.xml/1.7/Sat Mar  2 19:32:12 2002//Tv1_7_3
+/remote-test.xml/1.5/Tue Jun 18 01:01:15 2002//Tv1_7_3
+/test_plan.xml/1.6/Sat Jun 29 00:37:00 2002//Tv1_7_3
+D
diff --git a/jakarta-jmeter/xdocs/usermanual/CVS/Repository b/jakarta-jmeter/xdocs/usermanual/CVS/Repository
new file mode 100644
index 0000000..b4a5bc2
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/CVS/Repository
@@ -0,0 +1 @@
+jakarta-jmeter/xdocs/usermanual
diff --git a/jakarta-jmeter/xdocs/usermanual/CVS/Root b/jakarta-jmeter/xdocs/usermanual/CVS/Root
new file mode 100644
index 0000000..41188ef
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/CVS/Root
@@ -0,0 +1 @@
+:pserver:anoncvs@cvs.apache.org:/home/cvspublic
diff --git a/jakarta-jmeter/xdocs/usermanual/CVS/Tag b/jakarta-jmeter/xdocs/usermanual/CVS/Tag
new file mode 100644
index 0000000..5f312fe
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/CVS/Tag
@@ -0,0 +1 @@
+Nv1_7_3
diff --git a/jakarta-jmeter/xdocs/usermanual/best-practices.xml b/jakarta-jmeter/xdocs/usermanual/best-practices.xml
new file mode 100644
index 0000000..3440451
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/best-practices.xml
@@ -0,0 +1,66 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Best Practices</title>
+</properties>
+
+<body>
+
+<section name="11. Best Practices" anchor="best_practices">
+</section>
+
+<section name="11.1 Limit the Number of Threads" anchor="limit_threads">
+<p>Your hardware's capabilities will limit the number of threads you can effectively
+run with JMeter.  It will also depend on how fast your server is (a faster server
+gives makes JMeter work harder since it returns request quicker).  The more
+JMeter works, the less accurate its timing information will be.  The more work
+JMeter does, the more each thread has to wait to get access to the CPU, the more
+inflated the timing information gets.  If you need large-scale load testing, consider
+<a href="remote-test.html">running JMeter remotely</a> across multiple machines.</p>
+</section>
+
+<section name="11.2 Where to Put the Cookie Manager" anchor="put_cookie_manager">
+<p>See <a href="build-web-test-plan.html#adding_cookie_support">Building a Web Test</a>
+for information.</p>
+</section>
+
+<section name="11.3 Where to Put the Authorization Manager" anchor="put_auth_manager">
+<p>See <a href="build-adv-web-test-plan.html#header_manager">Building an Advanced
+Web Test</a> for information.</p>
+</section>
+
+<section name="11.4 Using the Proxy Server" anchor="proxy_server">
+<p>Refer to <complink name="HTTP Proxy Server"/> for details on setting up the proxy
+server.  The most important thing to do is filter out all requests you aren't
+interested in.  For instance, there's no point in recording image requests (JMeter can
+be instructed to download all images on a page - see <complink name="HTTP Request"/>).
+These will just clutter your test plan.  Most likely, there is an extension all your files
+share, such as .jsp, .asp, .php, .html or the like. These you should "include" by
+entering ".*\.jsp" as an "Include Pattern". </p>
+<p>Alternatively, you can exclude images by entering ".*\.gif" as an "Exclude Pattern".
+Depending on your application, this may or may not be a better way to go.  You may
+also have to exclude stylesheets, javascript files, and other included files.  Test
+out your settings to verify you are recording what you want, and then erase and start
+fresh.</p>
+<p>Although JMeter will record directly to the ThreadGroup if no Logical Controller is
+present, it's recommended that you add a <complink name="Simple Controller"/> so that all
+samples are recorded there.  This conveniently packages all your samples under one
+controller, which can be given a name that describes the test case.</p>
+<p>Now, go through the steps of a Test Case.  If you have no pre-defined test cases, use
+JMeter to record your actions to define some test cases.  Once you have finished a
+definite series of steps, save the entire test case in an appropriately named file.  Then, wipe
+clean and start a new test case.  By doing this, you can quickly record a large number of
+test case "rough drafts".</p>
+<p>One of the most useful features of the Proxy Server is that you can abstract out
+certain common elements from the recorded samples.  By attaching an <complink name="HTTP Request Defaults"/>,
+with the "domain" property specified (eg jakarta.apache.org), to your <complink name="Simple Controller"/>,
+you can direct JMeter to:</p>
+<ol><li>Only record samples with matching "domain" fields under this Controller, and</li>
+<li>Remove the "domain" field from the recorded sample.</li>
+</ol>
+<p>You can do the same with the "Path" field.</p>
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/boss.xml b/jakarta-jmeter/xdocs/usermanual/boss.xml
new file mode 100644
index 0000000..f416c65
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/boss.xml
@@ -0,0 +1,189 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <author email="mramshaw@alumni.concordia.ca">Martin Ramshaw</author>
+  <title>User's Manual: My boss wants me to...</title>
+</properties>
+
+<body>
+
+<section name="12. Help! My boss wants me to load test our web app!" anchor="boss">
+<p>This is a fairly open-ended proposition. There are a number of questions to
+be asked first, and additionally a number of resources that will be needed. You
+will need some hardware to run the benchmarks/load-tests from. A number of
+tools will prove useful. There are a number of products to consider.  And finally,
+why is Java a good choice to implement a load-testing/Benchmarking product.
+</p>
+<subsection name="12.1 Questions to ask">
+<p>What is our anticipated average number of users (normal load) ?
+</p>
+<p>What is our anticipated peak number of users ?
+</p>
+<p>When is a good time to load-test our application (i.e. off-hours or week-ends),
+bearing in mind that this may very well crash one or more of our servers ?
+</p>
+<p>Does our application have state ? If so, how does our application manage it
+(cookies, session-rewriting, or some other method) ?
+</p>
+</subsection>
+<subsection name="12.2 Resources">
+<p>The following resources will prove very helpful. Bear in mind that if you
+cannot locate these resources, <b>you</b> will become these resources. As you
+already have your work cut out for you, it is worth knowing who the following
+people are, so that you can ask them for help if you need it.
+</p>
+	<subsection name="12.2.1 Network">
+	<p>Who knows our network topology ? If you run into any firewall or
+	proxy issues, this will become very important. As well, a private
+	testing network (which will therefore have very low network latency)
+	would be a very nice thing. Knowing who can set one up for you
+	(if you feel that this is necessary) will be very useful. If the
+	application doesn't scale as expected, who can add additional
+	hardware ?
+	</p>
+	</subsection>
+	<subsection name="12.2.2 Application">
+	<p>Who knows how our application functions ? The normal sequence is
+	<ul>
+		<li>test (low-volume - can we benchmark our application?)</li>
+		<li>benchmark (the average number of users)</li>
+		<li>load-test (the maximum number of users)</li>
+		<li>test destructively (what is our hard limit?)</li>
+	</ul>
+	The <b>test</b> process may progress from black-box testing to
+	white-box testing (the difference is that the first requires
+	no knowledge of the application [it is treated as a "black box"]
+	while the second requires some knowledge of the application).
+	It is not uncommon to discover problems with the application
+	during this process, so be prepared to defend your work.
+	</p>
+	</subsection>
+</subsection>
+<subsection name="12.3 What platform should I use to run the benchmarks/load-tests ?">
+<p>This should be a widely-used piece of hardware, with a standard
+(i.e. vanilla) software installation. Remember, if you publish your results,
+the first thing your clients will do is hire a graduate student to verify them.
+You might as well make it as easy for this person as you possibly can.
+</p>
+<p>For Windows, Windows XP Professional should be a minimum (the others
+do not multi-thread past 50-60 connections, and you probably anticipate
+more users than that).
+</p>
+<p>Good free platforms include the linuxes, the BSDs, and Solaris Intel. If
+you have a little more money, there are commercial linuxes. If you can justify
+it, a commercial Unix (Solaris, etc) is probably the best choice.
+</p>
+<p>
+For non-Windows platforms, investigate "umount -n unlimited" with a view to
+including it in your user account startup scripts (.bashrc or .cshrc scripts
+for the testing account).
+</p>
+<p>As you progress to larger-scale benchmarks/load-tests, this platform
+will become the limiting factor. So it's worth using the best hardware and
+software that you have available. Remember to include the hardware/software
+configuration in your published benchmarks.
+</p>
+</subsection>
+<subsection name="12.4 Tools">
+<p>The following tools will all prove useful. It is definitely worthwhile to
+become familiar with them. This should include trying them out, and reading the
+appropriate documentation (man-pages, info-files, application --help messages,
+and any supplied documentation).
+</p>
+	<subsection name="12.4.1 ping">
+	<p>
+	This can be used to establish whether or not you can reach your
+	target site. Options can be specified so that 'ping' provides the
+	same type of route reporting as 'traceroute'.
+	</p>
+	</subsection>
+	<subsection name="12.4.2 nslookup/dig">
+	<p>
+	While the <u>user</u> will normally use a human-readable internet
+	address, <u>you</u> may wish to avoid the overhead of DNS lookups when
+	performing benchmarking/load-testing. These can be used to determine
+	the unique address (dotted quad) of your target site.
+	</p>
+	</subsection>
+	<subsection name="12.4.3 traceroute">
+	<p>
+	If you cannot "ping" your target site, this may be used to determine 
+	the problem (possibly a firewall or a proxy). It can also be used
+	to estimate the overall network latency (running locally should give
+	the lowest possible network latency - remember that your users will
+	be running over a possibly busy internet). Generally, the fewer hops
+	the better.
+	</p>
+	</subsection>
+</subsection>
+<subsection name="12.5 What other products are there ?">
+<p>There are a number of commercial products, which generally have fairly
+hefty pricetags. If you can justify it, these are probably the way to go.
+If, however, these products do not do exactly what you want, or you are on a
+limited budget, the following are worth a look. In fact, you should probably
+start by trying the Apache <b>ab</b> tool, as it may very well do the job
+if your requirements are not particularly complicated.
+</p>
+	<subsection name="12.5.1 Apache 'ab' tool">
+	<p>
+	You should definitely start with this one. It handles HTTP 'get' requests
+	very well, and can be made to handle HTTP 'post' requests with a little
+	effort. Written in 'C', it performs very well, and offers good (if basic)
+	performance reporting.
+	</p>
+	</subsection>
+	<subsection name="12.5.2 HttpUnit">
+	<p>
+	This is worth a look. It is a library (and therefore of more interest to
+	developers) that can be used to perform HTTP tests/benchmarks. It is
+	intended to be used instead of a web browser (therefore no GUI) in
+	conjunction with <b>JUnit</b>.
+	</p>
+	</subsection>
+	<subsection name="12.5.3 Microsoft WAS">
+	<p>
+	This is definitely worth a look. It has an excellent user interface
+	but it may not do exactly what you want. If this is the case, be aware
+	that the functionality of this product is not likely to change.
+	</p>
+	</subsection>
+	<subsection name="12.5.4 JMeter">
+	<p>
+	If you have non-standard requirements, then this solution offers an
+	open-source community to provide them (of course, if you are reading
+	<u>this</u>, you are probably already committed to this one). This
+	product is free to evolve along with your requirements.
+	</p>
+	</subsection>
+</subsection>
+<subsection name="12.6 Why Java ?">
+<p>Why not Perl or C ?
+</p>
+<p>Well, Perl might be a very good choice except that the Benchmark package
+seems to give fairly fuzzy results. Also, simulating multiple users with
+Perl is a tricky proposition (multiple connections can be simulated by forking
+many processes from a shell script, but these will not be threads, they will
+be processes). However, the Perl community is very large. If you find that
+someone has already written something that seems useful, this could be a very
+good solution.
+</p>
+<p>C, of course, is a very good choice (check out the Apache <b>ab</b> tool).
+But be prepared to write all of the custom networking, threading, and state
+management code that you will need to benchmark your application.
+</p>
+<p>Java gives you (for free) the custom networking, threading, and state
+management code that you will need to benchmark your application. Java is
+aware of HTTP, FTP, and HTTPS - as well as RMI, IIOP, and JDBC (not to mention
+cookies, URL-encoding, and URL-rewriting). In addition Java gives you automatic
+garbage-collection, and byte-code level security.
+</p>
+<p>And once Microsoft moves to a CLR (common language run-time) a Windows Java
+solution will not be any slower than any other type of solution on the Windows
+platform.
+</p>
+</subsection>
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/build-adv-web-test-plan.xml b/jakarta-jmeter/xdocs/usermanual/build-adv-web-test-plan.xml
new file mode 100644
index 0000000..1ded884
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/build-adv-web-test-plan.xml
@@ -0,0 +1,49 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Building an Advanced Web Test Plan</title>
+</properties>
+
+<body>
+
+<section name="6. Building an Advanced Web Test Plan" anchor="building">
+<p>In this section, you will learn how to create advanced
+<a href="build-test-plan.html">Test Plans</a> to test a Web site.</p>
+
+<p>For an example of a basic Test Plan, see
+<a href="build-web-test-plan.html">Building a Web Test Plan</a>.</p></section>
+
+<section name="6.1 Handling User Sessions With URL Rewriting" anchor="session_url_rewriting">
+<p>If your web application uses URL rewriting rather than cookies to save session information,
+then you'll need to do a bit of extra work to test your site.</p>
+<p>To respond correctly to URL rewriting, JMeter needs to parse the HTML
+received from the server and retrieve the unique session ID.  Use the appropriate <complink name="URL Rewriting Modifier"/>
+to accomplish this.  Simply enter the name of your session ID parameter into the modifier, and it
+will find it and add it to each request.  If the request already has a value, it will be replaced.</p>
+
+<example title="URL Rewriting Example">
+<p>Download <a href="../demos/URLRewritingExample.jmx">this example</a>. In Figure 1 is shown a 
+test plan using URL rewriting.  Note that the URL Re-writing modifier is attached to the ThreadGroup,
+thus assuring that it will affect every request in that ThreadGroup.</p>
+<figure image="../images/screenshots/url_rewrite_example_a.gif">Figure 1 - Test Tree</figure>
+<p>In Figure 2, we see the URL Re-writing modifier GUI, which just has a field for the user to specify
+the name of the session ID parameter.  There is also a checkbox for indicating that the session ID should
+be part of the path (separated by a ";"), rather than a request parameter</p>
+<figure image="../images/screenshots/url_rewrite_example_b.gif">Figure 2 - Request parameters</figure>
+</example>
+</section>
+
+<section name="6.2 Using a Header Manager" anchor="header_manager">
+<p>The <complink name="HTTP Header Manager"/> lets you customize what information
+JMeter sends in the HTTP request header.  This header includes properties like "User-Agent",
+"Pragma", "Referer", etc.</p>
+<p>The <complink name="HTTP Header Manager"/>, like the <complink name="HTTP Cookie Manager"/>,
+should probably be added at the Thread Group level, unless for some reason you wish to
+specify different headers for the different <complink name="HTTP Request"/> objects in
+your test.</p>
+
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/build-db-test-plan.xml b/jakarta-jmeter/xdocs/usermanual/build-db-test-plan.xml
new file mode 100644
index 0000000..92b5e6a
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/build-db-test-plan.xml
@@ -0,0 +1,187 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <author email="mramshaw@alumni.concordia.ca">Martin Ramshaw</author>
+  <title>User's Manual: Building a Database Test Plan</title>
+</properties>
+
+<body>
+
+<section name="7. Building a Database Test Plan" anchor="building">
+<p>In this section, you will learn how to create a basic
+<a href="build-test-plan.html">Test Plan</a> to test an database server.
+You will create ten users that send five SQL requests to the database server.
+Also, you will tell the users to run their tests three times. So, the total number
+of requests is (10 users) x (2 requests) x (repeat 3 times) = 60 JDBC requests.
+To construct the Test Plan, you will use the following elements:
+<a href="test_plan.html#thread_group">Thread Group</a>,
+<complink name="JDBC Request"/>, <complink name="Graph Results"/>.</p>
+
+<note>This example uses the PostgreSQL <b>org.postgresql.Driver</b> database driver.
+To use this driver, its' containing .jar file must be copied to the extension
+.../lib/ directory (see <a href="get-started.html#classpath">JMeter's Classpath</a>
+for more details). Otherwise, expect a substantial amount of stack traces when
+running this test plan.</note>
+
+</section>
+
+<section name="7.1 Adding Users" anchor="adding_users">
+<p>The first step you want to do with every JMeter Test Plan is to add a
+<a href="test_plan.html#thread_group">Thread Group</a> element. The Thread Group
+tells JMeter the number of users you want to simulate, how often the users should
+send requests, and the how many requests they should send.</p>
+
+<p>Go ahead and add the ThreadGroup element by first selecting the Test Plan,
+clicking your right mouse button to get the Add menu, and then select
+Add --&gt; ThreadGroup.</p>
+
+<p>You should now see the Thread Group element under Test Plan. If you do not
+see the element, then "expand" the Test Plan tree by clicking on the
+Test Plan element.</p>
+
+<p>Next, you need to modify the default properties. Select the Thread Group element
+in the tree, if you have not already selected it. You should now see the Thread
+Group Control Panel in the right section of the JMeter window (see Figure 7.1
+below)</p>
+
+<figure image="../images/screenshots/jdbctest/threadgroup.png">
+Figure 7.1. Thread Group with Default Values</figure>
+
+<p>Start by providing a more descriptive name for our Thread Group. In the name
+field, enter JDBC Users.</p>
+
+<note>You will need a valid database, database table, and user-level access to that
+table. In the example shown here, the database is 'mydb' and the tables' name is
+'Stocks'.</note>
+
+<p>Next, increase the number of users (called threads) to 10.</p>
+
+<p>In the next field, the Ramp-Up Period, leave the the default value of 0
+seconds.  This property tells JMeter how long to delay between starting each
+user. For example, if you enter a Ramp-Up Period of 5 seconds, JMeter will
+finish starting all of your users by the end of the 5 seconds.  So, if we have
+5 users and a 5 second Ramp-Up Period, then the delay between starting users
+would be 1 second (5 users / 5 seconds = 1 user per second).  If you set the
+value to 0, then JMeter will immediately start all of your users.</p>
+
+<p>Finally, clear the checkbox labeled "Forever", and enter a value of 3 in
+the Loop Count field.  This property tells JMeter how many times to repeat your
+test. If you enter a loop count value of 0, then JMeter will run your test only
+once. To have JMeter repeatedly run your Test Plan, select the Forever
+checkbox.</p>
+
+<note>In most applications, you have to manually accept
+changes you make in a Control Panel.  However, in JMeter, the Control Panel
+automatically accepts your changes as you make them.  If you change the
+name of an element, the tree will be updated with the new text after you
+leave the Control Panel (for example, when selecting another tree element).</note>
+
+<p>See Figure 7.2 for the completed JDBC Users Thread Group.</p>
+
+<figure image="../images/screenshots/jdbctest/threadgroup2.png">
+Figure 7.2. JDBC Users Thread Group</figure>
+
+</section>
+
+<section name="7.2 Adding JDBC Requests" anchor="adding_requests">
+<p>Now that we have defined our users, it is time to define the tasks that they
+will be performing.  In this section, you will specify the JDBC requests to
+perform.</p>
+
+<note>Although there are <complink name="JDBC Database Connection Pool Defaults"/>,
+<complink name="JDBC Database Login Defaults"/>, and
+<complink name="JDBC SQL Query Defaults"/> components, they will not be used
+in this example.</note>
+
+<p>Begin by selecting the JDBC Users element. Click your right mouse button
+to get the Add menu, and then select Add --&gt; Sampler --&gt; JDBC Request.
+Then, select this new element to view its Control Panel (see Figure 7.3).</p>
+
+<figure image="../images/screenshots/jdbctest/JDBCRequest.png">
+Figure 7.3. JDBC Request</figure>
+
+<p>In our Test Plan, we will make two JDBC requests. The first one is for
+Eastman Kodak stock, and the second is Pfizer stock (obviously you should
+change these to examples appropriate for your particular database). These
+are illustrated below.</p>
+
+<note>JMeter sends requests in the order that you add them to the tree.</note>
+
+<p>Start by editing the following properties (see Figure 7.4):
+<ol>
+<li>Change the Name to "Kodak".</li>
+<li>Enter the JDBC URL field.</li>
+<li>Enter the Driver Class field.</li>
+<li>Change the Number of Connections in Pool field to "1".</li>
+<li>Change the Max. Usage For Each Connection field to "1".</li>
+<li>Enter the Username field.</li>
+<li>Enter the Password field.</li>
+<li>Enter the SQL Query String field.</li>
+</ol>
+</p>
+
+<figure image="../images/screenshots/jdbctest/JDBCRequest2.png">
+Figure 7.4. JDBC Request for Eastman Kodak stock</figure>
+
+<p>Next, add the second JDBC Request and edit the following properties (see
+Figure 7.5):
+<ol>
+<li>Change the Name to "Pfizer".</li>
+<li>Enter the JDBC URL field.</li>
+<li>Enter the Driver Class field.</li>
+<li>Change the Number of Connections in Pool field to "1".</li>
+<li>Change the Max. Usage For Each Connection field to "1".</li>
+<li>Enter the Username field.</li>
+<li>Enter the Password field.</li>
+<li>Enter the SQL Query String field.</li>
+</ol>
+</p>
+
+<figure image="../images/screenshots/jdbctest/JDBCRequest3.png">
+Figure 7.6. JDBC Request for Pfizer stock</figure>
+
+</section>
+
+<section name="7.3 Adding a Listener to View/Store the Test Results" anchor="adding_listener">
+<p>The final element you need to add to your Test Plan is a
+<a href="component_reference.html#listeners">Listener</a>. This element is
+responsible for storing all of the results of your JDBC requests in a file
+and presenting a visual model of the data.</p>
+
+<p>Select the JDBC Users element and add a <complink name="Graph Results"/>
+listener (Add --&gt; Listener --&gt; Graph Results).</p>
+
+<figure image="../images/screenshots/jdbctest/graph-results.png">
+Figure 7.6. Graph results Listener</figure>
+
+</section>
+
+<section name="7.4 Saving the Test Plan" anchor="saving">
+<p>Although it is not required, we recommend that you save the Test Plan to a
+file before running it.  To save the Test Plan, select Save Test Plan from the
+File menu (with the latest release, it is no longer necessary to select the
+Test Plan element first).</p>
+
+<note>JMeter allows you to save the entire Test Plan tree or
+only a portion of it.  To save only the elements located in a particular "branch"
+of the Test Plan tree, select the Test Plan element in the tree from which to start
+the "branch", and then click your right mouse button to access the Save As menu item.
+Alternatively, select the appropriate Test Plan element  and then select Save As from
+the Edit menu.
+</note>
+
+</section>
+
+<section name="7.5 Running the Test Plan" anchor="running">
+
+<p>From the Run menu, select Run.</p>
+
+<note>JMeter lights up a green square in the upper-right-hand corner to indicate if a
+test is currently running.  The square is turned gray when all tests stop.  Even after
+you select "stop", the green light will stay on until all test threads have exited.</note>
+
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/build-ftp-test-plan.xml b/jakarta-jmeter/xdocs/usermanual/build-ftp-test-plan.xml
new file mode 100644
index 0000000..bbcf0ee
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/build-ftp-test-plan.xml
@@ -0,0 +1,201 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <author email="mramshaw@alumni.concordia.ca">Martin Ramshaw</author>
+  <title>User's Manual: Building an FTP Test Plan</title>
+</properties>
+
+<body>
+
+<section name="8. Building an FTP Test Plan" anchor="building">
+<p>In this section, you will learn how to create a basic
+<a href="build-test-plan.html">Test Plan</a> to test an FTP site.  You will
+create four users that send requests for two files on the O'Reilly FTP site.
+Also, you will tell the users to run their tests twice. So, the total number of
+requests is (4 users) x (2 requests) x (repeat 2 times) = 16 FTP requests. To
+construct the Test Plan, you will use the following elements:
+<a href="test_plan.html#thread_group">Thread Group</a>,
+<complink name="FTP Request"/>,
+<complink name="FTP Request Defaults"/>, and
+<complink name="Spline Visualizer"/>.</p>
+
+<note>This example uses the O'Reilly FTP site, www.oro.com. Please be considerate
+when running this example, and (if possible) consider running against another
+FTP site.</note>
+
+</section>
+
+<section name="8.1 Adding Users" anchor="adding_users">
+<p>The first step you want to do with every JMeter Test Plan is to add a
+<a href="test_plan.html#thread_group">Thread Group</a> element.  The Thread Group tells
+JMeter the number of users you want to simulate, how often the users should send
+requests, and the how many requests they should send.</p>
+
+<p>Go ahead and add the ThreadGroup element by first selecting the Test Plan,
+clicking your right mouse button to get the Add menu, and then select
+Add --&gt; ThreadGroup.</p>
+
+<p>You should now see the Thread Group element under Test Plan.  If you do not
+see the element, then "expand" the Test Plan tree by clicking on the
+Test Plan element.</p>
+
+<p>Next, you need to modify the default properties.  Select the Thread Group element
+in the tree, if you have not already selected it. You should now see the Thread
+Group Control Panel in the right section of the JMeter window (see Figure 8.1
+below)</p>
+
+<figure image="../images/screenshots/ftptest/threadgroup.png">
+Figure 8.1. Thread Group with Default Values</figure>
+
+<p>Start by providing a more descriptive name for our Thread Group. In the name
+field, enter O'Reilly Users.</p>
+
+<p>Next, increase the number of users (called threads) to 4.</p>
+
+<p>In the next field, the Ramp-Up Period, leave the the default value of 0
+seconds.  This property tells JMeter how long to delay between starting each
+user. For example, if you enter a Ramp-Up Period of 5 seconds, JMeter will
+finish starting all of your users by the end of the 5 seconds.  So, if we have
+5 users and a 5 second Ramp-Up Period, then the delay between starting users
+would be 1 second (5 users / 5 seconds = 1 user per second).  If you set the
+value to 0, then JMeter will immediately start all of your users.</p>
+
+<p>Finally, clear the checkbox labeled "Forever", and enter a value of 2 in
+the Loop Count field.  This property tells JMeter how many times to repeat your
+test. If you enter a loop count value of 0, then JMeter will run your test only
+once. To have JMeter repeatedly run your Test Plan, select the Forever
+checkbox.</p>
+
+<note>In most applications, you have to manually accept
+changes you make in a Control Panel.  However, in JMeter, the Control Panel
+automatically accepts your changes as you make them.  If you change the
+name of an element, the tree will be updated with the new text after you
+leave the Control Panel (for example, when selecting another tree element).</note>
+
+<p>See Figure 8.2 for the completed O'Reilly Users Thread Group.</p>
+
+<figure image="../images/screenshots/ftptest/threadgroup2.png">
+Figure 8.2. O'Reilly Users Thread Group</figure>
+
+</section>
+
+<section name="8.2 Adding Default FTP Request Properties" anchor="adding_defaults">
+<p>Now that we have defined our users, it is time define the tasks that they
+will be performing.  In this section, you will specify the default settings
+for your FTP requests.  And then, in section 8.3, you will add FTP Request
+elements which use some of the default settings you specified here.</p>
+
+<p>Begin by selecting the O'Reilly Users element. Click your right mouse button
+to get the Add menu, and then select Add --&gt; Config Element --&gt; FTP Request
+Defaults. Then, select this new element to view its Control Panel (see Figure 8.3).
+</p>
+
+<figure image="../images/screenshots/ftptest/ftp-defaults.png">
+Figure 8.3. FTP Request Defaults</figure>
+
+<p>
+Like most JMeter elements, the <complink name="FTP Request Defaults"/> Control
+Panel has a name field that you can modify.  In this example, leave this field with
+the default value.</p>
+
+<p>Skip to the next field, which is the FTP Server's Server Name/IP. For the
+Test Plan that you are building, all FTP requests will be sent to the same
+FTP server, ftp.oro.com.  Enter this domain name into the field.
+This is the only field that we will specify a default, so leave the remaining
+fields with their default values.</p>
+
+<note>The FTP Request Defaults element does not tell JMeter
+to send an FTP request.  It simply defines the default values that the
+FTP Request elements use.</note>
+
+<p>See Figure 8.4 for the completed FTP Request Defaults element</p>
+
+<figure image="../images/screenshots/ftptest/ftp-defaults2.png">
+Figure 8.4. FTP Defaults for our Test Plan</figure>
+
+</section>
+
+<section name="8.3 Adding FTP Requests" anchor="adding_requests">
+
+<p>In our Test Plan, we need to make two FTP requests. The first one is for the
+O'Reilly mSQL Java README file (ftp://ftp.oro.com/pub/msql/java/README), and the
+second is for the tutorial file (ftp://ftp.oro.com/pub/msql/java/tutorial.txt).</p>
+
+<note>JMeter sends requests in the order that you add them to the tree.</note>
+
+<p>Start by adding the first <complink name="FTP Request"/>
+to the O'Reilly Users element (Add --&gt; Sampler --&gt; FTP Request).
+Then, select the FTP Request element in the tree and edit the following properties
+(see Figure 8.5):
+<ol>
+<li>Change the Name to "README".</li>
+<li>Change the File to Retrieve From Server field to "pub/msql/java/README".</li>
+<li>Change the Username field to "anonymous".</li>
+<li>Change the Password field to "anonymous".</li>
+</ol>
+</p>
+
+<note>You do not have to set the Server Name field because you already specified
+this value in the FTP Request Defaults element.</note>
+
+<figure image="../images/screenshots/ftptest/ftp-request.png">
+Figure 8.5. FTP Request for O'Reilly mSQL Java README file</figure>
+
+<p>Next, add the second FTP Request and edit the following properties (see
+Figure 8.6:
+<ol>
+<li>Change the Name to "tutorial".</li>
+<li>Change the File to Retrieve From Server field to "pub/msql/java/tutorial.txt".</li>
+<li>Change the Username field to "anonymous".</li>
+<li>Change the Password field to "anonymous".</li>
+</ol>
+</p>
+
+<figure image="../images/screenshots/ftptest/ftp-request2.png">
+Figure 8.6. FTP Request for O'Reilly mSQL Java tutorial file</figure>
+
+</section>
+
+<section name="8.4 Adding a Listener to View/Store the Test Results" anchor="adding_listener">
+<p>The final element you need to add to your Test Plan is a
+ <a href="component_reference.html#listeners">Listener</a>. This element is
+responsible for storing all of the results of your FTP requests in a file and presenting
+a visual model of the data.</p>
+
+<p>Select the O'Reilly Users element and add a <complink name="Spline Visualizer"/>
+listener (Add --&gt; Listener --&gt; Spline Visualizer).</p>
+
+<figure image="../images/screenshots/ftptest/spline-results.png">
+Figure 8.7. Spline Visualizer Listener</figure>
+
+</section>
+
+<section name="8.5 Saving the Test Plan" anchor="saving">
+<p>Although it is not required, we recommend that you save the Test Plan to a
+file before running it.  To save the Test Plan, select Save Test Plan from the
+File menu (with the latest release, it is no longer necessary to select the
+Test Plan element first).</p>
+
+<note>JMeter allows you to save the entire Test Plan tree or
+only a portion of it.  To save only the elements located in a particular "branch"
+of the Test Plan tree, select the Test Plan element in the tree from which to start
+the "branch", and then click your right mouse button to access the Save As menu item.
+Alternatively, select the appropriate Test Plan element  and then select Save As from
+the Edit menu.
+</note>
+
+</section>
+
+<section name="8.6 Running the Test Plan" anchor="running">
+
+<p>From the Run menu, select Run.</p>
+
+<note>JMeter lights up a green square in the upper-right-hand corner to indicate if a
+test is currently running.  The square is turned gray when all tests stop.  Even after
+you select "stop", the green light will stay on until all test threads have exited.</note>
+
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/build-jndi-test-plan.xml b/jakarta-jmeter/xdocs/usermanual/build-jndi-test-plan.xml
new file mode 100644
index 0000000..999d607
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/build-jndi-test-plan.xml
@@ -0,0 +1,15 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Building a JNDI Test Plan</title>
+</properties>
+
+<body>
+
+<section name="8. Building a JNDI Test Plan" anchor="building">
+<p>To be written.</p>
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/build-test-plan.xml b/jakarta-jmeter/xdocs/usermanual/build-test-plan.xml
new file mode 100644
index 0000000..f698325
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/build-test-plan.xml
@@ -0,0 +1,55 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Building a Test Plan</title>
+</properties>
+
+<body>
+
+<section name="3. Building a Test Plan">
+<p>A test plan describes a series of steps JMeter will execute when run.  A complete
+test plan will consiste of one or more Thread Groups, logic conrollers, sample generating
+controllers, listeners, timers, assertions, and configuration elements.
+</p>
+
+<subsection name="3.1 Adding and Removing Elements" anchor="add_remove">
+<p>Adding <a href="test_plan.html">elements to a test plan</a> can be done by right-clicking on an element in the
+tree, and choosing a new element from the "add" list.  Alternatively, elements can
+be loaded from file and added by choosing the "open" option.  </p>
+
+<p>To remove an element, make sure the element is selected, right-click on the element,
+and choose the "remove" option.</p>
+</subsection>
+
+<subsection name="3.2 Loading and Saving Elements" anchor="load_save">
+<p>To load an element from file, right click on the existing tree element to which
+you want to add the loaded element, and select the "open" option.  Choose the file where
+your elements are saved.  JMeter will load the elements into the tree.</p>
+
+<p>To save tree elements, right click on an element and choose the "save" option.
+JMeter will save the element selected, plus all child elements beneath it.  In this way,
+you can save test tree fragments, individual elements, or the entire test plan.</p>
+</subsection>
+
+<subsection name="3.3 Configuring Tree Elements" anchor="config_element">
+<p>Any element in the test tree will present controls in JMeter's right-hand frame.  These
+controls allow you to configure the behavior of that particular test element.  What can be
+configured for an element depends on what type of element it is.</p>
+
+<note>The Test Tree itself can be manipulated by dragging and dropping components around the test tree.</note>
+</subsection>
+
+<subsection name="3.4 Running a Test Plan" anchor="run">
+<p>To run your test plan, choose "start" from the "run" menu item.  To stop your test
+plan, choose "stop" from the same menu.  JMeter does not automatically give any
+indication of whether it is currently running.  Some listeners make it obvious if
+JMeter is running, but the only way to be sure is to check the "run" menu.  If "start"
+is disabled, and "stop" is enabled, JMeter is running your test plan (or, at least, it
+thinks it is).</p>
+</subsection>
+</section>
+
+</body>
+</document>
+
diff --git a/jakarta-jmeter/xdocs/usermanual/build-web-test-plan.xml b/jakarta-jmeter/xdocs/usermanual/build-web-test-plan.xml
new file mode 100644
index 0000000..3c44250
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/build-web-test-plan.xml
@@ -0,0 +1,224 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Building a Web Test Plan</title>
+</properties>
+
+<body>
+
+<section name="5. Building a Web Test Plan" anchor="building">
+<p>In this section, you will learn how to create a basic
+<a href="build-test-plan.html">Test Plan</a> to test a Web site.  You will
+create five users that send requests to two pages on the Jakarta Web site.
+Also, you will tell the users to run their tests twice. So, the total number of
+requests is (5 users) x (2 requests) x (repeat 2 times) = 20 HTTP requests. To
+construct the Test Plan, you will use the following elements:
+<a href="test_plan.html#thread_group">Thread Group</a>,
+<complink name="HTTP Request"/>,
+<complink name="HTTP Request Defaults"/>, and
+<complink name="Graph Results"/>.</p>
+
+<p>For a more advanced Test Plan, see
+<a href="build-adv-web-test-plan.html">Building an Advanced Web Test Plan</a>.</p>
+</section>
+
+<!--
+<p>After starting JMeter, you see three items in the tree: Root (the parent of
+all tree elements), Test Plan (you place all of your elements here), and
+WorkBench (a temporary place to store your elements while constructing a Test
+Plan).</p>-->
+
+<section name="5.1 Adding Users" anchor="adding_users">
+<p>The first step you want to do with every JMeter Test Plan is to add a
+<a href="test_plan.html#thread_group">Thread Group</a> element.  The Thread Group tells
+JMeter the number of users you want to simulate, how often the users should send
+requests, and the how many requests they should send.</p>
+
+<p>Go ahead and add the ThreadGroup element by first selecting the Test Plan,
+clicking your right mouse button to get the Add menu, and then select
+Add --&gt; ThreadGroup.</p>
+
+<p>You should now see the Thread Group element under Test Plan.  If you do not
+see the element, then "expand" the Test Plan tree by clicking on the
+Test Plan element.</p>
+
+<p>Next, you need to modify the default properties.  Select the Thread Group element
+in the tree, if you have not already selected it. You should now see the Thread
+Group Control Panel in the right section of the JMeter window (see Figure 5.1
+below)</p>
+
+<figure image="../images/screenshots/webtest/threadgroup.gif">
+Figure 5.1. Thread Group with Default Values</figure>
+
+<p>Start by providing a more descriptive name for our Thread Group. In the name
+field, enter Jakarta Users.</p>
+
+<p>Next, increase the number of users (called threads) to 5.</p>
+
+<p>In the next field, the Ramp-Up Period, leave the the default value of 0
+seconds.  This property tells JMeter how long to delay between starting each
+user. For example, if you enter a Ramp-Up Period of 5 seconds, JMeter will
+finish starting all of your users by the end of the 5 seconds.  So, if we have
+5 users and a 5 second Ramp-Up Period, then the delay between starting users
+would be 1 second (5 users / 5 seconds = 1 user per second).  If you set the
+value to 0, then JMeter will immediately start all of your users.</p>
+
+<p>Finally, clear the checkbox labeled "Forever", and enter a value of 2 in
+the Loop Count field.  This property tells JMeter how many times to repeat your
+test. If you enter a loop count value of 0, then JMeter will run your test only
+once. To have JMeter repeatedly run your Test Plan, select the Forever
+checkbox.</p>
+
+<note>In most applications, you have to manually accept
+changes you make in a Control Panel.  However, in JMeter, the Control Panel
+automatically accepts your changes as you make them.  If you change the
+name of an element, the tree will be updated with the new text after you
+leave the Control Panel (for example, when selecting another tree element).</note>
+
+<p>See Figure 5.2 for the completed Jakarta Users Thread Group.</p>
+
+<figure image="../images/screenshots/webtest/threadgroup2.gif">
+Figure 5.2. Jakarta Users Thread Group</figure>
+
+</section>
+
+<section name="5.2 Adding Default HTTP Request Properties" anchor="adding_defaults">
+<p>Now that we have defined our users, it is time define the tasks that they
+will be performing.  In this section, you will specify the default settings
+for your HTTP requests.  And then, in section 5.3, you will add HTTP Request
+elements which use some of the default settings you specified here.</p>
+
+<p>Begin by selecting the Jakarta Users element. Click your right mouse button
+to get the Add menu, and then select Add --&gt; Config Element --&gt; HTTP Request
+Defaults. Then, select this new element to view its Control Panel (see Figure 5.3).
+</p>
+
+<figure image="../images/screenshots/webtest/http-defaults1.gif">
+Figure 5.3. HTTP Request Defaults</figure>
+
+<p>
+Like most JMeter elements, the <complink name="HTTP Request Defaults"/> Control
+Panel has a name field that you can modify.  In this example, leave this field with
+the default value.</p>
+
+<p>Skip to the next field, which is the Web Server's Server Name/IP. For the
+Test Plan that you are building, all HTTP requests will be sent to the same
+Web server, jakarta.apache.org.  Enter this domain name into the field.
+This is the only field that we will specify a default, so leave the remaining
+fields with their default values.</p>
+
+<note>The HTTP Request Defaults element does not tell JMeter
+to send an HTTP request.  It simply defines the default values that the
+HTTP Request elements use.</note>
+
+<p>See Figure 5.4 for the completed HTTP Request Defaults element</p>
+
+<figure image="../images/screenshots/webtest/http-defaults2.gif">
+Figure 5.4. HTTP Defaults for our Test Plan</figure>
+
+</section>
+
+<section name="5.3 Adding Cookie Support" anchor="adding_cookie_support">
+<p>Nearly all web testing should use cookie support, unless your application
+specifically doesn't use cookies.  To add cookie support, simply add an
+<complink name="HTTP Cookie Manager"/> to each <a href="test_plan.html#thread_group">Thread
+Group</a> in your test plan.  This will ensure that each thread gets its own
+cookies, but shared across all <complink name="HTTP Request"/> objects.</p>
+
+<p>To add the <complink name="HTTP Cookie Manager"/>, simply select the
+<a href="test_plan.html#thread_group">Thread Group</a>, and choose Add --&gt;
+Config Element --&gt; HTTP
+Cookie Manager, either from the Edit Menu, or from the right-click pop-up menu.</p>
+</section>
+
+
+<section name="5.4 Adding HTTP Requests" anchor="adding_requests">
+
+<p>In our Test Plan, we need to make two HTTP requests. The first one is for the
+Jakarta home page (http://jakarta.apache.org/), and the second one is for the
+Project Guidelines page (http://jakarta.apache.org/site/guidelines.html).</p>
+
+<note>JMeter sends requests in the order that you add them
+to the tree.</note>
+
+<p>Start by adding the first <complink name="HTTP Request"/>
+to the Jakarta Users element (Add --&gt; Sampler --&gt; HTTP Request).
+Then, select the HTTP Request element in the tree and edit the following properties
+(see Figure 5.5):
+<ol>
+<li>Change the Name field to "Home Page".</li>
+<li>Set the Path field to "/".  Remember that you do not have to set the Server
+Name field because you already specified this value in the HTTP Request Defaults
+element.</li>
+</ol>
+</p>
+
+<figure image="../images/screenshots/webtest/http-request1.gif">
+Figure 5.5. HTTP Request for Jakarta Home Page</figure>
+
+<p>Next, add the second HTTP Request and edit the following properties (see
+Figure 5.6:
+<ol>
+<li>Change the Name field to "Project Guidelines".</li>
+<li>Set the Path field to "/site/guidelines.html".</li>
+</ol>
+</p>
+
+<figure image="../images/screenshots/webtest/http-request2.gif">
+Figure 5.6. HTTP Request for Jakarta Project Guidelines Page</figure>
+
+</section>
+
+<section name="5.5 Adding a Listener to View Store the Test Results" anchor="adding_listener">
+<p>The final element you need to add to your Test Plan is a
+ <a href="component_reference.html#listeners">Listener</a>. This element is
+responsible for storing all of the results of your HTTP requests in a file and presenting
+a visual model of the data.</p>
+
+<p>Select the Jakarta Users element and add a <complink name="Graph Results"/> listener (Add --&gt; Listener
+--&gt; Graph Results).  Next, you need to specify a directory and filename of the
+output file.  You can either type it into the filename field, or select the
+Browse button and browse to a directory and then enter a filename.</p>
+
+<figure image="../images/screenshots/graph_results.gif">
+Figure 5.7. Graph Results Listener</figure>
+
+</section>
+
+<section name="5.6 Saving the Test Plan" anchor="saving">
+<p>Although it is not required, we recommend that you save the Test Plan to a
+file before running it.  To save the Test Plan, select Save Test Plan from the
+File menu (with the latest release, it is no longer necessary to select the
+Test Plan element first).</p>
+
+<note>JMeter allows you to save the entire Test Plan tree or
+only a portion of it.  To save only the elements located in a particular "branch"
+of the Test Plan tree, select the Test Plan element in the tree from which to start
+the "branch", and then click your right mouse button to access the Save As menu item.
+Alternatively, select the appropriate Test Plan element  and then select Save As from
+the Edit menu.
+</note>
+
+</section>
+
+<section name="5.7 Running the Test Plan" anchor="running">
+
+<p>From the Run menu, select Run.</p>
+
+<note>JMeter lights up a green square in the upper-right-hand corner to indicate if a test is
+currently running.  The square is turned gray when all tests stop.  Even after you select "stop",
+the green light will stay on until all test threads have exited.</note>
+
+<p>Once JMeter has finished running your Test Plan, select Stop from the
+Run menu.</p>
+<p>If you selected a file to save the results to in your listener, then you will have a file that can be
+opened in any visualizer.  Each visualizer will display the results in it's own fashion.</p>
+
+<note>It is possible to have the same file open in more than one visualizer.  This is not a problem.  JMeter
+will ensure during the test run that no sample is recorded to the same file more than once.</note> 
+
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/component_reference.xml b/jakarta-jmeter/xdocs/usermanual/component_reference.xml
new file mode 100644
index 0000000..c5c1753
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/component_reference.xml
@@ -0,0 +1,992 @@
+<?xml version="1.0"?>
+<document index="yes">
+
+<properties>
+  <title>User's Manual: Samplers</title>
+</properties>
+
+<body>
+
+
+<section name="13.1 Samplers" anchor="samplers">
+
+<component index="13.1.1" name="FTP Request" screenshot="../images/screenshots/gen-controller/ftp-request.gif">
+<description>This controller lets you send an FTP "retrieve file" request to an FTP server.
+If you are going to send multiple requests to the same FTP server, consider
+using a <complink name="FTP Request Defaults"/> Configuration
+Element so you do not have to enter the same information for each FTP Request Generative
+Controller. </description>
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+	<property name="Server Name or IP" required="Yes">Domain name or IP address of the FTP server.
+JMeter assumes the FTP server is listening on the default port.</property>
+	<property name="File to Retrieve From Server" required="Yes">Path and name of the file to retrieve.</property>
+	<property name="Username" required="Usually">FTP account username.</property>
+	<property name="Password" required="Usually">FTP account password.</property>
+</properties>
+<links>
+	<link href="test_plan.html#assertions">Assertions</link>
+	<complink name="FTP Request Defaults"/>
+	<link href="build-ftp-test-plan.html">Building an FTP Test Plan</link>
+</links>
+
+</component>
+
+<component name="HTTP Request" index="13.1.2" screenshot="../images/screenshots/gen-controller/http-request.png">
+
+<description>
+	<p>This sampler lets you send an HTTP/HTTPS request to a web server.  It
+	also lets you control whether or not JMeter parses HTML files for images and
+	Java applets and sends HTTP requests to retrieve them.</p>
+	<p>If you are going to send multiple requests to the same web server, consider
+	using an <complink name="HTTP Request Defaults"/>
+	Configuration Element so you do not have to enter the same information for each
+	HTTP Request.</p>
+
+	<p>Or, instead of manually adding HTTP Requests, you may want to use
+	JMeter's <complink name="HTTP Proxy Server"/> to create
+	them.  This can save you time if you have a lot of HTTP requests or requests with many
+	parameters.</p>
+
+	<p>If the request requires a login authorization, you will also have to add an
+	<complink name="HTTP Authorization Manager"/>
+	Configuration Element. And, if the request uses cookies, then you will also need an
+	<complink name="HTTP Cookie Manager"/>.  You can
+	add either of these elements to the Thread Group or the HTTP Request.  If you have
+	more than one HTTP Request that needs authorizations or cookies, then add the
+	elements to the Thread Group.  That way, all HTTP Request controllers will share the
+	same Authorization Manager and Cookie Manager elements.</p>
+
+	<p>If the request uses a technique called "URL Rewriting" to maintain sessions,
+	then see section
+	<a href="build-adv-web-test-plan.html#url_rewriting">6.1 Handling User Sessions With URL Rewriting</a>
+	for additional configuration steps.</p>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+	<property name="Server" required="Yes">Domain name or IP address of the web server.</property>
+	<property name="Port" required="No (defaults to 80)">Port the web server is listening to.</property>
+	<property name="Protocol" required="Yes">HTTP or HTTPS.</property>
+	<property name="Method" required="Yes">HTTP GET or HTTP POST.</property>
+	<property name="Path" required="Yes">The path to resource (for example, /servlets/myServlet). If the
+resource requires query string parameters, add them below in the
+"Send Parameters With the Request" section.</property>
+	<property name="Send Parameters With the Request" required="No">The query string will
+	be generated from the list of parameters you provide.  Each parameter has a <i>name</i> and
+	<i>value</i>.  The query string will be generated in the correct fashion, depending on
+	the choice of "Method" you made (ie if you chose GET, the query string will be
+	appended to the URL, if POST, then it will be sent separately).  Also, if you are
+	sending a file using a multipart form, the query string will be created using the
+	multipart form specifications.
+	<p>
+	Additionally, you can specify whether each paramter should be URL encoded.  If you are not sure what this
+	means, it is probably best to select it.  If your values contain characters such as &amp;amp; or spaces, or 
+	question marks, then encoding is usually required.</p></property>
+	<property name="Filename" required="No">Name of the file to send.  If left blank, JMeter
+	does not send a file, if filled in, JMeter automatically sends the request as
+	a multipart form request.</property>
+	<property name="Parameter Name" required="No (Yes if Filename filled in)">Name of the web request parameter.</property>
+	<property name="MIME Type" required="No (Yes if Filename filled in)">MIME type (for example, text/plain).</property>
+	<property name="Retrieve All Images and Java Applets" required="No">Tell JMeter to parse the HTML file
+and send HTTP/HTTPS requests for all images and Java applets referenced in the file.</property>
+</properties>
+
+<links>
+	<link href="test_plan.html#assertions">Assertion</link>
+	<link href="build-web-test-plan.html">Building a Web Test Plan</link>
+	<link href="build-adv-web-test-plan.html">Building an Advanced Web Test Plan</link>
+	<complink name="HTTP Authorization Manager"/>
+	<complink name="HTTP Cookie Manager"/>
+	<complink name="HTTP Header Manager"/>
+	<complink name="HTML Link Parser"/>
+	<complink name="HTTP Proxy Server"/>
+	<complink name="HTTP Request Defaults"/>
+	<link href="build-adv-web-test-plan.html#url_rewriting">HTTP Requests and Session ID's: URL Rewriting</link>
+</links>
+
+</component>
+
+<component name="JDBC Request" index="13.1.3" screenshot="../images/screenshots/gen-controller/jdbc-request.gif">
+
+<description><p>This sampler lets you send an JDBC Request (an SQL query) to a database.</p>
+<p>If you are going to send multiple requests to the same database, consider
+using one or more of the Defaults Configuration Elements:
+<complink name="JDBC Database Login Defaults"/>,
+<complink name="JDBC Database Connection Pool Defaults"/>,
+<complink name="JDBC SQL Query Defaults"/>.
+This way, you do not have to enter the same information for each JDBC Request
+controller.</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+	<property name="JDBC URL" required="Yes">URL of the database (for example,
+"jdbc:weblogic:oracle"). Refer to your database's JDBC documentation for the
+URL you should use.</property>
+	<property name="Driver Class" required="Yes">The database driver Java class (for example,
+"weblogic.jdbc.oci.Driver"). Refer to your database's JDBC documentation for
+the name of the JDBC driver class you should use.</property>
+	<property name="Username" required="Usually (database dependent)">FTP account username.</property>
+	<property name="Password" required="Usually (database dependent)">FTP account password.</property>
+	<property name="Number of Connections in Pool" required="Yes">Number of database connection
+instances to create and keep active. The maximum value depends on your database.
+Also, JMeter imposes a maximum of 100 connections.</property>
+	<property name="Max Usage For Each Connection" required="Yes">Maximum number of times JMeter
+uses a database connection instance before recycling it (destroying and creating
+a new instance).</property>
+	<property name="SQL Query String" required="Yes">SQL query (for example, "select * from t_customers").</property>
+</properties>
+
+<links>
+	<link href="test_plan.html#assertions">Assertion</link>
+	<link href="build-db-test-plan.html">Building a Database Test Plan</link>
+	<complink name="JDBC Database Login Defaults"/>
+	<complink name="JDBC Database Connection Pool Defaults"/>
+	<complink name="JDBC SQL Query Defaults"/>
+</links>
+
+</component>
+
+<component name="Java Request" index="13.1.4" screenshot="../images/screenshots/java_request.gif">
+
+<description><p>This sampler lets you control a java class that implements the
+JavaSamplerClient interface.  By writing your own implementation of this interface,
+you can use JMeter to harness multiple threads, input parameter control, and
+data collection.</p>
+<p>The pull-down menu provides the list of all such implementations found by
+JMeter in its classpath.  The parameters can then be specified in the
+table below - as defined by your implementation.  A simple example (SleepTest) is
+provided.</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this sampler
+	 that is shown in the tree.</property>
+	<property name="Classname" required="Yes">The specific implementation of
+	the JavaSamplerClient interface to be sampled.</property>
+	<property name="Send Parameters with Request" required="No">A list of
+	arguments that will be passed to the sampled class.  All arguments
+	are sent as Strings.</property>
+	</properties>
+
+</component>
+
+<component name="SOAP/XML-RPC Request" index="13.1.5" screenshot="../images/screenshots/soap_sampler.png">
+
+<description><p>This sampler lets you send a SOAP request to a webservice.  It can also be
+used to send XML-RPC over HTTP.  It creates an HTTP POST request, with the specified XML as the
+POST content.</p>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this sampler
+	 that is shown in the tree.</property>
+	<property name="URL" required="Yes">The URL to direct the SOAP request to.</property>
+	<property name="Soap/XML-RPC Data" required="No">The Soap XML message, or XML-RPC 
+	instructions.</property>
+	</properties>
+
+</component>
+
+</section>
+
+<section name="13.2 Logic Controllers" anchor="logic_controllers">
+
+<component index="13.2.1" name="Interleave Controller" screenshot="../images/screenshots/logic-controller/interleave-controller.gif">
+<description><p>If you add Generative or Logic Controllers to an Interleave Controller, JMeter will alternate among each of the
+other controllers for each loop iteration. </p>
+</description>
+<properties>
+	<property name="name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+</properties>
+
+<!--
+For example, if you
+add three HTTP Requests to an Interleave Controller and configure the Thread
+Group to loop, here is the sequence in which JMeter sends the requests:
+</p>
+<table border="1" cellspacing="0" cellpadding="4">
+<tr valign="top"><td>Loop Iteration</td><td>Description</td></tr>
+<tr valign="top"><td>1</td><td>JMeter sends the first HTTP Request.</td></tr>
+<tr valign="top"><td>2</td><td>JMeter sends the second HTTP Request.</td></tr>
+<tr valign="top"><td>3</td><td>JMeter sends the third HTTP Request.</td></tr>
+<tr valign="top"><td>4</td><td>Because there are no more requests in controller, JMeter start over and sends the first HTTP Request.</td></tr>
+<tr valign="top"><td>5</td><td>JMeter sends the second HTTP Request.</td></tr>
+<tr valign="top"><td>(and so on)</td><td>...</td></tr>
+</table>
+-->
+<example title="Simple Interleave Example" anchor="simple_interleave_example">
+
+<p><a href="../demos/InterleaveTestPlan.jmx">Download</a> this example (see Figure 1).  In this example,
+we configured the Thread Group to have two threads and a loop count of five, for a total of ten
+requests. See the table below for the sequence JMeter sends the HTTP Requests.</p>
+
+<figure image="../images/screenshots/logic-controller/interleave.gif">Figure 1 - Interleave Controller Example 1</figure>
+
+<table border="1" cellspacing="0" cellpadding="4">
+<tr valign="top"><td>Loop Iteration</td><td>Each JMeter Thread Sends These HTTP Requests</td></tr>
+<tr valign="top"><td>1</td><td>News Page</td></tr>
+<tr valign="top"><td>2</td><td>FAQ Page</td></tr>
+<tr valign="top"><td>3</td><td>Gump Page</td></tr>
+<tr valign="top"><td>4</td><td>Because there are no more requests in controller, JMeter start over and sends the first HTTP Request, which is the News Page.</td></tr>
+<tr valign="top"><td>5</td><td>FAQ Page</td></tr>
+</table>
+
+<p>Note, the File Reporter is configured to store the results in a file named
+"interleave-test.dat" in the current directory.</p>
+
+</example>
+
+<example title="Useful Interleave Example" anchor="useful_interleave_example">
+
+<p><a href="../demos/InterleaveTestPlan2.jmx">Download</a> another example (see Figure 2).  In this
+example, we configured the Thread Group
+to have a single thread and a loop count of eight.  Notice that the Test Plan has an outer Interleave Controller with
+two Interleave Controllers inside of it.</p>
+
+<figure image="../images/screenshots/logic-controller/interleave2.gif">
+	Figure 2 - Interleave Controller Example 2
+</figure>
+
+<p>The outer Interleave Controller alternates between the
+two inner ones.  Then, each inner Interleave Controller alternates between each of the HTTP Requests.  Each JMeter
+thread will send the requests in the following order: Home Page, Bug Page, CVS Page, and FAQ Page.
+Note, the File Reporter is configured to store the results in a file named "interleave-test2.dat" in the current directory.</p>
+</example>
+</component>
+
+<component index="13.2.2" name="Loop Controller" anchor="loop" screenshot="../images/screenshots/logic-controller/loop-controller.gif">
+<description><p>If you add Generative or Logic Controllers to a Loop Controller, JMeter will
+loop through them a certain number of times, in addition to the loop value you
+specified for the Thread Group.  For example, if you add one HTTP Request to a
+Loop Controller with a loop count of two, and configure the Thread Group loop
+count to three, JMeter will send a total of 2 * 3 = 6 HTTP Requests.
+</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+	<property name="Loop Count" required="Yes, unless &quot;Forever&quot; is checked">
+		The number of times the subelements of this controller will be iterated each time
+		through a test run.
+		<p><b>Special Case:</b> The Loop Controller embedded in the <a href="test_plan.html#thread_group">Thread Group</a>
+		element behaves slightly differently.  Unless set to forever, it stops the test after
+		the given number of iterations have been done.</p></property>
+</properties>
+
+<example title="Looping Example" anchor="loop_example">
+
+<p><a href="../demos/LoopTestPlan.jmx">Download</a> this example (see Figure 3).
+In this example, we created a Test Plan that sends a particular HTTP Request
+only once and sends another HTTP Request five times.</p>
+
+<figure image="../images/screenshots/logic-controller/loop-example.gif">Figure 3 - Loop Controller Example</figure>
+
+<p>We configured the Thread Group for a single thread and a loop count value of
+one. Instead of letting the Thread Group control the looping, we used a Loop
+Controller.  You can see that we added one HTTP Request to the Thread Group and
+another HTTP Request to a Loop Controller.  We configured the Loop Controller
+with a loop count value of five.</p>
+<p>JMeter will send the requests in the following order: Home Page, News Page,
+News Page, News Page, News Page, and News Page. Note, the File Reporter
+is configured to store the results in a file named "loop-test.dat" in the current directory.</p>
+
+</example>
+
+</component>
+
+<component index="13.2.4" name="Once Only Controller" anchor="once_only_controller"
+screenshot="../images/screenshots/logic-controller/once-only-controller.gif">
+<description>
+<p>The Once Only Logic Controller tells JMeter to process the controller(s) inside it only once, regardless of the loop
+count value you specify in the Thread Group or Loop Controller.</p>
+
+<p>For testing that requires a login, consider placing the login request in this controller since each thread only needs
+to login once to establish a session.</p>
+</description>
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+</properties>
+
+<example title="Once Only Example" anchor="once_only_example">
+<p><a href="../demos/OnceOnlyTestPlan.jmx">Download</a> this example (see Figure 4).
+In this example, we created a Test Plan that has two threads that send HTTP request.
+Each thread sends one request to the Home Page, followed by three requests to the Bug Page.
+Although we configured the Thread Group to iterate three times, each JMeter thread only
+sends one request to the Home Page because this request lives inside a Once Only Controller.</p>
+<figure image="../images/screenshots/logic-controller/once-only-example.gif">Figure 4. Once Only Controller Example</figure>
+<p>Each JMeter thread will send the requests in the following order: Home Page, Bug Page,
+Bug Page, Bug Page. Note, the File Reporter is configured to store the results in a file named "loop-test.dat" in the current directory.</p>
+
+</example>
+</component>
+
+<component index="13.2.5" name="Simple Controller" anchor="simple_controller" screenshot="../images/screenshots/logic-controller/simple-controller.gif">
+<description>
+<p>The Simple Logic Controller lets  you organize your Samplers and other
+Logic Controllers.  Unlike other Logic Controllers, this controller provides no functionality beyond that of a
+storage device.</p>
+</description>
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+</properties>
+
+<example title="Using the Simple Controller" anchor="simple_controller_example">
+<p><a href="../demos/SimpleTestPlan.jmx">Download</a> this example (see Figure 5).
+In this example, we created a Test Plan that sends two Ant HTTP requests and two
+Log4J HTTP requests.  We grouped the Ant and Log4J requests by placing them inside
+Simple Logic Controllers.  Remember, the Simple Logic Controller has no effect on how JMeter
+processes the controller(s) you add to it.  So, in this example, JMeter sends the requests in the
+following order: Ant Home Page, Ant News Page, Log4J Home Page, Log4J History Page.
+Note, the File Reporter
+is configured to store the results in a file named "simple-test.dat" in the current directory.</p>
+<figure image="../images/screenshots/logic-controller/simple-example.gif">Figure 5 Simple Controller Example</figure>
+
+</example>
+</component>
+
+<component index="13.2.6" name="Random Controller" screenshot="../images/screenshots/logic-controller/random-controller.gif">
+<description>
+<p>The Random Logic Controller acts similarly to the Interleave Controller, except that
+instead of going in order through its sub-controllers and samplers, it picks one
+at random at each pass.</p>
+<note>Interactions between multiple controllers can yield complex behavior.
+This is particularly true of the Random Controller.  Experiment before you assume
+what results any given interaction will give</note>
+</description>
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+</properties>
+
+</component>
+</section>
+
+<section name="13.3 Listeners" anchor="listeners">
+<component index="13.3.1" name="Mailer Visualizer" screenshot="../images/screenshots/mailer_vis.png">
+<description><p>The mailer visualizer can be set up to send email if a test run receives too many 
+failed responses from the server.</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
+	<property name="From" required="Yes">Email address to send messages from.</property>
+	<property name="Addressie(s)" required="Yes">Email address to send messages to.</property>
+	<property name="SMTP Host" required="No">IP address or host name of SMTP (email redirector)
+	server.</property>
+	<property name="Failure Subject" required="No">Email subject line for fail messages.</property>
+	<property name="Success Subject" required="No">Email subject line for success messages.</property>
+	<property name="Failure Limit" required="Yes">Once this number of failed responses are received, a failure
+	email is sent.</property>
+	<property name="Success Limit" required="Yes">Once this number of successful responses are
+	received <strong>after previously reaching the failure limit</strong>, a success email
+	is sent.  The mailer will thus only send out messages in a sequence of failed-succeeded-failed-succeeded, etc.</property>
+	<property name="Test Mail" required="No"></property>
+	<property name="Failures" required="No">A field that keeps a running total of number
+	of failures so far received.</property>
+</properties>
+</component>
+
+<component index="13.3.2" name="Graph Full Results" screenshot="">
+<description>No Description</description>
+</component>
+
+<component index="13.3.3" name="Graph Results" screenshot="../images/screenshots/graph_results.gif">
+<description><p>The Graph Results listener generates a simple graph that plots all sample times.  Along
+the bottom of the graph, the current sample (black), the current average of all samples(blue), the
+current standard deviation (red), and the current throughput rate (green) are displayed in milliseconds.</p>
+<p>The throughput number represents the actual number of requests/minute the server handled.  This calculation
+includes any delays you added to your test and JMeter's own internal processing time.  The advantage
+of doing the calculation like this is that this number represents something
+real - your server in fact handled that many requests per minute, and you can increase the number of threads
+and/or decrease the delays to discover your server's maximum throughput.  Whereas if you made calculations 
+that factored out delays and JMeter's processing, it would be unclear what you could conclude from that
+number.</p></description>
+</component>
+
+<component index="13.3.4" name="Spline Visualizer" screenshot="../images/screenshots/spline_visualizer.gif">
+<description><p>The Spline Visualizer provides a view of all sample times from the start
+of the test till the end, regardless of how many samples have been taken.  The spline
+has 10 points, each representing 10% of the samples, and connected using spline
+logic to show a single continuous line.</p></description>
+</component>
+
+<component index="13.3.5" name="Assertion Results" screenshot="../images/screenshots/assertion_results.gif">
+<description><p>The Assertion Results visualizer shows the URL of each sample taken (no time information
+is shown).  It also reports failures of any <a href="test_plan.html#assertions">Assertions</a> that
+are part of the test plan.</p></description>
+
+<links>
+	<complink name="Basic Assertion"/>
+</links>
+</component>
+
+<component index="13.3.6" name="View Result Tree" screenshot="../images/screenshots/view_results_tree.png">
+<description>The View Results Tree shows a tree of all sample responses, allowing you to view the
+response for any sample.  In addition to showing the response, you can see the time it took to get
+this response, and some response codes.</description>
+</component>
+
+<component index="13.3.7" name="Aggregate Report" screenshot="../images/screenshots/aggregate_report.png">
+<description>The aggregate report creates a table row for each differently named request in your test.  For each
+request, it totals the response information and provides request count, min, max, average, error rate, and an
+idealized throughput calculation.</description>
+</component>
+
+</section>
+
+<section name="13.4 Configuration Elements" anchor="config_elements">
+
+<component index="13.4.1" name="HTTP Authorization Manager" screenshot="../images/screenshots/http-config/http-auth-manager.gif">
+
+<description>
+<p>The Authorization Manager lets you specify one or more user logins for web pages that are
+restricted using Basic HTTP Authentication.  You see this type of authentication when you use
+your browser to access a restricted page, and your browser displays a login dialog box.  JMeter
+transmits the login information when it encounters this type of page.</p>
+
+<note>In the current release, all JMeter threads in a Thread Group use the same username/password
+for a given Base URL even if you create multiple users with the same Base URL in the authorization table.
+We plan to correct this in a future release.  As a workwaround, you can create multiple Thread Groups for your
+Test Plan, with each Thread Group having its own Authorization Manager.
+</note>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
+  <property name="Base URL" required="Yes">A partial or complete URL that matches one or more HTTP Request URLs.  As an example,
+say you specify a Base URL of "http://jakarta.apache.org/restricted/" with a username of "jmeter" and
+a password of "jmeter".  If you send an HTTP request to the URL
+"http://jakarta.apache.org/restricted/ant/myPage.html", the Authorization Manager sends the login
+information for the user named, "jmeter".</property>
+  <property name="Username" required="Yes">The username to authorize.</property>
+  <property name="Password" required="Yes">The password to authorize.</property>
+</properties>
+<b>Controls:</b>
+<ul>
+  <li>Add Button - Add an entry to the authorization table.</li>
+  <li>Delete Button - Delete the currently selected table entry.</li>
+  <li>Load Button - Load a previously saved authorization table and add the entries to the existing
+authorization table entries.</li>
+  <li>Save As Button - Save the current authorization table to a file.</li>
+</ul>
+
+<note>When you save the Test Plan, JMeter automatically saves all of the authorization
+table entries.</note>
+
+<example title="Authorization Example" anchor="authorization_example">
+
+<p><a href="../demos/AuthManagerTestPlan.jmx">Download</a> this example.  In this example, we created a Test Plan on a local server that sends three HTTP requests, two requiring a login and the
+other is open to everyone.  See figure 6 to see the makeup of our Test Plan.  On our server, we have a restricted
+directory named, "secret", which contains two files, "index.html" and "index2.html".  We created a login id named, "kevin",
+which has a password of "spot".  So, in our Authorization Manager, we created an entry for the restricted directory and
+a username and password (see figure 7).  The two HTTP requests named "SecretPage1" and "SecretPage2" make requests
+to "/secret/index1.html" and "/secret/index2.html".  The other HTTP request, named "NoSecretPage" makes a request to
+"/index.html".</p>
+
+<figure image="../images/screenshots/http-config/auth-manager-example1a.gif">Figure 6 - Test Plan</figure>
+<figure image="../images/screenshots/http-config/auth-manager-example1b.gif">Figure 7 - Authorization Manager Control Panel</figure>
+
+<p>When we run the Test Plan, JMeter looks in the Authorization table for the URL it is requesting.  If the Base URL matches
+the URL, then JMeter passes this information along with the request.</p>
+
+<note>You can download the Test Plan, but since it is built as a test for our local server, you will not
+be able to run it.  However, you can use it as a reference in constructing your own Test Plan.</note>
+</example>
+
+</component>
+
+<component index="13.4.2" name="HTTP Cookie Manager" screenshot="../images/screenshots/http-config/http-cookie-manager.gif">
+
+<description><p>The Cookie Manager element has two functions:<br/>
+First, it stores and sends cookies just like a web browser. If you have an HTTP Request and
+the response contains a cookie, the Cookie Manager automatically stores that cookie and will
+use it for all future requests to that particular web site.  Each JMeter thread has its own
+"cookie storage area".  So, if you are testing a web site that uses a cookie for storing
+session information, each JMeter thread will have its own session.</p>
+
+<p>Second, you can manually add a cookie to the Cookie Manager.  However, if you do this,
+the cookie will be shared by all JMeter threads.</p>
+</description>
+<properties>
+	<property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
+  <property name="Cookies Stored in the Cookie Manager" required="No (discouraged, unless you know what you're doing)">This
+  gives you the opportunity to use hardcoded cookies that will be used by all threads during the test execution.</property>
+  <property name="Add Button" required="N/A">Add an entry to the cookie table.</property>
+  <property name="Delete Button" required="N/A">Delete the currently selected table entry.</property>
+  <property name="Load Button" required="N/A">Load a previously saved cookie table and add the entries to the existing
+cookie table entries.</property>
+  <property name="Save As Button" required="N/A">Save the current cookie table to a file.</property>
+</properties>
+
+</component>
+
+<component index="13.4.3" name="HTTP Proxy Server" screenshot="../images/screenshots/proxy_control.png">
+
+<description><p>The Proxy Server allows JMeter to watch and record your actions while you browse your web application
+with your normal browser (such as Internet Explorer).  JMeter will create test sample objects and store them
+directly into your test plan as you go (so you can view samples interactively while you make them).</p>
+
+<p>To use the proxy server, <i>add</i> the HTTP Proxy Server element to the workbench.
+Select the WorkBench element in the tree, and right-click on this element to get the
+Add menu (Add --> Non-Test Elements --> HTTP Proxy Server).</p>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+	<property name="Port" required="Yes">The port that the Proxy Server listens to.  8080 is the default, but you can change it
+if that port is already in use on your machine.</property>
+	<property name="Patterns to Include" required="No">Regular expressions that are matched against the full URL that is sampled.  Allows filtering of requests that are recorded.  All requests pass through, but only
+	those that meet the requirements of the Include/Exclude fields are <i>recorded</i>.  If both Include and Exclude are
+	left empty, then everything is recorded (which can result in dozens of samples recorded for each page, as images, stylesheets,
+	etc are recorded).  <b>If there is at least one entry in the Include field, then only requests that match one or more Include patterns are
+	recorded</b>.</property>
+	<property name="Patterns to Exclude" required="No">Regular expressions that are matched against the URL that is sampled.
+	<b>Any requests that match one or more Exclude pattern are <i>not</i> recorded</b>.</property>
+	<property name="Clear Buttons" required="N/A">Remove all regular expressions from the list.</property>
+  <property name="Start Button" required="N/A">Start the proxy server.  JMeter writes the following message to the console once the proxy server
+has started up and is ready to take requests: "Proxy up and running!".</property>
+  <property name="Stop Button" required="N/A">Stop the proxy server.</property>
+  <property name="Restart Button" required="N/A">Stops and restarts the proxy server.  This is
+  useful when you change/add/delete an include/exclude filter expression.</property>
+</properties>
+
+<p>To add an entry to the Include or Exclude field, type the entry into the text field, and hit &quot;Enter&quot; when done.
+The text will be added to the List box to the right of the text field.  To clear the text field, hit the &quot;clear&quot;
+button.  Currently, there is no way to individually select items and delete them.</p>
+
+<p>These entries will be treated as Perl-type regular expressions.  They will be matched against the host name + the path of
+each browser request.  Thus, if the URL you are browsing is http://jakarta.apache.org/jmeter/index.html?username=xxxx,
+then the regular expression will be tested against the string: &quot;jakarta.apache.org/jmeter/index.html&quot;.  Thus,
+if you wanted to include all .html files, you're regular expression might look like: &quot;.*\.html&quot;.  Using a
+combination of includes and excludes, you should be able to record what you are interested in and skip what you are
+not.</p>
+
+<p>When you are ready to begin, hit &quot;start&quot;.</p>
+<note>You will need to edit the proxy settings of your browser to point at the
+appropriate server and port, where the server is the machine JMeter is running on, and
+the port # is from the Proxy Control Panel shown above.</note>
+
+<b>Where Do Samples Get Recorded?</b>
+<p>JMeter places the recorded samples in the Thread Group, or if you have a Simple Logic Controller,  JMeter places
+them there.  Also, if you have a HTTP Request Defaults element, then the recorded samples will have empty fields for
+the default values you specified.</p>
+<note>If you have more than one Simple Logic Controller, JMeter records the samples to each
+of your Simple Logic Controllers.  We plan to correct this in a future release.</note>
+
+<p>When you are done recording your test samples, stop the proxy server (hit the &quot;stop&quot; button).  Remember to reset
+your browser's proxy settings.  Now, you may want to sort and re-order the test script, add timers, listeners, a
+cookie manager, etc.</p>
+
+</component>
+
+<component index="13.4.4" name="HTTP Request Defaults"
+	screenshot="../images/screenshots/http-config/http-request-defaults.gif">
+<description><p>This element lets you set default values that your HTTP Request controllers use.  For example, if you are
+creating a Test Plan with 25 HTTP Request controllers and all of the requests are being sent to the same server,
+you could add a single HTTP Request Defaults element with the "Server Name or IP" field filled in.  Then, when
+you add the 25 HTTP Request controllers, leave the "Server Name or IP" field empty.  The controllers will inherit
+this field value from the HTTP Request Defaults element.</p>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this controller that is shown in the tree.</property>
+	<property name="Server" required="Yes">Domain name or IP address of the web server.</property>
+	<property name="Port" required="No (defaults to 80)">Port the web server is listening to.</property>
+	<property name="Protocol" required="Yes">HTTP or HTTPS.</property>
+	<property name="Method" required="Yes">HTTP GET or HTTP POST.</property>
+	<property name="Path" required="Yes">The path to resource (for example, /servlets/myServlet). If the
+resource requires query string parameters, add them below in the
+"Send Parameters With the Request" section.</property>
+	<property name="Send Parameters With the Request" required="No">The query string will
+	be generated from the list of parameters you provide.  Each parameter has a <i>name</i> and
+	<i>value</i>.  The query string will be generated in the correct fashion, depending on
+	the choice of "Method" you made (ie if you chose GET, the query string will be
+	appended to the URL, if POST, then it will be sent separately).  Also, if you are
+	sending a file using a multipart form, the query string will be created using the
+	multipart form specifications.</property>
+</properties>
+</component>
+
+<component index="13.4.5" name="FTP Request Defaults"
+		screenshot="../images/screenshots/ftp-config/ftp-request-defaults.gif">
+<description></description>
+</component>
+
+<component index="13.4.6" name="JDBC Database Connection Pool Defaults"
+		screenshot="../images/screenshots/jdbc-config/jdbc-db-conn-pool.gif">
+<description></description>
+</component>
+
+<component index="13.4.7" name="JDBC Database Login Defaults"
+		screenshot="../images/screenshots/jdbc-config/jdbc-db-login.gif">
+<description></description>
+</component>
+
+<component index="13.4.8" name="JDBC SQL Query Defaults"
+		screenshot="../images/screenshots/jdbc-config/jdbc-sql-query.gif">
+<description></description>
+</component>
+
+
+
+<component index="13.4.9" name="HTTP Header Manager" screenshot="../images/screenshots/http-config/http-header-manager.gif">
+<description><p>The Header Manager lets you add or override HTTP request headers.</p>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
+  <property name="Name (Header)" required="No (You should have at least one, however)">Name of the request header.
+	Two common request headers you may want to experiment with
+are "User-Agent" and "Referer".</property>
+  <property name="Value" required="No (You should have at least one, however)">Request header value.</property>
+  <property name="Add Button" required="N/A">Add an entry to the header table.</property>
+  <property name="Delete Button" required="N/A">Delete the currently selected table entry.</property>
+  <property name="Load Button" required="N/A">Load a previously saved header table and add the entries to the existing
+header table entries.</property>
+  <property name="Save As Button" required="N/A">Save the current header table to a file.</property>
+</properties>
+
+<example title="Header Manager example" anchor="header_manager_example">
+
+<p><a href="../demos/HeaderManagerTestPlan.jmx">Download</a> this example.  In this example, we created a Test Plan
+that tells JMeter to override the default "User-Agent" request header and use a particular Internet Explorer agent string
+instead. (see figures 9 and 10).</p>
+
+<figure image="../images/screenshots/http-config/header-manager-example1a.gif">Figure 9 - Test Plan</figure>
+<figure image="../images/screenshots/http-config/header-manager-example1b.gif">Figure 10 - Header Manager Control Panel</figure>
+</example>
+
+</component>
+
+</section>
+
+<section name="13.5 Assertions" anchor="assertions">
+
+<component index="13.5.1" name="Response Assertion" anchor="basic_assertion" screenshot="../images/screenshots/assertion/assertion.gif">
+
+<description><p>The response assertion control panel let's you add strings to be tested. These strings can
+be regular expressions. You can also choose whether the strings will be expected
+to match the entire response, or if the response is only expected to contain the
+strings. You can attach multiple assertions to any controller for additionaly flexibility.</p>
+</description>
+<properties>
+	<property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
+	<property name="Response Field to Test" required="Yes">Instructs JMeter to test
+		against either the Response Text from the server, or against the URL string that was sampled.</property>
+	<property name="Pattern Matching Rules" required="Yes">Indicates whether the text being tested
+	must CONTAIN or MATCH the test patterns.  NOT may also be selected to indicate the text
+	should NOT CONTAIN or NOT MATCH the test patterns.</property>
+	<property name="Patterns to Test" required="Yes">A list of regular expressions to
+	be tested.  Each pattern is tested separately.  There is no difference between setting up
+	one Assertion with multiple patterns and setting up multiple Assertions with one
+	pattern each (assuming the other options are the same).</property>
+</properties>
+
+<example title="Assertion Examples" anchor="assertion_examples">
+<figure image="../images/screenshots/assertion/example1a.gif">Figure 7 - Test Plan</figure>
+<figure image="../images/screenshots/assertion/example1b.gif">Figure 8 - Assertion Control Panel with Pattern</figure>
+<figure image="../images/screenshots/assertion/example1c-pass.gif">Figure 9 - Assertion Listener Results (Pass)</figure>
+<figure image="../images/screenshots/assertion/example1c-fail.gif">Figure 10 - Assertion Listener Results (Fail)</figure>
+</example>
+
+
+</component>
+
+<component index="13.5.2" name="Duration Assertion" screenshot="../images/screenshots/duration_assertion.png">
+<description><p>The Duration Assertion tests that each response was received within a given amount
+of time.  Any response that takes longer than the given number of milliseconds (specified by the
+user) is marked as a failed response.</p></description>
+
+<properties>
+<property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
+	<property name="Duration in Milliseconds" required="Yes">The maximum number of milliseconds
+	each response is allowed before being marked as failed.</property>
+	
+</properties>
+</component>
+
+</section>
+
+<section name="13.6 Timers" anchor="timers">
+
+<component index="13.6.1" name="Constant Timer" anchor="constant" screenshot="../images/screenshots/timers/constant_timer.gif">
+<description>
+<p>If you want to have each thread pause for the same amount of time between
+requests, use this timer.</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this timer that is shown in the tree.</property>
+	<property name="Thread Delay" required="Yes">Number of milliseconds to pause.</property>
+</properties>
+</component>
+
+<component index="13.6.2" name="Gaussian Random Timer" screenshot="../images/screenshots/timers/gauss_random_timer.gif">
+
+<description><p>This timer pauses each thread request for a random amount of time, with most
+of the time intervals ocurring near a particular value.  The total delay is the
+sum of the Gaussian distributed value (with mean 0.0 and standard deviation 1.0) times
+the deviation value you specify, and the offset value.</p></description>
+
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this timer that is shown in the tree</property>
+  <property name="Deviation" required="Yes">Deviation in milliseconds.</property>
+  <property name="Constant Delay Offset" required="Yes">Number of milliseconds to pause in addition
+to the random delay.</property>
+</properties>
+
+</component>
+
+<component index="13.6.3" name="Uniform Random Timer" screenshot="../images/screenshots/timers/uniform_random_timer.gif">
+
+<description><p>This timer pauses each thread request for a random amount of time, with
+each time interval having the same probability of occurring. The total delay
+is the sum of the random value and the offset value.</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name for this timer that is shown in the tree. </property>
+  <property name="Random Delay Maximum" required="Yes">Maxium random number of milliseconds to
+pause.</property>
+  <property name="Constant Delay Offset" required="Yes">Number of milliseconds to pause in addition
+to the random delay.</property>
+</properties>
+
+</component>
+</section>
+
+<section name="13.7 Modifiers" anchor="Modifiers">
+<component index="13.7.1" name="HTML Link Parser" anchor="html_link_parser">
+<description>
+<p>This modifier parses HTML response from the server and extracts
+links and forms.  A URL test sample that passes through this modifier will be examined to
+see if it &quot;matches&quot; any of the links or forms extracted
+from the immediately previous response.  It would then replace the values in the URL
+test sample with appropriate values from the matching link or form.  Perl-type regular
+expressions are used to find matches.</p>
+</description>
+
+<example title="Spidering Example" anchor="spider_example">
+<p>Consider a simple example: let's say you wanted JMeter to &quot;spider&quot; through your site,
+hitting link after link parsed from the HTML returned from your server (this is not
+actually the most useful thing to do, but it serves as a good example).  You would create
+a <complink name="Simple Controller"/>, and add the &quot;HTML Link Parser&quot; to it.  Then, create a
+HTTP Request, and set the domain to &quot;.*&quot;, and the path likewise. This will
+cause your test sample to match with any link found on the returned pages.  If you wanted to
+restrict the spidering to a particular domain, then change the domain value
+to the one you want.  Then, only links to that domain will be followed.
+</p>
+</example>
+
+<example title="Poll Example" anchor="poll_example">
+<p>A more useful example: given a web polling application, you might have a page with
+several poll options as radio buttons for the user to select.  Let's say the values
+of the poll options are very dynamic - maybe user generated.  If you wanted JMeter to
+test the poll, you could either create test samples with hardcoded values chosen, or you
+could let the HTML Link Parser parse the form, and insert a random poll option into
+your URL test sample.  To do this, follow the above example, except, when configuring
+your Web Test controller's URL options, be sure to choose &quot;POST&quot; as the
+method.  Put in hard-coded values for the domain, path, and any additional form parameters.
+Then, for the actual radio button parameter, put in the name (let's say it's called &quot;poll_choice&quot;),
+and then &quot;.*&quot; for the value of that parameter.  When the modifier examines
+this URL test sample, it will find that it &quot;matches&quot; the poll form (and
+it shouldn't match any other form, given that you've specified all the other aspects of
+the URL test sample), and it will replace your form parameters with the matching
+parameters from the form.  Since the regular expression &quot;.*&quot; will match with
+anything, the modifier will probably have a list of radio buttons to choose from.  It
+will choose at random, and replace the value in your URL test sample.  Each time through
+the test, a new random value will be chosen.</p>
+
+<figure image="../images/screenshots/modification.png">Figure 8 - Online Poll Example</figure>
+
+<note>One important thing to remember is that you must create a test sample immediately
+prior that will return an HTML page with the links and forms that are relevant to
+your dynamic test sample.</note>
+</example>
+
+</component>
+
+<component index="13.7.2" name="HTTP URL Re-writing Modifier" screenshot="../images/screenshots/url_rewriter.gif">
+<description><p>This modifier works similarly to the HTML Link Parser, except it has a specific purpose for which
+it is easier to use than the HTML Link Parser, and more efficient.  For web applications that
+use URL Re-writing to store session ids instead of cookies, this element can be attached at the
+ThreadGroup level, much like the <complink name="HTTP Cookie Manager"/>.  Simply give it the name
+of the session id parameter, and it will find it on the page and add the argument to every 
+request of that ThreadGroup.</p>
+<p>Alternatively, this modifier can be attached to select requests and it will modify only them.  
+Clever users will even determine that this modifier can be used to grab values that elude the 
+<complink name="HTML Link Parser"/>.</p>
+</description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name given to this element in the test tree.</property>
+	<property name="Session Argument Name" required="Yes">The name of the parameter to grab from 
+	previous response.  This modifier will find the parameter anywhere it exists on the page, and
+	grab the value assigned to it, whether it's in an HREF or a form.</property>
+	<property name="Path Extension" required="No">Some web apps rewrite URLs by appending
+	a semi-colon plus the session id parameter.  Check this box if that is so.</property>
+</properties>
+</component>
+
+<component index="13.7.3" name="HTML Parameter Mask" screenshot="../images/screenshots/parameter_mask.png">
+<description><p>The HTML Parameter Mask is used to generate unique values for HTML arguments.  By
+specifying the name of the parameter, a value prefix and suffix, and counter parameters, this
+modifier will generate values of the form "<code>name=prefixcountersuffix</code>".  Any HTTP
+Request that it modifies, it will replace any parameter with the same name or add the appropriate
+parameter to the requests list of arguments.</p>
+<note>The value of the argument in your HTTP Request must be a '*' in order for the HTML Parameter Mask
+Modifier to replace it.</note>
+<p>As an example, the username for a login script could be modified to send a series of values 
+such as:<br/>
+user_1<br/>
+user_2<br/>
+user_3<br/>
+user_4, etc.</p></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name given to this element in the test tree.</property>
+	<property name="Name (second appearing)" required="Yes">The name of the parameter to
+	modify or add to the HTTP Request.</property>
+	<property name="ID Prefix" required="No">A string value to prefix to every generated value.</property>
+	<property name="Lower Bound" required="Yes">A number value to start the counter at.</property>
+	<property name="Upper Bound" required="Yes">A number value to end the counter, at which point it restarts 
+	with the Lower Bound value.</property>
+	<property name="Increment" required="Yes">Value to increment the counter by each time through.</property>
+	<property name="ID Suffix" required="No">A string value to add as suffix to every generated vaue.</property>
+</properties>
+</component>
+
+<component index="13.7.4" name="HTML User Parameter Modifier" screenshot="../images/screenshots/user_param_modifier.gif">
+<description><p>The User Parameter Modifier uses an XML file get values for HTTP arguments.  Any
+HTTP Request that this modifier modifies will be checked for the existence of the specified
+arguments.  If found, the values for those arguments will be replaced by the values found in the
+xml file.  The XML file can have multiple sets of the same values.  This modifier will iterate 
+through these values in a round-robin style, thus each request will get a different set of values 
+until the last set of values is reached, at which point it will begin again at the first set.</p>
+<note>If the number of value sets is equal to the number of threads in your test, then it will work
+out that each thread will get the same set of values each time, which will be a different set from
+any other thread</note></description>
+
+<properties>
+	<property name="Name" required="No">Descriptive name given to this element in the test tree.</property>
+	<property name="File Name" required="Yes">Name of the XML file in JMeter's /bin directory
+	that holds the value sets.</property>
+</properties>
+</component>
+
+</section>
+
+<section name="13.8 Miscellaneous Features" anchor="Miscellaneous_Features">
+
+<component index="13.8.1" name="SSL Manager" screenshot="">
+<p>
+  The SSL Manager is a way to select a client certificate so that you can test
+  applications that use Public Key Infrastructure (PKI).  In order to use it,
+  you must have JSSE 1.0.2 installed.  Unfortunately, there is no standard method
+  for controling who a client is--and that won't be introduced until JDK 1.4 is
+  officially available.  The SSL Manager should still work with JDK 1.4, so this
+  is the best solution we could come up with.
+</p>
+
+<b>Choosing a Client Certificate</b>
+<p>
+  You may either use a Java Key Store (JKS) format key store, or a Public Key
+  Certificate Standard #12 (PKCS12) file for your client certificates.  There
+  is a bug in the JSSE libraries that require you to have at least a six character
+  password on your key (at least for the keytool utility that comes with your
+  JDK).
+</p>
+<p>
+  To select the client certificate, choose Options-&gt;SSL Manager from the menu bar.
+  You will be presented with a file finder that looks for PKCS12 files by default.
+  Your PKCS12 file must have the extension '.p12' for SSL Manager to recognize it
+  as a PKCS12 file.  Any other file will be treated like an average JKS key store.
+  If JSSE is correctly installed, you will be prompted for the password.  The text
+  box does not hide the characters you type at this point--so make sure no one is
+  looking over your shoulder.  The current implementation assumes that the password
+  for the keystore is also the password for the private key of the client you want
+  to authenticate as.
+</p>
+<p>
+  The next time you run your test, the SSL Manager will examine your key store to
+  see if it has more than one key available to it.  If there is only one key, SSL
+  Manager will select it for you.  If there is more than one key, you will be prompted
+  to select the alias you wish to authenticate as.  If SSL Manager cannot detect
+  any keys in your keystore, it will give you a text box for the off chance you know
+  something it doesn't.  Keep in mind that for the first run, you will be prompted
+  once per thread.  Try to use only one thread for the first run to ensure everything
+  is working properly.
+</p>
+<b>Things to Look Out For</b>
+<p>
+  You must have your Certificate Authority (CA) certificate installed properly
+  if it is not signed by one of the five CA certificates that ships with your
+  JDK.  One method to install it is to import your CA certificate into a JKS
+  file, and name the JKS file "jssecacerts".  Place the file in your JRE's
+  lib/security folder.  This file will be read before the "cacerts" file in
+  the same directory.  Keep in mind that as long as the "jssecacerts" file
+  exists, the certificates installed in "cacerts" will not be used.  This may
+  cause problems for you.  If you don't mind importing your CA certificate into
+  the "cacerts" file, then you can authenticate against all of the CA certificates
+  installed.
+</p>
+</component>
+</section>
+
+<section name="13.9 Functions" anchor="functions">
+<p>Please read the <a href="functions.html">general description</a> of how functions work.  Here is given only the details of
+specific functions.</p>
+
+<component index="13.9.1" name="Regex Function">
+<description><p>The Regex Function is used to parse the previous response using any regular 
+expression (provided by user).  The function returns the template string with variable values filled
+in.</p></description>
+
+<properties>
+	<property name="First arguement" required="Yes">The first argument is the regular expression
+	to be applied to the response data.  It will grab all matches.  Any parts of this expression
+	that you wish to use in your template string, be sure to surround in parentheses.  Example:
+	&amp;lt;a href="(.*)"&amp;gt;.  This will grab the value of the link and store it as the first group (there is
+	only 1 group).  Another example: &amp;lt;input type="hidden" name="(.*)" value="(.*)"&amp;gt;.  This will
+	grab the name as the first group, and the value as the second group.  These values can be used
+	in your template string</property>
+	<property name="Second argument" required="Yes">This is the template string that will replace
+	the function at run-time.  To refer to a group captured in the regular expression, use the syntax:
+	$[group_number]$.  Ie: $1$, or $2$.  Your template can be any string.</property>
+	<property name="Third argument" required="Yes">The third argument tells JMeter which match
+	to use.  Your regular expression might find numerous matches.  You have four choices:
+		<ul><li>An integer - Tells JMeter to use that match.  '1' for the first found match, '2' for the 
+		second, and so on</li>
+		<li>RAND - Tells JMeter to choose a match at random.</li>
+		<li>ALL - Tells JMeter to use all matches, and create a template string for each one and then
+		append them all together.  This option is little used.</li>
+		<li>A float number between 0 and 1 - tells JMeter to find the Xth match using the formula:
+		(number_of_matches_found * float_number) rounded to nearest integer.</li>
+		</ul></property>
+	<property name="Fourth argument" required="No">If 'ALL' was selected for the above argument
+	value, then this argument will be inserted between each appended copy of the template value.</property>
+	<property name="Fifth argument" required="No">Default value returned if no match is found</property>
+</properties>
+</component>
+
+<component index="13.9.2" name="Counter Function">
+<description><p>The counter generates a new number each time it is called, starting with 1
+and incrementing by +1 each time.  The counter can be configured to keep each simulated user's values
+separate, or to use the same counter for all user.  If each user's values is incremented separately,
+that is like counting the number of iterations through the test plan.  A global counter is like
+counting how many times that request was run.</p></description>
+
+<properties>
+	<property name="First argument" required="Yes">TRUE if you wish each simulated user's counter 
+	to be kept independent and separate from the other users.  FALSE for a global counter.</property>
+</properties>
+</component>
+
+<component index="13.9.3" name="Thread Number Function">
+<description><p>The thread number function simply returns the number of the thread currently 
+being executed.  These numbers are independent of ThreadGroup, meaning thread #1 in one threadgroup
+is indistinguishable from thread #1 in another threadgroup, from the point of view of this function.</p>
+
+<p>There are no arguments for this function.</p>
+</description>
+</component>
+
+</section>
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/functions.xml b/jakarta-jmeter/xdocs/usermanual/functions.xml
new file mode 100644
index 0000000..e919789
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/functions.xml
@@ -0,0 +1,76 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Introduction</title>
+</properties>
+
+<body>
+
+<section name="14. Functions" anchor="functions">
+<p>
+JMeter functions are special values that can populate fields of any Sampler or other configuration
+element in a test tree.  A function looks like this:</p>
+
+<p><code>${__functionName(var1,var2,var3)}</code></p>
+
+<p>Where "__functionName" matches the name of an existing built-in or user-defined function.<br/>
+Parentheses surround the parameters sent to the function.  The actual parameters vary from function 
+to function.  Functions that require no parameters can leave off the parentheses.  The function itself
+is wrapped in ${}.</p>
+
+
+<subsection name="14.1 What can functions do" anchor="what_can_do">
+<p>There are two kinds of functions: user-defined static values, and built-in functions.<br/>
+User-defined static values allows the user to define variables to be replaced with their static value when
+a test tree is compiled and submitted to be run.  This replacement happens once at the beginning of the test
+run.  This could be used to replace the DOMAIN field of all HTTP requests, for example - making it a simple 
+matter to change a test to target a different server with the same test.
+</p>
+<p>This type of replacement is possible without functions, but was less convenient and less intuitive.
+It required users to create default config elements that would fill in blank values of Samplers.  User-defined
+functions allows one to replace only part of any given value, not just filling in blank values.</p>
+<p>
+With built-in functions users can compute new values at run-time based on previous response data, which
+thread the function is in, the time, and many other sources.  These values are generated fresh for every
+request throughout the course of the test. </p>
+</subsection>
+
+<subsection name="14.2 Where can functions be used?" anchor="where">
+<p>A user-defined function can be written into any field of any test component.  Some fields do not allow random strings 
+because they are expecting numbers, and thus will not accept a function.  However, most fields will allow
+functions.</p>
+<p>Built-in functions can be written into any field of non-controller test components. This includes
+Samplers, Timers, Listeners, Modifiers, Assertions, and Config Elements.</p>
+</subsection>
+
+<subsection name="14.3 Writing the function string" anchor="how">
+<p>User-defined functions take the form: <code>${varName}</code>.  In the TestPlan tree element, a two-column table
+of user-defined values is kept, matching up variable names with static values.  Referencing the
+variable in a test element is done by bracketing the variable name with '${' and '}'.</p>
+<p>Built-in functions are written in the same manner, but by convention, the names of built-in
+parameters begin with "__" to avoid conflict with user value names<sup>*</sup>.  Some functions take arguments to
+configure them, and these go in parentheses, comma-delimited.  If the function takes no arguments, the parentheses can
+be left out.  A further complication for argument values that themselves contain commas is that the value
+should be encoded the way HTTP parameters are encoded.  JMeter provides a tool to help you construct
+function calls for various built-in functions, which you can then copy-paste.  If your argument values
+do not contain commas, encoding is not required.</p>
+<note><sup>*</sup>If you define a user-defined static variable with the same name as a built-in function, your static
+variable will override the built-in function.</note>
+</subsection>
+
+<subsection name="14.4 The Function Helper Dialog" anchor="function_helper">
+<p>The Function Helper dialog is available from JMeter's Tools menu.</p>
+<figure image="../images/screenshots/function_helper_dialog.png">Function Helper Dialog</figure>
+<p>Using the Function Helper, you can select a function from the pull down, and assign
+values for its arguments.  The left column in the table provides a brief description of the
+argument, and the right column is where you write in the value for that argument.  Different
+functions take different arguments.</p>
+<p>Once you have done this, click the "generate" button, and the appropriate string is generated
+for you to copy-paste into your test plan wherever you like.</p>
+</subsection>
+
+</section>
+
+</body>
+</document>
\ No newline at end of file
diff --git a/jakarta-jmeter/xdocs/usermanual/get-started.xml b/jakarta-jmeter/xdocs/usermanual/get-started.xml
new file mode 100644
index 0000000..f6814e0
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/get-started.xml
@@ -0,0 +1,178 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Getting Started</title>
+</properties>
+
+<body>
+
+<section name="2. Getting Started" anchor="get_started">
+<p>The easiest way to begin using JMeter is to first
+<a href="http://jakarta.apache.org/builds/jakarta-jmeter/release/">download the latest production release</a> and install it.
+The release contains all of the files you need to build and run Web, FTP, JDBC, and JNDI tests.  If you want to perform JDBC testing,
+then you will, of course, need the appropriate JDBC driver from your vendor.  JMeter does not come with
+any JDBC drivers.</p>
+<p>Next, start JMeter and go through the <a href="build-test-plan.html">Building a Test Plan</a> section
+of the User Guide to familiarize yourself with JMeter basics (for example, adding and removing elements).</p>
+<p>Finally, go through the appropriate section on how to build a specific type of Test Plan.
+For example, if you are interested in testing a Web application, then see the section
+<a href="build-web-test-plan.html">Building a Web Test Plan</a>.
+The other specific Test Plan sections are for <a href="build-db-test-plan.html">JDBC</a>,
+<a href="build-ftp-test-plan.html">FTP</a>, and <a href="build-jndi-test-plan.html">JNDI</a>.</p>
+<p>Once you are comfortable with building and running JMeter Test Plans, you can look into the
+various configuration elements (timers, listeners, assertions, and others) which give you more control
+over your Test Plans.</p>
+</section>
+
+<section name="2.1 Requirements" anchor="requirements">
+<p>JMeter requires your computing environment meets some minimum requirements.</p>
+
+<subsection name="2.1.1 Java Version" anchor="java_ver">
+<p>JMeter requires a fully compliant JDK1.2 (or higher) environment. Because JMeter uses only
+standard Java APIs (java.*), please do not file bug reports if your JRE fails to run
+JMeter because of JRE implementation issues.</p>
+<note>JDK1.4.1Beta appears to be buggy, and there are some GUI elements that won't work correctly in this JVM.</note>
+</subsection>
+
+<subsection name="2.1.2 Operating Systems" anchor="os">
+<p>JMeter has been tested and works under Unix (Solaris, Linux, etc) and Windows (98,
+NT, 2000).  JMeter is a 100% Java application and should run correctly on any system
+that has a compliant Java implementation.</p>
+</subsection>
+</section>
+
+<section name="2.2 Optional" anchor="optional">
+<p>If you plan on doing JMeter development or want to use Sun's Java Standard Extension packages, then you will need one or more optional packages listed below.</p>
+
+
+<subsection name="2.2.1 Java Compiler" anchor="opt_compiler">
+<p>If you want to build the JMeter source or develop JMeter plugins, then you will need a fully compliant JDK1.2 or higher compiler.</p>
+</subsection>
+
+<subsection name="2.2.2 SAX XML Parser" anchor="opt_sax">
+<p>JMeter comes with Apache's <a href="http://xml.apache.org/">Xerces XML parser</a>. You have the option of telling JMeter
+to use a different XML parser. To do so, include the classes for the third-party parser in JMeter's <a href="#classpath">classpath</a>,
+and update the <a href="#configuring_jmeter">jmeter.properties</a> file with the full classname of the parser
+implementation.</p>
+</subsection>
+
+<subsection name="2.2.3 Email Support" anchor="opt_email">
+<p>JMeter has limited Email capabilities (it can send email based on test results).
+To enable Email support, add Sun's JavaMail packages to JMeter's <a href="#classpath">classpath</a>.</p>
+</subsection>
+
+<subsection name="2.2.4 SSL Encryption" anchor="opt_ssl">
+<p>To test a web server using SSL encryption (HTTPS), JMeter requires that an
+implementation of SSL be provided (such as Sun's <a href="http://java.sun.com/products/jsse/index.html">Java Secure Sockets Extension -- JSSE</a>).
+Include the necessary encryption packages in JMeter's <a href="#classpath">classpath</a>.  Also, update <a href="#configuring_jmeter">jmeter.properties</a>
+by registering the SSL Provider.</p>
+<p>There is also the <complink name="SSL Manager"/>, for greater control of certs.</p>
+<p>Note: if you are running JDK1.4, then you do not have to download JSSE because Sun integrated it into JDK1.4 as a standard library.</p>
+</subsection>
+
+<subsection name="2.2.5 JDBC Driver" anchor="opt_jdbc">
+<p>You will need to add your database vendor's JDBC driver to the <a href="#classpath">classpath</a> if you want to do JDBC testing.</p>
+</subsection>
+</section>
+
+<section name="2.3 Installation" anchor="install">
+<p>Installing JMeter is a snap.  Specifics depend on which release file you
+downloaded.</p>
+
+
+<subsection name="2.3.1 Downloading the Latest Release" anchor="download_release">
+<p>We recommend that most users run the <a href="http://jakarta.apache.org/builds/jakarta-jmeter/release/">latest release</a>.</p>
+<p>To install a release build, simply unzip the zip/tar file into the directory
+where you want JMeter to be installed.  Provided that you have a JDK correctly installed
+and the JAVA_HOME environment variable set, there is nothing more for you to do.</p>
+</subsection>
+
+<subsection name="2.3.2 Downloading Nightly Builds" anchor="download_nightly">
+<p>If you do not mind working with beta-quality software, then you can download and run the <a href="http://jakarta.apache.org/builds/jakarta-jmeter/nightly">latest nightly build</a>.</p>
+<p>To install a nightly build, unzip the zip/tar file into the directory where you want JMeter
+to be installed.  Then, open a shell or command prompt and change to JMeter's top-level directory.
+Next, type "build install".  Provided that you have a JDK correctly installed
+and the JAVA_HOME environment variable set, JMeter should be installed successfully.</p>
+</subsection>
+</section>
+
+<section name="2.4 Running JMeter" anchor="running">
+<p>To run JMeter, run the jmeter.bat (for Windows) or jmeter (for Unix) file.</p>
+
+<subsection name="2.4.1 JMeter's Classpath" anchor="classpath">
+<p>JMeter automatically finds classes from jars in its /lib and /lib/ext directories.  
+If you want to add other JAR files to JMeter's classpath, then
+you must copy them to JMeter's "lib" directory.  If you have developed new JMeter specific components,
+then you should jar them and copy the jar into JMeter's /lib/ext directory.  JMeter will
+automatically find JMeter components in any jars found here.</p>
+</subsection>
+
+<subsection name="2.4.2 Using a Proxy Server" anchor="proxy_server">
+<p>If you are testing from behind a firewall/proxy server, you may need to provide JMeter with
+the firewall/proxy server hostname and port number.  To do so, run the jmeter.bat/jmeter file
+from a command line with the following parameters:</p>
+<p>-H [proxy server hostname or ip address]<br/>
+-P [proxy server port]<br/>
+-u [username for proxy authentication - if required]<br/>
+-a [password for proxy authentication - if required]</p>
+<p><b>Example</b>: jmeter -H my.proxy.server -P 8000 -u username -a password</p>
+<p>Alternatively, you can use --proxyHost, --proxyPort, --username, and --password</p>
+</subsection>
+
+<subsection name="2.4.3 Non-GUI Mode" anchor="non_gui">
+<p>For non-interactive testing, you may choose to run JMeter without the GUI. To do so, use
+the following command options</p>
+<p>-n This specifies JMeter is to run in non-gui mode</p>
+<p>-t [name of JMX file that contains the Test Plan].</p>
+<p>-l [name of JTL file to log sample results to.</p>
+<p>The script also lets you specify the optional firewall/proxy server information:</p>
+<p>-H [proxy server hostname or ip address]<br/>
+-P [proxy server port]</p>
+<p><b>Example</b>: jmeter -n -t my_test.jmx -l log.jtl -H my.proxy.server -P 8000</p>
+</subsection>
+
+<subsection name="2.4.4 Server Mode" anchor="server">
+<p>For <a href="remote-test.html">distributed testing</a>, run JMeter in server mode, and then control each server from the GUI.
+  
+<note>You must first run <b>rmiregistry</b> from your JDK installation with the ApacheJMeter_core.jar added to your
+system classpath. ApacheJMeter_core.jar resides in JMeter's /lib/ext directory.</note>
+
+Then, run JMeter, using the -s option:</p>
+<p>-s This specifies JMeter is to run as a server</p>
+<p>The script also lets you specify the optional firewall/proxy server information:</p>
+<p>-H [proxy server hostname or ip address]<br/>
+-P [proxy server port]</p>
+<p><b>Example</b>: jmeter -s -H my.proxy.server -P 8000</p>
+</subsection>
+</section>
+
+<section name="2.5 Configuring JMeter" anchor="configuring_jmeter">
+<p>If you wish to modify the properties with which JMeter runs you need to
+  either modify the jmeter.properties inside of the /bin directory or create
+  your own copy of the jmeter.properties and specify it in the command line
+  (jmeter [properties file]).
+  </p>
+  <properties>
+	<property name="ssl.provider">You must specify the class for your SSL
+	implementation.  If you are using the JSSE from sun, then it is:<br/>
+	com.sun.net.ssl.internal.ssl.Provider.</property>
+	<property name="xml.parser">You can specify an implementation as your XML
+	parser.  The default value is: org.apache.xerces.parsers.SAXParser</property>
+  <property name="user.dir">The directory JMeter will first go to for saving and
+	loading test scripts.</property>
+  <property name="remote_hosts">Comma-delimited list of remote JMeter hosts.
+	If you are running JMeter in a distributed environment, list the machines where
+  you have JMeter remote servers running.  This will allow you to control those
+	servers from this machine's GUI</property>
+  <property name="not_in_menu">A list of components you do not want to see in
+	JMeter's menus.  As JMeter has more and more components added, you may wish to
+  customize your JMeter to show only those components you are interested in.
+  You may list their classname or their class label (the string that appears
+  in JMeter's UI) here, and they will no longer appear in the menu's.</property>
+  </properties>
+</section>
+
+</body>
+</document>
+
diff --git a/jakarta-jmeter/xdocs/usermanual/glossary.xml b/jakarta-jmeter/xdocs/usermanual/glossary.xml
new file mode 100644
index 0000000..8c58630
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/glossary.xml
@@ -0,0 +1,14 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Glossary</title>
+</properties>
+
+<body>
+
+<section name="15. Glossary" anchor="glossary">
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/index.xml b/jakarta-jmeter/xdocs/usermanual/index.xml
new file mode 100644
index 0000000..48e26d3
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/index.xml
@@ -0,0 +1,116 @@
+<?xml version="1.0"?>
+<document>
+<properties>
+<title>User's Manual</title>
+</properties>
+
+<body>
+<section name="User's Manual">
+
+<ul>
+  <li><a href="intro.html">1. Introduction</a></li>
+  <ul>
+	 <li><a href="intro.html#history">1.1 History</a></li>
+	 <li><a href="intro.html#future">1.2 The Future</a></li>
+  </ul>
+  <li><a href="get-started.html">2. Getting Started</a></li>
+  <ul>
+	 <li><a href="get-started.html#requirements">2.1 Requirements</a></li>
+	 <ul>
+		<li><a href="get-started.html#java_versions">2.1.1 Java Version</a></li>
+		<li><a href="get-started.html#os">2.1.2 Operating Systems</a></li>
+	 </ul>
+	 <li><a href="get-started.html#optional">2.2 Optional</a></li>
+	 <ul>
+		<li><a href="get-started.html#opt_compiler">2.2.1 Java Compiler</a></li>
+		<li><a href="get-started.html#opt_sax">2.2.2 SAX XML Parser</a></li>
+		<li><a href="get-started.html#opt_email">2.2.3 Email Support</a></li>
+		<li><a href="get-started.html#opt_ssl">2.2.4 SSL Encryption</a></li>
+		<li><a href="get-started.html#opt_jdbc">2.2.5 JDBC Driver</a></li>
+	 </ul>
+	 <li><a href="get-started.html#install">2.3 Installation</a></li>
+	 <ul>
+		<li><a href="get-started.html#download_release">2.3.1 Downloading the Latest Release</a></li>
+		<li><a href="get-started.html#download_nightly">2.3.2 Downloading Nightly Builds</a></li>
+	 </ul>
+	 <li><a href="get-started.html#running">2.4 Running JMeter</a></li>
+	 <ul>
+		<li><a href="get-started.html#classpath">2.4.1 JMeter's Classpath</a></li>
+		<li><a href="get-started.html#proxy_server">2.4.2 Using a Proxy Server</a></li>
+		<li><a href="get-started.html#non_gui">2.4.3 Non-GUI Mode</a></li>
+		<li><a href="get-started.html#server">2.4.4 Distributed Mode</a></li>
+	 </ul>
+	 <li><a href="get-started.html#configuring_jmeter">2.5 Configuring JMeter</a></li>
+  </ul>
+  <li><a href="build-test-plan.html">3. Building a Test Plan</a></li>
+  <ul>
+	 <li><a href="build-test-plan.html#add_remove">3.1 Adding and Removing Elements</a></li>
+	 <li><a href="build-test-plan.html#load_save">3.2 Loading and Saving Elements</a></li>
+	 <li><a href="build-test-plan.html#config_element">3.3 Configuring Tree Elements</a></li>
+	 <li><a href="build-test-plan.html#run">3.3 Running a Test Plan</a></li>
+  </ul>
+  <li><a href="test_plan.html">4. Elements of a Test Plan</a></li>
+  <ul>
+	 <li><a href="test_plan.html#thread_group">4.1 Thread Group</a></li>
+	 <li><a href="test_plan.html#controllers">4.2 Controllers</a></li>
+	 <ul>
+		<li><a href="test_plan.html#samplers">4.2.1 Samplers</a></li>
+		<li><a href="test_plan.html#logic_controller">4.2.2 Logic Controllers</a></li>
+	 </ul>
+	 <li><a href="test_plan.html#listeners">4.3 Listeners</a></li>
+	 <li><a href="test_plan.html#timers">4.4 Timers</a></li>
+	 <li><a href="test_plan.html#assertions">4.5 Assertions</a></li>
+	 <li><a href="test_plan.html#config_elements">4.6 Configuration Elements</a></li>
+	</ul>
+  <li><a href="build-web-test-plan.html">5. Building a Web Test Plan</a></li>
+	 <ul>
+		<li><a href="build-web-test-plan.html#adding_users">5.1 Adding Users</a></li>
+		<li><a href="build-web-test-plan.html#adding_defaults">5.2 Adding Default HTTP Request Properties</a></li>
+		<li><a href="build-web-test-plan.html#adding_cookie_support">5.3 Adding Cookie Support</a></li>
+		<li><a href="build-web-test-plan.html#adding_requests">5.4 Adding HTTP Requests</a></li>
+		<li><a href="build-web-test-plan.html#adding_listener">5.5 Adding a Listener to View/Store the Test Results</a></li>
+		<li><a href="build-web-test-plan.html#saving">5.6 Saving the Test Plan</a></li>
+		<li><a href="build-web-test-plan.html#running">5.7 Running the Test Plan</a></li>
+	 </ul>
+  <li><a href="build-adv-web-test-plan.html">6. Building an Advanced Web Test Plan</a></li>
+	 <ul>
+		<li><a href="build-adv-web-test-plan.html#session_url_rewriting">6.1 Handling User Sessions With URL Rewriting</a></li>
+		<li><a href="build-adv-web-test-plan.html#header_manager">6.2 Using a Header Manager</a></li>
+	 </ul>
+  <li><a href="build-db-test-plan.html">7. Building a Database Test Plan</a></li>
+	 <ul>
+		<li><a href="build-db-test-plan.html#adding_users">7.1 Adding Users</a></li>
+		<li><a href="build-db-test-plan.html#adding_requests">7.2 Adding JDBC Requests</a></li>
+		<li><a href="build-db-test-plan.html#adding_listener">7.3 Adding a Listener to View/Store the Test Results</a></li>
+		<li><a href="build-db-test-plan.html#saving">7.4 Saving the Test Plan</a></li>
+		<li><a href="build-db-test-plan.html#running">7.5 Running the Test Plan</a></li>
+	 </ul>
+  <li><a href="build-ftp-test-plan.html">8. Building an FTP Test Plan</a></li>
+	 <ul>
+		<li><a href="build-ftp-test-plan.html#adding_users">8.1 Adding Users</a></li>
+		<li><a href="build-ftp-test-plan.html#adding_defaults">8.2 Adding Default FTP Request Properties</a></li>
+		<li><a href="build-ftp-test-plan.html#adding_requests">8.3 Adding FTP Requests</a></li>
+		<li><a href="build-ftp-test-plan.html#adding_listener">8.4 Adding a Listener to View/Store the Test Results</a></li>
+		<li><a href="build-ftp-test-plan.html#saving">8.5 Saving the Test Plan</a></li>
+		<li><a href="build-ftp-test-plan.html#running">8.6 Running the Test Plan</a></li>
+	 </ul>
+  <li><a href="build-jndi-test-plan.html">9. Building a JNDI Test Plan</a></li>
+  <li><a href="remote-test.html">10. Remote Testing</a></li>
+  <li><a href="best-practices.html">11. Best Practices</a></li>
+  <ul>
+	 <li><a href="best-practices.html#limit_threads">11.1 [ALL] Limit the Number of Threads</a></li>
+	 <li><a href="best-practices.html#put_cookie_manager">11.2 [HTTP] Where to Put the Cookie Manager</a></li>
+	 <li><a href="best-practices.html#put_auth_manager">11.3 [HTTP] Where to Put the Authorization Manager</a></li>
+	 <li><a href="best-practices.html#proxy_server">11.4 Using the Proxy Server to record test scripts</a></li>
+  </ul>
+  <li><a href="boss.html">12. Help! My boss wants me to load test our web app!</a></li>
+
+  <li><a href="component_reference.html">13. Component Reference</a></li>
+  <li><a href="functions.html">14. Functions</a></li>
+  <li><a href="glossary.html">15. Glossary</a></li>
+</ul>
+
+</section>
+</body>
+</document>
+
diff --git a/jakarta-jmeter/xdocs/usermanual/intro.xml b/jakarta-jmeter/xdocs/usermanual/intro.xml
new file mode 100644
index 0000000..2b01a6f
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/intro.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Introduction</title>
+</properties>
+
+<body>
+
+<section name="1. Introduction" anchor="intro">
+<p>
+<b>Apache JMeter</b> is a 100% pure Java desktop application designed
+to load test client/server software
+(such as a <a href="build-web-test-plan.html">web application</a>).  It may be used
+to test performance both on static and dynamic
+resources such as static files, Java Servlets, CGI scripts, Java objects, <a href="build-db-test-plan.html">databases</a>,
+<a href="build-ftp-test-plan.html">FTP servers</a>, and more. JMeter can be used to simulate a heavy
+load on a server, network or object to test its strength or to analyze
+overall performance under different load types.</p>
+<p>
+Additionally, JMeter can help you regression test your application by letting you create
+test scripts with <a href="test_plan.html#assertions">assertions</a> to validate that your application is returning the
+results you expect.  For maximum flexibility, JMeter lets you create these assertions using
+regular expressions.</p>
+
+
+<subsection name="1.1 History" anchor="history">
+<p>Stefano Mazzocchi of the Apache Software Foundation was the original developer of JMeter.
+He wrote it primarily to test the performance of Apache JServ (a project that has
+since been replaced by the Apache Tomcat project).  We redesigned JMeter to enhance the GUI
+and to add functional-testing capabilities.
+</p>
+</subsection>
+
+<subsection name="1.2 The Future" anchor="future">
+<p>We hope to see JMeter's capabilities rapidly expand as developers take advantage of its
+pluggable architecture.  The primary goal of further development is to make JMeter the most
+useful regression testing tool as possible, without compromising JMeter's load-testing
+capabilities.</p>
+</subsection>
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/remote-test.xml b/jakarta-jmeter/xdocs/usermanual/remote-test.xml
new file mode 100644
index 0000000..3b09fdd
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/remote-test.xml
@@ -0,0 +1,60 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Remote Testing</title>
+</properties>
+
+<body>
+
+<section name="10. Remote Testing">
+
+<p>In most real world web application environments the machine running the web 
+application is not the machine which is sitting on your desk. However to get a 
+true estimate of performance you would like to be measuring the true response 
+time of your server, not any (highly variable) network bottle-necks that might 
+exist between you and the machine on which your web application is running. At 
+the same time using a GUI especially a Java GUI over the network is at best 
+painful (using Un*x and X) and at times not possible (using windows). 
+</p>
+<p>To solve this problem JMeter provides a client-server architecture for load 
+and performance testing which allows the JMeterEngine (the tester) to reside 
+and run on your application server while the configuration GUI and visualization 
+executes on the development machine. This offers a number of features: 
+
+<ul>
+<li>True performance measurment without network bottlenecks </li>
+<li>Fast responsive GUI </li>
+<li>Saving of test samples to a local machine </li>
+<li>Managment of multiple JMeterEngines from a single machine </li>
+</ul>
+
+</p>
+
+<p><b>Step 1: Start the RMI Registry</b></p>
+<p>JMeter uses Remote Method Invocation (RMI) as the remote communication mechanism.  Therefore, you need
+to run the RMI Registry application (which is named, "rmiregistry") that comes with the JDK and is located in the "bin" 
+directory.  Before running rmiregistry, make sure that the JMeter's core JAR file (JMETER_HOME/lib/ext/ApacheJMeter_core.jar) is in your CLASSPATH environment variable.  The 
+rmiregistry application needs access to certain JMeter classes.  Run rmiregistry with no parameters.  By default the 
+application listens to port 1099.</p>
+
+<p><b>Step 2: Start the JMeter Server</b></p>
+<p>Once the RMI Registry application is running, start the JMeter Server.  
+Use the "-s" option with the jmeter startup script ("jmeter -s").</p>
+
+<p><b>Step 3: Add the server IP to your client's Properties File</b></p>
+<p>Edit the properties file <i>on the controlling JMeter machine</i>.  In /bin/jmeter.properties, find the property named, "remote_hosts", and   
+add the value of your running JMeter server's IP address.  Multiple such servers can be added, comma-delimited.</p>
+
+<p><b>Step 4: Start the JMeter Client</b></p>
+<p>Now you are ready to start the controlling JMeter client. For MS-Windows, start the client with the script "bin/jmeter.bat".  For UNIX, 
+use the script "bin/jmeter".  You will notice that the Run menu contains two new sub-menus: "Remote Start" and "Remote Stop" 
+(see figure 1). These menus contain the client that you set in the properties file.  Use the remote start and stop instead of the 
+normal JMeter start and stop menu items.</p>
+<p><img src="../images/screenshots/remote/run-menu00.gif" width="232" height="156"></img>
+<br>Figure 1 - Run Menu</br></p>
+
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/usermanual/test_plan.xml b/jakarta-jmeter/xdocs/usermanual/test_plan.xml
new file mode 100644
index 0000000..5533902
--- /dev/null
+++ b/jakarta-jmeter/xdocs/usermanual/test_plan.xml
@@ -0,0 +1,246 @@
+<?xml version="1.0"?>
+<document>
+
+<properties>
+  <title>User's Manual: Thread Group</title>
+</properties>
+
+<body>
+
+<section name="4.0 Elements of a Test Plan">
+
+<p>The Test Plan object has a new checkbox to select called "Functional Testing".  If selected, it
+will cause JMeter to record the data returned from the server for each sample.  If you have 
+selected a file in your test listeners, this data will be written to file.  This can be useful if
+you are doing a small run to ensure that JMeter is configured correctly, and that your server
+is returning the expected results.  The consequence is that the file will grow huge quickly, and
+JMeter's performance will suffer.  This option should be off if you are doing stress-testing (it
+is off by default).  </p>
+<p>If you are not recording the data to file, this option makes no difference.</p>
+
+<subsection name="4.1 ThreadGroup" anchor="thread_group">
+<p>Thread group elements are the beginning points of any test plan.  All elements
+of a test plan must be under a thread group.  As the name implies, the thread group
+element controls the number of threads JMeter will use to execute your test.  The
+controls for a thread group allow you to:
+<ul><li>Set the number of threads</li>
+<li>Set the ramp-up period</li>
+<li>Set the number of times to execute the test</li>
+</ul></p>
+
+<p>Each thread will execute the test plan in its entirety and completely independently
+of other test threads.  Multiple threads are used to simulate concurrent connections
+to your server application.</p>
+
+<p>The ramp-up period tells JMeter how long to take to "ramp-up" to the full number of
+threads chosen.  If 10 threads are used, and the ramp-up period is 100 seconds, then
+JMeter will take 100 seconds to get all 10 threads up and running.  Each thread will
+start 10 (100/10) seconds after the previous thread was begun.  If there are 30 threads
+and a ramp-up period of 120 seconds, then each successive thread will be delayed by 4 seconds.</p>
+
+<p>By default, a thread group is configured to loop indefinitely through its elements.
+Alternatively, you can set the number of times the thread group will loop before ending.  If the number
+is set at one, then JMeter will execute the test only once before stopping.</p>
+</subsection>
+
+<subsection name="4.2 Controllers" anchor="controllers">
+
+<p> JMeter has two types of Controllers: Samplers and Logical Controllers.</p>
+
+<p>Samplers tell JMeter to send requests to a server. For
+example, add an HTTP Request Sampler if you want JMeter
+to send an HTTP request.  You can also customize a request by adding one
+or more Configuration Elements to a Sampler.  For more
+information, see
+<a href="#samplers">Samplers</a>.</p>
+
+<p>Logical Controllers let you customize the logic that JMeter uses to
+decide when to send requests.  For example, you can add an Interleave
+Logic Controller to alternate between two HTTP Request Samplers.  Also,
+one particular Logic Controller, the Modification Manager, lets you modify
+the results of a request.  For more information,
+see <a href="#logic_controller">Logical Controllers</a>.</p>
+
+</subsection>
+
+<subsection name="4.2.1 Samplers" anchor="samplers">
+
+<p>Samplers tell JMeter to send requests to a server. JMeter
+currently has four such samplers: FTP Request, HTTP Request, JDBC Request, and
+the Java object request.  Each sampler has several properties you can set.
+You can further customize a sampler by adding one or more Configuration Elements to it.
+Also, note that JMeter sends requests in the order that you add them to the tree.</p>
+
+<p>If you are going to send multiple requests of the same type (for example,
+HTTP Request) to the same server, consider using a Defaults Configuration
+Element. Each controller has one or more Defaults elements (see below). </p>
+
+<p>Remember to add a Listener to your Thread Group to view and/or store the
+results of your requests to disk.</p>
+
+<p>If you are interested in having JMeter perform basic validation on
+the response of your request, add an <a href="#assertions">Assertion</a> to
+the Request controller.  For example, in stress testing a web application, the server
+may return a successful "HTTP Response" code, but the page may have errors on it or
+may be missing sections. You could add assertions to check for certain HTML tags,
+common error strings, and so on. JMeter lets you create these assertions using regular
+expressions.</p>
+
+<p><a href="component_reference.html#samplers">JMeter's built-in samplers</a></p>
+</subsection>
+
+<subsection name="4.2.2 Logic Controllers" anchor="logic_controller">
+<p>Logic Controllers let you customize the logic that JMeter uses to
+decide when to send requests.  Logic Controllers may have as child elements any
+of the following: Samplers (requests), Configuration Elements, and other Logic
+Controllers.  Logic Controllers can change the order of requests coming from their
+child elements.  They can modify the requests themselves, cause JMeter to repeat
+requests, etc.
+</p>
+
+<p>To understand the effect of Logic Controllers on a test plan, consider the
+following test tree:</p>
+
+<p>
+<ul>
+<li>Test Plan</li>
+	<ul>
+	<li>Thread Group</li>
+		<ul>
+		<li>Once Only Controller</li>
+			<ul>
+			<li>Login Request (an <complink name="HTTP Request"/>)</li>
+			</ul>
+		<li>Load Search Page (HTTP Sampler)</li>
+		<li>Interleave Controller</li>
+			<ul>
+			<li>Search "A" (HTTP Sampler)</li>
+			<li>Search "B" (HTTP Sampler)</li>
+			<li>HTTP default request (Configuration Element)</li>
+			</ul>
+		<li>HTTP default request (Configuration Element)</li>
+		<li>Cookie Manager (Configuration Element)</li>
+		</ul>
+	</ul>
+</ul>
+</p>
+
+<p>The first thing about this test is that the login request will be executed only
+the first time through.  Subsequent iterations will skip it.  This is due to the
+effects of the <complink name="Once Only Controller"/>.</p>
+
+<p>After the login, the next Sampler loads the search page (imagine a
+web application where the user logs in, and then goes to a search page to do a search).  This
+is just a simple request, not filtered through any Logic Controller.</p>
+
+<p>After loading the search page, we want to do a search.  Actually, we want to do
+two different searches.  However, we want to re-load the search page itself between
+each search.  We could do this by having 4 simple HTTP request elements (load search,
+search "A", load search, search "B").  Instead, we use the <complink name="Interleave
+Controller"/> which passes on one child request each time through the test.  It keeps the
+ordering (ie - it doesn't pass one on at random, but "remembers" its place) of its
+child elements.  Interleaving 2 child requests may be overkill, but there could easily have
+been 8, or 20 child requests.</p>
+
+<p>Note the <complink name="HTTP Request Defaults"/> that
+belongs to the Interleave Controller.  Imagine that "Search A" and "Search B" share
+the same PATH info (an HTTP request specification includes domain, port, method, protocol,
+path, and arguments, plus other optional items).  This makes sense - both are search requests,
+ hitting the same back-end search engine (a servlet or cgi-script, let's say).  Rather than
+ configure both HTTP Samplers with the same information in their PATH field, we
+ can abstract that information out to a single Configuration Element.  When the Interleave
+ Controller "passes on" requests from "Search A" or "Search B", it will fill in the blanks with
+ values from the HTTP default request Configuration Element.  So, we leave the PATH field
+ blank for those requests, and put that information into the Configuration Element.  In this
+case, this is a minor benefit at best, but it demonstrates the feature.</p>
+
+<p>The next element in the tree is another HTTP default request, this time added to the
+Thread Group itself.  The Thread Group has a built-in Logic Controller, and thus, it uses
+this Configuration Element exactly as described above.  It fills in the blanks of any
+Request that passes through.  It is extremely useful in web testing to leave the DOMAIN
+field blank in all your HTTP Sampler elements, and instead, put that information
+into an HTTP default request element, added to the Thread Group.  By doing so, you can
+test your application on a different server simply by changing one field in your Test Plan.
+Otherwise, you'd have to edit each and every Sampler.</p>
+
+<p>The last element is a <complink name="HTTP Cookie
+Manager"/>.  A Cookie Manager should be added to all web tests - otherwise JMeter will
+ignore cookies.  By adding it at the Thread Group level, we ensure that all HTTP requests
+will share the same cookies.</p>
+
+<p>Logic Controllers can be combined to achieve various results.  See the list of <a href="component_reference.html#logic_controllers">built-in
+Logic Controllers</a>.</p>
+</subsection>
+
+<subsection name="4.3 Listeners" anchor="listeners">
+<p>Listeners provide access to the information JMeter gathers about the test cases while
+JMeter runs.  The simplest listener, the <complink name="Graph
+Results"/> listener plots the response times on a graph.  Listeners provide a
+graphical view of the data that JMeter generates.</p>
+
+<p>Additionally, listeners can direct the data they collect to a file for later use.  Every 
+listener in JMeter provides a field to indicate the file to store data to.</p>
+
+<p>Listeners can be added anywhere in the test.  They will collect data only from elements at or 
+below their level.  </p>
+
+<p>There are several <a href="component_reference.html#listeners">interesting listeners</a>
+that come with JMeter.</p>
+</subsection>
+
+<subsection name="4.4 Timers" anchor="timers">
+
+<p>By default, a JMeter thread sends requests without pausing between each request.
+We recommend that you specify a delay by adding one of the three timers to
+your Thread Group. If you do not add a delay, JMeter could overwhelm your server by
+making too many requests in a very short amount of time.</p>
+
+<p>The timer will cause JMeter to delay a certain amount of time between each
+request that a thread makes.  Remember, threads are independent of one
+another, and this applies to the timer delay as well.</p>
+
+<p>
+If you choose to add more than one timer to a Thread Group, JMeter takes the sum of
+the timers and pauses for that amount of time.</p>
+</subsection>
+
+<subsection name="4.5 Assertions" anchor="assertions">
+
+<p>Assertions allow you to assert facts about responses received from the
+server being tested. Using an assertion, you can essentially "test" that your
+application is returning the results you expect it to. </p>
+
+<p>For instance, you can assert that the response to a query will contain some
+particular text. The text you specify can be a Perl-style regular expression, and
+you can indicate that the response is to contain the text, or that it should match
+the whole response.</p>
+
+<p>You can add an assertion to any Sampler. For example, you can
+add an assertion to a HTTP Request that checks for the text, "&lt;/HTML&gt;".  JMeter
+will then check that the text is present in the HTTP response.  If JMeter cannot find the
+text, then it will mark this as a failed request.</p>
+
+<p>To view the assertion results, add an Assertion Listener to the Thread Group.</p>
+</subsection>
+
+<subsection name="4.6 Configuration Elements" anchor="config_elements">
+<p>A configuration element works closely with a Sampler.  Although it does not send requests
+(except for <complink name="HTTP Proxy Server"/>), it can add to or modify requests.</p>
+
+<p>A configuration element is accessible from only inside the tree branch where you place the element.
+For example, if you place an HTTP Cookie Manager inside a Simple Logic Controller, the Cookie Manager will
+only be accessible to HTTP Request Controllers you place inside the Simple Logic Controller (see figure 1).
+The Cookie Manager is accessible to the HTTP requests "Web Page 1" and "Web Page 2", but not "Web Page 3".  </p>
+<p>Also, a configuration element inside a tree branch has higher precedence than the same element in a "parent"
+branch.  For example, we defined two HTTP Request Defaults elements, "Web Defaults 1" and "Web Defaults 2".
+Since we placed "Web Defaults 1" inside a Loop Controller, only "Web Page 2" can access it.  The other HTTP
+requests will use "Web Defaults 2", since we placed it in the Thread Group (the "parent" of all other branches).</p>
+
+<figure image="../images/screenshots/http-config/http-config-example.gif">Figure 1 -
+	Test Plan Showing Accessability of Configuration Elements</figure>
+</subsection>
+
+</section>
+
+</body>
+</document>
diff --git a/jakarta-jmeter/xdocs/velocity.properties b/jakarta-jmeter/xdocs/velocity.properties
new file mode 100644
index 0000000..143a074
--- /dev/null
+++ b/jakarta-jmeter/xdocs/velocity.properties
@@ -0,0 +1 @@
+resource.loader.1.resource.path = ../jakarta-site2/xdocs/stylesheets
\ No newline at end of file
